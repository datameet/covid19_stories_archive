(self.AMP=self.AMP||[]).push({n:"amp-consent",v:"2005151844001",f:(function(AMP,_){
var g,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={a:!0},ea={};try{ea.__proto__=da;ca=ea.a;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=ba;function ha(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var ia=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;var ja=Object.prototype.toString;function m(a){return"[object Object]"===ja.call(a)}function ka(a){return"number"===typeof a&&isFinite(a)}function la(a,b){for(var c in a)if(a[c]===b)return!0;return!1};var q=self.AMP_CONFIG||{},ma=("string"==typeof q.cdnProxyRegex?new RegExp(q.cdnProxyRegex):q.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function na(a){if(!self.document||!self.document.head||self.location&&ma.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}
var oa={thirdParty:q.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:q.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof q.thirdPartyFrameRegex?new RegExp(q.thirdPartyFrameRegex):q.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:q.cdnUrl||na("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:ma,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:q.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:q.betaErrorReportingUrl||
"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:q.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:q.geoApiUrl||na("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var r=self.__AMP_LOG;function u(a){r.user||(r.user=pa());var b=r.user.win;return a&&a.ownerDocument.defaultView!=b?r.userForEmbed?r.userForEmbed:r.userForEmbed=pa():r.user}function pa(){throw Error("failed to call initLogConstructor");}function v(){if(r.dev)return r.dev;throw Error("failed to call initLogConstructor");}function w(a,b,c,d,e){return u().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)};var y=Object.prototype.hasOwnProperty;function z(a){var b=Object.create(null);a&&Object.assign(b,a);return b}function A(a){return a||{}}
function qa(a,b){var c=1;c=void 0===c?10:c;var d=[],e=[];e.push({t:a,s:b,d:0});for(b={};0<e.length;){var f=e.shift();b.G=f.t;b.F=f.s;b.Z=f.d;if(d.includes(b.F))throw Error("Source object has a circular reference.");d.push(b.F);b.G!==b.F&&(b.Z>c?Object.assign(b.G,b.F):Object.keys(b.F).forEach(function(a){return function(b){var c=a.F[b];if(y.call(a.G,b)){var d=a.G[b];if(m(c)&&m(d)){e.push({t:d,s:c,d:a.Z+1});return}}a.G[b]=c}}(b)));b={F:b.F,G:b.G,Z:b.Z}}return a};var ra={ACCEPTED:1,REJECTED:2,DISMISSED:3,NOT_REQUIRED:4,UNKNOWN:5};function B(a){return a?y.call(a,"isDirty")&&1==a.isDirty?!0:!1:!1}function sa(a){return 1==a?!0:2==a?!1:null}function ta(a,b,c){if(!a&&!b)return!0;if(a&&b){var d=sa(a.consentState)===sa(b.consentState),e=(a.consentString||"")===(b.consentString||"");var f=c?!!a.isDirty===!!c:!!a.isDirty===!!b.isDirty;return d&&e&&f}return!1}function C(a,b,c){return{consentState:a,consentString:b,isDirty:c}}
function ua(a){return!0===a||1===a?1:!1===a||0===a?2:5}function va(a){return a.consentString?!0:1===a.consentState||2===a.consentState}function D(a){return 1===a?"accepted":2===a?"rejected":"unknown"};var wa={appconsent:{consentInstanceId:"appconsent",checkConsentHref:"https://collector.appconsent.io/amp/check-consent",promptUISrc:"https://cdn.appconsent.io/loader.html"},didomi:{consentInstanceId:"didomi",checkConsentHref:"https://api.privacy-center.org/amp/check-consent",promptUISrc:"https://sdk-amp.privacy-center.org/loader.html"},sirdata:{consentInstanceId:"sirdata",checkConsentHref:"https://sddan.mgr.consensu.org/api/v1/public/amp/check",promptUISrc:"https://ui.sddan.mgr.consensu.org/amp.html"},
Marfeel:{consentInstanceId:"Marfeel",checkConsentHref:"https://live.mrf.io/cmp/consents/amp",promptUISrc:"https://marfeel.mgr.consensu.org/amp/index.html"},Ogury:{consentInstanceId:"Ogury",checkConsentHref:"https://api.ogury.mgr.consensu.org/v1/check-for-consent",promptUISrc:"https://www.ogury.mgr.consensu.org/amp.html"},SourcePoint:{consentInstanceId:"SourcePoint",checkConsentHref:"https://sourcepoint.mgr.consensu.org/consent/v2/amp",promptUISrc:"https://amp.pm.sourcepoint.mgr.consensu.org/"}};function F(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var xa;function G(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};function ya(a,b){a.insertBefore(b,a.firstChild)}function za(a){/^[\w-]+$/.test("placeholder");return a.querySelector("placeholder")}function Aa(a){a=a.tagName;return G(a,"AMP-")&&!("AMP-STICKY-AD-TOP-PADDING"==a||"AMP-BODY"==a)}function Ba(a){Aa(a);if(a.createdCallback)return Promise.resolve(a);if(!a.__AMP_UPG_PRM){var b=new F;a.__AMP_UPG_PRM=b.promise;a.__AMP_UPG_RES=b.resolve}return a.__AMP_UPG_PRM};function H(){this.Wa=100;this.oa=this.Da=0;this.$=Object.create(null)}H.prototype.has=function(a){return!!this.$[a]};H.prototype.get=function(a){var b=this.$[a];if(b)return b.access=++this.oa,b.payload};H.prototype.put=function(a,b){this.has(a)||this.Da++;this.$[a]={payload:b,access:this.oa};if(!(this.Da<=this.Wa)){v().warn("lru-cache","Trimming LRU cache");a=this.$;var c=this.oa+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.Da--)}};var Ca=A({c:!0,v:!0,a:!0,ad:!0,action:!0}),Da,Ea,Fa=/[?&]amp_js[^&]*/,Ga=/[?&]amp_gsa[^&]*/,Ha=/[?&]amp_r[^&]*/,Ia=/[?&]amp_kit[^&]*/,Ja=/[?&]usqp[^&]*/;
function I(a){Da||(Da=self.document.createElement("a"),Ea=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new H));var b=Ea,c=Da;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=
c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}
function Ka(a,b){var c=void 0===c?"source":c;w(null!=a,"%s %s must be available",b,c);var d=a;"string"==typeof d&&(d=I(d));var e;(e="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname)||(d=d.hostname,e=d.length-10,e=0<=e&&d.indexOf(".localhost",e)==e);w(e||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a);return a}
function La(a){"string"==typeof a&&(a=I(a));var b=a;"string"==typeof b&&(b=I(b));if(!oa.cdnProxyRegex.test(b.origin))return a.href;b=a.pathname.split("/");w(Ca[b[1]],"Unknown path prefix in url %s",a.href);var c=b[2],d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);w(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(Fa,"").replace(Ga,"").replace(Ha,"").replace(Ia,"").replace(Ja,"").replace(/^[?&]/,
""))?"?"+d:"":"";return b+d+(a.hash||"")}function Ma(a,b){"string"==typeof b&&(b=I(b));if("function"==typeof URL)var c=(new URL(a,b.href)).toString();else{c=a;var d=b;"string"==typeof d&&(d=I(d));c=c.replace(/\\/g,"/");var e=I(c);c=G(c.toLowerCase(),e.protocol)?e.href:G(c,"//")?d.protocol+c:G(c,"/")?d.origin+c:d.origin+d.pathname.replace(/\/[^/]*$/,"/")+c}return c};function Na(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){var d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var e=a.AMP_CONFIG["allow-doc-opt-in"],f=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');
if(f){var h=f.getAttribute("content").split(",");for(c=0;c<h.length;c++)-1!=e.indexOf(h[c])&&(b[h[c]]=!0)}}Object.assign(b,Oa(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];var k=a.location.originalHash||a.location.hash;a=Object.create(null);if(k)for(var l;l=ia.exec(k);){var t=ha(l[1],l[1]);l=l[2]?ha(l[2].replace(/\+/g," "),l[2]):"";a[t]=l}for(k=0;k<c.length;k++)t=a["e-"+c[k]],"1"==t&&(b[c[k]]=!0),
"0"==t&&(b[c[k]]=!1)}return b}function Oa(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){v().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};var Pa={},J=(Pa["ampdoc-fie"]={isTrafficEligible:function(){return!0},branches:[["21065001"],["21065002"]]},Pa);function K(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return L(a,b)}function M(a,b){var c=N(a);c=O(c);return L(c,b)}function P(a,b){a=O(a);var c=Qa(a,b);c?b=c:(a=Ra(a),a[b]=Sa(),b=a[b].promise);return b}function N(a){return a.nodeType?K((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function O(a){a=N(a);return a.isSingleDoc()?a.win:a}function L(a,b){Ta(a,b);a=Ra(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}
function Qa(a,b){var c=Ra(a)[b];if(c){if(c.promise)return c.promise;L(a,b);return c.promise=Promise.resolve(c.obj)}return null}function Ra(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function Ta(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}function Sa(){var a=new F,b=a.promise,c=a.resolve;a=a.reject;b.catch(function(){});return{obj:null,promise:b,resolve:c,reject:a,context:null,ctor:null}};var Ua;function Q(){return Ua?Ua:Ua=Promise.resolve(void 0)};function Va(a){var b=Qa(O(a),"geo");if(b)return b;var c=N(a);return c.waitForBodyOpen().then(function(){var a=c.win;var b=c.win.document.head;if(b){var f={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(var h=0;h<b.length;h++){var k=b[h];k=k.getAttribute("custom-element")||k.getAttribute("custom-template");f[k]=!0}f=Object.keys(f)}else f=[];return f.includes("amp-geo")?K(a,"extensions").waitForExtension(a,"amp-geo"):Q()}).then(function(){return Qa(O(a),"geo")})};var Wa={promptUI:!0,checkConsentHref:!0,promptIfUnknownForGeoGroup:!0,onUpdateHref:!0};function Xa(a){this.fa=a;this.pa=this.U=null}Xa.prototype.getConsentConfigPromise=function(){this.pa||(this.pa=Ya(this));return this.pa};Xa.prototype.getMatchedGeoGroup=function(){return this.U};
function Za(a){if(!a.consents)return a;var b=Object.keys(a.consents);w(1>=b.length,"%s: only single consent instance is supported","amp-consent/consent-config");if(0<b.length){a.consentInstanceId=b[0];var c=a.consents[b[0]],d=Object.keys(c);for(b=0;b<d.length;b++){var e=d[b];!a[e]&&Wa[e]&&(a[d[b]]=c[d[b]])}}delete a.consents;return a}
function Ya(a){var b=Za(w($a(a),"%s: Inline config not found")),c=ab(a),d=qa(c||{},b||{});w(d.consentInstanceId,"%s: consentInstanceId to store consent info is required","amp-consent/consent-config");if(d.policy)for(var e=Object.keys(d.policy),f=0;f<e.length;f++)"default"!=e[f]&&(u().warn("amp-consent/consent-config","policy %s is currently not supported and will be ignored",e[f]),delete d.policy[e[f]]);var h=d.promptIfUnknownForGeoGroup;"string"===typeof h?(d.consentRequired=!1,e={},d.geoOverride=
(e[h]={consentRequired:!0},e)):void 0===d.consentRequired&&d.checkConsentHref&&(d.consentRequired="remote");return bb(a,d).then(function(a){var b=a.consentRequired;w("boolean"===typeof b||"remote"===b,"`consentRequired` is required","amp-consent/consent-config");"remote"===b&&w(a.checkConsentHref,"%s: `checkConsentHref` must be specified if `consentRequired` is remote","amp-consent/consent-config");return a})}
function bb(a,b){return b.geoOverride?Va(a.fa).then(function(c){w(c,"%s: requires <amp-geo> to use `geoOverride`","amp-consent/consent-config");for(var d=z(b),e=Object.keys(b.geoOverride),f=0;f<e.length;f++)if(2===c.isInCountryGroup(e[f])){var h=b.geoOverride[e[f]];y.call(h,"consentInstanceId")&&(u().error("amp-consent/consent-config","consentInstanceId cannot be overriden in geoGroup:",e[f]),delete h.consentInstanceId);qa(d,h);a.U=e[f];break}delete d.geoOverride;return d}):Promise.resolve(b)}
function $a(a){try{var b=a.fa;/^[\w-]+$/.test("script");if(void 0!==xa)var c=xa;else{try{var d=b.ownerDocument,e=d.createElement("div"),f=d.createElement("div");e.appendChild(f);var h=e.querySelector(":scope div")===f}catch(n){h=!1}c=xa=h}if(c)var k=b.querySelectorAll("> script".replace(/^|,/g,"$&:scope "));else{b.classList.add("i-amphtml-scoped");var l="> script".replace(/^|,/g,"$&.i-amphtml-scoped "),t=b.querySelectorAll(l);b.classList.remove("i-amphtml-scoped");k=t}var p=k;if(1!==p.length)throw Error("Found "+
p.length+" <script> children. Expected 1.");var E=p[0];if("SCRIPT"!=E.tagName||!E.hasAttribute("type")||"APPLICATION/JSON"!=E.getAttribute("type").toUpperCase())throw Error('<script> child must have type="application/json"');try{var x=JSON.parse(E.textContent)}catch(n){throw Error("Failed to parse <script> contents. Is it valid JSON?");}return x}catch(n){throw u(a.fa).createError("amp-consent/consent-config",n);}}
function ab(a){a=a.fa.getAttribute("type");if(!a)return null;w(wa[a],"%s: invalid CMP type %s","amp-consent/consent-config",a);var b=wa[a];a=["consentInstanceId","checkConsentHref","promptUISrc"];for(var c=0;c<a.length;c++);return b}
function cb(a,b){var c={};c[b]=void 0;var d={waitFor:c},e=[4,1,2,3],f={waitFor:c,timeout:{seconds:0,fallbackAction:"reject"},unblockOn:e};a._till_responded={waitFor:c,unblockOn:e};a._till_accepted=d;a._auto_reject=f;if(a&&a["default"])return a;a["default"]=d;return a};function db(){this.B=null}g=db.prototype;g.add=function(a){var b=this;this.B||(this.B=[]);this.B.push(a);return function(){b.remove(a)}};g.remove=function(a){this.B&&(a=this.B.indexOf(a),-1<a&&this.B.splice(a,1))};g.removeAll=function(){this.B&&(this.B.length=0)};g.fire=function(a){if(this.B)for(var b=this.B,c=0;c<b.length;c++)(0,b[c])(a)};g.getHandlerCount=function(){return this.B?this.B.length:0};var eb={"default":!0,_till_responded:!0,_till_accepted:!0,_auto_reject:!0};function fb(a){this.l=a;this.K=z();this.H=z();this.na=P(this.l,"consentStateManager");this.Ka=new F;var b=new F;this.Za=b.promise;this.ta=b.resolve;this.La=new db;this.ca=this.D=this.Ja=null}g=fb.prototype;g.setLegacyConsentInstanceId=function(a){this.Ja=a;this.R()};
g.registerConsentPolicyInstance=function(a,b){var c=this;if(!this.H[a]){var d=Object.keys(b.waitFor||{});if(1!==d.length||d[0]!==this.Ja)u().error("consent-policy-manager","invalid waitFor value, consent policy will never resolve");else{var e=new gb(b);this.H[a]=e;this.K[a]&&(this.K[a].resolve(),this.K[a]=null);this.Za.then(function(){c.D&&e.evaluate(c.D);c.La.add(function(a){e.evaluate(a)});c.Ka.promise.then(function(){e.startTimeout(c.l.win)})})}}};
g.R=function(){var a=this;this.na.then(function(b){b.whenConsentReady().then(function(){b.onConsentStateChange(function(b){var c=b.consentState,e=a.ca;a.ca=b.consentString;5!==c&&(4==c?1!=a.D&&2!=a.D&&(a.D=4):3==c?(null===a.D&&(a.D=5),a.ca=e):a.D=c,a.La.fire(a.D));a.ta&&(a.ta(),a.ta=null)})})})};g.enableTimeout=function(){this.Ka.resolve()};
g.whenPolicyResolved=function(a){var b=this;return eb[a]?hb(this,a).then(function(){return b.H[a].getReadyPromise().then(function(){return b.H[a].getCurrentPolicyStatus()})}):(u().error("consent-policy-manager","can not find policy %s, only predefined policies are supported",a),Promise.resolve(4))};
g.whenPolicyUnblock=function(a){var b=this;return eb[a]?hb(this,a).then(function(){return b.H[a].getReadyPromise().then(function(){return b.H[a].shouldUnblock()})}):(u().error("consent-policy-manager","can not find policy %s, only predefined policies are supported",a),Promise.resolve(!1))};g.getMergedSharedData=function(a){var b=this;return this.whenPolicyResolved(a).then(function(){return b.na}).then(function(a){return a.getConsentInstanceSharedData()})};g.getGdprApplies=function(a){var b=this;return this.whenPolicyResolved(a).then(function(){return b.na}).then(function(a){return a.getConsentInstanceGdprApplies()})};
g.getConsentStringInfo=function(a){var b=this;return this.whenPolicyResolved(a).then(function(){return b.ca})};function hb(a,b){if(a.H[b])return Q();a.K[b]||(a.K[b]=new F);return a.K[b].promise}function gb(a){this.Xa=a;var b=new F;this.bb=b.promise;this.ka=b.resolve;this.Ea=4;this.eb=a.unblockOn||[1,3]}g=gb.prototype;
g.startTimeout=function(a){var b=this,c=this.Xa.timeout,d=null,e;void 0!=c&&(m(c)?(c.fallbackAction&&"reject"==c.fallbackAction?e=2:c.fallbackAction&&"dismiss"!=c.fallbackAction&&u().error("consent-policy-manager","unsupported fallbackAction %s",c.fallbackAction),d=c.seconds):d=c,w(ka(d),"invalid timeout value %s",d));null!=d&&a.setTimeout(function(){e=e||5;b.evaluate(e,!0)},1E3*d)};
g.evaluate=function(a,b){b=void 0===b?!1:b;!a||b&&!this.ka||(this.Ea=1===a?1:2===a?2:4===a?3:4,this.ka&&(this.ka(),this.ka=null))};g.getReadyPromise=function(){return this.bb};g.getCurrentPolicyStatus=function(){return this.Ea};g.shouldUnblock=function(){return-1<this.eb.indexOf(this.Ea)};function ib(a){this.l=a;this.ba=this.ra=this.qa=this.A=this.Na=null}g=ib.prototype;g.registerConsentInstance=function(a,b){this.A?v().error("CONSENT-STATE-MANAGER","Cannot register consent instance %s, instance %s has already been registered.",a,this.Na):(this.Na=a,this.A=new R(this.l,a,b),this.ba&&(this.ba(),this.ba=null))};g.updateConsentInstanceState=function(a,b){this.A?(this.A.update(a,b,!1),this.qa&&this.qa(C(a,b))):v().error("CONSENT-STATE-MANAGER","instance not registered")};
g.getLastConsentInstanceInfo=function(){return this.A.get()};g.getConsentInstanceInfo=function(){return this.A.get().then(function(a){return B(a)?C(5):a})};g.onConsentStateChange=function(a){this.qa=a;this.getConsentInstanceInfo().then(function(b){a(b)})};g.setConsentInstanceSharedData=function(a){this.A.sharedDataPromise=a};g.setConsentInstanceGdprApplies=function(a){this.A.gdprAppliesPromise=a};g.setDirtyBit=function(){this.A.setDirtyBit()};g.getConsentInstanceSharedData=function(){return this.A.sharedDataPromise};
g.getConsentInstanceGdprApplies=function(){return this.A.gdprAppliesPromise};g.whenConsentReady=function(){if(this.A)return Q();if(!this.ra){var a=new F;this.ra=a.promise;this.ba=a.resolve}return this.ra};g.ib=function(){return this.A.X};function R(a,b,c){this.l=a;this.ab=b;this.gdprAppliesPromise=this.sharedDataPromise=null;this.Ta=P(a,"storage");this.X=this.m=null;this.Y="amp-consent:"+b;(this.ia=c.onUpdateHref||null)&&Ka(this.ia,"AMP-CONSENT");this.va=void 0}
R.prototype.setDirtyBit=function(){var a=this;this.va=!0;return this.get().then(function(b){B(b)||a.update(b.consentState,b.consentString,!0)})};R.prototype.update=function(a,b,c){var d=a;var e=this.m&&this.m.consentState;la(ra,d)||(d=5);d=3==d?e||5:4==d&&e&&5!=e?e:d;if(3===a)this.m=C(d,this.m&&this.m.consentString);else{a=this.m;c&&B(a)?this.m=C(d,b,!0):this.m=C(d,b);var f=C(d,b,this.va);ta(f,this.X)||jb(this,f)}};
function jb(a,b){a.Ta.then(function(c){if(ta(b,a.m,a.va))if(5===b.consentState)c.remove(a.Y);else{var d=b.consentString;if(d&&200<d.length)u().error("CONSENT-STATE-MANAGER","Cannot store consentString which length exceeds %s. Previous stored consentInfo will be cleared",200),c.remove(a.Y);else{a:{d=z();var e=b.consentState;if(1==e)d.s=1;else if(2==e)d.s=0;else{d=null;break a}b.consentString&&(d.r=b.consentString);!0===b.isDirty&&(d.d=1);d=0==Object.keys(d)?null:d}null!=d&&(a.X=b,c.setNonBoolean(a.Y,
d),kb(a,b))}}})}
R.prototype.get=function(){var a=this;if(this.m)return Promise.resolve(this.m);var b;return this.Ta.then(function(c){b=c;return b.get(a.Y)}).then(function(c){if(a.m)return a.m;if(void 0===c)var d=C(5,void 0,void 0);else if("boolean"===typeof c)d=ua(c),d=C(d,void 0,void 0);else{if(!m(c))throw v().createError("Invalid stored consent value");d=ua(c.s);d=C(d,c.r,c.d&&1===c.d)}a.X=d;B(d)&&(kb(a,C(5)),b.remove(a.Y),a.X=null);a.m=d;return a.m}).catch(function(a){v().error("CONSENT-STATE-MANAGER","Failed to read storage",
a);return C(5)})};function kb(a,b){if(a.ia&&!B(b)){var c=sa(b.consentState);P(a.l,"cid").then(function(a){return a.get({scope:"AMP-CONSENT",createCookieIfNotPresent:!0},Q())}).then(function(d){var e={consentInstanceId:a.ab,ampUserId:d};null!=c&&(e.consentState=c);e.consentStateValue=D(b.consentState);b.consentString&&(e.consentString=b.consentString);var f={credentials:"include",method:"POST",body:e,ampCors:!1};a.l.whenFirstVisible().then(function(){K(a.l.win,"xhr").fetchJson(a.ia,f)})})}};var S;var T,lb="Webkit webkit Moz moz ms O o".split(" ");function mb(a,b,c){if(G(b,"--"))return b;T||(T=z());var d=T[b];if(!d||c){d=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var f=0;f<lb.length;f++){var h=lb[f]+e;if(void 0!==a[h]){e=h;break a}}e=""}var k=e;void 0!==a[k]&&(d=k)}c||(T[b]=d)}return d}function nb(a,b,c){(b=mb(a.style,b,void 0))&&(G(b,"--")?a.style.setProperty(b,c):a.style[b]=c)}
function U(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")};var ob=['<svg viewBox="0 0 40 40"><defs><linearGradient id=grad><stop stop-color="rgb(105, 105, 105)"></stop><stop offset=100% stop-color="rgb(105, 105, 105)" stop-opacity=0></stop></linearGradient></defs><path d="M11,4.4 A18,18, 0,1,0, 38,20" stroke=url(#grad)></path></svg>'];
function V(a,b,c){this.C=a;this.ha=this.za=this.Aa=this.S=this.ya=!1;this.h=null;this.Oa=b.uiConfig&&!0===b.uiConfig.overlay;this.Ya=b.captions&&b.captions.consentPromptCaption||"User Consent Prompt";this.Va=b.captions&&b.captions.buttonActionCaption||"Focus Prompt";this.Sa=!1;this.Ca=!!Na(a.win)["amp-consent-restrict-fullscreen"];this.M=!0;this.P=this.ma=this.T=null;this.l=a.getAmpDoc();this.Fa=M(this.l,"viewport");this.Ua=M(this.l,"viewer");this.j=a.element;this.N=a.win;this.J=this.N.document;this.W=
this.Ia=this.wa=null;this.ga="30vh";this.ua=!0;this.xa=!1;this.Ha=this.$a.bind(this);this.R(b,c)}
V.prototype.R=function(a,b){if(b){var c=this.l.getElementById(b);c||u().error("amp-consent-ui","postPromptUI element with id=%s not found",b);this.h=c;this.S=!0}else{var d=a.promptUI,e=a.promptUISrc;if(d){var f=this.l.getElementById(d);f&&this.j.contains(f)||u().error("amp-consent-ui","child element of <amp-consent> with promptUI id %s not found",d);this.h=f}else if(e){this.ya=!0;b=this.j.ownerDocument.createElement("iframe");var h=["allow-scripts","allow-popups"];b.src=Ka(e,this.j);var k=b.src;var l=
this.j;var t=l.ownerDocument.defaultView,p=t.__AMP_TOP||(t.__AMP_TOP=t),E=t!=p;if(Na(p)["ampdoc-fie"]){p.__AMP_EXPERIMENT_BRANCHES=p.__AMP_EXPERIMENT_BRANCHES||{};for(n in J)if(y.call(J,n)&&!y.call(p.__AMP_EXPERIMENT_BRANCHES,n))if(J[n].isTrafficEligible&&J[n].isTrafficEligible(p)){var x;if(x=!p.__AMP_EXPERIMENT_BRANCHES[n])x=n,x=!!Na(p)[x];x&&(x=J[n].branches,p.__AMP_EXPERIMENT_BRANCHES[n]=x[Math.floor(Math.random()*x.length)]||null)}else p.__AMP_EXPERIMENT_BRANCHES[n]=null;var n="21065002"===(p.__AMP_EXPERIMENT_BRANCHES?
p.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else n=!1;E&&!n?l=Ta(t,"url")?L(t,"url"):null:(l=N(l),l=O(l),l=Ta(l,"url")?L(l,"url"):null);k=l.parse(k);l=l.parse(this.l.getUrl());k.origin!=l.origin&&h.push("allow-same-origin");b.setAttribute("sandbox",h.join(" "));b.classList.add("i-amphtml-consent-ui-fill");this.h=b;b=this.j.ownerDocument.createElement("placeholder");U(b,!1);b.classList.add("i-amphtml-consent-ui-placeholder");h=b.ownerDocument||b;S&&S.ownerDocument===h||(S=h.createElement("div"));
h=S;h.innerHTML=ob[0];k=h.firstElementChild;h.removeChild(k);b.appendChild(k);this.W=b;this.Ia=a.clientConfig||null}}};
V.prototype.show=function(a){var b=this;if(this.h){U(this.j,!0);var c=this.j.classList;c.add("amp-active");c.remove("amp-hidden");this.C.getViewport().addToFixedLayer(this.j);if(this.ya)this.xa=a,pb(this).then(function(){b.C.mutateElement(function(){b.S||(b.P=b.J.activeElement);qb(b);rb(b);sb(b);b.S||b.Ca||b.h.focus()})});else{var d=function(){b.h&&(U(b.h,!0),b.S||(b.P=b.J.activeElement,qb(b),M(b.C.element,"owners").scheduleLayout(b.C.element,b.h),b.h.focus()))};Aa(this.h)?Ba(this.h).then(function(){return b.h.whenBuilt()}).then(function(){return d()}):
d()}this.Aa=!0}};
V.prototype.hide=function(){var a=this;this.h&&this.C.mutateElement(function(){if(a.ya){var b=a.j.classList;b.remove("i-amphtml-consent-ui-iframe-active");a.N.removeEventListener("message",a.Ha);b.remove("i-amphtml-consent-ui-iframe-fullscreen");a.ha&&a.Ua.sendMessage("cancelFullOverlay",{},!0);a.ha=!1;b.remove("i-amphtml-consent-ui-in");a.za=!1;a.h.removeAttribute("name");U(a.W,!1);b=a.h;b.parentElement&&b.parentElement.removeChild(b)}a.S||(b=a.j.classList,b.remove("amp-active"),b.add("amp-hidden"));
a.Oa&&(a.T&&U(a.T,!1),tb(a));a.ma&&(b=a.ma,b.parentElement&&b.parentElement.removeChild(b),delete a.ma);tb(a);ub(a);a.C.getViewport().removeFromFixedLayer(a.j);U(a.h,!1);a.Aa=!1;a.P?(a.P.focus(),a.P=null):0<a.N.document.body.children.length&&a.N.document.body.children[0].focus()})};
function vb(a,b){a.ga="30vh";a.ua=!0;if(b.initialHeight)if("string"===typeof b.initialHeight&&0<=b.initialHeight.indexOf("vh")){var c=parseInt(b.initialHeight,10);10<=c&&60>=c?a.ga=c+"vh":u().error("amp-consent-ui","Inavlid initial height: "+b.initialHeight+".Minimum: 10vh. Maximum: 60vh.")}else u().error("amp-consent-ui","Inavlid initial height: "+b.initialHeight+'.Must be a string in "vh" units.');!1===b.border&&(a.ua=!1);a.wa.resolve()}
function wb(a){return P(a.l,"consentStateManager").then(function(b){return b.getLastConsentInstanceInfo().then(function(b){return A({clientConfig:a.Ia,consentState:D(b.consentState),consentStateValue:D(b.consentState),consentString:b.consentString,promptTrigger:a.xa?"action":"load",isDirty:!!b.isDirty})})})}
function pb(a){a.wa=new F;var b=a.j.classList;za(a.j)||ya(a.j,a.W);b.add("i-amphtml-consent-ui-loading");U(a.h,!1);var c=wb(a).then(function(b){a.h.setAttribute("name",JSON.stringify(b));a.N.addEventListener("message",a.Ha);ya(a.j,a.h)});return Promise.all([c,a.wa.promise,a.C.mutateElement(function(){U(a.W,!0)})])}
function sb(a){var b=a.j.classList;b.add("i-amphtml-consent-ui-iframe-active");U(a.W,!1);U(a.h,!0);ub(a);a.C.mutateElement(function(){b.remove("i-amphtml-consent-ui-loading");a.C.mutateElement(function(){b.add("i-amphtml-consent-ui-in");a.za=!0;if(a.h){var c=a.h,d={height:a.ga},e;for(e in d)nb(c,e,d[e])}c={transform:"translate3d(0px, calc(100% - "+a.ga+"), 0px)"};d=a.j.style;for(var f in c)d.setProperty(mb(d,f),c[f].toString(),"important");a.ua&&a.j.classList.add("i-amphtml-consent-ui-enable-border")})})}
function rb(a){if(a.Ca&&!a.Sa){var b=a.J.createElement("div"),c=a.J.createElement("button"),d=a.J.createElement("div");b.setAttribute("role","alertdialog");d.textContent=a.Ya;c.textContent=a.Va;c.onclick=function(){try{a.h.focus()}catch(e){}};b.appendChild(d);b.appendChild(c);b.classList.add("i-amphtml-consent-alertdialog");a.C.element.appendChild(b);try{c.focus()}catch(e){}a.Sa=!0;a.ma=b}}function ub(a){a=a.j;var b={transform:"",transition:""},c;for(c in b)nb(a,c,b[c])}
function qb(a){if(a.Oa){if(!a.T){var b=a.N.document.createElement("div");b.classList.add("i-amphtml-consent-ui-mask");a.j.ownerDocument.body.appendChild(b);a.T=b}U(a.T,!0);a.M&&(a.Fa.enterOverlayMode(),a.M=!1)}}function tb(a){a.M||(a.Fa.leaveOverlayMode(),a.M=!0)}
V.prototype.$a=function(a){var b=this;if(this.h.contentWindow===a.source&&(a=a.data)&&"consent-ui"==a.type){var c=a.action,d=a.type;"ready"===c&&vb(this,a);"enter-fullscreen"===c&&(!this.za||this.Ca&&this.J.activeElement!==this.h&&!this.xa?(u().warn("amp-consent-ui","Could not enter fullscreen. Fullscreen is only supported when the iframe is visible and after user interaction."),xb(this,d,c,!0)):(xb(this,d,c),this.C.mutateElement(function(){b.h&&b.Aa&&!b.ha&&(ub(b),b.Ua.sendMessage("requestFullOverlay",
{},!0),b.j.classList.add("i-amphtml-consent-ui-iframe-fullscreen"),b.M&&(b.Fa.enterOverlayMode(),b.M=!1),b.ha=!0)})))}};function xb(a,b,c,d){d=void 0===d?!1:d;(a=a.h.contentWindow)&&a.postMessage({type:"amp-consent-response",requestType:b,requestAction:c,state:d?"error":"success",info:d?"Could not enter fullscreen. Fullscreen is only supported when the iframe is visible and after user interaction.":"Entering fullscreen."},"*")};function W(){this.L=0;this.Ra=Q();this.Pa=function(){};this.Qa=function(){}}W.prototype.onQueueEmpty=function(a){this.Pa=a;0==this.L&&a()};W.prototype.onQueueNotEmpty=function(a){this.Qa=a;0<this.L&&a()};W.prototype.registerUI=function(a){var b=this;0==this.L&&this.Qa();this.L++;var c=this.Ra.then(function(){return a().then(function(){b.L--;0==b.L&&b.Pa()})});return this.Ra=c};var yb={ACCEPT:"accept",REJECT:"reject",DISMISS:"dismiss"};function X(a){a=AMP.BaseElement.call(this,a)||this;a.o=null;a.aa=null;a.V=null;a.da=null;a.w=null;a.Ba=null;a.ja=null;a.ea=null;a.I=!1;a.Ma=!1;a.sa=!1;a.Ga=a.getVsync();a.la=null;a.O=null;a.U=null;return a}var Y=AMP.BaseElement;X.prototype=aa(Y.prototype);X.prototype.constructor=X;
if(fa)fa(X,Y);else for(var Z in Y)if("prototype"!=Z)if(Object.defineProperties){var zb=Object.getOwnPropertyDescriptor(Y,Z);zb&&Object.defineProperty(X,Z,zb)}else X[Z]=Y[Z];X.jb=Y.prototype;g=X.prototype;g.getConsentPolicy=function(){return null};g.buildCallback=function(){var a=this;w(this.element.getAttribute("id"),"amp-consent should have an id");var b=new Xa(this.element);return b.getConsentConfigPromise().then(function(c){a.U=b.getMatchedGeoGroup();Ab(a,c)})};
function Ab(a,b){a.w=b;a.O=a.w.consentInstanceId;a.w.postPromptUI&&(a.ja=new V(a,A({}),a.w.postPromptUI));b=a.w.policy||A({});a.Ba=cb(b,a.O);b=a.getRealChildren();for(var c=0;c<b.length;c++){var d=b[c];U(d,!1);M(a.element,"owners").setOwner(d,a.element)}var e=P(a.getAmpDoc(),"consentPolicyManager").then(function(b){a.aa=b;a.aa.setLegacyConsentInstanceId(a.O);var c=Object.keys(a.Ba);for(b=0;b<c.length;b++)a.aa.registerConsentPolicyInstance(c[b],a.Ba[c[b]])}),f=P(a.getAmpDoc(),"consentStateManager").then(function(b){b.registerConsentInstance(a.O,
a.w);a.o=b}),h=P(a.getAmpDoc(),"notificationUIManager").then(function(b){a.V=b});Promise.all([f,h,e]).then(function(){a.R()})}function Bb(a){a.registerAction("accept",function(){Cb(a,"accept")});a.registerAction("reject",function(){Cb(a,"reject")});a.registerAction("dismiss",function(){Cb(a,"dismiss")});a.registerAction("prompt",function(){Db(a,!0)});Eb(a)}
function Eb(a){a.win.addEventListener("message",function(b){if(a.I){var c=b.data;if(c&&"consent-response"==c.type)if(c.action){if(void 0!==c.info){"string"!=typeof c.info&&(u().error("amp-consent","consent-response info only supports string, %s, treated as undefined",c.info),c.info=void 0);"dismiss"===c.action&&(c.info&&a.user().error("amp-consent","Consent string value %s not applicable on user dismiss, stored value will be kept and used",d),c.info=void 0);var d=c.info}for(var e=a.element.querySelectorAll("iframe"),
f=0;f<e.length;f++)if(e[f].contentWindow===b.source){Cb(a,c.action,d);break}}else u().error("amp-consent","consent-response message missing required info")}})}function Db(a,b){a.V||v().error("amp-consent","notification ui manager not found");!a.sa&&a.da&&(a.sa=!0,a.V.registerUI(a.cb.bind(a,b)))}g.cb=function(a){var b=this;this.I&&v().error("amp-consent","Attempt to show an already displayed prompt UI");this.Ga.mutate(function(){b.da.show(a);b.I=!0});var c=new F;this.ea=c.resolve;return c.promise};
function Cb(a,b,c){la(yb,b)&&a.I&&(a.o?(a.Ma=!0,"accept"==b?a.o.updateConsentInstanceState(1,c):"reject"==b?a.o.updateConsentInstanceState(2,c):"dismiss"==b&&a.o.updateConsentInstanceState(3),a.I||v().error("amp-consent","%s no consent ui to hide"),a.da.hide(),a.I=!1,a.ea&&(a.ea(),a.ea=null),a.sa=!1):v().error("amp-consent","No consent state manager"))}
g.R=function(){var a=this;Fb(this);this.setGdprApplies();Gb(this);Hb(this).then(function(b){return Ib(a,b)}).then(function(b){b&&Jb(a);a.aa.enableTimeout()}).catch(function(){});Bb(this)};function Hb(a){return a.o.getConsentInstanceInfo().then(function(b){if(va(b))return Promise.resolve(!0);var c=a.w.consentRequired;return"boolean"===typeof c?Promise.resolve(c):Kb(a).then(function(a){return a?void 0!==a.consentRequired?!!a.consentRequired:!!a.promptIfUnknown:!1})})}
function Fb(a){var b=Kb(a).then(function(a){return a&&void 0!==a.sharedData?a.sharedData:null});a.o.setConsentInstanceSharedData(b)}g.setGdprApplies=function(){var a=Kb(this).then(function(a){if(!a)return null;var b=a.gdprApplies;return void 0===b||"boolean"!==typeof b?a.consentRequired:b});this.o.setConsentInstanceGdprApplies(a)};
function Gb(a){Kb(a).then(function(b){if(b&&((b.expireCache||b.forcePromptOnNext)&&a.o.setDirtyBit(),b.consentRequired&&!a.Ma)){var c=b.consentString||void 0;b=b.consentStateValue;b="accepted"===b?1:"rejected"===b?2:"unknown"===b?5:null;null!==b&&a.o.updateConsentInstanceState(b,c)}})}
function Kb(a){if(a.la)return a.la;a.la=a.w.checkConsentHref?a.o.getLastConsentInstanceInfo().then(function(b){b={consentInstanceId:a.O,consentStateValue:D(b.consentState),consentString:b.consentString,isDirty:!!b.isDirty,matchedGeoGroup:a.U};a.w.clientConfig&&(b.clientConfig=a.w.clientConfig);var c={credentials:"include",method:"POST",body:b},d=a.w.checkConsentHref;Ka(d,a.element);b=a.getAmpDoc();var e=La(b.getUrl()),f=Ma(d,e),h=K(a.win,"xhr");return b.whenFirstVisible().then(function(){return h.fetchJson(f,
c).then(function(b){return h.xssiJson(b,a.w.xssiPrefix)})})}):Promise.resolve(null);return a.la}function Ib(a,b){a.da=new V(a,a.w);return a.o.getConsentInstanceInfo().then(function(c){if(va(c))return!0;if(!b)return a.o.updateConsentInstanceState(4),!1;Db(a,!1);return!0})}function Jb(a){a.ja&&(a.V.onQueueEmpty(function(){a.Ga.mutate(function(){a.ja.show(!1)})}),a.V.onQueueNotEmpty(function(){a.Ga.mutate(function(){a.ja.hide()})}))}g.gb=function(){return this.o};g.fb=function(){return Hb(this)};
g.hb=function(){return this.I};
(function(a){a.registerElement("amp-consent",X,"amp-consent{position:fixed!important;bottom:0;left:0;overflow:hidden!important;background:hsla(0,0%,100%,0.7);width:100%;z-index:2147483645}amp-consent[i-amphtml-notbuilt]>*{display:none!important}amp-consent>*{max-height:100vh!important}amp-consent.amp-active{visibility:visible}amp-consent.amp-hidden{visibility:hidden}@keyframes amp-consent-ui-placeholder-spin{0%{transform:rotate(0deg)}to{transform:rotate(360deg)}}.i-amphtml-consent-ui-placeholder{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.i-amphtml-consent-ui-placeholder>svg{width:30px;height:30px;fill:none;stroke-width:1.5px;transform-origin:50% 50%;animation:amp-consent-ui-placeholder-spin 1000ms linear infinite}.i-amphtml-consent-alertdialog{overflow:hidden;position:absolute;height:1px;width:1px;left:-10000px;top:auto}.i-amphtml-consent-ui-fill{position:absolute;top:0;left:0;width:100%}iframe.i-amphtml-consent-ui-fill{border:none}amp-consent.i-amphtml-consent-ui-iframe-active{width:100%!important;height:100vh!important;padding:0px!important;margin:0px!important;overflow:auto!important;transform:translate3d(0px,100vh,0px)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-enable-border{border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 0 5px 0 rgba(0,0,0,0.2)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-in{transition:transform 0.5s ease-out!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-in.i-amphtml-consent-ui-iframe-fullscreen{top:0px!important;transform:translateZ(0px)!important;border-top-left-radius:0px!important;border-top-right-radius:0px!important}amp-consent.i-amphtml-consent-ui-in.i-amphtml-consent-ui-iframe-fullscreen>.i-amphtml-consent-ui-fill{height:100%!important}@keyframes i-amphtml-consent-ui-mask{0%{opacity:0.0}to{opacity:0.2}}.i-amphtml-consent-ui-mask{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;opacity:0.2;animation:i-amphtml-consent-ui-mask 0.25s ease-in;background-image:none!important;background-color:#000;z-index:2147483644}\n/*# sourceURL=/extensions/amp-consent/0.1/amp-consent.css*/");a.registerServiceForDoc("notificationUIManager",
W);a.registerServiceForDoc("consentStateManager",ib);a.registerServiceForDoc("consentPolicyManager",fb)})(self.AMP);
})});

//# sourceMappingURL=amp-consent-0.1.js.map
