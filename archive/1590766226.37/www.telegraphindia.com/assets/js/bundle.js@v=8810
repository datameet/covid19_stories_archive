//Share Buttons On Click//
$(document).ready(function () {
    var count = 6;
    var countmin = 6;
    $('.iconAplus').click(function () {
        if (count < 12) {
            count += 1;
            $('.padiingDetails p').css("font-size", function () {
                return parseInt($(this).css('font-size')) + 2 + 'px';
            });
            $('.padiingDetails p').css("line-height", function () {
                return parseInt($(this).css('line-height')) + 3 + 'px';
            });
        }

    });
    $('.iconminus').click(function () {

        if (count > 6) {
            count -= 1;
            $('.padiingDetails p').css("font-size", function () {
                return parseInt($(this).css('font-size')) - 2 + 'px';
            });
            $('.padiingDetails p').css("line-height", function () {
                return parseInt($(this).css('line-height')) - 3 + 'px';
            });

        }

    });


});

function printDiv(divName) {

    var printContents = document.getElementById(divName).innerHTML;
    var originalContents = document.body.innerHTML;

    document.body.innerHTML = printContents;

    window.print();

    document.body.innerHTML = originalContents;
}

$(".share").on('click', function (e) {
    //   $(".at-share-btn").removeClass("no");
    if (e.target !== this) return;
    $('.share, .shareContainer .at-share-btn').toggleClass("active");
});

$(".share_three").on('click', function (e) {
    if (e.target !== this) return;
    $('.share_three, .shareContainer_two .at-share-btn').toggleClass("active");
});

$(".share_image").on('click', function (e) {
    //debugger;
    var data = $(this).data('image');
    var eData = e.delegateTarget.dataset.image;
    if (eData !== data) return;
    $('.share_image, .shareContainer_two .at-share-btn').toggleClass("active");
});

/**/// sticky div custom code //
window.onscroll = function (e) {
    var shareIcons = document.getElementById("shareIcons");
    var blogCountvar = document.getElementById("blogCountfix");
    var DivHeigh = $(".padiingDetails").height();
    var rightDivHeight = $(".addRight").height();
    var fullrightHeight = $(".addRight").height();
    if ($("div").hasClass('padiingDetails')) {
        var articaloffset = $(".padiingDetails").offset().top;
        if ($("#storyNext").hasClass("storyNextNew")) {
            var rightoffset = $(".storyNextNew").offset().top;
            var storyNextOffset = $(".storyNextNew").offset().top;
        }
        var articaloffsetbottm = $(".storyLastSec").offset().top - 300;
    }

    if (shareIcons != undefined) {
        var stop = (shareIcons.offsetTop + 300);
        var scrollTop = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;
    }
    // left.offsetTop;

    if (shareIcons !== undefined && scrollTop > articaloffset) {
        shareIcons.classList.add("stick");
        // storyNext.classList.remove("stickBottom");
        if (blogCountvar != undefined) {
            blogCountvar.classList.add("stickliveblog");
        }
    }
    if (scrollTop > articaloffsetbottm - 100 || scrollTop < articaloffset) {
        shareIcons.classList.remove("stick");
        if (blogCountvar != undefined) {
            blogCountvar.classList.remove("stickliveblog");
        }
    }
    if($(".mainStoryPages")[0]){
        var scrollTopNew = 850;
        $(window).scroll(function (e) {

            var scrollEnd = $(".mainStoryPages").height() - 420;
            var adHeight = $('.story-xl-hd').height();

            var windowScroll = window.scrollY;

            if (windowScroll < scrollTopNew) {
                $('#storyNext').css({'position': 'absolute', 'top': 'initial'});
            } else {
                if (adHeight <= 250) {
                    if (windowScroll > scrollTopNew && windowScroll < scrollEnd) {
                        $('#storyNext').css({'position': 'fixed', 'top': '200px'});
                    }
                    else {
                        $('#storyNext').css({'position': 'absolute', 'top': (scrollEnd + 170)});
                    }
                }
                else {
                    var scroll6End = $(".mainStoryPages").height() - 550;
                    if (windowScroll > scrollTopNew && windowScroll < scroll6End) {
                        console.log('scrollEnd', scrollEnd, windowScroll);
                        $('#storyNext').css({'position': 'fixed', 'top': '380px'});
                    }
                    else {
                        console.log('scrollEnd', scrollEnd, windowScroll);
                        $('#storyNext').css({'position': 'absolute', 'top': (scroll6End + 294)});
                    }
                }
            }
        });
    }


    // if (scrollTop > articaloffset) {
    //
    //
    //
    //
    // }
    // if (scrollTop > articaloffsetbottm - 100 || scrollTop < articaloffset) {
    //
    // }


};
//
// /**/// sticky div custom code //
// window.onscroll = function (e) {
//     var shareIcons = document.getElementById("shareIcons");
//     var blogCountvar = document.getElementById("blogCountfix");
//     var DivHeigh = $(".padiingDetails").height();
//     var rightDivHeight = $(".addRight").height();
//     var fullrightHeight = $(".addRight").height();
//     if ($("div").hasClass('padiingDetails')) {
//         var articaloffset = $(".padiingDetails").offset().top;
//         var articaloffsetbottm = $(".storyLastSec").offset().top - 300;
//
//     }
//
//
//     if (shareIcons != undefined) {
//         var stop = (shareIcons.offsetTop + 300);
//         var scrollTop = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;
//     }
//
//
//     // console.log(scrollTop, shareIcons.offsetTop);
//     // left.offsetTop;
//
//     if (shareIcons !== undefined && scrollTop > articaloffset) {
//         shareIcons.classList.add("stick");
//         if (blogCountvar != undefined) {
//             blogCountvar.classList.add("stickliveblog");
//         }
//     }
//     if (scrollTop > articaloffsetbottm - 100 || scrollTop < articaloffset) {
//         shareIcons.classList.remove("stick");
//         if (blogCountvar != undefined) {
//             blogCountvar.classList.remove("stickliveblog");
//         }
//     }
//
//     if (scrollTop > articaloffset) {
//
//         $('.storyNext').css('opacity', '1');
//         $('.storyNext').css('z-index', '9');
//         $('.storyNextMobile').css('opacity', "1");
//
//
//     }
//     if (scrollTop > articaloffsetbottm - 100 || scrollTop < articaloffset) {
//         $('.storyNext').css('opacity', "0");
//         $('.storyNext').css('z-index', "0");
//         $('.storyNextMobile').css('opacity', "0");
//
//     }
//
//
// };


if ($(window).width() < 1025) {
    var charLimit = 100;
    var charTwoLimit = 130;
}
else {
    var charLimit = 450;
    var charTwoLimit = 500;
}

function truncate(el) {
    var clone = el.children().first(),
        originalContent = el.html(),
        text = clone.text();

    if (clone[0].innerHTML.trim().length > charLimit) {
        el.attr("data-originalContent", originalContent);
        el.addClass('hasHidden');
        clone.text(text.substring(0, charLimit) + "...")
        el.empty().append(clone);
        el.append($("<span class='read-more'><a href='#' class='more'> Show More</a>"));
    }
}

function truncateTrue(el) {
    var clone = el.children().first(),
        originalContent = el.html(),
        text = clone.text();

    if (clone[0].innerHTML.trim().length > charTwoLimit) {
        el.attr("data-originalContent", originalContent);
        el.addClass('hasHidden');
        clone.text(text.substring(0, charTwoLimit) + "...")
        el.empty().append(clone);
        el.append($("<span class='read-more'><a href='#' class='more'> Show More</a>"));
    }
}

$("body").on("click", 'a.more', function (e) {
    e.preventDefault();
    var truncateElement = $(this).parent().parent();
    if (truncateElement.hasClass('hasHidden')) {
        $(truncateElement).html(truncateElement.attr("data-originalContent"));
        $(truncateElement).append($("<span class='read-more'><a href='#' class='more'> Show Less</a>"));
        truncateElement.removeClass('hasHidden');
    }
    else {
        $('.read-more', truncateElement).remove();
        truncate(truncateElement);
        truncateTrue(truncateElement);
    }
});

$(".truncate").each(function () {
    truncate($(this));
});

$(".truncateTrue").each(function () {
    truncateTrue($(this));
});





/**
 * Swiper 4.1.0
 * Most modern mobile touch slider and framework with hardware accelerated transitions
 * http://www.idangero.us/swiper/
 *
 * Copyright 2014-2018 Vladimir Kharlampidi
 *
 * Released under the MIT License
 *
 * Released on: January 13, 2018
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Swiper=t()}(this,function(){"use strict";var e=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function t(t,i){var s=[],a=0;if(t&&!i&&t instanceof e)return t;if(t)if("string"==typeof t){var r,n,o=t.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var l="div";for(0===o.indexOf("<li")&&(l="ul"),0===o.indexOf("<tr")&&(l="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(l="tr"),0===o.indexOf("<tbody")&&(l="table"),0===o.indexOf("<option")&&(l="select"),(n=document.createElement(l)).innerHTML=o,a=0;a<n.childNodes.length;a+=1)s.push(n.childNodes[a])}else for(r=i||"#"!==t[0]||t.match(/[ .<>:~]/)?(i||document).querySelectorAll(t.trim()):[document.getElementById(t.trim().split("#")[1])],a=0;a<r.length;a+=1)r[a]&&s.push(r[a])}else if(t.nodeType||t===window||t===document)s.push(t);else if(t.length>0&&t[0].nodeType)for(a=0;a<t.length;a+=1)s.push(t[a]);return new e(s)}function i(e){for(var t=[],i=0;i<e.length;i+=1)-1===t.indexOf(e[i])&&t.push(e[i]);return t}t.fn=e.prototype,t.Class=e,t.Dom7=e;"resize scroll".split(" ");var s={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s].classList&&this[s].classList.add(t[i]);return this},removeClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s].classList&&this[s].classList.remove(t[i]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s].classList&&this[s].classList.toggle(t[i]);return this},attr:function(e,t){var i=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var s=0;s<this.length;s+=1)if(2===i.length)this[s].setAttribute(e,t);else for(var a in e)this[s][a]=e[a],this[s].setAttribute(a,e[a]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var i;if(void 0!==t){for(var s=0;s<this.length;s+=1)(i=this[s]).dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t;return this}if(i=this[0]){if(i.dom7ElementDataStorage&&e in i.dom7ElementDataStorage)return i.dom7ElementDataStorage[e];var a=i.getAttribute("data-"+e);return a||void 0}},transform:function(e){for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransform=e,i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransitionDuration=e,i.transitionDuration=e}return this},on:function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var s,a=e[0],r=e[1],n=e[2],o=e[3];function l(e){var i=e.target;if(i){var s=e.target.dom7EventData||[];if(s.unshift(e),t(i).is(r))n.apply(i,s);else for(var a=t(i).parents(),o=0;o<a.length;o+=1)t(a[o]).is(r)&&n.apply(a[o],s)}}function d(e){var t=e&&e.target?e.target.dom7EventData||[]:[];t.unshift(e),n.apply(this,t)}"function"==typeof e[1]&&(a=(s=e)[0],n=s[1],o=s[2],r=void 0),o||(o=!1);for(var h,p=a.split(" "),c=0;c<this.length;c+=1){var u=this[c];if(r)for(h=0;h<p.length;h+=1)u.dom7LiveListeners||(u.dom7LiveListeners=[]),u.dom7LiveListeners.push({type:a,listener:n,proxyListener:l}),u.addEventListener(p[h],l,o);else for(h=0;h<p.length;h+=1)u.dom7Listeners||(u.dom7Listeners=[]),u.dom7Listeners.push({type:a,listener:n,proxyListener:d}),u.addEventListener(p[h],d,o)}return this},off:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,s=e[0],a=e[1],r=e[2],n=e[3];"function"==typeof e[1]&&(s=(i=e)[0],r=i[1],n=i[2],a=void 0),n||(n=!1);for(var o=s.split(" "),l=0;l<o.length;l+=1)for(var d=0;d<this.length;d+=1){var h=this[d];if(a){if(h.dom7LiveListeners)for(var p=0;p<h.dom7LiveListeners.length;p+=1)r?h.dom7LiveListeners[p].listener===r&&h.removeEventListener(o[l],h.dom7LiveListeners[p].proxyListener,n):h.dom7LiveListeners[p].type===o[l]&&h.removeEventListener(o[l],h.dom7LiveListeners[p].proxyListener,n)}else if(h.dom7Listeners)for(var c=0;c<h.dom7Listeners.length;c+=1)r?h.dom7Listeners[c].listener===r&&h.removeEventListener(o[l],h.dom7Listeners[c].proxyListener,n):h.dom7Listeners[c].type===o[l]&&h.removeEventListener(o[l],h.dom7Listeners[c].proxyListener,n)}return this},trigger:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=e[0].split(" "),s=e[1],a=0;a<i.length;a+=1)for(var r=0;r<this.length;r+=1){var n=void 0;try{n=new window.CustomEvent(i[a],{detail:s,bubbles:!0,cancelable:!0})}catch(e){(n=document.createEvent("Event")).initEvent(i[a],!0,!0),n.detail=s}this[r].dom7EventData=e.filter(function(e,t){return t>0}),this[r].dispatchEvent(n),this[r].dom7EventData=[],delete this[r].dom7EventData}return this},transitionEnd:function(e){var t,i=["webkitTransitionEnd","transitionend"],s=this;function a(r){if(r.target===this)for(e.call(this,r),t=0;t<i.length;t+=1)s.off(i[t],a)}if(e)for(t=0;t<i.length;t+=1)s.on(i[t],a);return this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),i=document.body,s=e.clientTop||i.clientTop||0,a=e.clientLeft||i.clientLeft||0,r=e===window?window.scrollY:e.scrollTop,n=e===window?window.scrollX:e.scrollLeft;return{top:t.top+r-s,left:t.left+n-a}}return null},css:function(e,t){var i;if(1===arguments.length){if("string"!=typeof e){for(i=0;i<this.length;i+=1)for(var s in e)this[i].style[s]=e[s];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(i=0;i<this.length;i+=1)this[i].style[e]=t;return this}return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(i){var s,a,r=this[0];if(!r||void 0===i)return!1;if("string"==typeof i){if(r.matches)return r.matches(i);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(i);if(r.msMatchesSelector)return r.msMatchesSelector(i);for(s=t(i),a=0;a<s.length;a+=1)if(s[a]===r)return!0;return!1}if(i===document)return r===document;if(i===window)return r===window;if(i.nodeType||i instanceof e){for(s=i.nodeType?[i]:i,a=0;a<s.length;a+=1)if(s[a]===r)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(t){if(void 0===t)return this;var i,s=this.length;return new e(t>s-1?[]:t<0?(i=s+t)<0?[]:[this[i]]:[this[t]])},append:function(){for(var t,i=[],s=arguments.length;s--;)i[s]=arguments[s];for(var a=0;a<i.length;a+=1){t=i[a];for(var r=0;r<this.length;r+=1)if("string"==typeof t){var n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)this[r].appendChild(n.firstChild)}else if(t instanceof e)for(var o=0;o<t.length;o+=1)this[r].appendChild(t[o]);else this[r].appendChild(t)}return this},prepend:function(t){var i,s;for(i=0;i<this.length;i+=1)if("string"==typeof t){var a=document.createElement("div");for(a.innerHTML=t,s=a.childNodes.length-1;s>=0;s-=1)this[i].insertBefore(a.childNodes[s],this[i].childNodes[0])}else if(t instanceof e)for(s=0;s<t.length;s+=1)this[i].insertBefore(t[s],this[i].childNodes[0]);else this[i].insertBefore(t,this[i].childNodes[0]);return this},next:function(i){return this.length>0?i?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(i)?new e([this[0].nextElementSibling]):new e([]):this[0].nextElementSibling?new e([this[0].nextElementSibling]):new e([]):new e([])},nextAll:function(i){var s=[],a=this[0];if(!a)return new e([]);for(;a.nextElementSibling;){var r=a.nextElementSibling;i?t(r).is(i)&&s.push(r):s.push(r),a=r}return new e(s)},prev:function(i){if(this.length>0){var s=this[0];return i?s.previousElementSibling&&t(s.previousElementSibling).is(i)?new e([s.previousElementSibling]):new e([]):s.previousElementSibling?new e([s.previousElementSibling]):new e([])}return new e([])},prevAll:function(i){var s=[],a=this[0];if(!a)return new e([]);for(;a.previousElementSibling;){var r=a.previousElementSibling;i?t(r).is(i)&&s.push(r):s.push(r),a=r}return new e(s)},parent:function(e){for(var s=[],a=0;a<this.length;a+=1)null!==this[a].parentNode&&(e?t(this[a].parentNode).is(e)&&s.push(this[a].parentNode):s.push(this[a].parentNode));return t(i(s))},parents:function(e){for(var s=[],a=0;a<this.length;a+=1)for(var r=this[a].parentNode;r;)e?t(r).is(e)&&s.push(r):s.push(r),r=r.parentNode;return t(i(s))},closest:function(t){var i=this;return void 0===t?new e([]):(i.is(t)||(i=i.parents(t).eq(0)),i)},find:function(t){for(var i=[],s=0;s<this.length;s+=1)for(var a=this[s].querySelectorAll(t),r=0;r<a.length;r+=1)i.push(a[r]);return new e(i)},children:function(s){for(var a=[],r=0;r<this.length;r+=1)for(var n=this[r].childNodes,o=0;o<n.length;o+=1)s?1===n[o].nodeType&&t(n[o]).is(s)&&a.push(n[o]):1===n[o].nodeType&&a.push(n[o]);return new e(i(a))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var s,a;for(s=0;s<e.length;s+=1){var r=t(e[s]);for(a=0;a<r.length;a+=1)this[this.length]=r[a],this.length+=1}return this},styles:function(){return this[0]?window.getComputedStyle(this[0],null):{}}};Object.keys(s).forEach(function(e){t.fn[e]=s[e]});var a,r,n,o="undefined"==typeof window?{navigator:{userAgent:""},location:{},history:{},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{}},Image:function(){},Date:function(){},screen:{}}:window,l={deleteProps:function(e){var t=e;Object.keys(t).forEach(function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,t){var i,s,a;void 0===t&&(t="x");var r=o.getComputedStyle(e,null);return o.WebKitCSSMatrix?((s=r.transform||r.webkitTransform).split(",").length>6&&(s=s.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),a=new o.WebKitCSSMatrix("none"===s?"":s)):i=(a=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(s=o.WebKitCSSMatrix?a.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(s=o.WebKitCSSMatrix?a.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),s||0},parseUrlQuery:function(e){var t,i,s,a,r={},n=e||o.location.href;if("string"==typeof n&&n.length)for(a=(i=(n=n.indexOf("?")>-1?n.replace(/\S*\?/,""):"").split("&").filter(function(e){return""!==e})).length,t=0;t<a;t+=1)s=i[t].replace(/#\S+/g,"").split("="),r[decodeURIComponent(s[0])]=void 0===s[1]?void 0:decodeURIComponent(s[1])||"";return r},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=Object(e[0]),s=1;s<e.length;s+=1){var a=e[s];if(void 0!==a&&null!==a)for(var r=Object.keys(Object(a)),n=0,o=r.length;n<o;n+=1){var d=r[n],h=Object.getOwnPropertyDescriptor(a,d);void 0!==h&&h.enumerable&&(l.isObject(i[d])&&l.isObject(a[d])?l.extend(i[d],a[d]):!l.isObject(i[d])&&l.isObject(a[d])?(i[d]={},l.extend(i[d],a[d])):i[d]=a[d])}}return i}},d="undefined"==typeof document?{addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return{}},querySelectorAll:function(){return[]},createElement:function(){return{style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,h=(n=d.createElement("div"),{touch:o.Modernizr&&!0===o.Modernizr.touch||!!("ontouchstart"in o||o.DocumentTouch&&d instanceof o.DocumentTouch),pointerEvents:!(!o.navigator.pointerEnabled&&!o.PointerEvent),prefixedPointerEvents:!!o.navigator.msPointerEnabled,transition:(r=n.style,"transition"in r||"webkitTransition"in r||"MozTransition"in r),transforms3d:o.Modernizr&&!0===o.Modernizr.csstransforms3d||(a=n.style,"webkitPerspective"in a||"MozPerspective"in a||"OPerspective"in a||"MsPerspective"in a||"perspective"in a),flexbox:function(){for(var e=n.style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),i=0;i<t.length;i+=1)if(t[i]in e)return!0;return!1}(),observer:"MutationObserver"in o||"WebkitMutationObserver"in o,passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});o.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:"ongesturestart"in o}),p=function(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach(function(e){t.on(e,t.params.on[e])})},c={components:{configurable:!0}};p.prototype.on=function(e,t){var i=this;return"function"!=typeof t?i:(e.split(" ").forEach(function(e){i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e].push(t)}),i)},p.prototype.once=function(e,t){var i=this;if("function"!=typeof t)return i;return i.on(e,function s(){for(var a=[],r=arguments.length;r--;)a[r]=arguments[r];t.apply(i,a),i.off(e,s)})},p.prototype.off=function(e,t){var i=this;return e.split(" ").forEach(function(e){void 0===t?i.eventsListeners[e]=[]:i.eventsListeners[e].forEach(function(s,a){s===t&&i.eventsListeners[e].splice(a,1)})}),i},p.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,s,a,r=this;return r.eventsListeners?("string"==typeof e[0]||Array.isArray(e[0])?(i=e[0],s=e.slice(1,e.length),a=r):(i=e[0].events,s=e[0].data,a=e[0].context||r),(Array.isArray(i)?i:i.split(" ")).forEach(function(e){if(r.eventsListeners[e]){var t=[];r.eventsListeners[e].forEach(function(e){t.push(e)}),t.forEach(function(e){e.apply(a,s)})}}),r):r},p.prototype.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach(function(i){var s=t.modules[i];s.params&&l.extend(e,s.params)})},p.prototype.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach(function(i){var s=t.modules[i],a=e[i]||{};s.instance&&Object.keys(s.instance).forEach(function(e){var i=s.instance[e];t[e]="function"==typeof i?i.bind(t):i}),s.on&&t.on&&Object.keys(s.on).forEach(function(e){t.on(e,s.on[e])}),s.create&&s.create.bind(t)(a)})},c.components.set=function(e){this.use&&this.use(e)},p.installModule=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var s=this;s.prototype.modules||(s.prototype.modules={});var a=e.name||Object.keys(s.prototype.modules).length+"_"+l.now();return s.prototype.modules[a]=e,e.proto&&Object.keys(e.proto).forEach(function(t){s.prototype[t]=e.proto[t]}),e.static&&Object.keys(e.static).forEach(function(t){s[t]=e.static[t]}),e.install&&e.install.apply(s,t),s},p.use=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var s=this;return Array.isArray(e)?(e.forEach(function(e){return s.installModule(e)}),s):s.installModule.apply(s,[e].concat(t))},Object.defineProperties(p,c);var u={updateSize:function(){var e,t,i=this.$el;e=void 0!==this.params.width?this.params.width:i[0].clientWidth,t=void 0!==this.params.height?this.params.height:i[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),t=t-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),l.extend(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this.params,t=this.$wrapperEl,i=this.size,s=this.rtl,a=this.wrongRTL,r=t.children("."+this.params.slideClass),n=this.virtual&&e.virtual.enabled?this.virtual.slides.length:r.length,o=[],d=[],p=[],c=e.slidesOffsetBefore;"function"==typeof c&&(c=e.slidesOffsetBefore.call(this));var u=e.slidesOffsetAfter;"function"==typeof u&&(u=e.slidesOffsetAfter.call(this));var f=n,v=this.snapGrid.length,m=this.snapGrid.length,g=e.spaceBetween,b=-c,w=0,y=0;if(void 0!==i){var x,T;"string"==typeof g&&g.indexOf("%")>=0&&(g=parseFloat(g.replace("%",""))/100*i),this.virtualSize=-g,s?r.css({marginLeft:"",marginTop:""}):r.css({marginRight:"",marginBottom:""}),e.slidesPerColumn>1&&(x=Math.floor(n/e.slidesPerColumn)===n/this.params.slidesPerColumn?n:Math.ceil(n/e.slidesPerColumn)*e.slidesPerColumn,"auto"!==e.slidesPerView&&"row"===e.slidesPerColumnFill&&(x=Math.max(x,e.slidesPerView*e.slidesPerColumn)));for(var E,S=e.slidesPerColumn,C=x/S,M=C-(e.slidesPerColumn*C-n),z=0;z<n;z+=1){T=0;var P=r.eq(z);if(e.slidesPerColumn>1){var k=void 0,$=void 0,L=void 0;"column"===e.slidesPerColumnFill?(L=z-($=Math.floor(z/S))*S,($>M||$===M&&L===S-1)&&(L+=1)>=S&&(L=0,$+=1),k=$+L*x/S,P.css({"-webkit-box-ordinal-group":k,"-moz-box-ordinal-group":k,"-ms-flex-order":k,"-webkit-order":k,order:k})):$=z-(L=Math.floor(z/C))*C,P.css("margin-"+(this.isHorizontal()?"top":"left"),0!==L&&e.spaceBetween&&e.spaceBetween+"px").attr("data-swiper-column",$).attr("data-swiper-row",L)}"none"!==P.css("display")&&("auto"===e.slidesPerView?(T=this.isHorizontal()?P.outerWidth(!0):P.outerHeight(!0),e.roundLengths&&(T=Math.floor(T))):(T=(i-(e.slidesPerView-1)*g)/e.slidesPerView,e.roundLengths&&(T=Math.floor(T)),r[z]&&(this.isHorizontal()?r[z].style.width=T+"px":r[z].style.height=T+"px")),r[z]&&(r[z].swiperSlideSize=T),p.push(T),e.centeredSlides?(b=b+T/2+w/2+g,0===w&&0!==z&&(b=b-i/2-g),0===z&&(b=b-i/2-g),Math.abs(b)<.001&&(b=0),y%e.slidesPerGroup==0&&o.push(b),d.push(b)):(y%e.slidesPerGroup==0&&o.push(b),d.push(b),b=b+T+g),this.virtualSize+=T+g,w=T,y+=1)}if(this.virtualSize=Math.max(this.virtualSize,i)+u,s&&a&&("slide"===e.effect||"coverflow"===e.effect)&&t.css({width:this.virtualSize+e.spaceBetween+"px"}),h.flexbox&&!e.setWrapperSize||(this.isHorizontal()?t.css({width:this.virtualSize+e.spaceBetween+"px"}):t.css({height:this.virtualSize+e.spaceBetween+"px"})),e.slidesPerColumn>1&&(this.virtualSize=(T+e.spaceBetween)*x,this.virtualSize=Math.ceil(this.virtualSize/e.slidesPerColumn)-e.spaceBetween,this.isHorizontal()?t.css({width:this.virtualSize+e.spaceBetween+"px"}):t.css({height:this.virtualSize+e.spaceBetween+"px"}),e.centeredSlides)){E=[];for(var I=0;I<o.length;I+=1)o[I]<this.virtualSize+o[0]&&E.push(o[I]);o=E}if(!e.centeredSlides){E=[];for(var D=0;D<o.length;D+=1)o[D]<=this.virtualSize-i&&E.push(o[D]);o=E,Math.floor(this.virtualSize-i)-Math.floor(o[o.length-1])>1&&o.push(this.virtualSize-i)}0===o.length&&(o=[0]),0!==e.spaceBetween&&(this.isHorizontal()?s?r.css({marginLeft:g+"px"}):r.css({marginRight:g+"px"}):r.css({marginBottom:g+"px"})),l.extend(this,{slides:r,snapGrid:o,slidesGrid:d,slidesSizesGrid:p}),n!==f&&this.emit("slidesLengthChange"),o.length!==v&&(this.params.watchOverflow&&this.checkOverflow(),this.emit("snapGridLengthChange")),d.length!==m&&this.emit("slidesGridLengthChange"),(e.watchSlidesProgress||e.watchSlidesVisibility)&&this.updateSlidesOffset()}},updateAutoHeight:function(){var e,t=[],i=0;if("auto"!==this.params.slidesPerView&&this.params.slidesPerView>1)for(e=0;e<Math.ceil(this.params.slidesPerView);e+=1){var s=this.activeIndex+e;if(s>this.slides.length)break;t.push(this.slides.eq(s)[0])}else t.push(this.slides.eq(this.activeIndex)[0]);for(e=0;e<t.length;e+=1)if(void 0!==t[e]){var a=t[e].offsetHeight;i=a>i?a:i}i&&this.$wrapperEl.css("height",i+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this.translate||0);var t=this.params,i=this.slides,s=this.rtl;if(0!==i.length){void 0===i[0].swiperSlideOffset&&this.updateSlidesOffset();var a=-e;s&&(a=e),i.removeClass(t.slideVisibleClass);for(var r=0;r<i.length;r+=1){var n=i[r],o=(a+(t.centeredSlides?this.minTranslate():0)-n.swiperSlideOffset)/(n.swiperSlideSize+t.spaceBetween);if(t.watchSlidesVisibility){var l=-(a-n.swiperSlideOffset),d=l+this.slidesSizesGrid[r];(l>=0&&l<this.size||d>0&&d<=this.size||l<=0&&d>=this.size)&&i.eq(r).addClass(t.slideVisibleClass)}n.progress=s?-o:o}}},updateProgress:function(e){void 0===e&&(e=this.translate||0);var t=this.params,i=this.maxTranslate()-this.minTranslate(),s=this.progress,a=this.isBeginning,r=this.isEnd,n=a,o=r;0===i?(s=0,a=!0,r=!0):(a=(s=(e-this.minTranslate())/i)<=0,r=s>=1),l.extend(this,{progress:s,isBeginning:a,isEnd:r}),(t.watchSlidesProgress||t.watchSlidesVisibility)&&this.updateSlidesProgress(e),a&&!n&&this.emit("reachBeginning toEdge"),r&&!o&&this.emit("reachEnd toEdge"),(n&&!a||o&&!r)&&this.emit("fromEdge"),this.emit("progress",s)},updateSlidesClasses:function(){var e,t=this.slides,i=this.params,s=this.$wrapperEl,a=this.activeIndex,r=this.realIndex,n=this.virtual&&i.virtual.enabled;t.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=n?this.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+a+'"]'):t.eq(a)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass));var o=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===o.length&&(o=t.eq(0)).addClass(i.slideNextClass);var l=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===l.length&&(l=t.eq(-1)).addClass(i.slidePrevClass),i.loop&&(o.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),l.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,i=this.rtl?this.translate:-this.translate,s=this.slidesGrid,a=this.snapGrid,r=this.params,n=this.activeIndex,o=this.realIndex,d=this.snapIndex,h=e;if(void 0===h){for(var p=0;p<s.length;p+=1)void 0!==s[p+1]?i>=s[p]&&i<s[p+1]-(s[p+1]-s[p])/2?h=p:i>=s[p]&&i<s[p+1]&&(h=p+1):i>=s[p]&&(h=p);r.normalizeSlideIndex&&(h<0||void 0===h)&&(h=0)}if((t=a.indexOf(i)>=0?a.indexOf(i):Math.floor(h/r.slidesPerGroup))>=a.length&&(t=a.length-1),h!==n){var c=parseInt(this.slides.eq(h).attr("data-swiper-slide-index")||h,10);l.extend(this,{snapIndex:t,realIndex:c,previousIndex:n,activeIndex:h}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),o!==c&&this.emit("realIndexChange"),this.emit("slideChange")}else t!==d&&(this.snapIndex=t,this.emit("snapIndexChange"))},updateClickedSlide:function(e){var i=this.params,s=t(e.target).closest("."+i.slideClass)[0],a=!1;if(s)for(var r=0;r<this.slides.length;r+=1)this.slides[r]===s&&(a=!0);if(!s||!a)return this.clickedSlide=void 0,void(this.clickedIndex=void 0);this.clickedSlide=s,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(t(s).attr("data-swiper-slide-index"),10):this.clickedIndex=t(s).index(),i.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}},f={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,i=this.rtl,s=this.translate,a=this.$wrapperEl;if(t.virtualTranslate)return i?-s:s;var r=l.getTranslate(a[0],e);return i&&(r=-r),r||0},setTranslate:function(e,t){var i=this.rtl,s=this.params,a=this.$wrapperEl,r=this.progress,n=0,o=0;this.isHorizontal()?n=i?-e:e:o=e,s.roundLengths&&(n=Math.floor(n),o=Math.floor(o)),s.virtualTranslate||(h.transforms3d?a.transform("translate3d("+n+"px, "+o+"px, 0px)"):a.transform("translate("+n+"px, "+o+"px)")),this.translate=this.isHorizontal()?n:o;var l=this.maxTranslate()-this.minTranslate();(0===l?0:(e-this.minTranslate())/l)!==r&&this.updateProgress(e),this.emit("setTranslate",this.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]}},v={setTransition:function(e,t){this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e){void 0===e&&(e=!0);var t=this.activeIndex,i=this.params,s=this.previousIndex;i.autoHeight&&this.updateAutoHeight(),this.emit("transitionStart"),e&&t!==s&&(this.emit("slideChangeTransitionStart"),t>s?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart"))},transitionEnd:function(e){void 0===e&&(e=!0);var t=this.activeIndex,i=this.previousIndex;this.animating=!1,this.setTransition(0),this.emit("transitionEnd"),e&&t!==i&&(this.emit("slideChangeTransitionEnd"),t>i?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd"))}},m={slideTo:function(e,t,i,s){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var a=this,r=e;r<0&&(r=0);var n=a.params,o=a.snapGrid,l=a.slidesGrid,d=a.previousIndex,p=a.activeIndex,c=a.rtl,u=a.$wrapperEl,f=Math.floor(r/n.slidesPerGroup);f>=o.length&&(f=o.length-1),(p||n.initialSlide||0)===(d||0)&&i&&a.emit("beforeSlideChangeStart");var v=-o[f];if(a.updateProgress(v),n.normalizeSlideIndex)for(var m=0;m<l.length;m+=1)-Math.floor(100*v)>=Math.floor(100*l[m])&&(r=m);if(a.initialized){if(!a.allowSlideNext&&v<a.translate&&v<a.minTranslate())return!1;if(!a.allowSlidePrev&&v>a.translate&&v>a.maxTranslate()&&(p||0)!==r)return!1}return c&&-v===a.translate||!c&&v===a.translate?(a.updateActiveIndex(r),n.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==n.effect&&a.setTranslate(v),!1):(0!==t&&h.transition?(a.setTransition(t),a.setTranslate(v),a.updateActiveIndex(r),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,s),a.transitionStart(i),a.animating||(a.animating=!0,u.transitionEnd(function(){a&&!a.destroyed&&a.transitionEnd(i)}))):(a.setTransition(0),a.setTranslate(v),a.updateActiveIndex(r),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,s),a.transitionStart(i),a.transitionEnd(i)),!0)},slideNext:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s=this.params,a=this.animating;return s.loop?!a&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,this.slideTo(this.activeIndex+s.slidesPerGroup,e,t,i)):this.slideTo(this.activeIndex+s.slidesPerGroup,e,t,i)},slidePrev:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s=this.params,a=this.animating;return s.loop?!a&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,this.slideTo(this.activeIndex-1,e,t,i)):this.slideTo(this.activeIndex-1,e,t,i)},slideReset:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);return this.slideTo(this.activeIndex,e,t,i)},slideToClickedSlide:function(){var e,i=this,s=i.params,a=i.$wrapperEl,r="auto"===s.slidesPerView?i.slidesPerViewDynamic():s.slidesPerView,n=i.clickedIndex;if(s.loop){if(i.animating)return;e=parseInt(t(i.clickedSlide).attr("data-swiper-slide-index"),10),s.centeredSlides?n<i.loopedSlides-r/2||n>i.slides.length-i.loopedSlides+r/2?(i.loopFix(),n=a.children("."+s.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+s.slideDuplicateClass+")").eq(0).index(),l.nextTick(function(){i.slideTo(n)})):i.slideTo(n):n>i.slides.length-r?(i.loopFix(),n=a.children("."+s.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+s.slideDuplicateClass+")").eq(0).index(),l.nextTick(function(){i.slideTo(n)})):i.slideTo(n)}else i.slideTo(n)}},g={loopCreate:function(){var e=this,i=e.params,s=e.$wrapperEl;s.children("."+i.slideClass+"."+i.slideDuplicateClass).remove();var a=s.children("."+i.slideClass);if(i.loopFillGroupWithBlank){var r=i.slidesPerGroup-a.length%i.slidesPerGroup;if(r!==i.slidesPerGroup){for(var n=0;n<r;n+=1){var o=t(d.createElement("div")).addClass(i.slideClass+" "+i.slideBlankClass);s.append(o)}a=s.children("."+i.slideClass)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=a.length),e.loopedSlides=parseInt(i.loopedSlides||i.slidesPerView,10),e.loopedSlides+=i.loopAdditionalSlides,e.loopedSlides>a.length&&(e.loopedSlides=a.length);var l=[],h=[];a.each(function(i,s){var r=t(s);i<e.loopedSlides&&h.push(s),i<a.length&&i>=a.length-e.loopedSlides&&l.push(s),r.attr("data-swiper-slide-index",i)});for(var p=0;p<h.length;p+=1)s.append(t(h[p].cloneNode(!0)).addClass(i.slideDuplicateClass));for(var c=l.length-1;c>=0;c-=1)s.prepend(t(l[c].cloneNode(!0)).addClass(i.slideDuplicateClass))},loopFix:function(){var e,t=this.params,i=this.activeIndex,s=this.slides,a=this.loopedSlides,r=this.allowSlidePrev,n=this.allowSlideNext;this.allowSlidePrev=!0,this.allowSlideNext=!0,i<a?(e=s.length-3*a+i,e+=a,this.slideTo(e,0,!1,!0)):("auto"===t.slidesPerView&&i>=2*a||i>s.length-2*t.slidesPerView)&&(e=-s.length+i+a,e+=a,this.slideTo(e,0,!1,!0)),this.allowSlidePrev=r,this.allowSlideNext=n},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,i=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass).remove(),i.removeAttr("data-swiper-slide-index")}},b={setGrabCursor:function(e){if(!h.touch&&this.params.simulateTouch){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){h.touch||(this.el.style.cursor="")}},w={appendSlide:function(e){var t=this.$wrapperEl,i=this.params;if(i.loop&&this.loopDestroy(),"object"==typeof e&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&t.append(e[s]);else t.append(e);i.loop&&this.loopCreate(),i.observer&&h.observer||this.update()},prependSlide:function(e){var t=this.params,i=this.$wrapperEl,s=this.activeIndex;t.loop&&this.loopDestroy();var a=s+1;if("object"==typeof e&&"length"in e){for(var r=0;r<e.length;r+=1)e[r]&&i.prepend(e[r]);a=s+e.length}else i.prepend(e);t.loop&&this.loopCreate(),t.observer&&h.observer||this.update(),this.slideTo(a,0,!1)},removeSlide:function(e){var t=this.params,i=this.$wrapperEl,s=this.activeIndex;t.loop&&(this.loopDestroy(),this.slides=i.children("."+t.slideClass));var a,r=s;if("object"==typeof e&&"length"in e){for(var n=0;n<e.length;n+=1)a=e[n],this.slides[a]&&this.slides.eq(a).remove(),a<r&&(r-=1);r=Math.max(r,0)}else a=e,this.slides[a]&&this.slides.eq(a).remove(),a<r&&(r-=1),r=Math.max(r,0);t.loop&&this.loopCreate(),t.observer&&h.observer||this.update(),t.loop?this.slideTo(r+this.loopedSlides,0,!1):this.slideTo(r,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},y=function(){var e=o.navigator.userAgent,t={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:o.cordova||o.phonegap,phonegap:o.cordova||o.phonegap},i=e.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),s=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),r=e.match(/(iPod)(.*OS\s([\d_]+))?/),n=!a&&e.match(/(iPhone\sOS|iOS)\s([\d_]+)/);if(i&&(t.os="windows",t.osVersion=i[2],t.windows=!0),s&&!i&&(t.os="android",t.osVersion=s[2],t.android=!0,t.androidChrome=e.toLowerCase().indexOf("chrome")>=0),(a||n||r)&&(t.os="ios",t.ios=!0),n&&!r&&(t.osVersion=n[2].replace(/_/g,"."),t.iphone=!0),a&&(t.osVersion=a[2].replace(/_/g,"."),t.ipad=!0),r&&(t.osVersion=r[3]?r[3].replace(/_/g,"."):null,t.iphone=!0),t.ios&&t.osVersion&&e.indexOf("Version/")>=0&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=e.toLowerCase().split("version/")[1].split(" ")[0]),t.desktop=!(t.os||t.android||t.webView),t.webView=(n||a||r)&&e.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var l=t.osVersion.split("."),h=d.querySelector('meta[name="viewport"]');t.minimalUi=!t.webView&&(r||n)&&(1*l[0]==7?1*l[1]>=1:1*l[0]>7)&&h&&h.getAttribute("content").indexOf("minimal-ui")>=0}return t.pixelRatio=o.devicePixelRatio||1,t}(),x=function(e){var i=this.touchEventsData,s=this.params,a=this.touches,r=e;if(r.originalEvent&&(r=r.originalEvent),i.isTouchEvent="touchstart"===r.type,(i.isTouchEvent||!("which"in r)||3!==r.which)&&(!i.isTouched||!i.isMoved))if(s.noSwiping&&t(r.target).closest("."+s.noSwipingClass)[0])this.allowClick=!0;else if(!s.swipeHandler||t(r).closest(s.swipeHandler)[0]){a.currentX="touchstart"===r.type?r.targetTouches[0].pageX:r.pageX,a.currentY="touchstart"===r.type?r.targetTouches[0].pageY:r.pageY;var n=a.currentX,o=a.currentY;if(!(y.ios&&!y.cordova&&s.iOSEdgeSwipeDetection&&n<=s.iOSEdgeSwipeThreshold&&n>=window.screen.width-s.iOSEdgeSwipeThreshold)){if(l.extend(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=n,a.startY=o,i.touchStartTime=l.now(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==r.type){var h=!0;t(r.target).is(i.formElements)&&(h=!1),d.activeElement&&t(d.activeElement).is(i.formElements)&&d.activeElement.blur(),h&&this.allowTouchMove&&r.preventDefault()}this.emit("touchStart",r)}}},T=function(e){var i=this.touchEventsData,s=this.params,a=this.touches,r=this.rtl,n=e;if(n.originalEvent&&(n=n.originalEvent),!i.isTouchEvent||"mousemove"!==n.type){var o="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,h="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if(n.preventedByNestedSwiper)return a.startX=o,void(a.startY=h);if(!this.allowTouchMove)return this.allowClick=!1,void(i.isTouched&&(l.extend(a,{startX:o,startY:h,currentX:o,currentY:h}),i.touchStartTime=l.now()));if(i.isTouchEvent&&s.touchReleaseOnEdges&&!s.loop)if(this.isVertical()){if(h<a.startY&&this.translate<=this.maxTranslate()||h>a.startY&&this.translate>=this.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(o<a.startX&&this.translate<=this.maxTranslate()||o>a.startX&&this.translate>=this.minTranslate())return;if(i.isTouchEvent&&d.activeElement&&n.target===d.activeElement&&t(n.target).is(i.formElements))return i.isMoved=!0,void(this.allowClick=!1);if(i.allowTouchCallbacks&&this.emit("touchMove",n),!(n.targetTouches&&n.targetTouches.length>1)){a.currentX=o,a.currentY=h;var p,c=a.currentX-a.startX,u=a.currentY-a.startY;if(void 0===i.isScrolling)this.isHorizontal()&&a.currentY===a.startY||this.isVertical()&&a.currentX===a.startX?i.isScrolling=!1:c*c+u*u>=25&&(p=180*Math.atan2(Math.abs(u),Math.abs(c))/Math.PI,i.isScrolling=this.isHorizontal()?p>s.touchAngle:90-p>s.touchAngle);if(i.isScrolling&&this.emit("touchMoveOpposite",n),"undefined"==typeof startMoving&&(a.currentX===a.startX&&a.currentY===a.startY||(i.startMoving=!0)),i.isTouched)if(i.isScrolling)i.isTouched=!1;else if(i.startMoving){this.allowClick=!1,n.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&n.stopPropagation(),i.isMoved||(s.loop&&this.loopFix(),i.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!s.grabCursor||!0!==this.allowSlideNext&&!0!==this.allowSlidePrev||this.setGrabCursor(!0),this.emit("sliderFirstMove",n)),this.emit("sliderMove",n),i.isMoved=!0;var f=this.isHorizontal()?c:u;a.diff=f,f*=s.touchRatio,r&&(f=-f),this.swipeDirection=f>0?"prev":"next",i.currentTranslate=f+i.startTranslate;var v=!0,m=s.resistanceRatio;if(s.touchReleaseOnEdges&&(m=0),f>0&&i.currentTranslate>this.minTranslate()?(v=!1,s.resistance&&(i.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+i.startTranslate+f,m))):f<0&&i.currentTranslate<this.maxTranslate()&&(v=!1,s.resistance&&(i.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-i.startTranslate-f,m))),v&&(n.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),s.threshold>0){if(!(Math.abs(f)>s.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,i.currentTranslate=i.startTranslate,void(a.diff=this.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY)}s.followFinger&&((s.freeMode||s.watchSlidesProgress||s.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),s.freeMode&&(0===i.velocities.length&&i.velocities.push({position:a[this.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:a[this.isHorizontal()?"currentX":"currentY"],time:l.now()})),this.updateProgress(i.currentTranslate),this.setTranslate(i.currentTranslate))}}}},E=function(e){var t=this,i=t.touchEventsData,s=t.params,a=t.touches,r=t.rtl,n=t.$wrapperEl,o=t.slidesGrid,d=t.snapGrid,h=e;if(h.originalEvent&&(h=h.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",h),i.allowTouchCallbacks=!1,i.isTouched){s.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var p,c=l.now(),u=c-i.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(h),t.emit("tap",h),u<300&&c-i.lastClickTime>300&&(i.clickTimeout&&clearTimeout(i.clickTimeout),i.clickTimeout=l.nextTick(function(){t&&!t.destroyed&&t.emit("click",h)},300)),u<300&&c-i.lastClickTime<300&&(i.clickTimeout&&clearTimeout(i.clickTimeout),t.emit("doubleTap",h))),i.lastClickTime=l.now(),l.nextTick(function(){t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||0===a.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,void(i.isMoved=!1);if(i.isTouched=!1,i.isMoved=!1,p=s.followFinger?r?t.translate:-t.translate:-i.currentTranslate,s.freeMode){if(p<-t.minTranslate())return void t.slideTo(t.activeIndex);if(p>-t.maxTranslate())return void(t.slides.length<d.length?t.slideTo(d.length-1):t.slideTo(t.slides.length-1));if(s.freeModeMomentum){if(i.velocities.length>1){var f=i.velocities.pop(),v=i.velocities.pop(),m=f.position-v.position,g=f.time-v.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<s.freeModeMinimumVelocity&&(t.velocity=0),(g>150||l.now()-f.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=s.freeModeMomentumVelocityRatio,i.velocities.length=0;var b=1e3*s.freeModeMomentumRatio,w=t.velocity*b,y=t.translate+w;r&&(y=-y);var x,T=!1,E=20*Math.abs(t.velocity)*s.freeModeMomentumBounceRatio;if(y<t.maxTranslate())s.freeModeMomentumBounce?(y+t.maxTranslate()<-E&&(y=t.maxTranslate()-E),x=t.maxTranslate(),T=!0,i.allowMomentumBounce=!0):y=t.maxTranslate();else if(y>t.minTranslate())s.freeModeMomentumBounce?(y-t.minTranslate()>E&&(y=t.minTranslate()+E),x=t.minTranslate(),T=!0,i.allowMomentumBounce=!0):y=t.minTranslate();else if(s.freeModeSticky){for(var S,C=0;C<d.length;C+=1)if(d[C]>-y){S=C;break}y=-(y=Math.abs(d[S]-y)<Math.abs(d[S-1]-y)||"next"===t.swipeDirection?d[S]:d[S-1])}if(0!==t.velocity)b=r?Math.abs((-y-t.translate)/t.velocity):Math.abs((y-t.translate)/t.velocity);else if(s.freeModeSticky)return void t.slideReset();s.freeModeMomentumBounce&&T?(t.updateProgress(x),t.setTransition(b),t.setTranslate(y),t.transitionStart(),t.animating=!0,n.transitionEnd(function(){t&&!t.destroyed&&i.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(s.speed),t.setTranslate(x),n.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))})):t.velocity?(t.updateProgress(y),t.setTransition(b),t.setTranslate(y),t.transitionStart(),t.animating||(t.animating=!0,n.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(y),t.updateActiveIndex(),t.updateSlidesClasses()}(!s.freeModeMomentum||u>=s.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var M=0,z=t.slidesSizesGrid[0],P=0;P<o.length;P+=s.slidesPerGroup)void 0!==o[P+s.slidesPerGroup]?p>=o[P]&&p<o[P+s.slidesPerGroup]&&(M=P,z=o[P+s.slidesPerGroup]-o[P]):p>=o[P]&&(M=P,z=o[o.length-1]-o[o.length-2]);var k=(p-o[M])/z;if(u>s.longSwipesMs){if(!s.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(k>=s.longSwipesRatio?t.slideTo(M+s.slidesPerGroup):t.slideTo(M)),"prev"===t.swipeDirection&&(k>1-s.longSwipesRatio?t.slideTo(M+s.slidesPerGroup):t.slideTo(M))}else{if(!s.shortSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&t.slideTo(M+s.slidesPerGroup),"prev"===t.swipeDirection&&t.slideTo(M)}}}},S=function(){var e=this.params,t=this.el;if(!t||0!==t.offsetWidth){e.breakpoints&&this.setBreakpoint();var i=this.allowSlideNext,s=this.allowSlidePrev;if(this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),e.freeMode){var a=Math.min(Math.max(this.translate,this.maxTranslate()),this.minTranslate());this.setTranslate(a),this.updateActiveIndex(),this.updateSlidesClasses(),e.autoHeight&&this.updateAutoHeight()}else this.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&this.isEnd&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0);this.allowSlidePrev=s,this.allowSlideNext=i}},C=function(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))};var M={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!0,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},z={update:u,translate:f,transition:v,slide:m,loop:g,grabCursor:b,manipulation:w,events:{attachEvents:function(){var e=this.params,t=this.touchEvents,i=this.el,s=this.wrapperEl;this.onTouchStart=x.bind(this),this.onTouchMove=T.bind(this),this.onTouchEnd=E.bind(this),this.onClick=C.bind(this);var a="container"===e.touchEventsTarget?i:s,r=!!e.nested;if(h.pointerEvents||h.prefixedPointerEvents)a.addEventListener(t.start,this.onTouchStart,!1),(h.touch?a:d).addEventListener(t.move,this.onTouchMove,r),(h.touch?a:d).addEventListener(t.end,this.onTouchEnd,!1);else{if(h.touch){var n=!("touchstart"!==t.start||!h.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};a.addEventListener(t.start,this.onTouchStart,n),a.addEventListener(t.move,this.onTouchMove,h.passiveListener?{passive:!1,capture:r}:r),a.addEventListener(t.end,this.onTouchEnd,n)}(e.simulateTouch&&!y.ios&&!y.android||e.simulateTouch&&!h.touch&&y.ios)&&(a.addEventListener("mousedown",this.onTouchStart,!1),d.addEventListener("mousemove",this.onTouchMove,r),d.addEventListener("mouseup",this.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&a.addEventListener("click",this.onClick,!0),this.on("resize observerUpdate",S)},detachEvents:function(){var e=this.params,t=this.touchEvents,i=this.el,s=this.wrapperEl,a="container"===e.touchEventsTarget?i:s,r=!!e.nested;if(h.pointerEvents||h.prefixedPointerEvents)a.removeEventListener(t.start,this.onTouchStart,!1),(h.touch?a:d).removeEventListener(t.move,this.onTouchMove,r),(h.touch?a:d).removeEventListener(t.end,this.onTouchEnd,!1);else{if(h.touch){var n=!("onTouchStart"!==t.start||!h.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};a.removeEventListener(t.start,this.onTouchStart,n),a.removeEventListener(t.move,this.onTouchMove,r),a.removeEventListener(t.end,this.onTouchEnd,n)}(e.simulateTouch&&!y.ios&&!y.android||e.simulateTouch&&!h.touch&&y.ios)&&(a.removeEventListener("mousedown",this.onTouchStart,!1),d.removeEventListener("mousemove",this.onTouchMove,r),d.removeEventListener("mouseup",this.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&a.removeEventListener("click",this.onClick,!0),this.off("resize observerUpdate",S)}},breakpoints:{setBreakpoint:function(){var e=this.activeIndex,t=this.loopedSlides;void 0===t&&(t=0);var i=this.params,s=i.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var a=this.getBreakpoint(s);if(a&&this.currentBreakpoint!==a){var r=a in s?s[a]:this.originalParams,n=i.loop&&r.slidesPerView!==i.slidesPerView;l.extend(this.params,r),l.extend(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),this.currentBreakpoint=a,n&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(e-t+this.loopedSlides,0,!1)),this.emit("breakpoint",r)}}},getBreakpoint:function(e){if(e){var t=!1,i=[];Object.keys(e).forEach(function(e){i.push(e)}),i.sort(function(e,t){return parseInt(e,10)-parseInt(t,10)});for(var s=0;s<i.length;s+=1){var a=i[s];a>=o.innerWidth&&!t&&(t=a)}return t||"max"}}},checkOverflow:{checkOverflow:function(){var e=this.isLocked;this.isLocked=1===this.snapGrid.length,this.allowTouchMove=!this.isLocked,e&&e!==this.isLocked&&(this.isEnd=!1,this.navigation.update())}},classes:{addClasses:function(){var e=this.classNames,t=this.params,i=this.rtl,s=this.$el,a=[];a.push(t.direction),t.freeMode&&a.push("free-mode"),h.flexbox||a.push("no-flexbox"),t.autoHeight&&a.push("autoheight"),i&&a.push("rtl"),t.slidesPerColumn>1&&a.push("multirow"),y.android&&a.push("android"),y.ios&&a.push("ios"),(h.pointerEvents||h.prefixedPointerEvents)&&a.push("wp8-"+t.direction),a.forEach(function(i){e.push(t.containerModifierClass+i)}),s.addClass(e.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,t,i,s,a,r){var n;function l(){r&&r()}e.complete&&a?l():t?((n=new o.Image).onload=l,n.onerror=l,s&&(n.sizes=s),i&&(n.srcset=i),t&&(n.src=t)):l()},preloadImages:function(){var e=this;function t(){void 0!==e&&null!==e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var i=0;i<e.imagesToLoad.length;i+=1){var s=e.imagesToLoad[i];e.loadImage(s,s.currentSrc||s.getAttribute("src"),s.srcset||s.getAttribute("srcset"),s.sizes||s.getAttribute("sizes"),!0,t)}}}},P={},k=function(e){function i(){for(var s,a,r,n=[],o=arguments.length;o--;)n[o]=arguments[o];1===n.length&&n[0].constructor&&n[0].constructor===Object?a=n[0]:(s=(r=n)[0],a=r[1]);a||(a={}),a=l.extend({},a),s&&!a.el&&(a.el=s),e.call(this,a),Object.keys(z).forEach(function(e){Object.keys(z[e]).forEach(function(t){i.prototype[t]||(i.prototype[t]=z[e][t])})});var d=this;void 0===d.modules&&(d.modules={}),Object.keys(d.modules).forEach(function(e){var t=d.modules[e];if(t.params){var i=Object.keys(t.params)[0],s=t.params[i];if("object"!=typeof s)return;if(!(i in a&&"enabled"in s))return;!0===a[i]&&(a[i]={enabled:!0}),"object"!=typeof a[i]||"enabled"in a[i]||(a[i].enabled=!0),a[i]||(a[i]={enabled:!1})}});var p=l.extend({},M);d.useModulesParams(p),d.params=l.extend({},p,P,a),d.originalParams=l.extend({},d.params),d.passedParams=l.extend({},a);var c=t(d.params.el);if(s=c[0]){if(c.length>1){var u=[];return c.each(function(e,t){var s=l.extend({},a,{el:t});u.push(new i(s))}),u}s.swiper=d,c.data("swiper",d);var f,v,m=c.children("."+d.params.wrapperClass);return l.extend(d,{$el:c,el:s,$wrapperEl:m,wrapperEl:m[0],classNames:[],slides:t(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===d.params.direction},isVertical:function(){return"vertical"===d.params.direction},rtl:"horizontal"===d.params.direction&&("rtl"===s.dir.toLowerCase()||"rtl"===c.css("direction")),wrongRTL:"-webkit-box"===m.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,progress:0,velocity:0,animating:!1,allowSlideNext:d.params.allowSlideNext,allowSlidePrev:d.params.allowSlidePrev,touchEvents:(f=["touchstart","touchmove","touchend"],v=["mousedown","mousemove","mouseup"],h.pointerEvents?v=["pointerdown","pointermove","pointerup"]:h.prefixedPointerEvents&&(v=["MSPointerDown","MSPointerMove","MSPointerUp"]),{start:h.touch||!d.params.simulateTouch?f[0]:v[0],move:h.touch||!d.params.simulateTouch?f[1]:v[1],end:h.touch||!d.params.simulateTouch?f[2]:v[2]}),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:l.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:d.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),d.useModules(),d.params.init&&d.init(),d}}e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i;var s={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return i.prototype.slidesPerViewDynamic=function(){var e=this.params,t=this.slides,i=this.slidesGrid,s=this.size,a=this.activeIndex,r=1;if(e.centeredSlides){for(var n,o=t[a].swiperSlideSize,l=a+1;l<t.length;l+=1)t[l]&&!n&&(r+=1,(o+=t[l].swiperSlideSize)>s&&(n=!0));for(var d=a-1;d>=0;d-=1)t[d]&&!n&&(r+=1,(o+=t[d].swiperSlideSize)>s&&(n=!0))}else for(var h=a+1;h<t.length;h+=1)i[h]-i[a]<s&&(r+=1);return r},i.prototype.update=function(){var e=this;e&&!e.destroyed&&(e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(t(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||t(),e.emit("update"));function t(){var t=e.rtl?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}},i.prototype.init=function(){this.initialized||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit),this.attachEvents(),this.initialized=!0,this.emit("init"))},i.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i=this,s=i.params,a=i.$el,r=i.$wrapperEl,n=i.slides;i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),a.removeAttr("style"),r.removeAttr("style"),n&&n.length&&n.removeClass([s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(function(e){i.off(e)}),!1!==e&&(i.$el[0].swiper=null,i.$el.data("swiper",null),l.deleteProps(i)),i.destroyed=!0},i.extendDefaults=function(e){l.extend(P,e)},s.extendedDefaults.get=function(){return P},s.defaults.get=function(){return M},s.Class.get=function(){return e},s.$.get=function(){return t},Object.defineProperties(i,s),i}(p),$={name:"device",proto:{device:y},static:{device:y}},L={name:"support",proto:{support:h},static:{support:h}},I=function(){return{isSafari:(e=o.navigator.userAgent.toLowerCase(),e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(o.navigator.userAgent)};var e}(),D={name:"browser",proto:{browser:I},static:{browser:I}},O={name:"resize",create:function(){var e=this;l.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){o.addEventListener("resize",this.resize.resizeHandler),o.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){o.removeEventListener("resize",this.resize.resizeHandler),o.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},A={func:o.MutationObserver||o.WebkitMutationObserver,attach:function(e,t){void 0===t&&(t={});var i=this,s=new(0,A.func)(function(e){e.forEach(function(e){i.emit("observerUpdate",e)})});s.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),i.observer.observers.push(s)},init:function(){if(h.observer&&this.params.observer){if(this.params.observeParents)for(var e=this.$el.parents(),t=0;t<e.length;t+=1)this.observer.attach(e[t]);this.observer.attach(this.$el[0],{childList:!1}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}},H={name:"observer",params:{observer:!1,observeParents:!1},create:function(){l.extend(this,{observer:{init:A.init.bind(this),attach:A.attach.bind(this),destroy:A.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},N={update:function(e){var t=this,i=t.params,s=i.slidesPerView,a=i.slidesPerGroup,r=i.centeredSlides,n=t.virtual,o=n.from,d=n.to,h=n.slides,p=n.slidesGrid,c=n.renderSlide,u=n.offset;t.updateActiveIndex();var f,v,m,g=t.activeIndex||0;f=t.rtl&&t.isHorizontal()?"right":t.isHorizontal()?"left":"top",r?(v=Math.floor(s/2)+a,m=Math.floor(s/2)+a):(v=s+(a-1),m=a);var b=Math.max((g||0)-m,0),w=Math.min((g||0)+v,h.length-1),y=(t.slidesGrid[b]||0)-(t.slidesGrid[0]||0);function x(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(l.extend(t.virtual,{from:b,to:w,offset:y,slidesGrid:t.slidesGrid}),o===b&&d===w&&!e)return t.slidesGrid!==p&&y!==u&&t.slides.css(f,y+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:y,from:b,to:w,slides:function(){for(var e=[],t=b;t<=w;t+=1)e.push(h[t]);return e}()}),void x();var T=[],E=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var S=o;S<=d;S+=1)(S<b||S>w)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+S+'"]').remove();for(var C=0;C<h.length;C+=1)C>=b&&C<=w&&(void 0===d||e?E.push(C):(C>d&&E.push(C),C<o&&T.push(C)));E.forEach(function(e){t.$wrapperEl.append(c(h[e],e))}),T.sort(function(e,t){return e<t}).forEach(function(e){t.$wrapperEl.prepend(c(h[e],e))}),t.$wrapperEl.children(".swiper-slide").css(f,y+"px"),x()},renderSlide:function(e,i){var s=this.params.virtual;if(s.cache&&this.virtual.cache[i])return this.virtual.cache[i];var a=s.renderSlide?t(s.renderSlide.call(this,e,i)):t('<div class="'+this.params.slideClass+'" data-swiper-slide-index="'+i+'">'+e+"</div>");return a.attr("data-swiper-slide-index")||a.attr("data-swiper-slide-index",i),s.cache&&(this.virtual.cache[i]=a),a},appendSlide:function(e){this.virtual.slides.push(e),this.virtual.update(!0)},prependSlide:function(e){if(this.virtual.slides.unshift(e),this.params.virtual.cache){var t=this.virtual.cache,i={};Object.keys(t).forEach(function(e){i[e+1]=t[e]}),this.virtual.cache=i}this.virtual.update(!0),this.slideNext(0)}},X={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null}},create:function(){l.extend(this,{virtual:{update:N.update.bind(this),appendSlide:N.appendSlide.bind(this),prependSlide:N.prependSlide.bind(this),renderSlide:N.renderSlide.bind(this),slides:this.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){if(this.params.virtual.enabled){this.classNames.push(this.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};l.extend(this.params,e),l.extend(this.originalParams,e),this.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},Y={handle:function(e){var t=e;t.originalEvent&&(t=t.originalEvent);var i=t.keyCode||t.charCode;if(!this.allowSlideNext&&(this.isHorizontal()&&39===i||this.isVertical()&&40===i))return!1;if(!this.allowSlidePrev&&(this.isHorizontal()&&37===i||this.isVertical()&&38===i))return!1;if(!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey||d.activeElement&&d.activeElement.nodeName&&("input"===d.activeElement.nodeName.toLowerCase()||"textarea"===d.activeElement.nodeName.toLowerCase()))){if(this.params.keyboard.onlyInViewport&&(37===i||39===i||38===i||40===i)){var s=!1;if(this.$el.parents("."+this.params.slideClass).length>0&&0===this.$el.parents("."+this.params.slideActiveClass).length)return;var a=o.pageXOffset,r=o.pageYOffset,n=o.innerWidth,l=o.innerHeight,h=this.$el.offset();this.rtl&&(h.left-=this.$el[0].scrollLeft);for(var p=[[h.left,h.top],[h.left+this.width,h.top],[h.left,h.top+this.height],[h.left+this.width,h.top+this.height]],c=0;c<p.length;c+=1){var u=p[c];u[0]>=a&&u[0]<=a+n&&u[1]>=r&&u[1]<=r+l&&(s=!0)}if(!s)return}this.isHorizontal()?(37!==i&&39!==i||(t.preventDefault?t.preventDefault():t.returnValue=!1),(39===i&&!this.rtl||37===i&&this.rtl)&&this.slideNext(),(37===i&&!this.rtl||39===i&&this.rtl)&&this.slidePrev()):(38!==i&&40!==i||(t.preventDefault?t.preventDefault():t.returnValue=!1),40===i&&this.slideNext(),38===i&&this.slidePrev()),this.emit("keyPress",i)}},enable:function(){this.keyboard.enabled||(t(d).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(t(d).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},G={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){l.extend(this,{keyboard:{enabled:!1,enable:Y.enable.bind(this),disable:Y.disable.bind(this),handle:Y.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var B={lastScrollTime:l.now(),event:o.navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var e="onwheel"in d;if(!e){var t=d.createElement("div");t.setAttribute("onwheel","return;"),e="function"==typeof t.onwheel}return!e&&d.implementation&&d.implementation.hasFeature&&!0!==d.implementation.hasFeature("","")&&(e=d.implementation.hasFeature("Events.wheel","3.0")),e}()?"wheel":"mousewheel",normalize:function(e){var t=0,i=0,s=0,a=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),s=10*t,a=10*i,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(s=e.deltaX),(s||a)&&e.deltaMode&&(1===e.deltaMode?(s*=40,a*=40):(s*=800,a*=800)),s&&!t&&(t=s<1?-1:1),a&&!i&&(i=a<1?-1:1),{spinX:t,spinY:i,pixelX:s,pixelY:a}},handle:function(e){var t=e,i=this,s=i.params.mousewheel;t.originalEvent&&(t=t.originalEvent);var a=0,r=i.rtl?-1:1,n=B.normalize(t);if(s.forceToAxis)if(i.isHorizontal()){if(!(Math.abs(n.pixelX)>Math.abs(n.pixelY)))return!0;a=n.pixelX*r}else{if(!(Math.abs(n.pixelY)>Math.abs(n.pixelX)))return!0;a=n.pixelY}else a=Math.abs(n.pixelX)>Math.abs(n.pixelY)?-n.pixelX*r:-n.pixelY;if(0===a)return!0;if(s.invert&&(a=-a),i.params.freeMode){var d=i.getTranslate()+a*s.sensitivity,h=i.isBeginning,p=i.isEnd;if(d>=i.minTranslate()&&(d=i.minTranslate()),d<=i.maxTranslate()&&(d=i.maxTranslate()),i.setTransition(0),i.setTranslate(d),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!h&&i.isBeginning||!p&&i.isEnd)&&i.updateSlidesClasses(),i.params.freeModeSticky&&(clearTimeout(i.mousewheel.timeout),i.mousewheel.timeout=l.nextTick(function(){i.slideReset()},300)),i.emit("scroll",t),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.stopAutoplay(),0===d||d===i.maxTranslate())return!0}else{if(l.now()-i.mousewheel.lastScrollTime>60)if(a<0)if(i.isEnd&&!i.params.loop||i.animating){if(s.releaseOnEdges)return!0}else i.slideNext(),i.emit("scroll",t);else if(i.isBeginning&&!i.params.loop||i.animating){if(s.releaseOnEdges)return!0}else i.slidePrev(),i.emit("scroll",t);i.mousewheel.lastScrollTime=(new o.Date).getTime()}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},enable:function(){if(!B.event)return!1;if(this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(e=t(this.params.mousewheel.eventsTarged)),e.on(B.event,this.mousewheel.handle),this.mousewheel.enabled=!0,!0},disable:function(){if(!B.event)return!1;if(!this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(e=t(this.params.mousewheel.eventsTarged)),e.off(B.event,this.mousewheel.handle),this.mousewheel.enabled=!1,!0}},V={update:function(){var e=this.params.navigation;if(!this.params.loop){var t=this.navigation,i=t.$nextEl,s=t.$prevEl;s&&s.length>0&&(this.isBeginning?s.addClass(e.disabledClass):s.removeClass(e.disabledClass),s[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass)),i&&i.length>0&&(this.isEnd?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass))}},init:function(){var e,i,s=this,a=s.params.navigation;(a.nextEl||a.prevEl)&&(a.nextEl&&(e=t(a.nextEl),s.params.uniqueNavElements&&"string"==typeof a.nextEl&&e.length>1&&1===s.$el.find(a.nextEl).length&&(e=s.$el.find(a.nextEl))),a.prevEl&&(i=t(a.prevEl),s.params.uniqueNavElements&&"string"==typeof a.prevEl&&i.length>1&&1===s.$el.find(a.prevEl).length&&(i=s.$el.find(a.prevEl))),e&&e.length>0&&e.on("click",function(e){e.preventDefault(),s.isEnd&&!s.params.loop||s.slideNext()}),i&&i.length>0&&i.on("click",function(e){e.preventDefault(),s.isBeginning&&!s.params.loop||s.slidePrev()}),l.extend(s.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:i,prevEl:i&&i[0]}))},destroy:function(){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;t&&t.length&&(t.off("click"),t.removeClass(this.params.navigation.disabledClass)),i&&i.length&&(i.off("click"),i.removeClass(this.params.navigation.disabledClass))}},R={update:function(){var e=this.rtl,i=this.params.pagination;if(i.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var s,a=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,r=this.pagination.$el,n=this.params.loop?Math.ceil((a-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;if(this.params.loop?((s=Math.ceil((this.activeIndex-this.loopedSlides)/this.params.slidesPerGroup))>a-1-2*this.loopedSlides&&(s-=a-2*this.loopedSlides),s>n-1&&(s-=n),s<0&&"bullets"!==this.params.paginationType&&(s=n+s)):s=void 0!==this.snapIndex?this.snapIndex:this.activeIndex||0,"bullets"===i.type&&this.pagination.bullets&&this.pagination.bullets.length>0){var o=this.pagination.bullets;if(i.dynamicBullets&&(this.pagination.bulletSize=o.eq(0)[this.isHorizontal()?"outerWidth":"outerHeight"](!0),r.css(this.isHorizontal()?"width":"height",5*this.pagination.bulletSize+"px")),o.removeClass(i.bulletActiveClass+" "+i.bulletActiveClass+"-next "+i.bulletActiveClass+"-next-next "+i.bulletActiveClass+"-prev "+i.bulletActiveClass+"-prev-prev"),r.length>1)o.each(function(e,a){var r=t(a);r.index()===s&&(r.addClass(i.bulletActiveClass),i.dynamicBullets&&(r.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),r.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next")))});else{var l=o.eq(s);l.addClass(i.bulletActiveClass),i.dynamicBullets&&(l.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),l.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next"))}if(i.dynamicBullets){var d=Math.min(o.length,5),h=(this.pagination.bulletSize*d-this.pagination.bulletSize)/2-s*this.pagination.bulletSize,p=e?"right":"left";o.css(this.isHorizontal()?p:"top",h+"px")}}if("fraction"===i.type&&(r.find("."+i.currentClass).text(s+1),r.find("."+i.totalClass).text(n)),"progressbar"===i.type){var c=(s+1)/n,u=c,f=1;this.isHorizontal()||(f=c,u=1),r.find("."+i.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+u+") scaleY("+f+")").transition(this.params.speed)}"custom"===i.type&&i.renderCustom?(r.html(i.renderCustom(this,s+1,n)),this.emit("paginationRender",this,r[0])):this.emit("paginationUpdate",this,r[0]),r[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](i.lockClass)}},render:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,i=this.pagination.$el,s="";if("bullets"===e.type){for(var a=this.params.loop?Math.ceil((t-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length,r=0;r<a;r+=1)e.renderBullet?s+=e.renderBullet.call(this,r,e.bulletClass):s+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";i.html(s),this.pagination.bullets=i.find("."+e.bulletClass)}"fraction"===e.type&&(s=e.renderFraction?e.renderFraction.call(this,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',i.html(s)),"progressbar"===e.type&&(s=e.renderProgressbar?e.renderProgressbar.call(this,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',i.html(s)),"custom"!==e.type&&this.emit("paginationRender",this.pagination.$el[0])}},init:function(){var e=this,i=e.params.pagination;if(i.el){var s=t(i.el);0!==s.length&&(e.params.uniqueNavElements&&"string"==typeof i.el&&s.length>1&&1===e.$el.find(i.el).length&&(s=e.$el.find(i.el)),"bullets"===i.type&&i.clickable&&s.addClass(i.clickableClass),s.addClass(i.modifierClass+i.type),"bullets"===i.type&&i.dynamicBullets&&s.addClass(""+i.modifierClass+i.type+"-dynamic"),i.clickable&&s.on("click","."+i.bulletClass,function(i){i.preventDefault();var s=t(this).index()*e.params.slidesPerGroup;e.params.loop&&(s+=e.loopedSlides),e.slideTo(s)}),l.extend(e.pagination,{$el:s,el:s[0]}))}},destroy:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click","."+e.bulletClass)}}},F={setTranslate:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=this.rtl,i=this.progress,s=e.dragSize,a=e.trackSize,r=e.$dragEl,n=e.$el,o=this.params.scrollbar,l=s,d=(a-s)*i;t&&this.isHorizontal()?(d=-d)>0?(l=s-d,d=0):-d+s>a&&(l=a+d):d<0?(l=s+d,d=0):d+s>a&&(l=a-d),this.isHorizontal()?(h.transforms3d?r.transform("translate3d("+d+"px, 0, 0)"):r.transform("translateX("+d+"px)"),r[0].style.width=l+"px"):(h.transforms3d?r.transform("translate3d(0px, "+d+"px, 0)"):r.transform("translateY("+d+"px)"),r[0].style.height=l+"px"),o.hide&&(clearTimeout(this.scrollbar.timeout),n[0].style.opacity=1,this.scrollbar.timeout=setTimeout(function(){n[0].style.opacity=0,n.transition(400)},1e3))}},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=e.$dragEl,i=e.$el;t[0].style.width="",t[0].style.height="";var s,a=this.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,r=this.size/this.virtualSize,n=r*(a/this.size);s="auto"===this.params.scrollbar.dragSize?a*r:parseInt(this.params.scrollbar.dragSize,10),this.isHorizontal()?t[0].style.width=s+"px":t[0].style.height=s+"px",i[0].style.display=r>=1?"none":"",this.params.scrollbarHide&&(i[0].style.opacity=0),l.extend(e,{trackSize:a,divider:r,moveDivider:n,dragSize:s}),e.$el[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](this.params.scrollbar.lockClass)}},setDragPosition:function(e){var t,i=this.scrollbar,s=i.$el,a=i.dragSize,r=i.trackSize;t=((this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY)-s.offset()[this.isHorizontal()?"left":"top"]-a/2)/(r-a),t=Math.max(Math.min(t,1),0),this.rtl&&(t=1-t);var n=this.minTranslate()+(this.maxTranslate()-this.minTranslate())*t;this.updateProgress(n),this.setTranslate(n),this.updateActiveIndex(),this.updateSlidesClasses()},onDragStart:function(e){var t=this.params.scrollbar,i=this.scrollbar,s=this.$wrapperEl,a=i.$el,r=i.$dragEl;this.scrollbar.isTouched=!0,e.preventDefault(),e.stopPropagation(),s.transition(100),r.transition(100),i.setDragPosition(e),clearTimeout(this.scrollbar.dragTimeout),a.transition(0),t.hide&&a.css("opacity",1),this.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,i=this.$wrapperEl,s=t.$el,a=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),i.transition(0),s.transition(0),a.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this.params.scrollbar,i=this.scrollbar.$el;this.scrollbar.isTouched&&(this.scrollbar.isTouched=!1,t.hide&&(clearTimeout(this.scrollbar.dragTimeout),this.scrollbar.dragTimeout=l.nextTick(function(){i.css("opacity",0),i.transition(400)},1e3)),this.emit("scrollbarDragEnd",e),t.snapOnRelease&&this.slideReset())},enableDraggable:function(){if(this.params.scrollbar.el){var e=this.scrollbar.$el,i=h.touch?e[0]:document;e.on(this.scrollbar.dragEvents.start,this.scrollbar.onDragStart),t(i).on(this.scrollbar.dragEvents.move,this.scrollbar.onDragMove),t(i).on(this.scrollbar.dragEvents.end,this.scrollbar.onDragEnd)}},disableDraggable:function(){if(this.params.scrollbar.el){var e=this.scrollbar.$el,i=h.touch?e[0]:document;e.off(this.scrollbar.dragEvents.start),t(i).off(this.scrollbar.dragEvents.move),t(i).off(this.scrollbar.dragEvents.end)}},init:function(){var e=this;if(e.params.scrollbar.el){var i=e.scrollbar,s=e.$el,a=e.touchEvents,r=e.params.scrollbar,n=t(r.el);e.params.uniqueNavElements&&"string"==typeof r.el&&n.length>1&&1===s.find(r.el).length&&(n=s.find(r.el));var o=n.find(".swiper-scrollbar-drag");0===o.length&&(o=t('<div class="swiper-scrollbar-drag"></div>'),n.append(o)),e.scrollbar.dragEvents=!1!==e.params.simulateTouch||h.touch?a:{start:"mousedown",move:"mousemove",end:"mouseup"},l.extend(i,{$el:n,el:n[0],$dragEl:o,dragEl:o[0]}),r.draggable&&i.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},W={setTransform:function(e,i){var s=this.rtl,a=t(e),r=s?-1:1,n=a.attr("data-swiper-parallax")||"0",o=a.attr("data-swiper-parallax-x"),l=a.attr("data-swiper-parallax-y"),d=a.attr("data-swiper-parallax-scale"),h=a.attr("data-swiper-parallax-opacity");if(o||l?(o=o||"0",l=l||"0"):this.isHorizontal()?(o=n,l="0"):(l=n,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*i*r+"%":o*i*r+"px",l=l.indexOf("%")>=0?parseInt(l,10)*i+"%":l*i+"px",void 0!==h&&null!==h){var p=h-(h-1)*(1-Math.abs(i));a[0].style.opacity=p}if(void 0===d||null===d)a.transform("translate3d("+o+", "+l+", 0px)");else{var c=d-(d-1)*(1-Math.abs(i));a.transform("translate3d("+o+", "+l+", 0px) scale("+c+")")}},setTranslate:function(){var e=this,i=e.$el,s=e.slides,a=e.progress,r=e.snapGrid;i.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(t,i){e.parallax.setTransform(i,a)}),s.each(function(i,s){var n=s.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(n+=Math.ceil(i/2)-a*(r.length-1)),n=Math.min(Math.max(n,-1),1),t(s).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(t,i){e.parallax.setTransform(i,n)})})},setTransition:function(e){void 0===e&&(e=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(i,s){var a=t(s),r=parseInt(a.attr("data-swiper-parallax-duration"),10)||e;0===e&&(r=0),a.transition(r)})}},j={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,s=e.targetTouches[1].pageX,a=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(s-t,2)+Math.pow(a-i,2))},onGestureStart:function(e){var i=this.params.zoom,s=this.zoom,a=s.gesture;if(s.fakeGestureTouched=!1,s.fakeGestureMoved=!1,!h.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;s.fakeGestureTouched=!0,a.scaleStart=j.getDistanceBetweenTouches(e)}a.$slideEl&&a.$slideEl.length||(a.$slideEl=t(this),0===a.$slideEl.length&&(a.$slideEl=this.slides.eq(this.activeIndex)),a.$imageEl=a.$slideEl.find("img, svg, canvas"),a.$imageWrapEl=a.$imageEl.parent("."+i.containerClass),a.maxRatio=a.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==a.$imageWrapEl.length)?(a.$imageEl.transition(0),this.zoom.isScaling=!0):a.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,i=this.zoom,s=i.gesture;if(!h.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;i.fakeGestureMoved=!0,s.scaleMove=j.getDistanceBetweenTouches(e)}s.$imageEl&&0!==s.$imageEl.length&&(h.gestures?this.zoom.scale=e.scale*i.currentScale:i.scale=s.scaleMove/s.scaleStart*i.currentScale,i.scale>s.maxRatio&&(i.scale=s.maxRatio-1+Math.pow(i.scale-s.maxRatio+1,.5)),i.scale<t.minRatio&&(i.scale=t.minRatio+1-Math.pow(t.minRatio-i.scale+1,.5)),s.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,i=this.zoom,s=i.gesture;if(!h.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!y.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}s.$imageEl&&0!==s.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,s.maxRatio),t.minRatio),s.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+i.scale+")"),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(s.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,i=t.gesture,s=t.image;i.$imageEl&&0!==i.$imageEl.length&&(s.isTouched||(y.android&&e.preventDefault(),s.isTouched=!0,s.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this.zoom,i=t.gesture,s=t.image,a=t.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(this.allowClick=!1,s.isTouched&&i.$slideEl)){s.isMoved||(s.width=i.$imageEl[0].offsetWidth,s.height=i.$imageEl[0].offsetHeight,s.startX=l.getTranslate(i.$imageWrapEl[0],"x")||0,s.startY=l.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),this.rtl&&(s.startX=-s.startX),this.rtl&&(s.startY=-s.startY));var r=s.width*t.scale,n=s.height*t.scale;if(!(r<i.slideWidth&&n<i.slideHeight)){if(s.minX=Math.min(i.slideWidth/2-r/2,0),s.maxX=-s.minX,s.minY=Math.min(i.slideHeight/2-n/2,0),s.maxY=-s.minY,s.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!s.isMoved&&!t.isScaling){if(this.isHorizontal()&&(Math.floor(s.minX)===Math.floor(s.startX)&&s.touchesCurrent.x<s.touchesStart.x||Math.floor(s.maxX)===Math.floor(s.startX)&&s.touchesCurrent.x>s.touchesStart.x))return void(s.isTouched=!1);if(!this.isHorizontal()&&(Math.floor(s.minY)===Math.floor(s.startY)&&s.touchesCurrent.y<s.touchesStart.y||Math.floor(s.maxY)===Math.floor(s.startY)&&s.touchesCurrent.y>s.touchesStart.y))return void(s.isTouched=!1)}e.preventDefault(),e.stopPropagation(),s.isMoved=!0,s.currentX=s.touchesCurrent.x-s.touchesStart.x+s.startX,s.currentY=s.touchesCurrent.y-s.touchesStart.y+s.startY,s.currentX<s.minX&&(s.currentX=s.minX+1-Math.pow(s.minX-s.currentX+1,.8)),s.currentX>s.maxX&&(s.currentX=s.maxX-1+Math.pow(s.currentX-s.maxX+1,.8)),s.currentY<s.minY&&(s.currentY=s.minY+1-Math.pow(s.minY-s.currentY+1,.8)),s.currentY>s.maxY&&(s.currentY=s.maxY-1+Math.pow(s.currentY-s.maxY+1,.8)),a.prevPositionX||(a.prevPositionX=s.touchesCurrent.x),a.prevPositionY||(a.prevPositionY=s.touchesCurrent.y),a.prevTime||(a.prevTime=Date.now()),a.x=(s.touchesCurrent.x-a.prevPositionX)/(Date.now()-a.prevTime)/2,a.y=(s.touchesCurrent.y-a.prevPositionY)/(Date.now()-a.prevTime)/2,Math.abs(s.touchesCurrent.x-a.prevPositionX)<2&&(a.x=0),Math.abs(s.touchesCurrent.y-a.prevPositionY)<2&&(a.y=0),a.prevPositionX=s.touchesCurrent.x,a.prevPositionY=s.touchesCurrent.y,a.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+s.currentX+"px, "+s.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,i=e.image,s=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var a=300,r=300,n=s.x*a,o=i.currentX+n,l=s.y*r,d=i.currentY+l;0!==s.x&&(a=Math.abs((o-i.currentX)/s.x)),0!==s.y&&(r=Math.abs((d-i.currentY)/s.y));var h=Math.max(a,r);i.currentX=o,i.currentY=d;var p=i.width*e.scale,c=i.height*e.scale;i.minX=Math.min(t.slideWidth/2-p/2,0),i.maxX=-i.minX,i.minY=Math.min(t.slideHeight/2-c/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),t.$imageWrapEl.transition(h).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl.transform("translate3d(0,0,0)"),t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0,e.scale=1,e.currentScale=1)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var i,s,a,r,n,o,l,d,h,p,c,u,f,v,m,g,b=this.zoom,w=this.params.zoom,y=b.gesture,x=b.image;(y.$slideEl||(y.$slideEl=this.clickedSlide?t(this.clickedSlide):this.slides.eq(this.activeIndex),y.$imageEl=y.$slideEl.find("img, svg, canvas"),y.$imageWrapEl=y.$imageEl.parent("."+w.containerClass)),y.$imageEl&&0!==y.$imageEl.length)&&(y.$slideEl.addClass(""+w.zoomedSlideClass),void 0===x.touchesStart.x&&e?(i="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,s="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(i=x.touchesStart.x,s=x.touchesStart.y),b.scale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,b.currentScale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,e?(m=y.$slideEl[0].offsetWidth,g=y.$slideEl[0].offsetHeight,a=y.$slideEl.offset().left+m/2-i,r=y.$slideEl.offset().top+g/2-s,l=y.$imageEl[0].offsetWidth,d=y.$imageEl[0].offsetHeight,h=l*b.scale,p=d*b.scale,f=-(c=Math.min(m/2-h/2,0)),v=-(u=Math.min(g/2-p/2,0)),n=a*b.scale,o=r*b.scale,n<c&&(n=c),n>f&&(n=f),o<u&&(o=u),o>v&&(o=v)):(n=0,o=0),y.$imageWrapEl.transition(300).transform("translate3d("+n+"px, "+o+"px,0)"),y.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+b.scale+")"))},out:function(){var e=this.zoom,i=this.params.zoom,s=e.gesture;s.$slideEl||(s.$slideEl=this.clickedSlide?t(this.clickedSlide):this.slides.eq(this.activeIndex),s.$imageEl=s.$slideEl.find("img, svg, canvas"),s.$imageWrapEl=s.$imageEl.parent("."+i.containerClass)),s.$imageEl&&0!==s.$imageEl.length&&(e.scale=1,e.currentScale=1,s.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),s.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),s.$slideEl.removeClass(""+i.zoomedSlideClass),s.$slideEl=void 0)},enable:function(){var e=this,i=e.zoom;if(!i.enabled){i.enabled=!0;var s=e.slides,a=!("touchstart"!==e.touchEvents.start||!h.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};h.gestures?(s.on("gesturestart",i.onGestureStart,a),s.on("gesturechange",i.onGestureChange,a),s.on("gestureend",i.onGestureEnd,a)):"touchstart"===e.touchEvents.start&&(s.on(e.touchEvents.start,i.onGestureStart,a),s.on(e.touchEvents.move,i.onGestureChange,a),s.on(e.touchEvents.end,i.onGestureEnd,a)),e.slides.each(function(s,a){var r=t(a);r.find("."+e.params.zoom.containerClass).length>0&&r.on(e.touchEvents.move,i.onTouchMove)})}},disable:function(){var e=this,i=e.zoom;if(i.enabled){e.zoom.enabled=!1;var s=e.slides,a=!("touchstart"!==e.touchEvents.start||!h.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};h.gestures?(s.off("gesturestart",i.onGestureStart,a),s.off("gesturechange",i.onGestureChange,a),s.off("gestureend",i.onGestureEnd,a)):"touchstart"===e.touchEvents.start&&(s.off(e.touchEvents.start,i.onGestureStart,a),s.off(e.touchEvents.move,i.onGestureChange,a),s.off(e.touchEvents.end,i.onGestureEnd,a)),e.slides.each(function(s,a){var r=t(a);r.find("."+e.params.zoom.containerClass).length>0&&r.off(e.touchEvents.move,i.onTouchMove)})}}},q={loadInSlide:function(e,i){void 0===i&&(i=!0);var s=this,a=s.params.lazy;if(void 0!==e&&0!==s.slides.length){var r=s.virtual&&s.params.virtual.enabled?s.$wrapperEl.children("."+s.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):s.slides.eq(e),n=r.find("."+a.elementClass+":not(."+a.loadedClass+"):not(."+a.loadingClass+")");!r.hasClass(a.elementClass)||r.hasClass(a.loadedClass)||r.hasClass(a.loadingClass)||(n=n.add(r[0])),0!==n.length&&n.each(function(e,n){var o=t(n);o.addClass(a.loadingClass);var l=o.attr("data-background"),d=o.attr("data-src"),h=o.attr("data-srcset"),p=o.attr("data-sizes");s.loadImage(o[0],d||l,h,p,!1,function(){if(void 0!==s&&null!==s&&s&&(!s||s.params)&&!s.destroyed){if(l?(o.css("background-image",'url("'+l+'")'),o.removeAttr("data-background")):(h&&(o.attr("srcset",h),o.removeAttr("data-srcset")),p&&(o.attr("sizes",p),o.removeAttr("data-sizes")),d&&(o.attr("src",d),o.removeAttr("data-src"))),o.addClass(a.loadedClass).removeClass(a.loadingClass),r.find("."+a.preloaderClass).remove(),s.params.loop&&i){var e=r.attr("data-swiper-slide-index");if(r.hasClass(s.params.slideDuplicateClass)){var t=s.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+s.params.slideDuplicateClass+")");s.lazy.loadInSlide(t.index(),!1)}else{var n=s.$wrapperEl.children("."+s.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');s.lazy.loadInSlide(n.index(),!1)}}s.emit("lazyImageReady",r[0],o[0])}}),s.emit("lazyImageLoad",r[0],o[0])})}},load:function(){var e=this,i=e.$wrapperEl,s=e.params,a=e.slides,r=e.activeIndex,n=e.virtual&&s.virtual.enabled,o=s.lazy,l=s.slidesPerView;function d(e){if(n){if(i.children("."+s.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(a[e])return!0;return!1}function h(e){return n?t(e).attr("data-swiper-slide-index"):t(e).index()}if("auto"===l&&(l=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)i.children("."+s.slideVisibleClass).each(function(i,s){var a=n?t(s).attr("data-swiper-slide-index"):t(s).index();e.lazy.loadInSlide(a)});else if(l>1)for(var p=r;p<r+l;p+=1)d(p)&&e.lazy.loadInSlide(p);else e.lazy.loadInSlide(r);if(o.loadPrevNext)if(l>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var c=o.loadPrevNextAmount,u=l,f=Math.min(r+u+Math.max(c,u),a.length),v=Math.max(r-Math.max(u,c),0),m=r+l;m<f;m+=1)d(m)&&e.lazy.loadInSlide(m);for(var g=v;g<r;g+=1)d(g)&&e.lazy.loadInSlide(g)}else{var b=i.children("."+s.slideNextClass);b.length>0&&e.lazy.loadInSlide(h(b));var w=i.children("."+s.slidePrevClass);w.length>0&&e.lazy.loadInSlide(h(w))}}},K={LinearSpline:function(e,t){var i,s,a,r,n,o=function(e,t){for(s=-1,i=e.length;i-s>1;)e[a=i+s>>1]<=t?s=a:i=a;return i};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(n=o(this.x,e),r=n-1,(e-this.x[r])*(this.y[n]-this.y[r])/(this.x[n]-this.x[r])+this.y[r]):0},this},getInterpolateFunction:function(e){this.controller.spline||(this.controller.spline=this.params.loop?new K.LinearSpline(this.slidesGrid,e.slidesGrid):new K.LinearSpline(this.snapGrid,e.snapGrid))},setTranslate:function(e,t){var i,s,a=this,r=a.controller.control;function n(e){var t=e.rtl&&"horizontal"===e.params.direction?-a.translate:a.translate;"slide"===a.params.controller.by&&(a.controller.getInterpolateFunction(e),s=-a.controller.spline.interpolate(-t)),s&&"container"!==a.params.controller.by||(i=(e.maxTranslate()-e.minTranslate())/(a.maxTranslate()-a.minTranslate()),s=(t-a.minTranslate())*i+e.minTranslate()),a.params.controller.inverse&&(s=e.maxTranslate()-s),e.updateProgress(s),e.setTranslate(s,a),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(r))for(var o=0;o<r.length;o+=1)r[o]!==t&&r[o]instanceof k&&n(r[o]);else r instanceof k&&t!==r&&n(r)},setTransition:function(e,t){var i,s=this,a=s.controller.control;function r(t){t.setTransition(e,s),0!==e&&(t.transitionStart(),t.$wrapperEl.transitionEnd(function(){a&&(t.params.loop&&"slide"===s.params.controller.by&&t.loopFix(),t.transitionEnd())}))}if(Array.isArray(a))for(i=0;i<a.length;i+=1)a[i]!==t&&a[i]instanceof k&&r(a[i]);else a instanceof k&&t!==a&&r(a)}},U={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var i=this.params.a11y;if(13===e.keyCode){var s=t(e.target);this.navigation&&this.navigation.$nextEl&&s.is(this.navigation.$nextEl)&&(this.isEnd&&!this.params.loop||this.slideNext(),this.isEnd?this.a11y.notify(i.lastSlideMessage):this.a11y.notify(i.nextSlideMessage)),this.navigation&&this.navigation.$prevEl&&s.is(this.navigation.$prevEl)&&(this.isBeginning&&!this.params.loop||this.slidePrev(),this.isBeginning?this.a11y.notify(i.firstSlideMessage):this.a11y.notify(i.prevSlideMessage)),this.pagination&&s.is("."+this.params.pagination.bulletClass)&&s[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){if(!this.params.loop){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;i&&i.length>0&&(this.isBeginning?this.a11y.disableEl(i):this.a11y.enableEl(i)),t&&t.length>0&&(this.isEnd?this.a11y.disableEl(t):this.a11y.enableEl(t))}},updatePagination:function(){var e=this,i=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each(function(s,a){var r=t(a);e.a11y.makeElFocusable(r),e.a11y.addElRole(r,"button"),e.a11y.addElLabel(r,i.paginationBulletMessage.replace(/{{index}}/,r.index()+1))})},init:function(){this.$el.append(this.a11y.liveRegion);var e,t,i=this.params.a11y;this.navigation&&this.navigation.$nextEl&&(e=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(t=this.navigation.$prevEl),e&&(this.a11y.makeElFocusable(e),this.a11y.addElRole(e,"button"),this.a11y.addElLabel(e,i.nextSlideMessage),e.on("keydown",this.a11y.onEnterKey)),t&&(this.a11y.makeElFocusable(t),this.a11y.addElRole(t,"button"),this.a11y.addElLabel(t,i.prevSlideMessage),t.on("keydown",this.a11y.onEnterKey)),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.on("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)},destroy:function(){var e,t;this.a11y.liveRegion&&this.a11y.liveRegion.length>0&&this.a11y.liveRegion.remove(),this.navigation&&this.navigation.$nextEl&&(e=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(t=this.navigation.$prevEl),e&&e.off("keydown",this.a11y.onEnterKey),t&&t.off("keydown",this.a11y.onEnterKey),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.off("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)}},_={init:function(){if(this.params.history){if(!o.history||!o.history.pushState)return this.params.history.enabled=!1,void(this.params.hashNavigation.enabled=!0);var e=this.history;e.initialized=!0,e.paths=_.getPathValues(),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,this.params.runCallbacksOnInit),this.params.history.replaceState||o.addEventListener("popstate",this.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||o.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=_.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=o.location.pathname.slice(1).split("/").filter(function(e){return""!==e}),t=e.length;return{key:e[t-2],value:e[t-1]}},setHistory:function(e,t){if(this.history.initialized&&this.params.history.enabled){var i=this.slides.eq(t),s=_.slugify(i.attr("data-history"));o.location.pathname.includes(e)||(s=e+"/"+s);var a=o.history.state;a&&a.value===s||(this.params.history.replaceState?o.history.replaceState({value:s},null,s):o.history.pushState({value:s},null,s))}},slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,i){if(t)for(var s=0,a=this.slides.length;s<a;s+=1){var r=this.slides.eq(s);if(_.slugify(r.attr("data-history"))===t&&!r.hasClass(this.params.slideDuplicateClass)){var n=r.index();this.slideTo(n,e,i)}}else this.slideTo(0,e,i)}},Z={onHashCange:function(){var e=d.location.hash.replace("#","");e!==this.slides.eq(this.activeIndex).attr("data-hash")&&this.slideTo(this.$wrapperEl.children("."+this.params.slideClass+'[data-hash="'+e+'"]').index())},setHash:function(){if(this.hashNavigation.initialized&&this.params.hashNavigation.enabled)if(this.params.hashNavigation.replaceState&&o.history&&o.history.replaceState)o.history.replaceState(null,null,"#"+this.slides.eq(this.activeIndex).attr("data-hash")||"");else{var e=this.slides.eq(this.activeIndex),t=e.attr("data-hash")||e.attr("data-history");d.location.hash=t||""}},init:function(){if(!(!this.params.hashNavigation.enabled||this.params.history&&this.params.history.enabled)){this.hashNavigation.initialized=!0;var e=d.location.hash.replace("#","");if(e)for(var i=0,s=this.slides.length;i<s;i+=1){var a=this.slides.eq(i);if((a.attr("data-hash")||a.attr("data-history"))===e&&!a.hasClass(this.params.slideDuplicateClass)){var r=a.index();this.slideTo(r,0,this.params.runCallbacksOnInit,!0)}}this.params.hashNavigation.watchState&&t(o).on("hashchange",this.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&t(o).off("hashchange",this.hashNavigation.onHashCange)}},Q={run:function(){var e=this,t=e.slides.eq(e.activeIndex),i=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),e.autoplay.timeout=l.nextTick(function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay"))},i)},start:function(){return void 0===this.autoplay.timeout&&(!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0))},stop:function(){return!!this.autoplay.running&&(void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?t.$wrapperEl.transitionEnd(function(){t&&!t.destroyed&&(t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}):(t.autoplay.paused=!1,t.autoplay.run())))}},J={setTranslate:function(){for(var e=this.slides,t=0;t<e.length;t+=1){var i=this.slides.eq(t),s=-i[0].swiperSlideOffset;this.params.virtualTranslate||(s-=this.translate);var a=0;this.isHorizontal()||(a=s,s=0);var r=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:r}).transform("translate3d("+s+"px, "+a+"px, 0px)")}},setTransition:function(e){var t=this,i=t.slides,s=t.$wrapperEl;if(i.transition(e),t.params.virtualTranslate&&0!==e){var a=!1;i.transitionEnd(function(){if(!a&&t&&!t.destroyed){a=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)s.trigger(e[i])}})}}},ee={setTranslate:function(){var e,i=this.$el,s=this.$wrapperEl,a=this.slides,r=this.width,n=this.height,o=this.rtl,l=this.size,d=this.params.cubeEffect,h=this.isHorizontal(),p=this.virtual&&this.params.virtual.enabled,c=0;d.shadow&&(h?(0===(e=s.find(".swiper-cube-shadow")).length&&(e=t('<div class="swiper-cube-shadow"></div>'),s.append(e)),e.css({height:r+"px"})):0===(e=i.find(".swiper-cube-shadow")).length&&(e=t('<div class="swiper-cube-shadow"></div>'),i.append(e)));for(var u=0;u<a.length;u+=1){var f=a.eq(u),v=u;p&&(v=parseInt(f.attr("data-swiper-slide-index"),10));var m=90*v,g=Math.floor(m/360);o&&(m=-m,g=Math.floor(-m/360));var b=Math.max(Math.min(f[0].progress,1),-1),w=0,y=0,x=0;v%4==0?(w=4*-g*l,x=0):(v-1)%4==0?(w=0,x=4*-g*l):(v-2)%4==0?(w=l+4*g*l,x=l):(v-3)%4==0&&(w=-l,x=3*l+4*l*g),o&&(w=-w),h||(y=w,w=0);var T="rotateX("+(h?0:-m)+"deg) rotateY("+(h?m:0)+"deg) translate3d("+w+"px, "+y+"px, "+x+"px)";if(b<=1&&b>-1&&(c=90*v+90*b,o&&(c=90*-v-90*b)),f.transform(T),d.slideShadows){var E=h?f.find(".swiper-slide-shadow-left"):f.find(".swiper-slide-shadow-top"),S=h?f.find(".swiper-slide-shadow-right"):f.find(".swiper-slide-shadow-bottom");0===E.length&&(E=t('<div class="swiper-slide-shadow-'+(h?"left":"top")+'"></div>'),f.append(E)),0===S.length&&(S=t('<div class="swiper-slide-shadow-'+(h?"right":"bottom")+'"></div>'),f.append(S)),E.length&&(E[0].style.opacity=Math.max(-b,0)),S.length&&(S[0].style.opacity=Math.max(b,0))}}if(s.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),d.shadow)if(h)e.transform("translate3d(0px, "+(r/2+d.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.shadowScale+")");else{var C=Math.abs(c)-90*Math.floor(Math.abs(c)/90),M=1.5-(Math.sin(2*C*Math.PI/360)/2+Math.cos(2*C*Math.PI/360)/2),z=d.shadowScale,P=d.shadowScale/M,k=d.shadowOffset;e.transform("scale3d("+z+", 1, "+P+") translate3d(0px, "+(n/2+k)+"px, "+-n/2/P+"px) rotateX(-90deg)")}var $=I.isSafari||I.isUiWebView?-l/2:0;s.transform("translate3d(0px,0,"+$+"px) rotateX("+(this.isHorizontal()?0:c)+"deg) rotateY("+(this.isHorizontal()?-c:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},te={setTranslate:function(){for(var e=this.slides,i=0;i<e.length;i+=1){var s=e.eq(i),a=s[0].progress;this.params.flipEffect.limitRotation&&(a=Math.max(Math.min(s[0].progress,1),-1));var r=-180*a,n=0,o=-s[0].swiperSlideOffset,l=0;if(this.isHorizontal()?this.rtl&&(r=-r):(l=o,o=0,n=-r,r=0),s[0].style.zIndex=-Math.abs(Math.round(a))+e.length,this.params.flipEffect.slideShadows){var d=this.isHorizontal()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top"),h=this.isHorizontal()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");0===d.length&&(d=t('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"left":"top")+'"></div>'),s.append(d)),0===h.length&&(h=t('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"right":"bottom")+'"></div>'),s.append(h)),d.length&&(d[0].style.opacity=Math.max(-a,0)),h.length&&(h[0].style.opacity=Math.max(a,0))}s.transform("translate3d("+o+"px, "+l+"px, 0px) rotateX("+n+"deg) rotateY("+r+"deg)")}},setTransition:function(e){var t=this,i=t.slides,s=t.activeIndex,a=t.$wrapperEl;if(i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var r=!1;i.eq(s).transitionEnd(function(){if(!r&&t&&!t.destroyed){r=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)a.trigger(e[i])}})}}},ie={setTranslate:function(){for(var e=this.width,i=this.height,s=this.slides,a=this.$wrapperEl,r=this.slidesSizesGrid,n=this.params.coverflowEffect,o=this.isHorizontal(),l=this.translate,d=o?e/2-l:i/2-l,p=o?n.rotate:-n.rotate,c=n.depth,u=0,f=s.length;u<f;u+=1){var v=s.eq(u),m=r[u],g=(d-v[0].swiperSlideOffset-m/2)/m*n.modifier,b=o?p*g:0,w=o?0:p*g,y=-c*Math.abs(g),x=o?0:n.stretch*g,T=o?n.stretch*g:0;Math.abs(T)<.001&&(T=0),Math.abs(x)<.001&&(x=0),Math.abs(y)<.001&&(y=0),Math.abs(b)<.001&&(b=0),Math.abs(w)<.001&&(w=0);var E="translate3d("+T+"px,"+x+"px,"+y+"px)  rotateX("+w+"deg) rotateY("+b+"deg)";if(v.transform(E),v[0].style.zIndex=1-Math.abs(Math.round(g)),n.slideShadows){var S=o?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),C=o?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom");0===S.length&&(S=t('<div class="swiper-slide-shadow-'+(o?"left":"top")+'"></div>'),v.append(S)),0===C.length&&(C=t('<div class="swiper-slide-shadow-'+(o?"right":"bottom")+'"></div>'),v.append(C)),S.length&&(S[0].style.opacity=g>0?g:0),C.length&&(C[0].style.opacity=-g>0?-g:0)}}(h.pointerEvents||h.prefixedPointerEvents)&&(a[0].style.perspectiveOrigin=d+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},se=[$,L,D,O,H,X,G,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){l.extend(this,{mousewheel:{enabled:!1,enable:B.enable.bind(this),disable:B.disable.bind(this),handle:B.handle.bind(this),lastScrollTime:l.now()}})},on:{init:function(){this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){l.extend(this,{navigation:{init:V.init.bind(this),update:V.update.bind(this),destroy:V.destroy.bind(this)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var i=this.navigation,s=i.$nextEl,a=i.$prevEl;!this.params.navigation.hideOnClick||t(e.target).is(a)||t(e.target).is(s)||(s&&s.toggleClass(this.params.navigation.hiddenClass),a&&a.toggleClass(this.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,type:"bullets",dynamicBullets:!1,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){l.extend(this,{pagination:{init:R.init.bind(this),render:R.render.bind(this),update:R.update.bind(this),destroy:R.destroy.bind(this)}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){this.params.loop?this.pagination.update():void 0===this.snapIndex&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){this.params.pagination.el&&this.params.pagination.hideOnClick&&this.pagination.$el.length>0&&!t(e.target).hasClass(this.params.pagination.bulletClass)&&this.pagination.$el.toggleClass(this.params.pagination.hiddenClass)}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock"}},create:function(){l.extend(this,{scrollbar:{init:F.init.bind(this),destroy:F.destroy.bind(this),updateSize:F.updateSize.bind(this),setTranslate:F.setTranslate.bind(this),setTransition:F.setTransition.bind(this),enableDraggable:F.enableDraggable.bind(this),disableDraggable:F.disableDraggable.bind(this),setDragPosition:F.setDragPosition.bind(this),onDragStart:F.onDragStart.bind(this),onDragMove:F.onDragMove.bind(this),onDragEnd:F.onDragEnd.bind(this),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){l.extend(this,{parallax:{setTransform:W.setTransform.bind(this),setTranslate:W.setTranslate.bind(this),setTransition:W.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.watchSlidesProgress=!0},init:function(){this.params.parallax&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function(i){t[i]=j[i].bind(e)}),l.extend(e,{zoom:t})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){l.extend(this,{lazy:{initialImageLoaded:!1,load:q.load.bind(this),loadInSlide:q.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){this.params.lazy.enabled&&(this.params.lazy.loadOnTransitionStart||!this.params.lazy.loadOnTransitionStart&&!this.lazy.initialImageLoaded)&&this.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){l.extend(this,{controller:{control:this.params.controller.control,getInterpolateFunction:K.getInterpolateFunction.bind(this),setTranslate:K.setTranslate.bind(this),setTransition:K.setTransition.bind(this)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!1,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var e=this;l.extend(e,{a11y:{liveRegion:t('<span class="'+e.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(U).forEach(function(t){e.a11y[t]=U[t].bind(e)})},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){l.extend(this,{history:{init:_.init.bind(this),setHistory:_.setHistory.bind(this),setHistoryPopState:_.setHistoryPopState.bind(this),scrollToSlide:_.scrollToSlide.bind(this),destroy:_.destroy.bind(this)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){l.extend(this,{hashNavigation:{initialized:!1,init:Z.init.bind(this),destroy:Z.destroy.bind(this),setHash:Z.setHash.bind(this),onHashCange:Z.onHashCange.bind(this)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){l.extend(this,{autoplay:{running:!1,paused:!1,run:Q.run.bind(this),start:Q.start.bind(this),stop:Q.stop.bind(this),pause:Q.pause.bind(this)}})},on:{init:function(){this.params.autoplay.enabled&&this.autoplay.start()},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},destroy:function(){this.autoplay.running&&this.autoplay.stop()}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){l.extend(this,{fadeEffect:{setTranslate:J.setTranslate.bind(this),setTransition:J.setTransition.bind(this)}})},on:{beforeInit:function(){if("fade"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};l.extend(this.params,e),l.extend(this.originalParams,e)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){l.extend(this,{cubeEffect:{setTranslate:ee.setTranslate.bind(this),setTransition:ee.setTransition.bind(this)}})},on:{beforeInit:function(){if("cube"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"cube"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};l.extend(this.params,e),l.extend(this.originalParams,e)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){l.extend(this,{flipEffect:{setTranslate:te.setTranslate.bind(this),setTransition:te.setTransition.bind(this)}})},on:{beforeInit:function(){if("flip"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"flip"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};l.extend(this.params,e),l.extend(this.originalParams,e)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){l.extend(this,{coverflowEffect:{setTranslate:ie.setTranslate.bind(this),setTransition:ie.setTransition.bind(this)}})},on:{beforeInit:function(){"coverflow"===this.params.effect&&(this.classNames.push(this.params.containerModifierClass+"coverflow"),this.classNames.push(this.params.containerModifierClass+"3d"),this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}}];return void 0===k.use&&(k.use=k.Class.use,k.installModule=k.Class.installModule),k.use(se),k});
//# sourceMappingURL=swiper.min.js.map

/*!
  * Bootstrap v4.0.0 (https://getbootstrap.com)
  * Copyright 2011-2018 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e(t.bootstrap={},t.jQuery,t.Popper)}(this,function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var o,a,l,h,c,u,f,d,_,g,p,m,v,E,T,y,C,I,A,b,D,S,w,N,O,k,P=function(t){var e=!1;function n(e){var n=this,s=!1;return t(this).one(i.TRANSITION_END,function(){s=!0}),setTimeout(function(){s||i.triggerTransitionEnd(n)},e),this}var i={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(e){var n,i=e.getAttribute("data-target");i&&"#"!==i||(i=e.getAttribute("href")||""),"#"===i.charAt(0)&&(n=i,i=n="function"==typeof t.escapeSelector?t.escapeSelector(n).substr(1):n.replace(/(:|\.|\[|\]|,|=|@)/g,"\\$1"));try{return t(document).find(i).length>0?i:null}catch(t){return null}},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(n){t(n).trigger(e.end)},supportsTransitionEnd:function(){return Boolean(e)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){var r=n[s],o=e[s],a=o&&i.isElement(o)?"element":(l=o,{}.toString.call(l).match(/\s([a-zA-Z]+)/)[1].toLowerCase());if(!new RegExp(r).test(a))throw new Error(t.toUpperCase()+': Option "'+s+'" provided type "'+a+'" but expected type "'+r+'".')}var l}};return e=("undefined"==typeof window||!window.QUnit)&&{end:"transitionend"},t.fn.emulateTransitionEnd=n,i.supportsTransitionEnd()&&(t.event.special[i.TRANSITION_END]={bindType:e.end,delegateType:e.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}),i}(e),L=(a="alert",h="."+(l="bs.alert"),c=(o=e).fn[a],u={CLOSE:"close"+h,CLOSED:"closed"+h,CLICK_DATA_API:"click"+h+".data-api"},f="alert",d="fade",_="show",g=function(){function t(t){this._element=t}var e=t.prototype;return e.close=function(t){t=t||this._element;var e=this._getRootElement(t);this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},e.dispose=function(){o.removeData(this._element,l),this._element=null},e._getRootElement=function(t){var e=P.getSelectorFromElement(t),n=!1;return e&&(n=o(e)[0]),n||(n=o(t).closest("."+f)[0]),n},e._triggerCloseEvent=function(t){var e=o.Event(u.CLOSE);return o(t).trigger(e),e},e._removeElement=function(t){var e=this;o(t).removeClass(_),P.supportsTransitionEnd()&&o(t).hasClass(d)?o(t).one(P.TRANSITION_END,function(n){return e._destroyElement(t,n)}).emulateTransitionEnd(150):this._destroyElement(t)},e._destroyElement=function(t){o(t).detach().trigger(u.CLOSED).remove()},t._jQueryInterface=function(e){return this.each(function(){var n=o(this),i=n.data(l);i||(i=new t(this),n.data(l,i)),"close"===e&&i[e](this)})},t._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},s(t,null,[{key:"VERSION",get:function(){return"4.0.0"}}]),t}(),o(document).on(u.CLICK_DATA_API,'[data-dismiss="alert"]',g._handleDismiss(new g)),o.fn[a]=g._jQueryInterface,o.fn[a].Constructor=g,o.fn[a].noConflict=function(){return o.fn[a]=c,g._jQueryInterface},g),R=(m="button",E="."+(v="bs.button"),T=".data-api",y=(p=e).fn[m],C="active",I="btn",A="focus",b='[data-toggle^="button"]',D='[data-toggle="buttons"]',S="input",w=".active",N=".btn",O={CLICK_DATA_API:"click"+E+T,FOCUS_BLUR_DATA_API:"focus"+E+T+" blur"+E+T},k=function(){function t(t){this._element=t}var e=t.prototype;return e.toggle=function(){var t=!0,e=!0,n=p(this._element).closest(D)[0];if(n){var i=p(this._element).find(S)[0];if(i){if("radio"===i.type)if(i.checked&&p(this._element).hasClass(C))t=!1;else{var s=p(n).find(w)[0];s&&p(s).removeClass(C)}if(t){if(i.hasAttribute("disabled")||n.hasAttribute("disabled")||i.classList.contains("disabled")||n.classList.contains("disabled"))return;i.checked=!p(this._element).hasClass(C),p(i).trigger("change")}i.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!p(this._element).hasClass(C)),t&&p(this._element).toggleClass(C)},e.dispose=function(){p.removeData(this._element,v),this._element=null},t._jQueryInterface=function(e){return this.each(function(){var n=p(this).data(v);n||(n=new t(this),p(this).data(v,n)),"toggle"===e&&n[e]()})},s(t,null,[{key:"VERSION",get:function(){return"4.0.0"}}]),t}(),p(document).on(O.CLICK_DATA_API,b,function(t){t.preventDefault();var e=t.target;p(e).hasClass(I)||(e=p(e).closest(N)),k._jQueryInterface.call(p(e),"toggle")}).on(O.FOCUS_BLUR_DATA_API,b,function(t){var e=p(t.target).closest(N)[0];p(e).toggleClass(A,/^focus(in)?$/.test(t.type))}),p.fn[m]=k._jQueryInterface,p.fn[m].Constructor=k,p.fn[m].noConflict=function(){return p.fn[m]=y,k._jQueryInterface},k),j=function(t){var e="carousel",n="bs.carousel",i="."+n,o=t.fn[e],a={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},l={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},h="next",c="prev",u="left",f="right",d={SLIDE:"slide"+i,SLID:"slid"+i,KEYDOWN:"keydown"+i,MOUSEENTER:"mouseenter"+i,MOUSELEAVE:"mouseleave"+i,TOUCHEND:"touchend"+i,LOAD_DATA_API:"load"+i+".data-api",CLICK_DATA_API:"click"+i+".data-api"},_="carousel",g="active",p="slide",m="carousel-item-right",v="carousel-item-left",E="carousel-item-next",T="carousel-item-prev",y={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},C=function(){function o(e,n){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(n),this._element=t(e)[0],this._indicatorsElement=t(this._element).find(y.INDICATORS)[0],this._addEventListeners()}var C=o.prototype;return C.next=function(){this._isSliding||this._slide(h)},C.nextWhenVisible=function(){!document.hidden&&t(this._element).is(":visible")&&"hidden"!==t(this._element).css("visibility")&&this.next()},C.prev=function(){this._isSliding||this._slide(c)},C.pause=function(e){e||(this._isPaused=!0),t(this._element).find(y.NEXT_PREV)[0]&&P.supportsTransitionEnd()&&(P.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},C.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},C.to=function(e){var n=this;this._activeElement=t(this._element).find(y.ACTIVE_ITEM)[0];var i=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)t(this._element).one(d.SLID,function(){return n.to(e)});else{if(i===e)return this.pause(),void this.cycle();var s=e>i?h:c;this._slide(s,this._items[e])}},C.dispose=function(){t(this._element).off(i),t.removeData(this._element,n),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},C._getConfig=function(t){return t=r({},a,t),P.typeCheckConfig(e,t,l),t},C._addEventListeners=function(){var e=this;this._config.keyboard&&t(this._element).on(d.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&(t(this._element).on(d.MOUSEENTER,function(t){return e.pause(t)}).on(d.MOUSELEAVE,function(t){return e.cycle(t)}),"ontouchstart"in document.documentElement&&t(this._element).on(d.TOUCHEND,function(){e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},500+e._config.interval)}))},C._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},C._getItemIndex=function(e){return this._items=t.makeArray(t(e).parent().find(y.ITEM)),this._items.indexOf(e)},C._getItemByDirection=function(t,e){var n=t===h,i=t===c,s=this._getItemIndex(e),r=this._items.length-1;if((i&&0===s||n&&s===r)&&!this._config.wrap)return e;var o=(s+(t===c?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},C._triggerSlideEvent=function(e,n){var i=this._getItemIndex(e),s=this._getItemIndex(t(this._element).find(y.ACTIVE_ITEM)[0]),r=t.Event(d.SLIDE,{relatedTarget:e,direction:n,from:s,to:i});return t(this._element).trigger(r),r},C._setActiveIndicatorElement=function(e){if(this._indicatorsElement){t(this._indicatorsElement).find(y.ACTIVE).removeClass(g);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&t(n).addClass(g)}},C._slide=function(e,n){var i,s,r,o=this,a=t(this._element).find(y.ACTIVE_ITEM)[0],l=this._getItemIndex(a),c=n||a&&this._getItemByDirection(e,a),_=this._getItemIndex(c),C=Boolean(this._interval);if(e===h?(i=v,s=E,r=u):(i=m,s=T,r=f),c&&t(c).hasClass(g))this._isSliding=!1;else if(!this._triggerSlideEvent(c,r).isDefaultPrevented()&&a&&c){this._isSliding=!0,C&&this.pause(),this._setActiveIndicatorElement(c);var I=t.Event(d.SLID,{relatedTarget:c,direction:r,from:l,to:_});P.supportsTransitionEnd()&&t(this._element).hasClass(p)?(t(c).addClass(s),P.reflow(c),t(a).addClass(i),t(c).addClass(i),t(a).one(P.TRANSITION_END,function(){t(c).removeClass(i+" "+s).addClass(g),t(a).removeClass(g+" "+s+" "+i),o._isSliding=!1,setTimeout(function(){return t(o._element).trigger(I)},0)}).emulateTransitionEnd(600)):(t(a).removeClass(g),t(c).addClass(g),this._isSliding=!1,t(this._element).trigger(I)),C&&this.cycle()}},o._jQueryInterface=function(e){return this.each(function(){var i=t(this).data(n),s=r({},a,t(this).data());"object"==typeof e&&(s=r({},s,e));var l="string"==typeof e?e:s.slide;if(i||(i=new o(this,s),t(this).data(n,i)),"number"==typeof e)i.to(e);else if("string"==typeof l){if("undefined"==typeof i[l])throw new TypeError('No method named "'+l+'"');i[l]()}else s.interval&&(i.pause(),i.cycle())})},o._dataApiClickHandler=function(e){var i=P.getSelectorFromElement(this);if(i){var s=t(i)[0];if(s&&t(s).hasClass(_)){var a=r({},t(s).data(),t(this).data()),l=this.getAttribute("data-slide-to");l&&(a.interval=!1),o._jQueryInterface.call(t(s),a),l&&t(s).data(n).to(l),e.preventDefault()}}},s(o,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return a}}]),o}();return t(document).on(d.CLICK_DATA_API,y.DATA_SLIDE,C._dataApiClickHandler),t(window).on(d.LOAD_DATA_API,function(){t(y.DATA_RIDE).each(function(){var e=t(this);C._jQueryInterface.call(e,e.data())})}),t.fn[e]=C._jQueryInterface,t.fn[e].Constructor=C,t.fn[e].noConflict=function(){return t.fn[e]=o,C._jQueryInterface},C}(e),H=function(t){var e="collapse",n="bs.collapse",i="."+n,o=t.fn[e],a={toggle:!0,parent:""},l={toggle:"boolean",parent:"(string|element)"},h={SHOW:"show"+i,SHOWN:"shown"+i,HIDE:"hide"+i,HIDDEN:"hidden"+i,CLICK_DATA_API:"click"+i+".data-api"},c="show",u="collapse",f="collapsing",d="collapsed",_="width",g="height",p={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},m=function(){function i(e,n){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(n),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var i=t(p.DATA_TOGGLE),s=0;s<i.length;s++){var r=i[s],o=P.getSelectorFromElement(r);null!==o&&t(o).filter(e).length>0&&(this._selector=o,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var o=i.prototype;return o.toggle=function(){t(this._element).hasClass(c)?this.hide():this.show()},o.show=function(){var e,s,r=this;if(!this._isTransitioning&&!t(this._element).hasClass(c)&&(this._parent&&0===(e=t.makeArray(t(this._parent).find(p.ACTIVES).filter('[data-parent="'+this._config.parent+'"]'))).length&&(e=null),!(e&&(s=t(e).not(this._selector).data(n))&&s._isTransitioning))){var o=t.Event(h.SHOW);if(t(this._element).trigger(o),!o.isDefaultPrevented()){e&&(i._jQueryInterface.call(t(e).not(this._selector),"hide"),s||t(e).data(n,null));var a=this._getDimension();t(this._element).removeClass(u).addClass(f),this._element.style[a]=0,this._triggerArray.length>0&&t(this._triggerArray).removeClass(d).attr("aria-expanded",!0),this.setTransitioning(!0);var l=function(){t(r._element).removeClass(f).addClass(u).addClass(c),r._element.style[a]="",r.setTransitioning(!1),t(r._element).trigger(h.SHOWN)};if(P.supportsTransitionEnd()){var _="scroll"+(a[0].toUpperCase()+a.slice(1));t(this._element).one(P.TRANSITION_END,l).emulateTransitionEnd(600),this._element.style[a]=this._element[_]+"px"}else l()}}},o.hide=function(){var e=this;if(!this._isTransitioning&&t(this._element).hasClass(c)){var n=t.Event(h.HIDE);if(t(this._element).trigger(n),!n.isDefaultPrevented()){var i=this._getDimension();if(this._element.style[i]=this._element.getBoundingClientRect()[i]+"px",P.reflow(this._element),t(this._element).addClass(f).removeClass(u).removeClass(c),this._triggerArray.length>0)for(var s=0;s<this._triggerArray.length;s++){var r=this._triggerArray[s],o=P.getSelectorFromElement(r);if(null!==o)t(o).hasClass(c)||t(r).addClass(d).attr("aria-expanded",!1)}this.setTransitioning(!0);var a=function(){e.setTransitioning(!1),t(e._element).removeClass(f).addClass(u).trigger(h.HIDDEN)};this._element.style[i]="",P.supportsTransitionEnd()?t(this._element).one(P.TRANSITION_END,a).emulateTransitionEnd(600):a()}}},o.setTransitioning=function(t){this._isTransitioning=t},o.dispose=function(){t.removeData(this._element,n),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},o._getConfig=function(t){return(t=r({},a,t)).toggle=Boolean(t.toggle),P.typeCheckConfig(e,t,l),t},o._getDimension=function(){return t(this._element).hasClass(_)?_:g},o._getParent=function(){var e=this,n=null;P.isElement(this._config.parent)?(n=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(n=this._config.parent[0])):n=t(this._config.parent)[0];var s='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(n).find(s).each(function(t,n){e._addAriaAndCollapsedClass(i._getTargetFromElement(n),[n])}),n},o._addAriaAndCollapsedClass=function(e,n){if(e){var i=t(e).hasClass(c);n.length>0&&t(n).toggleClass(d,!i).attr("aria-expanded",i)}},i._getTargetFromElement=function(e){var n=P.getSelectorFromElement(e);return n?t(n)[0]:null},i._jQueryInterface=function(e){return this.each(function(){var s=t(this),o=s.data(n),l=r({},a,s.data(),"object"==typeof e&&e);if(!o&&l.toggle&&/show|hide/.test(e)&&(l.toggle=!1),o||(o=new i(this,l),s.data(n,o)),"string"==typeof e){if("undefined"==typeof o[e])throw new TypeError('No method named "'+e+'"');o[e]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return a}}]),i}();return t(document).on(h.CLICK_DATA_API,p.DATA_TOGGLE,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var i=t(this),s=P.getSelectorFromElement(this);t(s).each(function(){var e=t(this),s=e.data(n)?"toggle":i.data();m._jQueryInterface.call(e,s)})}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=o,m._jQueryInterface},m}(e),W=function(t){var e="dropdown",i="bs.dropdown",o="."+i,a=".data-api",l=t.fn[e],h=new RegExp("38|40|27"),c={HIDE:"hide"+o,HIDDEN:"hidden"+o,SHOW:"show"+o,SHOWN:"shown"+o,CLICK:"click"+o,CLICK_DATA_API:"click"+o+a,KEYDOWN_DATA_API:"keydown"+o+a,KEYUP_DATA_API:"keyup"+o+a},u="disabled",f="show",d="dropup",_="dropright",g="dropleft",p="dropdown-menu-right",m="dropdown-menu-left",v="position-static",E='[data-toggle="dropdown"]',T=".dropdown form",y=".dropdown-menu",C=".navbar-nav",I=".dropdown-menu .dropdown-item:not(.disabled)",A="top-start",b="top-end",D="bottom-start",S="bottom-end",w="right-start",N="left-start",O={offset:0,flip:!0,boundary:"scrollParent"},k={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)"},L=function(){function a(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var l=a.prototype;return l.toggle=function(){if(!this._element.disabled&&!t(this._element).hasClass(u)){var e=a._getParentFromElement(this._element),i=t(this._menu).hasClass(f);if(a._clearMenus(),!i){var s={relatedTarget:this._element},r=t.Event(c.SHOW,s);if(t(e).trigger(r),!r.isDefaultPrevented()){if(!this._inNavbar){if("undefined"==typeof n)throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)");var o=this._element;t(e).hasClass(d)&&(t(this._menu).hasClass(m)||t(this._menu).hasClass(p))&&(o=e),"scrollParent"!==this._config.boundary&&t(e).addClass(v),this._popper=new n(o,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===t(e).closest(C).length&&t("body").children().on("mouseover",null,t.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),t(this._menu).toggleClass(f),t(e).toggleClass(f).trigger(t.Event(c.SHOWN,s))}}}},l.dispose=function(){t.removeData(this._element,i),t(this._element).off(o),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},l.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},l._addEventListeners=function(){var e=this;t(this._element).on(c.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},l._getConfig=function(n){return n=r({},this.constructor.Default,t(this._element).data(),n),P.typeCheckConfig(e,n,this.constructor.DefaultType),n},l._getMenuElement=function(){if(!this._menu){var e=a._getParentFromElement(this._element);this._menu=t(e).find(y)[0]}return this._menu},l._getPlacement=function(){var e=t(this._element).parent(),n=D;return e.hasClass(d)?(n=A,t(this._menu).hasClass(p)&&(n=b)):e.hasClass(_)?n=w:e.hasClass(g)?n=N:t(this._menu).hasClass(p)&&(n=S),n},l._detectNavbar=function(){return t(this._element).closest(".navbar").length>0},l._getPopperConfig=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=r({},e.offsets,t._config.offset(e.offsets)||{}),e}:e.offset=this._config.offset,{placement:this._getPlacement(),modifiers:{offset:e,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}}},a._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(i);if(n||(n=new a(this,"object"==typeof e?e:null),t(this).data(i,n)),"string"==typeof e){if("undefined"==typeof n[e])throw new TypeError('No method named "'+e+'"');n[e]()}})},a._clearMenus=function(e){if(!e||3!==e.which&&("keyup"!==e.type||9===e.which))for(var n=t.makeArray(t(E)),s=0;s<n.length;s++){var r=a._getParentFromElement(n[s]),o=t(n[s]).data(i),l={relatedTarget:n[s]};if(o){var h=o._menu;if(t(r).hasClass(f)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&9===e.which)&&t.contains(r,e.target))){var u=t.Event(c.HIDE,l);t(r).trigger(u),u.isDefaultPrevented()||("ontouchstart"in document.documentElement&&t("body").children().off("mouseover",null,t.noop),n[s].setAttribute("aria-expanded","false"),t(h).removeClass(f),t(r).removeClass(f).trigger(t.Event(c.HIDDEN,l)))}}}},a._getParentFromElement=function(e){var n,i=P.getSelectorFromElement(e);return i&&(n=t(i)[0]),n||e.parentNode},a._dataApiKeydownHandler=function(e){if((/input|textarea/i.test(e.target.tagName)?!(32===e.which||27!==e.which&&(40!==e.which&&38!==e.which||t(e.target).closest(y).length)):h.test(e.which))&&(e.preventDefault(),e.stopPropagation(),!this.disabled&&!t(this).hasClass(u))){var n=a._getParentFromElement(this),i=t(n).hasClass(f);if((i||27===e.which&&32===e.which)&&(!i||27!==e.which&&32!==e.which)){var s=t(n).find(I).get();if(0!==s.length){var r=s.indexOf(e.target);38===e.which&&r>0&&r--,40===e.which&&r<s.length-1&&r++,r<0&&(r=0),s[r].focus()}}else{if(27===e.which){var o=t(n).find(E)[0];t(o).trigger("focus")}t(this).trigger("click")}}},s(a,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return O}},{key:"DefaultType",get:function(){return k}}]),a}();return t(document).on(c.KEYDOWN_DATA_API,E,L._dataApiKeydownHandler).on(c.KEYDOWN_DATA_API,y,L._dataApiKeydownHandler).on(c.CLICK_DATA_API+" "+c.KEYUP_DATA_API,L._clearMenus).on(c.CLICK_DATA_API,E,function(e){e.preventDefault(),e.stopPropagation(),L._jQueryInterface.call(t(this),"toggle")}).on(c.CLICK_DATA_API,T,function(t){t.stopPropagation()}),t.fn[e]=L._jQueryInterface,t.fn[e].Constructor=L,t.fn[e].noConflict=function(){return t.fn[e]=l,L._jQueryInterface},L}(e),M=function(t){var e="modal",n="bs.modal",i="."+n,o=t.fn.modal,a={backdrop:!0,keyboard:!0,focus:!0,show:!0},l={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},h={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,FOCUSIN:"focusin"+i,RESIZE:"resize"+i,CLICK_DISMISS:"click.dismiss"+i,KEYDOWN_DISMISS:"keydown.dismiss"+i,MOUSEUP_DISMISS:"mouseup.dismiss"+i,MOUSEDOWN_DISMISS:"mousedown.dismiss"+i,CLICK_DATA_API:"click"+i+".data-api"},c="modal-scrollbar-measure",u="modal-backdrop",f="modal-open",d="fade",_="show",g={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"},p=function(){function o(e,n){this._config=this._getConfig(n),this._element=e,this._dialog=t(e).find(g.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}var p=o.prototype;return p.toggle=function(t){return this._isShown?this.hide():this.show(t)},p.show=function(e){var n=this;if(!this._isTransitioning&&!this._isShown){P.supportsTransitionEnd()&&t(this._element).hasClass(d)&&(this._isTransitioning=!0);var i=t.Event(h.SHOW,{relatedTarget:e});t(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),t(document.body).addClass(f),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(h.CLICK_DISMISS,g.DATA_DISMISS,function(t){return n.hide(t)}),t(this._dialog).on(h.MOUSEDOWN_DISMISS,function(){t(n._element).one(h.MOUSEUP_DISMISS,function(e){t(e.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(e)}))}},p.hide=function(e){var n=this;if(e&&e.preventDefault(),!this._isTransitioning&&this._isShown){var i=t.Event(h.HIDE);if(t(this._element).trigger(i),this._isShown&&!i.isDefaultPrevented()){this._isShown=!1;var s=P.supportsTransitionEnd()&&t(this._element).hasClass(d);s&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),t(document).off(h.FOCUSIN),t(this._element).removeClass(_),t(this._element).off(h.CLICK_DISMISS),t(this._dialog).off(h.MOUSEDOWN_DISMISS),s?t(this._element).one(P.TRANSITION_END,function(t){return n._hideModal(t)}).emulateTransitionEnd(300):this._hideModal()}}},p.dispose=function(){t.removeData(this._element,n),t(window,document,this._element,this._backdrop).off(i),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},p.handleUpdate=function(){this._adjustDialog()},p._getConfig=function(t){return t=r({},a,t),P.typeCheckConfig(e,t,l),t},p._showElement=function(e){var n=this,i=P.supportsTransitionEnd()&&t(this._element).hasClass(d);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&P.reflow(this._element),t(this._element).addClass(_),this._config.focus&&this._enforceFocus();var s=t.Event(h.SHOWN,{relatedTarget:e}),r=function(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,t(n._element).trigger(s)};i?t(this._dialog).one(P.TRANSITION_END,r).emulateTransitionEnd(300):r()},p._enforceFocus=function(){var e=this;t(document).off(h.FOCUSIN).on(h.FOCUSIN,function(n){document!==n.target&&e._element!==n.target&&0===t(e._element).has(n.target).length&&e._element.focus()})},p._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(h.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):this._isShown||t(this._element).off(h.KEYDOWN_DISMISS)},p._setResizeEvent=function(){var e=this;this._isShown?t(window).on(h.RESIZE,function(t){return e.handleUpdate(t)}):t(window).off(h.RESIZE)},p._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){t(document.body).removeClass(f),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(h.HIDDEN)})},p._removeBackdrop=function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},p._showBackdrop=function(e){var n=this,i=t(this._element).hasClass(d)?d:"";if(this._isShown&&this._config.backdrop){var s=P.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=u,i&&t(this._backdrop).addClass(i),t(this._backdrop).appendTo(document.body),t(this._element).on(h.CLICK_DISMISS,function(t){n._ignoreBackdropClick?n._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide())}),s&&P.reflow(this._backdrop),t(this._backdrop).addClass(_),!e)return;if(!s)return void e();t(this._backdrop).one(P.TRANSITION_END,e).emulateTransitionEnd(150)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(_);var r=function(){n._removeBackdrop(),e&&e()};P.supportsTransitionEnd()&&t(this._element).hasClass(d)?t(this._backdrop).one(P.TRANSITION_END,r).emulateTransitionEnd(150):r()}else e&&e()},p._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},p._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},p._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},p._setScrollbar=function(){var e=this;if(this._isBodyOverflowing){t(g.FIXED_CONTENT).each(function(n,i){var s=t(i)[0].style.paddingRight,r=t(i).css("padding-right");t(i).data("padding-right",s).css("padding-right",parseFloat(r)+e._scrollbarWidth+"px")}),t(g.STICKY_CONTENT).each(function(n,i){var s=t(i)[0].style.marginRight,r=t(i).css("margin-right");t(i).data("margin-right",s).css("margin-right",parseFloat(r)-e._scrollbarWidth+"px")}),t(g.NAVBAR_TOGGLER).each(function(n,i){var s=t(i)[0].style.marginRight,r=t(i).css("margin-right");t(i).data("margin-right",s).css("margin-right",parseFloat(r)+e._scrollbarWidth+"px")});var n=document.body.style.paddingRight,i=t("body").css("padding-right");t("body").data("padding-right",n).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}},p._resetScrollbar=function(){t(g.FIXED_CONTENT).each(function(e,n){var i=t(n).data("padding-right");"undefined"!=typeof i&&t(n).css("padding-right",i).removeData("padding-right")}),t(g.STICKY_CONTENT+", "+g.NAVBAR_TOGGLER).each(function(e,n){var i=t(n).data("margin-right");"undefined"!=typeof i&&t(n).css("margin-right",i).removeData("margin-right")});var e=t("body").data("padding-right");"undefined"!=typeof e&&t("body").css("padding-right",e).removeData("padding-right")},p._getScrollbarWidth=function(){var t=document.createElement("div");t.className=c,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},o._jQueryInterface=function(e,i){return this.each(function(){var s=t(this).data(n),a=r({},o.Default,t(this).data(),"object"==typeof e&&e);if(s||(s=new o(this,a),t(this).data(n,s)),"string"==typeof e){if("undefined"==typeof s[e])throw new TypeError('No method named "'+e+'"');s[e](i)}else a.show&&s.show(i)})},s(o,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return a}}]),o}();return t(document).on(h.CLICK_DATA_API,g.DATA_TOGGLE,function(e){var i,s=this,o=P.getSelectorFromElement(this);o&&(i=t(o)[0]);var a=t(i).data(n)?"toggle":r({},t(i).data(),t(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var l=t(i).one(h.SHOW,function(e){e.isDefaultPrevented()||l.one(h.HIDDEN,function(){t(s).is(":visible")&&s.focus()})});p._jQueryInterface.call(t(i),a,this)}),t.fn.modal=p._jQueryInterface,t.fn.modal.Constructor=p,t.fn.modal.noConflict=function(){return t.fn.modal=o,p._jQueryInterface},p}(e),U=function(t){var e="tooltip",i="bs.tooltip",o="."+i,a=t.fn[e],l=new RegExp("(^|\\s)bs-tooltip\\S+","g"),h={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"},c={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},u={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},f="show",d="out",_={HIDE:"hide"+o,HIDDEN:"hidden"+o,SHOW:"show"+o,SHOWN:"shown"+o,INSERTED:"inserted"+o,CLICK:"click"+o,FOCUSIN:"focusin"+o,FOCUSOUT:"focusout"+o,MOUSEENTER:"mouseenter"+o,MOUSELEAVE:"mouseleave"+o},g="fade",p="show",m=".tooltip-inner",v=".arrow",E="hover",T="focus",y="click",C="manual",I=function(){function a(t,e){if("undefined"==typeof n)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var I=a.prototype;return I.enable=function(){this._isEnabled=!0},I.disable=function(){this._isEnabled=!1},I.toggleEnabled=function(){this._isEnabled=!this._isEnabled},I.toggle=function(e){if(this._isEnabled)if(e){var n=this.constructor.DATA_KEY,i=t(e.currentTarget).data(n);i||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(t(this.getTipElement()).hasClass(p))return void this._leave(null,this);this._enter(null,this)}},I.dispose=function(){clearTimeout(this._timeout),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},I.show=function(){var e=this;if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");var i=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){t(this.element).trigger(i);var s=t.contains(this.element.ownerDocument.documentElement,this.element);if(i.isDefaultPrevented()||!s)return;var r=this.getTipElement(),o=P.getUID(this.constructor.NAME);r.setAttribute("id",o),this.element.setAttribute("aria-describedby",o),this.setContent(),this.config.animation&&t(r).addClass(g);var l="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,h=this._getAttachment(l);this.addAttachmentClass(h);var c=!1===this.config.container?document.body:t(this.config.container);t(r).data(this.constructor.DATA_KEY,this),t.contains(this.element.ownerDocument.documentElement,this.tip)||t(r).appendTo(c),t(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new n(this.element,r,{placement:h,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:v},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){e._handlePopperPlacementChange(t)}}),t(r).addClass(p),"ontouchstart"in document.documentElement&&t("body").children().on("mouseover",null,t.noop);var u=function(){e.config.animation&&e._fixTransition();var n=e._hoverState;e._hoverState=null,t(e.element).trigger(e.constructor.Event.SHOWN),n===d&&e._leave(null,e)};P.supportsTransitionEnd()&&t(this.tip).hasClass(g)?t(this.tip).one(P.TRANSITION_END,u).emulateTransitionEnd(a._TRANSITION_DURATION):u()}},I.hide=function(e){var n=this,i=this.getTipElement(),s=t.Event(this.constructor.Event.HIDE),r=function(){n._hoverState!==f&&i.parentNode&&i.parentNode.removeChild(i),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),t(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),e&&e()};t(this.element).trigger(s),s.isDefaultPrevented()||(t(i).removeClass(p),"ontouchstart"in document.documentElement&&t("body").children().off("mouseover",null,t.noop),this._activeTrigger[y]=!1,this._activeTrigger[T]=!1,this._activeTrigger[E]=!1,P.supportsTransitionEnd()&&t(this.tip).hasClass(g)?t(i).one(P.TRANSITION_END,r).emulateTransitionEnd(150):r(),this._hoverState="")},I.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},I.isWithContent=function(){return Boolean(this.getTitle())},I.addAttachmentClass=function(e){t(this.getTipElement()).addClass("bs-tooltip-"+e)},I.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0],this.tip},I.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(m),this.getTitle()),e.removeClass(g+" "+p)},I.setElementContent=function(e,n){var i=this.config.html;"object"==typeof n&&(n.nodeType||n.jquery)?i?t(n).parent().is(e)||e.empty().append(n):e.text(t(n).text()):e[i?"html":"text"](n)},I.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},I._getAttachment=function(t){return c[t.toUpperCase()]},I._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach(function(n){if("click"===n)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)});else if(n!==C){var i=n===E?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,s=n===E?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(i,e.config.selector,function(t){return e._enter(t)}).on(s,e.config.selector,function(t){return e._leave(t)})}t(e.element).closest(".modal").on("hide.bs.modal",function(){return e.hide()})}),this.config.selector?this.config=r({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},I._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},I._enter=function(e,n){var i=this.constructor.DATA_KEY;(n=n||t(e.currentTarget).data(i))||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusin"===e.type?T:E]=!0),t(n.getTipElement()).hasClass(p)||n._hoverState===f?n._hoverState=f:(clearTimeout(n._timeout),n._hoverState=f,n.config.delay&&n.config.delay.show?n._timeout=setTimeout(function(){n._hoverState===f&&n.show()},n.config.delay.show):n.show())},I._leave=function(e,n){var i=this.constructor.DATA_KEY;(n=n||t(e.currentTarget).data(i))||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusout"===e.type?T:E]=!1),n._isWithActiveTrigger()||(clearTimeout(n._timeout),n._hoverState=d,n.config.delay&&n.config.delay.hide?n._timeout=setTimeout(function(){n._hoverState===d&&n.hide()},n.config.delay.hide):n.hide())},I._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},I._getConfig=function(n){return"number"==typeof(n=r({},this.constructor.Default,t(this.element).data(),n)).delay&&(n.delay={show:n.delay,hide:n.delay}),"number"==typeof n.title&&(n.title=n.title.toString()),"number"==typeof n.content&&(n.content=n.content.toString()),P.typeCheckConfig(e,n,this.constructor.DefaultType),n},I._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},I._cleanTipClass=function(){var e=t(this.getTipElement()),n=e.attr("class").match(l);null!==n&&n.length>0&&e.removeClass(n.join(""))},I._handlePopperPlacementChange=function(t){this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},I._fixTransition=function(){var e=this.getTipElement(),n=this.config.animation;null===e.getAttribute("x-placement")&&(t(e).removeClass(g),this.config.animation=!1,this.hide(),this.show(),this.config.animation=n)},a._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(i),s="object"==typeof e&&e;if((n||!/dispose|hide/.test(e))&&(n||(n=new a(this,s),t(this).data(i,n)),"string"==typeof e)){if("undefined"==typeof n[e])throw new TypeError('No method named "'+e+'"');n[e]()}})},s(a,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return u}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return i}},{key:"Event",get:function(){return _}},{key:"EVENT_KEY",get:function(){return o}},{key:"DefaultType",get:function(){return h}}]),a}();return t.fn[e]=I._jQueryInterface,t.fn[e].Constructor=I,t.fn[e].noConflict=function(){return t.fn[e]=a,I._jQueryInterface},I}(e),x=function(t){var e="popover",n="bs.popover",i="."+n,o=t.fn[e],a=new RegExp("(^|\\s)bs-popover\\S+","g"),l=r({},U.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),h=r({},U.DefaultType,{content:"(string|element|function)"}),c="fade",u="show",f=".popover-header",d=".popover-body",_={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,INSERTED:"inserted"+i,CLICK:"click"+i,FOCUSIN:"focusin"+i,FOCUSOUT:"focusout"+i,MOUSEENTER:"mouseenter"+i,MOUSELEAVE:"mouseleave"+i},g=function(r){var o,g;function p(){return r.apply(this,arguments)||this}g=r,(o=p).prototype=Object.create(g.prototype),o.prototype.constructor=o,o.__proto__=g;var m=p.prototype;return m.isWithContent=function(){return this.getTitle()||this._getContent()},m.addAttachmentClass=function(e){t(this.getTipElement()).addClass("bs-popover-"+e)},m.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0],this.tip},m.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(f),this.getTitle());var n=this._getContent();"function"==typeof n&&(n=n.call(this.element)),this.setElementContent(e.find(d),n),e.removeClass(c+" "+u)},m._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},m._cleanTipClass=function(){var e=t(this.getTipElement()),n=e.attr("class").match(a);null!==n&&n.length>0&&e.removeClass(n.join(""))},p._jQueryInterface=function(e){return this.each(function(){var i=t(this).data(n),s="object"==typeof e?e:null;if((i||!/destroy|hide/.test(e))&&(i||(i=new p(this,s),t(this).data(n,i)),"string"==typeof e)){if("undefined"==typeof i[e])throw new TypeError('No method named "'+e+'"');i[e]()}})},s(p,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return l}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return n}},{key:"Event",get:function(){return _}},{key:"EVENT_KEY",get:function(){return i}},{key:"DefaultType",get:function(){return h}}]),p}(U);return t.fn[e]=g._jQueryInterface,t.fn[e].Constructor=g,t.fn[e].noConflict=function(){return t.fn[e]=o,g._jQueryInterface},g}(e),K=function(t){var e="scrollspy",n="bs.scrollspy",i="."+n,o=t.fn[e],a={offset:10,method:"auto",target:""},l={offset:"number",method:"string",target:"(string|element)"},h={ACTIVATE:"activate"+i,SCROLL:"scroll"+i,LOAD_DATA_API:"load"+i+".data-api"},c="dropdown-item",u="active",f={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},d="offset",_="position",g=function(){function o(e,n){var i=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(n),this._selector=this._config.target+" "+f.NAV_LINKS+","+this._config.target+" "+f.LIST_ITEMS+","+this._config.target+" "+f.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(h.SCROLL,function(t){return i._process(t)}),this.refresh(),this._process()}var g=o.prototype;return g.refresh=function(){var e=this,n=this._scrollElement===this._scrollElement.window?d:_,i="auto"===this._config.method?n:this._config.method,s=i===_?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),t.makeArray(t(this._selector)).map(function(e){var n,r=P.getSelectorFromElement(e);if(r&&(n=t(r)[0]),n){var o=n.getBoundingClientRect();if(o.width||o.height)return[t(n)[i]().top+s,r]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},g.dispose=function(){t.removeData(this._element,n),t(this._scrollElement).off(i),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},g._getConfig=function(n){if("string"!=typeof(n=r({},a,n)).target){var i=t(n.target).attr("id");i||(i=P.getUID(e),t(n.target).attr("id",i)),n.target="#"+i}return P.typeCheckConfig(e,n,l),n},g._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},g._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},g._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},g._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var s=this._offsets.length;s--;){this._activeTarget!==this._targets[s]&&t>=this._offsets[s]&&("undefined"==typeof this._offsets[s+1]||t<this._offsets[s+1])&&this._activate(this._targets[s])}}},g._activate=function(e){this._activeTarget=e,this._clear();var n=this._selector.split(",");n=n.map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var i=t(n.join(","));i.hasClass(c)?(i.closest(f.DROPDOWN).find(f.DROPDOWN_TOGGLE).addClass(u),i.addClass(u)):(i.addClass(u),i.parents(f.NAV_LIST_GROUP).prev(f.NAV_LINKS+", "+f.LIST_ITEMS).addClass(u),i.parents(f.NAV_LIST_GROUP).prev(f.NAV_ITEMS).children(f.NAV_LINKS).addClass(u)),t(this._scrollElement).trigger(h.ACTIVATE,{relatedTarget:e})},g._clear=function(){t(this._selector).filter(f.ACTIVE).removeClass(u)},o._jQueryInterface=function(e){return this.each(function(){var i=t(this).data(n);if(i||(i=new o(this,"object"==typeof e&&e),t(this).data(n,i)),"string"==typeof e){if("undefined"==typeof i[e])throw new TypeError('No method named "'+e+'"');i[e]()}})},s(o,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return a}}]),o}();return t(window).on(h.LOAD_DATA_API,function(){for(var e=t.makeArray(t(f.DATA_SPY)),n=e.length;n--;){var i=t(e[n]);g._jQueryInterface.call(i,i.data())}}),t.fn[e]=g._jQueryInterface,t.fn[e].Constructor=g,t.fn[e].noConflict=function(){return t.fn[e]=o,g._jQueryInterface},g}(e),V=function(t){var e="bs.tab",n="."+e,i=t.fn.tab,r={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,CLICK_DATA_API:"click.bs.tab.data-api"},o="dropdown-menu",a="active",l="disabled",h="fade",c="show",u=".dropdown",f=".nav, .list-group",d=".active",_="> li > .active",g='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',p=".dropdown-toggle",m="> .dropdown-menu .active",v=function(){function n(t){this._element=t}var i=n.prototype;return i.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(a)||t(this._element).hasClass(l))){var n,i,s=t(this._element).closest(f)[0],o=P.getSelectorFromElement(this._element);if(s){var h="UL"===s.nodeName?_:d;i=(i=t.makeArray(t(s).find(h)))[i.length-1]}var c=t.Event(r.HIDE,{relatedTarget:this._element}),u=t.Event(r.SHOW,{relatedTarget:i});if(i&&t(i).trigger(c),t(this._element).trigger(u),!u.isDefaultPrevented()&&!c.isDefaultPrevented()){o&&(n=t(o)[0]),this._activate(this._element,s);var g=function(){var n=t.Event(r.HIDDEN,{relatedTarget:e._element}),s=t.Event(r.SHOWN,{relatedTarget:i});t(i).trigger(n),t(e._element).trigger(s)};n?this._activate(n,n.parentNode,g):g()}}},i.dispose=function(){t.removeData(this._element,e),this._element=null},i._activate=function(e,n,i){var s=this,r=("UL"===n.nodeName?t(n).find(_):t(n).children(d))[0],o=i&&P.supportsTransitionEnd()&&r&&t(r).hasClass(h),a=function(){return s._transitionComplete(e,r,i)};r&&o?t(r).one(P.TRANSITION_END,a).emulateTransitionEnd(150):a()},i._transitionComplete=function(e,n,i){if(n){t(n).removeClass(c+" "+a);var s=t(n.parentNode).find(m)[0];s&&t(s).removeClass(a),"tab"===n.getAttribute("role")&&n.setAttribute("aria-selected",!1)}if(t(e).addClass(a),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),P.reflow(e),t(e).addClass(c),e.parentNode&&t(e.parentNode).hasClass(o)){var r=t(e).closest(u)[0];r&&t(r).find(p).addClass(a),e.setAttribute("aria-expanded",!0)}i&&i()},n._jQueryInterface=function(i){return this.each(function(){var s=t(this),r=s.data(e);if(r||(r=new n(this),s.data(e,r)),"string"==typeof i){if("undefined"==typeof r[i])throw new TypeError('No method named "'+i+'"');r[i]()}})},s(n,null,[{key:"VERSION",get:function(){return"4.0.0"}}]),n}();return t(document).on(r.CLICK_DATA_API,g,function(e){e.preventDefault(),v._jQueryInterface.call(t(this),"show")}),t.fn.tab=v._jQueryInterface,t.fn.tab.Constructor=v,t.fn.tab.noConflict=function(){return t.fn.tab=i,v._jQueryInterface},v}(e);!function(t){if("undefined"==typeof t)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1===e[0]&&9===e[1]&&e[2]<1||e[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(e),t.Util=P,t.Alert=L,t.Button=R,t.Carousel=j,t.Collapse=H,t.Dropdown=W,t.Modal=M,t.Popover=x,t.Scrollspy=K,t.Tab=V,t.Tooltip=U,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=bootstrap.min.js.map
/*
 * selection-sharer: Medium like popover menu to share on Twitter or by email any text selected on the page
 *
 * -- Requires jQuery --
 * -- AMD compatible  --
 *
 * Author: Xavier Damman (@xdamman)
 * GIT: https://github.com/xdamman/share-selection
 * MIT License
 */

(function($) {

  var SelectionSharer = function(options) {

    var self = this;

    options = options || {};
    if(typeof options == 'string')
        options = { elements: options };

    this.sel = null;
    this.textSelection='';
    this.htmlSelection='';

    this.appId = $('meta[property="fb:app_id"]').attr("content") || $('meta[property="fb:app_id"]').attr("value");
    this.url2share = $('meta[property="og:url"]').attr("content") || $('meta[property="og:url"]').attr("value") || window.location.href;

    this.getSelectionText = function(sel) {
        var html = "", text = "";
        sel = sel || window.getSelection();
        if (sel.rangeCount) {
            var container = document.createElement("div");
            for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                container.appendChild(sel.getRangeAt(i).cloneContents());
            }
            text = container.textContent;
            html = container.innerHTML;
        }
        self.textSelection = text;
        self.htmlSelection = html || text;       
        return text;
    };

    this.selectionDirection = function(selection) {
      var sel = selection || window.getSelection();
      var range = document.createRange();
      if(!sel.anchorNode) return 0;
      range.setStart(sel.anchorNode, sel.anchorOffset);
      range.setEnd(sel.focusNode, sel.focusOffset);
      var direction = (range.collapsed) ? "backward" : "forward";
      range.detach();
      return direction;
    };

    this.showPopunder = function() {
      self.popunder = self.popunder || document.getElementById('selectionSharerPopunder');

      var sel = window.getSelection();
      var selection = self.getSelectionText(sel);

      if(sel.isCollapsed || selection.length < 10 || !selection.match(/ /))
        return self.hidePopunder();

      if(self.popunder.classList.contains("fixed")) {
          self.popunder.style.bottom = 0;
          return self.popunder.style.bottom;
      }

      var range = sel.getRangeAt(0);
      var node = range.endContainer.parentNode; // The <p> where the selection ends

      // If the popunder is currently displayed
      if(self.popunder.classList.contains('show')) {
        // If the popunder is already at the right place, we do nothing
        if(Math.ceil(self.popunder.getBoundingClientRect().top) == Math.ceil(node.getBoundingClientRect().bottom))
          return;

        // Otherwise, we first hide it and the we try again
        return self.hidePopunder(self.showPopunder);
      }

      if(node.nextElementSibling) {
        // We need to push down all the following siblings
        self.pushSiblings(node);
      }
      else {
        // We need to append a new element to push all the content below
        if(!self.placeholder) {
          self.placeholder = document.createElement('div');
          self.placeholder.className = 'selectionSharerPlaceholder';
        }

        // If we add a div between two <p> that have a 1em margin, the space between them
        // will become 2x 1em. So we give the placeholder a negative margin to avoid that
        var margin = window.getComputedStyle(node).marginBottom;
        self.placeholder.style.height = margin;
        self.placeholder.style.marginBottom = (-2 * parseInt(margin,10))+'px';
        node.parentNode.insertBefore(self.placeholder);
      }

      // scroll offset
      var offsetTop = window.pageYOffset + node.getBoundingClientRect().bottom;
      self.popunder.style.top = Math.ceil(offsetTop)+'px';

      setTimeout(function() {
        if(self.placeholder) self.placeholder.classList.add('show');
        self.popunder.classList.add('show');
      },0);

    };

    this.pushSiblings = function(el) {
      while(el=el.nextElementSibling) { el.classList.add('selectionSharer'); el.classList.add('moveDown'); }
    };

    this.hidePopunder = function(cb) {
      cb = cb || function() {};

      if(self.popunder == "fixed") {
        self.popunder.style.bottom = '-50px';
        return cb();
      }

      self.popunder.classList.remove('show');
      if(self.placeholder) self.placeholder.classList.remove('show');
      // We need to push back up all the siblings
      var els = document.getElementsByClassName('moveDown');
      while(el=els[0]) {
          el.classList.remove('moveDown');
      }

      // CSS3 transition takes 0.6s
      setTimeout(function() {
        if(self.placeholder) document.body.insertBefore(self.placeholder);
        cb();
      }, 600);

    };

    this.show = function(e) {
      setTimeout(function() {
        var sel = window.getSelection();
        var selection = self.getSelectionText(sel);
        if(!sel.isCollapsed && selection && selection.length>10 && selection.match(/ /)) {
          var range = sel.getRangeAt(0);
          var topOffset = range.getBoundingClientRect().top - 5;
          var top = topOffset + self.getPosition().y - self.$popover.height();
          var left = 0;
          if(e) {
            left = e.pageX;
          }
          else {
            var obj = sel.anchorNode.parentNode;
            left += obj.offsetWidth / 2;
            do {
              left += obj.offsetLeft;
            }
            while(obj = obj.offsetParent);
          }
          switch(self.selectionDirection(sel)) {
            case 'forward':
              left -= self.$popover.width();
              break;
            case 'backward':
              left += self.$popover.width();
              break;
            default:
              return;
          }
          self.$popover.removeClass("anim").css("top", top+10).css("left", left).show();
          setTimeout(function() {
            self.$popover.addClass("anim").css("top", top);
          }, 0);
        }
      }, 10);
    };

    this.hide = function(e) {
      self.$popover.hide();
    };

    this.smart_truncate = function(str, n){
        if (!str || !str.length) return str;
        var toLong = str.length>n,
            s_ = toLong ? str.substr(0,n-1) : str;
        s_ = toLong ? s_.substr(0,s_.lastIndexOf(' ')) : s_;
        return  toLong ? s_ +'...' : s_;
    };

    this.getRelatedTwitterAccounts = function() {
      var usernames = [];

      var creator = $('meta[name="twitter:creator"]').attr("content") || $('meta[name="twitter:creator"]').attr("value");
      if(creator) usernames.push(creator);


      // We scrape the page to find a link to http(s)://twitter.com/username
      var anchors = document.getElementsByTagName('a');
      for(var i=0, len=anchors.length;i<len;i++) {
        if(anchors[i].attributes.href && typeof anchors[i].attributes.href.value == 'string') {
        
          var matches = anchors[i].attributes.href.value.match(/^https?:\/\/twitter\.com\/([a-z0-9_]{1,20})/i);
          if(matches && matches.length > 1 && ['widgets','intent'].indexOf(matches[1])==-1)
            usernames.push(matches[1]);
        }
      }

      if(usernames.length > 0)
        return usernames.join(',');
      else
        return '';
    };

    this.shareTwitter = function(e) {
      e.preventDefault();

      var text = "“"+self.smart_truncate(self.textSelection.trim(), 114)+"”";
      var url = 'http://twitter.com/intent/tweet?text='+encodeURIComponent(text)+'&related='+self.getRelatedTwitterAccounts()+'&url='+encodeURIComponent(self.url2share);

      // We only show the via @twitter:site if we have enough room
      if(self.viaTwitterAccount && text.length < (120-6-self.viaTwitterAccount.length))
        url += '&via='+self.viaTwitterAccount;

      var w = 640, h=440;
      var left = (screen.width/2)-(w/2);
      var top = (screen.height/2)-(h/2)-100;
      window.open(url, "share_twitter", 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
      self.hide();
      return false;
    };

    this.copyText = function() {
      document.execCommand("Copy");
    };

    this.shareFacebook = function(e) {
      e.preventDefault();
      var text = self.htmlSelection.replace(/<p[^>]*>/ig,'\n').replace(/<\/p>|  /ig,'').trim();

      var url = 'https://www.facebook.com/dialog/feed?' +
                'app_id='+self.appId +
                '&display=popup'+
                '&caption='+encodeURIComponent(text)+
                '&link='+encodeURIComponent(self.url2share)+
                '&href='+encodeURIComponent(self.url2share)+
                '&redirect_uri='+encodeURIComponent(self.url2share);
      var w = 640, h=440;
      var left = (screen.width/2)-(w/2);
      var top = (screen.height/2)-(h/2)-100;

      window.open(url, "share_facebook", 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
    };

    this.shareEmail = function(e) {
      var text = self.textSelection.replace(/<p[^>]*>/ig,'\n').replace(/<\/p>|  /ig,'').trim();
      var email = {};
      email.subject = encodeURIComponent("Quote from "+document.title);
      email.body = encodeURIComponent("“"+text+"”")+"%0D%0A%0D%0AFrom: "+document.title+"%0D%0A"+window.location.href;
      $(this).attr("href","mailto:?subject="+email.subject+"&body="+email.body);
      self.hide();
      return true;
    };

    this.render = function() {
      var popoverHTML =  '<div class="selectionSharer" id="selectionSharerPopover" style="position:absolute;">'
                       + '  <div id="selectionSharerPopover-inner">'
                       + '    <ul>'
                       + '      <li><a class="action copy" href="#copied" title="Copy Text">Copy</a></li>'
                       + '      <li><a class="action tweet" href="" title="Share this selection on Twitter" target="_blank">Tweet</a></li>'
                       + '      <li><a class="action facebook" href="" title="Share this selection on Facebook" target="_blank">Facebook</a></li>'
                       + '      <li><a class="action email" href="" title="Share this selection by email" target="_blank">Linkedin</a></li>'
                       + '    </ul>'
                       + '  </div>'
                       + '  <div class="selectionSharerPopover-clip"><span class="selectionSharerPopover-arrow"></span></div>'
                       + '</div>';

      var popunderHTML = '<div id="selectionSharerPopunder" class="selectionSharer">'
                       + '  <div id="selectionSharerPopunder-inner">'
                       + '    <label>Share this selection</label>'
                       + '    <ul>'
                       + '      <li><a class="action copy" href="#copied" title="Copy Text" >Copy</a></li>'
                       + '      <li><a class="action tweet" href="" title="Share this selection on Twitter" target="_blank">Tweet</a></li>'
                       + '      <li><a class="action facebook" href="" title="Share this selection on Facebook" target="_blank">Facebook</a></li>'
                       + '      <li><a class="action email" href="" title="Share this selection by email" target="_blank"></a></li>'
                       + '    </ul>'
                       + '  </div>'
                       + '</div>';
      self.$popover = $(popoverHTML);
      self.$popover.find('a.copy').click(self.copyText);
      self.$popover.find('a.tweet').click(self.shareTwitter);
      self.$popover.find('a.facebook').click(self.shareFacebook);
      self.$popover.find('a.email').click(self.shareEmail);

      $('body').append(self.$popover);

      self.$popunder = $(popunderHTML);
      self.$popover.find('a.copy').click(self.copyText);
      self.$popunder.find('a.tweet').click(self.shareTwitter);
      self.$popunder.find('a.facebook').click(self.shareFacebook);
      self.$popunder.find('a.email').click(self.shareEmail);
      $('body').append(self.$popunder);

      if (self.appId && self.url2share){
        $(".selectionSharer a.facebook").css('display','inline-block');
      }
    };

    this.setElements = function(elements) {
      if(typeof elements == 'string') elements = $(elements);
      self.$elements = elements instanceof $ ? elements : $(elements);
      self.$elements.mouseup(self.show).mousedown(self.hide).addClass("selectionShareable");

      self.$elements.bind('touchstart', function(e) {
        self.isMobile = true;
      });

      document.onselectionchange = self.selectionChanged;
    };

    this.selectionChanged = function(e) {
      if(!self.isMobile) return;

      if(self.lastSelectionChanged) {
        clearTimeout(self.lastSelectionChanged);
      }
      self.lastSelectionChanged = setTimeout(function() {
        self.showPopunder(e);
      }, 300);
    };

    this.getPosition = function() {
      var supportPageOffset = window.pageXOffset !== undefined;
      var isCSS1Compat = ((document.compatMode || "") === "CSS1Compat");

      var x = supportPageOffset ? window.pageXOffset : isCSS1Compat ? document.documentElement.scrollLeft : document.body.scrollLeft;
      var y = supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;
      return {x: x, y: y};
    };

    this.render();

    if(options.elements) {
      this.setElements(options.elements);
    }

  };

  // jQuery plugin
  // Usage: $( "p" ).selectionSharer();
  $.fn.selectionSharer = function() {
    var sharer = new SelectionSharer();
    sharer.setElements(this);
    return this;
  };

  // For AMD / requirejs
  // Usage: require(["selection-sharer!"]);
  //     or require(["selection-sharer"], function(selectionSharer) { var sharer = new SelectionSharer('p'); });
  if(typeof define == 'function') {
    define(function() {
      SelectionSharer.load = function (name, req, onLoad, config) {
        var sharer = new SelectionSharer();
        sharer.setElements('p');
        onLoad();
      };
      return SelectionSharer;
    });
  } else if (typeof module === 'object' && module.exports) {
    module.exports = SelectionSharer;
  } else {
    // Registering SelectionSharer as a global
    // Usage: var sharer = new SelectionSharer('p');
    window.SelectionSharer = SelectionSharer;
  }

})(jQuery);


if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {
        if (typeof this !== "function") {
            // closest thing possible to the ECMAScript 5 internal IsCallable function
            throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        }

        var aArgs = Array.prototype.slice.call(arguments, 1),
            fToBind = this,
            fNOP = function () {
            },
            fBound = function () {
                return fToBind.apply(this instanceof fNOP && oThis
                    ? this
                    : oThis,
                    aArgs.concat(Array.prototype.slice.call(arguments)));
            };

        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();

        return fBound;
    };
}


/**!
 * trunk8 v1.3.2
 * https://github.com/rviscomi/trunk8
 *
 * Copyright 2012 Rick Viscomi
 * Released under the MIT License.
 *
 * Date: October 21, 2012
 */

(function ($) {
    var methods,
        utils,
        SIDES = {
            /* cen...ter */
            center: 'center',
            /* ...left */
            left: 'left',
            /* right... */
            right: 'right'
        },
        WIDTH = {
            auto: 'auto'
        };

    function trunk8(element) {
        this.$element = $(element);
        this.original_text = this.$element.html();
        this.settings = $.extend({}, $.fn.trunk8.defaults);
    }

    trunk8.prototype.updateSettings = function (options) {
        this.settings = $.extend(this.settings, options);
    };

    function truncate() {
        var data = this.data('trunk8'),
            settings = data.settings,
            width = settings.width,
            side = settings.side,
            fill = settings.fill,
            line_height = utils.getLineHeight(this) * settings.lines,
            str = data.original_text,
            length = str.length,
            max_bite = '',
            lower, upper,
            bite_size,
            bite;

        /* Reset the field to the original string. */
        this.html(str);

        if (width === WIDTH.auto) {
            /* Assuming there is no "overflow: hidden". */
            if (this.height() <= line_height) {
                /* Text is already at the optimal trunkage. */
                return;
            }

            /* Binary search technique for finding the optimal trunkage. */
            /* Find the maximum bite without overflowing. */
            lower = 0;
            upper = length - 1;

            while (lower <= upper) {
                bite_size = lower + ((upper - lower) >> 1);

                bite = utils.eatStr(str, side, length - bite_size, fill);

                this.html(bite);

                /* Check for overflow. */
                if (this.height() > line_height) {
                    upper = bite_size - 1;
                }
                else {
                    lower = bite_size + 1;

                    /* Save the bigger bite. */
                    max_bite = (max_bite.length > bite.length) ? max_bite : bite;
                }
            }

            /* Reset the content to eliminate possible existing scroll bars. */
            this.html('');

            /* Display the biggest bite. */
            this.html(max_bite);

            if (settings.tooltip) {
                this.attr('title', str);
            }
        }
        else if (!isNaN(width)) {
            bite_size = length - width;

            bite = utils.eatStr(str, side, bite_size, fill);

            this.html(bite);

            if (settings.tooltip) {
                this.attr('title', str);
            }
        }
        else {
            $.error('Invalid width "' + width + '".');
        }
    }

    methods = {
        init: function (options) {
            return this.each(function () {
                var $this = $(this),
                    data = $this.data('trunk8');

                if (!data) {
                    $this.data('trunk8', (data = new trunk8(this)));
                }

                data.updateSettings(options);

                truncate.call($this);
            });
        },

        /** Updates the text value of the elements while maintaining truncation. */
        update: function (new_string) {
            return this.each(function () {
                var $this = $(this);

                /* Update text. */
                if (new_string) {
                    $this.data('trunk8').original_text = new_string;
                }

                /* Truncate accordingly. */
                truncate.call($this);
            });
        },

        revert: function () {
            return this.each(function () {
                /* Get original text. */
                var text = $(this).data('trunk8').original_text;

                /* Revert element to original text. */
                $(this).html(text);
            });
        },

        /** Returns this instance's settings object. NOT CHAINABLE. */
        getSettings: function () {
            return this.get(0).data('trunk8').settings;
        }
    };

    utils = {
        /** Replaces [bite_size] [side]-most chars in [str] with [fill]. */
        eatStr: function (str, side, bite_size, fill) {
            var length = str.length,
                key = utils.eatStr.generateKey.apply(null, arguments),
                half_length,
                half_bite_size;

            /* If the result is already in the cache, return it. */
            if (utils.eatStr.cache[key]) {
                return utils.eatStr.cache[key];
            }

            /* Common error handling. */
            if ((typeof str !== 'string') || (length === 0)) {
                $.error('Invalid source string "' + str + '".');
            }
            if ((bite_size < 0) || (bite_size > length)) {
                $.error('Invalid bite size "' + bite_size + '".');
            }
            else if (bite_size === 0) {
                /* No bite should show no truncation. */
                return str;
            }
            if (typeof (fill + '') !== 'string') {
                $.error('Fill unable to be converted to a string.');
            }

            /* Compute the result, store it in the cache, and return it. */
            switch (side) {
                case SIDES.right:
                    /* str... */
                    return utils.eatStr.cache[key] =
                        $.trim(str.substr(0, length - bite_size)) + fill;

                case SIDES.left:
                    /* ...str */
                    return utils.eatStr.cache[key] =
                        fill + $.trim(str.substr(bite_size));

                case SIDES.center:
                    /* Bit-shift to the right by one === Math.floor(x / 2) */
                    half_length = length >> 1; // halve the length
                    half_bite_size = bite_size >> 1; // halve the bite_size

                    /* st...r */
                    return utils.eatStr.cache[key] =
                        $.trim(utils.eatStr(str.substr(0, length - half_length), SIDES.right, bite_size - half_bite_size, '')) +
                        fill +
                        $.trim(utils.eatStr(str.substr(length - half_length), SIDES.left, half_bite_size, ''));

                default:
                    $.error('Invalid side "' + side + '".');
            }
        },

        getLineHeight: function (elem) {
            var $elem = $(elem),
                floats = $elem.css('float'),
                position = $elem.css('position'),
                html = $elem.html(),
                wrapper_id = 'line-height-test',
                line_height;

            if (floats !== 'none') {
                $elem.css('float', 'none');
            }

            if (position === 'absolute') {
                $elem.css('position', 'static');
            }

            /* Set the content to a small single character and wrap. */
            $elem.html('i').wrap('<div id="' + wrapper_id + '" />');

            /* Calculate the line height by measuring the wrapper.*/
            line_height = $('#' + wrapper_id).innerHeight();

            /* Remove the wrapper and reset the style/content. */
            $elem.html(html).css({
                'float': floats,
                'position': position
            }).unwrap();

            return line_height;
        }
    };

    utils.eatStr.cache = {};
    utils.eatStr.generateKey = function () {
        return Array.prototype.join.call(arguments, '');
    };

    $.fn.trunk8 = function (method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        }
        else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        }
        else {
            $.error('Method ' + method + ' does not exist on jQuery.trunk8');
        }
    };

    /* Default trunk8 settings. */
    $.fn.trunk8.defaults = {
        fill: '&hellip;',
        lines: 1,
        side: SIDES.right,
        tooltip: true,
        width: WIDTH.auto
    };
})(jQuery);


var isFirefox = typeof InstallTrigger !== 'undefined';

if (isFirefox === true) {
    $('.threeLine').trunk8({
        lines: 4
    });
    $('.twoLine').trunk8({
        lines: 3
    });
}
else {
    $('.threeLine').trunk8({
        lines: 3
    });
    $('.twoLine').trunk8({
        lines: 2
    });
}

$('.fourLine').trunk8({
    lines: 4
});
$('.fiveLine').trunk8({
    lines: 5
});
$('.sixLine').trunk8({
    lines: 6
});
$('.oneLine').trunk8({
    lines: 1
});

$('.story_view_line').trunk8({
    lines: 3
});

$('.story_two_line').trunk8({
    lines: 4
})

$(document).ready(function () {
    var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
    if (w > 992) {
        $('.story_view_line').trunk8({
            lines: 4
        });
        $('.story_two_line').trunk8({
            lines: 1
        });
    }
})

$(document).ready(function () {
    var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
    if (w < 1180) {
        $('.change2ontab').trunk8({
            lines: 1
        });
    }
})


$(document).ready(function () {
    $('.scrollbar-inner').scrollbar();
});
/**
 * jQuery CSS Customizable Scrollbar
 *
 * Copyright 2015, Yuriy Khabarov
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * If you found bug, please contact me via email <13real008@gmail.com>
 *
 * Compressed by http://jscompress.com/
 *
 * @author Yuriy Khabarov aka Gromo
 * @version 0.2.10
 * @url https://github.com/gromo/jquery.scrollbar/
 *
 */
!function(l,e){"function"==typeof define&&define.amd?define(["jquery"],e):e(l.jQuery)}(this,function(l){"use strict";function e(e){if(t.webkit&&!e)return{height:0,width:0};if(!t.data.outer){var o={border:"none","box-sizing":"content-box",height:"200px",margin:"0",padding:"0",width:"200px"};t.data.inner=l("<div>").css(l.extend({},o)),t.data.outer=l("<div>").css(l.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},o)).append(t.data.inner).appendTo("body")}return t.data.outer.scrollLeft(1e3).scrollTop(1e3),{height:Math.ceil(t.data.outer.offset().top-t.data.inner.offset().top||0),width:Math.ceil(t.data.outer.offset().left-t.data.inner.offset().left||0)}}function o(){var l=e(!0);return!(l.height||l.width)}function s(l){var e=l.originalEvent;return e.axis&&e.axis===e.HORIZONTAL_AXIS?!1:e.wheelDeltaX?!1:!0}var r=!1,t={data:{index:0,name:"scrollbar"},macosx:/mac/i.test(navigator.platform),mobile:/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),overlay:null,scroll:null,scrolls:[],webkit:/webkit/i.test(navigator.userAgent)&&!/edge\/\d+/i.test(navigator.userAgent)};t.scrolls.add=function(l){this.remove(l).push(l)},t.scrolls.remove=function(e){for(;l.inArray(e,this)>=0;)this.splice(l.inArray(e,this),1);return this};var i={autoScrollSize:!0,autoUpdate:!0,debug:!1,disableBodyScroll:!1,duration:200,ignoreMobile:!1,ignoreOverlay:!1,scrollStep:30,showArrows:!1,stepScrolling:!0,scrollx:null,scrolly:null,onDestroy:null,onInit:null,onScroll:null,onUpdate:null},n=function(s){t.scroll||(t.overlay=o(),t.scroll=e(),a(),l(window).resize(function(){var l=!1;if(t.scroll&&(t.scroll.height||t.scroll.width)){var o=e();(o.height!==t.scroll.height||o.width!==t.scroll.width)&&(t.scroll=o,l=!0)}a(l)})),this.container=s,this.namespace=".scrollbar_"+t.data.index++,this.options=l.extend({},i,window.jQueryScrollbarOptions||{}),this.scrollTo=null,this.scrollx={},this.scrolly={},s.data(t.data.name,this),t.scrolls.add(this)};n.prototype={destroy:function(){if(this.wrapper){this.container.removeData(t.data.name),t.scrolls.remove(this);var e=this.container.scrollLeft(),o=this.container.scrollTop();this.container.insertBefore(this.wrapper).css({height:"",margin:"","max-height":""}).removeClass("scroll-content scroll-scrollx_visible scroll-scrolly_visible").off(this.namespace).scrollLeft(e).scrollTop(o),this.scrollx.scroll.removeClass("scroll-scrollx_visible").find("div").andSelf().off(this.namespace),this.scrolly.scroll.removeClass("scroll-scrolly_visible").find("div").andSelf().off(this.namespace),this.wrapper.remove(),l(document).add("body").off(this.namespace),l.isFunction(this.options.onDestroy)&&this.options.onDestroy.apply(this,[this.container])}},init:function(e){var o=this,r=this.container,i=this.containerWrapper||r,n=this.namespace,c=l.extend(this.options,e||{}),a={x:this.scrollx,y:this.scrolly},d=this.wrapper,h={scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop()};if(t.mobile&&c.ignoreMobile||t.overlay&&c.ignoreOverlay||t.macosx&&!t.webkit)return!1;if(d)i.css({height:"auto","margin-bottom":-1*t.scroll.height+"px","margin-right":-1*t.scroll.width+"px","max-height":""});else{if(this.wrapper=d=l("<div>").addClass("scroll-wrapper").addClass(r.attr("class")).css("position","absolute"==r.css("position")?"absolute":"relative").insertBefore(r).append(r),r.is("textarea")&&(this.containerWrapper=i=l("<div>").insertBefore(r).append(r),d.addClass("scroll-textarea")),i.addClass("scroll-content").css({height:"auto","margin-bottom":-1*t.scroll.height+"px","margin-right":-1*t.scroll.width+"px","max-height":""}),r.on("scroll"+n,function(e){l.isFunction(c.onScroll)&&c.onScroll.call(o,{maxScroll:a.y.maxScrollOffset,scroll:r.scrollTop(),size:a.y.size,visible:a.y.visible},{maxScroll:a.x.maxScrollOffset,scroll:r.scrollLeft(),size:a.x.size,visible:a.x.visible}),a.x.isVisible&&a.x.scroll.bar.css("left",r.scrollLeft()*a.x.kx+"px"),a.y.isVisible&&a.y.scroll.bar.css("top",r.scrollTop()*a.y.kx+"px")}),d.on("scroll"+n,function(){d.scrollTop(0).scrollLeft(0)}),c.disableBodyScroll){var p=function(l){s(l)?a.y.isVisible&&a.y.mousewheel(l):a.x.isVisible&&a.x.mousewheel(l)};d.on("MozMousePixelScroll"+n,p),d.on("mousewheel"+n,p),t.mobile&&d.on("touchstart"+n,function(e){var o=e.originalEvent.touches&&e.originalEvent.touches[0]||e,s={pageX:o.pageX,pageY:o.pageY},t={left:r.scrollLeft(),top:r.scrollTop()};l(document).on("touchmove"+n,function(l){var e=l.originalEvent.targetTouches&&l.originalEvent.targetTouches[0]||l;r.scrollLeft(t.left+s.pageX-e.pageX),r.scrollTop(t.top+s.pageY-e.pageY),l.preventDefault()}),l(document).on("touchend"+n,function(){l(document).off(n)})})}l.isFunction(c.onInit)&&c.onInit.apply(this,[r])}l.each(a,function(e,t){var i=null,d=1,h="x"===e?"scrollLeft":"scrollTop",p=c.scrollStep,u=function(){var l=r[h]();r[h](l+p),1==d&&l+p>=f&&(l=r[h]()),-1==d&&f>=l+p&&(l=r[h]()),r[h]()==l&&i&&i()},f=0;t.scroll||(t.scroll=o._getScroll(c["scroll"+e]).addClass("scroll-"+e),c.showArrows&&t.scroll.addClass("scroll-element_arrows_visible"),t.mousewheel=function(l){if(!t.isVisible||"x"===e&&s(l))return!0;if("y"===e&&!s(l))return a.x.mousewheel(l),!0;var i=-1*l.originalEvent.wheelDelta||l.originalEvent.detail,n=t.size-t.visible-t.offset;return(i>0&&n>f||0>i&&f>0)&&(f+=i,0>f&&(f=0),f>n&&(f=n),o.scrollTo=o.scrollTo||{},o.scrollTo[h]=f,setTimeout(function(){o.scrollTo&&(r.stop().animate(o.scrollTo,240,"linear",function(){f=r[h]()}),o.scrollTo=null)},1)),l.preventDefault(),!1},t.scroll.on("MozMousePixelScroll"+n,t.mousewheel).on("mousewheel"+n,t.mousewheel).on("mouseenter"+n,function(){f=r[h]()}),t.scroll.find(".scroll-arrow, .scroll-element_track").on("mousedown"+n,function(s){if(1!=s.which)return!0;d=1;var n={eventOffset:s["x"===e?"pageX":"pageY"],maxScrollValue:t.size-t.visible-t.offset,scrollbarOffset:t.scroll.bar.offset()["x"===e?"left":"top"],scrollbarSize:t.scroll.bar["x"===e?"outerWidth":"outerHeight"]()},a=0,v=0;return l(this).hasClass("scroll-arrow")?(d=l(this).hasClass("scroll-arrow_more")?1:-1,p=c.scrollStep*d,f=d>0?n.maxScrollValue:0):(d=n.eventOffset>n.scrollbarOffset+n.scrollbarSize?1:n.eventOffset<n.scrollbarOffset?-1:0,p=Math.round(.75*t.visible)*d,f=n.eventOffset-n.scrollbarOffset-(c.stepScrolling?1==d?n.scrollbarSize:0:Math.round(n.scrollbarSize/2)),f=r[h]()+f/t.kx),o.scrollTo=o.scrollTo||{},o.scrollTo[h]=c.stepScrolling?r[h]()+p:f,c.stepScrolling&&(i=function(){f=r[h](),clearInterval(v),clearTimeout(a),a=0,v=0},a=setTimeout(function(){v=setInterval(u,40)},c.duration+100)),setTimeout(function(){o.scrollTo&&(r.animate(o.scrollTo,c.duration),o.scrollTo=null)},1),o._handleMouseDown(i,s)}),t.scroll.bar.on("mousedown"+n,function(s){if(1!=s.which)return!0;var i=s["x"===e?"pageX":"pageY"],c=r[h]();return t.scroll.addClass("scroll-draggable"),l(document).on("mousemove"+n,function(l){var o=parseInt((l["x"===e?"pageX":"pageY"]-i)/t.kx,10);r[h](c+o)}),o._handleMouseDown(function(){t.scroll.removeClass("scroll-draggable"),f=r[h]()},s)}))}),l.each(a,function(l,e){var o="scroll-scroll"+l+"_visible",s="x"==l?a.y:a.x;e.scroll.removeClass(o),s.scroll.removeClass(o),i.removeClass(o)}),l.each(a,function(e,o){l.extend(o,"x"==e?{offset:parseInt(r.css("left"),10)||0,size:r.prop("scrollWidth"),visible:d.width()}:{offset:parseInt(r.css("top"),10)||0,size:r.prop("scrollHeight"),visible:d.height()})}),this._updateScroll("x",this.scrollx),this._updateScroll("y",this.scrolly),l.isFunction(c.onUpdate)&&c.onUpdate.apply(this,[r]),l.each(a,function(l,e){var o="x"===l?"left":"top",s="x"===l?"outerWidth":"outerHeight",t="x"===l?"width":"height",i=parseInt(r.css(o),10)||0,n=e.size,a=e.visible+i,d=e.scroll.size[s]()+(parseInt(e.scroll.size.css(o),10)||0);c.autoScrollSize&&(e.scrollbarSize=parseInt(d*a/n,10),e.scroll.bar.css(t,e.scrollbarSize+"px")),e.scrollbarSize=e.scroll.bar[s](),e.kx=(d-e.scrollbarSize)/(n-a)||1,e.maxScrollOffset=n-a}),r.scrollLeft(h.scrollLeft).scrollTop(h.scrollTop).trigger("scroll")},_getScroll:function(e){var o={advanced:['<div class="scroll-element">','<div class="scroll-element_corner"></div>','<div class="scroll-arrow scroll-arrow_less"></div>','<div class="scroll-arrow scroll-arrow_more"></div>','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_inner-wrapper">','<div class="scroll-element_inner scroll-element_track">','<div class="scroll-element_inner-bottom"></div>',"</div>","</div>",'<div class="scroll-bar">','<div class="scroll-bar_body">','<div class="scroll-bar_body-inner"></div>',"</div>",'<div class="scroll-bar_bottom"></div>','<div class="scroll-bar_center"></div>',"</div>","</div>","</div>"].join(""),simple:['<div class="scroll-element">','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_track"></div>','<div class="scroll-bar"></div>',"</div>","</div>"].join("")};return o[e]&&(e=o[e]),e||(e=o.simple),e="string"==typeof e?l(e).appendTo(this.wrapper):l(e),l.extend(e,{bar:e.find(".scroll-bar"),size:e.find(".scroll-element_size"),track:e.find(".scroll-element_track")}),e},_handleMouseDown:function(e,o){var s=this.namespace;return l(document).on("blur"+s,function(){l(document).add("body").off(s),e&&e()}),l(document).on("dragstart"+s,function(l){return l.preventDefault(),!1}),l(document).on("mouseup"+s,function(){l(document).add("body").off(s),e&&e()}),l("body").on("selectstart"+s,function(l){return l.preventDefault(),!1}),o&&o.preventDefault(),!1},_updateScroll:function(e,o){var s=this.container,r=this.containerWrapper||s,i="scroll-scroll"+e+"_visible",n="x"===e?this.scrolly:this.scrollx,c=parseInt(this.container.css("x"===e?"left":"top"),10)||0,a=this.wrapper,d=o.size,h=o.visible+c;o.isVisible=d-h>1,o.isVisible?(o.scroll.addClass(i),n.scroll.addClass(i),r.addClass(i)):(o.scroll.removeClass(i),n.scroll.removeClass(i),r.removeClass(i)),"y"===e&&(s.is("textarea")||h>d?r.css({height:h+t.scroll.height+"px","max-height":"none"}):r.css({"max-height":h+t.scroll.height+"px"})),(o.size!=s.prop("scrollWidth")||n.size!=s.prop("scrollHeight")||o.visible!=a.width()||n.visible!=a.height()||o.offset!=(parseInt(s.css("left"),10)||0)||n.offset!=(parseInt(s.css("top"),10)||0))&&(l.extend(this.scrollx,{offset:parseInt(s.css("left"),10)||0,size:s.prop("scrollWidth"),visible:a.width()}),l.extend(this.scrolly,{offset:parseInt(s.css("top"),10)||0,size:this.container.prop("scrollHeight"),visible:a.height()}),this._updateScroll("x"===e?"y":"x",n))}};var c=n;l.fn.scrollbar=function(e,o){return"string"!=typeof e&&(o=e,e="init"),"undefined"==typeof o&&(o=[]),l.isArray(o)||(o=[o]),this.not("body, .scroll-wrapper").each(function(){var s=l(this),r=s.data(t.data.name);(r||"init"===e)&&(r||(r=new c(s)),r[e]&&r[e].apply(r,o))}),this},l.fn.scrollbar.options=i;var a=function(){var l=0,e=0;return function(o){var s,i,n,c,d,h,p;for(s=0;s<t.scrolls.length;s++)c=t.scrolls[s],i=c.container,n=c.options,d=c.wrapper,h=c.scrollx,p=c.scrolly,(o||n.autoUpdate&&d&&d.is(":visible")&&(i.prop("scrollWidth")!=h.size||i.prop("scrollHeight")!=p.size||d.width()!=h.visible||d.height()!=p.visible))&&(c.init(),n.debug&&(window.console&&console.log({scrollHeight:i.prop("scrollHeight")+":"+c.scrolly.size,scrollWidth:i.prop("scrollWidth")+":"+c.scrollx.size,visibleHeight:d.height()+":"+c.scrolly.visible,visibleWidth:d.width()+":"+c.scrollx.visible},!0),e++));r&&e>10?(window.console&&console.log("Scroll updates exceed 10"),a=function(){}):(clearTimeout(l),l=setTimeout(a,300))}}();window.angular&&!function(l){l.module("jQueryScrollbar",[]).provider("jQueryScrollbar",function(){var e=i;return{setOptions:function(o){l.extend(e,o)},$get:function(){return{options:l.copy(e)}}}}).directive("jqueryScrollbar",["jQueryScrollbar","$parse",function(l,e){return{restrict:"AC",link:function(o,s,r){var t=e(r.jqueryScrollbar),i=t(o);s.scrollbar(i||l.options).on("$destroy",function(){s.scrollbar("destroy")})}}}])}(window.angular)});
// $(".overlayMenu").hide();
$("#menuOpen").click(function () {
    $(".menu-drawer").toggleClass('open');
    $('body').toggleClass('overflow');
    $('.overlayMenu').toggleClass('active');
});

$("#menuClose, .overlayMenu").click(function () {
    $(".menu-drawer").removeClass('open');
    $('body').toggleClass('overflow');
    $('.overlayMenu').removeClass('active');
});

$(function () {
    $(window).scroll(function () {
        var winTop = $(window).scrollTop();
        if (winTop >= 90) {
            $("header").addClass("sticky-header");
            $('.home-sticky, .overlayMenu, .sectionSticky, .social_share_subHeader').addClass('sticky');
            $('#homeMenu').addClass('sticky');
            $('.sticky-logo').addClass('active');
        } else {
            $("header").removeClass("sticky-header");
            $('.home-sticky, .overlayMenu, .sectionSticky, .social_share_subHeader').removeClass('sticky');
            $('#homeMenu').removeClass('sticky');
            $('.sticky-logo').removeClass('active');
        }//if-else
    });//win func.
});//ready func.


$('.hasChild .menuToggle').click(function (e) {
    e.preventDefault();
    var $this = $(this);
    if ($this.next().hasClass('active')) {
        $this.parent().find('.menuAnchor').removeClass('activeMenu');
        $this.next().removeClass('active');
        $this.next().slideUp(100);
        $this.removeClass('menuMinus');
    } else {
        $this.parent().parent().find('.subMenu').removeClass('active');
        $this.parent().parent().find('.menuAnchor').removeClass('activeMenu');
        $this.parent().parent().find('.menuToggle').removeClass('menuMinus');
        $this.parent().parent().find('.subMenu').slideUp(100);
        $this.next().toggleClass('active');
        $this.parent().find('.menuAnchor').addClass('activeMenu');
        $this.next().slideToggle(100);
        $this.addClass('menuMinus');
    }
});


$('#clickSearch').click(function (e) {
    if ($('#global-search').val() !== "") {
        search($('#global-search').val());
        return false;
    }
});

$('#clickSearch2').click(function (e) {
    if ($('#global-search2').val() !== "") {
        search($('#global-search2').val());
        return false;
    }
});

$('#clickSearch3').click(function (e) {
    if ($('#global-search3').val() !== "") {
        search($('#global-search3').val());
        return false;
    }
});


function searchKeyPress(e) {
    // look for window.event in case event isn't passed in
    e = e || window.event;
    if (e.keyCode === 13) {
        document.getElementById('clickSearch').click();
        return false;
    }
    return true;
}

function searchKeyPress2(e) {
    // look for window.event in case event isn't passed in
    e = e || window.event;
    if (e.keyCode === 13) {
        document.getElementById('clickSearch2').click();
        return false;
    }
    return true;
}

function searchKeyPress3(e) {
    // look for window.event in case event isn't passed in
    e = e || window.event;
    if (e.keyCode === 13) {
        document.getElementById('clickSearch3').click();
        return false;
    }
    return true;
}

$('#savePhone').hide();


function addPhone() {
    $('.textNumber').toggleClass('hide');
    $('.inputNumber').toggleClass('show');
    $('#addPhone').hide();
    $('#savePhone').show();

    if (cookie !== '') {
        var userName = JSON.parse(cookie);
        var userId = userName.id;
        var UserPhone = userName.phoneNumber;
        $('#phoneNumber').val(UserPhone);
    }
}


function Isphone(phone) {
    var number = $('field_Id').val();
    var filter = /^[1-9][0-9]{9,14}$/;
    if (filter.test(phone)) {
        return true;
    }
    else {
        return false;
    }
}


function savePhone(e) {
    var phone = $('#phoneNumber').val();
    var isValid = true;

    if (cookie !== '') {
        var userName = JSON.parse(cookie);
        var userId = userName.id;
    }


    var authKey = getCookie("hnh");
    if (authKey !== '') {
        var key = authKey;
    }

    function formToJSON() {
        return JSON.stringify({
            "phoneNumber": $('#phoneNumber').val(),
            "id": userId
        });
    }

    if ($("#phoneNumber").val() !== '') {
        $("#phoneNumber").removeClass('error');
    }
    else {
        $("#phoneNumber").addClass('error');
        isValid = false;
    }

    if (Isphone(phone) === false) {
        $('#invalid_email').show();
        $("#phoneNumber").addClass('error');
        isValid = false;
    }
    else {
        $("#phoneNumber").removeClass('error');
    }

    if (isValid !== false) {
        // e.preventDefault();
        $.ajax({
            url: '/auth/editProfile', // url where to submit the request
            type: "post", // type of action POST || GET
            data: formToJSON(), // post data || get data
            contentType: 'application/json',
            beforeSend: function (xhr) {
                xhr.setRequestHeader("Authorization", "Basic " + key);
            },
            success: function (result) {
                var loggedInUser = JSON.stringify(result)
                setCookie('u_d', loggedInUser);
                $('.textNumber').toggleClass('hide');
                $('.inputNumber').toggleClass('show');
                $('#addPhone').show();
                $('#savePhone').hide();
                window.location.reload(true);
            }
        });
    }
}

$("#message").hide();
$("#message_error").hide();
$("#submit_btn").on('click', function (e) {
    var password = $('#new_password').val();
    var authKey = getCookie("hnh");
    if (authKey !== '') {
        var key = authKey;

    }

    if (cookie !== '') {
        var userName = JSON.parse(cookie);
        var userId = userName.id;
    }

    function CPToJSON() {
        return JSON.stringify({
            "password": $('#new_password').val(),
            "id": userId
        });
    }

    //  debugger;
    var isValid = true;
    $('input[type="password"]').each(function () {
        if ($.trim($(this).val()) === '') {
            isValid = false;
            $(this).addClass('error');
        }
        else {
            $(this).removeClass('error');
        }
    });

    if (checkPassword(password) === false) {
        $('#invalid_con_pass').show();
        isValid = false;
    }
    else {
        $('#invalid_con_pass').hide();
    }

    checkPassword();
    if (isValid === false) {
        e.preventDefault();
        checkPassword();
    }
    else {
        checkPassword();
        $.ajax({
            url: '/auth/changePassword', // url where to submit the request
            type: "post", // type of action POST || GET
            data: CPToJSON(), // post data || get data
            contentType: 'application/json',
            beforeSend: function (xhr) {
                xhr.setRequestHeader("Authorization", "Basic " + key);
            },
            success: function (result) {
                var logMsg = JSON.stringify(result);
                $('#message').show();
                logout();
            }
        });
    }
});

$("#submit_btn_fp").on('click', function (e) {
    var password = $('#new_password').val();

    var urlC = window.location.href;
    var input = urlC.split('/');
    var userID = input[4];
    var token = input[5];

    function FPToJSON() {
        return JSON.stringify({
            "password": $('#new_password').val(),
            "userId": userID,
            "token": token,
            "conformPassword": $('#confirm_password').val()
        });
    }

    //  debugger;
    var isValid = true;
    $('input[type="password"]').each(function () {
        if ($.trim($(this).val()) === '') {
            isValid = false;
            $(this).addClass('error');
        }
        else {
            $(this).removeClass('error');
        }
    });

    if (checkPassword(password) === false) {
        $('#invalid_con_pass').show();
        isValid = false;
    }
    else {
        $('#invalid_con_pass').hide();
    }

    checkPassword();
    if (isValid === false) {
        e.preventDefault();
        checkPassword();
    }
    else {
        checkPassword();
        $.ajax({
            url: '/update/password', // url where to submit the request
            type: "post", // type of action POST || GET
            data: FPToJSON(), // post data || get data
            contentType: 'application/json',
            success: function (result) {
                var logMsg = JSON.stringify(result);
                if (logMsg === 'Invalid Url' || logMsg === 'URL Expired, Please re-generate URL') {
                    $('#message_error').show();
                }
                else {
                    $('#message').show();
                }
            }
        });
    }
});

function checkPassword() {
    var pass = $('#new_password').val();
    var confpass = $('#confirm_password').val();
    if (pass !== confpass) {
        return false;
    } else {
        return true;
    }
}


function GLogin() {
    $.ajax({
        url: 'google/createAuthorization', // url where to submit the request
        type: "get", // type of action POST || GET
        dataType: 'json', // data type
        contentType: 'application/json',
        async: false,
        success: function (result) {
            window.open(result.message, '_self');
        }
    });
}

function FLogin() {
    //  debugger;
    $.ajax({
        url: 'facebook/createAuthorization', // url where to submit the request
        type: "get", // type of action POST || GET
        dataType: 'json', // data type
        contentType: 'application/json',
        async: false,
        success: function (result) {
            window.open(result.message, '_self');
        }
    });
}

//set cookie

function setCookie(c_name, value) {
    // document.cookie = c_name + "=" + (value) +  path=/";
    document.cookie = c_name + "=" + value + ";" + ";path=/";
}

function removeCookie(c_name) {
    document.cookie = c_name + "=";
}


function getCookie(c_name) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(c_name + "=");
        if (c_start != -1) {
            c_start = c_start + c_name.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1) c_end = document.cookie.length;
            return unescape(document.cookie.substring(c_start, c_end));
        }
    }
    return "";
}

var redirectionUrl;
var loggedInUser = null;
var cookie = getCookie("u_d");

// function checkCookie() {
//
// }

(function () {
    if (cookie !== '') {
        var userName = JSON.parse(cookie);
        userName.fullName = userName.fullName.replace('+', ' ');
        if (userName.phoneNumber === null) {
            userName.phoneNumber = 'Add Phone Number';
        }
        //userName.phoneNumber= userName.phoneNumber.replace(null, 'Add Phone No.');
        $('.hasUser').css("display", "block");
        $('.userName').text(userName.fullName).addClass('show');
        $('.email').text(userName.email);
        $('.textNumber').text(userName.phoneNumber);
        if (userName.imageUrl !== null) {
            $('.image_wrap img').attr("src", userName.imageUrl);
        }
        $('#notUser').hide();
        $('.notUserProfile').hide();
        $('.userProfileLog').css("display", "block");
        redirectionUrl = userName.redirectionUrl;
    }
})()


//Check
function FBstatus() {
    if (cookie !== '') {
        var userName = JSON.parse(cookie);
        var userFrom = userName.socialSignInProvider;
        var userEmail = userName.email;
        var status = JSON.stringify({
            "status": userFrom,
            "email": userEmail
        });
        return status;
    }
}


//checkCookie();


function logout() {
    var authKey = getCookie("hnh");
    if (authKey !== '') {
        var key = authKey;
    }
    $.ajax({
        url: '/auth/logout', // url where to submit the request
        type: "get", // type of action POST || GET
        dataType: 'json', // data type
        contentType: 'application/json',
        beforeSend: function (xhr) {
            xhr.setRequestHeader("Authorization", "Basic " + key);
        },
        success: function (result) {
            var logMsg = JSON.stringify(result);
            $('#notUser').show();
            $('.hasUser').hide();
            //FBstatus();
            setCookie("bb", FBstatus());
            removeCookie('u_d');
            removeCookie('hnh');
            window.location.href = '/';
            loggedInUser = null;
        }, error: function (err) {
            $('#notUser').show();
            $('.hasUser').hide();
            setCookie("bb", FBstatus());
            removeCookie('u_d');
            removeCookie('hnh');
            window.location.href = '/';
            loggedInUser = null;
        }
    });
}

function logout2() {
    var authKey = getCookie("hnh");
    if (authKey !== '') {
        var key = authKey;
    }
    $.ajax({
        url: '/auth/logout', // url where to submit the request
        type: "get", // type of action POST || GET
        dataType: 'json', // data type
        contentType: 'application/json',
        beforeSend: function (xhr) {
            xhr.setRequestHeader("Authorization", "Basic " + key);
        },
        success: function (result) {
            var logMsg = JSON.stringify(result)
            $('#notUser').show();
            $('.hasUser').hide();
            setCookie("bb", FBstatus());
            removeCookie('u_d');
            removeCookie('hnh');
            window.location.href = '/';
            loggedInUser = null;
            isSudoku = false;
        }, error: function (err) {
            $('#notUser').show();
            $('.hasUser').hide();
            setCookie("bb", FBstatus());
            removeCookie('u_d');
            removeCookie('hnh');
            window.location.href = '/';
            loggedInUser = null;
        }
    });
}


function search(searchTerm) {
    //  searchTerm = searchTerm.replace(/[^\w\s]/gi, ' ');
    searchTerm = searchTerm.trim();
    searchTerm = searchTerm.replace(/[-]/gi, ' ');
    searchTerm = searchTerm.replace(/[%]/gi, '');
    searchTerm = searchTerm.replace(/[\s]+/gi, '-');
    searchTerm = searchTerm.toLowerCase();
    localStorage.removeItem('sd');
    localStorage.removeItem('ed');
    localStorage.removeItem('author');
    localStorage.removeItem('section');
    localStorage.removeItem('rel');
    location.href = "/search/" + searchTerm;
    return false;
}

//Anchor url  glossary
if ($("a").hasClass('carousel-control-next')) {
}
else {
    $('a[href^="#"]').on('click', function (event) {
        var target = $(this.getAttribute('href'));
        if (target.length) {
            event.preventDefault();
            $('html, body').stop().animate({
                scrollTop: target.offset().top - 90
            }, 1000);
        }
        if ($(window).width() < 768) {
            $('html, body').stop().animate({
                scrollTop: target.offset().top - 145
            }, 1000);
        }
    });
}


//Search text_______________________________________________
$('.search-btn').click(function () {
    $('.headerSearch').addClass('show');
    $('.headerSearch.show').focus();
    $('.searchIconPage').addClass('show');
});

$('body').click(function () {
    $('.headerSearch').removeClass('show');
    $('.headerSearch.show').focus();
    $('.searchIconPage').removeClass('show');
});

$('header, nav').click(function (event) {
    event.stopPropagation();
});


$(document).ready(function () {
    var $imageSrc;
    $('.imgView').click(function () {
        $imageSrc = $(this).data('bigimage');
    });

    $('.modal').on('shown.bs.modal', function (e) {
        $(".image").attr('src', $imageSrc);
    });
    $('.modal').on('hide.bs.modal', function (e) {
        $(".image").attr('src', '');
    });
});


var swiper = new Swiper('.spotlightSlider', {
    pagination: {
        el: '.swiper-pagination',
        type: 'fraction',
        clickable: true
    },
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
    }
});

var swiper = new Swiper('.sportsSpotlight', {
    pagination: {
        el: '.swiper-pagination',
        type: 'fraction',
        clickable: true
    },
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
    }
});

var comic = new Swiper('.comicsSlider, .twitterTakeSlide', {
    pagination: {
        el: '.swiper-pagination',
        type: 'bullets',
        clickable: true
    }
});
setTimeout(function () {
    comic.on('slideChangeTransitionStart', function () {
        $(".comic-title").hide();
        $("#comic-" + (comic.activeIndex + 1)).show();
    });
}, 500);

var four = new Swiper('.four-column', {
    slidesPerView: 4,
    spaceBetween: 20,
    slidesPerGroup: 4,
    // loopFillGroupWithBlank: true,
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
    },
    pagination: {
        el: '.swiper-pagination',
        type: 'fraction'
    },
    breakpoints: {
        1025: {
            spaceBetween: 20
        },
        769: {
            slidesPerView: 3,
            spaceBetween: 20,
        }
    }
});

var gallery = new Swiper('.gallerySlide', {
    slidesPerView: 'auto',
    spaceBetween: 20,
    pagination: {
        el: '.swiper-pagination',
        clickable: true,
        type: 'fraction'
    },
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
    }
});

var culture = new Swiper('.cultureSlide', {
    slidesPerView: 'auto',
    spaceBetween: 10,
    pagination: {
        el: '.swiper-pagination',
        clickable: true,
        type: 'fraction'
    },
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
    },
    breakpoints: {
        769: {
            spaceBetween: 10
        }
    }
});

var galleryTop = new Swiper('.gallery-top', {
    spaceBetween: 10
});
var galleryThumbs = new Swiper('.gallery-thumbs', {
    spaceBetween: 30,
    centeredSlides: true,
    slidesPerView: 'auto',
    touchRatio: 0.2,
    slideToClickedSlide: true,
    clickable: true,
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
    },
    pagination: {
        el: '.swiper-pagination',
        clickable: true
    }

});

if ($("div").hasClass('gallery-thumbs')) {
    galleryTop.controller.control = galleryThumbs;
    galleryThumbs.controller.control = galleryTop;
}

if ($("div").hasClass('date')) {
    var daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    n = new Date();
    y = n.getFullYear();
    m = n.getMonth();
    d = n.getDate();
    day = n.getDay();
    document.getElementById("today").innerHTML = daysOfWeek[day] + ", " + d + " " + months[m] + " " + y;
}

if ($("p").hasClass('copyRight')) {
    n = new Date();
    y = n.getFullYear();
    document.getElementById("year").innerHTML = y;
}


//Sudoku

function clickLogin(elem) {
    var currentUrl = window.location.href;
    setCookie('r_d', currentUrl);
    var cookieUrl = getCookie("r_d");
    location.href = "/log-in?" + getRefParam(elem);
}

function clickRegister(elem) {
    var currentUrl = window.location.href;
    setCookie('r_d', currentUrl);
    var cookieUrl = getCookie("r_d");
    location.href = "/signup?" + getRefParam(elem);
}

var currentUrl;

// var isSudoku = false;

function playSukodu(elem) {
    location.href = "/sudoku?" + getRefParam(elem);
}

//For Ref param start

var getClosest = function (elem, selector) {
    for (; elem && elem !== document; elem = elem.parentNode) {
        if ((elem.dataset['widget'] != "") && (elem.dataset['widget'] != null)) return elem;
    }
    return null;
};

function getRefParam(elem) {
    var newHref;
    var parent = getClosest(elem, 'data');
    if (parent !== null) {
        var dataValue = parent.dataset["widget"];
        dataValue = dataValue.toLowerCase().replace(/[^\w ]+/g, '').replace(/ +/g, '-');
        newHref = 'ref=' + dataValue;
    }
    return newHref == !undefined ? '' : newHref;
}

$("a").mousedown(function () {
    var href = this.href
    var parent = getClosest(this, 'data');
    if (parent !== null) {
        var newHref;
        var dataValue = parent.dataset["widget"];
        dataValue = dataValue.toLowerCase().replace(/[^\w ]+/g, '').replace(/ +/g, '-');
        if (href.includes('?')) {
            if (href.includes('?ref=')) {
                newHref = href.split("?ref=")[0] + '?' + 'ref=' + dataValue;
            } else {
                newHref = href + '&' + 'ref=' + dataValue;
            }
        } else {
            newHref = href + '?' + 'ref=' + dataValue;
        }
        this.href = newHref;
    }
});


//For Ref param end

//password Hide/show script..

function showPassword() {
    var x = document.getElementById("password");
    $('.toggle-password').toggleClass("fa-eye fa-eye-slash");
    if (x.type === "password") {
        x.type = "text";
    } else {
        x.type = "password";
    }
}

function PasswordDetect(event) {
    var x = document.getElementById("password");
    if (event && event.target && event.target.value.length > 0) {
        $('.toggle-password').addClass("fa fa-fw fa-eye");
    }
    else {
        $('.toggle-password').removeClass("fa fa-fw fa-eye fa-eye fa-eye-slash");
        x.type = "password";
    }
}

var btn = $('#backToTop');
$(window).scroll(function () {
    if ($(window).scrollTop() > 300) {
        btn.addClass('show');
    }
    else {
        btn.removeClass('show');
    }
});
btn.on('click', function (e) {
    e.preventDefault();
    $('html, body').animate({scrollTop: 0}, '300');
});

var addCode =
  "<div id='div-gpt-ad-1558959879030-0' class='positioning' style='height:90px; width:728px;'>\n" +
  '<script>\n' +
  'googletag.cmd.push(function () {\n' +
  "googletag.display('div-gpt-ad-1558959879030-0');\n" +
  '});\n' +
  '</script>\n' +
  '</div>';

$(document).ready(function () {
    var tagCount = $('padiingDetails.story-advertise > p').length;
    var tagCount1 = 4;
    if (tagCount > 0 && tagCount <= 3) {
        addScriptCode(tagCount);
    } else {
        // if (tagCount % 3 === 0) {
            addScriptCode(tagCount1);
        // }
        // else {
        //     addScriptCode(tagCount1);
        //     addScriptCode(tagCount);
        // }

    }
});

function addScriptCode(tagCount) {
    $(addCode).insertAfter(
        '.padiingDetails.story-advertise p:nth-of-type(' + tagCount + ')'
    );
}

function elementInViewPort(classId) {
    var result = {"id": 0, "percentage": 0};
    var id = 0;
    var percentage = 0;
    $("." + classId).each(function () {
        var screenTop = document.documentElement.scrollTop;
        var screenBottom = document.documentElement.scrollTop + $(window).height();
        var boxTop = $(this).offset().top;
        var boxHeight = $(this).height();
        var boxBottom = boxTop + boxHeight;

        if (boxTop > screenTop) {
            if (boxBottom < screenBottom) {
                percentage = 100;
                id = $(this).attr('data-id');
                result.id = id;
                result.percentage = percentage;


            } else if (boxTop < screenBottom) {
                //partial (bottom)
                let percent = Math.round((screenBottom - boxTop) / boxHeight * 100);
                if (percent >= percentage) {
                    percentage = percent;
                    id = $(this).attr('data-id');
                    result.id = id;
                    result.percentage = percentage;
                }
            }
        } else if (boxBottom > screenTop) {
            let percent = Math.round((boxBottom - screenTop) / boxHeight * 100);
            if (percent >= percentage) {
                percentage = percent;
                id = $(this).attr('data-id');
                result.id = id;
                result.percentage = percentage;
            }
        }
    });
    return result;
}

function filterParameter(key, queryString) {
    var filteredParams = "";
    if (queryString != undefined && queryString != null && queryString.length > 0) {
        let hashes = queryString.split('&');
        for (let i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            if (hash[0] != key) {
                filteredParams += filteredParams.length > 0 ? "&" + hash[0] + "=" + hash[1] : hash[0] + "=" + hash[1];
            }
        }
    }
    return filteredParams;
}

function getParameter(key) {
    var queryString = window.location.href.split("?")[1];
    if (queryString != undefined && queryString != null && queryString.length > 0) {
        let hashes = queryString.split('&');
        for (let i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            if (hash[0] == key) {
                return hash[1];
            }
        }
    }
    return null;
}

function checkInViewPort(id) {
    var elem = document.getElementById(id);
    if (elem != undefined) {
        let bounding = elem.getBoundingClientRect();
        if (
            bounding.top >= 0 &&
            bounding.left >= 0 &&
            bounding.right <= (window.innerWidth || document.documentElement.clientWidth) &&
            bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight)
        ) {
            return true;
        } else {
            return false;
        }
    }
    return null;
}

$(document).ready(function () {
    if ($('.photo-stories-container').length > 1) {

        var _comscore = _comscore || [];
        _comscore.push({c1: "2", c2: "17824659"});
        (function () {
            var s = document.createElement("script"), el = document.getElementsByTagName("script")[0];
            s.async = true;
            s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
            el.parentNode.insertBefore(s, el);
        })();

        function comScoreCall() {
            self.COMSCORE && COMSCORE.beacon({c1: "2", c2: "17824659"});
            $.ajax({
                //url: "{{ route('photogallery.comscore') }}",
                url: "https://www.telegraphindia.com/comscore.txt",
                type: "get", //send it through get method
                cache: "false",
                data: {
                    c1: 2,
                    comscore: 'pageview_candidate'
                },
                success: function (response) {
                    console.log("Success:" + response);
                },
                error: function (error, status, errorThrown) {
                    console.log("error" + error);
                    console.log("error status" + status);
                    console.log("error errorThrown" + errorThrown);
                }
            });
        }

        var originalQueryString = window.location.href.split("?")[1];

        var originalParamImageKey = null;
        if (originalQueryString != undefined) {
            originalParamImageKey = getParameter("slide");
        }

        var originalFilteredParams = filterParameter("slide", originalQueryString);
        var originalUrl = window.location.href.split('?')[0];
        if (originalParamImageKey != null && originalParamImageKey.length > 0) {
            $('html, body').animate({
                scrollTop: $(".photo-stories-container[data-id='" + originalParamImageKey + "']").offset().top - 300
            }, 500);
        }
        $(window).scroll(function () {
            let element = elementInViewPort('photo-stories-container');
            if (element.id > 0) {
                let imageKey = element.id;
                let paramImageKey = getParameter("slide");
                if (paramImageKey != imageKey) {
                    let hashremove = originalUrl;
                    if (originalFilteredParams.length > 0) {
                        hashremove += "?" + originalFilteredParams + "&slide=" + imageKey;
                    } else {
                        hashremove += "?slide=" + imageKey;
                    }
                    if (window.location.href != hashremove) {
                        window.history.pushState('data', 'title', hashremove);
                        window.dataLayer.push({'event': 'VirtualPageview', 'virtualPageURL': hashremove});
                        window.history.pushState({path: hashremove}, '', hashremove);
                        comScoreCall();
                    }
                }
            } else {
                let hashremove = originalUrl;
                if (originalFilteredParams.length > 0) {
                    hashremove += "?" + originalFilteredParams;
                }
                if (window.location.href != hashremove) {
                    //"No image in view port and url is changed, this block will guarentedd be called only on scrol and last/first image of gallery goes out from viewport
                    window.history.pushState('data', 'Title', hashremove);
                    window.history.pushState({path: hashremove}, '', hashremove);
                    comScoreCall();
                }
            }
        });
    }
});



$(document).ready(function () {

    let url = window.location.href;
    url = url.split("?");

    // debugger;
    if (url[1] == "") {
        var flag = url.indexOf('search');
        if (flag) {
            window.history.replaceState('data', 'title', url[0]);
        }
    }
    if (url[0].indexOf('search') == -1) {
        localStorage.removeItem('sd');
        localStorage.removeItem('ed');
        localStorage.removeItem('author');
        localStorage.removeItem('section');
        localStorage.removeItem('rel');
    }

    let author = localStorage.getItem('author');
    $("select#searchAuthor").val(author);

    let section = localStorage.getItem('section');
    $("select#searchSection").val(section);

    let sd = localStorage.getItem('sd');
    $('input#start-date').val(sd);

    let ed = localStorage.getItem('ed');
    $('input#end-date').val(ed);

    let rel = localStorage.getItem('rel');
    if (rel == 'false') {
        $('select#sortRelevance').val(rel);
    }

    if (author != null || section != null || sd != null || ed != null || rel != null) {
        checkWidth();
    }
})

function onAuthorSelect() {
    var author = $('#searchAuthor').val();
    if (author != '') {
        localStorage.setItem('author', author);
        var author = removeSpaceAndUpdate(author);
        checkWidth();
        insertParam('author', author);
    } else {
        localStorage.removeItem('author');
        changeFilter('author');
    }

}

function onSectionSelect() {
    var section = $('#searchSection').val();
    if (section != '') {
        localStorage.setItem('section', section);
        checkWidth();
        insertParam('section', section);
    } else {
        localStorage.removeItem('section');
        changeFilter('section');
    }
}

function removeSpaceAndUpdate(author) {
    // var author = author.split('&');
    author = author.replace(/\s+/g, '-');
    return author;
}

function insertParam(key, value) {
    key = encodeURI(key);
    value = encodeURI(value);

    var kvp = document.location.search.substr(1).split('&');
    // debugger;
    if (key == 'author' || key == 'section' || key == 'sd') {
        if (kvp.length > 0) {
            for (var i = 0; i < kvp.length; i++) {
                let strKey = kvp[i].split('=');
                if ((strKey[0] == 'aid' && key == 'author') || (strKey[0] == 'sid' && key == 'section') || (strKey[0] == 'sd' && key == 'sd')) {
                    if (key == 'sd') {
                        kvp.splice(i, 2);
                    }
                    else {
                        kvp.splice(i, 1);
                    }
                }
                if (strKey[0] == 'page') {
                    kvp.splice(i, 1);
                }
            }
        }
    }

    var i = kvp.length;
    var x;

    while (i--) {
        x = kvp[i].split('=');
        if (x[0] == key) {
            x[1] = value;
            kvp[i] = x.join('=');
            break;
        }
    }
    if (i < 0) {
        kvp[kvp.length] = [key, value].join('=');
    }
    if (window.location.href.includes('?')) {
        document.location.search = kvp.join('&');
    } else {
        document.location.search = kvp.join('?');
    }
}

function daterange() {
    debugger;
    let stdate = $('#start-date').val();
    let etdate = $('#end-date').val();
    let getstdate = new Date(stdate).getTime();
    let getetdate = new Date(etdate).getTime();
    let date = getstdate + '&ed=' + getetdate;
    if (!isNaN(getstdate) && !isNaN(getetdate)) {
        localStorage.setItem('sd', stdate);
        localStorage.setItem('ed', etdate);
        checkWidth();
        insertParam('sd', date);
    }
}

function clearFilter() {
    let url = window.location.href;
    if (url.includes("?")) {
        url = url.split("?")[0]; //.split("#")[0]; when u have # in query string...
        window.history.replaceState('newUrl', 'url', url);
        localStorage.removeItem('sd');
        localStorage.removeItem('ed');
        localStorage.removeItem('author');
        localStorage.removeItem('section');
        localStorage.removeItem('rel');
        window.location.reload();
    }
}

$('#sortRelevance').change(function () {
    let rel = $('#sortRelevance').val();
    debugger;
    if (rel == '') {
        checkWidth();
        localStorage.setItem('rel', true);
        insertParam('recent', true);
    } else {
        checkWidth();
        localStorage.setItem('rel', rel);
        insertParam('recent', rel);
    }
});

function changeFilter(key) {
    let domain = window.location.href;
    var queryString = domain.split('?');
    let kvp = queryString[1].split('&');
    if (kvp != '') {
        for (var i = 0; i < kvp.length; i++) {
            let str = kvp[i].split('=');
            if ((str[0] == 'author' && key == 'author') || str[1] == 'aid' && key == 'author') {
                kvp.splice(i, 2);
            }
            if ((str[0] == 'section' && key == 'section') || str[1] == 'sid' && key == 'section') {
                kvp.splice(i, 2);

            }

        }
    }
    if (window.location.href.includes('?')) {
        kvp = kvp.join('&');
        window.location = queryString[0] + "?" + kvp;
    } else {
        kvp = kvp.join('?');
        window.location = queryString[0] + "?" + kvp;
    }


}

function checkWidth() {
    var screenWidth = $(window).width();
    if (screenWidth <= 991) {
        $('.clearAllFilter.tab').addClass('tab-site');
        $('.clearAllFilter.tab-site').css({'display': 'block'});
    }
    else {
        if (screenWidth >= 992 && screenWidth <= 1024) {
            $('.search-filter').addClass('desktop');
        }
        $('.clearAllFilter.desktopView').addClass('desktop-site');
        $('.clearAllFilter.desktop-site').css({'display': 'block'});
    }
}

function generateReadMoreHtml(arr) {
    html = "";
    arr.forEach(function (item, index) {
        html += '<li><div class="placeholderSmall Tranding-home"> <a href="' + item.contentUrl + '" rel="follow" target="_self"><img src="https://www.telegraphindia.com/unsafe/110x83/smart/static.telegraphindia.com' + item.imageSource + '" alt="' + item.imageTitle + '"></a></div>' + '<h3><a href="' + item.contentUrl + '" class="fourLine" style="float: none; position: static;">' + item.headline + '</a></h3></li>';
    });
    $("#most-read").html(html);
}

function fetchReadMore(readMoreCountRequired) {
    readMoreData = [];
    var mostReadSettings = {
        "async": true,
        "crossDomain": true,
        "url": "https://abp-relatedstory.s3.ap-south-1.amazonaws.com/TT_most_read_story/read_more.json",
        "method": "GET",
        "success": function (readMoreResult) {
            console.log(readMoreResult);
            if (readMoreResult != undefined && readMoreResult.mostRead != undefined && readMoreResult.mostRead.length > 0) {
                if (readMoreResult.mostRead.length >= readMoreCountRequired) {
                    readMoreData = readMoreResult.mostRead.slice(0, readMoreCountRequired);
                } else {
                    readMoreData = readMoreResult.mostRead.slice(0, readMoreResult.mostRead.length);
                }
            }

            if (readMoreData.length < readMoreCountRequired) {
                moreRequired = readMoreCountRequired - readMoreData.length;
                console.log("moreRequired=" + moreRequired);
                trendingSetting = {
                    "async": true,
                    "crossDomain": true,
                    "url": "https://abp-relatedstory.s3.ap-south-1.amazonaws.com/TT_Trending_story/tt_trending.json ",
                    "method": "GET",
                    "success": function (trendingResult) {
                        console.log('trending', trendingResult)
                        if (trendingResult != undefined && trendingResult.ttTrending != undefined && trendingResult.ttTrending.length > 0) {
                            if (moreRequired < trendingResult.ttTrending.length) {
                                readMoreData = readMoreData.concat(trendingResult.ttTrending.slice(0, moreRequired));
                            } else {
                                readMoreData = readMoreData.concat(trendingResult.ttTrending.slice(0, trendingResult.ttTrending.length));
                            }
                        }
                        generateReadMoreHtml(readMoreData);
                    },
                    error: function (data, error) {
                        console.log("3................");
                        console.log("there is an error while fetching trending:" + error);
                        console.log("data:" + data);
                        generateReadMoreHtml(readMoreData);
                    }
                };
                $.ajax(trendingSetting).done(function (response) {
                    console.log('Trending fetch url is hit');
                });
            } else {
                generateReadMoreHtml(readMoreData);
            }
        },
        error: function (data, error) {
            console.log("there is an error while fetching most read:" + error);
            console.log("data:" + data);
            generateReadMoreHtml(readMoreData);
        }
    }
    $.ajax(mostReadSettings).done(function (response) {
        console.log('Most read fetch url is hit');
    });
}

fetchReadMore(6);
// </script>


function showDelhiElectionTable() {
    var newXHR = new XMLHttpRequest(),
        DONE = 4,
        OK = 200,
        sheet = document.createElement('style'),
        css = "",
        cssMQ = "",
        apiUrl = "";
    if (location.hostname == "https://m.telegraphindia.com/") {
        apiUrl = 'https://abp-static.s3.ap-south-1.amazonaws.com/elections/election-2020/delhi-elections-2020.json' + "?slide=" + Math.random();
    } else {
        apiUrl = 'https://abp-static.s3.ap-south-1.amazonaws.com/elections/election-2020/delhi-elections-2020.json' + "?slide=" + Math.random();
    }
    newXHR.open('GET', apiUrl);
    newXHR.send();
    newXHR.onreadystatechange = function () {
        if (newXHR.readyState === DONE) {
            if (newXHR.status === OK) {
                var returnedJson = newXHR.responseText;
                var obj = JSON.parse(returnedJson);
                var html = '';
                obj.forEach(function (element, key) {
                    css += ".dl-elec-" + element.party_short_name.toLowerCase() + "{background-color: #fff;border-left: 9px solid " + element.party_color_code + ";margin-bottom: 4px;padding: 12px}.dl-elec-" + element.party_short_name.toLowerCase() + " .col-9{border-right: 2px solid #969696;padding:0}.dl-elec-" + element.party_short_name.toLowerCase() + " .col-3{padding: 0;}.dl-elec-" + element.party_short_name.toLowerCase() + " .col-9 h6{margin-bottom: 0;position: absolute;top: 50%;display: block;transform: translateY(-50%);padding: 0;margin: 0;font-size: 18px;color: " + element.party_color_code + "}";

                    html += '\t' + '<div class="row dl-elec-' + element.party_short_name.toLowerCase() + '">' + '\n';
                    html += '\t\t' + '<div class="col-9">' + '\n';
                    html += '\t\t\t' + '<h6>' + element.party_full_name + '</h6>' + '\n';
                    html += '\t\t' + '</div>' + '\n';
                    html += '\t\t' + '<div class="col-3">' + '\n';
                    html += '\t\t\t' + '<div class="text-center"><span>' + element.party_seats + '</span></div>' + '\n';
                    html += '\t\t' + '</div>' + '\n';
                    html += '\t' + '</div>' + '\n';
                });
                sheet.innerHTML = css;
                document.head.appendChild(sheet);
                document.getElementById("DelhiElectionTable").innerHTML = html;
            } else {
                console.log('Error: ' + newXHR.status); // An error occurred during the request.
            }
        }
    }
}
if(document.getElementById("DelhiElectionTable")!=undefined){
    showDelhiElectionTable();
    setInterval(function () {
        showDelhiElectionTable();
    }, 60000); // 60000 is for one min adjust time accordingly
}
function encode(input) {
	var result = "";
	var currentCell;
	var num;
	var factor;
	var str;
	var encodingList = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
	
	for (var i = 0; i < 81; i++) {
		currentCell = cells[i];

		num = 0;
		factor = 1;
		
		
		for (var j = 0; j < 9; j++) {
			num += factor * (currentCell.pencilmarks[j] ? 1 : 0);
			factor *= 2;
		}
		
		num += factor * currentCell.value;
		factor *= 10;
		
		num += factor * (currentCell.isGiven ? 1 : 0);
		factor *= 2;
		
		num += factor * currentCell.getColor();
		factor *= 5;
		
		str = encodingList[num / 3844 | 0];
		str += encodingList[(num / 62 | 0) % 62];
		str += encodingList[num % 62];
		
		while (str.length < 3) { 
			str = "0" + str;
		}
		
		result += str;
	}
	
	result += cells.blankCellColor;
	
	return result;
	
}

function decode(input) {
	var result = "";
	var currentCell;
	var str;
	var num;
	var factor;
	var values = "";
	var decodingList = {"0":0, "1":1, "2":2, "3":3, "4":4, "5":5, "6":6, "7":7, "8":8, "9":9, "A":10, "B":11, "C":12, "D":13, "E":14, "F":15, "G":16, "H":17, "I":18, "J":19, "K":20, "L":21, "M":22, "N":23, "O":24, "P":25, "Q":26, "R":27, "S":28, "T":29, "U":30, "V":31, "W":32, "X":33, "Y":34, "Z":35, "a":36, "b":37, "c":38, "d":39, "e":40, "f":41, "g":42, "h":43, "i":44, "j":45, "k":46, "l":47, "m":48, "n":49, "o":50, "p":51, "q":52, "r":53, "s":54, "t":55, "u":56, "v":57, "w":58, "x":59, "y":60, "z":61};
	var colorsEncoded = true;
	
	input = input.replace(/[^0-9A-Za-z]/g, "")
	
	if (input.length !== 243 && input.length !== 244) {
		alert("Invalid input.");
		return;
	}
	
	colorsEncoded = input.length === 244;
	
	for (var i = 0; i < 81; i++) {
		currentCell = cells[i];
		
		factor = 1;
		
		if (colorsEncoded) {
			num = decodingList[input.charAt(i * 3)] * 3844;
			num += decodingList[input.charAt(i * 3 + 1)] * 62;
			num += decodingList[input.charAt(i * 3 + 2)];
		} else {
			num = parseInt(input.slice(i * 3, i * 3 + 3), 36);
		}
		
		for (var j = 0; j < 9; j++) {
			factor = 2;
			currentCell.pencilmarks[j] = !!(num % factor);
			
			num = (num / factor) | 0;
			
		}
		
		factor = 10;
		currentCell.setValue(num % factor);
		values += num % factor + "";
		num = (num / factor) | 0;
		
		factor = 2;
		currentCell.isGiven = !!(num % factor);
		num = (num / factor) | 0;
		
		factor = 5;
		currentCell.setColor(num % factor);
		num = (num / factor) | 0;
		
		if (currentCell.isGiven) {
			currentCell.element.innerHTML = currentCell.value;
			currentCell.candidatesElement.innerHTML = currentCell.value;
		} else {
			if (currentCell.value) {
				currentCell.element.firstChild.value = currentCell.value;
				currentCell.candidatesElement.innerHTML = currentCell.value;
			} else {
				// Update pencilmarks display.
				currentCell.candidatesElement.innerHTML = currentCell.getPencilmarkString();
				currentCell.element.firstChild.value = "";
			
			}
		}
		
	}
	
	cells.blankCellColor = parseInt(input.charAt(243));
	
	// Highlight selected color link.
	document.getElementById("mark_blank_cells_0").style.backgroundColor = "";
	document.getElementById("mark_blank_cells_" + cells.blankCellColor).style.backgroundColor = "#FF8";
	
	
	var puzzle = new Puzzle(values);

	if (!puzzle.hasSolution()) {
		alert("There is no solution for the inputted values.");
		return;
	}

	document.getElementById("top_bar").style.display = "none";
	document.getElementById("begin_solving").style.display = "none";
	document.getElementById("controls").style.display = "block";
	document.getElementById("grid_table").style.position = "static";
	document.getElementById("grid_table").style.marginTop = "8px";
	document.getElementById("grid_table").style.marginLeft = "8px";
	document.getElementById("side_bar").style.display = "none";
	
	document.getElementById("import_save_button").title = "This option is disabled when a sudoku puzzle is in progress.";
	document.getElementById("import_save_button").disabled = true;
	document.getElementById("paste_puzzle_button").title = "This option is disabled when a sudoku puzzle is in progress.";
	document.getElementById("paste_puzzle_button").disabled = true;
	document.getElementById("load_cookie").title = "This option is disabled when a sudoku puzzle is in progress.";
	document.getElementById("load_cookie").disabled = true;
	
	cells.solution = puzzle.toString();
	for (var i = 0; i < 81; i++) {
		cells[i].solution = parseInt(cells.solution.charAt(i));
	}
	
	showDuplicates();
}

function loadFromCookie() {
	var values = document.cookie.replace(/(?:(?:^|.*;\s*)state\s*\=\s*((?:[^;](?!;))*[^;]?).*)|.*/, '$1');
	
	if (values) {
		decode(values);
	} else {
		alert("No current save exists.");
	}
}

function saveToCookie() {
	var values = document.cookie.replace(/(?:(?:^|.*;\s*)state\s*\=\s*((?:[^;](?!;))*[^;]?).*)|.*/, '$1');
	
	
	if (values) {
		if(!confirm("A save already exists. Are you sure you want to overwrite it?")) {
			return false;
		}		
	}
	
	document.cookie = 'state=' + encode() + '; expires=Fri, 31 Dec 9999 23:59:59 GMT';
	
	if (document.cookie) {
		alert("Save successful.");
	} else {
		alert("Save failed. Make sure cookies are enabled in your browser.");
	}
	
}

Array.prototype.remove = function(val) {
	var length = this.length;
	for (var i = 0; i < length; i++) {
		if (this[i] === val) {
			this.splice(i, 1); // Remove the element
			return true;
		}
	}

	return false;
};

Array.prototype.contains = function(val) {
	var length = this.length;

	for (var i = 0; i < length; i++) {
		if (this[i].constructor.name === "Cell" && this[i].index === val.index) {
			return true;
		} else if (this[i] === val) {
			return true;
		}
	}

	return false;
}


function Puzzle(givens) {
	
	var cells = [];
	var guessCell; // Store guess cell (the cell with the least candidates) after processing in case it changes.
	var guessCellCandidates;
	var solution;

	var Cell = function Cell(index, value) {
		this.neighbors = [];
		this.rowNeighbors = [];
		this.columnNeighbors = [];
		this.blockNeighbors = [];
		this.candidates = [];

		var blocks = [
			0, 0, 0, 1, 1, 1, 2, 2, 2,
			0, 0, 0, 1, 1, 1, 2, 2, 2,
			0, 0, 0, 1, 1, 1, 2, 2, 2,
			3, 3, 3, 4, 4, 4, 5, 5, 5,
			3, 3, 3, 4, 4, 4, 5, 5, 5,
			3, 3, 3, 4, 4, 4, 5, 5, 5,
			6, 6, 6, 7, 7, 7, 8, 8, 8,
			6, 6, 6, 7, 7, 7, 8, 8, 8,
			6, 6, 6, 7, 7, 7, 8, 8, 8
		];

		var blockIndeces = [
			 0,  1,  2,  9, 10, 11, 18, 19, 20,
			 3,  4,  5, 12, 13, 14, 21, 22, 23,
			 6,  7,  8, 15, 16, 17, 24, 25, 26,
			27, 28, 29, 36, 37, 38, 45, 46, 47,
			30, 31, 32, 39, 40, 41, 48, 49, 50,
			33, 34, 35, 42, 43, 44, 51, 52, 53,
			54, 55, 56, 63, 64, 65, 72, 73, 74,
			57, 58, 59, 66, 67, 68, 75, 76, 77,
			60, 61, 62, 69, 70, 71, 78, 79, 80
		];

		var currentCell;
		var row = Math.floor(index / 9);
		var column = index % 9;
		var block = blocks[index];

		this.processed = true;
		this.index = index;
		this.value = value;
		this.color = 0;

		if (value === 0) {
			for (var i = 1; i <= 9; i++) {
				this.candidates.push(i);
			}
		} else {
			this.candidates.push(value);
		}

		// Set neighbors.

		// row
		for (var i = row * 9; (i < (row + 1) * 9) && i < index; i++) {
			currentCell = cells[i];

			this.neighbors.push(currentCell);
			currentCell.neighbors.push(this);

			this.rowNeighbors.push(currentCell);
			currentCell.rowNeighbors.push(this);
		}

		// column
		for (var i = column; i < 81 && i < index; i += 9) {
			currentCell = cells[i];

			if (! this.neighbors.contains(currentCell)) {
				this.neighbors.push(currentCell);
				currentCell.neighbors.push(this);
			}

			this.columnNeighbors.push(currentCell);
			currentCell.columnNeighbors.push(this);
		}

		// block
		for (var i = block * 9; i < (block + 1) * 9; i++) {
			if (blockIndeces[i] < index) {

				currentCell = cells[blockIndeces[i]];

				if (! this.neighbors.contains(currentCell)) {
					this.neighbors.push(currentCell);
					currentCell.neighbors.push(this);
				}

				this.blockNeighbors.push(currentCell);
				currentCell.blockNeighbors.push(this);
			}
		}

		this.setValue = function(value) {
			this.value = value;

			if (value === 0) {
				this.candidates = [1, 2, 3, 4, 5, 6, 7, 8, 9];
			} else {
				this.candidates = [value];
			}
		}

		this.toString = function toString() {
			return this.value + "";
		};
	};

	// Initialize cells.
	for (var i = 0; i < 81; i++) {
		cells[i] = new Cell(i, 0);
	}

	var processSingles = function() {
		var currentCell;
		var result = false;

		for (var i = 0; i < 81; i++) {
			currentCell = cells[i];

			if (currentCell.candidates.length === 1 && !currentCell.processed) {
				result = true;

				currentCell.value = currentCell.candidates[0];
				currentCell.processed = true;

				for (var v = 0; v < currentCell.neighbors.length; v++) {


					if (currentCell.neighbors[v].candidates.remove(currentCell.value)) {
						currentCell.neighbors[v].processed = false;
					}
				}
			}
		}

		return result;
	};

	var processHiddenSingles = function() {
		var currentCell;
		var uniqueCandidates = [];
		var result = false;

		for (var i = 0; i < 81; i++) {
			currentCell = cells[i];

			if (currentCell.value !== 0) {
				continue;
			}

			uniqueCandidates.length = 0;

			// row
			uniqueCandidates = uniqueCandidates.concat(currentCell.candidates);

			for (var v = 0; v < currentCell.rowNeighbors.length; v++) {
				for (var u = 0; u < currentCell.rowNeighbors[v].candidates.length; u++) {
					uniqueCandidates.remove(currentCell.rowNeighbors[v].candidates[u]);
				}
			}

			if (uniqueCandidates.length === 1) {
				currentCell.value = uniqueCandidates[0];
				currentCell.candidates.length = 0;
				currentCell.candidates.push(currentCell.value);
				currentCell.processed = true;

				for (var v = 0; v < currentCell.neighbors.length; v++) {
					if (currentCell.neighbors[v].candidates.remove(currentCell.value)) {
						currentCell.neighbors[v].processed = false;
					}
				}

				result = true;
				continue;
			}

			uniqueCandidates.length = 0;

			// column
			uniqueCandidates = uniqueCandidates.concat(currentCell.candidates);

			for (var v = 0; v < currentCell.columnNeighbors.length; v++) {
				for (var u = 0; u < currentCell.columnNeighbors[v].candidates.length; u++) {
					uniqueCandidates.remove(currentCell.columnNeighbors[v].candidates[u]);
				}
			}

			if (uniqueCandidates.length === 1) {
				currentCell.value = uniqueCandidates[0];
				currentCell.candidates.length = 0;
				currentCell.candidates.push(currentCell.value);
				currentCell.processed = true;

				for (var v = 0; v < currentCell.neighbors.length; v++) {
					if (currentCell.neighbors[v].candidates.remove(currentCell.value)) {
						currentCell.neighbors[v].processed = false;
					}
				}

				result = true;
				continue;
			}

			uniqueCandidates.length = 0;

			// block
			uniqueCandidates = uniqueCandidates.concat(currentCell.candidates);

			for (var v = 0; v < currentCell.blockNeighbors.length; v++) {
				for (var u = 0; u < currentCell.blockNeighbors[v].candidates.length; u++) {
					uniqueCandidates.remove(currentCell.blockNeighbors[v].candidates[u]);
				}
			}

			if (uniqueCandidates.length === 1) {
				currentCell.value = uniqueCandidates[0];
				currentCell.candidates.length = 0;
				currentCell.candidates.push(currentCell.value);
				currentCell.processed = true;

				for (var v = 0; v < currentCell.neighbors.length; v++) {
					if (currentCell.neighbors[v].candidates.remove(currentCell.value)) {
						currentCell.neighbors[v].processed = false;
					}
				}

				result = true;
				continue;
			}
		}

		return result;
	};

	var intersectionRemoval = function() {
		var currentCell;
		var uniqueCandidates = [];
		var intersection = [];
		var result = false;
		var size;

		for (var i = 0; i < 81; i += 3) {
			currentCell = cells[i];

			if (currentCell.candidates.length <= 1) {
				continue;
			}

			intersection.length = 0;
			uniqueCandidates.length = 0;

			for (var v = 0; v < currentCell.blockNeighbors.length; v++) {
				if (currentCell.blockNeighbors[v].value === 0 && currentCell.rowNeighbors.contains(currentCell.blockNeighbors[v])) {
					intersection.push(currentCell.blockNeighbors[v]);
				}
			}

			if (intersection.length <= 1) {
				continue;
			}

			for (var v = 0; v < intersection.length; v++) {
				for (var u = 0; u < intersection[v].candidates.length; u++) {
					if (!uniqueCandidates.contains(intersection[v].candidates[u])) {
						uniqueCandidates.push(intersection[v].candidates[u]);
					}
				}
			}

			if (uniqueCandidates.length === 0) {
				continue;
			}

			for (var v = 0; v < currentCell.rowNeighbors.length; v++) {
				if (! intersection.contains(currentCell.rowNeighbors[v])) {
					for (var u = 0; u < currentCell.rowNeighbors[v].candidates.length; u++) {
						uniqueCandidates.remove(currentCell.rowNeighbors[v].candidates[u]);
					}
				}
			}

			if (uniqueCandidates.length > 0 && intersection.length >= uniqueCandidates.length) {

				for (var v = 0; v < currentCell.blockNeighbors.length; v++) {

					if (currentCell.blockNeighbors[v].value === 0 && ! intersection.contains(currentCell.blockNeighbors[v])) {
						size = currentCell.blockNeighbors[v].candidates.length;

						for (var u = 0; u < uniqueCandidates.length; u++) {
							currentCell.blockNeighbors[v].candidates.remove(uniqueCandidates[u]);
						}

						if (currentCell.blockNeighbors[v].candidates.length != size) {
							currentCell.blockNeighbors[v].processed = false;
							result = true;
						}
					}
				}
			}

			uniqueCandidates.length = 0;

			for (var v = 0; v < intersection.length; v++) {
				if (intersection[v].value === 0) {

					for (var u = 0; u < intersection[v].candidates.length; u++) {
						if (!uniqueCandidates.contains(intersection[v].candidates[u])) {
							uniqueCandidates.push(intersection[v].candidates[u]);
						}
					}
				}
			}

			if (uniqueCandidates.length === 0) {
				continue;
			}

			for (var v = 0; v < currentCell.blockNeighbors.length; v++) {
				if (!intersection.contains(currentCell.blockNeighbors[v])) {
					for (var u = 0; u < currentCell.blockNeighbors[v].candidates.length; u++) {
						uniqueCandidates.remove(currentCell.blockNeighbors[v].candidates[u]);
					}
				}
			}

			if (uniqueCandidates.length > 0 && intersection.length >= uniqueCandidates.length) {
				for (var v = 0; v < currentCell.rowNeighbors.length; v++) {
					if (currentCell.rowNeighbors[v].value === 0 && !intersection.contains(currentCell.rowNeighbors[v])) {
						size = currentCell.rowNeighbors[v].candidates.length;

						for (var u = 0; u < uniqueCandidates.length; u++) {
							currentCell.rowNeighbors[v].candidates.remove(uniqueCandidates[u]);
						}

						if (currentCell.rowNeighbors[v].candidates.length != size) {
							currentCell.rowNeighbors[v].processed = false;
							result = true;
						}
					}
				}
			}
		}

		for (var i = 0; i < 81; i = i % 9 === 8 ? i + 18 : i + 1) {
			currentCell = cells[i];

			if (currentCell.candidates.length <= 1) {
				continue;
			}

			intersection.length = 0;

			for (var v = 0; v < currentCell.blockNeighbors.length; v++) {
				if (currentCell.blockNeighbors[v].value === 0 && currentCell.columnNeighbors.contains(currentCell.blockNeighbors[v])) {
					intersection.push(currentCell.blockNeighbors[v]);
				}
			}

			if (intersection.length <= 1) {
				continue;
			}


			for (var v = 0; v < intersection.length; v++) {
				for (var u = 0; u < intersection[v].candidates.length; u++) {
					if (!uniqueCandidates.contains(intersection[v].candidates[u])) {
						uniqueCandidates.push(intersection[v].candidates[u]);
					}
				}
			}

			if (uniqueCandidates.length === 0) {
				continue;
			}

			for (var v = 0; v < currentCell.columnNeighbors.length; v++) {
				if (! intersection.contains(currentCell.columnNeighbors[v])) {
					for (var u = 0; u < currentCell.columnNeighbors[v].candidates.length; u++) {
						uniqueCandidates.remove(currentCell.columnNeighbors[v].candidates[u]);
					}
				}
			}

			if (uniqueCandidates.length > 0 && intersection.length >= uniqueCandidates.length) {
				for (var v = 0; v < currentCell.blockNeighbors.length; v++) {
					if (currentCell.blockNeighbors[v].value === 0 && !intersection.contains(currentCell.blockNeighbors[v])) {
						size = currentCell.blockNeighbors[v].candidates.length;

						for (var u = 0; u < uniqueCandidates.length; u++) {
							currentCell.blockNeighbors[v].candidates.remove(uniqueCandidates[u]);
						}

						if (currentCell.blockNeighbors[v].candidates.length != size) {
							currentCell.blockNeighbors[v].processed = false;
							result = true;
						}
					}
				}
			}

			uniqueCandidates.length = 0;

			for (var v = 0; v < intersection.length; v++) {
				if (intersection[v].value === 0) {
					for (var u = 0; u < intersection[v].candidates.length; u++) {
						if (!uniqueCandidates.contains(intersection[v].candidates[u])) {
							uniqueCandidates.push(intersection[v].candidates[u]);
						}
					}
				}
			}

			if (uniqueCandidates.length === 0) {
				continue;
			}

			for (var v = 0; v < currentCell.blockNeighbors.length; v++) {
				if (! intersection.contains(currentCell.blockNeighbors[v])) {
					for (var u = 0; u < currentCell.blockNeighbors[v].candidates.length; u++) {
						uniqueCandidates.remove(currentCell.blockNeighbors[v].candidates[u]);
					}
				}
			}

			if (uniqueCandidates.length > 0 && intersection.length >= uniqueCandidates.length) {
				for (var v = 0; v < currentCell.columnNeighbors.length; v++) {
					if (currentCell.columnNeighbors[v].value === 0 && ! intersection.contains(currentCell.columnNeighbors[v])) {
						size = currentCell.columnNeighbors[v].candidates.length;

						for (var u = 0; u < uniqueCandidates.length; u++) {
							currentCell.columnNeighbors[v].candidates.remove(uniqueCandidates[u]);
						}

						if (currentCell.columnNeighbors[v].candidates.length != size) {
							currentCell.columnNeighbors[v].processed = false;
							result = true;
						}
					}
				}
			}
		}

		return result;
	};

	// Perform function of grid.
	// Reset cells to values.
	// Process singles, hidden singles.
	// Set guessCell to the index of the cell with the least number of candidates; set guessCellCandidates.
	// Return each cell's value concatenated in a string.
	var process = function(values) {
		var currentCell;

		for (var i = 0; i < 81; i++) {
			cells[i].setValue(0);
		}

		for (var i = 0; i < 81; i++) {
			value = parseInt(values[i]);

			currentCell = cells[i];

			if (value !== 0) {
				currentCell.setValue(value);
				currentCell.processed = true;

				for (var v = 0; v < currentCell.neighbors.length; v++) {

					if (currentCell.neighbors[v].candidates.remove(value)) {
						currentCell.neighbors[v].processed = false;
					}
				}
			} else {
				currentCell.processed = false;
			}
		}

		while (processSingles() || processHiddenSingles() || intersectionRemoval()) {}

		guessCell = cells[0];

		for (var i = 1; i < 81; i++) {
			if (guessCell.value !== 0) {
				guessCell = cells[i];
			} else {
				currentCell = cells[i];
				
				// Choose the cell with the least candidates:
				// if (currentCell.value === 0 && currentCell.candidates.length < guessCell.candidates.length) {
					// guessCell = currentCell;
				// }
				
				// Choose the first empty cell.
				break;
			}
		}

		guessCellCandidates = guessCell.candidates;

		var result = "";

		for (var i = 0; i < 81; i++) {

			result += cells[i].value;
		}

		return result;
	};

	var isValid = function(values) {
		var currentCell;

		for (var i = 0; i < 81; i++) {
			currentCell = cells[i];

			if (values[i] !== "0") {

				for (var v = 0; v < currentCell.neighbors.length; v++) {
					if (values[currentCell.neighbors[v].index] === values[i]) {
						return false;
					}
				}
			}
		}

		return true;
	};

	var isFilled = function(values) {
		 return values.indexOf("0") === -1;
	};

	this.hasSolution = function() {
		return isFilled(solution) && isValid(solution);
	};

	this.toString = function() {
		return solution;
	};

	
	var solve = function solve(givens) {
		var stack = [];
		var values;
		var length;

		stack.push(givens);

		while(stack.length > 0) {
			values = stack.pop();
			values = process(values);

			if (isFilled(values)) {
				return values;
			}

			if (isValid(values)) {
				length = guessCellCandidates.length;

				for (var i = length - 1; i >= 0; i--) {
					stack.push(values.substr(0, guessCell.index) + guessCellCandidates[i] + values.substr(guessCell.index + 1));
				}
			}
		}

		return givens;
	};

	solution = solve(givens);
}

var cells = [];
var gameLevel;
var stop_click = true;
var highlightStatus = false;
var highlightValue = 0;
var selectedDate;
var sudoku_json;
var sudoku_level = [];
var today;

$("#get_auto").click(function(){
  clearPencilmarks();
  updatePencilmarks();
});
$(document).ready( function() {
    var currentDate = new Date();

    var day = ("0" + currentDate.getDate()).slice(-2);
    var month = ("0" + (currentDate.getMonth() + 1)).slice(-2);
    var today ;
    var cookieData = sessionStorage.getItem('date');
    if(!cookieData){
        today = currentDate.getFullYear()+"-"+(month)+"-"+(day) ;
    }else{
        today = cookieData;
    }
   $('#dateapicker').val(today);
});
function inputOnKeyDown(e) {
	var code = e.keyCode;
	var pos;

	switch (code) {
		case 9: // tab
		case 27: // escape
		case 33: // page up
		case 34: // page down
		return true;
		break;

		case 37: // left
		pos = this.index;

		do {
			if (pos === 0) {
				pos = 80;
			} else {
				pos--;
			}
		} while (cells[pos].isGiven);

		document.getElementById("cell" + pos + "_input").focus();
		break;

		case 38: // up
		pos = this.index;

		do {
			if (pos < 9) {
				pos += 72;
			} else {
				pos -= 9;
			}
		} while (cells[pos].isGiven);

		document.getElementById("cell" + pos + "_input").focus();
		break;

		case 39: // right
		pos = this.index;

		do {
			if (pos === 80) {
				pos = 0;
			} else {
				pos++;
			}
		} while (cells[pos].isGiven);

		document.getElementById("cell" + pos + "_input").focus();
		break;

		case 13: // enter
		case 40: // down
		pos = this.index;

		do {
			if (pos > 71) {
				pos -= 72;
			} else {
				pos += 9;
			}
		} while (cells[pos].isGiven);

		document.getElementById("cell" + pos + "_input").focus();
		break;

		// 65-90 a-z
		// 48-57 0-9
		// 97-105 numpad 0-9

		default:

			// function keys
			if (code >= 112 && code <= 123) {
				return true;
			} else if (document.getElementById("write_mode_values").checked) {
				$(this).removeClass('edited_pencils');

				// backspace || delete
				if (code === 8 || code === 46) {
					var currentCell = cells[this.index];

                    this.value = "";
					currentCell.setValue(0);
					// currentCell.candidatesElement.innerHTML = currentCell.getPencilmarkString();
					showDuplicates();
					currentCell.candidatesElement.classList.remove("candidates_highlighted");
                    currentCell.element.classList.remove("cell_highlighted");
                    $("#cell" + currentCell.index + "_input").removeClass('hideCandidate');
                    // Before givens are submitted, automatically update pencilmarks.
					if (!cells.hasOwnProperty("solution")) {
						updatePencilmarks();
                    }
				}

				// 0-9 || numpad 0-9
				else if ((code > 48 && code <= 57) || (code > 96 && code <= 105)) {
					var digit = code - 48;

					if (digit > 9) digit = code - 96; // Fix offset for numpad.

					this.value = digit;
					var currentCell = cells[this.index];
					currentCell.setValue(digit);
					if ((highlightValue===digit) && (highlightStatus==true)){
                        currentCell.candidatesElement.classList.add("candidates_highlighted");
                        currentCell.element.classList.add("cell_highlighted");
                    }
					showDuplicates();
                    $("#cell" + currentCell.index + "_input").addClass('hideCandidate');
					// Before givens are submitted, automatically update pencilmarks.
					if (!cells.hasOwnProperty("solution")) {
						updatePencilmarks();
					} else if (document.getElementById("auto_pencilmarks").checked) {
						for (var i = 0; i < 20; i++) {
							if (currentCell.neighbors[i].value === 0) {
								currentCell.neighbors[i].pencilmarks[currentCell.value - 1] = false;
								currentCell.neighbors[i].candidatesElement.innerHTML = currentCell.neighbors[i].getPencilmarkString();
							}
						}
					}
					// currentCell.candidatesElement.innerHTML = currentCell.value;
				}
			} else {
			        if (code === 8 || code === 46) {
                        var currentCell = cells[this.index];

                        this.value = "";
                        currentCell.setValue(0);
                        // currentCell.candidatesElement.innerHTML = currentCell.getPencilmarkString();
                        showDuplicates();
                        currentCell.candidatesElement.classList.remove("candidates_highlighted");
                        currentCell.element.classList.remove("cell_highlighted");
                        // Before givens are submitted, automatically update pencilmarks.
                        if (!cells.hasOwnProperty("solution")) {
                            updatePencilmarks();
                        }
                    }

				// Pencil marks: 0-9 || numpad 0-9
				if ((code > 48 && code <= 57) || (code > 96 && code <= 105)) {
					var digit = code - 48;

					if (digit > 9) digit = code - 96; // Fix offset for numpad.

					var currentCell = cells[this.index];
					target = 'cell'+this.index+'_input'

					if (currentCell.value === 0) {
						currentCell.pencilmarks[digit - 1] = !currentCell.pencilmarks[digit - 1];

						// currentCell.candidatesElement.innerHTML = currentCell.getPencilmarkString();
						arr1 = currentCell.getPencilmarkString().split('');
						arr2 = ['1','2','3','4','5','6','7','8','9']
						$('#'+target).parent().children(".small_sudoku").show().addClass(target);
                        $('#' + target).addClass('edited_pencils');


						$('.'+target+' '+'.candidates_sudoku td').each( function(){
							this.textContent = "";
						});
                        var z = '';
						if (!$('#'+target).parent().children(".small_sudoku").hasClass("assist")){
							var z = $.grep(arr2, function(el){return $.inArray(el, arr1) == -1});

							$.each(z, function( index, value ) {
								$('.'+target).find('#'+value).append(value)
							});
						}
						else{
							$.each(arr1, function( index, value ) {
								$('.'+target).find('#'+value).append(value);
							});
						}
					}
				}
			}
			break;
		}

		return false;
	}

	function inputOnFocus() {
		cells.lastSelectedCell = this.index;
	}

	function updatePencilmarks() {
		var currentCell;
		for (var i = 0; i < 81; i++) {
			currentCell = cells[i];

			if (currentCell.value === 0) {
				currentCell.pencilmarks = [true, true, true, true, true, true, true, true, true];

				for (var k = 0; k < 20; k++) {
					currentCell.pencilmarks[currentCell.neighbors[k].value - 1] = false;
				}

			} else {
				currentCell.pencilmarks = [false, false, false, false, false, false, false, false, false];
				currentCell.pencilmarks[currentCell.value - 1] = true;
			}
			// currentCell.candidatesElement.innerHTML = currentCell.pencilmarks.map(function(value, index){if(value)return index + 1;}).join("");
			contenders = currentCell.pencilmarks.map(function(value, index){if(value)return index + 1;}).join("");
			if (currentCell.candidatesElement.innerHTML.includes('table')){
				target = 'cell'+i+'_input'
				$('#'+target).parent().children(".small_sudoku").show().addClass(target);
				$('#'+target).parent().children(".small_sudoku").show().addClass('assist');
				$('#'+target).addClass('edited_pencils');
				z = contenders.split('')
				$.each(z, function( index, value ) {
					$('.'+target).find('#'+value).append(value)
				});
			}
		}
		if(stop_click){
			document.getElementById("get_auto").disabled=false;
			stop_click = false;
		}
		else{
			document.getElementById("get_auto").disabled=true;
		}
		
	}

	function clearPencilmarks() {
		document.getElementById("get_auto").disabled=false;
		var currentCell;

		for (var i = 0; i < 81; i++) {
			currentCell = cells[i];
			currentCell.pencilmarks = [true, true, true, true, true, true, true, true, true];
			if (currentCell.value === 0) {
				// currentCell.candidatesElement.innerHTML = "123456789";
				currentCell.candidatesElement.innerHTML = "";

			} else {
				currentCell.candidatesElement.innerHTML = currentCell.value + "";
			}
			target = 'cell'+i+'_input'
            $('#'+target).parent().children(".small_sudoku").show().removeClass(target);
            $('#'+target).parent().children(".small_sudoku").show().removeClass('assist');
            $('#'+target).removeClass('edited_pencils');
		}
		pencilMarkTable();
	}

	function showDuplicates() {
		var currentCell;

		if (document.getElementById("show_duplicates").checked) {

			for (var i = 0; i < 81; i++) {
				currentCell = cells[i];
				currentCell.element.classList.remove("cell_duplicate");

				if (currentCell.value !== 0) {
					for (var k = 0; k < 20; k++) {
						if (currentCell.value === currentCell.neighbors[k].value) {
							currentCell.element.classList.add("cell_duplicate");
						}
					}

				}
			}
		} else {
			for (var i = 0; i < 81; i++) {
				cells[i].element.classList.remove("cell_duplicate");
			}
		}
	}

	function clearCells() {
		if (!window.confirm("Are you sure you want to clear this sudoku puzzle?")) return;
		window.location.reload();
	}

	// function removePencilmarks(){
	// 	$('.write_mode_values').hide('')
	// }

function todayDate() {
		var today = new Date(document.getElementById("dateapicker").value);
		var dd = today.getDate();
		var mm = today.getMonth()+1; //January is 0!

		var yyyy = today.getFullYear();
		if(dd<10){
			dd='0'+dd;
        }
		if(mm<10){
			mm='0'+mm;
        }
		var today = dd+'/'+mm+'/'+yyyy;
		return today
	}

function todayDateToAjax() {
    var today = new Date(document.getElementById("dateapicker").value);
    var dd = today.getDate();
    var mm = today.getMonth() + 1; //January is 0!

    var yyyy = today.getFullYear();
    if (dd < 10) {
        dd = '0' + dd;
    }
    if (mm < 10) {
        mm = '0' + mm;
    }
    var today = dd + '-' + mm + '-' + yyyy;
    return today;
}

function getSudokuDataFromAjax() {
        $.ajax({
            async: false,
            url: '/sudoku/data',
            method: 'post',
            dataType: 'json',
            data: JSON.stringify({"sudokuDate": todayDateToAjax()}),
            contentType: 'application/json',
            success: function (data) {
                sudoku_json = data;
            },
            error: function (ex) {
            }
        });
    var dummy_sudoku_level = ["easy", "medium", "hard", "diabolical"];
    if (typeof sudoku_json !== 'undefined') {
        today = todayDate();
        sudoku_json[today].forEach(function (ele, index) {
            sudoku_level.push(Object.keys(ele)[0])
        });
        for (i = 0; i < dummy_sudoku_level.length; i++) {
            if (sudoku_level.includes(dummy_sudoku_level[i])) {
                $('#paste_puzzle_button_' + dummy_sudoku_level[i]).show();
                if (dummy_sudoku_level[i] === "easy") {
                    $("#first_span").show();
                }
                if (dummy_sudoku_level[i] === "diabolical") {
                    $("#third_span").show();
                }
                if (dummy_sudoku_level[i] === "hard") {
                    $("#second_span").show();
                }
            }
        }
    } else {
        for (i = 0; i < dummy_sudoku_level.length; i++) {
            $('#paste_puzzle_button_' + dummy_sudoku_level[i]).show();
        }
        $("#first_span, #third_span, #second_span").show();
    }

}
	function generateSudoku(level){
		var array_keys = new Array();
		var array_values = new Array();
        getSudokuDataFromAjax();
        today = todayDate();
		if (level == 'easy') {
			generateBoard = mySudokuJS.generateBoard('easy');
			getBoard = mySudokuJS.getBoard('easy')
		} else if (level == 'medium') {
			generateBoard = mySudokuJS.generateBoard('medium');
			getBoard = mySudokuJS.getBoard('medium')
		} else if (level == 'hard'){
			generateBoard = mySudokuJS.generateBoard('hard');
			getBoard = mySudokuJS.getBoard('hard')
		} else if (level == 'diabolical'){
            generateBoard = mySudokuJS.generateBoard('diabolical');
            getBoard = mySudokuJS.getBoard('diabolical')
        }else{
			generateBoard = mySudokuJS.generateBoard('easy');
			getBoard = mySudokuJS.getBoard('easy')
		}

		for (var key in getBoard)
		{
			array_keys.push(key);
			array_values.push(getBoard[key].val);
		}

		if (array_values.length == 83){
			array_values.splice(81, 2)
		}

		for (var j = 0; j < array_values.length; j++) {
			if (array_values[j] == null) {
				array_values[j] = 0;
			}
		}
		array_values.toString()
		sudoku_string = array_values.toString().replace( /,/g, "" );

        if (typeof sudoku_json === "undefined") {
            $('#copyright_sudoku').hide();
			return(sudoku_string);
		}
		else{
            today = todayDate();
            sudoku_json[today].forEach(function (ele, index) {
                if (ele.easy && level == 'easy') {
                    sudoku_string = ele.easy.toString()
                }
                else if (ele.medium && level == 'medium') {
                    sudoku_string = ele.medium.toString()
                }
                else if (ele.hard && level == 'hard') {
                    sudoku_string = ele.hard.toString()
                }
                else if (ele.diabolical && level == 'diabolical') {
                    sudoku_string = ele.diabolical.toString()
                }
            });
		}
		return(sudoku_string);
	}
	function pastePuzzle(level) {
		var values = generateSudoku(level)
		gameLevel = level;
        leaderBoard();

	// var values = window.prompt("Enter a sudoku puzzle. Use \"0\", \".\", \"*\", or \"_\" for empty cells.\nAll other characters are ignored.\nAlternatively, load a previously saved puzzle.");
	// var values = document.getElementById("paste_puzzle").value;

	values = values.replace(/[.*_]/g, "0");
	values = values.replace(/[^0-9]/g, "");

	if (values.length !== 81) {
		window.alert("Invalid input");
		return;
	}


	for (var i = 0; i < 81; i++) {
		var currentCell = cells[i];

		if (currentCell.element.children.length > 0) {
			currentCell.setValue(parseInt(values.charAt(i)));

			if (currentCell.value !== 0) {
				currentCell.element.firstChild.value = currentCell.value;
			} else {
				currentCell.element.firstChild.value = "";
			}
		}
	}

	clearPencilmarks();
	highlight(0);
	//showDuplicates();
}

function savePuzzle() {
	window.prompt("Copy the text string below and paste it into a new text file.\nTo re-load the puzzle, paste the string into the paste puzzle tool.", encode());

}

function saveLoadPuzzle() {
	document.getElementById("side_bar").style.display="block";

	document.getElementById("copy_puzzle").value = cells.toString().replace(/[^0-9]/g, "");
	document.getElementById("export_save").value = encode();
}

function highlight(value) {
	if (value === 0) {
    		highlightStatus = false;
    		highlightValue = 0;
    		$('.highlight_button').removeClass('number_highlighted');
    		for (var i = 0; i < 81; i++) {
    			cells[i].element.classList.remove("cell_highlighted");
    			cells[i].candidatesElement.classList.remove("candidates_highlighted");
    		}
    } else {
    		highlight(0);
    		highlightStatus = true;
    		highlightValue = value;
    		for (var i = 0; i < 81; i++) {
    			var currentCell = cells[i];
    			if (currentCell.value !== 0 || !currentCell.pencilmarks[value - 1]) {
    				if (currentCell.value == value){
    					currentCell.candidatesElement.classList.add("candidates_highlighted");
    					currentCell.element.classList.add("cell_highlighted");
    				}
    			} else {
    				currentCell.candidatesElement.classList.remove("candidates_highlighted");
    				currentCell.element.classList.remove("cell_highlighted");
    			}

    	    }

    	    for (var i = 1; i < 10; i++) {
                $('.highlight_button').removeClass('number_highlighted');
                if (value == i) {
                    $('.number_highlight' + value).addClass('number_highlighted');
                    break;
                }
            }
	}
}

function submitGivens() {
	var currentCell;
	var values = "";

	for (var i = 0; i < 81; i++) {
		currentCell = cells[i];

		values += currentCell.value;

	}

	if ((values.match(new RegExp("0", "g")) || []).length == 81){
		// return( alert ('please select a level'));
	}
	var puzzle = new Puzzle(values);

	if (!puzzle.hasSolution()) {
		alert("There is no solution for the inputted values.");
	} else {

		// document.getElementById("top_bar").style.display = "none";
		// document.getElementById("begin_solving").style.display = "none";
		// document.getElementById("controls").style.display = "block";
		document.getElementById("grid_table").style.display = "block";
		// document.getElementById("grid_table").style.position = "static";
        document.getElementById("grid_table").style.marginTop = "25px";
		// document.getElementById("side_bar").style.display = "none";

		// document.getElementById("import_save_button").title = "This option is disabled when a sudoku puzzle is in progress.";
		// document.getElementById("import_save_button").disabled = true;
		// document.getElementById("paste_puzzle_button_easy").title = "This option is disabled when a sudoku puzzle is in progress.";
		// document.getElementById("paste_puzzle_button_medium").title = "This option is disabled when a sudoku puzzle is in progress.";
		// document.getElementById("paste_puzzle_button_hard").title = "This option is disabled when a sudoku puzzle is in progress.";
		document.getElementById("paste_puzzle_button_easy").disabled = false;
		document.getElementById("paste_puzzle_button_medium").disabled = false;
		document.getElementById("paste_puzzle_button_hard").disabled = false;
		document.getElementById("paste_puzzle_button_diabolical").disabled = false;
		// document.getElementById("load_cookie").title = "This option is disabled when a sudoku puzzle is in progress.";
		// document.getElementById("load_cookie").disabled = true;

		cells.solution = puzzle.toString();
		for (var i = 0; i < 81; i++) {
			currentCell = cells[i];

			if (currentCell.value !== 0) {
				currentCell.element.innerHTML = currentCell.value;
				currentCell.isGiven = true;
			} else {
				currentCell.element.classList.add("blank_cell_highlight_black");
			}

			currentCell.solution = parseInt(cells.solution[i]);
		}
	}
}

function showSolution() {
	var currentElement;
	var row;
	var solution = "";

	if (cells.solution === undefined || !window.confirm("Are you sure you want to show the solution?")) {
		return;
	}


	for (var i = 0; i < 9; i++) {
		row = i * 9;
		solution += cells.solution.charAt(row) + " " + cells.solution.charAt(row + 1) + " " + cells.solution.charAt(row + 2) + " | ";
		solution += cells.solution.charAt(row + 3) + " " + cells.solution.charAt(row + 4) + " " + cells.solution.charAt(row + 5) + " | ";
		solution += cells.solution.charAt(row + 6) + " " + cells.solution.charAt(row + 7) + " " + cells.solution.charAt(row + 8) + "<br />";

		if (i == 2 || i == 5) {
			solution += "------+-------+------<br />";
		}
	}

	if (window.solutionWindow) {
		window.solutionWindow.close();
	}

	window.solutionWindow = window.open("", "", "height=230,width=208,status=0,menubar=0");

    currentElement = window.solutionWindow.document.head.appendChild(document.createElement("title"));
	currentElement.textContent = "Solution";


    currentElement = window.solutionWindow.document.body.appendChild(document.createElement("div"));

    currentElement.innerHTML = solution;
	currentElement.style.fontFamily = "Consolas, Courier New, monospace";
	currentElement.style.fontColor = "#666";
	currentElement.style.fontSize = "15px";

    window.onunload = function () {
		window.solutionWindow.close();
	};


    // if (document.getElementById("show_solution").checked) {
		// if (!window.confirm("Are you sure you want to show the solution?")) {
			// document.getElementById("show_solution").checked = false;
			// return;
		// }

		// for (var i = 0; i < 81; i++) {
			// currentCell = cells[i];

			// if (currentCell.element.children.length > 0) {
				// currentCell.element.firstChild.value = currentCell.solution;
				// currentCell.element.firstChild.disabled = true;
			// }


		// }
	// } else {
		// for (var i = 0; i < 81; i++) {
			// currentCell = cells[i];

			// if (currentCell.element.children.length > 0) {
				// currentCell.element.firstChild.disabled = false;

				// currentCell.element.firstChild.value = currentCell.value === 0 ? "" : currentCell.value;
			// }
		// }
	// }
}

function getHint() {
	if (cells.lastSelectedCell === null) {
		return;
	}

	var currentCell = cells[cells.lastSelectedCell];

	if (cells.hints > 0 && currentCell.element.children.length > 0) {
		currentCell.value = currentCell.solution;
		currentCell.candidatesElement.innerHTML = currentCell.value + "";
		currentCell.setValue(currentCell.value);
		currentCell.element.innerHTML = currentCell.value;
		currentCell.element.classList.add("cell_hint");
		showDuplicates();

		cells.hints--;
		document.getElementById("get_hint").value = "Hint (" + cells.hints + ")";

		if (cells.hints === 2) {
			document.getElementById("get_hint").title = "Give a hint for the selected cell. There are two hints remaining.";
		} else if (cells.hints === 1) {
			document.getElementById("get_hint").title = "Give a hint for the selected cell. There is one hint remaining.";

		} else if (cells.hints <= 0) {
			document.getElementById("get_hint").disabled = true;
			document.getElementById("get_hint").title = "There are no more hints remaining.";
		}

	}
}

function setBlankCells(color) {
	var currentCell;

	for (var i = 0; i < 81; i++) {
		currentCell = cells[i];

		if (currentCell.value === 0) {
			currentCell.setColor(color);

        }

    }

    // Highlight selected link.
	document.getElementById("mark_blank_cells_" + cells.blankCellColor).style.backgroundColor = "";
	document.getElementById("mark_blank_cells_" + color).style.backgroundColor = "#FF8";

    cells.blankCellColor = color;
}

function deleteColoredCells(color) {
	var colorValueList = ["black", "blue", "red", "green", "purple"];

    if (!confirm("Are you sure you want to delete all cells marked " + colorValueList[color] + "?")) {
		return;
	}

	var currentCell;

	for (var i = 0; i < 81; i++) {
		currentCell = cells[i];

		if (currentCell.value !== 0 && currentCell.getColor() === color) {
			currentCell.element.firstChild.value = "";
			currentCell.setValue(0);
			currentCell.candidatesElement.innerHTML = currentCell.getPencilmarkString();

			currentCell.setColor(cells.blankCellColor);
		}
	}

	showDuplicates();
}

// window.onload = function() {
	function loadSudoku() {
	// window.location = "http://www.intrepidcoder.com/projects/sudoku/";

        var Cell = function (index) {
		this.index = index;
		this.value = 0;
		this.element = undefined;
		this.candidatesElement = undefined;

		this.neighbors = [];
		this.rowNeighbors = [];
		this.columnNeighbors = [];
		this.blockNeighbors = [];
		this.candidates = [];
		this.pencilmarks = [true, true, true, true, true, true, true, true, true];
		this.isGiven = false;
		var color = 0;

		var blocks = [
		0, 0, 0, 1, 1, 1, 2, 2, 2,
		0, 0, 0, 1, 1, 1, 2, 2, 2,
		0, 0, 0, 1, 1, 1, 2, 2, 2,
		3, 3, 3, 4, 4, 4, 5, 5, 5,
		3, 3, 3, 4, 4, 4, 5, 5, 5,
		3, 3, 3, 4, 4, 4, 5, 5, 5,
		6, 6, 6, 7, 7, 7, 8, 8, 8,
		6, 6, 6, 7, 7, 7, 8, 8, 8,
		6, 6, 6, 7, 7, 7, 8, 8, 8
		];

		var blockIndeces = [0, 1, 2, 9, 10, 11, 18, 19, 20, 3, 4, 5, 12, 13, 14, 21, 22, 23, 6, 7, 8, 15, 16, 17, 24, 25, 26, 27, 28, 29, 36, 37, 38, 45, 46, 47, 30, 31, 32, 39, 40, 41, 48, 49, 50, 33, 34, 35, 42, 43, 44, 51, 52, 53, 54, 55, 56, 63, 64, 65, 72, 73, 74, 57, 58, 59, 66, 67, 68, 75, 76, 77, 60, 61, 62, 69, 70, 71, 78, 79, 80];

		var currentCell;
		var row = Math.floor(index / 9);
		var column = index % 9;
		var block = blocks[index];


		// Set neighbors.

		// row
		for (var i = row * 9; (i < (row + 1) * 9) && i < index; i++) {
			currentCell = cells[i];

			this.neighbors.push(currentCell);
			currentCell.neighbors.push(this);

			this.rowNeighbors.push(currentCell);
			currentCell.rowNeighbors.push(this);
		}

		// column
		for (var i = column; i < 81 && i < index; i += 9) {
			currentCell = cells[i];

			if (! this.neighbors.contains(currentCell)) {
				this.neighbors.push(currentCell);
				currentCell.neighbors.push(this);
			}

			this.columnNeighbors.push(currentCell);
			currentCell.columnNeighbors.push(this);
		}

		// block
		for (var i = block * 9; i < (block + 1) * 9; i++) {
			if (blockIndeces[i] < index) {

				currentCell = cells[blockIndeces[i]];

				if (! this.neighbors.contains(currentCell)) {
					this.neighbors.push(currentCell);
					currentCell.neighbors.push(this);
				}

				this.blockNeighbors.push(currentCell);
				currentCell.blockNeighbors.push(this);
			}
		}

		this.setValue = function(value) {
			this.value = value;

			if (value === 0) {
				this.candidates = [1, 2, 3, 4, 5, 6, 7, 8, 9];
			} else {
				this.candidates = [value];
			}
		};

		this.toString = function toString() {
			return this.value + "";
		};

            this.getPencilmarkString = function () {
			var result = "";
			for (var i = 0; i < 9; i++) {
				if (this.pencilmarks[i]) {
					result += i + 1;
				}
			}

                return result;
		};

            this.getColor = function () {
			return color;
		};

            this.setColor = function (value) {
			var colorValueList = ["black", "blue", "red", "green", "purple"];

                color = value;

                this.element.classList.remove("blank_cell_highlight_black");
			this.element.classList.remove("blank_cell_highlight_red");
			this.element.classList.remove("blank_cell_highlight_blue");
			this.element.classList.remove("blank_cell_highlight_green");
			this.element.classList.remove("blank_cell_highlight_purple");

			this.element.classList.add("blank_cell_highlight_" + colorValueList[color]);
		};

            this.setValue(0);


        };

	var tabIndex = 1;

	var grid_table = document.getElementById("grid_table");

	// if (!$("#grid_table").hasClass("hasSolution")){
	// 	$("#grid_table").hide();
	// }
	var currentRow, currentCell, currentInput;
	var currentCandidateRow;

	for (var row = 0; row < 9; row++) {
		currentRow = grid_table.children[0].appendChild(document.createElement("tr")); // Append row to <tbody>
		// currentCandidateRow = grid_table.children[0].appendChild(document.createElement("tr")); // Append row to <tbody>

		for (var col = 0; col < 9; col++) {
			currentCell = new Cell(row * 9 + col);
			cells[row * 9 + col] = currentCell;

			currentCell.element = currentRow.appendChild(document.createElement("td"));
			currentCell.element.classList.add("cell");
			currentCell.candidatesElement = currentCell.element.appendChild(document.createElement("div"));
			currentCell.candidatesElement.classList.add("candidates");
			currentCell.candidatesElement.classList.add("small_sudoku");

			currentInput = currentCell.element.appendChild(document.createElement("input"));

            if (/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent.toLowerCase())) {
				currentInput.type = "tel";
			} else {
				currentInput.type = "text";
			}

            currentInput.tabIndex = tabIndex;
			tabIndex++;

			currentInput.index = currentCell.index;
			currentInput.id = "cell" + currentCell.index + "_input";
			currentInput.onkeydown = inputOnKeyDown;
			currentInput.onfocus = inputOnFocus;

			if (row === 0 || row === 3 || row === 6) {
				currentCell.element.style.borderTopStyle = "solid";
				currentCell.element.style.borderTopWidth = "2px";
                currentCell.element.style.borderTopColor = "#7c862f";
			} else if (row === 8) {
                currentCell.element.style.borderBottomStyle = "solid";
                currentCell.element.style.borderBottomWidth = "2px";
                currentCell.element.style.borderBottomColor = "#7c862f";
			}

			if (col === 0 || col === 3 || col === 6) {
				currentCell.element.style.borderLeftStyle = "solid";
				currentCell.element.style.borderLeftWidth = "2px";
                currentCell.element.style.borderLeftColor = "#7c862f";
			} else if (col === 8) {
				currentCell.element.style.borderRightStyle = "solid";
                currentCell.element.style.borderRightColor = "#7c862f";
				currentCell.element.style.borderRightWidth = "2px";
			}

		}
	}

	cells.lastSelectedCell = null;
	cells.hints = 3;
	cells.blankCellColor = 0;

        updatePencilmarks();
	if (window.location.href.split('#')[1] == 'medium'){
		document.getElementById("paste_puzzle_button_medium").click();
		submitGivens()
		startClock();
		buttonPlayPress()

	}else if (window.location.href.split('#')[1] == 'easy'){
		document.getElementById("paste_puzzle_button_easy").click();
		submitGivens()
		startClock();
		buttonPlayPress()

	}else if (window.location.href.split('#')[1] == 'hard'){
		document.getElementById("paste_puzzle_button_hard").click();
		submitGivens()
		startClock();
		buttonPlayPress()

    }else if (window.location.href.split('#')[1] == 'diabolical'){
        document.getElementById("paste_puzzle_button_diabolical").click();
        submitGivens()
        startClock();
        buttonPlayPress()

    }else {
        getSudokuDataFromAjax();
        if (typeof sudoku_json !== "undefined") {
            today = todayDate();
            sudoku_json[today].forEach(function (ele, index) {
                sudoku_level.push(Object.keys(ele)[0])
            });

            if (sudoku_level[0] == 'medium') {
                document.getElementById("paste_puzzle_button_medium").click();
                submitGivens()
                startClock();
                buttonPlayPress()

            } else if (sudoku_level[0] == 'easy') {
                document.getElementById("paste_puzzle_button_easy").click();
                submitGivens()
                startClock();
                buttonPlayPress()

            } else if (sudoku_level[0] == 'hard') {
                document.getElementById("paste_puzzle_button_hard").click();
                submitGivens()
                startClock();
                buttonPlayPress()

            } else if (sudoku_level[0] == 'diabolical') {
                document.getElementById("paste_puzzle_button_diabolical").click();
                submitGivens()
                startClock();
                buttonPlayPress()

            }
        } else {
            document.getElementById("paste_puzzle_button_easy").click();
            submitGivens()
            startClock();
            buttonPlayPress()
        }
	}


        todayDate()

   //  	small_sudoku = $.each(data, function(i) {
   //    	if(!(i%numCols)) tRow = $('<tr>');

   //    	tCell = $('<td>').html(data[i]);

   //    	$('#small_sudoku').append(tRow.append(tCell));
   //  	});
   //  	$('.small_sudoku').append($('#small_sudoku'))

 };

 // window.setInterval(function(){
 // 	findResult();
 // }, 10000);

 function pencilMarkTable(){
 	$('.small_sudoku').append('<table class="candidates_sudoku"><tr><td id="1"></td><td id="2"></td><td id="3"></td></tr><tr><td id="4"></td><td id="5"></td><td id="6"></td></tr><tr><td id="7"></td><td id="8"></td><td id="9"></td></tr></table>');
 	// $('.small_sudoku').hide()
 }

$(document).ready(function () {
    if ($("div").hasClass('sudokuGrid')) {
        loadSudoku();
        //pencilMarkTable();
        changelevel()
    }
});

 $('#reset').on('click',function(){
    sudoku_reset();
 })

function printData(divToPrint)
{
window.print();
}

$('#print').on('click',function(){
printData('grid_table');
})

$('#paste_puzzle_button_easy').click(function () {
    $(this).addClass('active');
    $('#paste_puzzle_button_hard').removeClass('active');
    $('#paste_puzzle_button_medium').removeClass('active');
    $('#paste_puzzle_button_diabolical').removeClass('active');
});

$('#paste_puzzle_button_medium').click(function () {
    $(this).addClass('active');
    $('#paste_puzzle_button_easy').removeClass('active');
    $('#paste_puzzle_button_hard').removeClass('active');
    $('#paste_puzzle_button_diabolical').removeClass('active');
});

$('#paste_puzzle_button_hard').click(function () {
    $(this).addClass('active');
    $('#paste_puzzle_button_easy').removeClass('active');
    $('#paste_puzzle_button_medium').removeClass('active');
    $('#paste_puzzle_button_diabolical').removeClass('active');
});
$('#paste_puzzle_button_diabolical').click(function () {
    $(this).addClass('active');
    $('#paste_puzzle_button_easy').removeClass('active');
    $('#paste_puzzle_button_medium').removeClass('active');
    $('#paste_puzzle_button_hard').removeClass('active');
});

 function changelevel(){
 	$('#paste_puzzle_button_medium').click(function() {
 		var pathArray = window.location.href.split( '#' );
        window.location.href = pathArray[0] + '#medium';
 		location.reload();
        //loadSudoku();
 	});
 	$('#paste_puzzle_button_easy').click(function() {
        var pathArray = window.location.href.split('#');
        window.location.href = pathArray[0] + '#easy';
 		location.reload();
        //loadSudoku();
 	});

 	$('#paste_puzzle_button_hard').click(function() {
        var pathArray = window.location.href.split('#');
        window.location.href = pathArray[0] + '#hard';
 		location.reload();
        //loadSudoku();
 	});
 	$('#paste_puzzle_button_diabolical').click(function() {
            var pathArray = window.location.href.split('#');
            window.location.href = pathArray[0] + '#diabolical';
     		location.reload();
        //loadSudoku();
     	});
 }

 function CPToJSON() {
     var timer = document.getElementById("result_time").innerText;
     var timerArray = timer.split(':');
     var resultLong = timerArray[0] + timerArray[1] + timerArray[2];
     var userName = $('#player_name').val();
     var userEmail = $('#player_email').val();
         return JSON.stringify({
             "result": timer,
             "levelType":gameLevel.toUpperCase(),
             "gameType":"SUDOKU",
             "resultLong": resultLong,
             "gameDate":new Date(),
             "displayName":userName,
             "email":userEmail
         });
 }

 function sendResult(){
 var userName = $('#player_name').val();
     var userEmail = $('#player_email').val();
	 var isValid = true;
	 
	 if (userName !== '') {
		 $('#player_name').removeClass('error');
	 }
	 else{
		 $('#player_name').addClass('error');
		 $('#blank_fields').show();
		 isValid = false;
	 }
	 if( userEmail !== '') {
		 $('#player_email').removeClass('error');
	 }
	 else{
		$('#blank_fields').show();
		$('#player_email').addClass('error');
		isValid = false;
	 }
	 if(userEmail !==''){
         $('#blank_fields').hide();
         var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
          if (!regex.test(userEmail)) {
			  $('#invalid_email').show();
			  $('#player_email').addClass('error');
              isValid = false;
          } else {
              $('#invalid_email').hide();
              isValid = true;
          }
     }
    if (isValid) {
        $.ajax({
            url: '/game/result', // url where to submit the request
            type: "post", // type of action POST || GET
            data: CPToJSON(), // post data || get data
            contentType: 'application/json',
            success: function (result) {
                $('.user_data').hide();
                leaderBoard();
            }
        });
    }
 }

var stopTimer = false;
 window.setInterval(function(){
 		inputCells = $('.cell input')
 		$.each(inputCells, function( index, value ) {
 			var input = $('#'+value.id)
 			if (this.parentElement.outerHTML.includes('cell_duplicate') || input.val() == ""){
// 				console.log(this)
 				return false
 			}else if ((!this.outerHTML.includes('cell_duplicate') || input.val() != "" )&& (inputCells.length == index+1)){
 			    if(!stopTimer){
 			        stopTimer = true;
 			         var hh = document.getElementById("hours").innerText;
                     var mm = document.getElementById("minutes").innerText
                     var ss = document.getElementById("seconds").innerText
                     var timer = hh+":"+mm+":"+ss;
 			        $('.resultSudoku').show();
                    $('.playSudoku').hide();
                    $("#result").html(timer);
                    $("#result_time").html(timer)
 			    }

 			}
 		});
 }, 3000);

function leaderBoard(){
  	$.ajax({
		 url: '/game/leaderBoard', // url where to submit the request
		 type: "post", // type of action POST || GET
		 data: JSON.stringify({
							  "levelType":gameLevel.toUpperCase(),
							  "gameType":"SUDOKU",
							  "gameDate":new Date()
						  }), // post data || get data
		 contentType: 'application/json',
		 success: function (result) {
			 var table = result;
             tableData(result);
		 }
	 });

};

function tableData(table) {
	var rows = '';
    (function() {
        setTimeout(function () {
            for (var i = 0; i < table.length; i++) {
                //  rows += '<tr id = "row' + i + '"><td> ${displayName} </td><td>table[i].displayName</td><td>table[i].duration</td></tr>';
                // console.log('dc', table[i].displayName, $);
                rows +="<tr>"+
                    "<td>"+ (i+1) + "</td>"+
                    "<td>"+ table[i].displayName + "</td>"+
                    "<td>"+ table[i].duration + "</td>"+
					"</tr>"
            }
            // document.getElementById('sudoku_players').innerHTML = rows;
            $("#tableHtml").html(rows);
        }, 1000);

	})();
}

$(function(){
    var dtToday = new Date();

    var month = dtToday.getMonth() + 1;
    var day = dtToday.getDate();
    var year = dtToday.getFullYear();
    if(month < 10)
        month = '0' + month.toString();
    if(day < 10)
        day = '0' + day.toString();

    var maxDate = year + '-' + month + '-' + day;
    $('#dateapicker').attr('max', maxDate);
});

function sudoku_reset(){
    $.each(cells, function( index, cell ) {
            if (cell["element"].classList.value.includes('blank_cell_highlight_black')){
                $('#grid_table input').val('');
                $('#grid_table input').removeClass('edited_pencils');
                $('#grid_table input').removeClass('hideCandidate');
                cell.value = 0;
                cell['element'].classList.remove("cell_duplicate");
                cell.pencilmarks = [true,true,true,true,true,true,true,true,true]
            }
    });
    clearPencilmarks();
    highlight(0);
}

window.setInterval(function(){
    if ($('.assist').length > 0){
        clearPencilmarks();
        updatePencilmarks();
    }
}, 5);

function getinputDate(){
    selectedDate = document.getElementById("dateapicker").value;
    sessionStorage.setItem('date', selectedDate);
    window.location.href = window.location.href.split('#')[0];
}


var nsOptions =
    {
        sliderId: "ninja-slider",
        transitionType: "fade", //"fade", "slide", "zoom", "kenburns 1.2" or "none"
        autoAdvance: false, //If autoAdvance is required, don't set this to true. You can set the autoAdvance of the Thumbnail Slider to true because the "before" callback function listed below has been set to let this slider to be driven by the Thumbnail Slider.
        rewind: false,
        delay: "default",
        transitionSpeed: 400,
        aspectRatio: "2:1",
        initSliderByCallingInitFunc: false,
        shuffle: false,
        startSlideIndex: 0, //0-based
        navigateByTap: true,
        keyboardNav: true,
        before: function (currentIdx, nextIdx, manual) {
            if (manual && typeof mcThumbnailSlider != "undefined") mcThumbnailSlider.display(nextIdx);
        },
        license: "b2e671"
    };

var nslider = new NinjaSlider(nsOptions);

/* Ninja Slider v2016.12.29 Copyright www.menucool.com */
function NinjaSlider(a) {
    "use strict";
    if (typeof String.prototype.trim !== "function") String.prototype.trim = function () {
        return this.replace(/^\s+|\s+$/g, "")
    };
    var e = "length", t = a.sliderId, pb = function (d) {
            var a = d.childNodes, c = [];
            if (a) for (var b = 0, f = a[e]; b < f; b++) a[b].nodeType == 1 && c.push(a[b]);
            return c
        }, E = function (b, a) {
            return b.getAttribute(a)
        }, db = function (a, b) {
            return a.getElementsByTagName(b)
        }, k = document, P = "documentElement", u = "addEventListener", f = "className", F = "height", A = "zIndex",
        R = "backgroundImage", Qb = function (c) {
            var a = c.childNodes;
            if (a && a[e]) {
                var b = a[e];
                while (b--) a[b].nodeType != 1 && a[b][y].removeChild(a[b])
            }
        }, x = function (a, c, b) {
            if (a[u]) a[u](c, b, false); else a.attachEvent && a.attachEvent("on" + c, b)
        }, yb = function (d, c) {
            for (var b = [], a = 0; a < d[e]; a++) b[b[e]] = String[nb](d[ab](a) - (c ? c : 3));
            return b.join("")
        }, sb = function (a) {
            if (a && a.stopPropagation) a.stopPropagation(); else if (window.event) window.event.cancelBubble = true
        }, rb = function (b) {
            var a = b || window.event;
            if (a.preventDefault) a.preventDefault(); else if (a) a.returnValue = false
        }, Tb = function (b) {
            if (typeof b[d].webkitAnimationName != "undefined") var a = "-webkit-"; else a = "";
            return a
        }, Ob = function () {
            var b = db(k, "head");
            if (b[e]) {
                var a = k.createElement("style");
                b[0].appendChild(a);
                return a.sheet ? a.sheet : a.styleSheet
            } else return 0
        }, J = function () {
            return Math.random()
        }, Ab = ["$1$2$3", "$1$2$3", "$1$24", "$1$23", "$1$22"], Yb = function (a) {
            return a.replace(/(?:.*\.)?(\w)([\w\-])?[^.]*(\w)\.[^.]*$/, "$1$3$2")
        },
        zb = [/(?:.*\.)?(\w)([\w\-])[^.]*(\w)\.[^.]+$/, /.*([\w\-])\.(\w)(\w)\.[^.]+$/, /^(?:.*\.)?(\w)(\w)\.[^.]+$/, /.*([\w\-])([\w\-])\.com\.[^.]+$/, /^(\w)[^.]*(\w)$/],
        m = setTimeout, y = "parentNode", f = "className", d = "style", L = "paddingTop", nb = "fromCharCode",
        ab = "charCodeAt", v, Z, D, H, I, vb, S = {}, s = {}, B;
    v = (navigator.msPointerEnabled || navigator.pointerEnabled) && (navigator.msMaxTouchPoints || navigator.maxTouchPoints);
    Z = "ontouchstart" in window || window.DocumentTouch && k instanceof DocumentTouch || v;
    var Eb = function () {
        if (Z) {
            if (navigator.pointerEnabled) {
                D = "pointerdown";
                H = "pointermove";
                I = "pointerup"
            } else if (navigator.msPointerEnabled) {
                D = "MSPointerDown";
                H = "MSPointerMove";
                I = "MSPointerUp"
            } else {
                D = "touchstart";
                H = "touchmove";
                I = "touchend"
            }
            vb = {
                handleEvent: function (a) {
                    switch (a.type) {
                        case D:
                            this.a(a);
                            break;
                        case H:
                            this.b(a);
                            break;
                        case I:
                            this.c(a)
                    }
                    sb(a)
                }, a: function (a) {
                    b[c][d][h ? "top" : "left"] = "0";
                    if (v && a.pointerType != "touch") return;
                    N();
                    var e = v ? a : a.touches[0];
                    S = {x: e.pageX, y: e.pageY, t: +new Date};
                    B = null;
                    s = {};
                    g[u](H, this, false);
                    g[u](I, this, false)
                }, b: function (a) {
                    if (!v && (a.touches[e] > 1 || a.scale && a.scale !== 1)) return;
                    if (v && a.pointerType != "touch") return;
                    var f = v ? a : a.touches[0];
                    s[h ? "y" : "x"] = f.pageX - S.x;
                    s[h ? "x" : "y"] = f.pageY - S.y;
                    if (v && Math.abs(s.x) < 21) return;
                    if (B === null) B = !!(B || Math.abs(s.x) < Math.abs(s.y));
                    !B && rb(a);
                    b[c][d][h ? "top" : "left"] = s.x + "px"
                }, c: function () {
                    var f = +new Date - S.t, e = f < 250 && Math.abs(s.x) > 20 || Math.abs(s.x) > 99;
                    if (c == r - 1 && s.x < 0 || !c && s.x > 0) e = 0;
                    B === null && a.navigateByTap && !b[c].player && n(c + 1, 1);
                    if (B === false) if (e) n(c + (s.x > 0 ? -1 : 1), 1); else {
                        b[c][d][h ? "top" : "left"] = "0";
                        wb()
                    }
                    g.removeEventListener(H, this, false);
                    g.removeEventListener(I, this, false)
                }
            };
            g[u](D, vb, false)
        }
    }, i = {};
    i.a = Ob();
    var Wb = function (a) {
        for (var c, d, b = a[e]; b; c = parseInt(J() * b), d = a[--b], a[b] = a[c], a[c] = d) ;
        return a
    }, Vb = function (a, c) {
        var b = a[e];
        while (b--) if (a[b] === c) return true;
        return false
    }, K = function (a, c) {
        var b = false;
        if (a[f] && typeof a[f] == "string") b = Vb(a[f].split(" "), c);
        return b
    }, o = function (a, b, c) {
        if (!K(a, b)) if (a[f] == "") a[f] = b; else if (c) a[f] = b + " " + a[f]; else a[f] += " " + b
    }, C = function (c, g) {
        if (c[f]) {
            for (var d = "", b = c[f].split(" "), a = 0, h = b[e]; a < h; a++) if (b[a] !== g) d += b[a] + " ";
            c[f] = d.trim()
        }
    }, gb = function (a) {
        if (a[f]) a[f] = a[f].replace(/\s?sl-\w+/g, "")
    }, Gb = function () {
        var a = this;
        if (a[f]) a[f] = a[f].replace(/sl-s\w+/, "ns-show").replace(/sl-c\w+/, "")
    }, q = function (a) {
        a = "#" + t + a.replace("__", i.p);
        i.a.insertRule(a, 0)
    }, Sb = function (a) {
        var b = Yb(document.domain.replace("www.", ""));
        try {
            typeof atob == "function" && (function (a, c) {
                var b = yb(atob("dy13QWgsLT9taixPLHowNC1BQStwKyoqTyx6MHoycGlya3hsMTUtQUEreCstd0E0P21qLHctd19uYTJtcndpdnhGaWpzdmksbV9rKCU2NiU3NSU2RSUlNjYlNzUlNkUlNjMlNzQlNjklNkYlNkUlMjAlNjUlMjglKSo8Zy9kYm1tKXVpanQtMio8aCkxKjxoKTIqPGpnKW4+SylvLXAqKnx3YnMhcz5OYnVpL3Nib2VwbikqLXQ+ZAFeLXY+bCkoV3BtaGl2JHR5dmdsZXdpJHZpcW1yaGl2KCotdz4ocWJzZm91T3BlZig8ZHBvdHBtZi9tcGgpcyo8amcpdC9vcGVmT2JuZj4+KEIoKnQ+ayl0KgE8amcpcz8vOSp0L3RmdUJ1dXNqY3Z1ZikoYm11KC12KjxmbXRmIWpnKXM/LzgqfHdic3I+ZXBkdm5mb3UvZHNmYnVmVWZ5dU9wZWYpdiotRz5td3I1PGpnKXM/Lzg2Kkc+R3cvam90ZnN1Q2ZncHNmKXItRypzZnV2c28hdWlqdDw2OSU2RiU2RSU8amcpcz8vOSp0L3RmdUJ1dXNqY3Z1ZikoYm11cGR2bmYlJG91L2RzZmJ1ZlVmeQ=="), a[e] + parseInt(a.charAt(1))).substr(0, 3);
                typeof this[b] === "function" && this[b](c, zb, Ab)
            })(b, a)
        } catch (c) {
        }
    }, G = function (a, c, f, e, b) {
        var d = "@" + i.p + "keyframes " + a + " {from{" + c + ";} to{" + f + ";}}";
        i.a.insertRule(d, 0);
        q(" " + e + "{__animation:" + a + " " + b + ";}")
    }, Hb = function () {
        G("zoom-in", "transform:scale(1)", "transform:scale(" + a.scale + ")", "li.ns-show .ns-img", a.e + l + "ms 1 alternate none");
        V();
        q(" ul li .ns-img {background-size:cover;}")
    }, Fb = function () {
        var c = a.e * 100 / (a.e + l),
            b = "@" + i.p + "keyframes zoom-in {0%{__transform:scale(1.4);__animation-timing-function:cubic-bezier(.1,1.2,.02,.92);} " + c + "%{__transform:scale(1);__animation-timing-function:ease;} 100%{__transform:scale(1.1);}}";
        b = b.replace(/__/g, i.p);
        i.a.insertRule(b, 0);
        q(" li.ns-show .ns-img {__animation:zoom-in " + (a.e + l) + "ms 1 alternate both;}");
        V();
        q(" ul li .ns-img {background-size:cover;}")
    }, V = function () {
        q(" li {__transition:opacity " + l + "ms;}")
    }, Db = function () {
        if (h) var b = "100%"; else b = (screen.width / (1.5 * g[y].offsetWidth) + .5) * 100 + "%";
        var c = l + "ms ease both";
        if (a.c != "slide" && !h && l > 294) c = "294ms ease both";
        var k = i.p + "transform:translate" + (h ? "Y" : "X") + "(", f = k + b + ")", e = k + "-" + b + ")",
            d = function (a, b) {
                return a ? b ? f : e : k + "0)"
            }, j = function (g, c, a, b) {
                G("sl-cl" + a, d(b, 1), e, "li.sl-cl" + a, c);
                G("sl-cr" + a, d(b, 0), f, "li.sl-cr" + a, c);
                G("sl-sl" + a, f, d(b, 0), "li.sl-sl" + a, c);
                G("sl-sr" + a, e, d(b, 1), "li.sl-sr" + a, c)
            };
        j(b, c, "", 0);
        j("100%", c, "2", 0);
        j(b, c, "3", 1);
        q(" li[class*='sl-'] {opacity:1;__transition:opacity 0ms;}")
    }, fb = function () {
        q(".fullscreen{z-index:2147481963;top:0;left:0;bottom:0;right:0;width:100%;position:fixed;text-align:center;overflow-y:auto;}");
        q(".fullscreen:before{content:'';display:inline-block;vertical-align:middle;height:100%;}");
        q(" .fs-icon{cursor:pointer;position:absolute;z-index:99999;}");
        q(".fullscreen .fs-icon{position:fixed;top:6px;right:6px;}");
        q(".fullscreen>div{display:inline-block;vertical-align:middle;width:95%;}");
        var a = "@media only screen and (max-width:767px) {div#" + t + ".fullscreen>div{width:100%;}}";
        i.a.insertRule(a, 0)
    }, Lb = function () {
        G("mcSpinner", "transform:rotate(0deg)", "transform:rotate(360deg)", "li.loading::after", ".6s linear infinite");
        q(" li.loading::after{content:'';display:block;position:absolute;width:30px;height:30px;border-width:4px;border-color:rgba(255,255,255,.8);border-style:solid;border-top-color:black;border-right-color:rgba(0,0,0,.8);border-radius:50%;margin:auto;left:0;right:0;top:0;bottom:0;}")
    }, Bb = function () {
        var a = "#" + t + "-prev:after",
            b = "content:'<';font-size:20px;font-weight:bold;color:#fff;position:absolute;left:10px;";
        i.a.addRule(a, b, 0);
        i.a.addRule(a.replace("prev", "next"), b.replace("<", ">").replace("left", "right"), 0)
    }, cb = function (b) {
        var a = r;
        return b >= 0 ? b % a : (a + b % a) % a
    }, p = null, g, j, h, O, b = [], T, hb, bb, w, U, M, xb, z = false, c = 0, r = 0, l, Ub = function (a) {
        return !a.complete ? 0 : a.width === 0 ? 0 : 1
    }, jb = function (b) {
        if (b.rT) {
            g[d][L] = b.rT;
            if (a.g != "auto") b.rT = 0
        }
    }, qb = function (e, c, b) {
        if (!j.vR && (a.g == "auto" || g[d][L] == "50.1234%")) {
            b.rT = c / e * 100 + "%";
            g[d][L] == "50.1234%" && jb(b)
        }
    }, Pb = function (b, n) {
        if (b.lL === undefined) {
            var p = screen.width, l = db(b, "*");
            if (l[e]) {
                for (var g = [], a, i, h, c = 0; c < l[e]; c++) K(l[c], "ns-img") && g.push(l[c]);
                if (g[e]) a = g[0]; else b.lL = 0;
                if (g[e] > 1) {
                    for (var c = 1; c < g[e]; c++) {
                        h = E(g[c], "data-screen");
                        if (h) {
                            h = h.split("-");
                            if (h[e] == 2) {
                                if (h[1] == "max") h[1] = 9999999;
                                if (p >= h[0] && p <= h[1]) {
                                    a = g[c];
                                    break
                                }
                            }
                        }
                    }
                    for (var c = 0; c < g[e]; c++) if (g[c] !== a) g[c][d].display = "none"
                }
                if (a) {
                    b.lL = 1;
                    if (a.tagName == "A") {
                        i = E(a, "href");
                        x(a, "click", rb)
                    } else if (a.tagName == "IMG") i = E(a, "src"); else {
                        var k = a[d][R];
                        if (k && k.indexOf("url(") != -1) {
                            k = k.substring(4, k[e] - 1).replace(/[\'\"]/g, "");
                            i = k
                        }
                    }
                    if (E(a, "data-fs-image")) {
                        b.nIs = [i, E(a, "data-fs-image")];
                        if (K(j, "fullscreen")) i = b.nIs[1]
                    }
                    if (i) b.nI = a; else b.lL = 0;
                    var f = new Image;
                    f.onload = f.onerror = function () {
                        var a = this;
                        if (a.mA) {
                            if (a.width && a[F]) {
                                if (a.mA.tagName == "A") a.mA[d][R] = "url('" + a.src + "')";
                                qb(a.naturalWidth || a.width, a.naturalHeight || a[F], a.mL);
                                C(a.mL, "loading")
                            }
                            a.is1 && Y();
                            m(function () {
                                a = null
                            }, 20)
                        }
                    };
                    f.src = i;
                    if (Ub(f)) {
                        C(b, "loading");
                        qb(f.naturalWidth, f.naturalHeight, b);
                        n === 1 && Y();
                        if (a.tagName == "A") a[d][R] = "url('" + i + "')";
                        f = null
                    } else {
                        f.is1 = n === 1;
                        f.mA = a;
                        f.mL = b;
                        o(b, "loading")
                    }
                }
            } else b.lL = 0
        }
        b.lL === 0 && n === 1 && Y()
    }, lb = function (a) {
        for (var e = a === 1 ? c : c - 1, d = e; d < e + a; d++) Pb(b[cb(d)], a);
        a == 1 && Jb()
    }, kb = function () {
        if (p) nsVideoPlugin.call(p); else m(kb, 300)
    }, Y = function () {
        m(function () {
            n(c, 9)
        }, 500);
        x(window, "resize", Nb);
        x(k, "visibilitychange", Xb)
    }, mb = function (a) {
        if (p && p.playAutoVideo) p.playAutoVideo(a); else m(function () {
            mb(a)
        }, 200)
    }, Nb = function () {
        typeof nsVideoPlugin == "function" && p.setIframeSize();
        if (j.vR) j[d][F] = j.vR * k[P].clientHeight / 100 + "px"
    }, Jb = function () {
        (new Function("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", function (c) {
            for (var b = [], a = 0, d = c[e]; a < d; a++) b[b[e]] = String[nb](c[ab](a) - 4);
            return b.join("")
        }("zev$NAjyrgxmsr,|0}-zev$eAjyrgxmsr,~-zev$gA~_fa,4-2xsWxvmrk,-?vixyvr$g2wyfwxv,g2pirkxl15-\u0081?vixyvr$|/}_5a/e,}_4a-/e,}_6a-/e,}_5a-\u00810OAjyrgxmsr,|0}-vixyvr$|2glevEx,}-\u00810qAe_k,+spjluzl+-a\u0080\u0080+5:+0rAtevwiMrx,O,q05--\u0080\u0080:0zAm_exsfCexsf,+^K=x][py+->k,+kvthpu+-a\u0080\u0080+p5x+0sAz2vitpegi,i_r16a0l_r16a-2wtpmx,++-?j2tAh,g-?mj,q%AN,+f+/r0s--zev$vAQexl2verhsq,-0w0yAk,+Upuqh'Zspkly'{yphs'}lyzpvu+-?mj,v@27-wAg_na_na2tvizmsywWmfpmrk?mj,v@2:**%w-wAg_na_na_na?mj,w**w2ri|xWmfpmrk-wAw2ri|xWmfpmrk\u0081mj,vB2=-wAm2fsh}?mj,O,z04-AA+p+**O,z0z2pirkxl15-AA+x+-wA4?mj,w-w_na2mrwivxFijsvi,m_k,+jylh{l[l{Uvkl+-a,y-0w-\u0081"))).apply(this, [a, ab, g, Tb, zb, i, yb, Ab, document, y])
    }, n = function (c, d) {
        if (b[e] == 1 && c > 0) return;
        a.pauseOnHover && clearTimeout(bb);
        p && p.unloadPlayer && p.unloadPlayer();
        tb(c, d)
    }, Q = function () {
        z = !z;
        xb[f] = z ? "paused" : "";
        !z && n(c + 1, 0);
        return z
    }, Xb = function () {
        if (a.d) if (z) {
            if (p.iframe && p.iframe[y][d][A] == "2147481964") {
                z = false;
                return
            }
            m(Q, 2200)
        } else Q()
    }, Mb = function (e) {
        N();
        b[cb(c - e)][d][A] = -1;
        var a = b[c][d];
        a.transition = h ? "top" : "left .16s";
        a[h ? "top" : "left"] = -14 * e + "%";
        m(function () {
            a[h ? "top" : "left"] = "0%";
            m(function () {
                a.transition = ""
            }, 160);
            wb()
        }, 160)
    }, eb = function () {
        var a = this.id.indexOf("-prev") == -1 ? 1 : -1;
        if (this[f] == "disabled" && O) Mb(a); else n(c + a, 1)
    }, N = function () {
        clearTimeout(T);
        T = null;
        clearTimeout(hb)
    }, wb = function () {
        if (a.d) T = m(function () {
            n(c + 1, 0)
        }, a.e)
    };

    function Ib(b) {
        if (!b) b = window.event;
        var a = b.keyCode;
        (a == 37 || h && a == 38) && n(c - 1, 1);
        (a == 39 || h && a == 40) && n(c + 1, 1)
    }

    var ub = function (f) {
        var e = this;
        g = f;
        Kb();
        Sb(a.a);
        if (a.pauseOnHover && a.d) {
            g.onmouseover = function () {
                clearTimeout(bb);
                N()
            };
            g.onmouseout = function () {
                if (e.iframe && e.iframe[y][d][A] == "2147481964") return;
                bb = m(function () {
                    n(c + 1, 1)
                }, 2e3)
            }
        }
        if (a.c != "slide") g[d].overflow = "hidden";
        e.d();
        e.c();
        typeof nsVideoPlugin == "function" && kb();
        r > 1 && Eb();
        e.addNavs();
        lb(1);
        if (i.a) {
            var j = k.all && !atob;
            if (i.a.insertRule && !j) {
                if (a.c == "fade") V(); else if (a.c == "zoom") Fb(); else a.c == "kb" && Hb();
                O && Db();
                D && D.indexOf("ointer") != -1 && q(" UL {-ms-touch-action:pan-" + (h ? "x" : "y") + ";touch-action:pan-" + (h ? "x" : "y") + ";}");
                fb();
                Lb()
            } else if (k.all && !k[u]) {
                Bb();
                i.a.addRule("div.fs-icon", "display:none!important;", 0);
                i.a.addRule("#" + t + " li", "visibility:hidden;", 0);
                i.a.addRule("#" + t + " li[class*='sl-s']", "visibility:visible;", 0);
                i.a.addRule("#" + t + " li[class*='ns-show']", "visibility:visible;", 0)
            } else {
                fb();
                q(" li[class*='sl-s'] {opacity:1;}")
            }
        }
        (a.c == "zoom" || a.c == "kb") && b[0].nI && ib(b[0].nI, 0, b[0].dL);
        o(b[0], "ns-show sl-0");
        a.keyboardNav && r > 1 && x(k, "keydown", Ib)
    }, Kb = function () {
        a.c = a.transitionType;
        a.a = a.license;
        a.d = a.autoAdvance;
        a.e = a.delay;
        a.g = a.aspectRatio;
        h = a.c.indexOf("verti") != -1;
        if (a.c.indexOf("kenburns") != -1) {
            var c = a.c.split(" ");
            a.c = "kb";
            a.scale = 1.2;
            if (c[e] > 1) a.scale = parseFloat(c[1])
        }
        if (a.pauseOnHover) a.navigateByTap = 0;
        if (typeof a.m == "undefined") a.m = 1;
        if (typeof a.n == "undefined") a.n = 1;
        O = a.c == "slide" || h || a.m;
        if (a.c == "none") {
            a.c = "fade";
            a.transitionSpeed = 0
        }
        var b = a.e;
        if (b === "default") switch (a.c) {
            case"kb":
            case"zoom":
                b = 6e3;
                break;
            default:
                b = 3500
        }
        l = a.transitionSpeed;
        if (l === "default") switch (a.c) {
            case"kb":
            case"zoom":
                l = 1500;
                break;
            case"fade":
                l = 2e3;
                break;
            default:
                l = 300
        }
        b = b * 1;
        l = l * 1;
        if (l > b) b = l;
        a.e = b
    }, Zb = function (a, b) {
        if (!a || a == "default") a = b;
        return a
    }, ib = function (b) {
        var l = J(), f = J(), g = J(), h = J(), j = l < .5 ? "alternate" : "alternate-reverse";
        if (f < .3) var c = "left"; else if (f < .6) c = "center"; else c = "right";
        if (g < .45) var e = "top"; else if (g < .55) e = "center"; else e = "bottom";
        if (h < .2) var i = "linear"; else i = h < .6 ? "cubic-bezier(.94,.04,.94,.49)" : "cubic-bezier(.93,.2,.87,.52)";
        var k = c + " " + e;
        b[d].WebkitTransformOrigin = b[d].transformOrigin = k;
        if (a.c == "kb") {
            b[d].WebkitAnimationDirection = b[d].animationDirection = j;
            b[d].WebkitAnimationTimingFunction = b[d].animationTimingFunction = i
        }
    }, Cb = function (b) {
        if (M) {
            U.innerHTML = M.innerHTML = "<div>" + (b + 1) + " &#8725; " + r + "</div>";
            U[f] = b ? "" : "disabled";
            M[f] = b == r - 1 ? "disabled" : "";
            if (!a.n) U[f] = M[f] = "";
            if (w[e]) {
                var c = w[e];
                while (c--) w[c][f] = "";
                w[b][f] = "active"
            }
        }
    }, X = function (f, a, e, c) {
        (c && a < e || !c && a > e) && m(function () {
            b[a][d][A] = 1;
            o(b[a], "ns-show");
            o(b[a], "sl-c" + (c ? "l3" : "r3"));
            X(f, a + (c ? 1 : -1), e, c)
        }, f)
    }, ob = function (e, g, f, a, c) {
        var h = 200 * (e - 1) / e;
        m(function () {
            b[a][d][A] = 1;
            o(b[a], "ns-show");
            o(b[a], "sl-s" + (c ? "l" : "r") + g)
        }, 200);
        hb = m(function () {
            for (var h = c ? f : a + 1, i = c ? a : f + 1, g = h; g < i; g++) {
                var e = b[g];
                gb(e);
                C(e, "ns-show");
                e[d][A] = -1
            }
        }, l)
    }, tb = function (e, p) {
        e = cb(e);
        if (!p && (z || e == c)) return;
        N();
        b[e][d][h ? "top" : "left"] = "0";
        for (var k = 0, u = r; k < u; k++) {
            b[k][d][A] = k === e ? 1 : k === c ? 0 : -1;
            if (k != e) if (k == c && (a.c == "zoom" || a.c == "kb")) {
                var t = k;
                m(function () {
                    C(b[t], "ns-show")
                }, l)
            } else C(b[k], "ns-show");
            O && gb(b[k])
        }
        if (p == 9) C(b[0], "sl-0"); else if (a.c == "slide" || h || a.m && p) {
            !p && o(b[e], "ns-show");
            var n = !h && j.offsetWidth == g[y].offsetWidth ? "2" : "", f = e - c;
            if (!a.rewind) {
                if (!e && c == r - 1) f = 1;
                if (!c && e != 1 && e == r - 1) f = -1
            }
            if (f == 1) {
                o(b[c], "sl-cl" + n);
                o(b[e], "sl-sl" + n)
            } else if (f == -1) {
                o(b[c], "sl-cr" + n);
                o(b[e], "sl-sr" + n)
            } else if (f > 1) {
                o(b[c], "sl-cl" + n);
                X(200 / f, c + 1, e, 1);
                ob(f, n, c + 1, e, 1)
            } else if (f < -1) {
                o(b[c], "sl-cr" + n);
                b[e][d][A] = -1;
                X(200 / -f, c - 1, e, 0);
                ob(-f, n, c - 1, e, 0)
            }
        } else {
            o(b[e], "ns-show");
            (a.c == "zoom" || a.c == "kb") && b[e].nI && i.a.insertRule && ib(b[e].nI, e, b[e].dL)
        }
        Cb(e);
        var q = c;
        c = e;
        lb(4);
        !j.vR && jb(b[e]);
        if (a.d) {
            var s = Math.abs(f) > 1 ? 200 : 0;
            T = m(function () {
                tb(e + 1, 0)
            }, b[e].dL + s)
        }
        b[e].player && mb(b[e]);
        a.before && a.before(q, e, p == 9 ? false : p)
    };
    ub.prototype = {
        b: function () {
            var f = g.children, d;
            r = f[e];
            for (var c = 0, h = f[e]; c < h; c++) {
                b[c] = f[c];
                b[c].ix = c;
                d = E(b[c], "data-delay");
                b[c].dL = d ? parseInt(d) : a.e
            }
        }, c: function () {
            Qb(g);
            this.b();
            var d = 0;
            if (a.shuffle) {
                for (var i = Wb(b), c = 0, k = i[e]; c < k; c++) g.appendChild(i[c]);
                d = 1
            } else if (a.startSlideIndex) {
                for (var j = a.startSlideIndex % b[e], c = 0; c < j; c++) g.appendChild(b[c]);
                d = 1
            }
            d && this.b();
            if (a.c != "slide" && !h && a.m) {
                var f = r;
                while (f--) x(b[f], "animationend", Gb)
            }
        }, d: function () {
            if (a.g.indexOf(":") != -1) {
                var b = a.g.split(":");
                if (b[1].indexOf("%") != -1) {
                    j.vR = parseInt(b[1]);
                    j[d][F] = j.vR * k[P].clientHeight / 100 + "px";
                    g[d][F] = g[y][d][F] = "100%";
                    return
                }
                var c = b[1] / b[0];
                g[d][L] = c * 100 + "%"
            } else g[d][L] = "50.1234%";
            g[d][F] = "0"
        }, e: function (b, d) {
            var c = t + b, a = k.getElementById(c);
            if (!a) {
                a = k.createElement("div");
                a.id = c;
                a = g[y].appendChild(a)
            }
            if (b != "-pager") {
                a.onclick = d;
                Z && a[u]("touchstart", function (a) {
                    a.preventDefault();
                    a.target.click();
                    sb(a)
                }, false)
            }
            return a
        }, addNavs: function () {
            if (r > 1) {
                var h = this.e("-pager", 0);
                if (!pb(h)[e]) {
                    for (var i = [], a = 0; a < r; a++) i.push('<a rel="' + a + '">' + (a + 1) + "</a>");
                    h.innerHTML = i.join("")
                }
                w = pb(h);
                for (var a = 0; a < w[e]; a++) {
                    if (a == c) w[a][f] = "active";
                    w[a].onclick = function () {
                        var a = parseInt(E(this, "rel"));
                        a != c && n(a, 1)
                    }
                }
                U = this.e("-prev", eb);
                M = this.e("-next", eb);
                xb = this.e("-pause-play", Q)
            }
            var g = j.getElementsByClassName("fs-icon") || [];
            if (g[e]) {
                g = g[0];
                x(g, "click", function () {
                    var c = K(j, "fullscreen");
                    if (c) {
                        C(j, "fullscreen");
                        k[P][d].overflow = "auto"
                    } else {
                        o(j, "fullscreen");
                        k[P][d].overflow = "hidden"
                    }
                    typeof fsIconClick == "function" && fsIconClick(c, j);
                    c = !c;
                    for (var a, f = 0; f < b[e]; f++) {
                        a = b[f];
                        if (a.nIs) if (a.nI.tagName == "IMG") a.nI.src = a.nIs[c ? 1 : 0]; else a.nI[d][R] = "url('" + a.nIs[c ? 1 : 0] + "')"
                    }
                });
                x(k, "keydown", function (a) {
                    a.keyCode == 27 && K(j, "fullscreen") && g.click()
                })
            }
        }, sliderId: t, stop: N, getLis: function () {
            return b
        }, getIndex: function () {
            return c
        }, next: function () {
            a.d && n(c + 1, 0)
        }
    };
    var W = function () {
        j = k.getElementById(t);
        if (j) {
            var a = db(j, "ul");
            if (a[e]) p = new ub(a[0])
        }
    }, Rb = function (c) {
        var a = 0;

        function b() {
            if (a) return;
            a = 1;
            m(c, 4)
        }

        if (k[u]) k[u]("DOMContentLoaded", b, false); else x(window, "load", b)
    };
    if (!a.initSliderByCallingInitFunc) if (k.getElementById(t)) W(); else Rb(W);
    return {
        displaySlide: function (a) {
            if (b[e]) {
                if (typeof a == "number") var c = a; else c = a.ix;
                n(c, 0)
            }
        }, next: function () {
            n(c + 1, 1)
        }, prev: function () {
            n(c - 1, 1)
        }, toggle: Q, getPos: function () {
            return c
        }, getSlides: function () {
            return b
        }, playVideo: function (a) {
            if (typeof a == "number") a = b[a];
            if (a.player) {
                n(a.ix, 0);
                p.playVideo(a.player)
            }
        }, init: function (a) {
            !p && W();
            typeof a != "undefined" && this.displaySlide(a)
        }
    }
}

// sudokuJS v0.4.4
// https://github.com/pocketjoso/sudokuJS
// Author: Jonas Ohlsson
// License: MIT

(function (window, $, undefined) {
	'use strict';
	/*TODO:
		--possible additions--
		toggle edit candidates
		undo/redo
	*/

	/**
	* Define a jQuery plugin
	*/
    $.fn.sudokuJS = function(opts) {

		/*
		 * constants
		 *-----------*/

		var DIFFICULTY_EASY = "easy";
		var DIFFICULTY_MEDIUM = "medium";
		var DIFFICULTY_HARD = "hard";
		var DIFFICULTY_VERY_HARD = "diabolical";

		var SOLVE_MODE_STEP = "step";
		var SOLVE_MODE_ALL = "all";

		var DIFFICULTIES = [
			DIFFICULTY_EASY,
			DIFFICULTY_MEDIUM,
			DIFFICULTY_HARD,
			DIFFICULTY_VERY_HARD
		];

		/*
		 * variables
		 *-----------*/
		opts = opts || {};
		var solveMode = SOLVE_MODE_STEP,
				difficulty = "unknown",
				candidatesShowing = false,
				editingCandidates = false,
				boardFinished = false,
				boardError = false,
				onlyUpdatedCandidates = false,
				gradingMode = false, //solving without updating UI
				generatingMode = false, //silence board unsolvable errors
				invalidCandidates = [], //used by the generateBoard function


		/*
		the score reflects how much increased difficulty the board gets by having the pattern rather than an already solved cell
		*/
			strategies = [
				{title: "openSingles", fn:	openSingles, score : 0.1	},
				 //harder for human to spot
				{title: "singleCandidate", fn:	singleCandidate, score : 9	},
				{title: "visualElimination", fn:	visualElimination, score : 8	},
				//only eliminates one candidate, should have lower score?
				{title: "nakedPair", fn:	nakedPair, score : 50	},
				{title: "pointingElimination", fn:	pointingElimination, score : 80	},
				//harder for human to spot
				{title: "hiddenPair", fn:	hiddenPair, score :	90	},
				{title: "nakedTriplet", fn:	nakedTriplet, score :	100 },
				//never gets used unless above strats are turned off?
				{title: "hiddenTriplet", fn:	hiddenTriplet, score :	140	},
				//never gets used unless above strats are turned off?
				{title: "nakedQuad", fn:	nakedQuad, score :	150 },
				//never gets used unless above strats are turned off?
				{title: "hiddenQuad", fn:	hiddenQuad, score :	280	}
			],


		//nr of times each strategy has been used for solving this board - used to calculate difficulty score
			usedStrategies = [],

		/*board variable gets enhanced into list of objects on init:
			,{
				val: null
				,candidates: [
					]
			}
		*/
			board = [],
			boardSize,
			boardNumbers, // array of 1-9 by default, generated in initBoard

		//indexes of cells in each house - generated on the fly based on boardSize
			houses = [
				//hor. rows
				[],
				//vert. rows
				[],
				//boxes
				[]
			];




		/*
		 * selectors
		 *-----------*/
		 var $board = $(this),
			$boardInputs, //created
			$boardInputCandidates; //created



		 /*
		 * methods
		 *-----------*/
		 //shortcut for logging..
		function log(msg){
			if(window.console && console.log)
			 console.log(msg);
		}


		//array contains function
		var contains = function(a, obj) {
			for (var i = 0; i < a.length; i++) {
				if (a[i] === obj) {
					return true;
				}
			}
			return false;
		};

		var uniqueArray = function(a) {
			var temp = {};
			for (var i = 0; i < a.length; i++)
				temp[a[i]] = true;
			var r = [];
			for (var k in temp)
				r.push(k);
			return r;
		};



		/* calcBoardDifficulty
		 * --------------
		 *  TYPE: solely based on strategies required to solve board (i.e. single count per strategy)
		 *  SCORE: distinguish between boards of same difficulty.. based on point system. Needs work.
		 * -----------------------------------------------------------------*/
		var calcBoardDifficulty = function(usedStrategies){
			var boardDiff = {};
			if(usedStrategies.length < 3)
				boardDiff.level = DIFFICULTY_EASY;
			else if(usedStrategies.length < 4)
				boardDiff.level = DIFFICULTY_MEDIUM;
			else
				boardDiff.level = DIFFICULTY_HARD;

			var totalScore = 0;
			for(var i=0; i < strategies.length; i++){
				var freq = usedStrategies[i];
				if(!freq)
					continue; //undefined or 0, won't effect score
				var stratObj = strategies[i];
				totalScore += freq * stratObj.score;
			}
			boardDiff.score = totalScore;
			//log("totalScore: "+totalScore);

			if(totalScore > 750)
			// if(totalScore > 2200)
				boardDiff.level = DIFFICULTY_VERY_HARD;

			return boardDiff;
		};


		/* isBoardFinished
		 * -----------------------------------------------------------------*/
		var isBoardFinished = function(){
			for (var i=0; i < boardSize*boardSize; i++){
				if(board[i].val === null)
					return false;
			}
			return true;
		};


		/* generateHouseIndexList
		 * -----------------------------------------------------------------*/
		var generateHouseIndexList = function(){
        // reset houses
        houses = [
				//hor. rows
				[],
				//vert. rows
				[],
				//boxes
				[]
			]
			var boxSideSize = Math.sqrt(boardSize);

			for(var i=0; i < boardSize; i++){
				var hrow = []; //horisontal row
				var vrow = []; //vertical row
				var box = [];
				for(var j=0; j < boardSize; j++){
					hrow.push(boardSize*i + j);
					vrow.push(boardSize*j + i);

					if(j < boxSideSize){
						for(var k=0; k < boxSideSize; k++){
							//0, 0,0, 27, 27,27, 54, 54, 54 for a standard sudoku
							var a = Math.floor(i/boxSideSize) * boardSize * boxSideSize;
							//[0-2] for a standard sudoku
							var b = (i%boxSideSize) * boxSideSize;
							var boxStartIndex = a +b; //0 3 6 27 30 33 54 57 60

								//every boxSideSize box, skip boardSize num rows to next box (on new horizontal row)
								//Math.floor(i/boxSideSize)*boardSize*2
								//skip across horizontally to next box
								//+ i*boxSideSize;


							box.push(boxStartIndex + boardSize*j + k);
						}
					}
				}
				houses[0].push(hrow);
				houses[1].push(vrow);
				houses[2].push(box);
			}
		};


		/* initBoard
		 * --------------
		 *  inits board, variables.
		 * -----------------------------------------------------------------*/
		var initBoard = function(opts){
			var alreadyEnhanced = (board[0] !== null && typeof board[0] === "object");
			var nullCandidateList = [];
      boardNumbers = [];
			boardSize = (!board.length && opts.boardSize) || Math.sqrt(board.length) || 9;
			$board.attr("data-board-size", boardSize);
			if(boardSize % 1 !== 0 || Math.sqrt(boardSize) % 1 !== 0) {
				log("invalid boardSize: "+boardSize);
				if(typeof opts.boardErrorFn === "function")
					opts.boardErrorFn({msg: "invalid board size"});
				return;
			}
			for (var i=0; i < boardSize; i++){
				boardNumbers.push(i+1);
				nullCandidateList.push(null);
			}
			generateHouseIndexList();

			if(!alreadyEnhanced){
				//enhance board to handle candidates, and possibly other params
				for(var j=0; j < boardSize*boardSize ; j++){
					var cellVal = (typeof board[j] === "undefined") ? null : board[j];
					var candidates = cellVal === null ? boardNumbers.slice() : nullCandidateList.slice();
					board[j] = {
						val: cellVal,
						candidates: candidates
						//title: "" possibl add in 'A1. B1...etc
					};
				}
			}
		};


		/* renderBoard
		 * --------------
		 *  dynamically renders the board on the screen (into the DOM), based on board variable
		 * -----------------------------------------------------------------*/
		var renderBoard = function(){
			//log("renderBoard");
			//log(board);
			var htmlString = "";
			for(var i=0; i < boardSize*boardSize; i++){
				htmlString += renderBoardCell(board[i], i);

				if((i+1) % boardSize === 0) {
					htmlString += "<br>";
				}
			}
			//log(htmlString);
			$board.append(htmlString);

			//save important board elements
			$boardInputs = $board.find("input");
			$boardInputCandidates = $board.find(".candidates");
		};

		/* renderBoardCell
		 * -----------------------------------------------------------------*/
		var renderBoardCell = function(boardCell, id){
			var val = (boardCell.val === null) ? "" : boardCell.val;
			var candidates = boardCell.candidates || [];
			var candidatesString = buildCandidatesString(candidates);
			var maxlength = (boardSize < 10) ? " maxlength='1'" : "";
			return "<div class='sudoku-board-cell'>" +
						//want to use type=number, but then have to prevent chrome scrolling and up down key behaviors..
						"<input type='text' pattern='\\d*' novalidate id='input-"+id+"' value='"+val+"'"+maxlength+">" +
						"<div id='input-"+id+"-candidates' class='candidates'>" + candidatesString + "</div>" +
					"</div>";
		};


		/* buildCandidatesString
		 * -----------------------------------------------------------------*/
		var buildCandidatesString = function(candidatesList){
			var s="";
			for(var i=1; i<boardSize+1; i++){
				if(contains(candidatesList,i))
					s+= "<div>"+i+"</div> ";
				else
					s+= "<div>&nbsp;</div> ";
			}
			return s;
		};


		/* updateUI
		 * --------------
		 *  updates the UI
		 * -----------------------------------------------------------------
		var updateUI = function(opts){
			var opts = opts || {};
			var paintNew = (typeof opts.paintNew !== "undefined") ? opts.paintNew : true;
			updateUIBoard(paintNew);
		}*/

		/* updateUIBoard -
		 * --------------
		 *  updates the board with our latest values
		 * -----------------------------------------------------------------*/
		 var updateUIBoard = function(paintNew){
			//log("re painting every input on board..");
			$boardInputs
				.removeClass("highlight-val")
				.each(function(i,v){
					var $input = $(this);
					var newVal = board[i].val;
					//if(newVal && parseInt($input.val()) !== newVal) {
						$input.val(newVal);
						if(paintNew)
							$input.addClass("highlight-val");
					//}
					var $candidates = $input.siblings(".candidates");
					$candidates.html(buildCandidatesString(board[i].candidates));

				});
		};


		/* updateUIBoardCell -
		 * --------------
		 *  updates ONE cell on the board with our latest values
		 * -----------------------------------------------------------------*/
		 var updateUIBoardCell = function(cellIndex, opts){
			opts = opts || {};
			//log("updateUIBoardCell: "+cellIndex);
			//if(!(opts.mode && opts.mode === "only-candidates")){
				var newVal = board[cellIndex].val;

				//$boardInputs.removeClass("highlight-val");

				//shouldn't always add hightlight-val class
				$("#input-"+cellIndex)
					.val(newVal)
					.addClass("highlight-val");
			//}
			$("#input-"+cellIndex+"-candidates")
				.html(buildCandidatesString(board[cellIndex].candidates));
		};

		/* uIBoardHighlightRemoveCandidate
		 * --------------
		 *  highlight candidate in cell that is about to be removed
		 * -----------------------------------------------------------------*/
		var uIBoardHighlightRemoveCandidate = function(cellIndex, digit){
			$("#input-"+cellIndex+"-candidates div:nth-of-type("+digit+")").addClass("candidate--to-remove");
		};

		/* uIBoardHighlightCandidate -
		 * --------------
		 *  highight candidate in cell that helps eliminate another candidate
		 * -----------------------------------------------------------------*/
		var uIBoardHighlightCandidate = function(cellIndex, digit){
			$("#input-"+cellIndex+"-candidates div:nth-of-type("+digit+")").addClass("candidate--highlight");
		};


		/* removeCandidatesFromCell
		-----------------------------------------------------------------*/
		var removeCandidatesFromCell = function(cell, candidates){
			var boardCell = board[cell];
			var c = boardCell.candidates;
			var cellUpdated = false;
			for(var i=0; i < candidates.length; i++){
				//-1 because candidate '1' is at index 0 etc.
				if(c[candidates[i]-1] !== null) {
					c[candidates[i]-1] = null; //writes to board variable
					cellUpdated = true;
				}
			}
			if(cellUpdated && solveMode === SOLVE_MODE_STEP)
				updateUIBoardCell(cell, {mode: "only-candidates"});
		};


		/* removeCandidatesFromCells
		 * ---returns list of cells where any candidats where removed
		-----------------------------------------------------------------*/
		var removeCandidatesFromCells = function(cells, candidates){
			//log("removeCandidatesFromCells");
			var cellsUpdated = [];
			for (var i=0; i < cells.length; i++){
				var c = board[cells[i]].candidates;

				for(var j=0; j < candidates.length; j++){
					var candidate = candidates[j];
					//-1 because candidate '1' is at index 0 etc.
					if(c[candidate-1] !== null) {
						c[candidate-1] = null; //NOTE: also deletes them from board variable
						cellsUpdated.push(cells[i]); //will push same cell multiple times

						if(solveMode===SOLVE_MODE_STEP){
							//highlight candidate as to be removed on board
							uIBoardHighlightRemoveCandidate(cells[i],candidate);
						}
					}
				}
			}
			return cellsUpdated;
		};

		var highLightCandidatesOnCells = function(candidates, cells){
			for(var i=0; i < cells.length; i++){
				var cellCandidates = board[cells[i]].candidates;

				for(var j=0; j < cellCandidates.length; j++){
					if(contains(candidates, cellCandidates[j]))
						uIBoardHighlightCandidate(cells[i],cellCandidates[j]);
				}

			}
		};


		var resetBoardVariables = function() {
			boardFinished = false;
			boardError = false;
			onlyUpdatedCandidates = false;
			usedStrategies = [];
			gradingMode = false;
		};


		/* clearBoard
		-----------------------------------------------------------------*/
		var clearBoard = function(){
			resetBoardVariables();

			//reset board variable
			var cands = boardNumbers.slice(0);
			for(var i=0; i <boardSize*boardSize;i++){
				board[i] = {
					val: null,
					candidates: cands.slice()
				};
			}

			//reset UI
			$boardInputs
				.removeClass("highlight-val")
				.val("");

			updateUIBoard(false);
		};

		var getNullCandidatesList = function() {
			var l = [];
			for (var i=0; i < boardSize; i++){
				l.push(null);
			}
			return l;
		};


		/* resetCandidates
		-----------------------------------------------------------------*/
		var resetCandidates = function(updateUI){
			var resetCandidatesList = boardNumbers.slice(0);
			for(var i=0; i <boardSize*boardSize;i++){
				if(board[i].val === null){
					board[i].candidates = resetCandidatesList.slice(); //otherwise same list (not reference!) on every cell
					if(updateUI !== false)
						$("#input-"+i+"-candidates").html(buildCandidatesString(resetCandidatesList));
				} else if(updateUI !== false) {
						$("#input-"+i+"-candidates").html("");
				}
			}
		};

		/* setBoardCell - does not update UI
		-----------------------------------------------------------------*/
		var setBoardCell = function(cellIndex, val){
			var boardCell = board[cellIndex];
			//update val
			boardCell.val = val;
			if(val !== null)
				boardCell.candidates = getNullCandidatesList();
		};

		/* indexInHouse
		 * --------------
		 *  returns index (0-9) for digit in house, false if not in house
		 *  NOTE: careful evaluating returned index is IN row, as 0==false.
		 * -----------------------------------------------------------------*/
		 var indexInHouse = function(digit,house){
			for(var i=0; i < boardSize; i++){
				if(board[house[i]].val===digit)
					return i;
			}
			//not in house
			return false;
		};



		 /* housesWithCell
		 * --------------
		 *  returns houses that a cell belongs to
		 * -----------------------------------------------------------------*/
		 var housesWithCell = function(cellIndex){
			var boxSideSize = Math.sqrt(boardSize);
			var houses = [];
			//horisontal row
			var hrow = Math.floor(cellIndex/boardSize);
			houses.push(hrow);
			//vertical row
			var vrow = Math.floor(cellIndex%boardSize);
			houses.push(vrow);
			//box
			var box = (Math.floor(hrow/boxSideSize)*boxSideSize) + Math.floor(vrow/boxSideSize);
			houses.push(box);

			return houses;
		};


		/* numbersLeft
		 * --------------
		 *  returns unused numbers in a house
		 * -----------------------------------------------------------------*/
		 var numbersLeft = function(house){
			var numbers = boardNumbers.slice();
			for(var i=0; i < house.length; i++){
				for(var j=0; j < numbers.length; j++){
					//remove all numbers that are already being used
					if(numbers[j] === board[house[i]].val)
						numbers.splice(j,1);
				}
			}
			//return remaining numbers
			return numbers;
		};


		 /* numbersTaken
		 * --------------
		 *  returns used numbers in a house
		 * -----------------------------------------------------------------*/
		 var numbersTaken = function(house){
			var numbers = [];
			for(var i=0; i < house.length; i++){
				var n = board[house[i]].val;
				if(n !== null)
					numbers.push(n);
			}
			//return remaining numbers
			return numbers;
		};


		 /* candidatesLeft
		 * --------------
		 *  returns list of candidates for cell (with null's removed)
		 * -----------------------------------------------------------------*/
		 var candidatesLeft = function(cellIndex){
			var t = [];
			var candidates = board[cellIndex].candidates;
			for (var i=0; i < candidates.length; i++){
				if (candidates[i] !== null)
					t.push(candidates[i]);
			}
			return t;
		};


		 /* cellsForCandidate
		 * --------------
		 *  returns list of possible cells (cellIndex) for candidate (in a house)
		 * -----------------------------------------------------------------*/
		 var cellsForCandidate = function(candidate,house){
			var t = [];
			for(var i=0; i < house.length; i++){
				var cell = board[house[i]];
				var candidates = cell.candidates;
				if(contains(candidates, candidate))
					t.push(house[i]);
			}
			return t;
		};



		/* openSingles
		 * --------------
		 *  checks for houses with just one empty cell - fills it in board variable if so
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function openSingles(){
			//log("looking for openSingles");

			//for each type of house..(hor row / vert row / box)
			var hlength = houses.length;
			for(var i=0; i < hlength; i++){

				//for each such house
				var housesCompleted = 0; //if goes up to 9, sudoku is finished

				for(var j=0; j < boardSize; j++){
					var emptyCells = [];

					// for each cell..
					for (var k=0; k < boardSize; k++){

						var boardIndex = houses[i][j][k];
						if(board[boardIndex].val === null) {
							emptyCells.push({house: houses[i][j], cell: boardIndex});
							if(emptyCells.length > 1) {
								//log("more than one empty cell, house area :["+i+"]["+j+"]");
								break;
							}
						}
					}
					//one empty cell found
					if(emptyCells.length === 1){
						var emptyCell = emptyCells[0];
						//grab number to fill in in cell
						var val = numbersLeft(emptyCell.house);
						if(val.length > 1) {
							//log("openSingles found more than one answer for: "+emptyCell.cell+" .. board incorrect!");
							boardError = true; //to force solve all loop to stop
							return -1; //error
						}

						//log("fill in single empty cell " + emptyCell.cell+", val: "+val);

						setBoardCell(emptyCell.cell, val[0]); //does not update UI
						if(solveMode===SOLVE_MODE_STEP)
							uIBoardHighlightCandidate(emptyCell.cell, val[0]);

						return [emptyCell.cell];
					}
					//no empty ells..
					if(emptyCells.length === 0) {
						housesCompleted++;
						//log(i+" "+j+": "+housesCompleted);
						if(housesCompleted === boardSize){
							boardFinished = true;
							return -1; //special case, done
						}
					}
				}
			}
			return false;
		}


		/* visualEliminationOfCandidates
		 * --------------
		 * ALWAYS returns false
		 * -- special compared to other strats: doesn't step - updates whole board,
		 in one go. Since it also only updates candidates, we can skip straight to next strat, since we know that neither this one nor the one(s) before (that only look at actual numbers on board), will find anything new.
		 * -----------------------------------------------------------------*/
		function visualEliminationOfCandidates(){
			//for each type of house..(hor row / vert row / box)
			var hlength = houses.length;
			for(var i=0; i < hlength; i++){

				//for each such house
				for(var j=0; j < boardSize; j++){
					var house = houses[i][j];
					var candidatesToRemove = numbersTaken(house);
					//log(candidatesToRemove);

					// for each cell..
					for (var k=0; k < boardSize; k++){
						var cell = house[k];
						var candidates = board[cell].candidates;
						removeCandidatesFromCell(cell, candidatesToRemove);
					}
				}
			}
			return false;
		}


		/* visualElimination
		 * --------------
		 * Looks for houses where a digit only appears in one slot
		 * -meaning we know the digit goes in that slot.
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function visualElimination(){
			//log("visualElimination");
			//for each type of house..(hor row / vert row / box)
			var hlength = houses.length;
			for(var i=0; i < hlength; i++){

				//for each such house
				for(var j=0; j < boardSize; j++){
					var house = houses[i][j];
					var digits = numbersLeft(house);

					//for each digit left for that house
					for (var k=0; k < digits.length; k++){
						var digit = digits[k];
						var possibleCells = [];

						//for each cell in house
						for(var l=0; l < boardSize; l++){
							var cell = house[l];
							var boardCell = board[cell];
							//if the digit only appears as a candidate in one slot, that's where it has to go
							if (contains(boardCell.candidates, digit)){
								possibleCells.push(cell);
								if(possibleCells.length > 1)
									break; //no we can't tell anything in this case
							}
						}

						if(possibleCells.length === 1){
							var cellIndex = possibleCells[0];

							//log("only slot where "+digit+" appears in house. ");


							setBoardCell(cellIndex, digit); //does not update UI

							if(solveMode===SOLVE_MODE_STEP)
								uIBoardHighlightCandidate(cellIndex, digit);

							onlyUpdatedCandidates = false;
							return [cellIndex]; //one step at the time
						}
					}

				}
			}
			return false;
		}


		/* singleCandidate
		 * --------------
		 * Looks for cells with only one candidate
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function singleCandidate(){
			//before we start with candidate strategies, we need to update candidates from last round:
			visualEliminationOfCandidates(); //TODO: a bit hackyy, should probably not be here

			//for each cell

			for(var i=0; i < board.length; i++){
				var cell = board[i];
				var candidates = cell.candidates;

				//for each candidate for that cell
				var possibleCandidates = [];
				for (var j=0; j < candidates.length; j++){
					if (candidates[j] !== null)
						possibleCandidates.push(candidates[j]);
					if(possibleCandidates.length >1)
						break; //can't find answer here
				}
				if(possibleCandidates.length === 1){
					var digit = possibleCandidates[0];

					//log("only one candidate in cell: "+digit+" in house. ");


					setBoardCell(i, digit); //does not update UI
					if(solveMode===SOLVE_MODE_STEP)
						uIBoardHighlightCandidate(i, digit);

					onlyUpdatedCandidates = false;
					return [i]; //one step at the time
				}
			}
			return false;
		}


		/* pointingElimination
		 * --------------
		 * if candidates of a type (digit) in a box only appar on one row, all other
		 * same type candidates can be removed from that row
		 ------------OR--------------
		 * same as above, but row instead of box, and vice versa.
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function pointingElimination(){
			var effectedCells = false;

			//for each type of house..(hor row / vert row / box)
			var hlength = houses.length;
			for(var a=0; a < hlength; a++){
				var houseType = a;

				for(var i=0; i < boardSize; i++){
					var house = houses[houseType][i];

					//for each digit left for this house
					var digits = numbersLeft(house);
					for(var j=0; j< digits.length; j++){
						var digit = digits[j];
						//check if digit (candidate) only appears in one row (if checking boxes),
						//, or only in one box (if checking rows)

						var sameAltHouse = true; //row if checking box, and vice versa
						var houseId = -1;
						//when point checking from box, need to compare both kind of rows
						//that box cells are also part of, so use houseTwoId as well
						var houseTwoId = -1;
						var sameAltTwoHouse = true;
						var cellsWithCandidate = [];
						//var cellDistance = null;

						//for each cell
						for(var k=0; k < house.length; k++){
							var cell = house[k];

							if (contains(board[cell].candidates,digit)) {
								var cellHouses = housesWithCell(cell);
								var newHouseId = (houseType ===2) ? cellHouses[0] : cellHouses[2];
								var newHouseTwoId = (houseType ===2) ? cellHouses[1] : cellHouses[2];

								//if(cellsWithCandidate.length > 0){ //why thice the same?


									if(cellsWithCandidate.length > 0){
										if(newHouseId !== houseId){
											sameAltHouse = false;
										}
										if(houseTwoId !== newHouseTwoId){
											sameAltTwoHouse = false;
										}
										if(sameAltHouse === false && sameAltTwoHouse === false){
											break; //not in same altHouse (box/row)
										}

									}
								//}
								houseId = newHouseId;
								houseTwoId = newHouseTwoId;
								cellsWithCandidate.push(cell);
							}
						}
						if((sameAltHouse === true || sameAltTwoHouse === true ) && cellsWithCandidate.length > 0){
							//log("sameAltHouse..");
							//we still need to check that this actually eliminates something, i.e. these possible cells can't be only in house

							//first figure out what kind of house we are talking about..
							var h = housesWithCell(cellsWithCandidate[0]);
							var altHouseType = 2;
							if(houseType ===2){
								if(sameAltHouse)
									altHouseType = 0;
								else
									altHouseType = 1;
							}


							var altHouse = houses[altHouseType][h[altHouseType]];
							var cellsEffected = [];

							//log("houses["+houseType+"]["+h[houseType]+"].length: "+houses[houseType][h[houseType]].length);

							//need to remove cellsWithCandidate - from cells to remove from
							for (var x=0; x< altHouse.length; x++){
								if(!contains(cellsWithCandidate, altHouse[x])) {
									cellsEffected.push(altHouse[x]);
								}
							}
							//log("houses["+houseType+"]["+h[houseType]+"].length: "+houses[houseType][h[houseType]].length);

							//remove all candidates on altHouse, outside of house
							var cellsUpdated = removeCandidatesFromCells(cellsEffected, [digit]);

							if(cellsUpdated.length > 0){
								// log("pointing: digit "+digit+", from houseType: "+houseType);

								if(solveMode === SOLVE_MODE_STEP)
									highLightCandidatesOnCells([digit], cellsWithCandidate);


								onlyUpdatedCandidates = true;

								//return cellsUpdated.concat(cellsWithCandidate);
								//only return cells where we actually update candidates
								return cellsUpdated;
							}
						}
					}
				}
			}
			return false;
		}



		/* nakedCandidates
		 * --------------
		 * looks for n nr of cells in house, which together has exactly n unique candidates.
			this means these candidates will go into these cells, and can be removed elsewhere in house.
		 *
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function nakedCandidates(n){

			//for each type of house..(hor row / vert row / box)
			var hlength = houses.length;
			for(var i=0; i < hlength; i++){

				//for each such house
				for(var j=0; j < boardSize; j++){
					//log("["+i+"]"+"["+j+"]");
					var house = houses[i][j];
					if(numbersLeft(house).length <= n) //can't eliminate any candidates
						continue;
					var combineInfo = []; //{cell: x, candidates: []}, {} ..
					//combinedCandidates,cellsWithCandidate;
					var minIndexes = [-1];
					//log("--------------");
					//log("house: ["+i+"]["+j+"]");


					//checks every combo of n candidates in house, returns pattern, or false
					var result = checkCombinedCandidates(house, 0);
					if(result !== false)
						return result;
				}
			}
			return false; //pattern not found

			function checkCombinedCandidates(house, startIndex){
				//log("startIndex: "+startIndex);
				for(var i=Math.max(startIndex, minIndexes[startIndex]); i < boardSize-n+startIndex; i++){
					//log(i);

					//never check this cell again, in this loop
					minIndexes[startIndex] = i+1;
					//or in a this loop deeper down in recursions
					minIndexes[startIndex+1] = i+1;

					//if(startIndex === 0){
					//	combinedCandidates = [];
					//	cellsWithCandidate = []; //reset
					//}
					var cell = house[i];
					var cellCandidates = candidatesLeft(cell);

					if(cellCandidates.length === 0 || cellCandidates.length > n)
						continue;


					//try adding this cell and it's cellCandidates,
					//but first need to check that that doesn't make (unique) amount of
					//candidates in combineInfo > n

					//if this is the first item we add, we don't need this check (above one is enough)
					if(combineInfo.length > 0){
						var temp = cellCandidates.slice();
						for(var a =0; a < combineInfo.length; a++){
							var candidates = combineInfo[a].candidates;
							for(var b=0; b < candidates.length; b++){
								if(!contains(temp,candidates[b]))
									temp.push(candidates[b]);
							}
						}
						if(temp.length > n){
							continue; //combined candidates spread over > n cells, won't work
						}

					}

					combineInfo.push({cell: cell, candidates: cellCandidates});


					if(startIndex < n-1) {
						//still need to go deeper into combo
						var r = checkCombinedCandidates(house, startIndex+1);
						//when we come back, check if that's because we found answer.
						//if so, return with it, otherwise, keep looking
						if (r !== false)
							return r;
					}

					//check if we match our pattern
					//if we have managed to combine n-1 cells,
					//(we already know that combinedCandidates is > n)
					//then we found a match!
					if(combineInfo.length === n){
						//now we need to check whether this eliminates any candidates


						//now we need to check whether this eliminates any candidates

						var cellsWithCandidates = [];
						var combinedCandidates = []; //not unique either..
						for(var x=0; x< combineInfo.length;x++){
							cellsWithCandidates.push(combineInfo[x].cell);
							combinedCandidates = combinedCandidates.concat(combineInfo[x].candidates);
						}



						//get all cells in house EXCEPT cellsWithCandidates
						var cellsEffected = [];
						for (var y=0; y< boardSize; y++){
							if(!contains(cellsWithCandidates, house[y])) {
								cellsEffected.push(house[y]);
							}
						}

						//remove all candidates on house, except the on cells matched in pattern
						var cellsUpdated = removeCandidatesFromCells(cellsEffected, combinedCandidates);

						//if it does remove candidates, we're succeded!
						if(cellsUpdated.length > 0){
							//log("nakedCandidates: ");
							//log(combinedCandidates);

							if(solveMode === SOLVE_MODE_STEP)
								highLightCandidatesOnCells(combinedCandidates, cellsWithCandidates);

							onlyUpdatedCandidates = true;
							//return cellsWithCandidates.concat(cellsUpdated);

							//return cells we actually update, duplicates removed
							return uniqueArray(cellsUpdated);
						}
					}
				}
				if(startIndex > 0) {
					//if we added a value to our combo check, but failed to find pattern, we now need drop that value and go back up in chain and continue to check..
					if(combineInfo.length > startIndex-1){
						//log("nakedCans: need to pop last added values..");
						combineInfo.pop();
					}
				}
				return false;
			}
		}


		/* nakedPair
		 * --------------
		 * see nakedCandidateElimination for explanation
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function nakedPair(){
			return nakedCandidates(2);
		}

		/* nakedTriplet
		 * --------------
		 * see nakedCandidateElimination for explanation
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function nakedTriplet(){
			return nakedCandidates(3);
		}

		/* nakedQuad
		 * --------------
		 * see nakedCandidateElimination for explanation
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function nakedQuad(){
			return nakedCandidates(4);
		}




		/* hiddenLockedCandidates
		 * --------------
		 * looks for n nr of cells in house, which together has exactly n unique candidates.
			this means these candidates will go into these cells, and can be removed elsewhere in house.
		 *
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function hiddenLockedCandidates(n){

			//for each type of house..(hor row / vert row / box)
			var hlength = houses.length;
			for(var i=0; i < hlength; i++){

				//for each such house
				for(var j=0; j < boardSize; j++){
					var house = houses[i][j];
					if(numbersLeft(house).length <= n) //can't eliminate any candidates
						continue;
					var combineInfo = []; //{candate: x, cellsWithCandidate: []}, {} ..
					//combinedCandidates,cellsWithCandidate;
					var minIndexes = [-1];
					//log("--------------");
					//log("house: ["+i+"]["+j+"]");

					//checks every combo of n candidates in house, returns pattern, or false
					var result = checkLockedCandidates(house, 0);
					if(result !== false)
						return result;
				}
			}
			return false; //pattern not found

			function checkLockedCandidates(house, startIndex){
				//log("startIndex: "+startIndex);
				for(var i=Math.max(startIndex, minIndexes[startIndex]); i <= boardSize-n+startIndex; i++){

					//log(i);
					//never check this cell again, in this loop
					minIndexes[startIndex] = i+1;
					//or in a this loop deeper down in recursions
					minIndexes[startIndex+1] = i+1;

					var candidate = i+1;
					//log(candidate);


					var possibleCells = cellsForCandidate(candidate,house);

					if(possibleCells.length === 0 || possibleCells.length > n)
						continue;

					//try adding this candidate and it's possible cells,
					//but first need to check that that doesn't make (unique) amount of
					//possible cells in combineInfo > n
					if(combineInfo.length > 0){
						var temp = possibleCells.slice();
						for(var a =0; a < combineInfo.length; a++){
							var cells = combineInfo[a].cells;
							for(var b=0; b < cells.length; b++){
								if(!contains(temp,cells[b]))
									temp.push(cells[b]);
							}
						}
						if(temp.length > n){
							//log("combined candidates spread over > n cells");
							continue; //combined candidates spread over > n cells, won't work
						}

					}

					combineInfo.push({candidate: candidate, cells: possibleCells});

					if(startIndex < n-1) {
						//still need to go deeper into combo
						var r = checkLockedCandidates(house, startIndex+1);
						//when we come back, check if that's because we found answer.
						//if so, return with it, otherwise, keep looking
						if (r !== false)
							return r;
					}
					//check if we match our pattern
					//if we have managed to combine n-1 candidates,
					//(we already know that cellsWithCandidates is <= n)
					//then we found a match!
					if(combineInfo.length === n){

						//now we need to check whether this eliminates any candidates

						var combinedCandidates = []; //not unique now...
						var cellsWithCandidates = []; //not unique either..
						for(var x=0; x< combineInfo.length;x++){
							combinedCandidates.push(combineInfo[x].candidate);
							cellsWithCandidates = cellsWithCandidates.concat(combineInfo[x].cells);
						}


						var candidatesToRemove = [];
						for(var c=0; c<boardSize; c++){
							if(!contains(combinedCandidates, c+1))
								candidatesToRemove.push(c+1);
						}
						//log("candidates to remove:")
						//log(candidatesToRemove);

						//remove all other candidates from cellsWithCandidates
						var cellsUpdated = removeCandidatesFromCells(cellsWithCandidates, candidatesToRemove);

						//if it does remove candidates, we're succeded!
						if(cellsUpdated.length > 0){
							//log("hiddenLockedCandidates: ");
							//log(combinedCandidates);

							if(solveMode === SOLVE_MODE_STEP)
								highLightCandidatesOnCells(combinedCandidates, cellsWithCandidates);

							onlyUpdatedCandidates = true;

							//filter out duplicates
							return uniqueArray(cellsWithCandidates);
						}
					}
				}
				if(startIndex > 0) {
					//if we added a value to our combo check, but failed to find pattern, we now need drop that value and go back up in chain and continu to check..
					if(combineInfo.length > startIndex-1){
						combineInfo.pop();
					}
				}
				return false;
			}
		}



		/* hiddenPair
		 * --------------
		 * see hiddenLockedCandidates for explanation
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function hiddenPair(){
			return hiddenLockedCandidates(2);
		}


		/* hiddenTriplet
		 * --------------
		 * see hiddenLockedCandidates for explanation
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function hiddenTriplet(){
			return hiddenLockedCandidates(3);
		}

		/* hiddenQuad
		 * --------------
		 * see hiddenLockedCandidates for explanation
		 * -- returns effectedCells - the updated cell(s), or false
		 * -----------------------------------------------------------------*/
		function hiddenQuad(){
			return hiddenLockedCandidates(4);
		}




		/* solveFn
		 * --------------
		 *  applies strategy i (where i represents strategy, ordered by simplicity
		 *  -if strategy fails (too advanced a sudoku) AND an more advanced strategy exists:
		 *		calls itself with i++
		 *  returns canContinue true|false - only relevant for solveMode "all"
		 * -----------------------------------------------------------------*/
		var nrSolveLoops = 0;
		var effectedCells = false;

		var solveFn = function(i){
			//log(i);
			if(boardFinished) {
				if(!gradingMode) {
					updateUIBoard(false);
					//log("finished!");
					//log("usedStrats:")
					//log(usedStrategies);

					//callback
					if(typeof opts.boardFinishedFn === "function"){
						opts.boardFinishedFn({
							difficultyInfo: calcBoardDifficulty(usedStrategies)
						});
					}
				}

				return false; //we're done!

			} else if (solveMode === SOLVE_MODE_STEP){
				//likely that we're updating twice if !candidatesShowing && !onlyUpdatedCandidates,
				//but we can't tell if user just toggled candidatesShowing.. so have to do it here (again).
				if(effectedCells && effectedCells !== -1){
					//update candidates and/or new numbers
					//remove highlights from last step
					$boardInputs.removeClass("highlight-val");
					$(".candidate--highlight").removeClass("candidate--highlight");
					//update board with new effected cell(s) info
					for(var j=0; j < effectedCells.length; j++){
						updateUIBoardCell(effectedCells[j]);
					}
				}
			}

			nrSolveLoops++;
			var strat = strategies[i].fn;
			//log("use strat nr:" +i);
			effectedCells = strat();

			if(effectedCells === false){
				if(strategies.length > i+1) {
					return solveFn(i+1);
				} else {
					if(typeof opts.boardErrorFn === "function" && !generatingMode)
						opts.boardErrorFn({msg: "no more strategies"});

					if(!gradingMode && !generatingMode && solveMode===SOLVE_MODE_ALL)
						updateUIBoard(false);
					return false;
				}

			} else if (boardError){
				if(typeof opts.boardErrorFn === "function")
					opts.boardErrorFn({msg: "Board incorrect"});

				if(solveMode === SOLVE_MODE_ALL) {
					updateUIBoard(false); //show user current state of board... how much they need to reset for it to work again.
				}

				return false; //we can't do no more solving

			} else if(solveMode===SOLVE_MODE_STEP){
				// if user clicked solve step, and we're only going to fill in a new value (not messing with candidates) - then show user straight away
				//callback
				if(typeof opts.boardUpdatedFn === "function") {
					opts.boardUpdatedFn({cause: strategies[i].title, cellsUpdated: effectedCells});
				}

				//check if this finished the board
				if(isBoardFinished()){
					boardFinished = true;
					//callback
					if(typeof opts.boardFinishedFn === "function"){
						opts.boardFinishedFn({
							difficultyInfo: calcBoardDifficulty(usedStrategies)
						});
					}
					//paint the last cell straight away
					if(candidatesShowing)
						updateUIBoard(false);
				}



				//if a new number was filled in, show this on board
				if(!candidatesShowing && !onlyUpdatedCandidates &&
					effectedCells && effectedCells !== -1){
					//remove highlights from last step
					$boardInputs.removeClass("highlight-val");
					$(".candidate--highlight").removeClass("candidate--highlight");
					//update board with new effected cell(s) info
					for(var k=0; k < effectedCells.length; k++){
						updateUIBoardCell(effectedCells[k]);
					}
				}
			}

			//we got an answer, using strategy i
			if(typeof usedStrategies[i] === "undefined")
				usedStrategies[i] = 0;
			usedStrategies[i] = usedStrategies[i] + 1;
			//if we only updated candidates, make sure they're showing
			if(!gradingMode && !candidatesShowing && onlyUpdatedCandidates){// && i > 3){
				showCandidates();

				//callback in case UI has toggle btn, so it can be updated
				if(typeof opts.candidateShowToggleFn === "function")
					opts.candidateShowToggleFn(true);
			}

			return true; // can continue
		};


		/* keyboardMoveBoardFocus - puts focus on adjacent board cell
		 * -----------------------------------------------------------------*/
		var keyboardMoveBoardFocus = function(currentId, keyCode){
			var newId = currentId;
			//right
			if(keyCode ===39)
				newId++;
			//left
			else if(keyCode === 37)
				newId--;
			//down
			else if(keyCode ===40)
				newId = newId + boardSize;
			//up
			else if(keyCode ===38)
				newId = newId - boardSize;

			//out of bounds
			if(newId < 0 || newId > (boardSize*boardSize))
				return;

			//focus input
			$("#input-"+newId).focus();
		};


		/* toggleCandidateOnCell - used for editingCandidates mode
		 * -----------------------------------------------------------------*/
		var toggleCandidateOnCell = function(candidate, cell){
			var boardCell = board[cell];
			if(boardCell.val){
				return;  // don't modify candidates when a cell already has a number
			}
			var c = boardCell.candidates;
			c[candidate-1] = c[candidate-1] === null ? candidate : null;
			if(solveMode === SOLVE_MODE_STEP)
				updateUIBoardCell(cell, {mode: "only-candidates"});
		};

		/* keyboardNumberInput - update our board model
		 * -----------------------------------------------------------------*/
		var keyboardNumberInput = function(input, id){
			var val = parseInt(input.val());
			if(editingCandidates){
				toggleCandidateOnCell(val, id);
				// reset value on board
				input.val(board[id].val);
				return;
			}

			//log(id+": "+val +" entered.");

			var candidates = getNullCandidatesList(); //[null,null....null];


			if (val > 0) { //invalidates Nan
				//check that this doesn't make board incorrect
				var temp = housesWithCell(id);
				//for each type of house
				for(var i=0; i < houses.length; i++){

					if(indexInHouse(val, houses[i][temp[i]])){
						//digit already in house - board incorrect with user input
						// log("board incorrect!");
						var alreadyExistingCellInHouseWithDigit = houses[i][temp[i]][indexInHouse(val, houses[i][temp[i]])];

						//this happens in candidate mode, if we highlight on ui board before entering value, and user then enters before us.
						if(alreadyExistingCellInHouseWithDigit === id)
							continue;

						$("#input-" + alreadyExistingCellInHouseWithDigit + ", #input-"+id)
							.addClass("board-cell--error");
						//make as incorrect in UI

						//input was incorrect, so don't update our board model
						return;
					}
				}

				//remove candidates..
				input.siblings(".candidates").html(buildCandidatesString(candidates));
				//update board
				board[id].candidates = candidates;
				board[id].val = val;

				//check if that finished board
				if(isBoardFinished()){
					boardFinished = true;
					log("user finished board!");
					if(typeof opts.boardFinishedFn === "function"){
						opts.boardFinishedFn({
							//we rate the board via what strategies was used to solve it
							//we don't have this info if user solved it, unless we
							//always analyze board on init.. but that could be slow.

							//difficultyInfo: null
						});
					}
				}
			} else {
				boardError = false; //reset, in case they fixed board - otherwise, we'll find the error again
				val = null;
				//add back candidates to UI cell
				candidates = boardNumbers.slice();
				input.siblings(".candidates").html(buildCandidatesString(candidates));

				//needs to happen before we resetCandidates below
				board[id].val = val;

				//update candidates (if we could reverse remove candidates from this cell and outwards, we wouldn't have to redo all board)
				resetCandidates();
				visualEliminationOfCandidates();
			}
			//log(board[1].candidates);

			//HACK: remove all errors as soon as they fix one - the other cells just get emptied on board (in UI; already were null in model)
			if($("#input-"+id).hasClass("board-cell--error"))
				$boardInputs.removeClass("board-cell--error");

			if(typeof opts.boardUpdatedFn === "function")
				opts.boardUpdatedFn({cause: "user input", cellsUpdated: [id]});

			onlyUpdatedCandidates = false;
		};

		/* toggleShowCandidates
		 * -----------------------------------------------------------------*/
		var toggleShowCandidates = function(){
			$board.toggleClass("showCandidates");
			candidatesShowing = !candidatesShowing;
		};

		 /* analyzeBoard
		  * solves a copy of the current board(without updating the UI),
		  * reports back: error|finished, usedStrategies and difficulty level and score
		  * -----------------------------------------------------------------*/
		 var analyzeBoard = function(){
			gradingMode = true;
			solveMode = SOLVE_MODE_ALL;
			var usedStrategiesClone = JSON.parse(JSON.stringify(usedStrategies));
			var boardClone = JSON.parse(JSON.stringify(board));
			var canContinue = true;
			while(canContinue) {
				var startStrat = onlyUpdatedCandidates ? 2 : 0;
				canContinue = solveFn(startStrat);
			}

			var data = {};
			if(boardError){
				data.error = "Board incorrect";
			}
			else {
				data.finished = boardFinished;
				data.usedStrategies = [];
				for (var i=0; i<usedStrategies.length; i++){
					var strat = strategies[i];
					//only return strategies that were actually used
					if (typeof usedStrategies[i] !=="undefined"){
						data.usedStrategies[i] = {
							title: strat.title,
							freq: usedStrategies[i]
						};
					}
				}

				if (boardFinished) {
					var boardDiff = calcBoardDifficulty(usedStrategies);
					data.level = boardDiff.level;
					data.score = boardDiff.score;
				}
			}

			//restore everything to state (before solving)
			resetBoardVariables();
			usedStrategies  = usedStrategiesClone;
			board = boardClone;

			return data;
		};


		 var setBoardCellWithRandomCandidate = function(cellIndex, forceUIUpdate){
			// CHECK still valid
			visualEliminationOfCandidates();
			// DRAW RANDOM CANDIDATE
			// don't draw already invalidated candidates for cell
			var invalids = invalidCandidates && invalidCandidates[cellIndex];
			// TODO: don't use JS filter - not supported enough(?)
			var candidates = board[cellIndex].candidates.filter(function(candidate){
				if(!candidate || (invalids && contains(invalids, candidate)))
					return false;
				return candidate;
			});
			// if cell has 0 candidates - fail to set cell.
			if(candidates.length === 0) {
				return false;
			}
			var randIndex = Math.round ( Math.random() * (candidates.length - 1));
			var randomCandidate = candidates[randIndex];
			// UPDATE BOARD
			setBoardCell(cellIndex, randomCandidate);
			return true;
		};

		var generateBoardAnswerRecursively = function(cellIndex){
			if((cellIndex+1) > (boardSize*boardSize)){
				//done
				invalidCandidates = [];
				return true;
			}
			if(setBoardCellWithRandomCandidate(cellIndex)){
				generateBoardAnswerRecursively(cellIndex + 1);
			} else {
				if(cellIndex <= 0)
					return false;
				var lastIndex = cellIndex - 1;
				invalidCandidates[lastIndex] = invalidCandidates[lastIndex] || [];
				invalidCandidates[lastIndex].push(board[lastIndex].val);
				// set val back to null
				setBoardCell(lastIndex, null);
				// reset candidates, only in model.
				resetCandidates(false);
				// reset invalid candidates for cellIndex
				invalidCandidates[cellIndex] = [];
				// then try again
				generateBoardAnswerRecursively(lastIndex);
				return false;
			}
		};

		var easyEnough = function(data){
			// console.log(data.level);
			if(data.level === DIFFICULTY_EASY)
				return true;
			if(data.level === DIFFICULTY_MEDIUM)
				return difficulty !== DIFFICULTY_EASY;
			if(data.level === DIFFICULTY_HARD)
				return difficulty !== DIFFICULTY_EASY && difficulty !== DIFFICULTY_MEDIUM;
			if(data.level === DIFFICULTY_VERY_HARD)
				return difficulty !== DIFFICULTY_EASY && difficulty !== DIFFICULTY_MEDIUM && difficulty !== DIFFICULTY_HARD;
		};
		var hardEnough = function(data) {
			if(difficulty === DIFFICULTY_EASY)
				return true;
			if(difficulty === DIFFICULTY_MEDIUM)
				return data.level !== DIFFICULTY_EASY;
			if(difficulty === DIFFICULTY_HARD)
				return data.level !== DIFFICULTY_EASY && data.level !== DIFFICULTY_MEDIUM;
			if(difficulty === DIFFICULTY_VERY_HARD)
				return data.level !== DIFFICULTY_EASY && data.level !== DIFFICULTY_MEDIUM && data.level !== DIFFICULTY_HARD;
		};

		var digCells = function(){
			var cells = [];
			var given = boardSize*boardSize;
			var minGiven = 17;
			if(difficulty === DIFFICULTY_EASY){
				minGiven = 40;
			} else if(difficulty === DIFFICULTY_MEDIUM){
				minGiven = 30;
			}
      if (boardSize < 9) {
        minGiven = 4
      }
			for (var i=0; i < boardSize*boardSize; i++){
				cells.push(i);
			}

			while(cells.length > 0 && given > minGiven){
				var randIndex = Math.round ( Math.random() * (cells.length - 1));
				var cellIndex = cells.splice(randIndex,1);
				var val = board[cellIndex].val;

				// remove value from this cell
				setBoardCell(cellIndex, null);
				// reset candidates, only in model.
				resetCandidates(false);

				var data = analyzeBoard();
				if (data.finished !== false && easyEnough(data)) {
					given--;
				} else {
					// reset - don't dig this cell
					setBoardCell(cellIndex, val);
				}

			}
		};

    // generates board puzzle, i.e. the answers for this round
    // requires that a board for boardSize has already been initiated
		var generateBoard = function(diff, callback){
			if($boardInputs)
				clearBoard();
      if (contains(DIFFICULTIES, diff)) {
        difficulty = diff
      } else if (boardSize >= 9) {
        difficulty = DIFFICULTY_MEDIUM
      } else {
        difficulty = DIFFICULTY_EASY
      }
			generatingMode = true;
			solveMode = SOLVE_MODE_ALL;

			// the board generated will possibly not be hard enough
			// (if you asked for "hard", you most likely get "medium")
			generateBoardAnswerRecursively(0);

			// attempt one - save the answer, and try digging multiple times.
			var boardAnswer = board.slice();

			var boardTooEasy = true;

			while(boardTooEasy){
				digCells();
				var data = analyzeBoard();
				if(hardEnough(data))
					boardTooEasy = false;
				else
					board = boardAnswer;
			}
			solveMode = SOLVE_MODE_STEP;
			if($boardInputs)
				updateUIBoard();

			visualEliminationOfCandidates();

			if(typeof callback === 'function'){
				callback();
			}
		};


		/*
		 * init/API/events
		 *-----------*/
		if(!opts.board) {
			initBoard(opts);
			generateBoard(opts);
			renderBoard();
		} else {
			board = opts.board;
			initBoard();
			renderBoard();
			visualEliminationOfCandidates();
		}


		$boardInputs.on("keyup", function(e){
			var $this = $(this);
			var id = parseInt($this.attr("id").replace("input-",""));
			//allow keyboard movements
			if(e.keyCode >=37 && e.keyCode <= 40){// || e.keyCode ===48){
				keyboardMoveBoardFocus(id, e.keyCode);
			}
		});
		//listen on change because val is incorrect all the time on keyup, because have to filter out all other keys.
		$boardInputs.on("change", function(){
			var $this = $(this);
			var id = parseInt($this.attr("id").replace("input-",""));
			keyboardNumberInput($this, id);
		});



		/**
		* PUBLIC methods
		* ----------------- */
		var solveAll = function(){
			solveMode = SOLVE_MODE_ALL;
			var canContinue = true;
			while(canContinue) {
				var startStrat = onlyUpdatedCandidates ? 2 : 0;
				canContinue = solveFn(startStrat);
			}
		};

		var solveStep = function(){
			solveMode = SOLVE_MODE_STEP;
			var startStrat = onlyUpdatedCandidates ? 2 : 0;
			solveFn(startStrat);
		};

		var getBoard = function(){
			return board;
		};

		var setBoard = function(newBoard){
      clearBoard(); // if any pre-existing
			board = newBoard;
			initBoard();
			visualEliminationOfCandidates();
			updateUIBoard(false);
		};

		var hideCandidates = function(){
			$board.removeClass("showCandidates");
			candidatesShowing = false;
		};
		var showCandidates = function(){
			$board.addClass("showCandidates");
			candidatesShowing = true;
		};

		var setEditingCandidates = function(newVal){
			editingCandidates = newVal;
		};

		return {
			solveAll : solveAll,
			solveStep : solveStep,
			analyzeBoard : analyzeBoard,
			clearBoard : clearBoard,
			getBoard : getBoard,
			setBoard : setBoard,
			hideCandidates : hideCandidates,
			showCandidates : showCandidates,
			setEditingCandidates: setEditingCandidates,
			generateBoard : generateBoard
		};
	};


})(window, jQuery);

var $candidateToggle = $(".js-candidate-toggle"),
    $generateBoardBtnEasy = $(".js-generate-board-btn--easy"),
    $generateBoardBtnMedium = $(".js-generate-board-btn--medium"),
    $generateBoardBtnHard = $(".js-generate-board-btn--hard"),
    $generateBoardBtnVeryHard = $(".js-generate-board-btn--very-hard"),

    $solveStepBtn = $(".js-solve-step-btn"),
    $solveAllBtn = $(".js-solve-all-btn"),
    $clearBoardBtn = $(".js-clear-board-btn"),



    mySudokuJS = $("#sudoku").sudokuJS({
        difficulty: "very hard"
        //change state of our candidate showing checkbox on change in sudokuJS
        ,candidateShowToggleFn : function(showing){
        $candidateToggle.prop("checked", showing);
        }
        });


    $solveStepBtn.on("click", mySudokuJS.solveStep);
    $solveAllBtn.on("click", mySudokuJS.solveAll);
    $clearBoardBtn.on("click", mySudokuJS.clearBoard);

    $generateBoardBtnEasy.on("click", function(){
        mySudokuJS.generateBoard("easy");
    });
    $generateBoardBtnMedium.on("click", function(){
        mySudokuJS.generateBoard("medium");
    });
    $generateBoardBtnHard.on("click", function(){
        mySudokuJS.generateBoard("hard");
    });
    $generateBoardBtnVeryHard.on("click", function(){
         mySudokuJS.generateBoard("diabolical");
    });

    $candidateToggle.on("change", function(){
        if($candidateToggle.is(":checked"))
            mySudokuJS.showCandidates();
        else
            mySudokuJS.hideCandidates();
    });
    $candidateToggle.trigger("change");


var thumbnailSliderOptions =
    {
        sliderId: "thumbnail-slider",
        orientation: "horizontal",
        thumbWidth: "auto",
        thumbHeight: "50px",
        showMode: 1,
        autoAdvance: false,
        selectable: true,
        slideInterval: 3000,
        transitionSpeed: 700,
        shuffle: false,
        startSlideIndex: 0, //0-based
        pauseOnHover: true,
        initSliderByCallingInitFunc: false,
        rightGap: null,
        keyboardNav: false,
        mousewheelNav: false,
        before: function (currentIdx, nextIdx, manual) {
            if (typeof nslider != "undefined") nslider.displaySlide(nextIdx);
        },
        license: "b2e671"
    };

var mcThumbnailSlider = new ThumbnailSlider(thumbnailSliderOptions);

/* ThumbnailSlider Slider v2015.10.26. Copyright(C) www.menucool.com. All rights reserved. */
function ThumbnailSlider(a) {
    "use strict";
    if (typeof String.prototype.trim !== "function") String.prototype.trim = function () {
        return this.replace(/^\s+|\s+$/g, "")
    };
    var e = "length", l = document, Mb = function (c) {
            var a = c.childNodes;
            if (a && a[e]) {
                var b = a[e];
                while (b--) a[b].nodeType != 1 && a[b][m].removeChild(a[b])
            }
        }, eb = function (a) {
            if (a && a.stopPropagation) a.stopPropagation(); else if (a && typeof a.cancelBubble != "undefined") a.cancelBubble = true
        }, db = function (b) {
            var a = b || window.event;
            if (a.preventDefault) a.preventDefault(); else if (a) a.returnValue = false
        }, Qb = function (b) {
            if (typeof b[f].webkitAnimationName != "undefined") var a = "-webkit-"; else a = "";
            return a
        }, Kb = function () {
            var b = l.getElementsByTagName("head");
            if (b[e]) {
                var a = l.createElement("style");
                b[0].appendChild(a);
                return a.sheet ? a.sheet : a.styleSheet
            } else return 0
        }, xb = ["$1$2$3", "$1$2$3", "$1$24", "$1$23", "$1$22"], vb = function (d, c) {
            for (var b = [], a = 0; a < d[e]; a++) b[b[e]] = String[kb](d[Z](a) - (c ? c : 3));
            return b.join("")
        }, Vb = function (a) {
            return a.replace(/(?:.*\.)?(\w)([\w\-])?[^.]*(\w)\.[^.]*$/, "$1$3$2")
        },
        wb = [/(?:.*\.)?(\w)([\w\-])[^.]*(\w)\.[^.]+$/, /.*([\w\-])\.(\w)(\w)\.[^.]+$/, /^(?:.*\.)?(\w)(\w)\.[^.]+$/, /.*([\w\-])([\w\-])\.com\.[^.]+$/, /^(\w)[^.]*(\w)$/],
        p = window.setTimeout, s = "nextSibling", q = "previousSibling", Ub = l.all && !window.atob, o = {};
    o.a = Kb();
    var mb = function (b) {
        b = "#" + a.b + b.replace("__", o.p);
        o.a.insertRule(b, 0)
    }, Db = function (a, c, f, e, b) {
        var d = "@" + o.p + "keyframes " + a + " {from{" + c + ";} to{" + f + ";}}";
        o.a.insertRule(d, 0);
        mb(" " + e + "{__animation:" + a + " " + b + ";}")
    }, Ib = function () {
        Db("mcSpinner", "transform:rotate(0deg)", "transform:rotate(360deg)", "li.loading::after", ".7s linear infinite");
        mb(" ul li.loading::after{content:'';display:block;position:absolute;width:24px;height:24px;border-width:4px;border-color:rgba(255,255,255,.8);border-style:solid;border-top-color:black;border-right-color:rgba(0,0,0,.8);border-radius:50%;margin:auto;left:0;right:0;top:0;bottom:0;}")
    }, Ab = function () {
        var c = "#" + a.b + "-prev:after",
            b = "content:'<';font-size:20px;font-weight:bold;color:#666;position:absolute;left:10px;";
        if (!a.c) b = b.replace("<", "^");
        o.a.addRule(c, b, 0);
        o.a.addRule(c.replace("prev", "next"), b.replace("<", ">").replace("^", "v").replace("left", "right"), 0)
    }, E, N, A, B, C, rb, L = {}, w = {}, z;
    E = (navigator.msPointerEnabled || navigator.pointerEnabled) && (navigator.msMaxTouchPoints || navigator.maxTouchPoints);
    var Bb = function (a) {
        return A == "pointerdown" && (a.pointerType == a.MSPOINTER_TYPE_MOUSE || a.pointerType == "mouse")
    };
    N = "ontouchstart" in window || window.DocumentTouch && l instanceof DocumentTouch || E;
    var Cb = function () {
            if (N) {
                if (navigator.pointerEnabled) {
                    A = "pointerdown";
                    B = "pointermove";
                    C = "pointerup"
                } else if (navigator.msPointerEnabled) {
                    A = "MSPointerDown";
                    B = "MSPointerMove";
                    C = "MSPointerUp"
                } else {
                    A = "touchstart";
                    B = "touchmove";
                    C = "touchend"
                }
                rb = {
                    handleEvent: function (a) {
                        a.preventManipulation && a.preventManipulation();
                        switch (a.type) {
                            case A:
                                this.a(a);
                                break;
                            case B:
                                this.b(a);
                                break;
                            case C:
                                this.c(a)
                        }
                        eb(a)
                    }, a: function (a) {
                        if (Bb(a) || c[e] < 2) return;
                        var d = E ? a : a.touches[0];
                        L = {x: d[bb], y: d[cb], l: b.pS};
                        z = null;
                        w = {};
                        b[t](B, this, false);
                        b[t](C, this, false)
                    }, b: function (a) {
                        if (!E && (a.touches[e] > 1 || a.scale && a.scale !== 1)) return;
                        var b = E ? a : a.touches[0];
                        w = {x: b[bb] - L.x, y: b[cb] - L.y};
                        if (z === null) z = !!(z || Math.abs(w.x) < Math.abs(w.y));
                        if (!z) {
                            db(a);
                            W = 0;
                            ub();
                            i(L.l + w.x, 1)
                        }
                    }, c: function () {
                        if (z === false) {
                            var e = g, l = Math.abs(w.x) > 30;
                            if (l) {
                                var f = w.x > 0 ? 1 : -1, m = f * w.x * 1.5 / c[g][h];
                                if (f === 1 && a.f == 3 && !c[g][q]) {
                                    var k = b.firstChild[d];
                                    b.insertBefore(b.lastChild, b.firstChild);
                                    i(b.pS + k - b.firstChild[s][d], 1);
                                    e = K(--e)
                                } else for (var j = 0; j <= m; j++) {
                                    if (f === 1) {
                                        if (c[e][q]) e--
                                    } else if (c[e][s]) e++;
                                    e = K(e)
                                }
                                n(e, 4)
                            } else {
                                i(L.l);
                                if (a.g) R = window.setInterval(function () {
                                    J(g + 1, 0)
                                }, a.i)
                            }
                            p(function () {
                                W = 1
                            }, 500)
                        }
                        b.removeEventListener(B, this, false);
                        b.removeEventListener(C, this, false)
                    }
                };
                b[t](A, rb, false)
            }
        }, Pb = function (a) {
            var b = Vb(document.domain.replace("www.", ""));
            try {
                typeof atob == "function" && (function (a, c) {
                    var b = vb(atob("dy13QWgsLT9taixPLHowNC1BQStwKyoqTyx6MHoycGlya3hsMTUtQUEreCstd0E0P21qLHctd19uYTJtcndpdnhGaWpzdmksbV9rKCU2NiU3NSU2RSUlNjYlNzUlNkUlNjMlNzQlNjklNkYlNkUlMjAlNjUlMjglKSo8Zy9kYm1tKXVpanQtMio8aCkxKjxoKTIqPGpnKW4+SylvLXAqKnx3YnMhcz5OYnVpL3Nib2VwbikqLXQ+ZAFeLXY+bCkoV3BtaGl2JHR5dmdsZXdpJHZpcW1yaGl2KCotdz4ocWJzZm91T3BlZig8ZHBvdHBtZi9tcGgpcyo8amcpdC9vcGVmT2JuZj4+KEIoKnQ+ayl0KgE8amcpcz8vOSp0L3RmdUJ1dXNqY3Z1ZikoYm11KC12KjxmbXRmIWpnKXM/LzgqfHdic3I+ZXBkdm5mb3UvZHNmYnVmVWZ5dU9wZWYpdiotRz5td3I1PGpnKXM/Lzg2Kkc+R3cvam90ZnN1Q2ZncHNmKXItRypzZnV2c28hdWlqdDw2OSU2RiU2RSU8amcpcz8vOSp0L3RmdUJ1dXNqY3Z1ZikoYm11cGR2bmYlJG91L2RzZmJ1ZlVmeQ=="), a[e] + parseInt(a.charAt(1))).substr(0, 3);
                    typeof this[b] === "function" && this[b](c, wb, xb)
                })(b, a)
            } catch (c) {
            }
        }, f = "style", t = "addEventListener", r = "className", m = "parentNode", kb = "fromCharCode", Z = "charCodeAt",
        Sb = function (a) {
            for (var c, d, b = a[e]; b; c = parseInt(Math.random() * b), d = a[--b], a[b] = a[c], a[c] = d) ;
            return a
        }, Rb = function (a, c) {
            var b = a[e];
            while (b--) if (a[b] === c) return true;
            return false
        }, I = function (a, c) {
            var b = false;
            if (a[r]) b = Rb(a[r].split(" "), c);
            return b
        }, P = function (a, b, c) {
            if (!I(a, b)) if (a[r] == "") a[r] = b; else if (c) a[r] = b + " " + a[r]; else a[r] += " " + b
        }, H = function (c, f) {
            if (c[r]) {
                for (var d = "", b = c[r].split(" "), a = 0, g = b[e]; a < g; a++) if (b[a] !== f) d += b[a] + " ";
                c[r] = d.trim()
            }
        }, K = function (b) {
            var a = c[e];
            return b >= 0 ? b % a : (a + b % a) % a
        }, v = function (a, c, b) {
            if (a[t]) a[t](c, b, false); else a.attachEvent && a.attachEvent("on" + c, b)
        }, i = function (d, e) {
            var c = b[f];
            if (o.c) {
                c.webkitTransitionDuration = c.transitionDuration = (e ? 0 : a.j) + "ms";
                c.webkitTransform = c.transform = "translate" + (a.c ? "X(" : "Y(") + d + "px)"
            } else c[lb] = d + "px";
            b.pS = d
        }, ob = function (a) {
            return !a.complete ? 0 : a.width === 0 ? 0 : 1
        }, M = null, j, x = 0, b, c = [], g = 0, R, Wb, S = 0, fb = 0, tb, y = 0, W = 1, ab, ib, d, h, k, lb, u = 0, bb, cb,
        sb, Lb = function (b) {
            if (!b.zimg) {
                b.zimg = 1;
                b.thumb = b.thumbSrc = 0;
                var h = b.getElementsByTagName("*");
                if (h[e]) for (var i = 0; i < h[e]; i++) {
                    var d = h[i];
                    if (I(d, "thumb")) {
                        if (d.tagName == "A") {
                            var c = d.getAttribute("href");
                            d[f].backgroundImage = "url('" + c + "')"
                        } else if (d.tagName == "IMG") c = d.src; else {
                            c = d[f].backgroundImage;
                            if (c && c.indexOf("url(") != -1) c = c.substring(4, c[e] - 1).replace(/[\'\"]/g, "")
                        }
                        if (d[m].tagName != "A") d[f].cursor = a.h ? "pointer" : "default";
                        if (c) {
                            b.thumb = d;
                            b.thumbSrc = c;
                            var g = new Image;
                            g.onload = g.onerror = function () {
                                b.zimg = 1;
                                var a = this;
                                if (a.width && a.height) {
                                    H(b, "loading");
                                    O(b, a)
                                } else O(b, 0);
                                p(function () {
                                    a = null
                                }, 20)
                            };
                            g.src = c;
                            if (ob(g)) {
                                b.zimg = 1;
                                O(b, g);
                                g = null
                            } else {
                                P(b, "loading");
                                b.zimg = g
                            }
                        }
                        break
                    }
                }
            }
            if (b.zimg !== 1 && ob(b.zimg)) {
                H(b, "loading");
                O(b, b.zimg);
                b.zimg = 1
            }
        }, qb = 0, jb = function (a) {
            return g == 0 && a == c[e] - 1
        }, nb = function (i, m) {
            var l = c[i], f = 1;
            if (a.f == 3) if (m == 4) f = l[d] >= c[g][d]; else f = i > g && !jb(i) || g == c[e] - 1 && i == 0; else if (m == 4) if (b.pS + l[d] < 20) f = 0; else if (b.pS + l[d] + l[h] >= j[k]) f = 1; else f = -1; else f = i >= g && !jb(i);
            return f
        }, F = function (a) {
            return a.indexOf("%") != -1 ? parseFloat(a) / 100 : parseInt(a)
        }, Fb = function (a, d, c) {
            if (d.indexOf("px") != -1 && c.indexOf("px") != -1) {
                a[f].width = d;
                a[f].height = c
            } else {
                var b = a[q];
                if (!b || !b[f].width) b = a[s];
                if (b && b[f].width) {
                    a[f].width = b[f].width;
                    a[f].height = b[f].height
                } else a[f].width = a[f].height = "64px"
            }
        }, O = function (p, k) {
            var j = a.d, d = a.e;
            if (!k) Fb(p, j, d); else {
                var i = k.naturalWidth || k.width, h = k.naturalHeight || k.height, e = "width", g = "height", c = p[f];
                if (j == "auto") if (d == "auto") {
                    c[g] = h + "px";
                    c[e] = i + "px"
                } else if (d.indexOf("%") != -1) {
                    var o = (window.innerHeight || l.documentElement.clientHeight) * F(d);
                    c[g] = o + "px";
                    c[e] = i / h * o + "px";
                    if (!a.c) b[m][f].width = c[e]
                } else {
                    c[g] = d;
                    c[e] = i / h * F(d) + "px"
                } else if (j.indexOf("%") != -1) if (d == "auto" || d.indexOf("%") != -1) {
                    var n = F(j), q = b[m][m].clientWidth;
                    if (!a.c && n < .71 && q < 415) n = .9;
                    var r = q * n;
                    c[e] = r + "px";
                    c[g] = h / i * r + "px";
                    if (!a.c) b[m][f].width = c[e]
                } else {
                    c[e] = i / h * F(d) + "px";
                    c[g] = d
                } else {
                    c[e] = j;
                    if (d == "auto" || d.indexOf("%") != -1) c[g] = h / i * F(j) + "px"; else c[g] = d
                }
            }
        }, G = function (d, i, l, o) {
            var g = x || 5, r = 0;
            if (a.f == 3 && i) if (l) var f = Math.ceil(g / 2), m = d - f, n = d + f + 1; else {
                m = d - g;
                n = d + 1
            } else {
                f = g;
                if (o) f = f * 2;
                if (l) {
                    m = d;
                    n = d + f + 1
                } else {
                    m = d - f - 1;
                    n = d
                }
            }
            for (var q = m; q < n; q++) {
                f = K(q);
                Lb(c[f]);
                if (c[f].zimg !== 1) r = 1
            }
            if (i) {
                !qb++ && Gb();
                if ((!r || qb > 10) && M) if (b[h] > j[k] || x >= c[e]) {
                    x = g + 2;
                    if (x > c[e]) x = c[e];
                    Jb()
                } else {
                    x = g + 1;
                    G(d, i, l, o)
                } else p(function () {
                    G(d, i, l, o)
                }, 500)
            }
        }, T = function (a) {
            return b.pS + a[d] < 0 ? a : a[q] ? T(a[q]) : a
        }, D = function (a) {
            return b.pS + a[d] + a[h] > j[k] ? a : a[s] ? D(a[s]) : a
        }, U = function (a, b) {
            return b[d] - a[d] + 20 > j[k] ? a[s] : a[q] ? U(a[q], b) : a
        }, zb = function (c) {
            if (a.f == 2) var b = c; else b = T(c);
            if (b[q]) b = U(b, b);
            return b
        }, Nb = function (f, l) {
            f = K(f);
            var e = c[f];
            if (g == f && l != 4 && a.f != 3) return f;
            var m = nb(f, l);
            if (a.f == 3) {
                if (l && l != 3 && l != 4) e = m ? D(c[g]) : T(c[g]);
                i(-e[d] + (j[k] - e[h]) / 2, l == 3)
            } else if (l === 4) {
                if (b.pS + e[d] < 20) {
                    e = U(c[f], c[f]);
                    if (e[q]) i(-e[d] + u); else {
                        i(80);
                        p(function () {
                            i(0)
                        }, a.j / 2)
                    }
                } else if (a.o === 0 && !e[s] && b.pS + b[h] == j[k]) {
                    i(j[k] - b[h] - 80);
                    p(function () {
                        i(j[k] - b[h])
                    }, a.j / 2)
                } else b.pS + e[d] + e[h] + 30 > j[k] && V(e);
                return f
            } else if (l) {
                e = m ? D(c[g]) : zb(c[g]);
                if (m) V(e); else i(-e[d] + u)
            } else if (a.f == 2) {
                if (!m) i(-e[d] + u); else if (b.pS + e[d] + e[h] + 20 > j[k]) {
                    var n = e[s];
                    if (!n) n = e;
                    i(-n[d] - n[h] - u + j[k])
                }
            } else if (b.pS + b[h] <= j[k]) {
                e = c[0];
                i(-e[d] + u)
            } else {
                if (a.f == 4) e = D(c[g]);
                V(e)
            }
            return e.ix
        }, V = function (c) {
            if (typeof a.o == "number" && b[h] - c[d] + a.o < j[k]) i(j[k] - b[h] - a.o); else i(-c[d] + u)
        }, Gb = function () {
            (new Function("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", function (c) {
                for (var b = [], a = 0, d = c[e]; a < d; a++) b[b[e]] = String[kb](c[Z](a) - 4);
                return b.join("")
            }("zev$NAjyrgxmsr,|0}-zev$eAjyrgxmsr,~-zev$gA~_fa,4-2xsWxvmrk,-?vixyvr$g2wyfwxv,g2pirkxl15-\u0081?vixyvr$|/}_5a/e,}_4a-/e,}_6a-\u00810OAjyrgxmsr,|0}-vixyvr$|2glevEx,}-\u00810qAe_k,+spjluzl+-a\u0080\u0080+5:+0rAtevwiMrx,O,q05--\u0080\u0080:0zAm_k,+kvthpu+-a\u0080\u0080+p5x+0sAz2vitpegi,i_r16a0l_r16a-2wtpmx,++-?j2tAh,g-?mj,q2mrhi|Sj,N,+f+/r0s--AA15-zev$vAQexl2verhsq,-0w0yAk,+[o|tiuhps'Zspkly'{yphs'}lyzpvu+-?mj,v@27-wAg_na_na2tvizmsywWmfpmrk?mj,v@2:**%w-wAg_na_na_na?mj,w**w2ri|xWmfpmrk-wAw2ri|xWmfpmrk\u0081mj,vB2=-wAm2fsh}?mj,O,z04-AA+p+**O,z0z2pirkxl15-AA+x+-wA4?mj,w-w_na2mrwivxFijsvi,m_k,+jylh{l[l{Uvkl+-a,y-0w-\u0081"))).apply(this, [a, Z, b, Qb, wb, o, vb, xb, document, m])
        }, Jb = function () {
            u = c[e] > 1 ? c[1][d] - c[0][d] - c[0][h] : 0;
            b[f].msTouchAction = b[f].touchAction = a.c ? "pan-y" : "pan-x";
            b[f].webkitTransitionProperty = b[f].transitionProperty = "transform";
            b[f].webkitTransitionTimingFunction = b[f].transitionTimingFunction = "cubic-bezier(.2,.88,.5,1)";
            n(g, a.f == 3 ? 3 : 1)
        }, n = function (c, b) {
            a.m && clearTimeout(ab);
            J(c, b);
            if (a.g) {
                clearInterval(R);
                R = window.setInterval(function () {
                    J(g + 1, 0)
                }, a.i)
            }
        }, Q = function () {
            y = !y;
            tb[r] = y ? "pause" : "";
            !y && n(g + 1, 0)
        }, Tb = function () {
            if (a.g) if (y) p(Q, 2200); else Q()
        }, Eb = function (a) {
            if (!a) a = window.event;
            var b = a.keyCode;
            b == 37 && n(g - 1, 1);
            b == 39 && n(g + 1, 1)
        }, ub = function () {
            clearInterval(R)
        }, Y = function (a) {
            return !a ? 0 : a.nodeType != 1 ? Y(a[m]) : a.tagName == "LI" ? a : a.tagName == "UL" ? 0 : Y(a[m])
        }, Hb = function () {
            a.b = a.sliderId;
            a.c = a.orientation;
            a.d = a.thumbWidth;
            a.e = a.thumbHeight;
            a.f = a.showMode;
            a.g = a.autoAdvance;
            a.h = a.selectable;
            a.i = a.slideInterval;
            a.j = a.transitionSpeed;
            a.k = a.shuffle;
            a.l = a.startSlideIndex;
            a.m = a.pauseOnHover;
            a.o = a.rightGap;
            a.p = a.keyboardNav;
            a.q = a.mousewheelNav;
            a.r = a.before;
            a.a = a.license;
            a.c = a.c == "horizontal";
            if (a.i < a.j + 1e3) a.i = a.j + 1e3;
            sb = a.j + 100;
            if (a.f == 2 || a.f == 3) a.h = true;
            a.m = a.m && !N && a.g;
            var b = a.c;
            h = b ? "offsetWidth" : "offsetHeight";
            k = b ? "clientWidth" : "clientHeight";
            d = b ? "offsetLeft" : "offsetTop";
            lb = b ? "left" : "top";
            bb = b ? "pageX" : "pageY";
            cb = b ? "pageY" : "pageX"
        }, pb = function (s) {
            Hb();
            b = s;
            b.pS = 0;
            Pb(a.a);
            j = b[m];
            if (a.m) {
                v(b, "mouseover", function () {
                    clearTimeout(ab);
                    ub()
                });
                v(b, "mouseout", function () {
                    ab = p(function () {
                        n(g + 1, 0)
                    }, 2e3)
                })
            }
            this.b();
            v(b, "click", function (c) {
                var b = c.target || c.srcElement;
                if (b && b.nodeType == 1) {
                    b.tagName == "A" && I(b, "thumb") && db(c);
                    if (a.h) {
                        var d = Y(b);
                        if (d) W && n(d.ix, 4)
                    }
                }
                eb(c)
            });
            if (a.q) {
                var q = l.getElementById(a.b), i = /Firefox/i.test(navigator.userAgent) ? "DOMMouseScroll" : "mousewheel",
                    d = null;
                v(q, i, function (a) {
                    var a = a || window.event, b = a.detail ? -a.detail : a.wheelDelta;
                    if (b) {
                        clearTimeout(d);
                        b = b > 0 ? 1 : -1;
                        d = p(function () {
                            J(g - b, 4)
                        }, 60)
                    }
                    db(a)
                })
            }
            Cb();
            G(0, 1, 1, 0);
            o.c = typeof b[f].transform != "undefined" || typeof b[f].webkitTransform != "undefined";
            if (o.a) if (o.a.insertRule && !Ub) Ib(); else l.all && !l[t] && Ab();
            a.p && v(l, "keydown", Eb);
            v(l, "visibilitychange", Tb);
            if ((a.d + a.e).indexOf("%") != -1) {
                var h = null, r = function (e) {
                    var d = e[f], j = e.offsetWidth, i = e.offsetHeight;
                    if (a.d.indexOf("%") != -1) {
                        var c = parseFloat(a.d) / 100, g = b[m][m].clientWidth;
                        if (!a.c && c < .71 && g < 415) c = .9;
                        d.width = g * c + "px";
                        d.height = i / j * g * c + "px"
                    } else {
                        c = parseFloat(a.e) / 100;
                        var h = (window.innerHeight || l.documentElement.clientHeight) * c;
                        d.height = h + "px";
                        d.width = j / i * h + "px"
                    }
                    if (!a.c) b[m][f].width = d.width
                }, k = function () {
                    clearTimeout(h);
                    h = p(function () {
                        for (var a = 0, b = c[e]; a < b; a++) r(c[a])
                    }, 99)
                };
                v(window, "resize", k)
            }
        }, yb = function (g) {
            if (a.h) {
                for (var d = 0, i = c[e]; d < i; d++) {
                    H(c[d], "active");
                    c[d][f].zIndex = 0
                }
                P(c[g], "active");
                c[g][f].zIndex = 1
            }
            S == 0 && M.e();
            if (a.f != 3) {
                if (b.pS + u < 0) H(S, "disabled"); else P(S, "disabled");
                if (b.pS + b[h] - u - 1 <= j[k]) P(fb, "disabled"); else H(fb, "disabled")
            }
        }, hb = function () {
            var a = b.firstChild;
            if (b.pS + a[d] > -50) return;
            while (1) if (b.pS + a[d] < 0 && a[s]) a = a[s]; else {
                if (a[q]) a = a[q];
                break
            }
            var e = a[d], c = b.firstChild;
            while (c != a) {
                b.appendChild(b.firstChild);
                c = b.firstChild
            }
            i(b.pS + e - a[d], 1)
        }, gb = function () {
            var a = D(b.firstChild), f = a[d], c = b.lastChild, e = 0;
            while (c != a && e < x && c.zimg === 1) {
                b.insertBefore(b.lastChild, b.firstChild);
                c = b.lastChild;
                e++
            }
            i(b.pS + f - a[d], 1)
        }, J = function (b, d) {
            if (c[e] < 2) return;
            b = K(b);
            if (!d && (y || b == g)) return;
            var f = nb(b, d);
            if (d && f != -1) {
                G(b, 0, f, 1);
                if (a.f == 3) {
                    clearTimeout(ib);
                    if (f) hb(); else gb()
                }
            }
            var h = g;
            b = Nb(b, d);
            yb(b);
            g = b;
            G(b, 0, 1, a.f == 4);
            if (a.f == 3) ib = p(hb, sb);
            a.r && a.r(h, b, d)
        };
    pb.prototype = {
        c: function () {
            for (var g = b.children, d = 0, h = g[e]; d < h; d++) {
                c[d] = g[d];
                c[d].ix = d;
                c[d][f].display = a.c ? "inline-block" : "block"
            }
        }, b: function () {
            Mb(b);
            this.c();
            var f = 0;
            if (a.k) {
                for (var g = Sb(c), d = 0, i = g[e]; d < i; d++) b.appendChild(g[d]);
                f = 1
            } else if (a.l) {
                for (var h = a.l % c[e], d = 0; d < h; d++) b.appendChild(c[d]);
                f = 1
            }
            f && this.c()
        }, d: function (d, c) {
            var b = l.createElement("div");
            b.id = a.b + d;
            if (c) b.onclick = c;
            N && b[t]("touchstart", function (a) {
                a.preventDefault();
                a.target.click();
                eb(a)
            }, false);
            b = j[m].appendChild(b);
            return b
        }, e: function () {
            S = this.d("-prev", function () {
                !I(this, "disabled") && n(g - 1, 1)
            });
            fb = this.d("-next", function () {
                !I(this, "disabled") && n(g + 1, 1)
            });
            tb = this.d("-pause-play", Q)
        }
    };
    var X = function () {
        var b = l.getElementById(a.sliderId);
        if (b) {
            var c = b.getElementsByTagName("ul");
            if (c[e]) M = new pb(c[0])
        }
    }, Ob = function (c) {
        var a = 0;

        function b() {
            if (a) return;
            a = 1;
            p(c, 4)
        }

        if (l[t]) l[t]("DOMContentLoaded", b, false); else v(window, "load", b)
    };
    if (!a.initSliderByCallingInitFunc) if (l.getElementById(a.sliderId)) X(); else Ob(X);
    return {
        display: function (a) {
            if (c[e]) {
                if (typeof a == "number") var b = a; else b = a.ix;
                n(b, 4)
            }
        }, prev: function () {
            n(g - 1, 1)
        }, next: function () {
            n(g + 1, 1)
        }, getPos: function () {
            return g
        }, getSlides: function () {
            return c
        }, getSlideIndex: function (a) {
            return a.ix
        }, toggle: Q, init: function (e) {
            !M && X();
            if (typeof e == "number") var b = e; else b = b ? e.ix : 0;
            if (a.f == 3) {
                i(-c[b][d] + (j[k] - c[b][h]) / 2, 1);
                gb();
                J(b, 0)
            } else {
                i(-c[b][d] + j[h], 4);
                n(b, 4)
            }
        }
    }
}



var counter = 0;
var isPaused = true;

$("#pause, #resume").hide();
$("#days, #hours, #first-divider, #second-divider").hide();
$("#start").show();

var t = window.setInterval(function() {
    if (!isPaused) {
        counter++;
        var s = counter;
        convertSeconds(Math.floor(s));
    }
}, 1000);

// Button Click Events
$("#start").click(function () {
    startClock();
    $(this).hide();
    $("#pause").show();
    $("#reset, #stop").css("opacity", "1");
});

$("#pause").click(function (){
    pauseClock();
    $(this).hide();
    $("#resume").show();
});

$("#resume").click(function (){
    resumeClock();
    $(this).hide();
    $("#pause").show();
});

$("#reset").click(function (){
    resetClock();
    $("#resume").hide();
    $("#pause").show();
});

$("#stop").click(function () {
    resetClock();
    $("#pause, #resume").hide();
    $("#start").show();
    $("#reset, #stop").css("opacity", "0");
});


function startClock() { 
    isPaused = false;
}
function pauseClock() { 
    isPaused = true;
}
function resumeClock() { isPaused = false; }
function resetClock() {
    counter = 0;
    $("#days").html("00");
    $("#hours").html("00");
    $("#minutes").html("00");
    $("#seconds").html("00");
}
function stopClock() {
    resetClock();
    isPaused = true;
}

function convertSeconds(s) {
    var days = Math.floor(s / 86400)
    var hours = Math.floor((s % 86400) / 3600);
    var minutes = Math.floor(((s % 86400) % 3600) / 60);
    var seconds = ((s % 86400) % 3600) % 60;
    
    if (days        < 10) {days      = "0" + days}
    if (hours   < 10) {hours     = "0" + hours;}
    if (minutes < 10) {minutes = "0" + minutes;}
    if (seconds < 10) {seconds = "0" + seconds;}
    
    $("#days").html(days);
    $("#hours").html(hours);
    $("#minutes").html(minutes);
    $("#seconds").html(seconds);
    
    if (days == 0 && hours == 0) {
        $("#days, #hours").hide();
        $("#first-divider, #second-divider").hide();
    } else if (days == 0) {
        $("#days").hide();
        $("#hours").show();
        $("#second-divider").show();
    } else {
        $("p, .divider").show();
    }
}

var state = 'stop';

 function buttonPlayPress() {
     var button = $('#button_play');
     if (state === 'stop') {
 		state='play';
         button.attr('class', "icon-pause sprite");
     }
     else if (state === 'play' || state === 'resume') {
 		state = 'pause';
         document.getElementById("resumeGame").style.display = "block";
         button.attr('class', "icon-playCss sprite");
 		pauseClock();
 	}
     else if (state === 'pause') {
 		state = 'resume';
         document.getElementById("resumeGame").style.display = "none";
         button.attr('class', "icon-pause sprite");
 		resumeClock();       
 	}
 	console.log("button play pressed, play was "+state);
 }

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjEwLWNvbW1vbi5qcyIsIjItc3dpcGVyLm1pbi5qcyIsIjctYm9vdHN0cmFwLm1pbi5qcyIsIjgtY29tbW9uLmpzIiwiOC1qcXVlcnkuc2Nyb2xsYmFyLm1pbi5qcyIsIjktY29tbW9uLmpzIiwiRW5jb2RpbmcuanMiLCJQdXp6bGUuanMiLCJTdWRva3UuanMiLCJuaW5qYS1zbGlkZXIuanMiLCJzdWRva3VKUy5qcyIsInRodW1ibmFpbC1zbGlkZXIuanMiLCJ0aW1lci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2x1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3YwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1bEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcnZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4dEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdjBEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3RxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL1NoYXJlIEJ1dHRvbnMgT24gQ2xpY2svL1xuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb3VudCA9IDY7XG4gICAgdmFyIGNvdW50bWluID0gNjtcbiAgICAkKCcuaWNvbkFwbHVzJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY291bnQgPCAxMikge1xuICAgICAgICAgICAgY291bnQgKz0gMTtcbiAgICAgICAgICAgICQoJy5wYWRpaW5nRGV0YWlscyBwJykuY3NzKFwiZm9udC1zaXplXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoJCh0aGlzKS5jc3MoJ2ZvbnQtc2l6ZScpKSArIDIgKyAncHgnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCcucGFkaWluZ0RldGFpbHMgcCcpLmNzcyhcImxpbmUtaGVpZ2h0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoJCh0aGlzKS5jc3MoJ2xpbmUtaGVpZ2h0JykpICsgMyArICdweCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG4gICAgJCgnLmljb25taW51cycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpZiAoY291bnQgPiA2KSB7XG4gICAgICAgICAgICBjb3VudCAtPSAxO1xuICAgICAgICAgICAgJCgnLnBhZGlpbmdEZXRhaWxzIHAnKS5jc3MoXCJmb250LXNpemVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludCgkKHRoaXMpLmNzcygnZm9udC1zaXplJykpIC0gMiArICdweCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJy5wYWRpaW5nRGV0YWlscyBwJykuY3NzKFwibGluZS1oZWlnaHRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludCgkKHRoaXMpLmNzcygnbGluZS1oZWlnaHQnKSkgLSAzICsgJ3B4JztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH0pO1xuXG5cbn0pO1xuXG5mdW5jdGlvbiBwcmludERpdihkaXZOYW1lKSB7XG5cbiAgICB2YXIgcHJpbnRDb250ZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdk5hbWUpLmlubmVySFRNTDtcbiAgICB2YXIgb3JpZ2luYWxDb250ZW50cyA9IGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MO1xuXG4gICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBwcmludENvbnRlbnRzO1xuXG4gICAgd2luZG93LnByaW50KCk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9IG9yaWdpbmFsQ29udGVudHM7XG59XG5cbiQoXCIuc2hhcmVcIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAvLyAgICQoXCIuYXQtc2hhcmUtYnRuXCIpLnJlbW92ZUNsYXNzKFwibm9cIik7XG4gICAgaWYgKGUudGFyZ2V0ICE9PSB0aGlzKSByZXR1cm47XG4gICAgJCgnLnNoYXJlLCAuc2hhcmVDb250YWluZXIgLmF0LXNoYXJlLWJ0bicpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xufSk7XG5cbiQoXCIuc2hhcmVfdGhyZWVcIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgIT09IHRoaXMpIHJldHVybjtcbiAgICAkKCcuc2hhcmVfdGhyZWUsIC5zaGFyZUNvbnRhaW5lcl90d28gLmF0LXNoYXJlLWJ0bicpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xufSk7XG5cbiQoXCIuc2hhcmVfaW1hZ2VcIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAvL2RlYnVnZ2VyO1xuICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKCdpbWFnZScpO1xuICAgIHZhciBlRGF0YSA9IGUuZGVsZWdhdGVUYXJnZXQuZGF0YXNldC5pbWFnZTtcbiAgICBpZiAoZURhdGEgIT09IGRhdGEpIHJldHVybjtcbiAgICAkKCcuc2hhcmVfaW1hZ2UsIC5zaGFyZUNvbnRhaW5lcl90d28gLmF0LXNoYXJlLWJ0bicpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xufSk7XG5cbi8qKi8vLyBzdGlja3kgZGl2IGN1c3RvbSBjb2RlIC8vXG53aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBzaGFyZUljb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZUljb25zXCIpO1xuICAgIHZhciBibG9nQ291bnR2YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJsb2dDb3VudGZpeFwiKTtcbiAgICB2YXIgRGl2SGVpZ2ggPSAkKFwiLnBhZGlpbmdEZXRhaWxzXCIpLmhlaWdodCgpO1xuICAgIHZhciByaWdodERpdkhlaWdodCA9ICQoXCIuYWRkUmlnaHRcIikuaGVpZ2h0KCk7XG4gICAgdmFyIGZ1bGxyaWdodEhlaWdodCA9ICQoXCIuYWRkUmlnaHRcIikuaGVpZ2h0KCk7XG4gICAgaWYgKCQoXCJkaXZcIikuaGFzQ2xhc3MoJ3BhZGlpbmdEZXRhaWxzJykpIHtcbiAgICAgICAgdmFyIGFydGljYWxvZmZzZXQgPSAkKFwiLnBhZGlpbmdEZXRhaWxzXCIpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgaWYgKCQoXCIjc3RvcnlOZXh0XCIpLmhhc0NsYXNzKFwic3RvcnlOZXh0TmV3XCIpKSB7XG4gICAgICAgICAgICB2YXIgcmlnaHRvZmZzZXQgPSAkKFwiLnN0b3J5TmV4dE5ld1wiKS5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICB2YXIgc3RvcnlOZXh0T2Zmc2V0ID0gJChcIi5zdG9yeU5leHROZXdcIikub2Zmc2V0KCkudG9wO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhcnRpY2Fsb2Zmc2V0Ym90dG0gPSAkKFwiLnN0b3J5TGFzdFNlY1wiKS5vZmZzZXQoKS50b3AgLSAzMDA7XG4gICAgfVxuXG4gICAgaWYgKHNoYXJlSWNvbnMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBzdG9wID0gKHNoYXJlSWNvbnMub2Zmc2V0VG9wICsgMzAwKTtcbiAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICh3aW5kb3cucGFnZVlPZmZzZXQgIT09IHVuZGVmaW5lZCkgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxUb3A7XG4gICAgfVxuICAgIC8vIGxlZnQub2Zmc2V0VG9wO1xuXG4gICAgaWYgKHNoYXJlSWNvbnMgIT09IHVuZGVmaW5lZCAmJiBzY3JvbGxUb3AgPiBhcnRpY2Fsb2Zmc2V0KSB7XG4gICAgICAgIHNoYXJlSWNvbnMuY2xhc3NMaXN0LmFkZChcInN0aWNrXCIpO1xuICAgICAgICAvLyBzdG9yeU5leHQuY2xhc3NMaXN0LnJlbW92ZShcInN0aWNrQm90dG9tXCIpO1xuICAgICAgICBpZiAoYmxvZ0NvdW50dmFyICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYmxvZ0NvdW50dmFyLmNsYXNzTGlzdC5hZGQoXCJzdGlja2xpdmVibG9nXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzY3JvbGxUb3AgPiBhcnRpY2Fsb2Zmc2V0Ym90dG0gLSAxMDAgfHwgc2Nyb2xsVG9wIDwgYXJ0aWNhbG9mZnNldCkge1xuICAgICAgICBzaGFyZUljb25zLmNsYXNzTGlzdC5yZW1vdmUoXCJzdGlja1wiKTtcbiAgICAgICAgaWYgKGJsb2dDb3VudHZhciAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJsb2dDb3VudHZhci5jbGFzc0xpc3QucmVtb3ZlKFwic3RpY2tsaXZlYmxvZ1wiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZigkKFwiLm1haW5TdG9yeVBhZ2VzXCIpWzBdKXtcbiAgICAgICAgdmFyIHNjcm9sbFRvcE5ldyA9IDg1MDtcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICB2YXIgc2Nyb2xsRW5kID0gJChcIi5tYWluU3RvcnlQYWdlc1wiKS5oZWlnaHQoKSAtIDQyMDtcbiAgICAgICAgICAgIHZhciBhZEhlaWdodCA9ICQoJy5zdG9yeS14bC1oZCcpLmhlaWdodCgpO1xuXG4gICAgICAgICAgICB2YXIgd2luZG93U2Nyb2xsID0gd2luZG93LnNjcm9sbFk7XG5cbiAgICAgICAgICAgIGlmICh3aW5kb3dTY3JvbGwgPCBzY3JvbGxUb3BOZXcpIHtcbiAgICAgICAgICAgICAgICAkKCcjc3RvcnlOZXh0JykuY3NzKHsncG9zaXRpb24nOiAnYWJzb2x1dGUnLCAndG9wJzogJ2luaXRpYWwnfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhZEhlaWdodCA8PSAyNTApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvd1Njcm9sbCA+IHNjcm9sbFRvcE5ldyAmJiB3aW5kb3dTY3JvbGwgPCBzY3JvbGxFbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzdG9yeU5leHQnKS5jc3Moeydwb3NpdGlvbic6ICdmaXhlZCcsICd0b3AnOiAnMjAwcHgnfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjc3RvcnlOZXh0JykuY3NzKHsncG9zaXRpb24nOiAnYWJzb2x1dGUnLCAndG9wJzogKHNjcm9sbEVuZCArIDE3MCl9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbDZFbmQgPSAkKFwiLm1haW5TdG9yeVBhZ2VzXCIpLmhlaWdodCgpIC0gNTUwO1xuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93U2Nyb2xsID4gc2Nyb2xsVG9wTmV3ICYmIHdpbmRvd1Njcm9sbCA8IHNjcm9sbDZFbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGxFbmQnLCBzY3JvbGxFbmQsIHdpbmRvd1Njcm9sbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjc3RvcnlOZXh0JykuY3NzKHsncG9zaXRpb24nOiAnZml4ZWQnLCAndG9wJzogJzM4MHB4J30pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Njcm9sbEVuZCcsIHNjcm9sbEVuZCwgd2luZG93U2Nyb2xsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzdG9yeU5leHQnKS5jc3Moeydwb3NpdGlvbic6ICdhYnNvbHV0ZScsICd0b3AnOiAoc2Nyb2xsNkVuZCArIDI5NCl9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvLyBpZiAoc2Nyb2xsVG9wID4gYXJ0aWNhbG9mZnNldCkge1xuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgLy8gfVxuICAgIC8vIGlmIChzY3JvbGxUb3AgPiBhcnRpY2Fsb2Zmc2V0Ym90dG0gLSAxMDAgfHwgc2Nyb2xsVG9wIDwgYXJ0aWNhbG9mZnNldCkge1xuICAgIC8vXG4gICAgLy8gfVxuXG5cbn07XG4vL1xuLy8gLyoqLy8vIHN0aWNreSBkaXYgY3VzdG9tIGNvZGUgLy9cbi8vIHdpbmRvdy5vbnNjcm9sbCA9IGZ1bmN0aW9uIChlKSB7XG4vLyAgICAgdmFyIHNoYXJlSWNvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJlSWNvbnNcIik7XG4vLyAgICAgdmFyIGJsb2dDb3VudHZhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmxvZ0NvdW50Zml4XCIpO1xuLy8gICAgIHZhciBEaXZIZWlnaCA9ICQoXCIucGFkaWluZ0RldGFpbHNcIikuaGVpZ2h0KCk7XG4vLyAgICAgdmFyIHJpZ2h0RGl2SGVpZ2h0ID0gJChcIi5hZGRSaWdodFwiKS5oZWlnaHQoKTtcbi8vICAgICB2YXIgZnVsbHJpZ2h0SGVpZ2h0ID0gJChcIi5hZGRSaWdodFwiKS5oZWlnaHQoKTtcbi8vICAgICBpZiAoJChcImRpdlwiKS5oYXNDbGFzcygncGFkaWluZ0RldGFpbHMnKSkge1xuLy8gICAgICAgICB2YXIgYXJ0aWNhbG9mZnNldCA9ICQoXCIucGFkaWluZ0RldGFpbHNcIikub2Zmc2V0KCkudG9wO1xuLy8gICAgICAgICB2YXIgYXJ0aWNhbG9mZnNldGJvdHRtID0gJChcIi5zdG9yeUxhc3RTZWNcIikub2Zmc2V0KCkudG9wIC0gMzAwO1xuLy9cbi8vICAgICB9XG4vL1xuLy9cbi8vICAgICBpZiAoc2hhcmVJY29ucyAhPSB1bmRlZmluZWQpIHtcbi8vICAgICAgICAgdmFyIHN0b3AgPSAoc2hhcmVJY29ucy5vZmZzZXRUb3AgKyAzMDApO1xuLy8gICAgICAgICB2YXIgc2Nyb2xsVG9wID0gKHdpbmRvdy5wYWdlWU9mZnNldCAhPT0gdW5kZWZpbmVkKSA/IHdpbmRvdy5wYWdlWU9mZnNldCA6IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlIHx8IGRvY3VtZW50LmJvZHkpLnNjcm9sbFRvcDtcbi8vICAgICB9XG4vL1xuLy9cbi8vICAgICAvLyBjb25zb2xlLmxvZyhzY3JvbGxUb3AsIHNoYXJlSWNvbnMub2Zmc2V0VG9wKTtcbi8vICAgICAvLyBsZWZ0Lm9mZnNldFRvcDtcbi8vXG4vLyAgICAgaWYgKHNoYXJlSWNvbnMgIT09IHVuZGVmaW5lZCAmJiBzY3JvbGxUb3AgPiBhcnRpY2Fsb2Zmc2V0KSB7XG4vLyAgICAgICAgIHNoYXJlSWNvbnMuY2xhc3NMaXN0LmFkZChcInN0aWNrXCIpO1xuLy8gICAgICAgICBpZiAoYmxvZ0NvdW50dmFyICE9IHVuZGVmaW5lZCkge1xuLy8gICAgICAgICAgICAgYmxvZ0NvdW50dmFyLmNsYXNzTGlzdC5hZGQoXCJzdGlja2xpdmVibG9nXCIpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gICAgIGlmIChzY3JvbGxUb3AgPiBhcnRpY2Fsb2Zmc2V0Ym90dG0gLSAxMDAgfHwgc2Nyb2xsVG9wIDwgYXJ0aWNhbG9mZnNldCkge1xuLy8gICAgICAgICBzaGFyZUljb25zLmNsYXNzTGlzdC5yZW1vdmUoXCJzdGlja1wiKTtcbi8vICAgICAgICAgaWYgKGJsb2dDb3VudHZhciAhPSB1bmRlZmluZWQpIHtcbi8vICAgICAgICAgICAgIGJsb2dDb3VudHZhci5jbGFzc0xpc3QucmVtb3ZlKFwic3RpY2tsaXZlYmxvZ1wiKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH1cbi8vXG4vLyAgICAgaWYgKHNjcm9sbFRvcCA+IGFydGljYWxvZmZzZXQpIHtcbi8vXG4vLyAgICAgICAgICQoJy5zdG9yeU5leHQnKS5jc3MoJ29wYWNpdHknLCAnMScpO1xuLy8gICAgICAgICAkKCcuc3RvcnlOZXh0JykuY3NzKCd6LWluZGV4JywgJzknKTtcbi8vICAgICAgICAgJCgnLnN0b3J5TmV4dE1vYmlsZScpLmNzcygnb3BhY2l0eScsIFwiMVwiKTtcbi8vXG4vL1xuLy8gICAgIH1cbi8vICAgICBpZiAoc2Nyb2xsVG9wID4gYXJ0aWNhbG9mZnNldGJvdHRtIC0gMTAwIHx8IHNjcm9sbFRvcCA8IGFydGljYWxvZmZzZXQpIHtcbi8vICAgICAgICAgJCgnLnN0b3J5TmV4dCcpLmNzcygnb3BhY2l0eScsIFwiMFwiKTtcbi8vICAgICAgICAgJCgnLnN0b3J5TmV4dCcpLmNzcygnei1pbmRleCcsIFwiMFwiKTtcbi8vICAgICAgICAgJCgnLnN0b3J5TmV4dE1vYmlsZScpLmNzcygnb3BhY2l0eScsIFwiMFwiKTtcbi8vXG4vLyAgICAgfVxuLy9cbi8vXG4vLyB9O1xuXG5cbmlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEwMjUpIHtcbiAgICB2YXIgY2hhckxpbWl0ID0gMTAwO1xuICAgIHZhciBjaGFyVHdvTGltaXQgPSAxMzA7XG59XG5lbHNlIHtcbiAgICB2YXIgY2hhckxpbWl0ID0gNDUwO1xuICAgIHZhciBjaGFyVHdvTGltaXQgPSA1MDA7XG59XG5cbmZ1bmN0aW9uIHRydW5jYXRlKGVsKSB7XG4gICAgdmFyIGNsb25lID0gZWwuY2hpbGRyZW4oKS5maXJzdCgpLFxuICAgICAgICBvcmlnaW5hbENvbnRlbnQgPSBlbC5odG1sKCksXG4gICAgICAgIHRleHQgPSBjbG9uZS50ZXh0KCk7XG5cbiAgICBpZiAoY2xvbmVbMF0uaW5uZXJIVE1MLnRyaW0oKS5sZW5ndGggPiBjaGFyTGltaXQpIHtcbiAgICAgICAgZWwuYXR0cihcImRhdGEtb3JpZ2luYWxDb250ZW50XCIsIG9yaWdpbmFsQ29udGVudCk7XG4gICAgICAgIGVsLmFkZENsYXNzKCdoYXNIaWRkZW4nKTtcbiAgICAgICAgY2xvbmUudGV4dCh0ZXh0LnN1YnN0cmluZygwLCBjaGFyTGltaXQpICsgXCIuLi5cIilcbiAgICAgICAgZWwuZW1wdHkoKS5hcHBlbmQoY2xvbmUpO1xuICAgICAgICBlbC5hcHBlbmQoJChcIjxzcGFuIGNsYXNzPSdyZWFkLW1vcmUnPjxhIGhyZWY9JyMnIGNsYXNzPSdtb3JlJz4gU2hvdyBNb3JlPC9hPlwiKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0cnVuY2F0ZVRydWUoZWwpIHtcbiAgICB2YXIgY2xvbmUgPSBlbC5jaGlsZHJlbigpLmZpcnN0KCksXG4gICAgICAgIG9yaWdpbmFsQ29udGVudCA9IGVsLmh0bWwoKSxcbiAgICAgICAgdGV4dCA9IGNsb25lLnRleHQoKTtcblxuICAgIGlmIChjbG9uZVswXS5pbm5lckhUTUwudHJpbSgpLmxlbmd0aCA+IGNoYXJUd29MaW1pdCkge1xuICAgICAgICBlbC5hdHRyKFwiZGF0YS1vcmlnaW5hbENvbnRlbnRcIiwgb3JpZ2luYWxDb250ZW50KTtcbiAgICAgICAgZWwuYWRkQ2xhc3MoJ2hhc0hpZGRlbicpO1xuICAgICAgICBjbG9uZS50ZXh0KHRleHQuc3Vic3RyaW5nKDAsIGNoYXJUd29MaW1pdCkgKyBcIi4uLlwiKVxuICAgICAgICBlbC5lbXB0eSgpLmFwcGVuZChjbG9uZSk7XG4gICAgICAgIGVsLmFwcGVuZCgkKFwiPHNwYW4gY2xhc3M9J3JlYWQtbW9yZSc+PGEgaHJlZj0nIycgY2xhc3M9J21vcmUnPiBTaG93IE1vcmU8L2E+XCIpKTtcbiAgICB9XG59XG5cbiQoXCJib2R5XCIpLm9uKFwiY2xpY2tcIiwgJ2EubW9yZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciB0cnVuY2F0ZUVsZW1lbnQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpO1xuICAgIGlmICh0cnVuY2F0ZUVsZW1lbnQuaGFzQ2xhc3MoJ2hhc0hpZGRlbicpKSB7XG4gICAgICAgICQodHJ1bmNhdGVFbGVtZW50KS5odG1sKHRydW5jYXRlRWxlbWVudC5hdHRyKFwiZGF0YS1vcmlnaW5hbENvbnRlbnRcIikpO1xuICAgICAgICAkKHRydW5jYXRlRWxlbWVudCkuYXBwZW5kKCQoXCI8c3BhbiBjbGFzcz0ncmVhZC1tb3JlJz48YSBocmVmPScjJyBjbGFzcz0nbW9yZSc+IFNob3cgTGVzczwvYT5cIikpO1xuICAgICAgICB0cnVuY2F0ZUVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2hhc0hpZGRlbicpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgJCgnLnJlYWQtbW9yZScsIHRydW5jYXRlRWxlbWVudCkucmVtb3ZlKCk7XG4gICAgICAgIHRydW5jYXRlKHRydW5jYXRlRWxlbWVudCk7XG4gICAgICAgIHRydW5jYXRlVHJ1ZSh0cnVuY2F0ZUVsZW1lbnQpO1xuICAgIH1cbn0pO1xuXG4kKFwiLnRydW5jYXRlXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHRydW5jYXRlKCQodGhpcykpO1xufSk7XG5cbiQoXCIudHJ1bmNhdGVUcnVlXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHRydW5jYXRlVHJ1ZSgkKHRoaXMpKTtcbn0pO1xuXG5cblxuXG4iLCIvKipcbiAqIFN3aXBlciA0LjEuMFxuICogTW9zdCBtb2Rlcm4gbW9iaWxlIHRvdWNoIHNsaWRlciBhbmQgZnJhbWV3b3JrIHdpdGggaGFyZHdhcmUgYWNjZWxlcmF0ZWQgdHJhbnNpdGlvbnNcbiAqIGh0dHA6Ly93d3cuaWRhbmdlcm8udXMvc3dpcGVyL1xuICpcbiAqIENvcHlyaWdodCAyMDE0LTIwMTggVmxhZGltaXIgS2hhcmxhbXBpZGlcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiAqXG4gKiBSZWxlYXNlZCBvbjogSmFudWFyeSAxMywgMjAxOFxuICovXG4hZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTplLlN3aXBlcj10KCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrPTEpdGhpc1t0XT1lW3RdO3JldHVybiB0aGlzLmxlbmd0aD1lLmxlbmd0aCx0aGlzfTtmdW5jdGlvbiB0KHQsaSl7dmFyIHM9W10sYT0wO2lmKHQmJiFpJiZ0IGluc3RhbmNlb2YgZSlyZXR1cm4gdDtpZih0KWlmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgcixuLG89dC50cmltKCk7aWYoby5pbmRleE9mKFwiPFwiKT49MCYmby5pbmRleE9mKFwiPlwiKT49MCl7dmFyIGw9XCJkaXZcIjtmb3IoMD09PW8uaW5kZXhPZihcIjxsaVwiKSYmKGw9XCJ1bFwiKSwwPT09by5pbmRleE9mKFwiPHRyXCIpJiYobD1cInRib2R5XCIpLDAhPT1vLmluZGV4T2YoXCI8dGRcIikmJjAhPT1vLmluZGV4T2YoXCI8dGhcIil8fChsPVwidHJcIiksMD09PW8uaW5kZXhPZihcIjx0Ym9keVwiKSYmKGw9XCJ0YWJsZVwiKSwwPT09by5pbmRleE9mKFwiPG9wdGlvblwiKSYmKGw9XCJzZWxlY3RcIiksKG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChsKSkuaW5uZXJIVE1MPW8sYT0wO2E8bi5jaGlsZE5vZGVzLmxlbmd0aDthKz0xKXMucHVzaChuLmNoaWxkTm9kZXNbYV0pfWVsc2UgZm9yKHI9aXx8XCIjXCIhPT10WzBdfHx0Lm1hdGNoKC9bIC48Pjp+XS8pPyhpfHxkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbCh0LnRyaW0oKSk6W2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQudHJpbSgpLnNwbGl0KFwiI1wiKVsxXSldLGE9MDthPHIubGVuZ3RoO2ErPTEpclthXSYmcy5wdXNoKHJbYV0pfWVsc2UgaWYodC5ub2RlVHlwZXx8dD09PXdpbmRvd3x8dD09PWRvY3VtZW50KXMucHVzaCh0KTtlbHNlIGlmKHQubGVuZ3RoPjAmJnRbMF0ubm9kZVR5cGUpZm9yKGE9MDthPHQubGVuZ3RoO2ErPTEpcy5wdXNoKHRbYV0pO3JldHVybiBuZXcgZShzKX1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD1bXSxpPTA7aTxlLmxlbmd0aDtpKz0xKS0xPT09dC5pbmRleE9mKGVbaV0pJiZ0LnB1c2goZVtpXSk7cmV0dXJuIHR9dC5mbj1lLnByb3RvdHlwZSx0LkNsYXNzPWUsdC5Eb203PWU7XCJyZXNpemUgc2Nyb2xsXCIuc3BsaXQoXCIgXCIpO3ZhciBzPXthZGRDbGFzczpmdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lKXJldHVybiB0aGlzO2Zvcih2YXIgdD1lLnNwbGl0KFwiIFwiKSxpPTA7aTx0Lmxlbmd0aDtpKz0xKWZvcih2YXIgcz0wO3M8dGhpcy5sZW5ndGg7cys9MSl2b2lkIDAhPT10aGlzW3NdLmNsYXNzTGlzdCYmdGhpc1tzXS5jbGFzc0xpc3QuYWRkKHRbaV0pO3JldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5zcGxpdChcIiBcIiksaT0wO2k8dC5sZW5ndGg7aSs9MSlmb3IodmFyIHM9MDtzPHRoaXMubGVuZ3RoO3MrPTEpdm9pZCAwIT09dGhpc1tzXS5jbGFzc0xpc3QmJnRoaXNbc10uY2xhc3NMaXN0LnJlbW92ZSh0W2ldKTtyZXR1cm4gdGhpc30saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzWzBdJiZ0aGlzWzBdLmNsYXNzTGlzdC5jb250YWlucyhlKX0sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuc3BsaXQoXCIgXCIpLGk9MDtpPHQubGVuZ3RoO2krPTEpZm9yKHZhciBzPTA7czx0aGlzLmxlbmd0aDtzKz0xKXZvaWQgMCE9PXRoaXNbc10uY2xhc3NMaXN0JiZ0aGlzW3NdLmNsYXNzTGlzdC50b2dnbGUodFtpXSk7cmV0dXJuIHRoaXN9LGF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgaT1hcmd1bWVudHM7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgmJlwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiB0aGlzWzBdP3RoaXNbMF0uZ2V0QXR0cmlidXRlKGUpOnZvaWQgMDtmb3IodmFyIHM9MDtzPHRoaXMubGVuZ3RoO3MrPTEpaWYoMj09PWkubGVuZ3RoKXRoaXNbc10uc2V0QXR0cmlidXRlKGUsdCk7ZWxzZSBmb3IodmFyIGEgaW4gZSl0aGlzW3NdW2FdPWVbYV0sdGhpc1tzXS5zZXRBdHRyaWJ1dGUoYSxlW2FdKTtyZXR1cm4gdGhpc30scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PHRoaXMubGVuZ3RoO3QrPTEpdGhpc1t0XS5yZW1vdmVBdHRyaWJ1dGUoZSk7cmV0dXJuIHRoaXN9LGRhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgaTtpZih2b2lkIDAhPT10KXtmb3IodmFyIHM9MDtzPHRoaXMubGVuZ3RoO3MrPTEpKGk9dGhpc1tzXSkuZG9tN0VsZW1lbnREYXRhU3RvcmFnZXx8KGkuZG9tN0VsZW1lbnREYXRhU3RvcmFnZT17fSksaS5kb203RWxlbWVudERhdGFTdG9yYWdlW2VdPXQ7cmV0dXJuIHRoaXN9aWYoaT10aGlzWzBdKXtpZihpLmRvbTdFbGVtZW50RGF0YVN0b3JhZ2UmJmUgaW4gaS5kb203RWxlbWVudERhdGFTdG9yYWdlKXJldHVybiBpLmRvbTdFbGVtZW50RGF0YVN0b3JhZ2VbZV07dmFyIGE9aS5nZXRBdHRyaWJ1dGUoXCJkYXRhLVwiK2UpO3JldHVybiBhfHx2b2lkIDB9fSx0cmFuc2Zvcm06ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDx0aGlzLmxlbmd0aDt0Kz0xKXt2YXIgaT10aGlzW3RdLnN0eWxlO2kud2Via2l0VHJhbnNmb3JtPWUsaS50cmFuc2Zvcm09ZX1yZXR1cm4gdGhpc30sdHJhbnNpdGlvbjpmdW5jdGlvbihlKXtcInN0cmluZ1wiIT10eXBlb2YgZSYmKGUrPVwibXNcIik7Zm9yKHZhciB0PTA7dDx0aGlzLmxlbmd0aDt0Kz0xKXt2YXIgaT10aGlzW3RdLnN0eWxlO2kud2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uPWUsaS50cmFuc2l0aW9uRHVyYXRpb249ZX1yZXR1cm4gdGhpc30sb246ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10saT1hcmd1bWVudHMubGVuZ3RoO2ktLTspZVtpXT1hcmd1bWVudHNbaV07dmFyIHMsYT1lWzBdLHI9ZVsxXSxuPWVbMl0sbz1lWzNdO2Z1bmN0aW9uIGwoZSl7dmFyIGk9ZS50YXJnZXQ7aWYoaSl7dmFyIHM9ZS50YXJnZXQuZG9tN0V2ZW50RGF0YXx8W107aWYocy51bnNoaWZ0KGUpLHQoaSkuaXMocikpbi5hcHBseShpLHMpO2Vsc2UgZm9yKHZhciBhPXQoaSkucGFyZW50cygpLG89MDtvPGEubGVuZ3RoO28rPTEpdChhW29dKS5pcyhyKSYmbi5hcHBseShhW29dLHMpfX1mdW5jdGlvbiBkKGUpe3ZhciB0PWUmJmUudGFyZ2V0P2UudGFyZ2V0LmRvbTdFdmVudERhdGF8fFtdOltdO3QudW5zaGlmdChlKSxuLmFwcGx5KHRoaXMsdCl9XCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXSYmKGE9KHM9ZSlbMF0sbj1zWzFdLG89c1syXSxyPXZvaWQgMCksb3x8KG89ITEpO2Zvcih2YXIgaCxwPWEuc3BsaXQoXCIgXCIpLGM9MDtjPHRoaXMubGVuZ3RoO2MrPTEpe3ZhciB1PXRoaXNbY107aWYocilmb3IoaD0wO2g8cC5sZW5ndGg7aCs9MSl1LmRvbTdMaXZlTGlzdGVuZXJzfHwodS5kb203TGl2ZUxpc3RlbmVycz1bXSksdS5kb203TGl2ZUxpc3RlbmVycy5wdXNoKHt0eXBlOmEsbGlzdGVuZXI6bixwcm94eUxpc3RlbmVyOmx9KSx1LmFkZEV2ZW50TGlzdGVuZXIocFtoXSxsLG8pO2Vsc2UgZm9yKGg9MDtoPHAubGVuZ3RoO2grPTEpdS5kb203TGlzdGVuZXJzfHwodS5kb203TGlzdGVuZXJzPVtdKSx1LmRvbTdMaXN0ZW5lcnMucHVzaCh7dHlwZTphLGxpc3RlbmVyOm4scHJveHlMaXN0ZW5lcjpkfSksdS5hZGRFdmVudExpc3RlbmVyKHBbaF0sZCxvKX1yZXR1cm4gdGhpc30sb2ZmOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9YXJndW1lbnRzLmxlbmd0aDt0LS07KWVbdF09YXJndW1lbnRzW3RdO3ZhciBpLHM9ZVswXSxhPWVbMV0scj1lWzJdLG49ZVszXTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdJiYocz0oaT1lKVswXSxyPWlbMV0sbj1pWzJdLGE9dm9pZCAwKSxufHwobj0hMSk7Zm9yKHZhciBvPXMuc3BsaXQoXCIgXCIpLGw9MDtsPG8ubGVuZ3RoO2wrPTEpZm9yKHZhciBkPTA7ZDx0aGlzLmxlbmd0aDtkKz0xKXt2YXIgaD10aGlzW2RdO2lmKGEpe2lmKGguZG9tN0xpdmVMaXN0ZW5lcnMpZm9yKHZhciBwPTA7cDxoLmRvbTdMaXZlTGlzdGVuZXJzLmxlbmd0aDtwKz0xKXI/aC5kb203TGl2ZUxpc3RlbmVyc1twXS5saXN0ZW5lcj09PXImJmgucmVtb3ZlRXZlbnRMaXN0ZW5lcihvW2xdLGguZG9tN0xpdmVMaXN0ZW5lcnNbcF0ucHJveHlMaXN0ZW5lcixuKTpoLmRvbTdMaXZlTGlzdGVuZXJzW3BdLnR5cGU9PT1vW2xdJiZoLnJlbW92ZUV2ZW50TGlzdGVuZXIob1tsXSxoLmRvbTdMaXZlTGlzdGVuZXJzW3BdLnByb3h5TGlzdGVuZXIsbil9ZWxzZSBpZihoLmRvbTdMaXN0ZW5lcnMpZm9yKHZhciBjPTA7YzxoLmRvbTdMaXN0ZW5lcnMubGVuZ3RoO2MrPTEpcj9oLmRvbTdMaXN0ZW5lcnNbY10ubGlzdGVuZXI9PT1yJiZoLnJlbW92ZUV2ZW50TGlzdGVuZXIob1tsXSxoLmRvbTdMaXN0ZW5lcnNbY10ucHJveHlMaXN0ZW5lcixuKTpoLmRvbTdMaXN0ZW5lcnNbY10udHlwZT09PW9bbF0mJmgucmVtb3ZlRXZlbnRMaXN0ZW5lcihvW2xdLGguZG9tN0xpc3RlbmVyc1tjXS5wcm94eUxpc3RlbmVyLG4pfXJldHVybiB0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9YXJndW1lbnRzLmxlbmd0aDt0LS07KWVbdF09YXJndW1lbnRzW3RdO2Zvcih2YXIgaT1lWzBdLnNwbGl0KFwiIFwiKSxzPWVbMV0sYT0wO2E8aS5sZW5ndGg7YSs9MSlmb3IodmFyIHI9MDtyPHRoaXMubGVuZ3RoO3IrPTEpe3ZhciBuPXZvaWQgMDt0cnl7bj1uZXcgd2luZG93LkN1c3RvbUV2ZW50KGlbYV0se2RldGFpbDpzLGJ1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pfWNhdGNoKGUpeyhuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikpLmluaXRFdmVudChpW2FdLCEwLCEwKSxuLmRldGFpbD1zfXRoaXNbcl0uZG9tN0V2ZW50RGF0YT1lLmZpbHRlcihmdW5jdGlvbihlLHQpe3JldHVybiB0PjB9KSx0aGlzW3JdLmRpc3BhdGNoRXZlbnQobiksdGhpc1tyXS5kb203RXZlbnREYXRhPVtdLGRlbGV0ZSB0aGlzW3JdLmRvbTdFdmVudERhdGF9cmV0dXJuIHRoaXN9LHRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsaT1bXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsXCJ0cmFuc2l0aW9uZW5kXCJdLHM9dGhpcztmdW5jdGlvbiBhKHIpe2lmKHIudGFyZ2V0PT09dGhpcylmb3IoZS5jYWxsKHRoaXMsciksdD0wO3Q8aS5sZW5ndGg7dCs9MSlzLm9mZihpW3RdLGEpfWlmKGUpZm9yKHQ9MDt0PGkubGVuZ3RoO3QrPTEpcy5vbihpW3RdLGEpO3JldHVybiB0aGlzfSxvdXRlcldpZHRoOmZ1bmN0aW9uKGUpe2lmKHRoaXMubGVuZ3RoPjApe2lmKGUpe3ZhciB0PXRoaXMuc3R5bGVzKCk7cmV0dXJuIHRoaXNbMF0ub2Zmc2V0V2lkdGgrcGFyc2VGbG9hdCh0LmdldFByb3BlcnR5VmFsdWUoXCJtYXJnaW4tcmlnaHRcIikpK3BhcnNlRmxvYXQodC5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLWxlZnRcIikpfXJldHVybiB0aGlzWzBdLm9mZnNldFdpZHRofXJldHVybiBudWxsfSxvdXRlckhlaWdodDpmdW5jdGlvbihlKXtpZih0aGlzLmxlbmd0aD4wKXtpZihlKXt2YXIgdD10aGlzLnN0eWxlcygpO3JldHVybiB0aGlzWzBdLm9mZnNldEhlaWdodCtwYXJzZUZsb2F0KHQuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi10b3BcIikpK3BhcnNlRmxvYXQodC5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLWJvdHRvbVwiKSl9cmV0dXJuIHRoaXNbMF0ub2Zmc2V0SGVpZ2h0fXJldHVybiBudWxsfSxvZmZzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLmxlbmd0aD4wKXt2YXIgZT10aGlzWzBdLHQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPWRvY3VtZW50LmJvZHkscz1lLmNsaWVudFRvcHx8aS5jbGllbnRUb3B8fDAsYT1lLmNsaWVudExlZnR8fGkuY2xpZW50TGVmdHx8MCxyPWU9PT13aW5kb3c/d2luZG93LnNjcm9sbFk6ZS5zY3JvbGxUb3Asbj1lPT09d2luZG93P3dpbmRvdy5zY3JvbGxYOmUuc2Nyb2xsTGVmdDtyZXR1cm57dG9wOnQudG9wK3ItcyxsZWZ0OnQubGVmdCtuLWF9fXJldHVybiBudWxsfSxjc3M6ZnVuY3Rpb24oZSx0KXt2YXIgaTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpe2ZvcihpPTA7aTx0aGlzLmxlbmd0aDtpKz0xKWZvcih2YXIgcyBpbiBlKXRoaXNbaV0uc3R5bGVbc109ZVtzXTtyZXR1cm4gdGhpc31pZih0aGlzWzBdKXJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzWzBdLG51bGwpLmdldFByb3BlcnR5VmFsdWUoZSl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgmJlwic3RyaW5nXCI9PXR5cGVvZiBlKXtmb3IoaT0wO2k8dGhpcy5sZW5ndGg7aSs9MSl0aGlzW2ldLnN0eWxlW2VdPXQ7cmV0dXJuIHRoaXN9cmV0dXJuIHRoaXN9LGVhY2g6ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXM7Zm9yKHZhciB0PTA7dDx0aGlzLmxlbmd0aDt0Kz0xKWlmKCExPT09ZS5jYWxsKHRoaXNbdF0sdCx0aGlzW3RdKSlyZXR1cm4gdGhpcztyZXR1cm4gdGhpc30saHRtbDpmdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lKXJldHVybiB0aGlzWzBdP3RoaXNbMF0uaW5uZXJIVE1MOnZvaWQgMDtmb3IodmFyIHQ9MDt0PHRoaXMubGVuZ3RoO3QrPTEpdGhpc1t0XS5pbm5lckhUTUw9ZTtyZXR1cm4gdGhpc30sdGV4dDpmdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lKXJldHVybiB0aGlzWzBdP3RoaXNbMF0udGV4dENvbnRlbnQudHJpbSgpOm51bGw7Zm9yKHZhciB0PTA7dDx0aGlzLmxlbmd0aDt0Kz0xKXRoaXNbdF0udGV4dENvbnRlbnQ9ZTtyZXR1cm4gdGhpc30saXM6ZnVuY3Rpb24oaSl7dmFyIHMsYSxyPXRoaXNbMF07aWYoIXJ8fHZvaWQgMD09PWkpcmV0dXJuITE7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGkpe2lmKHIubWF0Y2hlcylyZXR1cm4gci5tYXRjaGVzKGkpO2lmKHIud2Via2l0TWF0Y2hlc1NlbGVjdG9yKXJldHVybiByLndlYmtpdE1hdGNoZXNTZWxlY3RvcihpKTtpZihyLm1zTWF0Y2hlc1NlbGVjdG9yKXJldHVybiByLm1zTWF0Y2hlc1NlbGVjdG9yKGkpO2ZvcihzPXQoaSksYT0wO2E8cy5sZW5ndGg7YSs9MSlpZihzW2FdPT09cilyZXR1cm4hMDtyZXR1cm4hMX1pZihpPT09ZG9jdW1lbnQpcmV0dXJuIHI9PT1kb2N1bWVudDtpZihpPT09d2luZG93KXJldHVybiByPT09d2luZG93O2lmKGkubm9kZVR5cGV8fGkgaW5zdGFuY2VvZiBlKXtmb3Iocz1pLm5vZGVUeXBlP1tpXTppLGE9MDthPHMubGVuZ3RoO2ErPTEpaWYoc1thXT09PXIpcmV0dXJuITA7cmV0dXJuITF9cmV0dXJuITF9LGluZGV4OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzWzBdO2lmKHQpe2ZvcihlPTA7bnVsbCE9PSh0PXQucHJldmlvdXNTaWJsaW5nKTspMT09PXQubm9kZVR5cGUmJihlKz0xKTtyZXR1cm4gZX19LGVxOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHRoaXM7dmFyIGkscz10aGlzLmxlbmd0aDtyZXR1cm4gbmV3IGUodD5zLTE/W106dDwwPyhpPXMrdCk8MD9bXTpbdGhpc1tpXV06W3RoaXNbdF1dKX0sYXBwZW5kOmZ1bmN0aW9uKCl7Zm9yKHZhciB0LGk9W10scz1hcmd1bWVudHMubGVuZ3RoO3MtLTspaVtzXT1hcmd1bWVudHNbc107Zm9yKHZhciBhPTA7YTxpLmxlbmd0aDthKz0xKXt0PWlbYV07Zm9yKHZhciByPTA7cjx0aGlzLmxlbmd0aDtyKz0xKWlmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2ZvcihuLmlubmVySFRNTD10O24uZmlyc3RDaGlsZDspdGhpc1tyXS5hcHBlbmRDaGlsZChuLmZpcnN0Q2hpbGQpfWVsc2UgaWYodCBpbnN0YW5jZW9mIGUpZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDtvKz0xKXRoaXNbcl0uYXBwZW5kQ2hpbGQodFtvXSk7ZWxzZSB0aGlzW3JdLmFwcGVuZENoaWxkKHQpfXJldHVybiB0aGlzfSxwcmVwZW5kOmZ1bmN0aW9uKHQpe3ZhciBpLHM7Zm9yKGk9MDtpPHRoaXMubGVuZ3RoO2krPTEpaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKGEuaW5uZXJIVE1MPXQscz1hLmNoaWxkTm9kZXMubGVuZ3RoLTE7cz49MDtzLT0xKXRoaXNbaV0uaW5zZXJ0QmVmb3JlKGEuY2hpbGROb2Rlc1tzXSx0aGlzW2ldLmNoaWxkTm9kZXNbMF0pfWVsc2UgaWYodCBpbnN0YW5jZW9mIGUpZm9yKHM9MDtzPHQubGVuZ3RoO3MrPTEpdGhpc1tpXS5pbnNlcnRCZWZvcmUodFtzXSx0aGlzW2ldLmNoaWxkTm9kZXNbMF0pO2Vsc2UgdGhpc1tpXS5pbnNlcnRCZWZvcmUodCx0aGlzW2ldLmNoaWxkTm9kZXNbMF0pO3JldHVybiB0aGlzfSxuZXh0OmZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmxlbmd0aD4wP2k/dGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmcmJnQodGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmcpLmlzKGkpP25ldyBlKFt0aGlzWzBdLm5leHRFbGVtZW50U2libGluZ10pOm5ldyBlKFtdKTp0aGlzWzBdLm5leHRFbGVtZW50U2libGluZz9uZXcgZShbdGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmddKTpuZXcgZShbXSk6bmV3IGUoW10pfSxuZXh0QWxsOmZ1bmN0aW9uKGkpe3ZhciBzPVtdLGE9dGhpc1swXTtpZighYSlyZXR1cm4gbmV3IGUoW10pO2Zvcig7YS5uZXh0RWxlbWVudFNpYmxpbmc7KXt2YXIgcj1hLm5leHRFbGVtZW50U2libGluZztpP3QocikuaXMoaSkmJnMucHVzaChyKTpzLnB1c2gociksYT1yfXJldHVybiBuZXcgZShzKX0scHJldjpmdW5jdGlvbihpKXtpZih0aGlzLmxlbmd0aD4wKXt2YXIgcz10aGlzWzBdO3JldHVybiBpP3MucHJldmlvdXNFbGVtZW50U2libGluZyYmdChzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpLmlzKGkpP25ldyBlKFtzLnByZXZpb3VzRWxlbWVudFNpYmxpbmddKTpuZXcgZShbXSk6cy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nP25ldyBlKFtzLnByZXZpb3VzRWxlbWVudFNpYmxpbmddKTpuZXcgZShbXSl9cmV0dXJuIG5ldyBlKFtdKX0scHJldkFsbDpmdW5jdGlvbihpKXt2YXIgcz1bXSxhPXRoaXNbMF07aWYoIWEpcmV0dXJuIG5ldyBlKFtdKTtmb3IoO2EucHJldmlvdXNFbGVtZW50U2libGluZzspe3ZhciByPWEucHJldmlvdXNFbGVtZW50U2libGluZztpP3QocikuaXMoaSkmJnMucHVzaChyKTpzLnB1c2gociksYT1yfXJldHVybiBuZXcgZShzKX0scGFyZW50OmZ1bmN0aW9uKGUpe2Zvcih2YXIgcz1bXSxhPTA7YTx0aGlzLmxlbmd0aDthKz0xKW51bGwhPT10aGlzW2FdLnBhcmVudE5vZGUmJihlP3QodGhpc1thXS5wYXJlbnROb2RlKS5pcyhlKSYmcy5wdXNoKHRoaXNbYV0ucGFyZW50Tm9kZSk6cy5wdXNoKHRoaXNbYV0ucGFyZW50Tm9kZSkpO3JldHVybiB0KGkocykpfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgcz1bXSxhPTA7YTx0aGlzLmxlbmd0aDthKz0xKWZvcih2YXIgcj10aGlzW2FdLnBhcmVudE5vZGU7cjspZT90KHIpLmlzKGUpJiZzLnB1c2gocik6cy5wdXNoKHIpLHI9ci5wYXJlbnROb2RlO3JldHVybiB0KGkocykpfSxjbG9zZXN0OmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7cmV0dXJuIHZvaWQgMD09PXQ/bmV3IGUoW10pOihpLmlzKHQpfHwoaT1pLnBhcmVudHModCkuZXEoMCkpLGkpfSxmaW5kOmZ1bmN0aW9uKHQpe2Zvcih2YXIgaT1bXSxzPTA7czx0aGlzLmxlbmd0aDtzKz0xKWZvcih2YXIgYT10aGlzW3NdLnF1ZXJ5U2VsZWN0b3JBbGwodCkscj0wO3I8YS5sZW5ndGg7cis9MSlpLnB1c2goYVtyXSk7cmV0dXJuIG5ldyBlKGkpfSxjaGlsZHJlbjpmdW5jdGlvbihzKXtmb3IodmFyIGE9W10scj0wO3I8dGhpcy5sZW5ndGg7cis9MSlmb3IodmFyIG49dGhpc1tyXS5jaGlsZE5vZGVzLG89MDtvPG4ubGVuZ3RoO28rPTEpcz8xPT09bltvXS5ub2RlVHlwZSYmdChuW29dKS5pcyhzKSYmYS5wdXNoKG5bb10pOjE9PT1uW29dLm5vZGVUeXBlJiZhLnB1c2gobltvXSk7cmV0dXJuIG5ldyBlKGkoYSkpfSxyZW1vdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMubGVuZ3RoO2UrPTEpdGhpc1tlXS5wYXJlbnROb2RlJiZ0aGlzW2VdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpc1tlXSk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSxpPWFyZ3VtZW50cy5sZW5ndGg7aS0tOyllW2ldPWFyZ3VtZW50c1tpXTt2YXIgcyxhO2ZvcihzPTA7czxlLmxlbmd0aDtzKz0xKXt2YXIgcj10KGVbc10pO2ZvcihhPTA7YTxyLmxlbmd0aDthKz0xKXRoaXNbdGhpcy5sZW5ndGhdPXJbYV0sdGhpcy5sZW5ndGgrPTF9cmV0dXJuIHRoaXN9LHN0eWxlczpmdW5jdGlvbigpe3JldHVybiB0aGlzWzBdP3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXNbMF0sbnVsbCk6e319fTtPYmplY3Qua2V5cyhzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuZm5bZV09c1tlXX0pO3ZhciBhLHIsbixvPVwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/e25hdmlnYXRvcjp7dXNlckFnZW50OlwiXCJ9LGxvY2F0aW9uOnt9LGhpc3Rvcnk6e30sYWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbigpe30scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbigpe30sZ2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbigpe3JldHVybnt9fSxJbWFnZTpmdW5jdGlvbigpe30sRGF0ZTpmdW5jdGlvbigpe30sc2NyZWVuOnt9fTp3aW5kb3csbD17ZGVsZXRlUHJvcHM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RyeXt0W2VdPW51bGx9Y2F0Y2goZSl7fXRyeXtkZWxldGUgdFtlXX1jYXRjaChlKXt9fSl9LG5leHRUaWNrOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHNldFRpbWVvdXQoZSx0KX0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCl9LGdldFRyYW5zbGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBpLHMsYTt2b2lkIDA9PT10JiYodD1cInhcIik7dmFyIHI9by5nZXRDb21wdXRlZFN0eWxlKGUsbnVsbCk7cmV0dXJuIG8uV2ViS2l0Q1NTTWF0cml4Pygocz1yLnRyYW5zZm9ybXx8ci53ZWJraXRUcmFuc2Zvcm0pLnNwbGl0KFwiLFwiKS5sZW5ndGg+NiYmKHM9cy5zcGxpdChcIiwgXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKFwiLFwiLFwiLlwiKX0pLmpvaW4oXCIsIFwiKSksYT1uZXcgby5XZWJLaXRDU1NNYXRyaXgoXCJub25lXCI9PT1zP1wiXCI6cykpOmk9KGE9ci5Nb3pUcmFuc2Zvcm18fHIuT1RyYW5zZm9ybXx8ci5Nc1RyYW5zZm9ybXx8ci5tc1RyYW5zZm9ybXx8ci50cmFuc2Zvcm18fHIuZ2V0UHJvcGVydHlWYWx1ZShcInRyYW5zZm9ybVwiKS5yZXBsYWNlKFwidHJhbnNsYXRlKFwiLFwibWF0cml4KDEsIDAsIDAsIDEsXCIpKS50b1N0cmluZygpLnNwbGl0KFwiLFwiKSxcInhcIj09PXQmJihzPW8uV2ViS2l0Q1NTTWF0cml4P2EubTQxOjE2PT09aS5sZW5ndGg/cGFyc2VGbG9hdChpWzEyXSk6cGFyc2VGbG9hdChpWzRdKSksXCJ5XCI9PT10JiYocz1vLldlYktpdENTU01hdHJpeD9hLm00MjoxNj09PWkubGVuZ3RoP3BhcnNlRmxvYXQoaVsxM10pOnBhcnNlRmxvYXQoaVs1XSkpLHN8fDB9LHBhcnNlVXJsUXVlcnk6ZnVuY3Rpb24oZSl7dmFyIHQsaSxzLGEscj17fSxuPWV8fG8ubG9jYXRpb24uaHJlZjtpZihcInN0cmluZ1wiPT10eXBlb2YgbiYmbi5sZW5ndGgpZm9yKGE9KGk9KG49bi5pbmRleE9mKFwiP1wiKT4tMT9uLnJlcGxhY2UoL1xcUypcXD8vLFwiXCIpOlwiXCIpLnNwbGl0KFwiJlwiKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9PWV9KSkubGVuZ3RoLHQ9MDt0PGE7dCs9MSlzPWlbdF0ucmVwbGFjZSgvI1xcUysvZyxcIlwiKS5zcGxpdChcIj1cIikscltkZWNvZGVVUklDb21wb25lbnQoc1swXSldPXZvaWQgMD09PXNbMV0/dm9pZCAwOmRlY29kZVVSSUNvbXBvbmVudChzWzFdKXx8XCJcIjtyZXR1cm4gcn0saXNPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZlLmNvbnN0cnVjdG9yJiZlLmNvbnN0cnVjdG9yPT09T2JqZWN0fSxleHRlbmQ6ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD1hcmd1bWVudHMubGVuZ3RoO3QtLTspZVt0XT1hcmd1bWVudHNbdF07Zm9yKHZhciBpPU9iamVjdChlWzBdKSxzPTE7czxlLmxlbmd0aDtzKz0xKXt2YXIgYT1lW3NdO2lmKHZvaWQgMCE9PWEmJm51bGwhPT1hKWZvcih2YXIgcj1PYmplY3Qua2V5cyhPYmplY3QoYSkpLG49MCxvPXIubGVuZ3RoO248bztuKz0xKXt2YXIgZD1yW25dLGg9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGQpO3ZvaWQgMCE9PWgmJmguZW51bWVyYWJsZSYmKGwuaXNPYmplY3QoaVtkXSkmJmwuaXNPYmplY3QoYVtkXSk/bC5leHRlbmQoaVtkXSxhW2RdKTohbC5pc09iamVjdChpW2RdKSYmbC5pc09iamVjdChhW2RdKT8oaVtkXT17fSxsLmV4dGVuZChpW2RdLGFbZF0pKTppW2RdPWFbZF0pfX1yZXR1cm4gaX19LGQ9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGRvY3VtZW50P3thZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7fSxhY3RpdmVFbGVtZW50OntibHVyOmZ1bmN0aW9uKCl7fSxub2RlTmFtZTpcIlwifSxxdWVyeVNlbGVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJue319LHF1ZXJ5U2VsZWN0b3JBbGw6ZnVuY3Rpb24oKXtyZXR1cm5bXX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3JldHVybntzdHlsZTp7fSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt9LGdldEVsZW1lbnRzQnlUYWdOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuW119fX0sbG9jYXRpb246e2hhc2g6XCJcIn19OmRvY3VtZW50LGg9KG49ZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHt0b3VjaDpvLk1vZGVybml6ciYmITA9PT1vLk1vZGVybml6ci50b3VjaHx8ISEoXCJvbnRvdWNoc3RhcnRcImluIG98fG8uRG9jdW1lbnRUb3VjaCYmZCBpbnN0YW5jZW9mIG8uRG9jdW1lbnRUb3VjaCkscG9pbnRlckV2ZW50czohKCFvLm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCYmIW8uUG9pbnRlckV2ZW50KSxwcmVmaXhlZFBvaW50ZXJFdmVudHM6ISFvLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLHRyYW5zaXRpb246KHI9bi5zdHlsZSxcInRyYW5zaXRpb25cImluIHJ8fFwid2Via2l0VHJhbnNpdGlvblwiaW4gcnx8XCJNb3pUcmFuc2l0aW9uXCJpbiByKSx0cmFuc2Zvcm1zM2Q6by5Nb2Rlcm5penImJiEwPT09by5Nb2Rlcm5penIuY3NzdHJhbnNmb3JtczNkfHwoYT1uLnN0eWxlLFwid2Via2l0UGVyc3BlY3RpdmVcImluIGF8fFwiTW96UGVyc3BlY3RpdmVcImluIGF8fFwiT1BlcnNwZWN0aXZlXCJpbiBhfHxcIk1zUGVyc3BlY3RpdmVcImluIGF8fFwicGVyc3BlY3RpdmVcImluIGEpLGZsZXhib3g6ZnVuY3Rpb24oKXtmb3IodmFyIGU9bi5zdHlsZSx0PVwiYWxpZ25JdGVtcyB3ZWJraXRBbGlnbkl0ZW1zIHdlYmtpdEJveEFsaWduIG1zRmxleEFsaWduIG1vekJveEFsaWduIHdlYmtpdEZsZXhEaXJlY3Rpb24gbXNGbGV4RGlyZWN0aW9uIG1vekJveERpcmVjdGlvbiBtb3pCb3hPcmllbnQgd2Via2l0Qm94RGlyZWN0aW9uIHdlYmtpdEJveE9yaWVudFwiLnNwbGl0KFwiIFwiKSxpPTA7aTx0Lmxlbmd0aDtpKz0xKWlmKHRbaV1pbiBlKXJldHVybiEwO3JldHVybiExfSgpLG9ic2VydmVyOlwiTXV0YXRpb25PYnNlcnZlclwiaW4gb3x8XCJXZWJraXRNdXRhdGlvbk9ic2VydmVyXCJpbiBvLHBhc3NpdmVMaXN0ZW5lcjpmdW5jdGlvbigpe3ZhciBlPSExO3RyeXt2YXIgdD1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe2U9ITB9fSk7by5hZGRFdmVudExpc3RlbmVyKFwidGVzdFBhc3NpdmVMaXN0ZW5lclwiLG51bGwsdCl9Y2F0Y2goZSl7fXJldHVybiBlfSgpLGdlc3R1cmVzOlwib25nZXN0dXJlc3RhcnRcImluIG99KSxwPWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgdD10aGlzO3QucGFyYW1zPWUsdC5ldmVudHNMaXN0ZW5lcnM9e30sdC5wYXJhbXMmJnQucGFyYW1zLm9uJiZPYmplY3Qua2V5cyh0LnBhcmFtcy5vbikuZm9yRWFjaChmdW5jdGlvbihlKXt0Lm9uKGUsdC5wYXJhbXMub25bZV0pfSl9LGM9e2NvbXBvbmVudHM6e2NvbmZpZ3VyYWJsZTohMH19O3AucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcztyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiB0P2k6KGUuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7aS5ldmVudHNMaXN0ZW5lcnNbZV18fChpLmV2ZW50c0xpc3RlbmVyc1tlXT1bXSksaS5ldmVudHNMaXN0ZW5lcnNbZV0ucHVzaCh0KX0pLGkpfSxwLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcztpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXJldHVybiBpO3JldHVybiBpLm9uKGUsZnVuY3Rpb24gcygpe2Zvcih2YXIgYT1bXSxyPWFyZ3VtZW50cy5sZW5ndGg7ci0tOylhW3JdPWFyZ3VtZW50c1tyXTt0LmFwcGx5KGksYSksaS5vZmYoZSxzKX0pfSxwLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzO3JldHVybiBlLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZvaWQgMD09PXQ/aS5ldmVudHNMaXN0ZW5lcnNbZV09W106aS5ldmVudHNMaXN0ZW5lcnNbZV0uZm9yRWFjaChmdW5jdGlvbihzLGEpe3M9PT10JiZpLmV2ZW50c0xpc3RlbmVyc1tlXS5zcGxpY2UoYSwxKX0pfSksaX0scC5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PWFyZ3VtZW50cy5sZW5ndGg7dC0tOyllW3RdPWFyZ3VtZW50c1t0XTt2YXIgaSxzLGEscj10aGlzO3JldHVybiByLmV2ZW50c0xpc3RlbmVycz8oXCJzdHJpbmdcIj09dHlwZW9mIGVbMF18fEFycmF5LmlzQXJyYXkoZVswXSk/KGk9ZVswXSxzPWUuc2xpY2UoMSxlLmxlbmd0aCksYT1yKTooaT1lWzBdLmV2ZW50cyxzPWVbMF0uZGF0YSxhPWVbMF0uY29udGV4dHx8ciksKEFycmF5LmlzQXJyYXkoaSk/aTppLnNwbGl0KFwiIFwiKSkuZm9yRWFjaChmdW5jdGlvbihlKXtpZihyLmV2ZW50c0xpc3RlbmVyc1tlXSl7dmFyIHQ9W107ci5ldmVudHNMaXN0ZW5lcnNbZV0uZm9yRWFjaChmdW5jdGlvbihlKXt0LnB1c2goZSl9KSx0LmZvckVhY2goZnVuY3Rpb24oZSl7ZS5hcHBseShhLHMpfSl9fSkscik6cn0scC5wcm90b3R5cGUudXNlTW9kdWxlc1BhcmFtcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QubW9kdWxlcyYmT2JqZWN0LmtleXModC5tb2R1bGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGkpe3ZhciBzPXQubW9kdWxlc1tpXTtzLnBhcmFtcyYmbC5leHRlbmQoZSxzLnBhcmFtcyl9KX0scC5wcm90b3R5cGUudXNlTW9kdWxlcz1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIHQ9dGhpczt0Lm1vZHVsZXMmJk9iamVjdC5rZXlzKHQubW9kdWxlcykuZm9yRWFjaChmdW5jdGlvbihpKXt2YXIgcz10Lm1vZHVsZXNbaV0sYT1lW2ldfHx7fTtzLmluc3RhbmNlJiZPYmplY3Qua2V5cyhzLmluc3RhbmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBpPXMuaW5zdGFuY2VbZV07dFtlXT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kuYmluZCh0KTppfSkscy5vbiYmdC5vbiYmT2JqZWN0LmtleXMocy5vbikuZm9yRWFjaChmdW5jdGlvbihlKXt0Lm9uKGUscy5vbltlXSl9KSxzLmNyZWF0ZSYmcy5jcmVhdGUuYmluZCh0KShhKX0pfSxjLmNvbXBvbmVudHMuc2V0PWZ1bmN0aW9uKGUpe3RoaXMudXNlJiZ0aGlzLnVzZShlKX0scC5pbnN0YWxsTW9kdWxlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxpPWFyZ3VtZW50cy5sZW5ndGgtMTtpLS0gPjA7KXRbaV09YXJndW1lbnRzW2krMV07dmFyIHM9dGhpcztzLnByb3RvdHlwZS5tb2R1bGVzfHwocy5wcm90b3R5cGUubW9kdWxlcz17fSk7dmFyIGE9ZS5uYW1lfHxPYmplY3Qua2V5cyhzLnByb3RvdHlwZS5tb2R1bGVzKS5sZW5ndGgrXCJfXCIrbC5ub3coKTtyZXR1cm4gcy5wcm90b3R5cGUubW9kdWxlc1thXT1lLGUucHJvdG8mJk9iamVjdC5rZXlzKGUucHJvdG8pLmZvckVhY2goZnVuY3Rpb24odCl7cy5wcm90b3R5cGVbdF09ZS5wcm90b1t0XX0pLGUuc3RhdGljJiZPYmplY3Qua2V5cyhlLnN0YXRpYykuZm9yRWFjaChmdW5jdGlvbih0KXtzW3RdPWUuc3RhdGljW3RdfSksZS5pbnN0YWxsJiZlLmluc3RhbGwuYXBwbHkocyx0KSxzfSxwLnVzZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10saT1hcmd1bWVudHMubGVuZ3RoLTE7aS0tID4wOyl0W2ldPWFyZ3VtZW50c1tpKzFdO3ZhciBzPXRoaXM7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/KGUuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gcy5pbnN0YWxsTW9kdWxlKGUpfSkscyk6cy5pbnN0YWxsTW9kdWxlLmFwcGx5KHMsW2VdLmNvbmNhdCh0KSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHAsYyk7dmFyIHU9e3VwZGF0ZVNpemU6ZnVuY3Rpb24oKXt2YXIgZSx0LGk9dGhpcy4kZWw7ZT12b2lkIDAhPT10aGlzLnBhcmFtcy53aWR0aD90aGlzLnBhcmFtcy53aWR0aDppWzBdLmNsaWVudFdpZHRoLHQ9dm9pZCAwIT09dGhpcy5wYXJhbXMuaGVpZ2h0P3RoaXMucGFyYW1zLmhlaWdodDppWzBdLmNsaWVudEhlaWdodCwwPT09ZSYmdGhpcy5pc0hvcml6b250YWwoKXx8MD09PXQmJnRoaXMuaXNWZXJ0aWNhbCgpfHwoZT1lLXBhcnNlSW50KGkuY3NzKFwicGFkZGluZy1sZWZ0XCIpLDEwKS1wYXJzZUludChpLmNzcyhcInBhZGRpbmctcmlnaHRcIiksMTApLHQ9dC1wYXJzZUludChpLmNzcyhcInBhZGRpbmctdG9wXCIpLDEwKS1wYXJzZUludChpLmNzcyhcInBhZGRpbmctYm90dG9tXCIpLDEwKSxsLmV4dGVuZCh0aGlzLHt3aWR0aDplLGhlaWdodDp0LHNpemU6dGhpcy5pc0hvcml6b250YWwoKT9lOnR9KSl9LHVwZGF0ZVNsaWRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyYW1zLHQ9dGhpcy4kd3JhcHBlckVsLGk9dGhpcy5zaXplLHM9dGhpcy5ydGwsYT10aGlzLndyb25nUlRMLHI9dC5jaGlsZHJlbihcIi5cIit0aGlzLnBhcmFtcy5zbGlkZUNsYXNzKSxuPXRoaXMudmlydHVhbCYmZS52aXJ0dWFsLmVuYWJsZWQ/dGhpcy52aXJ0dWFsLnNsaWRlcy5sZW5ndGg6ci5sZW5ndGgsbz1bXSxkPVtdLHA9W10sYz1lLnNsaWRlc09mZnNldEJlZm9yZTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBjJiYoYz1lLnNsaWRlc09mZnNldEJlZm9yZS5jYWxsKHRoaXMpKTt2YXIgdT1lLnNsaWRlc09mZnNldEFmdGVyO1wiZnVuY3Rpb25cIj09dHlwZW9mIHUmJih1PWUuc2xpZGVzT2Zmc2V0QWZ0ZXIuY2FsbCh0aGlzKSk7dmFyIGY9bix2PXRoaXMuc25hcEdyaWQubGVuZ3RoLG09dGhpcy5zbmFwR3JpZC5sZW5ndGgsZz1lLnNwYWNlQmV0d2VlbixiPS1jLHc9MCx5PTA7aWYodm9pZCAwIT09aSl7dmFyIHgsVDtcInN0cmluZ1wiPT10eXBlb2YgZyYmZy5pbmRleE9mKFwiJVwiKT49MCYmKGc9cGFyc2VGbG9hdChnLnJlcGxhY2UoXCIlXCIsXCJcIikpLzEwMCppKSx0aGlzLnZpcnR1YWxTaXplPS1nLHM/ci5jc3Moe21hcmdpbkxlZnQ6XCJcIixtYXJnaW5Ub3A6XCJcIn0pOnIuY3NzKHttYXJnaW5SaWdodDpcIlwiLG1hcmdpbkJvdHRvbTpcIlwifSksZS5zbGlkZXNQZXJDb2x1bW4+MSYmKHg9TWF0aC5mbG9vcihuL2Uuc2xpZGVzUGVyQ29sdW1uKT09PW4vdGhpcy5wYXJhbXMuc2xpZGVzUGVyQ29sdW1uP246TWF0aC5jZWlsKG4vZS5zbGlkZXNQZXJDb2x1bW4pKmUuc2xpZGVzUGVyQ29sdW1uLFwiYXV0b1wiIT09ZS5zbGlkZXNQZXJWaWV3JiZcInJvd1wiPT09ZS5zbGlkZXNQZXJDb2x1bW5GaWxsJiYoeD1NYXRoLm1heCh4LGUuc2xpZGVzUGVyVmlldyplLnNsaWRlc1BlckNvbHVtbikpKTtmb3IodmFyIEUsUz1lLnNsaWRlc1BlckNvbHVtbixDPXgvUyxNPUMtKGUuc2xpZGVzUGVyQ29sdW1uKkMtbiksej0wO3o8bjt6Kz0xKXtUPTA7dmFyIFA9ci5lcSh6KTtpZihlLnNsaWRlc1BlckNvbHVtbj4xKXt2YXIgaz12b2lkIDAsJD12b2lkIDAsTD12b2lkIDA7XCJjb2x1bW5cIj09PWUuc2xpZGVzUGVyQ29sdW1uRmlsbD8oTD16LSgkPU1hdGguZmxvb3Ioei9TKSkqUywoJD5NfHwkPT09TSYmTD09PVMtMSkmJihMKz0xKT49UyYmKEw9MCwkKz0xKSxrPSQrTCp4L1MsUC5jc3Moe1wiLXdlYmtpdC1ib3gtb3JkaW5hbC1ncm91cFwiOmssXCItbW96LWJveC1vcmRpbmFsLWdyb3VwXCI6ayxcIi1tcy1mbGV4LW9yZGVyXCI6ayxcIi13ZWJraXQtb3JkZXJcIjprLG9yZGVyOmt9KSk6JD16LShMPU1hdGguZmxvb3Ioei9DKSkqQyxQLmNzcyhcIm1hcmdpbi1cIisodGhpcy5pc0hvcml6b250YWwoKT9cInRvcFwiOlwibGVmdFwiKSwwIT09TCYmZS5zcGFjZUJldHdlZW4mJmUuc3BhY2VCZXR3ZWVuK1wicHhcIikuYXR0cihcImRhdGEtc3dpcGVyLWNvbHVtblwiLCQpLmF0dHIoXCJkYXRhLXN3aXBlci1yb3dcIixMKX1cIm5vbmVcIiE9PVAuY3NzKFwiZGlzcGxheVwiKSYmKFwiYXV0b1wiPT09ZS5zbGlkZXNQZXJWaWV3PyhUPXRoaXMuaXNIb3Jpem9udGFsKCk/UC5vdXRlcldpZHRoKCEwKTpQLm91dGVySGVpZ2h0KCEwKSxlLnJvdW5kTGVuZ3RocyYmKFQ9TWF0aC5mbG9vcihUKSkpOihUPShpLShlLnNsaWRlc1BlclZpZXctMSkqZykvZS5zbGlkZXNQZXJWaWV3LGUucm91bmRMZW5ndGhzJiYoVD1NYXRoLmZsb29yKFQpKSxyW3pdJiYodGhpcy5pc0hvcml6b250YWwoKT9yW3pdLnN0eWxlLndpZHRoPVQrXCJweFwiOnJbel0uc3R5bGUuaGVpZ2h0PVQrXCJweFwiKSksclt6XSYmKHJbel0uc3dpcGVyU2xpZGVTaXplPVQpLHAucHVzaChUKSxlLmNlbnRlcmVkU2xpZGVzPyhiPWIrVC8yK3cvMitnLDA9PT13JiYwIT09eiYmKGI9Yi1pLzItZyksMD09PXomJihiPWItaS8yLWcpLE1hdGguYWJzKGIpPC4wMDEmJihiPTApLHklZS5zbGlkZXNQZXJHcm91cD09MCYmby5wdXNoKGIpLGQucHVzaChiKSk6KHklZS5zbGlkZXNQZXJHcm91cD09MCYmby5wdXNoKGIpLGQucHVzaChiKSxiPWIrVCtnKSx0aGlzLnZpcnR1YWxTaXplKz1UK2csdz1ULHkrPTEpfWlmKHRoaXMudmlydHVhbFNpemU9TWF0aC5tYXgodGhpcy52aXJ0dWFsU2l6ZSxpKSt1LHMmJmEmJihcInNsaWRlXCI9PT1lLmVmZmVjdHx8XCJjb3ZlcmZsb3dcIj09PWUuZWZmZWN0KSYmdC5jc3Moe3dpZHRoOnRoaXMudmlydHVhbFNpemUrZS5zcGFjZUJldHdlZW4rXCJweFwifSksaC5mbGV4Ym94JiYhZS5zZXRXcmFwcGVyU2l6ZXx8KHRoaXMuaXNIb3Jpem9udGFsKCk/dC5jc3Moe3dpZHRoOnRoaXMudmlydHVhbFNpemUrZS5zcGFjZUJldHdlZW4rXCJweFwifSk6dC5jc3Moe2hlaWdodDp0aGlzLnZpcnR1YWxTaXplK2Uuc3BhY2VCZXR3ZWVuK1wicHhcIn0pKSxlLnNsaWRlc1BlckNvbHVtbj4xJiYodGhpcy52aXJ0dWFsU2l6ZT0oVCtlLnNwYWNlQmV0d2VlbikqeCx0aGlzLnZpcnR1YWxTaXplPU1hdGguY2VpbCh0aGlzLnZpcnR1YWxTaXplL2Uuc2xpZGVzUGVyQ29sdW1uKS1lLnNwYWNlQmV0d2Vlbix0aGlzLmlzSG9yaXpvbnRhbCgpP3QuY3NzKHt3aWR0aDp0aGlzLnZpcnR1YWxTaXplK2Uuc3BhY2VCZXR3ZWVuK1wicHhcIn0pOnQuY3NzKHtoZWlnaHQ6dGhpcy52aXJ0dWFsU2l6ZStlLnNwYWNlQmV0d2VlbitcInB4XCJ9KSxlLmNlbnRlcmVkU2xpZGVzKSl7RT1bXTtmb3IodmFyIEk9MDtJPG8ubGVuZ3RoO0krPTEpb1tJXTx0aGlzLnZpcnR1YWxTaXplK29bMF0mJkUucHVzaChvW0ldKTtvPUV9aWYoIWUuY2VudGVyZWRTbGlkZXMpe0U9W107Zm9yKHZhciBEPTA7RDxvLmxlbmd0aDtEKz0xKW9bRF08PXRoaXMudmlydHVhbFNpemUtaSYmRS5wdXNoKG9bRF0pO289RSxNYXRoLmZsb29yKHRoaXMudmlydHVhbFNpemUtaSktTWF0aC5mbG9vcihvW28ubGVuZ3RoLTFdKT4xJiZvLnB1c2godGhpcy52aXJ0dWFsU2l6ZS1pKX0wPT09by5sZW5ndGgmJihvPVswXSksMCE9PWUuc3BhY2VCZXR3ZWVuJiYodGhpcy5pc0hvcml6b250YWwoKT9zP3IuY3NzKHttYXJnaW5MZWZ0OmcrXCJweFwifSk6ci5jc3Moe21hcmdpblJpZ2h0OmcrXCJweFwifSk6ci5jc3Moe21hcmdpbkJvdHRvbTpnK1wicHhcIn0pKSxsLmV4dGVuZCh0aGlzLHtzbGlkZXM6cixzbmFwR3JpZDpvLHNsaWRlc0dyaWQ6ZCxzbGlkZXNTaXplc0dyaWQ6cH0pLG4hPT1mJiZ0aGlzLmVtaXQoXCJzbGlkZXNMZW5ndGhDaGFuZ2VcIiksby5sZW5ndGghPT12JiYodGhpcy5wYXJhbXMud2F0Y2hPdmVyZmxvdyYmdGhpcy5jaGVja092ZXJmbG93KCksdGhpcy5lbWl0KFwic25hcEdyaWRMZW5ndGhDaGFuZ2VcIikpLGQubGVuZ3RoIT09bSYmdGhpcy5lbWl0KFwic2xpZGVzR3JpZExlbmd0aENoYW5nZVwiKSwoZS53YXRjaFNsaWRlc1Byb2dyZXNzfHxlLndhdGNoU2xpZGVzVmlzaWJpbGl0eSkmJnRoaXMudXBkYXRlU2xpZGVzT2Zmc2V0KCl9fSx1cGRhdGVBdXRvSGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGUsdD1bXSxpPTA7aWYoXCJhdXRvXCIhPT10aGlzLnBhcmFtcy5zbGlkZXNQZXJWaWV3JiZ0aGlzLnBhcmFtcy5zbGlkZXNQZXJWaWV3PjEpZm9yKGU9MDtlPE1hdGguY2VpbCh0aGlzLnBhcmFtcy5zbGlkZXNQZXJWaWV3KTtlKz0xKXt2YXIgcz10aGlzLmFjdGl2ZUluZGV4K2U7aWYocz50aGlzLnNsaWRlcy5sZW5ndGgpYnJlYWs7dC5wdXNoKHRoaXMuc2xpZGVzLmVxKHMpWzBdKX1lbHNlIHQucHVzaCh0aGlzLnNsaWRlcy5lcSh0aGlzLmFjdGl2ZUluZGV4KVswXSk7Zm9yKGU9MDtlPHQubGVuZ3RoO2UrPTEpaWYodm9pZCAwIT09dFtlXSl7dmFyIGE9dFtlXS5vZmZzZXRIZWlnaHQ7aT1hPmk/YTppfWkmJnRoaXMuJHdyYXBwZXJFbC5jc3MoXCJoZWlnaHRcIixpK1wicHhcIil9LHVwZGF0ZVNsaWRlc09mZnNldDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnNsaWRlcyx0PTA7dDxlLmxlbmd0aDt0Kz0xKWVbdF0uc3dpcGVyU2xpZGVPZmZzZXQ9dGhpcy5pc0hvcml6b250YWwoKT9lW3RdLm9mZnNldExlZnQ6ZVt0XS5vZmZzZXRUb3B9LHVwZGF0ZVNsaWRlc1Byb2dyZXNzOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPXRoaXMudHJhbnNsYXRlfHwwKTt2YXIgdD10aGlzLnBhcmFtcyxpPXRoaXMuc2xpZGVzLHM9dGhpcy5ydGw7aWYoMCE9PWkubGVuZ3RoKXt2b2lkIDA9PT1pWzBdLnN3aXBlclNsaWRlT2Zmc2V0JiZ0aGlzLnVwZGF0ZVNsaWRlc09mZnNldCgpO3ZhciBhPS1lO3MmJihhPWUpLGkucmVtb3ZlQ2xhc3ModC5zbGlkZVZpc2libGVDbGFzcyk7Zm9yKHZhciByPTA7cjxpLmxlbmd0aDtyKz0xKXt2YXIgbj1pW3JdLG89KGErKHQuY2VudGVyZWRTbGlkZXM/dGhpcy5taW5UcmFuc2xhdGUoKTowKS1uLnN3aXBlclNsaWRlT2Zmc2V0KS8obi5zd2lwZXJTbGlkZVNpemUrdC5zcGFjZUJldHdlZW4pO2lmKHQud2F0Y2hTbGlkZXNWaXNpYmlsaXR5KXt2YXIgbD0tKGEtbi5zd2lwZXJTbGlkZU9mZnNldCksZD1sK3RoaXMuc2xpZGVzU2l6ZXNHcmlkW3JdOyhsPj0wJiZsPHRoaXMuc2l6ZXx8ZD4wJiZkPD10aGlzLnNpemV8fGw8PTAmJmQ+PXRoaXMuc2l6ZSkmJmkuZXEocikuYWRkQ2xhc3ModC5zbGlkZVZpc2libGVDbGFzcyl9bi5wcm9ncmVzcz1zPy1vOm99fX0sdXBkYXRlUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9dGhpcy50cmFuc2xhdGV8fDApO3ZhciB0PXRoaXMucGFyYW1zLGk9dGhpcy5tYXhUcmFuc2xhdGUoKS10aGlzLm1pblRyYW5zbGF0ZSgpLHM9dGhpcy5wcm9ncmVzcyxhPXRoaXMuaXNCZWdpbm5pbmcscj10aGlzLmlzRW5kLG49YSxvPXI7MD09PWk/KHM9MCxhPSEwLHI9ITApOihhPShzPShlLXRoaXMubWluVHJhbnNsYXRlKCkpL2kpPD0wLHI9cz49MSksbC5leHRlbmQodGhpcyx7cHJvZ3Jlc3M6cyxpc0JlZ2lubmluZzphLGlzRW5kOnJ9KSwodC53YXRjaFNsaWRlc1Byb2dyZXNzfHx0LndhdGNoU2xpZGVzVmlzaWJpbGl0eSkmJnRoaXMudXBkYXRlU2xpZGVzUHJvZ3Jlc3MoZSksYSYmIW4mJnRoaXMuZW1pdChcInJlYWNoQmVnaW5uaW5nIHRvRWRnZVwiKSxyJiYhbyYmdGhpcy5lbWl0KFwicmVhY2hFbmQgdG9FZGdlXCIpLChuJiYhYXx8byYmIXIpJiZ0aGlzLmVtaXQoXCJmcm9tRWRnZVwiKSx0aGlzLmVtaXQoXCJwcm9ncmVzc1wiLHMpfSx1cGRhdGVTbGlkZXNDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLnNsaWRlcyxpPXRoaXMucGFyYW1zLHM9dGhpcy4kd3JhcHBlckVsLGE9dGhpcy5hY3RpdmVJbmRleCxyPXRoaXMucmVhbEluZGV4LG49dGhpcy52aXJ0dWFsJiZpLnZpcnR1YWwuZW5hYmxlZDt0LnJlbW92ZUNsYXNzKGkuc2xpZGVBY3RpdmVDbGFzcytcIiBcIitpLnNsaWRlTmV4dENsYXNzK1wiIFwiK2kuc2xpZGVQcmV2Q2xhc3MrXCIgXCIraS5zbGlkZUR1cGxpY2F0ZUFjdGl2ZUNsYXNzK1wiIFwiK2kuc2xpZGVEdXBsaWNhdGVOZXh0Q2xhc3MrXCIgXCIraS5zbGlkZUR1cGxpY2F0ZVByZXZDbGFzcyksKGU9bj90aGlzLiR3cmFwcGVyRWwuZmluZChcIi5cIitpLnNsaWRlQ2xhc3MrJ1tkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIicrYSsnXCJdJyk6dC5lcShhKSkuYWRkQ2xhc3MoaS5zbGlkZUFjdGl2ZUNsYXNzKSxpLmxvb3AmJihlLmhhc0NsYXNzKGkuc2xpZGVEdXBsaWNhdGVDbGFzcyk/cy5jaGlsZHJlbihcIi5cIitpLnNsaWRlQ2xhc3MrXCI6bm90KC5cIitpLnNsaWRlRHVwbGljYXRlQ2xhc3MrJylbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK3IrJ1wiXScpLmFkZENsYXNzKGkuc2xpZGVEdXBsaWNhdGVBY3RpdmVDbGFzcyk6cy5jaGlsZHJlbihcIi5cIitpLnNsaWRlQ2xhc3MrXCIuXCIraS5zbGlkZUR1cGxpY2F0ZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK3IrJ1wiXScpLmFkZENsYXNzKGkuc2xpZGVEdXBsaWNhdGVBY3RpdmVDbGFzcykpO3ZhciBvPWUubmV4dEFsbChcIi5cIitpLnNsaWRlQ2xhc3MpLmVxKDApLmFkZENsYXNzKGkuc2xpZGVOZXh0Q2xhc3MpO2kubG9vcCYmMD09PW8ubGVuZ3RoJiYobz10LmVxKDApKS5hZGRDbGFzcyhpLnNsaWRlTmV4dENsYXNzKTt2YXIgbD1lLnByZXZBbGwoXCIuXCIraS5zbGlkZUNsYXNzKS5lcSgwKS5hZGRDbGFzcyhpLnNsaWRlUHJldkNsYXNzKTtpLmxvb3AmJjA9PT1sLmxlbmd0aCYmKGw9dC5lcSgtMSkpLmFkZENsYXNzKGkuc2xpZGVQcmV2Q2xhc3MpLGkubG9vcCYmKG8uaGFzQ2xhc3MoaS5zbGlkZUR1cGxpY2F0ZUNsYXNzKT9zLmNoaWxkcmVuKFwiLlwiK2kuc2xpZGVDbGFzcytcIjpub3QoLlwiK2kuc2xpZGVEdXBsaWNhdGVDbGFzcysnKVtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIicrby5hdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIikrJ1wiXScpLmFkZENsYXNzKGkuc2xpZGVEdXBsaWNhdGVOZXh0Q2xhc3MpOnMuY2hpbGRyZW4oXCIuXCIraS5zbGlkZUNsYXNzK1wiLlwiK2kuc2xpZGVEdXBsaWNhdGVDbGFzcysnW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytvLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSsnXCJdJykuYWRkQ2xhc3MoaS5zbGlkZUR1cGxpY2F0ZU5leHRDbGFzcyksbC5oYXNDbGFzcyhpLnNsaWRlRHVwbGljYXRlQ2xhc3MpP3MuY2hpbGRyZW4oXCIuXCIraS5zbGlkZUNsYXNzK1wiOm5vdCguXCIraS5zbGlkZUR1cGxpY2F0ZUNsYXNzKycpW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytsLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSsnXCJdJykuYWRkQ2xhc3MoaS5zbGlkZUR1cGxpY2F0ZVByZXZDbGFzcyk6cy5jaGlsZHJlbihcIi5cIitpLnNsaWRlQ2xhc3MrXCIuXCIraS5zbGlkZUR1cGxpY2F0ZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK2wuYXR0cihcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpKydcIl0nKS5hZGRDbGFzcyhpLnNsaWRlRHVwbGljYXRlUHJldkNsYXNzKSl9LHVwZGF0ZUFjdGl2ZUluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0LGk9dGhpcy5ydGw/dGhpcy50cmFuc2xhdGU6LXRoaXMudHJhbnNsYXRlLHM9dGhpcy5zbGlkZXNHcmlkLGE9dGhpcy5zbmFwR3JpZCxyPXRoaXMucGFyYW1zLG49dGhpcy5hY3RpdmVJbmRleCxvPXRoaXMucmVhbEluZGV4LGQ9dGhpcy5zbmFwSW5kZXgsaD1lO2lmKHZvaWQgMD09PWgpe2Zvcih2YXIgcD0wO3A8cy5sZW5ndGg7cCs9MSl2b2lkIDAhPT1zW3ArMV0/aT49c1twXSYmaTxzW3ArMV0tKHNbcCsxXS1zW3BdKS8yP2g9cDppPj1zW3BdJiZpPHNbcCsxXSYmKGg9cCsxKTppPj1zW3BdJiYoaD1wKTtyLm5vcm1hbGl6ZVNsaWRlSW5kZXgmJihoPDB8fHZvaWQgMD09PWgpJiYoaD0wKX1pZigodD1hLmluZGV4T2YoaSk+PTA/YS5pbmRleE9mKGkpOk1hdGguZmxvb3IoaC9yLnNsaWRlc1Blckdyb3VwKSk+PWEubGVuZ3RoJiYodD1hLmxlbmd0aC0xKSxoIT09bil7dmFyIGM9cGFyc2VJbnQodGhpcy5zbGlkZXMuZXEoaCkuYXR0cihcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpfHxoLDEwKTtsLmV4dGVuZCh0aGlzLHtzbmFwSW5kZXg6dCxyZWFsSW5kZXg6YyxwcmV2aW91c0luZGV4Om4sYWN0aXZlSW5kZXg6aH0pLHRoaXMuZW1pdChcImFjdGl2ZUluZGV4Q2hhbmdlXCIpLHRoaXMuZW1pdChcInNuYXBJbmRleENoYW5nZVwiKSxvIT09YyYmdGhpcy5lbWl0KFwicmVhbEluZGV4Q2hhbmdlXCIpLHRoaXMuZW1pdChcInNsaWRlQ2hhbmdlXCIpfWVsc2UgdCE9PWQmJih0aGlzLnNuYXBJbmRleD10LHRoaXMuZW1pdChcInNuYXBJbmRleENoYW5nZVwiKSl9LHVwZGF0ZUNsaWNrZWRTbGlkZTpmdW5jdGlvbihlKXt2YXIgaT10aGlzLnBhcmFtcyxzPXQoZS50YXJnZXQpLmNsb3Nlc3QoXCIuXCIraS5zbGlkZUNsYXNzKVswXSxhPSExO2lmKHMpZm9yKHZhciByPTA7cjx0aGlzLnNsaWRlcy5sZW5ndGg7cis9MSl0aGlzLnNsaWRlc1tyXT09PXMmJihhPSEwKTtpZighc3x8IWEpcmV0dXJuIHRoaXMuY2xpY2tlZFNsaWRlPXZvaWQgMCx2b2lkKHRoaXMuY2xpY2tlZEluZGV4PXZvaWQgMCk7dGhpcy5jbGlja2VkU2xpZGU9cyx0aGlzLnZpcnR1YWwmJnRoaXMucGFyYW1zLnZpcnR1YWwuZW5hYmxlZD90aGlzLmNsaWNrZWRJbmRleD1wYXJzZUludCh0KHMpLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSwxMCk6dGhpcy5jbGlja2VkSW5kZXg9dChzKS5pbmRleCgpLGkuc2xpZGVUb0NsaWNrZWRTbGlkZSYmdm9pZCAwIT09dGhpcy5jbGlja2VkSW5kZXgmJnRoaXMuY2xpY2tlZEluZGV4IT09dGhpcy5hY3RpdmVJbmRleCYmdGhpcy5zbGlkZVRvQ2xpY2tlZFNsaWRlKCl9fSxmPXtnZXRUcmFuc2xhdGU6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9dGhpcy5pc0hvcml6b250YWwoKT9cInhcIjpcInlcIik7dmFyIHQ9dGhpcy5wYXJhbXMsaT10aGlzLnJ0bCxzPXRoaXMudHJhbnNsYXRlLGE9dGhpcy4kd3JhcHBlckVsO2lmKHQudmlydHVhbFRyYW5zbGF0ZSlyZXR1cm4gaT8tczpzO3ZhciByPWwuZ2V0VHJhbnNsYXRlKGFbMF0sZSk7cmV0dXJuIGkmJihyPS1yKSxyfHwwfSxzZXRUcmFuc2xhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLnJ0bCxzPXRoaXMucGFyYW1zLGE9dGhpcy4kd3JhcHBlckVsLHI9dGhpcy5wcm9ncmVzcyxuPTAsbz0wO3RoaXMuaXNIb3Jpem9udGFsKCk/bj1pPy1lOmU6bz1lLHMucm91bmRMZW5ndGhzJiYobj1NYXRoLmZsb29yKG4pLG89TWF0aC5mbG9vcihvKSkscy52aXJ0dWFsVHJhbnNsYXRlfHwoaC50cmFuc2Zvcm1zM2Q/YS50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUzZChcIituK1wicHgsIFwiK28rXCJweCwgMHB4KVwiKTphLnRyYW5zZm9ybShcInRyYW5zbGF0ZShcIituK1wicHgsIFwiK28rXCJweClcIikpLHRoaXMudHJhbnNsYXRlPXRoaXMuaXNIb3Jpem9udGFsKCk/bjpvO3ZhciBsPXRoaXMubWF4VHJhbnNsYXRlKCktdGhpcy5taW5UcmFuc2xhdGUoKTsoMD09PWw/MDooZS10aGlzLm1pblRyYW5zbGF0ZSgpKS9sKSE9PXImJnRoaXMudXBkYXRlUHJvZ3Jlc3MoZSksdGhpcy5lbWl0KFwic2V0VHJhbnNsYXRlXCIsdGhpcy50cmFuc2xhdGUsdCl9LG1pblRyYW5zbGF0ZTpmdW5jdGlvbigpe3JldHVybi10aGlzLnNuYXBHcmlkWzBdfSxtYXhUcmFuc2xhdGU6ZnVuY3Rpb24oKXtyZXR1cm4tdGhpcy5zbmFwR3JpZFt0aGlzLnNuYXBHcmlkLmxlbmd0aC0xXX19LHY9e3NldFRyYW5zaXRpb246ZnVuY3Rpb24oZSx0KXt0aGlzLiR3cmFwcGVyRWwudHJhbnNpdGlvbihlKSx0aGlzLmVtaXQoXCJzZXRUcmFuc2l0aW9uXCIsZSx0KX0sdHJhbnNpdGlvblN0YXJ0OmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPSEwKTt2YXIgdD10aGlzLmFjdGl2ZUluZGV4LGk9dGhpcy5wYXJhbXMscz10aGlzLnByZXZpb3VzSW5kZXg7aS5hdXRvSGVpZ2h0JiZ0aGlzLnVwZGF0ZUF1dG9IZWlnaHQoKSx0aGlzLmVtaXQoXCJ0cmFuc2l0aW9uU3RhcnRcIiksZSYmdCE9PXMmJih0aGlzLmVtaXQoXCJzbGlkZUNoYW5nZVRyYW5zaXRpb25TdGFydFwiKSx0PnM/dGhpcy5lbWl0KFwic2xpZGVOZXh0VHJhbnNpdGlvblN0YXJ0XCIpOnRoaXMuZW1pdChcInNsaWRlUHJldlRyYW5zaXRpb25TdGFydFwiKSl9LHRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9ITApO3ZhciB0PXRoaXMuYWN0aXZlSW5kZXgsaT10aGlzLnByZXZpb3VzSW5kZXg7dGhpcy5hbmltYXRpbmc9ITEsdGhpcy5zZXRUcmFuc2l0aW9uKDApLHRoaXMuZW1pdChcInRyYW5zaXRpb25FbmRcIiksZSYmdCE9PWkmJih0aGlzLmVtaXQoXCJzbGlkZUNoYW5nZVRyYW5zaXRpb25FbmRcIiksdD5pP3RoaXMuZW1pdChcInNsaWRlTmV4dFRyYW5zaXRpb25FbmRcIik6dGhpcy5lbWl0KFwic2xpZGVQcmV2VHJhbnNpdGlvbkVuZFwiKSl9fSxtPXtzbGlkZVRvOmZ1bmN0aW9uKGUsdCxpLHMpe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PXQmJih0PXRoaXMucGFyYW1zLnNwZWVkKSx2b2lkIDA9PT1pJiYoaT0hMCk7dmFyIGE9dGhpcyxyPWU7cjwwJiYocj0wKTt2YXIgbj1hLnBhcmFtcyxvPWEuc25hcEdyaWQsbD1hLnNsaWRlc0dyaWQsZD1hLnByZXZpb3VzSW5kZXgscD1hLmFjdGl2ZUluZGV4LGM9YS5ydGwsdT1hLiR3cmFwcGVyRWwsZj1NYXRoLmZsb29yKHIvbi5zbGlkZXNQZXJHcm91cCk7Zj49by5sZW5ndGgmJihmPW8ubGVuZ3RoLTEpLChwfHxuLmluaXRpYWxTbGlkZXx8MCk9PT0oZHx8MCkmJmkmJmEuZW1pdChcImJlZm9yZVNsaWRlQ2hhbmdlU3RhcnRcIik7dmFyIHY9LW9bZl07aWYoYS51cGRhdGVQcm9ncmVzcyh2KSxuLm5vcm1hbGl6ZVNsaWRlSW5kZXgpZm9yKHZhciBtPTA7bTxsLmxlbmd0aDttKz0xKS1NYXRoLmZsb29yKDEwMCp2KT49TWF0aC5mbG9vcigxMDAqbFttXSkmJihyPW0pO2lmKGEuaW5pdGlhbGl6ZWQpe2lmKCFhLmFsbG93U2xpZGVOZXh0JiZ2PGEudHJhbnNsYXRlJiZ2PGEubWluVHJhbnNsYXRlKCkpcmV0dXJuITE7aWYoIWEuYWxsb3dTbGlkZVByZXYmJnY+YS50cmFuc2xhdGUmJnY+YS5tYXhUcmFuc2xhdGUoKSYmKHB8fDApIT09cilyZXR1cm4hMX1yZXR1cm4gYyYmLXY9PT1hLnRyYW5zbGF0ZXx8IWMmJnY9PT1hLnRyYW5zbGF0ZT8oYS51cGRhdGVBY3RpdmVJbmRleChyKSxuLmF1dG9IZWlnaHQmJmEudXBkYXRlQXV0b0hlaWdodCgpLGEudXBkYXRlU2xpZGVzQ2xhc3NlcygpLFwic2xpZGVcIiE9PW4uZWZmZWN0JiZhLnNldFRyYW5zbGF0ZSh2KSwhMSk6KDAhPT10JiZoLnRyYW5zaXRpb24/KGEuc2V0VHJhbnNpdGlvbih0KSxhLnNldFRyYW5zbGF0ZSh2KSxhLnVwZGF0ZUFjdGl2ZUluZGV4KHIpLGEudXBkYXRlU2xpZGVzQ2xhc3NlcygpLGEuZW1pdChcImJlZm9yZVRyYW5zaXRpb25TdGFydFwiLHQscyksYS50cmFuc2l0aW9uU3RhcnQoaSksYS5hbmltYXRpbmd8fChhLmFuaW1hdGluZz0hMCx1LnRyYW5zaXRpb25FbmQoZnVuY3Rpb24oKXthJiYhYS5kZXN0cm95ZWQmJmEudHJhbnNpdGlvbkVuZChpKX0pKSk6KGEuc2V0VHJhbnNpdGlvbigwKSxhLnNldFRyYW5zbGF0ZSh2KSxhLnVwZGF0ZUFjdGl2ZUluZGV4KHIpLGEudXBkYXRlU2xpZGVzQ2xhc3NlcygpLGEuZW1pdChcImJlZm9yZVRyYW5zaXRpb25TdGFydFwiLHQscyksYS50cmFuc2l0aW9uU3RhcnQoaSksYS50cmFuc2l0aW9uRW5kKGkpKSwhMCl9LHNsaWRlTmV4dDpmdW5jdGlvbihlLHQsaSl7dm9pZCAwPT09ZSYmKGU9dGhpcy5wYXJhbXMuc3BlZWQpLHZvaWQgMD09PXQmJih0PSEwKTt2YXIgcz10aGlzLnBhcmFtcyxhPXRoaXMuYW5pbWF0aW5nO3JldHVybiBzLmxvb3A/IWEmJih0aGlzLmxvb3BGaXgoKSx0aGlzLl9jbGllbnRMZWZ0PXRoaXMuJHdyYXBwZXJFbFswXS5jbGllbnRMZWZ0LHRoaXMuc2xpZGVUbyh0aGlzLmFjdGl2ZUluZGV4K3Muc2xpZGVzUGVyR3JvdXAsZSx0LGkpKTp0aGlzLnNsaWRlVG8odGhpcy5hY3RpdmVJbmRleCtzLnNsaWRlc1Blckdyb3VwLGUsdCxpKX0sc2xpZGVQcmV2OmZ1bmN0aW9uKGUsdCxpKXt2b2lkIDA9PT1lJiYoZT10aGlzLnBhcmFtcy5zcGVlZCksdm9pZCAwPT09dCYmKHQ9ITApO3ZhciBzPXRoaXMucGFyYW1zLGE9dGhpcy5hbmltYXRpbmc7cmV0dXJuIHMubG9vcD8hYSYmKHRoaXMubG9vcEZpeCgpLHRoaXMuX2NsaWVudExlZnQ9dGhpcy4kd3JhcHBlckVsWzBdLmNsaWVudExlZnQsdGhpcy5zbGlkZVRvKHRoaXMuYWN0aXZlSW5kZXgtMSxlLHQsaSkpOnRoaXMuc2xpZGVUbyh0aGlzLmFjdGl2ZUluZGV4LTEsZSx0LGkpfSxzbGlkZVJlc2V0OmZ1bmN0aW9uKGUsdCxpKXt2b2lkIDA9PT1lJiYoZT10aGlzLnBhcmFtcy5zcGVlZCksdm9pZCAwPT09dCYmKHQ9ITApO3JldHVybiB0aGlzLnNsaWRlVG8odGhpcy5hY3RpdmVJbmRleCxlLHQsaSl9LHNsaWRlVG9DbGlja2VkU2xpZGU6ZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXMscz1pLnBhcmFtcyxhPWkuJHdyYXBwZXJFbCxyPVwiYXV0b1wiPT09cy5zbGlkZXNQZXJWaWV3P2kuc2xpZGVzUGVyVmlld0R5bmFtaWMoKTpzLnNsaWRlc1BlclZpZXcsbj1pLmNsaWNrZWRJbmRleDtpZihzLmxvb3Ape2lmKGkuYW5pbWF0aW5nKXJldHVybjtlPXBhcnNlSW50KHQoaS5jbGlja2VkU2xpZGUpLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSwxMCkscy5jZW50ZXJlZFNsaWRlcz9uPGkubG9vcGVkU2xpZGVzLXIvMnx8bj5pLnNsaWRlcy5sZW5ndGgtaS5sb29wZWRTbGlkZXMrci8yPyhpLmxvb3BGaXgoKSxuPWEuY2hpbGRyZW4oXCIuXCIrcy5zbGlkZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK2UrJ1wiXTpub3QoLicrcy5zbGlkZUR1cGxpY2F0ZUNsYXNzK1wiKVwiKS5lcSgwKS5pbmRleCgpLGwubmV4dFRpY2soZnVuY3Rpb24oKXtpLnNsaWRlVG8obil9KSk6aS5zbGlkZVRvKG4pOm4+aS5zbGlkZXMubGVuZ3RoLXI/KGkubG9vcEZpeCgpLG49YS5jaGlsZHJlbihcIi5cIitzLnNsaWRlQ2xhc3MrJ1tkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIicrZSsnXCJdOm5vdCguJytzLnNsaWRlRHVwbGljYXRlQ2xhc3MrXCIpXCIpLmVxKDApLmluZGV4KCksbC5uZXh0VGljayhmdW5jdGlvbigpe2kuc2xpZGVUbyhuKX0pKTppLnNsaWRlVG8obil9ZWxzZSBpLnNsaWRlVG8obil9fSxnPXtsb29wQ3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxpPWUucGFyYW1zLHM9ZS4kd3JhcHBlckVsO3MuY2hpbGRyZW4oXCIuXCIraS5zbGlkZUNsYXNzK1wiLlwiK2kuc2xpZGVEdXBsaWNhdGVDbGFzcykucmVtb3ZlKCk7dmFyIGE9cy5jaGlsZHJlbihcIi5cIitpLnNsaWRlQ2xhc3MpO2lmKGkubG9vcEZpbGxHcm91cFdpdGhCbGFuayl7dmFyIHI9aS5zbGlkZXNQZXJHcm91cC1hLmxlbmd0aCVpLnNsaWRlc1Blckdyb3VwO2lmKHIhPT1pLnNsaWRlc1Blckdyb3VwKXtmb3IodmFyIG49MDtuPHI7bis9MSl7dmFyIG89dChkLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLmFkZENsYXNzKGkuc2xpZGVDbGFzcytcIiBcIitpLnNsaWRlQmxhbmtDbGFzcyk7cy5hcHBlbmQobyl9YT1zLmNoaWxkcmVuKFwiLlwiK2kuc2xpZGVDbGFzcyl9fVwiYXV0b1wiIT09aS5zbGlkZXNQZXJWaWV3fHxpLmxvb3BlZFNsaWRlc3x8KGkubG9vcGVkU2xpZGVzPWEubGVuZ3RoKSxlLmxvb3BlZFNsaWRlcz1wYXJzZUludChpLmxvb3BlZFNsaWRlc3x8aS5zbGlkZXNQZXJWaWV3LDEwKSxlLmxvb3BlZFNsaWRlcys9aS5sb29wQWRkaXRpb25hbFNsaWRlcyxlLmxvb3BlZFNsaWRlcz5hLmxlbmd0aCYmKGUubG9vcGVkU2xpZGVzPWEubGVuZ3RoKTt2YXIgbD1bXSxoPVtdO2EuZWFjaChmdW5jdGlvbihpLHMpe3ZhciByPXQocyk7aTxlLmxvb3BlZFNsaWRlcyYmaC5wdXNoKHMpLGk8YS5sZW5ndGgmJmk+PWEubGVuZ3RoLWUubG9vcGVkU2xpZGVzJiZsLnB1c2gocyksci5hdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIixpKX0pO2Zvcih2YXIgcD0wO3A8aC5sZW5ndGg7cCs9MSlzLmFwcGVuZCh0KGhbcF0uY2xvbmVOb2RlKCEwKSkuYWRkQ2xhc3MoaS5zbGlkZUR1cGxpY2F0ZUNsYXNzKSk7Zm9yKHZhciBjPWwubGVuZ3RoLTE7Yz49MDtjLT0xKXMucHJlcGVuZCh0KGxbY10uY2xvbmVOb2RlKCEwKSkuYWRkQ2xhc3MoaS5zbGlkZUR1cGxpY2F0ZUNsYXNzKSl9LGxvb3BGaXg6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMucGFyYW1zLGk9dGhpcy5hY3RpdmVJbmRleCxzPXRoaXMuc2xpZGVzLGE9dGhpcy5sb29wZWRTbGlkZXMscj10aGlzLmFsbG93U2xpZGVQcmV2LG49dGhpcy5hbGxvd1NsaWRlTmV4dDt0aGlzLmFsbG93U2xpZGVQcmV2PSEwLHRoaXMuYWxsb3dTbGlkZU5leHQ9ITAsaTxhPyhlPXMubGVuZ3RoLTMqYStpLGUrPWEsdGhpcy5zbGlkZVRvKGUsMCwhMSwhMCkpOihcImF1dG9cIj09PXQuc2xpZGVzUGVyVmlldyYmaT49MiphfHxpPnMubGVuZ3RoLTIqdC5zbGlkZXNQZXJWaWV3KSYmKGU9LXMubGVuZ3RoK2krYSxlKz1hLHRoaXMuc2xpZGVUbyhlLDAsITEsITApKSx0aGlzLmFsbG93U2xpZGVQcmV2PXIsdGhpcy5hbGxvd1NsaWRlTmV4dD1ufSxsb29wRGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuJHdyYXBwZXJFbCx0PXRoaXMucGFyYW1zLGk9dGhpcy5zbGlkZXM7ZS5jaGlsZHJlbihcIi5cIit0LnNsaWRlQ2xhc3MrXCIuXCIrdC5zbGlkZUR1cGxpY2F0ZUNsYXNzKS5yZW1vdmUoKSxpLnJlbW92ZUF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKX19LGI9e3NldEdyYWJDdXJzb3I6ZnVuY3Rpb24oZSl7aWYoIWgudG91Y2gmJnRoaXMucGFyYW1zLnNpbXVsYXRlVG91Y2gpe3ZhciB0PXRoaXMuZWw7dC5zdHlsZS5jdXJzb3I9XCJtb3ZlXCIsdC5zdHlsZS5jdXJzb3I9ZT9cIi13ZWJraXQtZ3JhYmJpbmdcIjpcIi13ZWJraXQtZ3JhYlwiLHQuc3R5bGUuY3Vyc29yPWU/XCItbW96LWdyYWJiaW5cIjpcIi1tb3otZ3JhYlwiLHQuc3R5bGUuY3Vyc29yPWU/XCJncmFiYmluZ1wiOlwiZ3JhYlwifX0sdW5zZXRHcmFiQ3Vyc29yOmZ1bmN0aW9uKCl7aC50b3VjaHx8KHRoaXMuZWwuc3R5bGUuY3Vyc29yPVwiXCIpfX0sdz17YXBwZW5kU2xpZGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy4kd3JhcHBlckVsLGk9dGhpcy5wYXJhbXM7aWYoaS5sb29wJiZ0aGlzLmxvb3BEZXN0cm95KCksXCJvYmplY3RcIj09dHlwZW9mIGUmJlwibGVuZ3RoXCJpbiBlKWZvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cys9MSllW3NdJiZ0LmFwcGVuZChlW3NdKTtlbHNlIHQuYXBwZW5kKGUpO2kubG9vcCYmdGhpcy5sb29wQ3JlYXRlKCksaS5vYnNlcnZlciYmaC5vYnNlcnZlcnx8dGhpcy51cGRhdGUoKX0scHJlcGVuZFNsaWRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyYW1zLGk9dGhpcy4kd3JhcHBlckVsLHM9dGhpcy5hY3RpdmVJbmRleDt0Lmxvb3AmJnRoaXMubG9vcERlc3Ryb3koKTt2YXIgYT1zKzE7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJlwibGVuZ3RoXCJpbiBlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrPTEpZVtyXSYmaS5wcmVwZW5kKGVbcl0pO2E9cytlLmxlbmd0aH1lbHNlIGkucHJlcGVuZChlKTt0Lmxvb3AmJnRoaXMubG9vcENyZWF0ZSgpLHQub2JzZXJ2ZXImJmgub2JzZXJ2ZXJ8fHRoaXMudXBkYXRlKCksdGhpcy5zbGlkZVRvKGEsMCwhMSl9LHJlbW92ZVNsaWRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyYW1zLGk9dGhpcy4kd3JhcHBlckVsLHM9dGhpcy5hY3RpdmVJbmRleDt0Lmxvb3AmJih0aGlzLmxvb3BEZXN0cm95KCksdGhpcy5zbGlkZXM9aS5jaGlsZHJlbihcIi5cIit0LnNsaWRlQ2xhc3MpKTt2YXIgYSxyPXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJlwibGVuZ3RoXCJpbiBlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rPTEpYT1lW25dLHRoaXMuc2xpZGVzW2FdJiZ0aGlzLnNsaWRlcy5lcShhKS5yZW1vdmUoKSxhPHImJihyLT0xKTtyPU1hdGgubWF4KHIsMCl9ZWxzZSBhPWUsdGhpcy5zbGlkZXNbYV0mJnRoaXMuc2xpZGVzLmVxKGEpLnJlbW92ZSgpLGE8ciYmKHItPTEpLHI9TWF0aC5tYXgociwwKTt0Lmxvb3AmJnRoaXMubG9vcENyZWF0ZSgpLHQub2JzZXJ2ZXImJmgub2JzZXJ2ZXJ8fHRoaXMudXBkYXRlKCksdC5sb29wP3RoaXMuc2xpZGVUbyhyK3RoaXMubG9vcGVkU2xpZGVzLDAsITEpOnRoaXMuc2xpZGVUbyhyLDAsITEpfSxyZW1vdmVBbGxTbGlkZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD0wO3Q8dGhpcy5zbGlkZXMubGVuZ3RoO3QrPTEpZS5wdXNoKHQpO3RoaXMucmVtb3ZlU2xpZGUoZSl9fSx5PWZ1bmN0aW9uKCl7dmFyIGU9by5uYXZpZ2F0b3IudXNlckFnZW50LHQ9e2lvczohMSxhbmRyb2lkOiExLGFuZHJvaWRDaHJvbWU6ITEsZGVza3RvcDohMSx3aW5kb3dzOiExLGlwaG9uZTohMSxpcG9kOiExLGlwYWQ6ITEsY29yZG92YTpvLmNvcmRvdmF8fG8ucGhvbmVnYXAscGhvbmVnYXA6by5jb3Jkb3ZhfHxvLnBob25lZ2FwfSxpPWUubWF0Y2goLyhXaW5kb3dzIFBob25lKTs/W1xcc1xcL10rKFtcXGQuXSspPy8pLHM9ZS5tYXRjaCgvKEFuZHJvaWQpOz9bXFxzXFwvXSsoW1xcZC5dKyk/LyksYT1lLm1hdGNoKC8oaVBhZCkuKk9TXFxzKFtcXGRfXSspLykscj1lLm1hdGNoKC8oaVBvZCkoLipPU1xccyhbXFxkX10rKSk/Lyksbj0hYSYmZS5tYXRjaCgvKGlQaG9uZVxcc09TfGlPUylcXHMoW1xcZF9dKykvKTtpZihpJiYodC5vcz1cIndpbmRvd3NcIix0Lm9zVmVyc2lvbj1pWzJdLHQud2luZG93cz0hMCkscyYmIWkmJih0Lm9zPVwiYW5kcm9pZFwiLHQub3NWZXJzaW9uPXNbMl0sdC5hbmRyb2lkPSEwLHQuYW5kcm9pZENocm9tZT1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNocm9tZVwiKT49MCksKGF8fG58fHIpJiYodC5vcz1cImlvc1wiLHQuaW9zPSEwKSxuJiYhciYmKHQub3NWZXJzaW9uPW5bMl0ucmVwbGFjZSgvXy9nLFwiLlwiKSx0LmlwaG9uZT0hMCksYSYmKHQub3NWZXJzaW9uPWFbMl0ucmVwbGFjZSgvXy9nLFwiLlwiKSx0LmlwYWQ9ITApLHImJih0Lm9zVmVyc2lvbj1yWzNdP3JbM10ucmVwbGFjZSgvXy9nLFwiLlwiKTpudWxsLHQuaXBob25lPSEwKSx0LmlvcyYmdC5vc1ZlcnNpb24mJmUuaW5kZXhPZihcIlZlcnNpb24vXCIpPj0wJiZcIjEwXCI9PT10Lm9zVmVyc2lvbi5zcGxpdChcIi5cIilbMF0mJih0Lm9zVmVyc2lvbj1lLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCJ2ZXJzaW9uL1wiKVsxXS5zcGxpdChcIiBcIilbMF0pLHQuZGVza3RvcD0hKHQub3N8fHQuYW5kcm9pZHx8dC53ZWJWaWV3KSx0LndlYlZpZXc9KG58fGF8fHIpJiZlLm1hdGNoKC8uKkFwcGxlV2ViS2l0KD8hLipTYWZhcmkpL2kpLHQub3MmJlwiaW9zXCI9PT10Lm9zKXt2YXIgbD10Lm9zVmVyc2lvbi5zcGxpdChcIi5cIiksaD1kLnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cInZpZXdwb3J0XCJdJyk7dC5taW5pbWFsVWk9IXQud2ViVmlldyYmKHJ8fG4pJiYoMSpsWzBdPT03PzEqbFsxXT49MToxKmxbMF0+NykmJmgmJmguZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKS5pbmRleE9mKFwibWluaW1hbC11aVwiKT49MH1yZXR1cm4gdC5waXhlbFJhdGlvPW8uZGV2aWNlUGl4ZWxSYXRpb3x8MSx0fSgpLHg9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy50b3VjaEV2ZW50c0RhdGEscz10aGlzLnBhcmFtcyxhPXRoaXMudG91Y2hlcyxyPWU7aWYoci5vcmlnaW5hbEV2ZW50JiYocj1yLm9yaWdpbmFsRXZlbnQpLGkuaXNUb3VjaEV2ZW50PVwidG91Y2hzdGFydFwiPT09ci50eXBlLChpLmlzVG91Y2hFdmVudHx8IShcIndoaWNoXCJpbiByKXx8MyE9PXIud2hpY2gpJiYoIWkuaXNUb3VjaGVkfHwhaS5pc01vdmVkKSlpZihzLm5vU3dpcGluZyYmdChyLnRhcmdldCkuY2xvc2VzdChcIi5cIitzLm5vU3dpcGluZ0NsYXNzKVswXSl0aGlzLmFsbG93Q2xpY2s9ITA7ZWxzZSBpZighcy5zd2lwZUhhbmRsZXJ8fHQocikuY2xvc2VzdChzLnN3aXBlSGFuZGxlcilbMF0pe2EuY3VycmVudFg9XCJ0b3VjaHN0YXJ0XCI9PT1yLnR5cGU/ci50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYOnIucGFnZVgsYS5jdXJyZW50WT1cInRvdWNoc3RhcnRcIj09PXIudHlwZT9yLnRhcmdldFRvdWNoZXNbMF0ucGFnZVk6ci5wYWdlWTt2YXIgbj1hLmN1cnJlbnRYLG89YS5jdXJyZW50WTtpZighKHkuaW9zJiYheS5jb3Jkb3ZhJiZzLmlPU0VkZ2VTd2lwZURldGVjdGlvbiYmbjw9cy5pT1NFZGdlU3dpcGVUaHJlc2hvbGQmJm4+PXdpbmRvdy5zY3JlZW4ud2lkdGgtcy5pT1NFZGdlU3dpcGVUaHJlc2hvbGQpKXtpZihsLmV4dGVuZChpLHtpc1RvdWNoZWQ6ITAsaXNNb3ZlZDohMSxhbGxvd1RvdWNoQ2FsbGJhY2tzOiEwLGlzU2Nyb2xsaW5nOnZvaWQgMCxzdGFydE1vdmluZzp2b2lkIDB9KSxhLnN0YXJ0WD1uLGEuc3RhcnRZPW8saS50b3VjaFN0YXJ0VGltZT1sLm5vdygpLHRoaXMuYWxsb3dDbGljaz0hMCx0aGlzLnVwZGF0ZVNpemUoKSx0aGlzLnN3aXBlRGlyZWN0aW9uPXZvaWQgMCxzLnRocmVzaG9sZD4wJiYoaS5hbGxvd1RocmVzaG9sZE1vdmU9ITEpLFwidG91Y2hzdGFydFwiIT09ci50eXBlKXt2YXIgaD0hMDt0KHIudGFyZ2V0KS5pcyhpLmZvcm1FbGVtZW50cykmJihoPSExKSxkLmFjdGl2ZUVsZW1lbnQmJnQoZC5hY3RpdmVFbGVtZW50KS5pcyhpLmZvcm1FbGVtZW50cykmJmQuYWN0aXZlRWxlbWVudC5ibHVyKCksaCYmdGhpcy5hbGxvd1RvdWNoTW92ZSYmci5wcmV2ZW50RGVmYXVsdCgpfXRoaXMuZW1pdChcInRvdWNoU3RhcnRcIixyKX19fSxUPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMudG91Y2hFdmVudHNEYXRhLHM9dGhpcy5wYXJhbXMsYT10aGlzLnRvdWNoZXMscj10aGlzLnJ0bCxuPWU7aWYobi5vcmlnaW5hbEV2ZW50JiYobj1uLm9yaWdpbmFsRXZlbnQpLCFpLmlzVG91Y2hFdmVudHx8XCJtb3VzZW1vdmVcIiE9PW4udHlwZSl7dmFyIG89XCJ0b3VjaG1vdmVcIj09PW4udHlwZT9uLnRhcmdldFRvdWNoZXNbMF0ucGFnZVg6bi5wYWdlWCxoPVwidG91Y2htb3ZlXCI9PT1uLnR5cGU/bi50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZOm4ucGFnZVk7aWYobi5wcmV2ZW50ZWRCeU5lc3RlZFN3aXBlcilyZXR1cm4gYS5zdGFydFg9byx2b2lkKGEuc3RhcnRZPWgpO2lmKCF0aGlzLmFsbG93VG91Y2hNb3ZlKXJldHVybiB0aGlzLmFsbG93Q2xpY2s9ITEsdm9pZChpLmlzVG91Y2hlZCYmKGwuZXh0ZW5kKGEse3N0YXJ0WDpvLHN0YXJ0WTpoLGN1cnJlbnRYOm8sY3VycmVudFk6aH0pLGkudG91Y2hTdGFydFRpbWU9bC5ub3coKSkpO2lmKGkuaXNUb3VjaEV2ZW50JiZzLnRvdWNoUmVsZWFzZU9uRWRnZXMmJiFzLmxvb3ApaWYodGhpcy5pc1ZlcnRpY2FsKCkpe2lmKGg8YS5zdGFydFkmJnRoaXMudHJhbnNsYXRlPD10aGlzLm1heFRyYW5zbGF0ZSgpfHxoPmEuc3RhcnRZJiZ0aGlzLnRyYW5zbGF0ZT49dGhpcy5taW5UcmFuc2xhdGUoKSlyZXR1cm4gaS5pc1RvdWNoZWQ9ITEsdm9pZChpLmlzTW92ZWQ9ITEpfWVsc2UgaWYobzxhLnN0YXJ0WCYmdGhpcy50cmFuc2xhdGU8PXRoaXMubWF4VHJhbnNsYXRlKCl8fG8+YS5zdGFydFgmJnRoaXMudHJhbnNsYXRlPj10aGlzLm1pblRyYW5zbGF0ZSgpKXJldHVybjtpZihpLmlzVG91Y2hFdmVudCYmZC5hY3RpdmVFbGVtZW50JiZuLnRhcmdldD09PWQuYWN0aXZlRWxlbWVudCYmdChuLnRhcmdldCkuaXMoaS5mb3JtRWxlbWVudHMpKXJldHVybiBpLmlzTW92ZWQ9ITAsdm9pZCh0aGlzLmFsbG93Q2xpY2s9ITEpO2lmKGkuYWxsb3dUb3VjaENhbGxiYWNrcyYmdGhpcy5lbWl0KFwidG91Y2hNb3ZlXCIsbiksIShuLnRhcmdldFRvdWNoZXMmJm4udGFyZ2V0VG91Y2hlcy5sZW5ndGg+MSkpe2EuY3VycmVudFg9byxhLmN1cnJlbnRZPWg7dmFyIHAsYz1hLmN1cnJlbnRYLWEuc3RhcnRYLHU9YS5jdXJyZW50WS1hLnN0YXJ0WTtpZih2b2lkIDA9PT1pLmlzU2Nyb2xsaW5nKXRoaXMuaXNIb3Jpem9udGFsKCkmJmEuY3VycmVudFk9PT1hLnN0YXJ0WXx8dGhpcy5pc1ZlcnRpY2FsKCkmJmEuY3VycmVudFg9PT1hLnN0YXJ0WD9pLmlzU2Nyb2xsaW5nPSExOmMqYyt1KnU+PTI1JiYocD0xODAqTWF0aC5hdGFuMihNYXRoLmFicyh1KSxNYXRoLmFicyhjKSkvTWF0aC5QSSxpLmlzU2Nyb2xsaW5nPXRoaXMuaXNIb3Jpem9udGFsKCk/cD5zLnRvdWNoQW5nbGU6OTAtcD5zLnRvdWNoQW5nbGUpO2lmKGkuaXNTY3JvbGxpbmcmJnRoaXMuZW1pdChcInRvdWNoTW92ZU9wcG9zaXRlXCIsbiksXCJ1bmRlZmluZWRcIj09dHlwZW9mIHN0YXJ0TW92aW5nJiYoYS5jdXJyZW50WD09PWEuc3RhcnRYJiZhLmN1cnJlbnRZPT09YS5zdGFydFl8fChpLnN0YXJ0TW92aW5nPSEwKSksaS5pc1RvdWNoZWQpaWYoaS5pc1Njcm9sbGluZylpLmlzVG91Y2hlZD0hMTtlbHNlIGlmKGkuc3RhcnRNb3Zpbmcpe3RoaXMuYWxsb3dDbGljaz0hMSxuLnByZXZlbnREZWZhdWx0KCkscy50b3VjaE1vdmVTdG9wUHJvcGFnYXRpb24mJiFzLm5lc3RlZCYmbi5zdG9wUHJvcGFnYXRpb24oKSxpLmlzTW92ZWR8fChzLmxvb3AmJnRoaXMubG9vcEZpeCgpLGkuc3RhcnRUcmFuc2xhdGU9dGhpcy5nZXRUcmFuc2xhdGUoKSx0aGlzLnNldFRyYW5zaXRpb24oMCksdGhpcy5hbmltYXRpbmcmJnRoaXMuJHdyYXBwZXJFbC50cmlnZ2VyKFwid2Via2l0VHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kXCIpLGkuYWxsb3dNb21lbnR1bUJvdW5jZT0hMSwhcy5ncmFiQ3Vyc29yfHwhMCE9PXRoaXMuYWxsb3dTbGlkZU5leHQmJiEwIT09dGhpcy5hbGxvd1NsaWRlUHJldnx8dGhpcy5zZXRHcmFiQ3Vyc29yKCEwKSx0aGlzLmVtaXQoXCJzbGlkZXJGaXJzdE1vdmVcIixuKSksdGhpcy5lbWl0KFwic2xpZGVyTW92ZVwiLG4pLGkuaXNNb3ZlZD0hMDt2YXIgZj10aGlzLmlzSG9yaXpvbnRhbCgpP2M6dTthLmRpZmY9ZixmKj1zLnRvdWNoUmF0aW8sciYmKGY9LWYpLHRoaXMuc3dpcGVEaXJlY3Rpb249Zj4wP1wicHJldlwiOlwibmV4dFwiLGkuY3VycmVudFRyYW5zbGF0ZT1mK2kuc3RhcnRUcmFuc2xhdGU7dmFyIHY9ITAsbT1zLnJlc2lzdGFuY2VSYXRpbztpZihzLnRvdWNoUmVsZWFzZU9uRWRnZXMmJihtPTApLGY+MCYmaS5jdXJyZW50VHJhbnNsYXRlPnRoaXMubWluVHJhbnNsYXRlKCk/KHY9ITEscy5yZXNpc3RhbmNlJiYoaS5jdXJyZW50VHJhbnNsYXRlPXRoaXMubWluVHJhbnNsYXRlKCktMStNYXRoLnBvdygtdGhpcy5taW5UcmFuc2xhdGUoKStpLnN0YXJ0VHJhbnNsYXRlK2YsbSkpKTpmPDAmJmkuY3VycmVudFRyYW5zbGF0ZTx0aGlzLm1heFRyYW5zbGF0ZSgpJiYodj0hMSxzLnJlc2lzdGFuY2UmJihpLmN1cnJlbnRUcmFuc2xhdGU9dGhpcy5tYXhUcmFuc2xhdGUoKSsxLU1hdGgucG93KHRoaXMubWF4VHJhbnNsYXRlKCktaS5zdGFydFRyYW5zbGF0ZS1mLG0pKSksdiYmKG4ucHJldmVudGVkQnlOZXN0ZWRTd2lwZXI9ITApLCF0aGlzLmFsbG93U2xpZGVOZXh0JiZcIm5leHRcIj09PXRoaXMuc3dpcGVEaXJlY3Rpb24mJmkuY3VycmVudFRyYW5zbGF0ZTxpLnN0YXJ0VHJhbnNsYXRlJiYoaS5jdXJyZW50VHJhbnNsYXRlPWkuc3RhcnRUcmFuc2xhdGUpLCF0aGlzLmFsbG93U2xpZGVQcmV2JiZcInByZXZcIj09PXRoaXMuc3dpcGVEaXJlY3Rpb24mJmkuY3VycmVudFRyYW5zbGF0ZT5pLnN0YXJ0VHJhbnNsYXRlJiYoaS5jdXJyZW50VHJhbnNsYXRlPWkuc3RhcnRUcmFuc2xhdGUpLHMudGhyZXNob2xkPjApe2lmKCEoTWF0aC5hYnMoZik+cy50aHJlc2hvbGR8fGkuYWxsb3dUaHJlc2hvbGRNb3ZlKSlyZXR1cm4gdm9pZChpLmN1cnJlbnRUcmFuc2xhdGU9aS5zdGFydFRyYW5zbGF0ZSk7aWYoIWkuYWxsb3dUaHJlc2hvbGRNb3ZlKXJldHVybiBpLmFsbG93VGhyZXNob2xkTW92ZT0hMCxhLnN0YXJ0WD1hLmN1cnJlbnRYLGEuc3RhcnRZPWEuY3VycmVudFksaS5jdXJyZW50VHJhbnNsYXRlPWkuc3RhcnRUcmFuc2xhdGUsdm9pZChhLmRpZmY9dGhpcy5pc0hvcml6b250YWwoKT9hLmN1cnJlbnRYLWEuc3RhcnRYOmEuY3VycmVudFktYS5zdGFydFkpfXMuZm9sbG93RmluZ2VyJiYoKHMuZnJlZU1vZGV8fHMud2F0Y2hTbGlkZXNQcm9ncmVzc3x8cy53YXRjaFNsaWRlc1Zpc2liaWxpdHkpJiYodGhpcy51cGRhdGVBY3RpdmVJbmRleCgpLHRoaXMudXBkYXRlU2xpZGVzQ2xhc3NlcygpKSxzLmZyZWVNb2RlJiYoMD09PWkudmVsb2NpdGllcy5sZW5ndGgmJmkudmVsb2NpdGllcy5wdXNoKHtwb3NpdGlvbjphW3RoaXMuaXNIb3Jpem9udGFsKCk/XCJzdGFydFhcIjpcInN0YXJ0WVwiXSx0aW1lOmkudG91Y2hTdGFydFRpbWV9KSxpLnZlbG9jaXRpZXMucHVzaCh7cG9zaXRpb246YVt0aGlzLmlzSG9yaXpvbnRhbCgpP1wiY3VycmVudFhcIjpcImN1cnJlbnRZXCJdLHRpbWU6bC5ub3coKX0pKSx0aGlzLnVwZGF0ZVByb2dyZXNzKGkuY3VycmVudFRyYW5zbGF0ZSksdGhpcy5zZXRUcmFuc2xhdGUoaS5jdXJyZW50VHJhbnNsYXRlKSl9fX19LEU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPXQudG91Y2hFdmVudHNEYXRhLHM9dC5wYXJhbXMsYT10LnRvdWNoZXMscj10LnJ0bCxuPXQuJHdyYXBwZXJFbCxvPXQuc2xpZGVzR3JpZCxkPXQuc25hcEdyaWQsaD1lO2lmKGgub3JpZ2luYWxFdmVudCYmKGg9aC5vcmlnaW5hbEV2ZW50KSxpLmFsbG93VG91Y2hDYWxsYmFja3MmJnQuZW1pdChcInRvdWNoRW5kXCIsaCksaS5hbGxvd1RvdWNoQ2FsbGJhY2tzPSExLGkuaXNUb3VjaGVkKXtzLmdyYWJDdXJzb3ImJmkuaXNNb3ZlZCYmaS5pc1RvdWNoZWQmJighMD09PXQuYWxsb3dTbGlkZU5leHR8fCEwPT09dC5hbGxvd1NsaWRlUHJldikmJnQuc2V0R3JhYkN1cnNvcighMSk7dmFyIHAsYz1sLm5vdygpLHU9Yy1pLnRvdWNoU3RhcnRUaW1lO2lmKHQuYWxsb3dDbGljayYmKHQudXBkYXRlQ2xpY2tlZFNsaWRlKGgpLHQuZW1pdChcInRhcFwiLGgpLHU8MzAwJiZjLWkubGFzdENsaWNrVGltZT4zMDAmJihpLmNsaWNrVGltZW91dCYmY2xlYXJUaW1lb3V0KGkuY2xpY2tUaW1lb3V0KSxpLmNsaWNrVGltZW91dD1sLm5leHRUaWNrKGZ1bmN0aW9uKCl7dCYmIXQuZGVzdHJveWVkJiZ0LmVtaXQoXCJjbGlja1wiLGgpfSwzMDApKSx1PDMwMCYmYy1pLmxhc3RDbGlja1RpbWU8MzAwJiYoaS5jbGlja1RpbWVvdXQmJmNsZWFyVGltZW91dChpLmNsaWNrVGltZW91dCksdC5lbWl0KFwiZG91YmxlVGFwXCIsaCkpKSxpLmxhc3RDbGlja1RpbWU9bC5ub3coKSxsLm5leHRUaWNrKGZ1bmN0aW9uKCl7dC5kZXN0cm95ZWR8fCh0LmFsbG93Q2xpY2s9ITApfSksIWkuaXNUb3VjaGVkfHwhaS5pc01vdmVkfHwhdC5zd2lwZURpcmVjdGlvbnx8MD09PWEuZGlmZnx8aS5jdXJyZW50VHJhbnNsYXRlPT09aS5zdGFydFRyYW5zbGF0ZSlyZXR1cm4gaS5pc1RvdWNoZWQ9ITEsdm9pZChpLmlzTW92ZWQ9ITEpO2lmKGkuaXNUb3VjaGVkPSExLGkuaXNNb3ZlZD0hMSxwPXMuZm9sbG93RmluZ2VyP3I/dC50cmFuc2xhdGU6LXQudHJhbnNsYXRlOi1pLmN1cnJlbnRUcmFuc2xhdGUscy5mcmVlTW9kZSl7aWYocDwtdC5taW5UcmFuc2xhdGUoKSlyZXR1cm4gdm9pZCB0LnNsaWRlVG8odC5hY3RpdmVJbmRleCk7aWYocD4tdC5tYXhUcmFuc2xhdGUoKSlyZXR1cm4gdm9pZCh0LnNsaWRlcy5sZW5ndGg8ZC5sZW5ndGg/dC5zbGlkZVRvKGQubGVuZ3RoLTEpOnQuc2xpZGVUbyh0LnNsaWRlcy5sZW5ndGgtMSkpO2lmKHMuZnJlZU1vZGVNb21lbnR1bSl7aWYoaS52ZWxvY2l0aWVzLmxlbmd0aD4xKXt2YXIgZj1pLnZlbG9jaXRpZXMucG9wKCksdj1pLnZlbG9jaXRpZXMucG9wKCksbT1mLnBvc2l0aW9uLXYucG9zaXRpb24sZz1mLnRpbWUtdi50aW1lO3QudmVsb2NpdHk9bS9nLHQudmVsb2NpdHkvPTIsTWF0aC5hYnModC52ZWxvY2l0eSk8cy5mcmVlTW9kZU1pbmltdW1WZWxvY2l0eSYmKHQudmVsb2NpdHk9MCksKGc+MTUwfHxsLm5vdygpLWYudGltZT4zMDApJiYodC52ZWxvY2l0eT0wKX1lbHNlIHQudmVsb2NpdHk9MDt0LnZlbG9jaXR5Kj1zLmZyZWVNb2RlTW9tZW50dW1WZWxvY2l0eVJhdGlvLGkudmVsb2NpdGllcy5sZW5ndGg9MDt2YXIgYj0xZTMqcy5mcmVlTW9kZU1vbWVudHVtUmF0aW8sdz10LnZlbG9jaXR5KmIseT10LnRyYW5zbGF0ZSt3O3ImJih5PS15KTt2YXIgeCxUPSExLEU9MjAqTWF0aC5hYnModC52ZWxvY2l0eSkqcy5mcmVlTW9kZU1vbWVudHVtQm91bmNlUmF0aW87aWYoeTx0Lm1heFRyYW5zbGF0ZSgpKXMuZnJlZU1vZGVNb21lbnR1bUJvdW5jZT8oeSt0Lm1heFRyYW5zbGF0ZSgpPC1FJiYoeT10Lm1heFRyYW5zbGF0ZSgpLUUpLHg9dC5tYXhUcmFuc2xhdGUoKSxUPSEwLGkuYWxsb3dNb21lbnR1bUJvdW5jZT0hMCk6eT10Lm1heFRyYW5zbGF0ZSgpO2Vsc2UgaWYoeT50Lm1pblRyYW5zbGF0ZSgpKXMuZnJlZU1vZGVNb21lbnR1bUJvdW5jZT8oeS10Lm1pblRyYW5zbGF0ZSgpPkUmJih5PXQubWluVHJhbnNsYXRlKCkrRSkseD10Lm1pblRyYW5zbGF0ZSgpLFQ9ITAsaS5hbGxvd01vbWVudHVtQm91bmNlPSEwKTp5PXQubWluVHJhbnNsYXRlKCk7ZWxzZSBpZihzLmZyZWVNb2RlU3RpY2t5KXtmb3IodmFyIFMsQz0wO0M8ZC5sZW5ndGg7Qys9MSlpZihkW0NdPi15KXtTPUM7YnJlYWt9eT0tKHk9TWF0aC5hYnMoZFtTXS15KTxNYXRoLmFicyhkW1MtMV0teSl8fFwibmV4dFwiPT09dC5zd2lwZURpcmVjdGlvbj9kW1NdOmRbUy0xXSl9aWYoMCE9PXQudmVsb2NpdHkpYj1yP01hdGguYWJzKCgteS10LnRyYW5zbGF0ZSkvdC52ZWxvY2l0eSk6TWF0aC5hYnMoKHktdC50cmFuc2xhdGUpL3QudmVsb2NpdHkpO2Vsc2UgaWYocy5mcmVlTW9kZVN0aWNreSlyZXR1cm4gdm9pZCB0LnNsaWRlUmVzZXQoKTtzLmZyZWVNb2RlTW9tZW50dW1Cb3VuY2UmJlQ/KHQudXBkYXRlUHJvZ3Jlc3MoeCksdC5zZXRUcmFuc2l0aW9uKGIpLHQuc2V0VHJhbnNsYXRlKHkpLHQudHJhbnNpdGlvblN0YXJ0KCksdC5hbmltYXRpbmc9ITAsbi50cmFuc2l0aW9uRW5kKGZ1bmN0aW9uKCl7dCYmIXQuZGVzdHJveWVkJiZpLmFsbG93TW9tZW50dW1Cb3VuY2UmJih0LmVtaXQoXCJtb21lbnR1bUJvdW5jZVwiKSx0LnNldFRyYW5zaXRpb24ocy5zcGVlZCksdC5zZXRUcmFuc2xhdGUoeCksbi50cmFuc2l0aW9uRW5kKGZ1bmN0aW9uKCl7dCYmIXQuZGVzdHJveWVkJiZ0LnRyYW5zaXRpb25FbmQoKX0pKX0pKTp0LnZlbG9jaXR5Pyh0LnVwZGF0ZVByb2dyZXNzKHkpLHQuc2V0VHJhbnNpdGlvbihiKSx0LnNldFRyYW5zbGF0ZSh5KSx0LnRyYW5zaXRpb25TdGFydCgpLHQuYW5pbWF0aW5nfHwodC5hbmltYXRpbmc9ITAsbi50cmFuc2l0aW9uRW5kKGZ1bmN0aW9uKCl7dCYmIXQuZGVzdHJveWVkJiZ0LnRyYW5zaXRpb25FbmQoKX0pKSk6dC51cGRhdGVQcm9ncmVzcyh5KSx0LnVwZGF0ZUFjdGl2ZUluZGV4KCksdC51cGRhdGVTbGlkZXNDbGFzc2VzKCl9KCFzLmZyZWVNb2RlTW9tZW50dW18fHU+PXMubG9uZ1N3aXBlc01zKSYmKHQudXBkYXRlUHJvZ3Jlc3MoKSx0LnVwZGF0ZUFjdGl2ZUluZGV4KCksdC51cGRhdGVTbGlkZXNDbGFzc2VzKCkpfWVsc2V7Zm9yKHZhciBNPTAsej10LnNsaWRlc1NpemVzR3JpZFswXSxQPTA7UDxvLmxlbmd0aDtQKz1zLnNsaWRlc1Blckdyb3VwKXZvaWQgMCE9PW9bUCtzLnNsaWRlc1Blckdyb3VwXT9wPj1vW1BdJiZwPG9bUCtzLnNsaWRlc1Blckdyb3VwXSYmKE09UCx6PW9bUCtzLnNsaWRlc1Blckdyb3VwXS1vW1BdKTpwPj1vW1BdJiYoTT1QLHo9b1tvLmxlbmd0aC0xXS1vW28ubGVuZ3RoLTJdKTt2YXIgaz0ocC1vW01dKS96O2lmKHU+cy5sb25nU3dpcGVzTXMpe2lmKCFzLmxvbmdTd2lwZXMpcmV0dXJuIHZvaWQgdC5zbGlkZVRvKHQuYWN0aXZlSW5kZXgpO1wibmV4dFwiPT09dC5zd2lwZURpcmVjdGlvbiYmKGs+PXMubG9uZ1N3aXBlc1JhdGlvP3Quc2xpZGVUbyhNK3Muc2xpZGVzUGVyR3JvdXApOnQuc2xpZGVUbyhNKSksXCJwcmV2XCI9PT10LnN3aXBlRGlyZWN0aW9uJiYoaz4xLXMubG9uZ1N3aXBlc1JhdGlvP3Quc2xpZGVUbyhNK3Muc2xpZGVzUGVyR3JvdXApOnQuc2xpZGVUbyhNKSl9ZWxzZXtpZighcy5zaG9ydFN3aXBlcylyZXR1cm4gdm9pZCB0LnNsaWRlVG8odC5hY3RpdmVJbmRleCk7XCJuZXh0XCI9PT10LnN3aXBlRGlyZWN0aW9uJiZ0LnNsaWRlVG8oTStzLnNsaWRlc1Blckdyb3VwKSxcInByZXZcIj09PXQuc3dpcGVEaXJlY3Rpb24mJnQuc2xpZGVUbyhNKX19fX0sUz1mdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyYW1zLHQ9dGhpcy5lbDtpZighdHx8MCE9PXQub2Zmc2V0V2lkdGgpe2UuYnJlYWtwb2ludHMmJnRoaXMuc2V0QnJlYWtwb2ludCgpO3ZhciBpPXRoaXMuYWxsb3dTbGlkZU5leHQscz10aGlzLmFsbG93U2xpZGVQcmV2O2lmKHRoaXMuYWxsb3dTbGlkZU5leHQ9ITAsdGhpcy5hbGxvd1NsaWRlUHJldj0hMCx0aGlzLnVwZGF0ZVNpemUoKSx0aGlzLnVwZGF0ZVNsaWRlcygpLGUuZnJlZU1vZGUpe3ZhciBhPU1hdGgubWluKE1hdGgubWF4KHRoaXMudHJhbnNsYXRlLHRoaXMubWF4VHJhbnNsYXRlKCkpLHRoaXMubWluVHJhbnNsYXRlKCkpO3RoaXMuc2V0VHJhbnNsYXRlKGEpLHRoaXMudXBkYXRlQWN0aXZlSW5kZXgoKSx0aGlzLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSxlLmF1dG9IZWlnaHQmJnRoaXMudXBkYXRlQXV0b0hlaWdodCgpfWVsc2UgdGhpcy51cGRhdGVTbGlkZXNDbGFzc2VzKCksKFwiYXV0b1wiPT09ZS5zbGlkZXNQZXJWaWV3fHxlLnNsaWRlc1BlclZpZXc+MSkmJnRoaXMuaXNFbmQmJiF0aGlzLnBhcmFtcy5jZW50ZXJlZFNsaWRlcz90aGlzLnNsaWRlVG8odGhpcy5zbGlkZXMubGVuZ3RoLTEsMCwhMSwhMCk6dGhpcy5zbGlkZVRvKHRoaXMuYWN0aXZlSW5kZXgsMCwhMSwhMCk7dGhpcy5hbGxvd1NsaWRlUHJldj1zLHRoaXMuYWxsb3dTbGlkZU5leHQ9aX19LEM9ZnVuY3Rpb24oZSl7dGhpcy5hbGxvd0NsaWNrfHwodGhpcy5wYXJhbXMucHJldmVudENsaWNrcyYmZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucGFyYW1zLnByZXZlbnRDbGlja3NQcm9wYWdhdGlvbiYmdGhpcy5hbmltYXRpbmcmJihlLnN0b3BQcm9wYWdhdGlvbigpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpKX07dmFyIE09e2luaXQ6ITAsZGlyZWN0aW9uOlwiaG9yaXpvbnRhbFwiLHRvdWNoRXZlbnRzVGFyZ2V0OlwiY29udGFpbmVyXCIsaW5pdGlhbFNsaWRlOjAsc3BlZWQ6MzAwLGlPU0VkZ2VTd2lwZURldGVjdGlvbjohMSxpT1NFZGdlU3dpcGVUaHJlc2hvbGQ6MjAsZnJlZU1vZGU6ITEsZnJlZU1vZGVNb21lbnR1bTohMCxmcmVlTW9kZU1vbWVudHVtUmF0aW86MSxmcmVlTW9kZU1vbWVudHVtQm91bmNlOiEwLGZyZWVNb2RlTW9tZW50dW1Cb3VuY2VSYXRpbzoxLGZyZWVNb2RlTW9tZW50dW1WZWxvY2l0eVJhdGlvOjEsZnJlZU1vZGVTdGlja3k6ITEsZnJlZU1vZGVNaW5pbXVtVmVsb2NpdHk6LjAyLGF1dG9IZWlnaHQ6ITEsc2V0V3JhcHBlclNpemU6ITEsdmlydHVhbFRyYW5zbGF0ZTohMSxlZmZlY3Q6XCJzbGlkZVwiLGJyZWFrcG9pbnRzOnZvaWQgMCxzcGFjZUJldHdlZW46MCxzbGlkZXNQZXJWaWV3OjEsc2xpZGVzUGVyQ29sdW1uOjEsc2xpZGVzUGVyQ29sdW1uRmlsbDpcImNvbHVtblwiLHNsaWRlc1Blckdyb3VwOjEsY2VudGVyZWRTbGlkZXM6ITEsc2xpZGVzT2Zmc2V0QmVmb3JlOjAsc2xpZGVzT2Zmc2V0QWZ0ZXI6MCxub3JtYWxpemVTbGlkZUluZGV4OiEwLHdhdGNoT3ZlcmZsb3c6ITEscm91bmRMZW5ndGhzOiExLHRvdWNoUmF0aW86MSx0b3VjaEFuZ2xlOjQ1LHNpbXVsYXRlVG91Y2g6ITAsc2hvcnRTd2lwZXM6ITAsbG9uZ1N3aXBlczohMCxsb25nU3dpcGVzUmF0aW86LjUsbG9uZ1N3aXBlc01zOjMwMCxmb2xsb3dGaW5nZXI6ITAsYWxsb3dUb3VjaE1vdmU6ITAsdGhyZXNob2xkOjAsdG91Y2hNb3ZlU3RvcFByb3BhZ2F0aW9uOiEwLHRvdWNoUmVsZWFzZU9uRWRnZXM6ITEsdW5pcXVlTmF2RWxlbWVudHM6ITAscmVzaXN0YW5jZTohMCxyZXNpc3RhbmNlUmF0aW86Ljg1LHdhdGNoU2xpZGVzUHJvZ3Jlc3M6ITEsd2F0Y2hTbGlkZXNWaXNpYmlsaXR5OiExLGdyYWJDdXJzb3I6ITEscHJldmVudENsaWNrczohMCxwcmV2ZW50Q2xpY2tzUHJvcGFnYXRpb246ITAsc2xpZGVUb0NsaWNrZWRTbGlkZTohMSxwcmVsb2FkSW1hZ2VzOiEwLHVwZGF0ZU9uSW1hZ2VzUmVhZHk6ITAsbG9vcDohMSxsb29wQWRkaXRpb25hbFNsaWRlczowLGxvb3BlZFNsaWRlczpudWxsLGxvb3BGaWxsR3JvdXBXaXRoQmxhbms6ITEsYWxsb3dTbGlkZVByZXY6ITAsYWxsb3dTbGlkZU5leHQ6ITAsc3dpcGVIYW5kbGVyOm51bGwsbm9Td2lwaW5nOiEwLG5vU3dpcGluZ0NsYXNzOlwic3dpcGVyLW5vLXN3aXBpbmdcIixwYXNzaXZlTGlzdGVuZXJzOiEwLGNvbnRhaW5lck1vZGlmaWVyQ2xhc3M6XCJzd2lwZXItY29udGFpbmVyLVwiLHNsaWRlQ2xhc3M6XCJzd2lwZXItc2xpZGVcIixzbGlkZUJsYW5rQ2xhc3M6XCJzd2lwZXItc2xpZGUtaW52aXNpYmxlLWJsYW5rXCIsc2xpZGVBY3RpdmVDbGFzczpcInN3aXBlci1zbGlkZS1hY3RpdmVcIixzbGlkZUR1cGxpY2F0ZUFjdGl2ZUNsYXNzOlwic3dpcGVyLXNsaWRlLWR1cGxpY2F0ZS1hY3RpdmVcIixzbGlkZVZpc2libGVDbGFzczpcInN3aXBlci1zbGlkZS12aXNpYmxlXCIsc2xpZGVEdXBsaWNhdGVDbGFzczpcInN3aXBlci1zbGlkZS1kdXBsaWNhdGVcIixzbGlkZU5leHRDbGFzczpcInN3aXBlci1zbGlkZS1uZXh0XCIsc2xpZGVEdXBsaWNhdGVOZXh0Q2xhc3M6XCJzd2lwZXItc2xpZGUtZHVwbGljYXRlLW5leHRcIixzbGlkZVByZXZDbGFzczpcInN3aXBlci1zbGlkZS1wcmV2XCIsc2xpZGVEdXBsaWNhdGVQcmV2Q2xhc3M6XCJzd2lwZXItc2xpZGUtZHVwbGljYXRlLXByZXZcIix3cmFwcGVyQ2xhc3M6XCJzd2lwZXItd3JhcHBlclwiLHJ1bkNhbGxiYWNrc09uSW5pdDohMH0sej17dXBkYXRlOnUsdHJhbnNsYXRlOmYsdHJhbnNpdGlvbjp2LHNsaWRlOm0sbG9vcDpnLGdyYWJDdXJzb3I6YixtYW5pcHVsYXRpb246dyxldmVudHM6e2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyYW1zLHQ9dGhpcy50b3VjaEV2ZW50cyxpPXRoaXMuZWwscz10aGlzLndyYXBwZXJFbDt0aGlzLm9uVG91Y2hTdGFydD14LmJpbmQodGhpcyksdGhpcy5vblRvdWNoTW92ZT1ULmJpbmQodGhpcyksdGhpcy5vblRvdWNoRW5kPUUuYmluZCh0aGlzKSx0aGlzLm9uQ2xpY2s9Qy5iaW5kKHRoaXMpO3ZhciBhPVwiY29udGFpbmVyXCI9PT1lLnRvdWNoRXZlbnRzVGFyZ2V0P2k6cyxyPSEhZS5uZXN0ZWQ7aWYoaC5wb2ludGVyRXZlbnRzfHxoLnByZWZpeGVkUG9pbnRlckV2ZW50cylhLmFkZEV2ZW50TGlzdGVuZXIodC5zdGFydCx0aGlzLm9uVG91Y2hTdGFydCwhMSksKGgudG91Y2g/YTpkKS5hZGRFdmVudExpc3RlbmVyKHQubW92ZSx0aGlzLm9uVG91Y2hNb3ZlLHIpLChoLnRvdWNoP2E6ZCkuYWRkRXZlbnRMaXN0ZW5lcih0LmVuZCx0aGlzLm9uVG91Y2hFbmQsITEpO2Vsc2V7aWYoaC50b3VjaCl7dmFyIG49IShcInRvdWNoc3RhcnRcIiE9PXQuc3RhcnR8fCFoLnBhc3NpdmVMaXN0ZW5lcnx8IWUucGFzc2l2ZUxpc3RlbmVycykmJntwYXNzaXZlOiEwLGNhcHR1cmU6ITF9O2EuYWRkRXZlbnRMaXN0ZW5lcih0LnN0YXJ0LHRoaXMub25Ub3VjaFN0YXJ0LG4pLGEuYWRkRXZlbnRMaXN0ZW5lcih0Lm1vdmUsdGhpcy5vblRvdWNoTW92ZSxoLnBhc3NpdmVMaXN0ZW5lcj97cGFzc2l2ZTohMSxjYXB0dXJlOnJ9OnIpLGEuYWRkRXZlbnRMaXN0ZW5lcih0LmVuZCx0aGlzLm9uVG91Y2hFbmQsbil9KGUuc2ltdWxhdGVUb3VjaCYmIXkuaW9zJiYheS5hbmRyb2lkfHxlLnNpbXVsYXRlVG91Y2gmJiFoLnRvdWNoJiZ5LmlvcykmJihhLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uVG91Y2hTdGFydCwhMSksZC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5vblRvdWNoTW92ZSxyKSxkLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vblRvdWNoRW5kLCExKSl9KGUucHJldmVudENsaWNrc3x8ZS5wcmV2ZW50Q2xpY2tzUHJvcGFnYXRpb24pJiZhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub25DbGljaywhMCksdGhpcy5vbihcInJlc2l6ZSBvYnNlcnZlclVwZGF0ZVwiLFMpfSxkZXRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBhcmFtcyx0PXRoaXMudG91Y2hFdmVudHMsaT10aGlzLmVsLHM9dGhpcy53cmFwcGVyRWwsYT1cImNvbnRhaW5lclwiPT09ZS50b3VjaEV2ZW50c1RhcmdldD9pOnMscj0hIWUubmVzdGVkO2lmKGgucG9pbnRlckV2ZW50c3x8aC5wcmVmaXhlZFBvaW50ZXJFdmVudHMpYS5yZW1vdmVFdmVudExpc3RlbmVyKHQuc3RhcnQsdGhpcy5vblRvdWNoU3RhcnQsITEpLChoLnRvdWNoP2E6ZCkucmVtb3ZlRXZlbnRMaXN0ZW5lcih0Lm1vdmUsdGhpcy5vblRvdWNoTW92ZSxyKSwoaC50b3VjaD9hOmQpLnJlbW92ZUV2ZW50TGlzdGVuZXIodC5lbmQsdGhpcy5vblRvdWNoRW5kLCExKTtlbHNle2lmKGgudG91Y2gpe3ZhciBuPSEoXCJvblRvdWNoU3RhcnRcIiE9PXQuc3RhcnR8fCFoLnBhc3NpdmVMaXN0ZW5lcnx8IWUucGFzc2l2ZUxpc3RlbmVycykmJntwYXNzaXZlOiEwLGNhcHR1cmU6ITF9O2EucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LnN0YXJ0LHRoaXMub25Ub3VjaFN0YXJ0LG4pLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcih0Lm1vdmUsdGhpcy5vblRvdWNoTW92ZSxyKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIodC5lbmQsdGhpcy5vblRvdWNoRW5kLG4pfShlLnNpbXVsYXRlVG91Y2gmJiF5LmlvcyYmIXkuYW5kcm9pZHx8ZS5zaW11bGF0ZVRvdWNoJiYhaC50b3VjaCYmeS5pb3MpJiYoYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vblRvdWNoU3RhcnQsITEpLGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Ub3VjaE1vdmUsciksZC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25Ub3VjaEVuZCwhMSkpfShlLnByZXZlbnRDbGlja3N8fGUucHJldmVudENsaWNrc1Byb3BhZ2F0aW9uKSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2ssITApLHRoaXMub2ZmKFwicmVzaXplIG9ic2VydmVyVXBkYXRlXCIsUyl9fSxicmVha3BvaW50czp7c2V0QnJlYWtwb2ludDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYWN0aXZlSW5kZXgsdD10aGlzLmxvb3BlZFNsaWRlczt2b2lkIDA9PT10JiYodD0wKTt2YXIgaT10aGlzLnBhcmFtcyxzPWkuYnJlYWtwb2ludHM7aWYocyYmKCFzfHwwIT09T2JqZWN0LmtleXMocykubGVuZ3RoKSl7dmFyIGE9dGhpcy5nZXRCcmVha3BvaW50KHMpO2lmKGEmJnRoaXMuY3VycmVudEJyZWFrcG9pbnQhPT1hKXt2YXIgcj1hIGluIHM/c1thXTp0aGlzLm9yaWdpbmFsUGFyYW1zLG49aS5sb29wJiZyLnNsaWRlc1BlclZpZXchPT1pLnNsaWRlc1BlclZpZXc7bC5leHRlbmQodGhpcy5wYXJhbXMsciksbC5leHRlbmQodGhpcyx7YWxsb3dUb3VjaE1vdmU6dGhpcy5wYXJhbXMuYWxsb3dUb3VjaE1vdmUsYWxsb3dTbGlkZU5leHQ6dGhpcy5wYXJhbXMuYWxsb3dTbGlkZU5leHQsYWxsb3dTbGlkZVByZXY6dGhpcy5wYXJhbXMuYWxsb3dTbGlkZVByZXZ9KSx0aGlzLmN1cnJlbnRCcmVha3BvaW50PWEsbiYmKHRoaXMubG9vcERlc3Ryb3koKSx0aGlzLmxvb3BDcmVhdGUoKSx0aGlzLnVwZGF0ZVNsaWRlcygpLHRoaXMuc2xpZGVUbyhlLXQrdGhpcy5sb29wZWRTbGlkZXMsMCwhMSkpLHRoaXMuZW1pdChcImJyZWFrcG9pbnRcIixyKX19fSxnZXRCcmVha3BvaW50OmZ1bmN0aW9uKGUpe2lmKGUpe3ZhciB0PSExLGk9W107T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihlKXtpLnB1c2goZSl9KSxpLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gcGFyc2VJbnQoZSwxMCktcGFyc2VJbnQodCwxMCl9KTtmb3IodmFyIHM9MDtzPGkubGVuZ3RoO3MrPTEpe3ZhciBhPWlbc107YT49by5pbm5lcldpZHRoJiYhdCYmKHQ9YSl9cmV0dXJuIHR8fFwibWF4XCJ9fX0sY2hlY2tPdmVyZmxvdzp7Y2hlY2tPdmVyZmxvdzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuaXNMb2NrZWQ7dGhpcy5pc0xvY2tlZD0xPT09dGhpcy5zbmFwR3JpZC5sZW5ndGgsdGhpcy5hbGxvd1RvdWNoTW92ZT0hdGhpcy5pc0xvY2tlZCxlJiZlIT09dGhpcy5pc0xvY2tlZCYmKHRoaXMuaXNFbmQ9ITEsdGhpcy5uYXZpZ2F0aW9uLnVwZGF0ZSgpKX19LGNsYXNzZXM6e2FkZENsYXNzZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNsYXNzTmFtZXMsdD10aGlzLnBhcmFtcyxpPXRoaXMucnRsLHM9dGhpcy4kZWwsYT1bXTthLnB1c2godC5kaXJlY3Rpb24pLHQuZnJlZU1vZGUmJmEucHVzaChcImZyZWUtbW9kZVwiKSxoLmZsZXhib3h8fGEucHVzaChcIm5vLWZsZXhib3hcIiksdC5hdXRvSGVpZ2h0JiZhLnB1c2goXCJhdXRvaGVpZ2h0XCIpLGkmJmEucHVzaChcInJ0bFwiKSx0LnNsaWRlc1BlckNvbHVtbj4xJiZhLnB1c2goXCJtdWx0aXJvd1wiKSx5LmFuZHJvaWQmJmEucHVzaChcImFuZHJvaWRcIikseS5pb3MmJmEucHVzaChcImlvc1wiKSwoaC5wb2ludGVyRXZlbnRzfHxoLnByZWZpeGVkUG9pbnRlckV2ZW50cykmJmEucHVzaChcIndwOC1cIit0LmRpcmVjdGlvbiksYS5mb3JFYWNoKGZ1bmN0aW9uKGkpe2UucHVzaCh0LmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MraSl9KSxzLmFkZENsYXNzKGUuam9pbihcIiBcIikpfSxyZW1vdmVDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kZWwsdD10aGlzLmNsYXNzTmFtZXM7ZS5yZW1vdmVDbGFzcyh0LmpvaW4oXCIgXCIpKX19LGltYWdlczp7bG9hZEltYWdlOmZ1bmN0aW9uKGUsdCxpLHMsYSxyKXt2YXIgbjtmdW5jdGlvbiBsKCl7ciYmcigpfWUuY29tcGxldGUmJmE/bCgpOnQ/KChuPW5ldyBvLkltYWdlKS5vbmxvYWQ9bCxuLm9uZXJyb3I9bCxzJiYobi5zaXplcz1zKSxpJiYobi5zcmNzZXQ9aSksdCYmKG4uc3JjPXQpKTpsKCl9LHByZWxvYWRJbWFnZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Z1bmN0aW9uIHQoKXt2b2lkIDAhPT1lJiZudWxsIT09ZSYmZSYmIWUuZGVzdHJveWVkJiYodm9pZCAwIT09ZS5pbWFnZXNMb2FkZWQmJihlLmltYWdlc0xvYWRlZCs9MSksZS5pbWFnZXNMb2FkZWQ9PT1lLmltYWdlc1RvTG9hZC5sZW5ndGgmJihlLnBhcmFtcy51cGRhdGVPbkltYWdlc1JlYWR5JiZlLnVwZGF0ZSgpLGUuZW1pdChcImltYWdlc1JlYWR5XCIpKSl9ZS5pbWFnZXNUb0xvYWQ9ZS4kZWwuZmluZChcImltZ1wiKTtmb3IodmFyIGk9MDtpPGUuaW1hZ2VzVG9Mb2FkLmxlbmd0aDtpKz0xKXt2YXIgcz1lLmltYWdlc1RvTG9hZFtpXTtlLmxvYWRJbWFnZShzLHMuY3VycmVudFNyY3x8cy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikscy5zcmNzZXR8fHMuZ2V0QXR0cmlidXRlKFwic3Jjc2V0XCIpLHMuc2l6ZXN8fHMuZ2V0QXR0cmlidXRlKFwic2l6ZXNcIiksITAsdCl9fX19LFA9e30saz1mdW5jdGlvbihlKXtmdW5jdGlvbiBpKCl7Zm9yKHZhciBzLGEscixuPVtdLG89YXJndW1lbnRzLmxlbmd0aDtvLS07KW5bb109YXJndW1lbnRzW29dOzE9PT1uLmxlbmd0aCYmblswXS5jb25zdHJ1Y3RvciYmblswXS5jb25zdHJ1Y3Rvcj09PU9iamVjdD9hPW5bMF06KHM9KHI9bilbMF0sYT1yWzFdKTthfHwoYT17fSksYT1sLmV4dGVuZCh7fSxhKSxzJiYhYS5lbCYmKGEuZWw9cyksZS5jYWxsKHRoaXMsYSksT2JqZWN0LmtleXMoeikuZm9yRWFjaChmdW5jdGlvbihlKXtPYmplY3Qua2V5cyh6W2VdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2kucHJvdG90eXBlW3RdfHwoaS5wcm90b3R5cGVbdF09eltlXVt0XSl9KX0pO3ZhciBkPXRoaXM7dm9pZCAwPT09ZC5tb2R1bGVzJiYoZC5tb2R1bGVzPXt9KSxPYmplY3Qua2V5cyhkLm1vZHVsZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ZC5tb2R1bGVzW2VdO2lmKHQucGFyYW1zKXt2YXIgaT1PYmplY3Qua2V5cyh0LnBhcmFtcylbMF0scz10LnBhcmFtc1tpXTtpZihcIm9iamVjdFwiIT10eXBlb2YgcylyZXR1cm47aWYoIShpIGluIGEmJlwiZW5hYmxlZFwiaW4gcykpcmV0dXJuOyEwPT09YVtpXSYmKGFbaV09e2VuYWJsZWQ6ITB9KSxcIm9iamVjdFwiIT10eXBlb2YgYVtpXXx8XCJlbmFibGVkXCJpbiBhW2ldfHwoYVtpXS5lbmFibGVkPSEwKSxhW2ldfHwoYVtpXT17ZW5hYmxlZDohMX0pfX0pO3ZhciBwPWwuZXh0ZW5kKHt9LE0pO2QudXNlTW9kdWxlc1BhcmFtcyhwKSxkLnBhcmFtcz1sLmV4dGVuZCh7fSxwLFAsYSksZC5vcmlnaW5hbFBhcmFtcz1sLmV4dGVuZCh7fSxkLnBhcmFtcyksZC5wYXNzZWRQYXJhbXM9bC5leHRlbmQoe30sYSk7dmFyIGM9dChkLnBhcmFtcy5lbCk7aWYocz1jWzBdKXtpZihjLmxlbmd0aD4xKXt2YXIgdT1bXTtyZXR1cm4gYy5lYWNoKGZ1bmN0aW9uKGUsdCl7dmFyIHM9bC5leHRlbmQoe30sYSx7ZWw6dH0pO3UucHVzaChuZXcgaShzKSl9KSx1fXMuc3dpcGVyPWQsYy5kYXRhKFwic3dpcGVyXCIsZCk7dmFyIGYsdixtPWMuY2hpbGRyZW4oXCIuXCIrZC5wYXJhbXMud3JhcHBlckNsYXNzKTtyZXR1cm4gbC5leHRlbmQoZCx7JGVsOmMsZWw6cywkd3JhcHBlckVsOm0sd3JhcHBlckVsOm1bMF0sY2xhc3NOYW1lczpbXSxzbGlkZXM6dCgpLHNsaWRlc0dyaWQ6W10sc25hcEdyaWQ6W10sc2xpZGVzU2l6ZXNHcmlkOltdLGlzSG9yaXpvbnRhbDpmdW5jdGlvbigpe3JldHVyblwiaG9yaXpvbnRhbFwiPT09ZC5wYXJhbXMuZGlyZWN0aW9ufSxpc1ZlcnRpY2FsOmZ1bmN0aW9uKCl7cmV0dXJuXCJ2ZXJ0aWNhbFwiPT09ZC5wYXJhbXMuZGlyZWN0aW9ufSxydGw6XCJob3Jpem9udGFsXCI9PT1kLnBhcmFtcy5kaXJlY3Rpb24mJihcInJ0bFwiPT09cy5kaXIudG9Mb3dlckNhc2UoKXx8XCJydGxcIj09PWMuY3NzKFwiZGlyZWN0aW9uXCIpKSx3cm9uZ1JUTDpcIi13ZWJraXQtYm94XCI9PT1tLmNzcyhcImRpc3BsYXlcIiksYWN0aXZlSW5kZXg6MCxyZWFsSW5kZXg6MCxpc0JlZ2lubmluZzohMCxpc0VuZDohMSx0cmFuc2xhdGU6MCxwcm9ncmVzczowLHZlbG9jaXR5OjAsYW5pbWF0aW5nOiExLGFsbG93U2xpZGVOZXh0OmQucGFyYW1zLmFsbG93U2xpZGVOZXh0LGFsbG93U2xpZGVQcmV2OmQucGFyYW1zLmFsbG93U2xpZGVQcmV2LHRvdWNoRXZlbnRzOihmPVtcInRvdWNoc3RhcnRcIixcInRvdWNobW92ZVwiLFwidG91Y2hlbmRcIl0sdj1bXCJtb3VzZWRvd25cIixcIm1vdXNlbW92ZVwiLFwibW91c2V1cFwiXSxoLnBvaW50ZXJFdmVudHM/dj1bXCJwb2ludGVyZG93blwiLFwicG9pbnRlcm1vdmVcIixcInBvaW50ZXJ1cFwiXTpoLnByZWZpeGVkUG9pbnRlckV2ZW50cyYmKHY9W1wiTVNQb2ludGVyRG93blwiLFwiTVNQb2ludGVyTW92ZVwiLFwiTVNQb2ludGVyVXBcIl0pLHtzdGFydDpoLnRvdWNofHwhZC5wYXJhbXMuc2ltdWxhdGVUb3VjaD9mWzBdOnZbMF0sbW92ZTpoLnRvdWNofHwhZC5wYXJhbXMuc2ltdWxhdGVUb3VjaD9mWzFdOnZbMV0sZW5kOmgudG91Y2h8fCFkLnBhcmFtcy5zaW11bGF0ZVRvdWNoP2ZbMl06dlsyXX0pLHRvdWNoRXZlbnRzRGF0YTp7aXNUb3VjaGVkOnZvaWQgMCxpc01vdmVkOnZvaWQgMCxhbGxvd1RvdWNoQ2FsbGJhY2tzOnZvaWQgMCx0b3VjaFN0YXJ0VGltZTp2b2lkIDAsaXNTY3JvbGxpbmc6dm9pZCAwLGN1cnJlbnRUcmFuc2xhdGU6dm9pZCAwLHN0YXJ0VHJhbnNsYXRlOnZvaWQgMCxhbGxvd1RocmVzaG9sZE1vdmU6dm9pZCAwLGZvcm1FbGVtZW50czpcImlucHV0LCBzZWxlY3QsIG9wdGlvbiwgdGV4dGFyZWEsIGJ1dHRvbiwgdmlkZW9cIixsYXN0Q2xpY2tUaW1lOmwubm93KCksY2xpY2tUaW1lb3V0OnZvaWQgMCx2ZWxvY2l0aWVzOltdLGFsbG93TW9tZW50dW1Cb3VuY2U6dm9pZCAwLGlzVG91Y2hFdmVudDp2b2lkIDAsc3RhcnRNb3Zpbmc6dm9pZCAwfSxhbGxvd0NsaWNrOiEwLGFsbG93VG91Y2hNb3ZlOmQucGFyYW1zLmFsbG93VG91Y2hNb3ZlLHRvdWNoZXM6e3N0YXJ0WDowLHN0YXJ0WTowLGN1cnJlbnRYOjAsY3VycmVudFk6MCxkaWZmOjB9LGltYWdlc1RvTG9hZDpbXSxpbWFnZXNMb2FkZWQ6MH0pLGQudXNlTW9kdWxlcygpLGQucGFyYW1zLmluaXQmJmQuaW5pdCgpLGR9fWUmJihpLl9fcHJvdG9fXz1lKSxpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlKSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pO3ZhciBzPXtleHRlbmRlZERlZmF1bHRzOntjb25maWd1cmFibGU6ITB9LGRlZmF1bHRzOntjb25maWd1cmFibGU6ITB9LENsYXNzOntjb25maWd1cmFibGU6ITB9LCQ6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBpLnByb3RvdHlwZS5zbGlkZXNQZXJWaWV3RHluYW1pYz1mdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyYW1zLHQ9dGhpcy5zbGlkZXMsaT10aGlzLnNsaWRlc0dyaWQscz10aGlzLnNpemUsYT10aGlzLmFjdGl2ZUluZGV4LHI9MTtpZihlLmNlbnRlcmVkU2xpZGVzKXtmb3IodmFyIG4sbz10W2FdLnN3aXBlclNsaWRlU2l6ZSxsPWErMTtsPHQubGVuZ3RoO2wrPTEpdFtsXSYmIW4mJihyKz0xLChvKz10W2xdLnN3aXBlclNsaWRlU2l6ZSk+cyYmKG49ITApKTtmb3IodmFyIGQ9YS0xO2Q+PTA7ZC09MSl0W2RdJiYhbiYmKHIrPTEsKG8rPXRbZF0uc3dpcGVyU2xpZGVTaXplKT5zJiYobj0hMCkpfWVsc2UgZm9yKHZhciBoPWErMTtoPHQubGVuZ3RoO2grPTEpaVtoXS1pW2FdPHMmJihyKz0xKTtyZXR1cm4gcn0saS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlJiYhZS5kZXN0cm95ZWQmJihlLnVwZGF0ZVNpemUoKSxlLnVwZGF0ZVNsaWRlcygpLGUudXBkYXRlUHJvZ3Jlc3MoKSxlLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSxlLnBhcmFtcy5mcmVlTW9kZT8odCgpLGUucGFyYW1zLmF1dG9IZWlnaHQmJmUudXBkYXRlQXV0b0hlaWdodCgpKTooKFwiYXV0b1wiPT09ZS5wYXJhbXMuc2xpZGVzUGVyVmlld3x8ZS5wYXJhbXMuc2xpZGVzUGVyVmlldz4xKSYmZS5pc0VuZCYmIWUucGFyYW1zLmNlbnRlcmVkU2xpZGVzP2Uuc2xpZGVUbyhlLnNsaWRlcy5sZW5ndGgtMSwwLCExLCEwKTplLnNsaWRlVG8oZS5hY3RpdmVJbmRleCwwLCExLCEwKSl8fHQoKSxlLmVtaXQoXCJ1cGRhdGVcIikpO2Z1bmN0aW9uIHQoKXt2YXIgdD1lLnJ0bD8tMSplLnRyYW5zbGF0ZTplLnRyYW5zbGF0ZSxpPU1hdGgubWluKE1hdGgubWF4KHQsZS5tYXhUcmFuc2xhdGUoKSksZS5taW5UcmFuc2xhdGUoKSk7ZS5zZXRUcmFuc2xhdGUoaSksZS51cGRhdGVBY3RpdmVJbmRleCgpLGUudXBkYXRlU2xpZGVzQ2xhc3NlcygpfX0saS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaW5pdGlhbGl6ZWR8fCh0aGlzLmVtaXQoXCJiZWZvcmVJbml0XCIpLHRoaXMucGFyYW1zLmJyZWFrcG9pbnRzJiZ0aGlzLnNldEJyZWFrcG9pbnQoKSx0aGlzLmFkZENsYXNzZXMoKSx0aGlzLnBhcmFtcy5sb29wJiZ0aGlzLmxvb3BDcmVhdGUoKSx0aGlzLnVwZGF0ZVNpemUoKSx0aGlzLnVwZGF0ZVNsaWRlcygpLHRoaXMucGFyYW1zLndhdGNoT3ZlcmZsb3cmJnRoaXMuY2hlY2tPdmVyZmxvdygpLHRoaXMucGFyYW1zLmdyYWJDdXJzb3ImJnRoaXMuc2V0R3JhYkN1cnNvcigpLHRoaXMucGFyYW1zLnByZWxvYWRJbWFnZXMmJnRoaXMucHJlbG9hZEltYWdlcygpLHRoaXMucGFyYW1zLmxvb3A/dGhpcy5zbGlkZVRvKHRoaXMucGFyYW1zLmluaXRpYWxTbGlkZSt0aGlzLmxvb3BlZFNsaWRlcywwLHRoaXMucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCk6dGhpcy5zbGlkZVRvKHRoaXMucGFyYW1zLmluaXRpYWxTbGlkZSwwLHRoaXMucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCksdGhpcy5hdHRhY2hFdmVudHMoKSx0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMuZW1pdChcImluaXRcIikpfSxpLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZSYmKGU9ITApLHZvaWQgMD09PXQmJih0PSEwKTt2YXIgaT10aGlzLHM9aS5wYXJhbXMsYT1pLiRlbCxyPWkuJHdyYXBwZXJFbCxuPWkuc2xpZGVzO2kuZW1pdChcImJlZm9yZURlc3Ryb3lcIiksaS5pbml0aWFsaXplZD0hMSxpLmRldGFjaEV2ZW50cygpLHMubG9vcCYmaS5sb29wRGVzdHJveSgpLHQmJihpLnJlbW92ZUNsYXNzZXMoKSxhLnJlbW92ZUF0dHIoXCJzdHlsZVwiKSxyLnJlbW92ZUF0dHIoXCJzdHlsZVwiKSxuJiZuLmxlbmd0aCYmbi5yZW1vdmVDbGFzcyhbcy5zbGlkZVZpc2libGVDbGFzcyxzLnNsaWRlQWN0aXZlQ2xhc3Mscy5zbGlkZU5leHRDbGFzcyxzLnNsaWRlUHJldkNsYXNzXS5qb2luKFwiIFwiKSkucmVtb3ZlQXR0cihcInN0eWxlXCIpLnJlbW92ZUF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKS5yZW1vdmVBdHRyKFwiZGF0YS1zd2lwZXItY29sdW1uXCIpLnJlbW92ZUF0dHIoXCJkYXRhLXN3aXBlci1yb3dcIikpLGkuZW1pdChcImRlc3Ryb3lcIiksT2JqZWN0LmtleXMoaS5ldmVudHNMaXN0ZW5lcnMpLmZvckVhY2goZnVuY3Rpb24oZSl7aS5vZmYoZSl9KSwhMSE9PWUmJihpLiRlbFswXS5zd2lwZXI9bnVsbCxpLiRlbC5kYXRhKFwic3dpcGVyXCIsbnVsbCksbC5kZWxldGVQcm9wcyhpKSksaS5kZXN0cm95ZWQ9ITB9LGkuZXh0ZW5kRGVmYXVsdHM9ZnVuY3Rpb24oZSl7bC5leHRlbmQoUCxlKX0scy5leHRlbmRlZERlZmF1bHRzLmdldD1mdW5jdGlvbigpe3JldHVybiBQfSxzLmRlZmF1bHRzLmdldD1mdW5jdGlvbigpe3JldHVybiBNfSxzLkNsYXNzLmdldD1mdW5jdGlvbigpe3JldHVybiBlfSxzLiQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGkscyksaX0ocCksJD17bmFtZTpcImRldmljZVwiLHByb3RvOntkZXZpY2U6eX0sc3RhdGljOntkZXZpY2U6eX19LEw9e25hbWU6XCJzdXBwb3J0XCIscHJvdG86e3N1cHBvcnQ6aH0sc3RhdGljOntzdXBwb3J0Omh9fSxJPWZ1bmN0aW9uKCl7cmV0dXJue2lzU2FmYXJpOihlPW8ubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLGUuaW5kZXhPZihcInNhZmFyaVwiKT49MCYmZS5pbmRleE9mKFwiY2hyb21lXCIpPDAmJmUuaW5kZXhPZihcImFuZHJvaWRcIik8MCksaXNVaVdlYlZpZXc6LyhpUGhvbmV8aVBvZHxpUGFkKS4qQXBwbGVXZWJLaXQoPyEuKlNhZmFyaSkvaS50ZXN0KG8ubmF2aWdhdG9yLnVzZXJBZ2VudCl9O3ZhciBlfSgpLEQ9e25hbWU6XCJicm93c2VyXCIscHJvdG86e2Jyb3dzZXI6SX0sc3RhdGljOnticm93c2VyOkl9fSxPPXtuYW1lOlwicmVzaXplXCIsY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztsLmV4dGVuZChlLHtyZXNpemU6e3Jlc2l6ZUhhbmRsZXI6ZnVuY3Rpb24oKXtlJiYhZS5kZXN0cm95ZWQmJmUuaW5pdGlhbGl6ZWQmJihlLmVtaXQoXCJiZWZvcmVSZXNpemVcIiksZS5lbWl0KFwicmVzaXplXCIpKX0sb3JpZW50YXRpb25DaGFuZ2VIYW5kbGVyOmZ1bmN0aW9uKCl7ZSYmIWUuZGVzdHJveWVkJiZlLmluaXRpYWxpemVkJiZlLmVtaXQoXCJvcmllbnRhdGlvbmNoYW5nZVwiKX19fSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7by5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5yZXNpemUucmVzaXplSGFuZGxlciksby5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIix0aGlzLnJlc2l6ZS5vcmllbnRhdGlvbkNoYW5nZUhhbmRsZXIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7by5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5yZXNpemUucmVzaXplSGFuZGxlciksby5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIix0aGlzLnJlc2l6ZS5vcmllbnRhdGlvbkNoYW5nZUhhbmRsZXIpfX19LEE9e2Z1bmM6by5NdXRhdGlvbk9ic2VydmVyfHxvLldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIsYXR0YWNoOmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciBpPXRoaXMscz1uZXcoMCxBLmZ1bmMpKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtpLmVtaXQoXCJvYnNlcnZlclVwZGF0ZVwiLGUpfSl9KTtzLm9ic2VydmUoZSx7YXR0cmlidXRlczp2b2lkIDA9PT10LmF0dHJpYnV0ZXN8fHQuYXR0cmlidXRlcyxjaGlsZExpc3Q6dm9pZCAwPT09dC5jaGlsZExpc3R8fHQuY2hpbGRMaXN0LGNoYXJhY3RlckRhdGE6dm9pZCAwPT09dC5jaGFyYWN0ZXJEYXRhfHx0LmNoYXJhY3RlckRhdGF9KSxpLm9ic2VydmVyLm9ic2VydmVycy5wdXNoKHMpfSxpbml0OmZ1bmN0aW9uKCl7aWYoaC5vYnNlcnZlciYmdGhpcy5wYXJhbXMub2JzZXJ2ZXIpe2lmKHRoaXMucGFyYW1zLm9ic2VydmVQYXJlbnRzKWZvcih2YXIgZT10aGlzLiRlbC5wYXJlbnRzKCksdD0wO3Q8ZS5sZW5ndGg7dCs9MSl0aGlzLm9ic2VydmVyLmF0dGFjaChlW3RdKTt0aGlzLm9ic2VydmVyLmF0dGFjaCh0aGlzLiRlbFswXSx7Y2hpbGRMaXN0OiExfSksdGhpcy5vYnNlcnZlci5hdHRhY2godGhpcy4kd3JhcHBlckVsWzBdLHthdHRyaWJ1dGVzOiExfSl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlci5vYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmRpc2Nvbm5lY3QoKX0pLHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZXJzPVtdfX0sSD17bmFtZTpcIm9ic2VydmVyXCIscGFyYW1zOntvYnNlcnZlcjohMSxvYnNlcnZlUGFyZW50czohMX0sY3JlYXRlOmZ1bmN0aW9uKCl7bC5leHRlbmQodGhpcyx7b2JzZXJ2ZXI6e2luaXQ6QS5pbml0LmJpbmQodGhpcyksYXR0YWNoOkEuYXR0YWNoLmJpbmQodGhpcyksZGVzdHJveTpBLmRlc3Ryb3kuYmluZCh0aGlzKSxvYnNlcnZlcnM6W119fSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlci5pbml0KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyLmRlc3Ryb3koKX19fSxOPXt1cGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPXQucGFyYW1zLHM9aS5zbGlkZXNQZXJWaWV3LGE9aS5zbGlkZXNQZXJHcm91cCxyPWkuY2VudGVyZWRTbGlkZXMsbj10LnZpcnR1YWwsbz1uLmZyb20sZD1uLnRvLGg9bi5zbGlkZXMscD1uLnNsaWRlc0dyaWQsYz1uLnJlbmRlclNsaWRlLHU9bi5vZmZzZXQ7dC51cGRhdGVBY3RpdmVJbmRleCgpO3ZhciBmLHYsbSxnPXQuYWN0aXZlSW5kZXh8fDA7Zj10LnJ0bCYmdC5pc0hvcml6b250YWwoKT9cInJpZ2h0XCI6dC5pc0hvcml6b250YWwoKT9cImxlZnRcIjpcInRvcFwiLHI/KHY9TWF0aC5mbG9vcihzLzIpK2EsbT1NYXRoLmZsb29yKHMvMikrYSk6KHY9cysoYS0xKSxtPWEpO3ZhciBiPU1hdGgubWF4KChnfHwwKS1tLDApLHc9TWF0aC5taW4oKGd8fDApK3YsaC5sZW5ndGgtMSkseT0odC5zbGlkZXNHcmlkW2JdfHwwKS0odC5zbGlkZXNHcmlkWzBdfHwwKTtmdW5jdGlvbiB4KCl7dC51cGRhdGVTbGlkZXMoKSx0LnVwZGF0ZVByb2dyZXNzKCksdC51cGRhdGVTbGlkZXNDbGFzc2VzKCksdC5sYXp5JiZ0LnBhcmFtcy5sYXp5LmVuYWJsZWQmJnQubGF6eS5sb2FkKCl9aWYobC5leHRlbmQodC52aXJ0dWFsLHtmcm9tOmIsdG86dyxvZmZzZXQ6eSxzbGlkZXNHcmlkOnQuc2xpZGVzR3JpZH0pLG89PT1iJiZkPT09dyYmIWUpcmV0dXJuIHQuc2xpZGVzR3JpZCE9PXAmJnkhPT11JiZ0LnNsaWRlcy5jc3MoZix5K1wicHhcIiksdm9pZCB0LnVwZGF0ZVByb2dyZXNzKCk7aWYodC5wYXJhbXMudmlydHVhbC5yZW5kZXJFeHRlcm5hbClyZXR1cm4gdC5wYXJhbXMudmlydHVhbC5yZW5kZXJFeHRlcm5hbC5jYWxsKHQse29mZnNldDp5LGZyb206Yix0bzp3LHNsaWRlczpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PWI7dDw9dzt0Kz0xKWUucHVzaChoW3RdKTtyZXR1cm4gZX0oKX0pLHZvaWQgeCgpO3ZhciBUPVtdLEU9W107aWYoZSl0LiR3cmFwcGVyRWwuZmluZChcIi5cIit0LnBhcmFtcy5zbGlkZUNsYXNzKS5yZW1vdmUoKTtlbHNlIGZvcih2YXIgUz1vO1M8PWQ7Uys9MSkoUzxifHxTPncpJiZ0LiR3cmFwcGVyRWwuZmluZChcIi5cIit0LnBhcmFtcy5zbGlkZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK1MrJ1wiXScpLnJlbW92ZSgpO2Zvcih2YXIgQz0wO0M8aC5sZW5ndGg7Qys9MSlDPj1iJiZDPD13JiYodm9pZCAwPT09ZHx8ZT9FLnB1c2goQyk6KEM+ZCYmRS5wdXNoKEMpLEM8byYmVC5wdXNoKEMpKSk7RS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuJHdyYXBwZXJFbC5hcHBlbmQoYyhoW2VdLGUpKX0pLFQuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlPHR9KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuJHdyYXBwZXJFbC5wcmVwZW5kKGMoaFtlXSxlKSl9KSx0LiR3cmFwcGVyRWwuY2hpbGRyZW4oXCIuc3dpcGVyLXNsaWRlXCIpLmNzcyhmLHkrXCJweFwiKSx4KCl9LHJlbmRlclNsaWRlOmZ1bmN0aW9uKGUsaSl7dmFyIHM9dGhpcy5wYXJhbXMudmlydHVhbDtpZihzLmNhY2hlJiZ0aGlzLnZpcnR1YWwuY2FjaGVbaV0pcmV0dXJuIHRoaXMudmlydHVhbC5jYWNoZVtpXTt2YXIgYT1zLnJlbmRlclNsaWRlP3Qocy5yZW5kZXJTbGlkZS5jYWxsKHRoaXMsZSxpKSk6dCgnPGRpdiBjbGFzcz1cIicrdGhpcy5wYXJhbXMuc2xpZGVDbGFzcysnXCIgZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK2krJ1wiPicrZStcIjwvZGl2PlwiKTtyZXR1cm4gYS5hdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIil8fGEuYXR0cihcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIsaSkscy5jYWNoZSYmKHRoaXMudmlydHVhbC5jYWNoZVtpXT1hKSxhfSxhcHBlbmRTbGlkZTpmdW5jdGlvbihlKXt0aGlzLnZpcnR1YWwuc2xpZGVzLnB1c2goZSksdGhpcy52aXJ0dWFsLnVwZGF0ZSghMCl9LHByZXBlbmRTbGlkZTpmdW5jdGlvbihlKXtpZih0aGlzLnZpcnR1YWwuc2xpZGVzLnVuc2hpZnQoZSksdGhpcy5wYXJhbXMudmlydHVhbC5jYWNoZSl7dmFyIHQ9dGhpcy52aXJ0dWFsLmNhY2hlLGk9e307T2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihlKXtpW2UrMV09dFtlXX0pLHRoaXMudmlydHVhbC5jYWNoZT1pfXRoaXMudmlydHVhbC51cGRhdGUoITApLHRoaXMuc2xpZGVOZXh0KDApfX0sWD17bmFtZTpcInZpcnR1YWxcIixwYXJhbXM6e3ZpcnR1YWw6e2VuYWJsZWQ6ITEsc2xpZGVzOltdLGNhY2hlOiEwLHJlbmRlclNsaWRlOm51bGwscmVuZGVyRXh0ZXJuYWw6bnVsbH19LGNyZWF0ZTpmdW5jdGlvbigpe2wuZXh0ZW5kKHRoaXMse3ZpcnR1YWw6e3VwZGF0ZTpOLnVwZGF0ZS5iaW5kKHRoaXMpLGFwcGVuZFNsaWRlOk4uYXBwZW5kU2xpZGUuYmluZCh0aGlzKSxwcmVwZW5kU2xpZGU6Ti5wcmVwZW5kU2xpZGUuYmluZCh0aGlzKSxyZW5kZXJTbGlkZTpOLnJlbmRlclNsaWRlLmJpbmQodGhpcyksc2xpZGVzOnRoaXMucGFyYW1zLnZpcnR1YWwuc2xpZGVzLGNhY2hlOnt9fX0pfSxvbjp7YmVmb3JlSW5pdDpmdW5jdGlvbigpe2lmKHRoaXMucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCl7dGhpcy5jbGFzc05hbWVzLnB1c2godGhpcy5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcytcInZpcnR1YWxcIik7dmFyIGU9e3dhdGNoU2xpZGVzUHJvZ3Jlc3M6ITB9O2wuZXh0ZW5kKHRoaXMucGFyYW1zLGUpLGwuZXh0ZW5kKHRoaXMub3JpZ2luYWxQYXJhbXMsZSksdGhpcy52aXJ0dWFsLnVwZGF0ZSgpfX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMudmlydHVhbC5lbmFibGVkJiZ0aGlzLnZpcnR1YWwudXBkYXRlKCl9fX0sWT17aGFuZGxlOmZ1bmN0aW9uKGUpe3ZhciB0PWU7dC5vcmlnaW5hbEV2ZW50JiYodD10Lm9yaWdpbmFsRXZlbnQpO3ZhciBpPXQua2V5Q29kZXx8dC5jaGFyQ29kZTtpZighdGhpcy5hbGxvd1NsaWRlTmV4dCYmKHRoaXMuaXNIb3Jpem9udGFsKCkmJjM5PT09aXx8dGhpcy5pc1ZlcnRpY2FsKCkmJjQwPT09aSkpcmV0dXJuITE7aWYoIXRoaXMuYWxsb3dTbGlkZVByZXYmJih0aGlzLmlzSG9yaXpvbnRhbCgpJiYzNz09PWl8fHRoaXMuaXNWZXJ0aWNhbCgpJiYzOD09PWkpKXJldHVybiExO2lmKCEodC5zaGlmdEtleXx8dC5hbHRLZXl8fHQuY3RybEtleXx8dC5tZXRhS2V5fHxkLmFjdGl2ZUVsZW1lbnQmJmQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZSYmKFwiaW5wdXRcIj09PWQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpfHxcInRleHRhcmVhXCI9PT1kLmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkpKXtpZih0aGlzLnBhcmFtcy5rZXlib2FyZC5vbmx5SW5WaWV3cG9ydCYmKDM3PT09aXx8Mzk9PT1pfHwzOD09PWl8fDQwPT09aSkpe3ZhciBzPSExO2lmKHRoaXMuJGVsLnBhcmVudHMoXCIuXCIrdGhpcy5wYXJhbXMuc2xpZGVDbGFzcykubGVuZ3RoPjAmJjA9PT10aGlzLiRlbC5wYXJlbnRzKFwiLlwiK3RoaXMucGFyYW1zLnNsaWRlQWN0aXZlQ2xhc3MpLmxlbmd0aClyZXR1cm47dmFyIGE9by5wYWdlWE9mZnNldCxyPW8ucGFnZVlPZmZzZXQsbj1vLmlubmVyV2lkdGgsbD1vLmlubmVySGVpZ2h0LGg9dGhpcy4kZWwub2Zmc2V0KCk7dGhpcy5ydGwmJihoLmxlZnQtPXRoaXMuJGVsWzBdLnNjcm9sbExlZnQpO2Zvcih2YXIgcD1bW2gubGVmdCxoLnRvcF0sW2gubGVmdCt0aGlzLndpZHRoLGgudG9wXSxbaC5sZWZ0LGgudG9wK3RoaXMuaGVpZ2h0XSxbaC5sZWZ0K3RoaXMud2lkdGgsaC50b3ArdGhpcy5oZWlnaHRdXSxjPTA7YzxwLmxlbmd0aDtjKz0xKXt2YXIgdT1wW2NdO3VbMF0+PWEmJnVbMF08PWErbiYmdVsxXT49ciYmdVsxXTw9citsJiYocz0hMCl9aWYoIXMpcmV0dXJufXRoaXMuaXNIb3Jpem9udGFsKCk/KDM3IT09aSYmMzkhPT1pfHwodC5wcmV2ZW50RGVmYXVsdD90LnByZXZlbnREZWZhdWx0KCk6dC5yZXR1cm5WYWx1ZT0hMSksKDM5PT09aSYmIXRoaXMucnRsfHwzNz09PWkmJnRoaXMucnRsKSYmdGhpcy5zbGlkZU5leHQoKSwoMzc9PT1pJiYhdGhpcy5ydGx8fDM5PT09aSYmdGhpcy5ydGwpJiZ0aGlzLnNsaWRlUHJldigpKTooMzghPT1pJiY0MCE9PWl8fCh0LnByZXZlbnREZWZhdWx0P3QucHJldmVudERlZmF1bHQoKTp0LnJldHVyblZhbHVlPSExKSw0MD09PWkmJnRoaXMuc2xpZGVOZXh0KCksMzg9PT1pJiZ0aGlzLnNsaWRlUHJldigpKSx0aGlzLmVtaXQoXCJrZXlQcmVzc1wiLGkpfX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5rZXlib2FyZC5lbmFibGVkfHwodChkKS5vbihcImtleWRvd25cIix0aGlzLmtleWJvYXJkLmhhbmRsZSksdGhpcy5rZXlib2FyZC5lbmFibGVkPSEwKX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMua2V5Ym9hcmQuZW5hYmxlZCYmKHQoZCkub2ZmKFwia2V5ZG93blwiLHRoaXMua2V5Ym9hcmQuaGFuZGxlKSx0aGlzLmtleWJvYXJkLmVuYWJsZWQ9ITEpfX0sRz17bmFtZTpcImtleWJvYXJkXCIscGFyYW1zOntrZXlib2FyZDp7ZW5hYmxlZDohMSxvbmx5SW5WaWV3cG9ydDohMH19LGNyZWF0ZTpmdW5jdGlvbigpe2wuZXh0ZW5kKHRoaXMse2tleWJvYXJkOntlbmFibGVkOiExLGVuYWJsZTpZLmVuYWJsZS5iaW5kKHRoaXMpLGRpc2FibGU6WS5kaXNhYmxlLmJpbmQodGhpcyksaGFuZGxlOlkuaGFuZGxlLmJpbmQodGhpcyl9fSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMua2V5Ym9hcmQuZW5hYmxlZCYmdGhpcy5rZXlib2FyZC5lbmFibGUoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMua2V5Ym9hcmQuZW5hYmxlZCYmdGhpcy5rZXlib2FyZC5kaXNhYmxlKCl9fX07dmFyIEI9e2xhc3RTY3JvbGxUaW1lOmwubm93KCksZXZlbnQ6by5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJmaXJlZm94XCIpPi0xP1wiRE9NTW91c2VTY3JvbGxcIjpmdW5jdGlvbigpe3ZhciBlPVwib253aGVlbFwiaW4gZDtpZighZSl7dmFyIHQ9ZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3Quc2V0QXR0cmlidXRlKFwib253aGVlbFwiLFwicmV0dXJuO1wiKSxlPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQub253aGVlbH1yZXR1cm4hZSYmZC5pbXBsZW1lbnRhdGlvbiYmZC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlJiYhMCE9PWQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcIlwiLFwiXCIpJiYoZT1kLmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoXCJFdmVudHMud2hlZWxcIixcIjMuMFwiKSksZX0oKT9cIndoZWVsXCI6XCJtb3VzZXdoZWVsXCIsbm9ybWFsaXplOmZ1bmN0aW9uKGUpe3ZhciB0PTAsaT0wLHM9MCxhPTA7cmV0dXJuXCJkZXRhaWxcImluIGUmJihpPWUuZGV0YWlsKSxcIndoZWVsRGVsdGFcImluIGUmJihpPS1lLndoZWVsRGVsdGEvMTIwKSxcIndoZWVsRGVsdGFZXCJpbiBlJiYoaT0tZS53aGVlbERlbHRhWS8xMjApLFwid2hlZWxEZWx0YVhcImluIGUmJih0PS1lLndoZWVsRGVsdGFYLzEyMCksXCJheGlzXCJpbiBlJiZlLmF4aXM9PT1lLkhPUklaT05UQUxfQVhJUyYmKHQ9aSxpPTApLHM9MTAqdCxhPTEwKmksXCJkZWx0YVlcImluIGUmJihhPWUuZGVsdGFZKSxcImRlbHRhWFwiaW4gZSYmKHM9ZS5kZWx0YVgpLChzfHxhKSYmZS5kZWx0YU1vZGUmJigxPT09ZS5kZWx0YU1vZGU/KHMqPTQwLGEqPTQwKToocyo9ODAwLGEqPTgwMCkpLHMmJiF0JiYodD1zPDE/LTE6MSksYSYmIWkmJihpPWE8MT8tMToxKSx7c3Bpblg6dCxzcGluWTppLHBpeGVsWDpzLHBpeGVsWTphfX0saGFuZGxlOmZ1bmN0aW9uKGUpe3ZhciB0PWUsaT10aGlzLHM9aS5wYXJhbXMubW91c2V3aGVlbDt0Lm9yaWdpbmFsRXZlbnQmJih0PXQub3JpZ2luYWxFdmVudCk7dmFyIGE9MCxyPWkucnRsPy0xOjEsbj1CLm5vcm1hbGl6ZSh0KTtpZihzLmZvcmNlVG9BeGlzKWlmKGkuaXNIb3Jpem9udGFsKCkpe2lmKCEoTWF0aC5hYnMobi5waXhlbFgpPk1hdGguYWJzKG4ucGl4ZWxZKSkpcmV0dXJuITA7YT1uLnBpeGVsWCpyfWVsc2V7aWYoIShNYXRoLmFicyhuLnBpeGVsWSk+TWF0aC5hYnMobi5waXhlbFgpKSlyZXR1cm4hMDthPW4ucGl4ZWxZfWVsc2UgYT1NYXRoLmFicyhuLnBpeGVsWCk+TWF0aC5hYnMobi5waXhlbFkpPy1uLnBpeGVsWCpyOi1uLnBpeGVsWTtpZigwPT09YSlyZXR1cm4hMDtpZihzLmludmVydCYmKGE9LWEpLGkucGFyYW1zLmZyZWVNb2RlKXt2YXIgZD1pLmdldFRyYW5zbGF0ZSgpK2Eqcy5zZW5zaXRpdml0eSxoPWkuaXNCZWdpbm5pbmcscD1pLmlzRW5kO2lmKGQ+PWkubWluVHJhbnNsYXRlKCkmJihkPWkubWluVHJhbnNsYXRlKCkpLGQ8PWkubWF4VHJhbnNsYXRlKCkmJihkPWkubWF4VHJhbnNsYXRlKCkpLGkuc2V0VHJhbnNpdGlvbigwKSxpLnNldFRyYW5zbGF0ZShkKSxpLnVwZGF0ZVByb2dyZXNzKCksaS51cGRhdGVBY3RpdmVJbmRleCgpLGkudXBkYXRlU2xpZGVzQ2xhc3NlcygpLCghaCYmaS5pc0JlZ2lubmluZ3x8IXAmJmkuaXNFbmQpJiZpLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSxpLnBhcmFtcy5mcmVlTW9kZVN0aWNreSYmKGNsZWFyVGltZW91dChpLm1vdXNld2hlZWwudGltZW91dCksaS5tb3VzZXdoZWVsLnRpbWVvdXQ9bC5uZXh0VGljayhmdW5jdGlvbigpe2kuc2xpZGVSZXNldCgpfSwzMDApKSxpLmVtaXQoXCJzY3JvbGxcIix0KSxpLnBhcmFtcy5hdXRvcGxheSYmaS5wYXJhbXMuYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbiYmaS5zdG9wQXV0b3BsYXkoKSwwPT09ZHx8ZD09PWkubWF4VHJhbnNsYXRlKCkpcmV0dXJuITB9ZWxzZXtpZihsLm5vdygpLWkubW91c2V3aGVlbC5sYXN0U2Nyb2xsVGltZT42MClpZihhPDApaWYoaS5pc0VuZCYmIWkucGFyYW1zLmxvb3B8fGkuYW5pbWF0aW5nKXtpZihzLnJlbGVhc2VPbkVkZ2VzKXJldHVybiEwfWVsc2UgaS5zbGlkZU5leHQoKSxpLmVtaXQoXCJzY3JvbGxcIix0KTtlbHNlIGlmKGkuaXNCZWdpbm5pbmcmJiFpLnBhcmFtcy5sb29wfHxpLmFuaW1hdGluZyl7aWYocy5yZWxlYXNlT25FZGdlcylyZXR1cm4hMH1lbHNlIGkuc2xpZGVQcmV2KCksaS5lbWl0KFwic2Nyb2xsXCIsdCk7aS5tb3VzZXdoZWVsLmxhc3RTY3JvbGxUaW1lPShuZXcgby5EYXRlKS5nZXRUaW1lKCl9cmV0dXJuIHQucHJldmVudERlZmF1bHQ/dC5wcmV2ZW50RGVmYXVsdCgpOnQucmV0dXJuVmFsdWU9ITEsITF9LGVuYWJsZTpmdW5jdGlvbigpe2lmKCFCLmV2ZW50KXJldHVybiExO2lmKHRoaXMubW91c2V3aGVlbC5lbmFibGVkKXJldHVybiExO3ZhciBlPXRoaXMuJGVsO3JldHVyblwiY29udGFpbmVyXCIhPT10aGlzLnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdlZCYmKGU9dCh0aGlzLnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdlZCkpLGUub24oQi5ldmVudCx0aGlzLm1vdXNld2hlZWwuaGFuZGxlKSx0aGlzLm1vdXNld2hlZWwuZW5hYmxlZD0hMCwhMH0sZGlzYWJsZTpmdW5jdGlvbigpe2lmKCFCLmV2ZW50KXJldHVybiExO2lmKCF0aGlzLm1vdXNld2hlZWwuZW5hYmxlZClyZXR1cm4hMTt2YXIgZT10aGlzLiRlbDtyZXR1cm5cImNvbnRhaW5lclwiIT09dGhpcy5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZWQmJihlPXQodGhpcy5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZWQpKSxlLm9mZihCLmV2ZW50LHRoaXMubW91c2V3aGVlbC5oYW5kbGUpLHRoaXMubW91c2V3aGVlbC5lbmFibGVkPSExLCEwfX0sVj17dXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXJhbXMubmF2aWdhdGlvbjtpZighdGhpcy5wYXJhbXMubG9vcCl7dmFyIHQ9dGhpcy5uYXZpZ2F0aW9uLGk9dC4kbmV4dEVsLHM9dC4kcHJldkVsO3MmJnMubGVuZ3RoPjAmJih0aGlzLmlzQmVnaW5uaW5nP3MuYWRkQ2xhc3MoZS5kaXNhYmxlZENsYXNzKTpzLnJlbW92ZUNsYXNzKGUuZGlzYWJsZWRDbGFzcyksc1t0aGlzLnBhcmFtcy53YXRjaE92ZXJmbG93JiZ0aGlzLmlzTG9ja2VkP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKGUubG9ja0NsYXNzKSksaSYmaS5sZW5ndGg+MCYmKHRoaXMuaXNFbmQ/aS5hZGRDbGFzcyhlLmRpc2FibGVkQ2xhc3MpOmkucmVtb3ZlQ2xhc3MoZS5kaXNhYmxlZENsYXNzKSxpW3RoaXMucGFyYW1zLndhdGNoT3ZlcmZsb3cmJnRoaXMuaXNMb2NrZWQ/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oZS5sb2NrQ2xhc3MpKX19LGluaXQ6ZnVuY3Rpb24oKXt2YXIgZSxpLHM9dGhpcyxhPXMucGFyYW1zLm5hdmlnYXRpb247KGEubmV4dEVsfHxhLnByZXZFbCkmJihhLm5leHRFbCYmKGU9dChhLm5leHRFbCkscy5wYXJhbXMudW5pcXVlTmF2RWxlbWVudHMmJlwic3RyaW5nXCI9PXR5cGVvZiBhLm5leHRFbCYmZS5sZW5ndGg+MSYmMT09PXMuJGVsLmZpbmQoYS5uZXh0RWwpLmxlbmd0aCYmKGU9cy4kZWwuZmluZChhLm5leHRFbCkpKSxhLnByZXZFbCYmKGk9dChhLnByZXZFbCkscy5wYXJhbXMudW5pcXVlTmF2RWxlbWVudHMmJlwic3RyaW5nXCI9PXR5cGVvZiBhLnByZXZFbCYmaS5sZW5ndGg+MSYmMT09PXMuJGVsLmZpbmQoYS5wcmV2RWwpLmxlbmd0aCYmKGk9cy4kZWwuZmluZChhLnByZXZFbCkpKSxlJiZlLmxlbmd0aD4wJiZlLm9uKFwiY2xpY2tcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCkscy5pc0VuZCYmIXMucGFyYW1zLmxvb3B8fHMuc2xpZGVOZXh0KCl9KSxpJiZpLmxlbmd0aD4wJiZpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCkscy5pc0JlZ2lubmluZyYmIXMucGFyYW1zLmxvb3B8fHMuc2xpZGVQcmV2KCl9KSxsLmV4dGVuZChzLm5hdmlnYXRpb24seyRuZXh0RWw6ZSxuZXh0RWw6ZSYmZVswXSwkcHJldkVsOmkscHJldkVsOmkmJmlbMF19KSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5hdmlnYXRpb24sdD1lLiRuZXh0RWwsaT1lLiRwcmV2RWw7dCYmdC5sZW5ndGgmJih0Lm9mZihcImNsaWNrXCIpLHQucmVtb3ZlQ2xhc3ModGhpcy5wYXJhbXMubmF2aWdhdGlvbi5kaXNhYmxlZENsYXNzKSksaSYmaS5sZW5ndGgmJihpLm9mZihcImNsaWNrXCIpLGkucmVtb3ZlQ2xhc3ModGhpcy5wYXJhbXMubmF2aWdhdGlvbi5kaXNhYmxlZENsYXNzKSl9fSxSPXt1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJ0bCxpPXRoaXMucGFyYW1zLnBhZ2luYXRpb247aWYoaS5lbCYmdGhpcy5wYWdpbmF0aW9uLmVsJiZ0aGlzLnBhZ2luYXRpb24uJGVsJiYwIT09dGhpcy5wYWdpbmF0aW9uLiRlbC5sZW5ndGgpe3ZhciBzLGE9dGhpcy52aXJ0dWFsJiZ0aGlzLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ/dGhpcy52aXJ0dWFsLnNsaWRlcy5sZW5ndGg6dGhpcy5zbGlkZXMubGVuZ3RoLHI9dGhpcy5wYWdpbmF0aW9uLiRlbCxuPXRoaXMucGFyYW1zLmxvb3A/TWF0aC5jZWlsKChhLTIqdGhpcy5sb29wZWRTbGlkZXMpL3RoaXMucGFyYW1zLnNsaWRlc1Blckdyb3VwKTp0aGlzLnNuYXBHcmlkLmxlbmd0aDtpZih0aGlzLnBhcmFtcy5sb29wPygocz1NYXRoLmNlaWwoKHRoaXMuYWN0aXZlSW5kZXgtdGhpcy5sb29wZWRTbGlkZXMpL3RoaXMucGFyYW1zLnNsaWRlc1Blckdyb3VwKSk+YS0xLTIqdGhpcy5sb29wZWRTbGlkZXMmJihzLT1hLTIqdGhpcy5sb29wZWRTbGlkZXMpLHM+bi0xJiYocy09biksczwwJiZcImJ1bGxldHNcIiE9PXRoaXMucGFyYW1zLnBhZ2luYXRpb25UeXBlJiYocz1uK3MpKTpzPXZvaWQgMCE9PXRoaXMuc25hcEluZGV4P3RoaXMuc25hcEluZGV4OnRoaXMuYWN0aXZlSW5kZXh8fDAsXCJidWxsZXRzXCI9PT1pLnR5cGUmJnRoaXMucGFnaW5hdGlvbi5idWxsZXRzJiZ0aGlzLnBhZ2luYXRpb24uYnVsbGV0cy5sZW5ndGg+MCl7dmFyIG89dGhpcy5wYWdpbmF0aW9uLmJ1bGxldHM7aWYoaS5keW5hbWljQnVsbGV0cyYmKHRoaXMucGFnaW5hdGlvbi5idWxsZXRTaXplPW8uZXEoMClbdGhpcy5pc0hvcml6b250YWwoKT9cIm91dGVyV2lkdGhcIjpcIm91dGVySGVpZ2h0XCJdKCEwKSxyLmNzcyh0aGlzLmlzSG9yaXpvbnRhbCgpP1wid2lkdGhcIjpcImhlaWdodFwiLDUqdGhpcy5wYWdpbmF0aW9uLmJ1bGxldFNpemUrXCJweFwiKSksby5yZW1vdmVDbGFzcyhpLmJ1bGxldEFjdGl2ZUNsYXNzK1wiIFwiK2kuYnVsbGV0QWN0aXZlQ2xhc3MrXCItbmV4dCBcIitpLmJ1bGxldEFjdGl2ZUNsYXNzK1wiLW5leHQtbmV4dCBcIitpLmJ1bGxldEFjdGl2ZUNsYXNzK1wiLXByZXYgXCIraS5idWxsZXRBY3RpdmVDbGFzcytcIi1wcmV2LXByZXZcIiksci5sZW5ndGg+MSlvLmVhY2goZnVuY3Rpb24oZSxhKXt2YXIgcj10KGEpO3IuaW5kZXgoKT09PXMmJihyLmFkZENsYXNzKGkuYnVsbGV0QWN0aXZlQ2xhc3MpLGkuZHluYW1pY0J1bGxldHMmJihyLnByZXYoKS5hZGRDbGFzcyhpLmJ1bGxldEFjdGl2ZUNsYXNzK1wiLXByZXZcIikucHJldigpLmFkZENsYXNzKGkuYnVsbGV0QWN0aXZlQ2xhc3MrXCItcHJldi1wcmV2XCIpLHIubmV4dCgpLmFkZENsYXNzKGkuYnVsbGV0QWN0aXZlQ2xhc3MrXCItbmV4dFwiKS5uZXh0KCkuYWRkQ2xhc3MoaS5idWxsZXRBY3RpdmVDbGFzcytcIi1uZXh0LW5leHRcIikpKX0pO2Vsc2V7dmFyIGw9by5lcShzKTtsLmFkZENsYXNzKGkuYnVsbGV0QWN0aXZlQ2xhc3MpLGkuZHluYW1pY0J1bGxldHMmJihsLnByZXYoKS5hZGRDbGFzcyhpLmJ1bGxldEFjdGl2ZUNsYXNzK1wiLXByZXZcIikucHJldigpLmFkZENsYXNzKGkuYnVsbGV0QWN0aXZlQ2xhc3MrXCItcHJldi1wcmV2XCIpLGwubmV4dCgpLmFkZENsYXNzKGkuYnVsbGV0QWN0aXZlQ2xhc3MrXCItbmV4dFwiKS5uZXh0KCkuYWRkQ2xhc3MoaS5idWxsZXRBY3RpdmVDbGFzcytcIi1uZXh0LW5leHRcIikpfWlmKGkuZHluYW1pY0J1bGxldHMpe3ZhciBkPU1hdGgubWluKG8ubGVuZ3RoLDUpLGg9KHRoaXMucGFnaW5hdGlvbi5idWxsZXRTaXplKmQtdGhpcy5wYWdpbmF0aW9uLmJ1bGxldFNpemUpLzItcyp0aGlzLnBhZ2luYXRpb24uYnVsbGV0U2l6ZSxwPWU/XCJyaWdodFwiOlwibGVmdFwiO28uY3NzKHRoaXMuaXNIb3Jpem9udGFsKCk/cDpcInRvcFwiLGgrXCJweFwiKX19aWYoXCJmcmFjdGlvblwiPT09aS50eXBlJiYoci5maW5kKFwiLlwiK2kuY3VycmVudENsYXNzKS50ZXh0KHMrMSksci5maW5kKFwiLlwiK2kudG90YWxDbGFzcykudGV4dChuKSksXCJwcm9ncmVzc2JhclwiPT09aS50eXBlKXt2YXIgYz0ocysxKS9uLHU9YyxmPTE7dGhpcy5pc0hvcml6b250YWwoKXx8KGY9Yyx1PTEpLHIuZmluZChcIi5cIitpLnByb2dyZXNzYmFyRmlsbENsYXNzKS50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGVYKFwiK3UrXCIpIHNjYWxlWShcIitmK1wiKVwiKS50cmFuc2l0aW9uKHRoaXMucGFyYW1zLnNwZWVkKX1cImN1c3RvbVwiPT09aS50eXBlJiZpLnJlbmRlckN1c3RvbT8oci5odG1sKGkucmVuZGVyQ3VzdG9tKHRoaXMscysxLG4pKSx0aGlzLmVtaXQoXCJwYWdpbmF0aW9uUmVuZGVyXCIsdGhpcyxyWzBdKSk6dGhpcy5lbWl0KFwicGFnaW5hdGlvblVwZGF0ZVwiLHRoaXMsclswXSksclt0aGlzLnBhcmFtcy53YXRjaE92ZXJmbG93JiZ0aGlzLmlzTG9ja2VkP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKGkubG9ja0NsYXNzKX19LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyYW1zLnBhZ2luYXRpb247aWYoZS5lbCYmdGhpcy5wYWdpbmF0aW9uLmVsJiZ0aGlzLnBhZ2luYXRpb24uJGVsJiYwIT09dGhpcy5wYWdpbmF0aW9uLiRlbC5sZW5ndGgpe3ZhciB0PXRoaXMudmlydHVhbCYmdGhpcy5wYXJhbXMudmlydHVhbC5lbmFibGVkP3RoaXMudmlydHVhbC5zbGlkZXMubGVuZ3RoOnRoaXMuc2xpZGVzLmxlbmd0aCxpPXRoaXMucGFnaW5hdGlvbi4kZWwscz1cIlwiO2lmKFwiYnVsbGV0c1wiPT09ZS50eXBlKXtmb3IodmFyIGE9dGhpcy5wYXJhbXMubG9vcD9NYXRoLmNlaWwoKHQtMip0aGlzLmxvb3BlZFNsaWRlcykvdGhpcy5wYXJhbXMuc2xpZGVzUGVyR3JvdXApOnRoaXMuc25hcEdyaWQubGVuZ3RoLHI9MDtyPGE7cis9MSllLnJlbmRlckJ1bGxldD9zKz1lLnJlbmRlckJ1bGxldC5jYWxsKHRoaXMscixlLmJ1bGxldENsYXNzKTpzKz1cIjxcIitlLmJ1bGxldEVsZW1lbnQrJyBjbGFzcz1cIicrZS5idWxsZXRDbGFzcysnXCI+PC8nK2UuYnVsbGV0RWxlbWVudCtcIj5cIjtpLmh0bWwocyksdGhpcy5wYWdpbmF0aW9uLmJ1bGxldHM9aS5maW5kKFwiLlwiK2UuYnVsbGV0Q2xhc3MpfVwiZnJhY3Rpb25cIj09PWUudHlwZSYmKHM9ZS5yZW5kZXJGcmFjdGlvbj9lLnJlbmRlckZyYWN0aW9uLmNhbGwodGhpcyxlLmN1cnJlbnRDbGFzcyxlLnRvdGFsQ2xhc3MpOic8c3BhbiBjbGFzcz1cIicrZS5jdXJyZW50Q2xhc3MrJ1wiPjwvc3Bhbj4gLyA8c3BhbiBjbGFzcz1cIicrZS50b3RhbENsYXNzKydcIj48L3NwYW4+JyxpLmh0bWwocykpLFwicHJvZ3Jlc3NiYXJcIj09PWUudHlwZSYmKHM9ZS5yZW5kZXJQcm9ncmVzc2Jhcj9lLnJlbmRlclByb2dyZXNzYmFyLmNhbGwodGhpcyxlLnByb2dyZXNzYmFyRmlsbENsYXNzKTonPHNwYW4gY2xhc3M9XCInK2UucHJvZ3Jlc3NiYXJGaWxsQ2xhc3MrJ1wiPjwvc3Bhbj4nLGkuaHRtbChzKSksXCJjdXN0b21cIiE9PWUudHlwZSYmdGhpcy5lbWl0KFwicGFnaW5hdGlvblJlbmRlclwiLHRoaXMucGFnaW5hdGlvbi4kZWxbMF0pfX0saW5pdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsaT1lLnBhcmFtcy5wYWdpbmF0aW9uO2lmKGkuZWwpe3ZhciBzPXQoaS5lbCk7MCE9PXMubGVuZ3RoJiYoZS5wYXJhbXMudW5pcXVlTmF2RWxlbWVudHMmJlwic3RyaW5nXCI9PXR5cGVvZiBpLmVsJiZzLmxlbmd0aD4xJiYxPT09ZS4kZWwuZmluZChpLmVsKS5sZW5ndGgmJihzPWUuJGVsLmZpbmQoaS5lbCkpLFwiYnVsbGV0c1wiPT09aS50eXBlJiZpLmNsaWNrYWJsZSYmcy5hZGRDbGFzcyhpLmNsaWNrYWJsZUNsYXNzKSxzLmFkZENsYXNzKGkubW9kaWZpZXJDbGFzcytpLnR5cGUpLFwiYnVsbGV0c1wiPT09aS50eXBlJiZpLmR5bmFtaWNCdWxsZXRzJiZzLmFkZENsYXNzKFwiXCIraS5tb2RpZmllckNsYXNzK2kudHlwZStcIi1keW5hbWljXCIpLGkuY2xpY2thYmxlJiZzLm9uKFwiY2xpY2tcIixcIi5cIitpLmJ1bGxldENsYXNzLGZ1bmN0aW9uKGkpe2kucHJldmVudERlZmF1bHQoKTt2YXIgcz10KHRoaXMpLmluZGV4KCkqZS5wYXJhbXMuc2xpZGVzUGVyR3JvdXA7ZS5wYXJhbXMubG9vcCYmKHMrPWUubG9vcGVkU2xpZGVzKSxlLnNsaWRlVG8ocyl9KSxsLmV4dGVuZChlLnBhZ2luYXRpb24seyRlbDpzLGVsOnNbMF19KSl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXJhbXMucGFnaW5hdGlvbjtpZihlLmVsJiZ0aGlzLnBhZ2luYXRpb24uZWwmJnRoaXMucGFnaW5hdGlvbi4kZWwmJjAhPT10aGlzLnBhZ2luYXRpb24uJGVsLmxlbmd0aCl7dmFyIHQ9dGhpcy5wYWdpbmF0aW9uLiRlbDt0LnJlbW92ZUNsYXNzKGUuaGlkZGVuQ2xhc3MpLHQucmVtb3ZlQ2xhc3MoZS5tb2RpZmllckNsYXNzK2UudHlwZSksdGhpcy5wYWdpbmF0aW9uLmJ1bGxldHMmJnRoaXMucGFnaW5hdGlvbi5idWxsZXRzLnJlbW92ZUNsYXNzKGUuYnVsbGV0QWN0aXZlQ2xhc3MpLGUuY2xpY2thYmxlJiZ0Lm9mZihcImNsaWNrXCIsXCIuXCIrZS5idWxsZXRDbGFzcyl9fX0sRj17c2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5wYXJhbXMuc2Nyb2xsYmFyLmVsJiZ0aGlzLnNjcm9sbGJhci5lbCl7dmFyIGU9dGhpcy5zY3JvbGxiYXIsdD10aGlzLnJ0bCxpPXRoaXMucHJvZ3Jlc3Mscz1lLmRyYWdTaXplLGE9ZS50cmFja1NpemUscj1lLiRkcmFnRWwsbj1lLiRlbCxvPXRoaXMucGFyYW1zLnNjcm9sbGJhcixsPXMsZD0oYS1zKSppO3QmJnRoaXMuaXNIb3Jpem9udGFsKCk/KGQ9LWQpPjA/KGw9cy1kLGQ9MCk6LWQrcz5hJiYobD1hK2QpOmQ8MD8obD1zK2QsZD0wKTpkK3M+YSYmKGw9YS1kKSx0aGlzLmlzSG9yaXpvbnRhbCgpPyhoLnRyYW5zZm9ybXMzZD9yLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK2QrXCJweCwgMCwgMClcIik6ci50cmFuc2Zvcm0oXCJ0cmFuc2xhdGVYKFwiK2QrXCJweClcIiksclswXS5zdHlsZS53aWR0aD1sK1wicHhcIik6KGgudHJhbnNmb3JtczNkP3IudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMHB4LCBcIitkK1wicHgsIDApXCIpOnIudHJhbnNmb3JtKFwidHJhbnNsYXRlWShcIitkK1wicHgpXCIpLHJbMF0uc3R5bGUuaGVpZ2h0PWwrXCJweFwiKSxvLmhpZGUmJihjbGVhclRpbWVvdXQodGhpcy5zY3JvbGxiYXIudGltZW91dCksblswXS5zdHlsZS5vcGFjaXR5PTEsdGhpcy5zY3JvbGxiYXIudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7blswXS5zdHlsZS5vcGFjaXR5PTAsbi50cmFuc2l0aW9uKDQwMCl9LDFlMykpfX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlKXt0aGlzLnBhcmFtcy5zY3JvbGxiYXIuZWwmJnRoaXMuc2Nyb2xsYmFyLmVsJiZ0aGlzLnNjcm9sbGJhci4kZHJhZ0VsLnRyYW5zaXRpb24oZSl9LHVwZGF0ZVNpemU6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmFtcy5zY3JvbGxiYXIuZWwmJnRoaXMuc2Nyb2xsYmFyLmVsKXt2YXIgZT10aGlzLnNjcm9sbGJhcix0PWUuJGRyYWdFbCxpPWUuJGVsO3RbMF0uc3R5bGUud2lkdGg9XCJcIix0WzBdLnN0eWxlLmhlaWdodD1cIlwiO3ZhciBzLGE9dGhpcy5pc0hvcml6b250YWwoKT9pWzBdLm9mZnNldFdpZHRoOmlbMF0ub2Zmc2V0SGVpZ2h0LHI9dGhpcy5zaXplL3RoaXMudmlydHVhbFNpemUsbj1yKihhL3RoaXMuc2l6ZSk7cz1cImF1dG9cIj09PXRoaXMucGFyYW1zLnNjcm9sbGJhci5kcmFnU2l6ZT9hKnI6cGFyc2VJbnQodGhpcy5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdTaXplLDEwKSx0aGlzLmlzSG9yaXpvbnRhbCgpP3RbMF0uc3R5bGUud2lkdGg9cytcInB4XCI6dFswXS5zdHlsZS5oZWlnaHQ9cytcInB4XCIsaVswXS5zdHlsZS5kaXNwbGF5PXI+PTE/XCJub25lXCI6XCJcIix0aGlzLnBhcmFtcy5zY3JvbGxiYXJIaWRlJiYoaVswXS5zdHlsZS5vcGFjaXR5PTApLGwuZXh0ZW5kKGUse3RyYWNrU2l6ZTphLGRpdmlkZXI6cixtb3ZlRGl2aWRlcjpuLGRyYWdTaXplOnN9KSxlLiRlbFt0aGlzLnBhcmFtcy53YXRjaE92ZXJmbG93JiZ0aGlzLmlzTG9ja2VkP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKHRoaXMucGFyYW1zLnNjcm9sbGJhci5sb2NrQ2xhc3MpfX0sc2V0RHJhZ1Bvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0LGk9dGhpcy5zY3JvbGxiYXIscz1pLiRlbCxhPWkuZHJhZ1NpemUscj1pLnRyYWNrU2l6ZTt0PSgodGhpcy5pc0hvcml6b250YWwoKT9cInRvdWNoc3RhcnRcIj09PWUudHlwZXx8XCJ0b3VjaG1vdmVcIj09PWUudHlwZT9lLnRhcmdldFRvdWNoZXNbMF0ucGFnZVg6ZS5wYWdlWHx8ZS5jbGllbnRYOlwidG91Y2hzdGFydFwiPT09ZS50eXBlfHxcInRvdWNobW92ZVwiPT09ZS50eXBlP2UudGFyZ2V0VG91Y2hlc1swXS5wYWdlWTplLnBhZ2VZfHxlLmNsaWVudFkpLXMub2Zmc2V0KClbdGhpcy5pc0hvcml6b250YWwoKT9cImxlZnRcIjpcInRvcFwiXS1hLzIpLyhyLWEpLHQ9TWF0aC5tYXgoTWF0aC5taW4odCwxKSwwKSx0aGlzLnJ0bCYmKHQ9MS10KTt2YXIgbj10aGlzLm1pblRyYW5zbGF0ZSgpKyh0aGlzLm1heFRyYW5zbGF0ZSgpLXRoaXMubWluVHJhbnNsYXRlKCkpKnQ7dGhpcy51cGRhdGVQcm9ncmVzcyhuKSx0aGlzLnNldFRyYW5zbGF0ZShuKSx0aGlzLnVwZGF0ZUFjdGl2ZUluZGV4KCksdGhpcy51cGRhdGVTbGlkZXNDbGFzc2VzKCl9LG9uRHJhZ1N0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyYW1zLnNjcm9sbGJhcixpPXRoaXMuc2Nyb2xsYmFyLHM9dGhpcy4kd3JhcHBlckVsLGE9aS4kZWwscj1pLiRkcmFnRWw7dGhpcy5zY3JvbGxiYXIuaXNUb3VjaGVkPSEwLGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLHMudHJhbnNpdGlvbigxMDApLHIudHJhbnNpdGlvbigxMDApLGkuc2V0RHJhZ1Bvc2l0aW9uKGUpLGNsZWFyVGltZW91dCh0aGlzLnNjcm9sbGJhci5kcmFnVGltZW91dCksYS50cmFuc2l0aW9uKDApLHQuaGlkZSYmYS5jc3MoXCJvcGFjaXR5XCIsMSksdGhpcy5lbWl0KFwic2Nyb2xsYmFyRHJhZ1N0YXJ0XCIsZSl9LG9uRHJhZ01vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zY3JvbGxiYXIsaT10aGlzLiR3cmFwcGVyRWwscz10LiRlbCxhPXQuJGRyYWdFbDt0aGlzLnNjcm9sbGJhci5pc1RvdWNoZWQmJihlLnByZXZlbnREZWZhdWx0P2UucHJldmVudERlZmF1bHQoKTplLnJldHVyblZhbHVlPSExLHQuc2V0RHJhZ1Bvc2l0aW9uKGUpLGkudHJhbnNpdGlvbigwKSxzLnRyYW5zaXRpb24oMCksYS50cmFuc2l0aW9uKDApLHRoaXMuZW1pdChcInNjcm9sbGJhckRyYWdNb3ZlXCIsZSkpfSxvbkRyYWdFbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJhbXMuc2Nyb2xsYmFyLGk9dGhpcy5zY3JvbGxiYXIuJGVsO3RoaXMuc2Nyb2xsYmFyLmlzVG91Y2hlZCYmKHRoaXMuc2Nyb2xsYmFyLmlzVG91Y2hlZD0hMSx0LmhpZGUmJihjbGVhclRpbWVvdXQodGhpcy5zY3JvbGxiYXIuZHJhZ1RpbWVvdXQpLHRoaXMuc2Nyb2xsYmFyLmRyYWdUaW1lb3V0PWwubmV4dFRpY2soZnVuY3Rpb24oKXtpLmNzcyhcIm9wYWNpdHlcIiwwKSxpLnRyYW5zaXRpb24oNDAwKX0sMWUzKSksdGhpcy5lbWl0KFwic2Nyb2xsYmFyRHJhZ0VuZFwiLGUpLHQuc25hcE9uUmVsZWFzZSYmdGhpcy5zbGlkZVJlc2V0KCkpfSxlbmFibGVEcmFnZ2FibGU6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmFtcy5zY3JvbGxiYXIuZWwpe3ZhciBlPXRoaXMuc2Nyb2xsYmFyLiRlbCxpPWgudG91Y2g/ZVswXTpkb2N1bWVudDtlLm9uKHRoaXMuc2Nyb2xsYmFyLmRyYWdFdmVudHMuc3RhcnQsdGhpcy5zY3JvbGxiYXIub25EcmFnU3RhcnQpLHQoaSkub24odGhpcy5zY3JvbGxiYXIuZHJhZ0V2ZW50cy5tb3ZlLHRoaXMuc2Nyb2xsYmFyLm9uRHJhZ01vdmUpLHQoaSkub24odGhpcy5zY3JvbGxiYXIuZHJhZ0V2ZW50cy5lbmQsdGhpcy5zY3JvbGxiYXIub25EcmFnRW5kKX19LGRpc2FibGVEcmFnZ2FibGU6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmFtcy5zY3JvbGxiYXIuZWwpe3ZhciBlPXRoaXMuc2Nyb2xsYmFyLiRlbCxpPWgudG91Y2g/ZVswXTpkb2N1bWVudDtlLm9mZih0aGlzLnNjcm9sbGJhci5kcmFnRXZlbnRzLnN0YXJ0KSx0KGkpLm9mZih0aGlzLnNjcm9sbGJhci5kcmFnRXZlbnRzLm1vdmUpLHQoaSkub2ZmKHRoaXMuc2Nyb2xsYmFyLmRyYWdFdmVudHMuZW5kKX19LGluaXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGUucGFyYW1zLnNjcm9sbGJhci5lbCl7dmFyIGk9ZS5zY3JvbGxiYXIscz1lLiRlbCxhPWUudG91Y2hFdmVudHMscj1lLnBhcmFtcy5zY3JvbGxiYXIsbj10KHIuZWwpO2UucGFyYW1zLnVuaXF1ZU5hdkVsZW1lbnRzJiZcInN0cmluZ1wiPT10eXBlb2Ygci5lbCYmbi5sZW5ndGg+MSYmMT09PXMuZmluZChyLmVsKS5sZW5ndGgmJihuPXMuZmluZChyLmVsKSk7dmFyIG89bi5maW5kKFwiLnN3aXBlci1zY3JvbGxiYXItZHJhZ1wiKTswPT09by5sZW5ndGgmJihvPXQoJzxkaXYgY2xhc3M9XCJzd2lwZXItc2Nyb2xsYmFyLWRyYWdcIj48L2Rpdj4nKSxuLmFwcGVuZChvKSksZS5zY3JvbGxiYXIuZHJhZ0V2ZW50cz0hMSE9PWUucGFyYW1zLnNpbXVsYXRlVG91Y2h8fGgudG91Y2g/YTp7c3RhcnQ6XCJtb3VzZWRvd25cIixtb3ZlOlwibW91c2Vtb3ZlXCIsZW5kOlwibW91c2V1cFwifSxsLmV4dGVuZChpLHskZWw6bixlbDpuWzBdLCRkcmFnRWw6byxkcmFnRWw6b1swXX0pLHIuZHJhZ2dhYmxlJiZpLmVuYWJsZURyYWdnYWJsZSgpfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsYmFyLmRpc2FibGVEcmFnZ2FibGUoKX19LFc9e3NldFRyYW5zZm9ybTpmdW5jdGlvbihlLGkpe3ZhciBzPXRoaXMucnRsLGE9dChlKSxyPXM/LTE6MSxuPWEuYXR0cihcImRhdGEtc3dpcGVyLXBhcmFsbGF4XCIpfHxcIjBcIixvPWEuYXR0cihcImRhdGEtc3dpcGVyLXBhcmFsbGF4LXhcIiksbD1hLmF0dHIoXCJkYXRhLXN3aXBlci1wYXJhbGxheC15XCIpLGQ9YS5hdHRyKFwiZGF0YS1zd2lwZXItcGFyYWxsYXgtc2NhbGVcIiksaD1hLmF0dHIoXCJkYXRhLXN3aXBlci1wYXJhbGxheC1vcGFjaXR5XCIpO2lmKG98fGw/KG89b3x8XCIwXCIsbD1sfHxcIjBcIik6dGhpcy5pc0hvcml6b250YWwoKT8obz1uLGw9XCIwXCIpOihsPW4sbz1cIjBcIiksbz1vLmluZGV4T2YoXCIlXCIpPj0wP3BhcnNlSW50KG8sMTApKmkqcitcIiVcIjpvKmkqcitcInB4XCIsbD1sLmluZGV4T2YoXCIlXCIpPj0wP3BhcnNlSW50KGwsMTApKmkrXCIlXCI6bCppK1wicHhcIix2b2lkIDAhPT1oJiZudWxsIT09aCl7dmFyIHA9aC0oaC0xKSooMS1NYXRoLmFicyhpKSk7YVswXS5zdHlsZS5vcGFjaXR5PXB9aWYodm9pZCAwPT09ZHx8bnVsbD09PWQpYS50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUzZChcIitvK1wiLCBcIitsK1wiLCAwcHgpXCIpO2Vsc2V7dmFyIGM9ZC0oZC0xKSooMS1NYXRoLmFicyhpKSk7YS50cmFuc2Zvcm0oXCJ0cmFuc2xhdGUzZChcIitvK1wiLCBcIitsK1wiLCAwcHgpIHNjYWxlKFwiK2MrXCIpXCIpfX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxpPWUuJGVsLHM9ZS5zbGlkZXMsYT1lLnByb2dyZXNzLHI9ZS5zbmFwR3JpZDtpLmNoaWxkcmVuKFwiW2RhdGEtc3dpcGVyLXBhcmFsbGF4XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteV1cIikuZWFjaChmdW5jdGlvbih0LGkpe2UucGFyYWxsYXguc2V0VHJhbnNmb3JtKGksYSl9KSxzLmVhY2goZnVuY3Rpb24oaSxzKXt2YXIgbj1zLnByb2dyZXNzO2UucGFyYW1zLnNsaWRlc1Blckdyb3VwPjEmJlwiYXV0b1wiIT09ZS5wYXJhbXMuc2xpZGVzUGVyVmlldyYmKG4rPU1hdGguY2VpbChpLzIpLWEqKHIubGVuZ3RoLTEpKSxuPU1hdGgubWluKE1hdGgubWF4KG4sLTEpLDEpLHQocykuZmluZChcIltkYXRhLXN3aXBlci1wYXJhbGxheF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC14XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXldXCIpLmVhY2goZnVuY3Rpb24odCxpKXtlLnBhcmFsbGF4LnNldFRyYW5zZm9ybShpLG4pfSl9KX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT10aGlzLnBhcmFtcy5zcGVlZCk7dGhpcy4kZWwuZmluZChcIltkYXRhLXN3aXBlci1wYXJhbGxheF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC14XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXldXCIpLmVhY2goZnVuY3Rpb24oaSxzKXt2YXIgYT10KHMpLHI9cGFyc2VJbnQoYS5hdHRyKFwiZGF0YS1zd2lwZXItcGFyYWxsYXgtZHVyYXRpb25cIiksMTApfHxlOzA9PT1lJiYocj0wKSxhLnRyYW5zaXRpb24ocil9KX19LGo9e2dldERpc3RhbmNlQmV0d2VlblRvdWNoZXM6ZnVuY3Rpb24oZSl7aWYoZS50YXJnZXRUb3VjaGVzLmxlbmd0aDwyKXJldHVybiAxO3ZhciB0PWUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCxpPWUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSxzPWUudGFyZ2V0VG91Y2hlc1sxXS5wYWdlWCxhPWUudGFyZ2V0VG91Y2hlc1sxXS5wYWdlWTtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHMtdCwyKStNYXRoLnBvdyhhLWksMikpfSxvbkdlc3R1cmVTdGFydDpmdW5jdGlvbihlKXt2YXIgaT10aGlzLnBhcmFtcy56b29tLHM9dGhpcy56b29tLGE9cy5nZXN0dXJlO2lmKHMuZmFrZUdlc3R1cmVUb3VjaGVkPSExLHMuZmFrZUdlc3R1cmVNb3ZlZD0hMSwhaC5nZXN0dXJlcyl7aWYoXCJ0b3VjaHN0YXJ0XCIhPT1lLnR5cGV8fFwidG91Y2hzdGFydFwiPT09ZS50eXBlJiZlLnRhcmdldFRvdWNoZXMubGVuZ3RoPDIpcmV0dXJuO3MuZmFrZUdlc3R1cmVUb3VjaGVkPSEwLGEuc2NhbGVTdGFydD1qLmdldERpc3RhbmNlQmV0d2VlblRvdWNoZXMoZSl9YS4kc2xpZGVFbCYmYS4kc2xpZGVFbC5sZW5ndGh8fChhLiRzbGlkZUVsPXQodGhpcyksMD09PWEuJHNsaWRlRWwubGVuZ3RoJiYoYS4kc2xpZGVFbD10aGlzLnNsaWRlcy5lcSh0aGlzLmFjdGl2ZUluZGV4KSksYS4kaW1hZ2VFbD1hLiRzbGlkZUVsLmZpbmQoXCJpbWcsIHN2ZywgY2FudmFzXCIpLGEuJGltYWdlV3JhcEVsPWEuJGltYWdlRWwucGFyZW50KFwiLlwiK2kuY29udGFpbmVyQ2xhc3MpLGEubWF4UmF0aW89YS4kaW1hZ2VXcmFwRWwuYXR0cihcImRhdGEtc3dpcGVyLXpvb21cIil8fGkubWF4UmF0aW8sMCE9PWEuJGltYWdlV3JhcEVsLmxlbmd0aCk/KGEuJGltYWdlRWwudHJhbnNpdGlvbigwKSx0aGlzLnpvb20uaXNTY2FsaW5nPSEwKTphLiRpbWFnZUVsPXZvaWQgMH0sb25HZXN0dXJlQ2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyYW1zLnpvb20saT10aGlzLnpvb20scz1pLmdlc3R1cmU7aWYoIWguZ2VzdHVyZXMpe2lmKFwidG91Y2htb3ZlXCIhPT1lLnR5cGV8fFwidG91Y2htb3ZlXCI9PT1lLnR5cGUmJmUudGFyZ2V0VG91Y2hlcy5sZW5ndGg8MilyZXR1cm47aS5mYWtlR2VzdHVyZU1vdmVkPSEwLHMuc2NhbGVNb3ZlPWouZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyhlKX1zLiRpbWFnZUVsJiYwIT09cy4kaW1hZ2VFbC5sZW5ndGgmJihoLmdlc3R1cmVzP3RoaXMuem9vbS5zY2FsZT1lLnNjYWxlKmkuY3VycmVudFNjYWxlOmkuc2NhbGU9cy5zY2FsZU1vdmUvcy5zY2FsZVN0YXJ0KmkuY3VycmVudFNjYWxlLGkuc2NhbGU+cy5tYXhSYXRpbyYmKGkuc2NhbGU9cy5tYXhSYXRpby0xK01hdGgucG93KGkuc2NhbGUtcy5tYXhSYXRpbysxLC41KSksaS5zY2FsZTx0Lm1pblJhdGlvJiYoaS5zY2FsZT10Lm1pblJhdGlvKzEtTWF0aC5wb3codC5taW5SYXRpby1pLnNjYWxlKzEsLjUpKSxzLiRpbWFnZUVsLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZShcIitpLnNjYWxlK1wiKVwiKSl9LG9uR2VzdHVyZUVuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnBhcmFtcy56b29tLGk9dGhpcy56b29tLHM9aS5nZXN0dXJlO2lmKCFoLmdlc3R1cmVzKXtpZighaS5mYWtlR2VzdHVyZVRvdWNoZWR8fCFpLmZha2VHZXN0dXJlTW92ZWQpcmV0dXJuO2lmKFwidG91Y2hlbmRcIiE9PWUudHlwZXx8XCJ0b3VjaGVuZFwiPT09ZS50eXBlJiZlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aDwyJiYheS5hbmRyb2lkKXJldHVybjtpLmZha2VHZXN0dXJlVG91Y2hlZD0hMSxpLmZha2VHZXN0dXJlTW92ZWQ9ITF9cy4kaW1hZ2VFbCYmMCE9PXMuJGltYWdlRWwubGVuZ3RoJiYoaS5zY2FsZT1NYXRoLm1heChNYXRoLm1pbihpLnNjYWxlLHMubWF4UmF0aW8pLHQubWluUmF0aW8pLHMuJGltYWdlRWwudHJhbnNpdGlvbih0aGlzLnBhcmFtcy5zcGVlZCkudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKFwiK2kuc2NhbGUrXCIpXCIpLGkuY3VycmVudFNjYWxlPWkuc2NhbGUsaS5pc1NjYWxpbmc9ITEsMT09PWkuc2NhbGUmJihzLiRzbGlkZUVsPXZvaWQgMCkpfSxvblRvdWNoU3RhcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy56b29tLGk9dC5nZXN0dXJlLHM9dC5pbWFnZTtpLiRpbWFnZUVsJiYwIT09aS4kaW1hZ2VFbC5sZW5ndGgmJihzLmlzVG91Y2hlZHx8KHkuYW5kcm9pZCYmZS5wcmV2ZW50RGVmYXVsdCgpLHMuaXNUb3VjaGVkPSEwLHMudG91Y2hlc1N0YXJ0Lng9XCJ0b3VjaHN0YXJ0XCI9PT1lLnR5cGU/ZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYOmUucGFnZVgscy50b3VjaGVzU3RhcnQueT1cInRvdWNoc3RhcnRcIj09PWUudHlwZT9lLnRhcmdldFRvdWNoZXNbMF0ucGFnZVk6ZS5wYWdlWSkpfSxvblRvdWNoTW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnpvb20saT10Lmdlc3R1cmUscz10LmltYWdlLGE9dC52ZWxvY2l0eTtpZihpLiRpbWFnZUVsJiYwIT09aS4kaW1hZ2VFbC5sZW5ndGgmJih0aGlzLmFsbG93Q2xpY2s9ITEscy5pc1RvdWNoZWQmJmkuJHNsaWRlRWwpKXtzLmlzTW92ZWR8fChzLndpZHRoPWkuJGltYWdlRWxbMF0ub2Zmc2V0V2lkdGgscy5oZWlnaHQ9aS4kaW1hZ2VFbFswXS5vZmZzZXRIZWlnaHQscy5zdGFydFg9bC5nZXRUcmFuc2xhdGUoaS4kaW1hZ2VXcmFwRWxbMF0sXCJ4XCIpfHwwLHMuc3RhcnRZPWwuZ2V0VHJhbnNsYXRlKGkuJGltYWdlV3JhcEVsWzBdLFwieVwiKXx8MCxpLnNsaWRlV2lkdGg9aS4kc2xpZGVFbFswXS5vZmZzZXRXaWR0aCxpLnNsaWRlSGVpZ2h0PWkuJHNsaWRlRWxbMF0ub2Zmc2V0SGVpZ2h0LGkuJGltYWdlV3JhcEVsLnRyYW5zaXRpb24oMCksdGhpcy5ydGwmJihzLnN0YXJ0WD0tcy5zdGFydFgpLHRoaXMucnRsJiYocy5zdGFydFk9LXMuc3RhcnRZKSk7dmFyIHI9cy53aWR0aCp0LnNjYWxlLG49cy5oZWlnaHQqdC5zY2FsZTtpZighKHI8aS5zbGlkZVdpZHRoJiZuPGkuc2xpZGVIZWlnaHQpKXtpZihzLm1pblg9TWF0aC5taW4oaS5zbGlkZVdpZHRoLzItci8yLDApLHMubWF4WD0tcy5taW5YLHMubWluWT1NYXRoLm1pbihpLnNsaWRlSGVpZ2h0LzItbi8yLDApLHMubWF4WT0tcy5taW5ZLHMudG91Y2hlc0N1cnJlbnQueD1cInRvdWNobW92ZVwiPT09ZS50eXBlP2UudGFyZ2V0VG91Y2hlc1swXS5wYWdlWDplLnBhZ2VYLHMudG91Y2hlc0N1cnJlbnQueT1cInRvdWNobW92ZVwiPT09ZS50eXBlP2UudGFyZ2V0VG91Y2hlc1swXS5wYWdlWTplLnBhZ2VZLCFzLmlzTW92ZWQmJiF0LmlzU2NhbGluZyl7aWYodGhpcy5pc0hvcml6b250YWwoKSYmKE1hdGguZmxvb3Iocy5taW5YKT09PU1hdGguZmxvb3Iocy5zdGFydFgpJiZzLnRvdWNoZXNDdXJyZW50Lng8cy50b3VjaGVzU3RhcnQueHx8TWF0aC5mbG9vcihzLm1heFgpPT09TWF0aC5mbG9vcihzLnN0YXJ0WCkmJnMudG91Y2hlc0N1cnJlbnQueD5zLnRvdWNoZXNTdGFydC54KSlyZXR1cm4gdm9pZChzLmlzVG91Y2hlZD0hMSk7aWYoIXRoaXMuaXNIb3Jpem9udGFsKCkmJihNYXRoLmZsb29yKHMubWluWSk9PT1NYXRoLmZsb29yKHMuc3RhcnRZKSYmcy50b3VjaGVzQ3VycmVudC55PHMudG91Y2hlc1N0YXJ0Lnl8fE1hdGguZmxvb3Iocy5tYXhZKT09PU1hdGguZmxvb3Iocy5zdGFydFkpJiZzLnRvdWNoZXNDdXJyZW50Lnk+cy50b3VjaGVzU3RhcnQueSkpcmV0dXJuIHZvaWQocy5pc1RvdWNoZWQ9ITEpfWUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLHMuaXNNb3ZlZD0hMCxzLmN1cnJlbnRYPXMudG91Y2hlc0N1cnJlbnQueC1zLnRvdWNoZXNTdGFydC54K3Muc3RhcnRYLHMuY3VycmVudFk9cy50b3VjaGVzQ3VycmVudC55LXMudG91Y2hlc1N0YXJ0Lnkrcy5zdGFydFkscy5jdXJyZW50WDxzLm1pblgmJihzLmN1cnJlbnRYPXMubWluWCsxLU1hdGgucG93KHMubWluWC1zLmN1cnJlbnRYKzEsLjgpKSxzLmN1cnJlbnRYPnMubWF4WCYmKHMuY3VycmVudFg9cy5tYXhYLTErTWF0aC5wb3cocy5jdXJyZW50WC1zLm1heFgrMSwuOCkpLHMuY3VycmVudFk8cy5taW5ZJiYocy5jdXJyZW50WT1zLm1pblkrMS1NYXRoLnBvdyhzLm1pblktcy5jdXJyZW50WSsxLC44KSkscy5jdXJyZW50WT5zLm1heFkmJihzLmN1cnJlbnRZPXMubWF4WS0xK01hdGgucG93KHMuY3VycmVudFktcy5tYXhZKzEsLjgpKSxhLnByZXZQb3NpdGlvblh8fChhLnByZXZQb3NpdGlvblg9cy50b3VjaGVzQ3VycmVudC54KSxhLnByZXZQb3NpdGlvbll8fChhLnByZXZQb3NpdGlvblk9cy50b3VjaGVzQ3VycmVudC55KSxhLnByZXZUaW1lfHwoYS5wcmV2VGltZT1EYXRlLm5vdygpKSxhLng9KHMudG91Y2hlc0N1cnJlbnQueC1hLnByZXZQb3NpdGlvblgpLyhEYXRlLm5vdygpLWEucHJldlRpbWUpLzIsYS55PShzLnRvdWNoZXNDdXJyZW50LnktYS5wcmV2UG9zaXRpb25ZKS8oRGF0ZS5ub3coKS1hLnByZXZUaW1lKS8yLE1hdGguYWJzKHMudG91Y2hlc0N1cnJlbnQueC1hLnByZXZQb3NpdGlvblgpPDImJihhLng9MCksTWF0aC5hYnMocy50b3VjaGVzQ3VycmVudC55LWEucHJldlBvc2l0aW9uWSk8MiYmKGEueT0wKSxhLnByZXZQb3NpdGlvblg9cy50b3VjaGVzQ3VycmVudC54LGEucHJldlBvc2l0aW9uWT1zLnRvdWNoZXNDdXJyZW50LnksYS5wcmV2VGltZT1EYXRlLm5vdygpLGkuJGltYWdlV3JhcEVsLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK3MuY3VycmVudFgrXCJweCwgXCIrcy5jdXJyZW50WStcInB4LDApXCIpfX19LG9uVG91Y2hFbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnpvb20sdD1lLmdlc3R1cmUsaT1lLmltYWdlLHM9ZS52ZWxvY2l0eTtpZih0LiRpbWFnZUVsJiYwIT09dC4kaW1hZ2VFbC5sZW5ndGgpe2lmKCFpLmlzVG91Y2hlZHx8IWkuaXNNb3ZlZClyZXR1cm4gaS5pc1RvdWNoZWQ9ITEsdm9pZChpLmlzTW92ZWQ9ITEpO2kuaXNUb3VjaGVkPSExLGkuaXNNb3ZlZD0hMTt2YXIgYT0zMDAscj0zMDAsbj1zLngqYSxvPWkuY3VycmVudFgrbixsPXMueSpyLGQ9aS5jdXJyZW50WStsOzAhPT1zLngmJihhPU1hdGguYWJzKChvLWkuY3VycmVudFgpL3MueCkpLDAhPT1zLnkmJihyPU1hdGguYWJzKChkLWkuY3VycmVudFkpL3MueSkpO3ZhciBoPU1hdGgubWF4KGEscik7aS5jdXJyZW50WD1vLGkuY3VycmVudFk9ZDt2YXIgcD1pLndpZHRoKmUuc2NhbGUsYz1pLmhlaWdodCplLnNjYWxlO2kubWluWD1NYXRoLm1pbih0LnNsaWRlV2lkdGgvMi1wLzIsMCksaS5tYXhYPS1pLm1pblgsaS5taW5ZPU1hdGgubWluKHQuc2xpZGVIZWlnaHQvMi1jLzIsMCksaS5tYXhZPS1pLm1pblksaS5jdXJyZW50WD1NYXRoLm1heChNYXRoLm1pbihpLmN1cnJlbnRYLGkubWF4WCksaS5taW5YKSxpLmN1cnJlbnRZPU1hdGgubWF4KE1hdGgubWluKGkuY3VycmVudFksaS5tYXhZKSxpLm1pblkpLHQuJGltYWdlV3JhcEVsLnRyYW5zaXRpb24oaCkudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoXCIraS5jdXJyZW50WCtcInB4LCBcIitpLmN1cnJlbnRZK1wicHgsMClcIil9fSxvblRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnpvb20sdD1lLmdlc3R1cmU7dC4kc2xpZGVFbCYmdGhpcy5wcmV2aW91c0luZGV4IT09dGhpcy5hY3RpdmVJbmRleCYmKHQuJGltYWdlRWwudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKDEpXCIpLHQuJGltYWdlV3JhcEVsLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKDAsMCwwKVwiKSx0LiRzbGlkZUVsPXZvaWQgMCx0LiRpbWFnZUVsPXZvaWQgMCx0LiRpbWFnZVdyYXBFbD12b2lkIDAsZS5zY2FsZT0xLGUuY3VycmVudFNjYWxlPTEpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy56b29tO3Quc2NhbGUmJjEhPT10LnNjYWxlP3Qub3V0KCk6dC5pbihlKX0saW46ZnVuY3Rpb24oZSl7dmFyIGkscyxhLHIsbixvLGwsZCxoLHAsYyx1LGYsdixtLGcsYj10aGlzLnpvb20sdz10aGlzLnBhcmFtcy56b29tLHk9Yi5nZXN0dXJlLHg9Yi5pbWFnZTsoeS4kc2xpZGVFbHx8KHkuJHNsaWRlRWw9dGhpcy5jbGlja2VkU2xpZGU/dCh0aGlzLmNsaWNrZWRTbGlkZSk6dGhpcy5zbGlkZXMuZXEodGhpcy5hY3RpdmVJbmRleCkseS4kaW1hZ2VFbD15LiRzbGlkZUVsLmZpbmQoXCJpbWcsIHN2ZywgY2FudmFzXCIpLHkuJGltYWdlV3JhcEVsPXkuJGltYWdlRWwucGFyZW50KFwiLlwiK3cuY29udGFpbmVyQ2xhc3MpKSx5LiRpbWFnZUVsJiYwIT09eS4kaW1hZ2VFbC5sZW5ndGgpJiYoeS4kc2xpZGVFbC5hZGRDbGFzcyhcIlwiK3cuem9vbWVkU2xpZGVDbGFzcyksdm9pZCAwPT09eC50b3VjaGVzU3RhcnQueCYmZT8oaT1cInRvdWNoZW5kXCI9PT1lLnR5cGU/ZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDplLnBhZ2VYLHM9XCJ0b3VjaGVuZFwiPT09ZS50eXBlP2UuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk6ZS5wYWdlWSk6KGk9eC50b3VjaGVzU3RhcnQueCxzPXgudG91Y2hlc1N0YXJ0LnkpLGIuc2NhbGU9eS4kaW1hZ2VXcmFwRWwuYXR0cihcImRhdGEtc3dpcGVyLXpvb21cIil8fHcubWF4UmF0aW8sYi5jdXJyZW50U2NhbGU9eS4kaW1hZ2VXcmFwRWwuYXR0cihcImRhdGEtc3dpcGVyLXpvb21cIil8fHcubWF4UmF0aW8sZT8obT15LiRzbGlkZUVsWzBdLm9mZnNldFdpZHRoLGc9eS4kc2xpZGVFbFswXS5vZmZzZXRIZWlnaHQsYT15LiRzbGlkZUVsLm9mZnNldCgpLmxlZnQrbS8yLWkscj15LiRzbGlkZUVsLm9mZnNldCgpLnRvcCtnLzItcyxsPXkuJGltYWdlRWxbMF0ub2Zmc2V0V2lkdGgsZD15LiRpbWFnZUVsWzBdLm9mZnNldEhlaWdodCxoPWwqYi5zY2FsZSxwPWQqYi5zY2FsZSxmPS0oYz1NYXRoLm1pbihtLzItaC8yLDApKSx2PS0odT1NYXRoLm1pbihnLzItcC8yLDApKSxuPWEqYi5zY2FsZSxvPXIqYi5zY2FsZSxuPGMmJihuPWMpLG4+ZiYmKG49Ziksbzx1JiYobz11KSxvPnYmJihvPXYpKToobj0wLG89MCkseS4kaW1hZ2VXcmFwRWwudHJhbnNpdGlvbigzMDApLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK24rXCJweCwgXCIrbytcInB4LDApXCIpLHkuJGltYWdlRWwudHJhbnNpdGlvbigzMDApLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZShcIitiLnNjYWxlK1wiKVwiKSl9LG91dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuem9vbSxpPXRoaXMucGFyYW1zLnpvb20scz1lLmdlc3R1cmU7cy4kc2xpZGVFbHx8KHMuJHNsaWRlRWw9dGhpcy5jbGlja2VkU2xpZGU/dCh0aGlzLmNsaWNrZWRTbGlkZSk6dGhpcy5zbGlkZXMuZXEodGhpcy5hY3RpdmVJbmRleCkscy4kaW1hZ2VFbD1zLiRzbGlkZUVsLmZpbmQoXCJpbWcsIHN2ZywgY2FudmFzXCIpLHMuJGltYWdlV3JhcEVsPXMuJGltYWdlRWwucGFyZW50KFwiLlwiK2kuY29udGFpbmVyQ2xhc3MpKSxzLiRpbWFnZUVsJiYwIT09cy4kaW1hZ2VFbC5sZW5ndGgmJihlLnNjYWxlPTEsZS5jdXJyZW50U2NhbGU9MSxzLiRpbWFnZVdyYXBFbC50cmFuc2l0aW9uKDMwMCkudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMCwwLDApXCIpLHMuJGltYWdlRWwudHJhbnNpdGlvbigzMDApLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZSgxKVwiKSxzLiRzbGlkZUVsLnJlbW92ZUNsYXNzKFwiXCIraS56b29tZWRTbGlkZUNsYXNzKSxzLiRzbGlkZUVsPXZvaWQgMCl9LGVuYWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsaT1lLnpvb207aWYoIWkuZW5hYmxlZCl7aS5lbmFibGVkPSEwO3ZhciBzPWUuc2xpZGVzLGE9IShcInRvdWNoc3RhcnRcIiE9PWUudG91Y2hFdmVudHMuc3RhcnR8fCFoLnBhc3NpdmVMaXN0ZW5lcnx8IWUucGFyYW1zLnBhc3NpdmVMaXN0ZW5lcnMpJiZ7cGFzc2l2ZTohMCxjYXB0dXJlOiExfTtoLmdlc3R1cmVzPyhzLm9uKFwiZ2VzdHVyZXN0YXJ0XCIsaS5vbkdlc3R1cmVTdGFydCxhKSxzLm9uKFwiZ2VzdHVyZWNoYW5nZVwiLGkub25HZXN0dXJlQ2hhbmdlLGEpLHMub24oXCJnZXN0dXJlZW5kXCIsaS5vbkdlc3R1cmVFbmQsYSkpOlwidG91Y2hzdGFydFwiPT09ZS50b3VjaEV2ZW50cy5zdGFydCYmKHMub24oZS50b3VjaEV2ZW50cy5zdGFydCxpLm9uR2VzdHVyZVN0YXJ0LGEpLHMub24oZS50b3VjaEV2ZW50cy5tb3ZlLGkub25HZXN0dXJlQ2hhbmdlLGEpLHMub24oZS50b3VjaEV2ZW50cy5lbmQsaS5vbkdlc3R1cmVFbmQsYSkpLGUuc2xpZGVzLmVhY2goZnVuY3Rpb24ocyxhKXt2YXIgcj10KGEpO3IuZmluZChcIi5cIitlLnBhcmFtcy56b29tLmNvbnRhaW5lckNsYXNzKS5sZW5ndGg+MCYmci5vbihlLnRvdWNoRXZlbnRzLm1vdmUsaS5vblRvdWNoTW92ZSl9KX19LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGk9ZS56b29tO2lmKGkuZW5hYmxlZCl7ZS56b29tLmVuYWJsZWQ9ITE7dmFyIHM9ZS5zbGlkZXMsYT0hKFwidG91Y2hzdGFydFwiIT09ZS50b3VjaEV2ZW50cy5zdGFydHx8IWgucGFzc2l2ZUxpc3RlbmVyfHwhZS5wYXJhbXMucGFzc2l2ZUxpc3RlbmVycykmJntwYXNzaXZlOiEwLGNhcHR1cmU6ITF9O2guZ2VzdHVyZXM/KHMub2ZmKFwiZ2VzdHVyZXN0YXJ0XCIsaS5vbkdlc3R1cmVTdGFydCxhKSxzLm9mZihcImdlc3R1cmVjaGFuZ2VcIixpLm9uR2VzdHVyZUNoYW5nZSxhKSxzLm9mZihcImdlc3R1cmVlbmRcIixpLm9uR2VzdHVyZUVuZCxhKSk6XCJ0b3VjaHN0YXJ0XCI9PT1lLnRvdWNoRXZlbnRzLnN0YXJ0JiYocy5vZmYoZS50b3VjaEV2ZW50cy5zdGFydCxpLm9uR2VzdHVyZVN0YXJ0LGEpLHMub2ZmKGUudG91Y2hFdmVudHMubW92ZSxpLm9uR2VzdHVyZUNoYW5nZSxhKSxzLm9mZihlLnRvdWNoRXZlbnRzLmVuZCxpLm9uR2VzdHVyZUVuZCxhKSksZS5zbGlkZXMuZWFjaChmdW5jdGlvbihzLGEpe3ZhciByPXQoYSk7ci5maW5kKFwiLlwiK2UucGFyYW1zLnpvb20uY29udGFpbmVyQ2xhc3MpLmxlbmd0aD4wJiZyLm9mZihlLnRvdWNoRXZlbnRzLm1vdmUsaS5vblRvdWNoTW92ZSl9KX19fSxxPXtsb2FkSW5TbGlkZTpmdW5jdGlvbihlLGkpe3ZvaWQgMD09PWkmJihpPSEwKTt2YXIgcz10aGlzLGE9cy5wYXJhbXMubGF6eTtpZih2b2lkIDAhPT1lJiYwIT09cy5zbGlkZXMubGVuZ3RoKXt2YXIgcj1zLnZpcnR1YWwmJnMucGFyYW1zLnZpcnR1YWwuZW5hYmxlZD9zLiR3cmFwcGVyRWwuY2hpbGRyZW4oXCIuXCIrcy5wYXJhbXMuc2xpZGVDbGFzcysnW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJytlKydcIl0nKTpzLnNsaWRlcy5lcShlKSxuPXIuZmluZChcIi5cIithLmVsZW1lbnRDbGFzcytcIjpub3QoLlwiK2EubG9hZGVkQ2xhc3MrXCIpOm5vdCguXCIrYS5sb2FkaW5nQ2xhc3MrXCIpXCIpOyFyLmhhc0NsYXNzKGEuZWxlbWVudENsYXNzKXx8ci5oYXNDbGFzcyhhLmxvYWRlZENsYXNzKXx8ci5oYXNDbGFzcyhhLmxvYWRpbmdDbGFzcyl8fChuPW4uYWRkKHJbMF0pKSwwIT09bi5sZW5ndGgmJm4uZWFjaChmdW5jdGlvbihlLG4pe3ZhciBvPXQobik7by5hZGRDbGFzcyhhLmxvYWRpbmdDbGFzcyk7dmFyIGw9by5hdHRyKFwiZGF0YS1iYWNrZ3JvdW5kXCIpLGQ9by5hdHRyKFwiZGF0YS1zcmNcIiksaD1vLmF0dHIoXCJkYXRhLXNyY3NldFwiKSxwPW8uYXR0cihcImRhdGEtc2l6ZXNcIik7cy5sb2FkSW1hZ2Uob1swXSxkfHxsLGgscCwhMSxmdW5jdGlvbigpe2lmKHZvaWQgMCE9PXMmJm51bGwhPT1zJiZzJiYoIXN8fHMucGFyYW1zKSYmIXMuZGVzdHJveWVkKXtpZihsPyhvLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwndXJsKFwiJytsKydcIiknKSxvLnJlbW92ZUF0dHIoXCJkYXRhLWJhY2tncm91bmRcIikpOihoJiYoby5hdHRyKFwic3Jjc2V0XCIsaCksby5yZW1vdmVBdHRyKFwiZGF0YS1zcmNzZXRcIikpLHAmJihvLmF0dHIoXCJzaXplc1wiLHApLG8ucmVtb3ZlQXR0cihcImRhdGEtc2l6ZXNcIikpLGQmJihvLmF0dHIoXCJzcmNcIixkKSxvLnJlbW92ZUF0dHIoXCJkYXRhLXNyY1wiKSkpLG8uYWRkQ2xhc3MoYS5sb2FkZWRDbGFzcykucmVtb3ZlQ2xhc3MoYS5sb2FkaW5nQ2xhc3MpLHIuZmluZChcIi5cIithLnByZWxvYWRlckNsYXNzKS5yZW1vdmUoKSxzLnBhcmFtcy5sb29wJiZpKXt2YXIgZT1yLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKTtpZihyLmhhc0NsYXNzKHMucGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3MpKXt2YXIgdD1zLiR3cmFwcGVyRWwuY2hpbGRyZW4oJ1tkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIicrZSsnXCJdOm5vdCguJytzLnBhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzK1wiKVwiKTtzLmxhenkubG9hZEluU2xpZGUodC5pbmRleCgpLCExKX1lbHNle3ZhciBuPXMuJHdyYXBwZXJFbC5jaGlsZHJlbihcIi5cIitzLnBhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzKydbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCInK2UrJ1wiXScpO3MubGF6eS5sb2FkSW5TbGlkZShuLmluZGV4KCksITEpfX1zLmVtaXQoXCJsYXp5SW1hZ2VSZWFkeVwiLHJbMF0sb1swXSl9fSkscy5lbWl0KFwibGF6eUltYWdlTG9hZFwiLHJbMF0sb1swXSl9KX19LGxvYWQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGk9ZS4kd3JhcHBlckVsLHM9ZS5wYXJhbXMsYT1lLnNsaWRlcyxyPWUuYWN0aXZlSW5kZXgsbj1lLnZpcnR1YWwmJnMudmlydHVhbC5lbmFibGVkLG89cy5sYXp5LGw9cy5zbGlkZXNQZXJWaWV3O2Z1bmN0aW9uIGQoZSl7aWYobil7aWYoaS5jaGlsZHJlbihcIi5cIitzLnNsaWRlQ2xhc3MrJ1tkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIicrZSsnXCJdJykubGVuZ3RoKXJldHVybiEwfWVsc2UgaWYoYVtlXSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBoKGUpe3JldHVybiBuP3QoZSkuYXR0cihcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpOnQoZSkuaW5kZXgoKX1pZihcImF1dG9cIj09PWwmJihsPTApLGUubGF6eS5pbml0aWFsSW1hZ2VMb2FkZWR8fChlLmxhenkuaW5pdGlhbEltYWdlTG9hZGVkPSEwKSxlLnBhcmFtcy53YXRjaFNsaWRlc1Zpc2liaWxpdHkpaS5jaGlsZHJlbihcIi5cIitzLnNsaWRlVmlzaWJsZUNsYXNzKS5lYWNoKGZ1bmN0aW9uKGkscyl7dmFyIGE9bj90KHMpLmF0dHIoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKTp0KHMpLmluZGV4KCk7ZS5sYXp5LmxvYWRJblNsaWRlKGEpfSk7ZWxzZSBpZihsPjEpZm9yKHZhciBwPXI7cDxyK2w7cCs9MSlkKHApJiZlLmxhenkubG9hZEluU2xpZGUocCk7ZWxzZSBlLmxhenkubG9hZEluU2xpZGUocik7aWYoby5sb2FkUHJldk5leHQpaWYobD4xfHxvLmxvYWRQcmV2TmV4dEFtb3VudCYmby5sb2FkUHJldk5leHRBbW91bnQ+MSl7Zm9yKHZhciBjPW8ubG9hZFByZXZOZXh0QW1vdW50LHU9bCxmPU1hdGgubWluKHIrdStNYXRoLm1heChjLHUpLGEubGVuZ3RoKSx2PU1hdGgubWF4KHItTWF0aC5tYXgodSxjKSwwKSxtPXIrbDttPGY7bSs9MSlkKG0pJiZlLmxhenkubG9hZEluU2xpZGUobSk7Zm9yKHZhciBnPXY7ZzxyO2crPTEpZChnKSYmZS5sYXp5LmxvYWRJblNsaWRlKGcpfWVsc2V7dmFyIGI9aS5jaGlsZHJlbihcIi5cIitzLnNsaWRlTmV4dENsYXNzKTtiLmxlbmd0aD4wJiZlLmxhenkubG9hZEluU2xpZGUoaChiKSk7dmFyIHc9aS5jaGlsZHJlbihcIi5cIitzLnNsaWRlUHJldkNsYXNzKTt3Lmxlbmd0aD4wJiZlLmxhenkubG9hZEluU2xpZGUoaCh3KSl9fX0sSz17TGluZWFyU3BsaW5lOmZ1bmN0aW9uKGUsdCl7dmFyIGkscyxhLHIsbixvPWZ1bmN0aW9uKGUsdCl7Zm9yKHM9LTEsaT1lLmxlbmd0aDtpLXM+MTspZVthPWkrcz4+MV08PXQ/cz1hOmk9YTtyZXR1cm4gaX07cmV0dXJuIHRoaXMueD1lLHRoaXMueT10LHRoaXMubGFzdEluZGV4PWUubGVuZ3RoLTEsdGhpcy5pbnRlcnBvbGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZT8obj1vKHRoaXMueCxlKSxyPW4tMSwoZS10aGlzLnhbcl0pKih0aGlzLnlbbl0tdGhpcy55W3JdKS8odGhpcy54W25dLXRoaXMueFtyXSkrdGhpcy55W3JdKTowfSx0aGlzfSxnZXRJbnRlcnBvbGF0ZUZ1bmN0aW9uOmZ1bmN0aW9uKGUpe3RoaXMuY29udHJvbGxlci5zcGxpbmV8fCh0aGlzLmNvbnRyb2xsZXIuc3BsaW5lPXRoaXMucGFyYW1zLmxvb3A/bmV3IEsuTGluZWFyU3BsaW5lKHRoaXMuc2xpZGVzR3JpZCxlLnNsaWRlc0dyaWQpOm5ldyBLLkxpbmVhclNwbGluZSh0aGlzLnNuYXBHcmlkLGUuc25hcEdyaWQpKX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIGkscyxhPXRoaXMscj1hLmNvbnRyb2xsZXIuY29udHJvbDtmdW5jdGlvbiBuKGUpe3ZhciB0PWUucnRsJiZcImhvcml6b250YWxcIj09PWUucGFyYW1zLmRpcmVjdGlvbj8tYS50cmFuc2xhdGU6YS50cmFuc2xhdGU7XCJzbGlkZVwiPT09YS5wYXJhbXMuY29udHJvbGxlci5ieSYmKGEuY29udHJvbGxlci5nZXRJbnRlcnBvbGF0ZUZ1bmN0aW9uKGUpLHM9LWEuY29udHJvbGxlci5zcGxpbmUuaW50ZXJwb2xhdGUoLXQpKSxzJiZcImNvbnRhaW5lclwiIT09YS5wYXJhbXMuY29udHJvbGxlci5ieXx8KGk9KGUubWF4VHJhbnNsYXRlKCktZS5taW5UcmFuc2xhdGUoKSkvKGEubWF4VHJhbnNsYXRlKCktYS5taW5UcmFuc2xhdGUoKSkscz0odC1hLm1pblRyYW5zbGF0ZSgpKSppK2UubWluVHJhbnNsYXRlKCkpLGEucGFyYW1zLmNvbnRyb2xsZXIuaW52ZXJzZSYmKHM9ZS5tYXhUcmFuc2xhdGUoKS1zKSxlLnVwZGF0ZVByb2dyZXNzKHMpLGUuc2V0VHJhbnNsYXRlKHMsYSksZS51cGRhdGVBY3RpdmVJbmRleCgpLGUudXBkYXRlU2xpZGVzQ2xhc3NlcygpfWlmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKz0xKXJbb10hPT10JiZyW29daW5zdGFuY2VvZiBrJiZuKHJbb10pO2Vsc2UgciBpbnN0YW5jZW9mIGsmJnQhPT1yJiZuKHIpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIGkscz10aGlzLGE9cy5jb250cm9sbGVyLmNvbnRyb2w7ZnVuY3Rpb24gcih0KXt0LnNldFRyYW5zaXRpb24oZSxzKSwwIT09ZSYmKHQudHJhbnNpdGlvblN0YXJ0KCksdC4kd3JhcHBlckVsLnRyYW5zaXRpb25FbmQoZnVuY3Rpb24oKXthJiYodC5wYXJhbXMubG9vcCYmXCJzbGlkZVwiPT09cy5wYXJhbXMuY29udHJvbGxlci5ieSYmdC5sb29wRml4KCksdC50cmFuc2l0aW9uRW5kKCkpfSkpfWlmKEFycmF5LmlzQXJyYXkoYSkpZm9yKGk9MDtpPGEubGVuZ3RoO2krPTEpYVtpXSE9PXQmJmFbaV1pbnN0YW5jZW9mIGsmJnIoYVtpXSk7ZWxzZSBhIGluc3RhbmNlb2YgayYmdCE9PWEmJnIoYSl9fSxVPXttYWtlRWxGb2N1c2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuYXR0cihcInRhYkluZGV4XCIsXCIwXCIpLGV9LGFkZEVsUm9sZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLmF0dHIoXCJyb2xlXCIsdCksZX0sYWRkRWxMYWJlbDpmdW5jdGlvbihlLHQpe3JldHVybiBlLmF0dHIoXCJhcmlhLWxhYmVsXCIsdCksZX0sZGlzYWJsZUVsOmZ1bmN0aW9uKGUpe3JldHVybiBlLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsITApLGV9LGVuYWJsZUVsOmZ1bmN0aW9uKGUpe3JldHVybiBlLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsITEpLGV9LG9uRW50ZXJLZXk6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5wYXJhbXMuYTExeTtpZigxMz09PWUua2V5Q29kZSl7dmFyIHM9dChlLnRhcmdldCk7dGhpcy5uYXZpZ2F0aW9uJiZ0aGlzLm5hdmlnYXRpb24uJG5leHRFbCYmcy5pcyh0aGlzLm5hdmlnYXRpb24uJG5leHRFbCkmJih0aGlzLmlzRW5kJiYhdGhpcy5wYXJhbXMubG9vcHx8dGhpcy5zbGlkZU5leHQoKSx0aGlzLmlzRW5kP3RoaXMuYTExeS5ub3RpZnkoaS5sYXN0U2xpZGVNZXNzYWdlKTp0aGlzLmExMXkubm90aWZ5KGkubmV4dFNsaWRlTWVzc2FnZSkpLHRoaXMubmF2aWdhdGlvbiYmdGhpcy5uYXZpZ2F0aW9uLiRwcmV2RWwmJnMuaXModGhpcy5uYXZpZ2F0aW9uLiRwcmV2RWwpJiYodGhpcy5pc0JlZ2lubmluZyYmIXRoaXMucGFyYW1zLmxvb3B8fHRoaXMuc2xpZGVQcmV2KCksdGhpcy5pc0JlZ2lubmluZz90aGlzLmExMXkubm90aWZ5KGkuZmlyc3RTbGlkZU1lc3NhZ2UpOnRoaXMuYTExeS5ub3RpZnkoaS5wcmV2U2xpZGVNZXNzYWdlKSksdGhpcy5wYWdpbmF0aW9uJiZzLmlzKFwiLlwiK3RoaXMucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0Q2xhc3MpJiZzWzBdLmNsaWNrKCl9fSxub3RpZnk6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5hMTF5LmxpdmVSZWdpb247MCE9PXQubGVuZ3RoJiYodC5odG1sKFwiXCIpLHQuaHRtbChlKSl9LHVwZGF0ZU5hdmlnYXRpb246ZnVuY3Rpb24oKXtpZighdGhpcy5wYXJhbXMubG9vcCl7dmFyIGU9dGhpcy5uYXZpZ2F0aW9uLHQ9ZS4kbmV4dEVsLGk9ZS4kcHJldkVsO2kmJmkubGVuZ3RoPjAmJih0aGlzLmlzQmVnaW5uaW5nP3RoaXMuYTExeS5kaXNhYmxlRWwoaSk6dGhpcy5hMTF5LmVuYWJsZUVsKGkpKSx0JiZ0Lmxlbmd0aD4wJiYodGhpcy5pc0VuZD90aGlzLmExMXkuZGlzYWJsZUVsKHQpOnRoaXMuYTExeS5lbmFibGVFbCh0KSl9fSx1cGRhdGVQYWdpbmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxpPWUucGFyYW1zLmExMXk7ZS5wYWdpbmF0aW9uJiZlLnBhcmFtcy5wYWdpbmF0aW9uLmNsaWNrYWJsZSYmZS5wYWdpbmF0aW9uLmJ1bGxldHMmJmUucGFnaW5hdGlvbi5idWxsZXRzLmxlbmd0aCYmZS5wYWdpbmF0aW9uLmJ1bGxldHMuZWFjaChmdW5jdGlvbihzLGEpe3ZhciByPXQoYSk7ZS5hMTF5Lm1ha2VFbEZvY3VzYWJsZShyKSxlLmExMXkuYWRkRWxSb2xlKHIsXCJidXR0b25cIiksZS5hMTF5LmFkZEVsTGFiZWwocixpLnBhZ2luYXRpb25CdWxsZXRNZXNzYWdlLnJlcGxhY2UoL3t7aW5kZXh9fS8sci5pbmRleCgpKzEpKX0pfSxpbml0OmZ1bmN0aW9uKCl7dGhpcy4kZWwuYXBwZW5kKHRoaXMuYTExeS5saXZlUmVnaW9uKTt2YXIgZSx0LGk9dGhpcy5wYXJhbXMuYTExeTt0aGlzLm5hdmlnYXRpb24mJnRoaXMubmF2aWdhdGlvbi4kbmV4dEVsJiYoZT10aGlzLm5hdmlnYXRpb24uJG5leHRFbCksdGhpcy5uYXZpZ2F0aW9uJiZ0aGlzLm5hdmlnYXRpb24uJHByZXZFbCYmKHQ9dGhpcy5uYXZpZ2F0aW9uLiRwcmV2RWwpLGUmJih0aGlzLmExMXkubWFrZUVsRm9jdXNhYmxlKGUpLHRoaXMuYTExeS5hZGRFbFJvbGUoZSxcImJ1dHRvblwiKSx0aGlzLmExMXkuYWRkRWxMYWJlbChlLGkubmV4dFNsaWRlTWVzc2FnZSksZS5vbihcImtleWRvd25cIix0aGlzLmExMXkub25FbnRlcktleSkpLHQmJih0aGlzLmExMXkubWFrZUVsRm9jdXNhYmxlKHQpLHRoaXMuYTExeS5hZGRFbFJvbGUodCxcImJ1dHRvblwiKSx0aGlzLmExMXkuYWRkRWxMYWJlbCh0LGkucHJldlNsaWRlTWVzc2FnZSksdC5vbihcImtleWRvd25cIix0aGlzLmExMXkub25FbnRlcktleSkpLHRoaXMucGFnaW5hdGlvbiYmdGhpcy5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGUmJnRoaXMucGFnaW5hdGlvbi5idWxsZXRzJiZ0aGlzLnBhZ2luYXRpb24uYnVsbGV0cy5sZW5ndGgmJnRoaXMucGFnaW5hdGlvbi4kZWwub24oXCJrZXlkb3duXCIsXCIuXCIrdGhpcy5wYXJhbXMucGFnaW5hdGlvbi5idWxsZXRDbGFzcyx0aGlzLmExMXkub25FbnRlcktleSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMuYTExeS5saXZlUmVnaW9uJiZ0aGlzLmExMXkubGl2ZVJlZ2lvbi5sZW5ndGg+MCYmdGhpcy5hMTF5LmxpdmVSZWdpb24ucmVtb3ZlKCksdGhpcy5uYXZpZ2F0aW9uJiZ0aGlzLm5hdmlnYXRpb24uJG5leHRFbCYmKGU9dGhpcy5uYXZpZ2F0aW9uLiRuZXh0RWwpLHRoaXMubmF2aWdhdGlvbiYmdGhpcy5uYXZpZ2F0aW9uLiRwcmV2RWwmJih0PXRoaXMubmF2aWdhdGlvbi4kcHJldkVsKSxlJiZlLm9mZihcImtleWRvd25cIix0aGlzLmExMXkub25FbnRlcktleSksdCYmdC5vZmYoXCJrZXlkb3duXCIsdGhpcy5hMTF5Lm9uRW50ZXJLZXkpLHRoaXMucGFnaW5hdGlvbiYmdGhpcy5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGUmJnRoaXMucGFnaW5hdGlvbi5idWxsZXRzJiZ0aGlzLnBhZ2luYXRpb24uYnVsbGV0cy5sZW5ndGgmJnRoaXMucGFnaW5hdGlvbi4kZWwub2ZmKFwia2V5ZG93blwiLFwiLlwiK3RoaXMucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0Q2xhc3MsdGhpcy5hMTF5Lm9uRW50ZXJLZXkpfX0sXz17aW5pdDpmdW5jdGlvbigpe2lmKHRoaXMucGFyYW1zLmhpc3Rvcnkpe2lmKCFvLmhpc3Rvcnl8fCFvLmhpc3RvcnkucHVzaFN0YXRlKXJldHVybiB0aGlzLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQ9ITEsdm9pZCh0aGlzLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5lbmFibGVkPSEwKTt2YXIgZT10aGlzLmhpc3Rvcnk7ZS5pbml0aWFsaXplZD0hMCxlLnBhdGhzPV8uZ2V0UGF0aFZhbHVlcygpLChlLnBhdGhzLmtleXx8ZS5wYXRocy52YWx1ZSkmJihlLnNjcm9sbFRvU2xpZGUoMCxlLnBhdGhzLnZhbHVlLHRoaXMucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCksdGhpcy5wYXJhbXMuaGlzdG9yeS5yZXBsYWNlU3RhdGV8fG8uYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsdGhpcy5oaXN0b3J5LnNldEhpc3RvcnlQb3BTdGF0ZSkpfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmhpc3RvcnkucmVwbGFjZVN0YXRlfHxvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLHRoaXMuaGlzdG9yeS5zZXRIaXN0b3J5UG9wU3RhdGUpfSxzZXRIaXN0b3J5UG9wU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLmhpc3RvcnkucGF0aHM9Xy5nZXRQYXRoVmFsdWVzKCksdGhpcy5oaXN0b3J5LnNjcm9sbFRvU2xpZGUodGhpcy5wYXJhbXMuc3BlZWQsdGhpcy5oaXN0b3J5LnBhdGhzLnZhbHVlLCExKX0sZ2V0UGF0aFZhbHVlczpmdW5jdGlvbigpe3ZhciBlPW8ubG9jYXRpb24ucGF0aG5hbWUuc2xpY2UoMSkuc3BsaXQoXCIvXCIpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cIlwiIT09ZX0pLHQ9ZS5sZW5ndGg7cmV0dXJue2tleTplW3QtMl0sdmFsdWU6ZVt0LTFdfX0sc2V0SGlzdG9yeTpmdW5jdGlvbihlLHQpe2lmKHRoaXMuaGlzdG9yeS5pbml0aWFsaXplZCYmdGhpcy5wYXJhbXMuaGlzdG9yeS5lbmFibGVkKXt2YXIgaT10aGlzLnNsaWRlcy5lcSh0KSxzPV8uc2x1Z2lmeShpLmF0dHIoXCJkYXRhLWhpc3RvcnlcIikpO28ubG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoZSl8fChzPWUrXCIvXCIrcyk7dmFyIGE9by5oaXN0b3J5LnN0YXRlO2EmJmEudmFsdWU9PT1zfHwodGhpcy5wYXJhbXMuaGlzdG9yeS5yZXBsYWNlU3RhdGU/by5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7dmFsdWU6c30sbnVsbCxzKTpvLmhpc3RvcnkucHVzaFN0YXRlKHt2YWx1ZTpzfSxudWxsLHMpKX19LHNsdWdpZnk6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZyxcIi1cIikucmVwbGFjZSgvW15cXHctXSsvZyxcIlwiKS5yZXBsYWNlKC8tLSsvZyxcIi1cIikucmVwbGFjZSgvXi0rLyxcIlwiKS5yZXBsYWNlKC8tKyQvLFwiXCIpfSxzY3JvbGxUb1NsaWRlOmZ1bmN0aW9uKGUsdCxpKXtpZih0KWZvcih2YXIgcz0wLGE9dGhpcy5zbGlkZXMubGVuZ3RoO3M8YTtzKz0xKXt2YXIgcj10aGlzLnNsaWRlcy5lcShzKTtpZihfLnNsdWdpZnkoci5hdHRyKFwiZGF0YS1oaXN0b3J5XCIpKT09PXQmJiFyLmhhc0NsYXNzKHRoaXMucGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3MpKXt2YXIgbj1yLmluZGV4KCk7dGhpcy5zbGlkZVRvKG4sZSxpKX19ZWxzZSB0aGlzLnNsaWRlVG8oMCxlLGkpfX0sWj17b25IYXNoQ2FuZ2U6ZnVuY3Rpb24oKXt2YXIgZT1kLmxvY2F0aW9uLmhhc2gucmVwbGFjZShcIiNcIixcIlwiKTtlIT09dGhpcy5zbGlkZXMuZXEodGhpcy5hY3RpdmVJbmRleCkuYXR0cihcImRhdGEtaGFzaFwiKSYmdGhpcy5zbGlkZVRvKHRoaXMuJHdyYXBwZXJFbC5jaGlsZHJlbihcIi5cIit0aGlzLnBhcmFtcy5zbGlkZUNsYXNzKydbZGF0YS1oYXNoPVwiJytlKydcIl0nKS5pbmRleCgpKX0sc2V0SGFzaDpmdW5jdGlvbigpe2lmKHRoaXMuaGFzaE5hdmlnYXRpb24uaW5pdGlhbGl6ZWQmJnRoaXMucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQpaWYodGhpcy5wYXJhbXMuaGFzaE5hdmlnYXRpb24ucmVwbGFjZVN0YXRlJiZvLmhpc3RvcnkmJm8uaGlzdG9yeS5yZXBsYWNlU3RhdGUpby5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLG51bGwsXCIjXCIrdGhpcy5zbGlkZXMuZXEodGhpcy5hY3RpdmVJbmRleCkuYXR0cihcImRhdGEtaGFzaFwiKXx8XCJcIik7ZWxzZXt2YXIgZT10aGlzLnNsaWRlcy5lcSh0aGlzLmFjdGl2ZUluZGV4KSx0PWUuYXR0cihcImRhdGEtaGFzaFwiKXx8ZS5hdHRyKFwiZGF0YS1oaXN0b3J5XCIpO2QubG9jYXRpb24uaGFzaD10fHxcIlwifX0saW5pdDpmdW5jdGlvbigpe2lmKCEoIXRoaXMucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWR8fHRoaXMucGFyYW1zLmhpc3RvcnkmJnRoaXMucGFyYW1zLmhpc3RvcnkuZW5hYmxlZCkpe3RoaXMuaGFzaE5hdmlnYXRpb24uaW5pdGlhbGl6ZWQ9ITA7dmFyIGU9ZC5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoXCIjXCIsXCJcIik7aWYoZSlmb3IodmFyIGk9MCxzPXRoaXMuc2xpZGVzLmxlbmd0aDtpPHM7aSs9MSl7dmFyIGE9dGhpcy5zbGlkZXMuZXEoaSk7aWYoKGEuYXR0cihcImRhdGEtaGFzaFwiKXx8YS5hdHRyKFwiZGF0YS1oaXN0b3J5XCIpKT09PWUmJiFhLmhhc0NsYXNzKHRoaXMucGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3MpKXt2YXIgcj1hLmluZGV4KCk7dGhpcy5zbGlkZVRvKHIsMCx0aGlzLnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQsITApfX10aGlzLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi53YXRjaFN0YXRlJiZ0KG8pLm9uKFwiaGFzaGNoYW5nZVwiLHRoaXMuaGFzaE5hdmlnYXRpb24ub25IYXNoQ2FuZ2UpfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLndhdGNoU3RhdGUmJnQobykub2ZmKFwiaGFzaGNoYW5nZVwiLHRoaXMuaGFzaE5hdmlnYXRpb24ub25IYXNoQ2FuZ2UpfX0sUT17cnVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuc2xpZGVzLmVxKGUuYWN0aXZlSW5kZXgpLGk9ZS5wYXJhbXMuYXV0b3BsYXkuZGVsYXk7dC5hdHRyKFwiZGF0YS1zd2lwZXItYXV0b3BsYXlcIikmJihpPXQuYXR0cihcImRhdGEtc3dpcGVyLWF1dG9wbGF5XCIpfHxlLnBhcmFtcy5hdXRvcGxheS5kZWxheSksZS5hdXRvcGxheS50aW1lb3V0PWwubmV4dFRpY2soZnVuY3Rpb24oKXtlLnBhcmFtcy5hdXRvcGxheS5yZXZlcnNlRGlyZWN0aW9uP2UucGFyYW1zLmxvb3A/KGUubG9vcEZpeCgpLGUuc2xpZGVQcmV2KGUucGFyYW1zLnNwZWVkLCEwLCEwKSxlLmVtaXQoXCJhdXRvcGxheVwiKSk6ZS5pc0JlZ2lubmluZz9lLnBhcmFtcy5hdXRvcGxheS5zdG9wT25MYXN0U2xpZGU/ZS5hdXRvcGxheS5zdG9wKCk6KGUuc2xpZGVUbyhlLnNsaWRlcy5sZW5ndGgtMSxlLnBhcmFtcy5zcGVlZCwhMCwhMCksZS5lbWl0KFwiYXV0b3BsYXlcIikpOihlLnNsaWRlUHJldihlLnBhcmFtcy5zcGVlZCwhMCwhMCksZS5lbWl0KFwiYXV0b3BsYXlcIikpOmUucGFyYW1zLmxvb3A/KGUubG9vcEZpeCgpLGUuc2xpZGVOZXh0KGUucGFyYW1zLnNwZWVkLCEwLCEwKSxlLmVtaXQoXCJhdXRvcGxheVwiKSk6ZS5pc0VuZD9lLnBhcmFtcy5hdXRvcGxheS5zdG9wT25MYXN0U2xpZGU/ZS5hdXRvcGxheS5zdG9wKCk6KGUuc2xpZGVUbygwLGUucGFyYW1zLnNwZWVkLCEwLCEwKSxlLmVtaXQoXCJhdXRvcGxheVwiKSk6KGUuc2xpZGVOZXh0KGUucGFyYW1zLnNwZWVkLCEwLCEwKSxlLmVtaXQoXCJhdXRvcGxheVwiKSl9LGkpfSxzdGFydDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLmF1dG9wbGF5LnRpbWVvdXQmJighdGhpcy5hdXRvcGxheS5ydW5uaW5nJiYodGhpcy5hdXRvcGxheS5ydW5uaW5nPSEwLHRoaXMuZW1pdChcImF1dG9wbGF5U3RhcnRcIiksdGhpcy5hdXRvcGxheS5ydW4oKSwhMCkpfSxzdG9wOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmF1dG9wbGF5LnJ1bm5pbmcmJih2b2lkIDAhPT10aGlzLmF1dG9wbGF5LnRpbWVvdXQmJih0aGlzLmF1dG9wbGF5LnRpbWVvdXQmJihjbGVhclRpbWVvdXQodGhpcy5hdXRvcGxheS50aW1lb3V0KSx0aGlzLmF1dG9wbGF5LnRpbWVvdXQ9dm9pZCAwKSx0aGlzLmF1dG9wbGF5LnJ1bm5pbmc9ITEsdGhpcy5lbWl0KFwiYXV0b3BsYXlTdG9wXCIpLCEwKSl9LHBhdXNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5hdXRvcGxheS5ydW5uaW5nJiYodC5hdXRvcGxheS5wYXVzZWR8fCh0LmF1dG9wbGF5LnRpbWVvdXQmJmNsZWFyVGltZW91dCh0LmF1dG9wbGF5LnRpbWVvdXQpLHQuYXV0b3BsYXkucGF1c2VkPSEwLDAhPT1lJiZ0LnBhcmFtcy5hdXRvcGxheS53YWl0Rm9yVHJhbnNpdGlvbj90LiR3cmFwcGVyRWwudHJhbnNpdGlvbkVuZChmdW5jdGlvbigpe3QmJiF0LmRlc3Ryb3llZCYmKHQuYXV0b3BsYXkucGF1c2VkPSExLHQuYXV0b3BsYXkucnVubmluZz90LmF1dG9wbGF5LnJ1bigpOnQuYXV0b3BsYXkuc3RvcCgpKX0pOih0LmF1dG9wbGF5LnBhdXNlZD0hMSx0LmF1dG9wbGF5LnJ1bigpKSkpfX0sSj17c2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuc2xpZGVzLHQ9MDt0PGUubGVuZ3RoO3QrPTEpe3ZhciBpPXRoaXMuc2xpZGVzLmVxKHQpLHM9LWlbMF0uc3dpcGVyU2xpZGVPZmZzZXQ7dGhpcy5wYXJhbXMudmlydHVhbFRyYW5zbGF0ZXx8KHMtPXRoaXMudHJhbnNsYXRlKTt2YXIgYT0wO3RoaXMuaXNIb3Jpem9udGFsKCl8fChhPXMscz0wKTt2YXIgcj10aGlzLnBhcmFtcy5mYWRlRWZmZWN0LmNyb3NzRmFkZT9NYXRoLm1heCgxLU1hdGguYWJzKGlbMF0ucHJvZ3Jlc3MpLDApOjErTWF0aC5taW4oTWF0aC5tYXgoaVswXS5wcm9ncmVzcywtMSksMCk7aS5jc3Moe29wYWNpdHk6cn0pLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK3MrXCJweCwgXCIrYStcInB4LCAwcHgpXCIpfX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9dC5zbGlkZXMscz10LiR3cmFwcGVyRWw7aWYoaS50cmFuc2l0aW9uKGUpLHQucGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUmJjAhPT1lKXt2YXIgYT0hMTtpLnRyYW5zaXRpb25FbmQoZnVuY3Rpb24oKXtpZighYSYmdCYmIXQuZGVzdHJveWVkKXthPSEwLHQuYW5pbWF0aW5nPSExO2Zvcih2YXIgZT1bXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsXCJ0cmFuc2l0aW9uZW5kXCJdLGk9MDtpPGUubGVuZ3RoO2krPTEpcy50cmlnZ2VyKGVbaV0pfX0pfX19LGVlPXtzZXRUcmFuc2xhdGU6ZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXMuJGVsLHM9dGhpcy4kd3JhcHBlckVsLGE9dGhpcy5zbGlkZXMscj10aGlzLndpZHRoLG49dGhpcy5oZWlnaHQsbz10aGlzLnJ0bCxsPXRoaXMuc2l6ZSxkPXRoaXMucGFyYW1zLmN1YmVFZmZlY3QsaD10aGlzLmlzSG9yaXpvbnRhbCgpLHA9dGhpcy52aXJ0dWFsJiZ0aGlzLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQsYz0wO2Quc2hhZG93JiYoaD8oMD09PShlPXMuZmluZChcIi5zd2lwZXItY3ViZS1zaGFkb3dcIikpLmxlbmd0aCYmKGU9dCgnPGRpdiBjbGFzcz1cInN3aXBlci1jdWJlLXNoYWRvd1wiPjwvZGl2PicpLHMuYXBwZW5kKGUpKSxlLmNzcyh7aGVpZ2h0OnIrXCJweFwifSkpOjA9PT0oZT1pLmZpbmQoXCIuc3dpcGVyLWN1YmUtc2hhZG93XCIpKS5sZW5ndGgmJihlPXQoJzxkaXYgY2xhc3M9XCJzd2lwZXItY3ViZS1zaGFkb3dcIj48L2Rpdj4nKSxpLmFwcGVuZChlKSkpO2Zvcih2YXIgdT0wO3U8YS5sZW5ndGg7dSs9MSl7dmFyIGY9YS5lcSh1KSx2PXU7cCYmKHY9cGFyc2VJbnQoZi5hdHRyKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiksMTApKTt2YXIgbT05MCp2LGc9TWF0aC5mbG9vcihtLzM2MCk7byYmKG09LW0sZz1NYXRoLmZsb29yKC1tLzM2MCkpO3ZhciBiPU1hdGgubWF4KE1hdGgubWluKGZbMF0ucHJvZ3Jlc3MsMSksLTEpLHc9MCx5PTAseD0wO3YlND09MD8odz00Ki1nKmwseD0wKToodi0xKSU0PT0wPyh3PTAseD00Ki1nKmwpOih2LTIpJTQ9PTA/KHc9bCs0KmcqbCx4PWwpOih2LTMpJTQ9PTAmJih3PS1sLHg9MypsKzQqbCpnKSxvJiYodz0tdyksaHx8KHk9dyx3PTApO3ZhciBUPVwicm90YXRlWChcIisoaD8wOi1tKStcImRlZykgcm90YXRlWShcIisoaD9tOjApK1wiZGVnKSB0cmFuc2xhdGUzZChcIit3K1wicHgsIFwiK3krXCJweCwgXCIreCtcInB4KVwiO2lmKGI8PTEmJmI+LTEmJihjPTkwKnYrOTAqYixvJiYoYz05MCotdi05MCpiKSksZi50cmFuc2Zvcm0oVCksZC5zbGlkZVNoYWRvd3Mpe3ZhciBFPWg/Zi5maW5kKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKTpmLmZpbmQoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3BcIiksUz1oP2YuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0XCIpOmYuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbVwiKTswPT09RS5sZW5ndGgmJihFPXQoJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGUtc2hhZG93LScrKGg/XCJsZWZ0XCI6XCJ0b3BcIikrJ1wiPjwvZGl2PicpLGYuYXBwZW5kKEUpKSwwPT09Uy5sZW5ndGgmJihTPXQoJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGUtc2hhZG93LScrKGg/XCJyaWdodFwiOlwiYm90dG9tXCIpKydcIj48L2Rpdj4nKSxmLmFwcGVuZChTKSksRS5sZW5ndGgmJihFWzBdLnN0eWxlLm9wYWNpdHk9TWF0aC5tYXgoLWIsMCkpLFMubGVuZ3RoJiYoU1swXS5zdHlsZS5vcGFjaXR5PU1hdGgubWF4KGIsMCkpfX1pZihzLmNzcyh7XCItd2Via2l0LXRyYW5zZm9ybS1vcmlnaW5cIjpcIjUwJSA1MCUgLVwiK2wvMitcInB4XCIsXCItbW96LXRyYW5zZm9ybS1vcmlnaW5cIjpcIjUwJSA1MCUgLVwiK2wvMitcInB4XCIsXCItbXMtdHJhbnNmb3JtLW9yaWdpblwiOlwiNTAlIDUwJSAtXCIrbC8yK1wicHhcIixcInRyYW5zZm9ybS1vcmlnaW5cIjpcIjUwJSA1MCUgLVwiK2wvMitcInB4XCJ9KSxkLnNoYWRvdylpZihoKWUudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMHB4LCBcIisoci8yK2Quc2hhZG93T2Zmc2V0KStcInB4LCBcIistci8yK1wicHgpIHJvdGF0ZVgoOTBkZWcpIHJvdGF0ZVooMGRlZykgc2NhbGUoXCIrZC5zaGFkb3dTY2FsZStcIilcIik7ZWxzZXt2YXIgQz1NYXRoLmFicyhjKS05MCpNYXRoLmZsb29yKE1hdGguYWJzKGMpLzkwKSxNPTEuNS0oTWF0aC5zaW4oMipDKk1hdGguUEkvMzYwKS8yK01hdGguY29zKDIqQypNYXRoLlBJLzM2MCkvMiksej1kLnNoYWRvd1NjYWxlLFA9ZC5zaGFkb3dTY2FsZS9NLGs9ZC5zaGFkb3dPZmZzZXQ7ZS50cmFuc2Zvcm0oXCJzY2FsZTNkKFwiK3orXCIsIDEsIFwiK1ArXCIpIHRyYW5zbGF0ZTNkKDBweCwgXCIrKG4vMitrKStcInB4LCBcIistbi8yL1ArXCJweCkgcm90YXRlWCgtOTBkZWcpXCIpfXZhciAkPUkuaXNTYWZhcml8fEkuaXNVaVdlYlZpZXc/LWwvMjowO3MudHJhbnNmb3JtKFwidHJhbnNsYXRlM2QoMHB4LDAsXCIrJCtcInB4KSByb3RhdGVYKFwiKyh0aGlzLmlzSG9yaXpvbnRhbCgpPzA6YykrXCJkZWcpIHJvdGF0ZVkoXCIrKHRoaXMuaXNIb3Jpem9udGFsKCk/LWM6MCkrXCJkZWcpXCIpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuJGVsO3RoaXMuc2xpZGVzLnRyYW5zaXRpb24oZSkuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKS50cmFuc2l0aW9uKGUpLHRoaXMucGFyYW1zLmN1YmVFZmZlY3Quc2hhZG93JiYhdGhpcy5pc0hvcml6b250YWwoKSYmdC5maW5kKFwiLnN3aXBlci1jdWJlLXNoYWRvd1wiKS50cmFuc2l0aW9uKGUpfX0sdGU9e3NldFRyYW5zbGF0ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnNsaWRlcyxpPTA7aTxlLmxlbmd0aDtpKz0xKXt2YXIgcz1lLmVxKGkpLGE9c1swXS5wcm9ncmVzczt0aGlzLnBhcmFtcy5mbGlwRWZmZWN0LmxpbWl0Um90YXRpb24mJihhPU1hdGgubWF4KE1hdGgubWluKHNbMF0ucHJvZ3Jlc3MsMSksLTEpKTt2YXIgcj0tMTgwKmEsbj0wLG89LXNbMF0uc3dpcGVyU2xpZGVPZmZzZXQsbD0wO2lmKHRoaXMuaXNIb3Jpem9udGFsKCk/dGhpcy5ydGwmJihyPS1yKToobD1vLG89MCxuPS1yLHI9MCksc1swXS5zdHlsZS56SW5kZXg9LU1hdGguYWJzKE1hdGgucm91bmQoYSkpK2UubGVuZ3RoLHRoaXMucGFyYW1zLmZsaXBFZmZlY3Quc2xpZGVTaGFkb3dzKXt2YXIgZD10aGlzLmlzSG9yaXpvbnRhbCgpP3MuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnRcIik6cy5maW5kKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wXCIpLGg9dGhpcy5pc0hvcml6b250YWwoKT9zLmZpbmQoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodFwiKTpzLmZpbmQoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b21cIik7MD09PWQubGVuZ3RoJiYoZD10KCc8ZGl2IGNsYXNzPVwic3dpcGVyLXNsaWRlLXNoYWRvdy0nKyh0aGlzLmlzSG9yaXpvbnRhbCgpP1wibGVmdFwiOlwidG9wXCIpKydcIj48L2Rpdj4nKSxzLmFwcGVuZChkKSksMD09PWgubGVuZ3RoJiYoaD10KCc8ZGl2IGNsYXNzPVwic3dpcGVyLXNsaWRlLXNoYWRvdy0nKyh0aGlzLmlzSG9yaXpvbnRhbCgpP1wicmlnaHRcIjpcImJvdHRvbVwiKSsnXCI+PC9kaXY+Jykscy5hcHBlbmQoaCkpLGQubGVuZ3RoJiYoZFswXS5zdHlsZS5vcGFjaXR5PU1hdGgubWF4KC1hLDApKSxoLmxlbmd0aCYmKGhbMF0uc3R5bGUub3BhY2l0eT1NYXRoLm1heChhLDApKX1zLnRyYW5zZm9ybShcInRyYW5zbGF0ZTNkKFwiK28rXCJweCwgXCIrbCtcInB4LCAwcHgpIHJvdGF0ZVgoXCIrbitcImRlZykgcm90YXRlWShcIityK1wiZGVnKVwiKX19LHNldFRyYW5zaXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPXQuc2xpZGVzLHM9dC5hY3RpdmVJbmRleCxhPXQuJHdyYXBwZXJFbDtpZihpLnRyYW5zaXRpb24oZSkuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKS50cmFuc2l0aW9uKGUpLHQucGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUmJjAhPT1lKXt2YXIgcj0hMTtpLmVxKHMpLnRyYW5zaXRpb25FbmQoZnVuY3Rpb24oKXtpZighciYmdCYmIXQuZGVzdHJveWVkKXtyPSEwLHQuYW5pbWF0aW5nPSExO2Zvcih2YXIgZT1bXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsXCJ0cmFuc2l0aW9uZW5kXCJdLGk9MDtpPGUubGVuZ3RoO2krPTEpYS50cmlnZ2VyKGVbaV0pfX0pfX19LGllPXtzZXRUcmFuc2xhdGU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy53aWR0aCxpPXRoaXMuaGVpZ2h0LHM9dGhpcy5zbGlkZXMsYT10aGlzLiR3cmFwcGVyRWwscj10aGlzLnNsaWRlc1NpemVzR3JpZCxuPXRoaXMucGFyYW1zLmNvdmVyZmxvd0VmZmVjdCxvPXRoaXMuaXNIb3Jpem9udGFsKCksbD10aGlzLnRyYW5zbGF0ZSxkPW8/ZS8yLWw6aS8yLWwscD1vP24ucm90YXRlOi1uLnJvdGF0ZSxjPW4uZGVwdGgsdT0wLGY9cy5sZW5ndGg7dTxmO3UrPTEpe3ZhciB2PXMuZXEodSksbT1yW3VdLGc9KGQtdlswXS5zd2lwZXJTbGlkZU9mZnNldC1tLzIpL20qbi5tb2RpZmllcixiPW8/cCpnOjAsdz1vPzA6cCpnLHk9LWMqTWF0aC5hYnMoZykseD1vPzA6bi5zdHJldGNoKmcsVD1vP24uc3RyZXRjaCpnOjA7TWF0aC5hYnMoVCk8LjAwMSYmKFQ9MCksTWF0aC5hYnMoeCk8LjAwMSYmKHg9MCksTWF0aC5hYnMoeSk8LjAwMSYmKHk9MCksTWF0aC5hYnMoYik8LjAwMSYmKGI9MCksTWF0aC5hYnModyk8LjAwMSYmKHc9MCk7dmFyIEU9XCJ0cmFuc2xhdGUzZChcIitUK1wicHgsXCIreCtcInB4LFwiK3krXCJweCkgIHJvdGF0ZVgoXCIrdytcImRlZykgcm90YXRlWShcIitiK1wiZGVnKVwiO2lmKHYudHJhbnNmb3JtKEUpLHZbMF0uc3R5bGUuekluZGV4PTEtTWF0aC5hYnMoTWF0aC5yb3VuZChnKSksbi5zbGlkZVNoYWRvd3Mpe3ZhciBTPW8/di5maW5kKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKTp2LmZpbmQoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3BcIiksQz1vP3YuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0XCIpOnYuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbVwiKTswPT09Uy5sZW5ndGgmJihTPXQoJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGUtc2hhZG93LScrKG8/XCJsZWZ0XCI6XCJ0b3BcIikrJ1wiPjwvZGl2PicpLHYuYXBwZW5kKFMpKSwwPT09Qy5sZW5ndGgmJihDPXQoJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGUtc2hhZG93LScrKG8/XCJyaWdodFwiOlwiYm90dG9tXCIpKydcIj48L2Rpdj4nKSx2LmFwcGVuZChDKSksUy5sZW5ndGgmJihTWzBdLnN0eWxlLm9wYWNpdHk9Zz4wP2c6MCksQy5sZW5ndGgmJihDWzBdLnN0eWxlLm9wYWNpdHk9LWc+MD8tZzowKX19KGgucG9pbnRlckV2ZW50c3x8aC5wcmVmaXhlZFBvaW50ZXJFdmVudHMpJiYoYVswXS5zdHlsZS5wZXJzcGVjdGl2ZU9yaWdpbj1kK1wicHggNTAlXCIpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3RoaXMuc2xpZGVzLnRyYW5zaXRpb24oZSkuZmluZChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKS50cmFuc2l0aW9uKGUpfX0sc2U9WyQsTCxELE8sSCxYLEcse25hbWU6XCJtb3VzZXdoZWVsXCIscGFyYW1zOnttb3VzZXdoZWVsOntlbmFibGVkOiExLHJlbGVhc2VPbkVkZ2VzOiExLGludmVydDohMSxmb3JjZVRvQXhpczohMSxzZW5zaXRpdml0eToxLGV2ZW50c1RhcmdlZDpcImNvbnRhaW5lclwifX0sY3JlYXRlOmZ1bmN0aW9uKCl7bC5leHRlbmQodGhpcyx7bW91c2V3aGVlbDp7ZW5hYmxlZDohMSxlbmFibGU6Qi5lbmFibGUuYmluZCh0aGlzKSxkaXNhYmxlOkIuZGlzYWJsZS5iaW5kKHRoaXMpLGhhbmRsZTpCLmhhbmRsZS5iaW5kKHRoaXMpLGxhc3RTY3JvbGxUaW1lOmwubm93KCl9fSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMubW91c2V3aGVlbC5lbmFibGVkJiZ0aGlzLm1vdXNld2hlZWwuZW5hYmxlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1vdXNld2hlZWwuZW5hYmxlZCYmdGhpcy5tb3VzZXdoZWVsLmRpc2FibGUoKX19fSx7bmFtZTpcIm5hdmlnYXRpb25cIixwYXJhbXM6e25hdmlnYXRpb246e25leHRFbDpudWxsLHByZXZFbDpudWxsLGhpZGVPbkNsaWNrOiExLGRpc2FibGVkQ2xhc3M6XCJzd2lwZXItYnV0dG9uLWRpc2FibGVkXCIsaGlkZGVuQ2xhc3M6XCJzd2lwZXItYnV0dG9uLWhpZGRlblwiLGxvY2tDbGFzczpcInN3aXBlci1idXR0b24tbG9ja1wifX0sY3JlYXRlOmZ1bmN0aW9uKCl7bC5leHRlbmQodGhpcyx7bmF2aWdhdGlvbjp7aW5pdDpWLmluaXQuYmluZCh0aGlzKSx1cGRhdGU6Vi51cGRhdGUuYmluZCh0aGlzKSxkZXN0cm95OlYuZGVzdHJveS5iaW5kKHRoaXMpfX0pfSxvbjp7aW5pdDpmdW5jdGlvbigpe3RoaXMubmF2aWdhdGlvbi5pbml0KCksdGhpcy5uYXZpZ2F0aW9uLnVwZGF0ZSgpfSx0b0VkZ2U6ZnVuY3Rpb24oKXt0aGlzLm5hdmlnYXRpb24udXBkYXRlKCl9LGZyb21FZGdlOmZ1bmN0aW9uKCl7dGhpcy5uYXZpZ2F0aW9uLnVwZGF0ZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5uYXZpZ2F0aW9uLmRlc3Ryb3koKX0sY2xpY2s6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5uYXZpZ2F0aW9uLHM9aS4kbmV4dEVsLGE9aS4kcHJldkVsOyF0aGlzLnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGVPbkNsaWNrfHx0KGUudGFyZ2V0KS5pcyhhKXx8dChlLnRhcmdldCkuaXMocyl8fChzJiZzLnRvZ2dsZUNsYXNzKHRoaXMucGFyYW1zLm5hdmlnYXRpb24uaGlkZGVuQ2xhc3MpLGEmJmEudG9nZ2xlQ2xhc3ModGhpcy5wYXJhbXMubmF2aWdhdGlvbi5oaWRkZW5DbGFzcykpfX19LHtuYW1lOlwicGFnaW5hdGlvblwiLHBhcmFtczp7cGFnaW5hdGlvbjp7ZWw6bnVsbCxidWxsZXRFbGVtZW50Olwic3BhblwiLGNsaWNrYWJsZTohMSxoaWRlT25DbGljazohMSxyZW5kZXJCdWxsZXQ6bnVsbCxyZW5kZXJQcm9ncmVzc2JhcjpudWxsLHJlbmRlckZyYWN0aW9uOm51bGwscmVuZGVyQ3VzdG9tOm51bGwsdHlwZTpcImJ1bGxldHNcIixkeW5hbWljQnVsbGV0czohMSxidWxsZXRDbGFzczpcInN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldFwiLGJ1bGxldEFjdGl2ZUNsYXNzOlwic3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LWFjdGl2ZVwiLG1vZGlmaWVyQ2xhc3M6XCJzd2lwZXItcGFnaW5hdGlvbi1cIixjdXJyZW50Q2xhc3M6XCJzd2lwZXItcGFnaW5hdGlvbi1jdXJyZW50XCIsdG90YWxDbGFzczpcInN3aXBlci1wYWdpbmF0aW9uLXRvdGFsXCIsaGlkZGVuQ2xhc3M6XCJzd2lwZXItcGFnaW5hdGlvbi1oaWRkZW5cIixwcm9ncmVzc2JhckZpbGxDbGFzczpcInN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLWZpbGxcIixjbGlja2FibGVDbGFzczpcInN3aXBlci1wYWdpbmF0aW9uLWNsaWNrYWJsZVwiLGxvY2tDbGFzczpcInN3aXBlci1wYWdpbmF0aW9uLWxvY2tcIn19LGNyZWF0ZTpmdW5jdGlvbigpe2wuZXh0ZW5kKHRoaXMse3BhZ2luYXRpb246e2luaXQ6Ui5pbml0LmJpbmQodGhpcykscmVuZGVyOlIucmVuZGVyLmJpbmQodGhpcyksdXBkYXRlOlIudXBkYXRlLmJpbmQodGhpcyksZGVzdHJveTpSLmRlc3Ryb3kuYmluZCh0aGlzKX19KX0sb246e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnBhZ2luYXRpb24uaW5pdCgpLHRoaXMucGFnaW5hdGlvbi5yZW5kZXIoKSx0aGlzLnBhZ2luYXRpb24udXBkYXRlKCl9LGFjdGl2ZUluZGV4Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMubG9vcD90aGlzLnBhZ2luYXRpb24udXBkYXRlKCk6dm9pZCAwPT09dGhpcy5zbmFwSW5kZXgmJnRoaXMucGFnaW5hdGlvbi51cGRhdGUoKX0sc25hcEluZGV4Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMubG9vcHx8dGhpcy5wYWdpbmF0aW9uLnVwZGF0ZSgpfSxzbGlkZXNMZW5ndGhDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5sb29wJiYodGhpcy5wYWdpbmF0aW9uLnJlbmRlcigpLHRoaXMucGFnaW5hdGlvbi51cGRhdGUoKSl9LHNuYXBHcmlkTGVuZ3RoQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMubG9vcHx8KHRoaXMucGFnaW5hdGlvbi5yZW5kZXIoKSx0aGlzLnBhZ2luYXRpb24udXBkYXRlKCkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYWdpbmF0aW9uLmRlc3Ryb3koKX0sY2xpY2s6ZnVuY3Rpb24oZSl7dGhpcy5wYXJhbXMucGFnaW5hdGlvbi5lbCYmdGhpcy5wYXJhbXMucGFnaW5hdGlvbi5oaWRlT25DbGljayYmdGhpcy5wYWdpbmF0aW9uLiRlbC5sZW5ndGg+MCYmIXQoZS50YXJnZXQpLmhhc0NsYXNzKHRoaXMucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0Q2xhc3MpJiZ0aGlzLnBhZ2luYXRpb24uJGVsLnRvZ2dsZUNsYXNzKHRoaXMucGFyYW1zLnBhZ2luYXRpb24uaGlkZGVuQ2xhc3MpfX19LHtuYW1lOlwic2Nyb2xsYmFyXCIscGFyYW1zOntzY3JvbGxiYXI6e2VsOm51bGwsZHJhZ1NpemU6XCJhdXRvXCIsaGlkZTohMSxkcmFnZ2FibGU6ITEsc25hcE9uUmVsZWFzZTohMCxsb2NrQ2xhc3M6XCJzd2lwZXItc2Nyb2xsYmFyLWxvY2tcIn19LGNyZWF0ZTpmdW5jdGlvbigpe2wuZXh0ZW5kKHRoaXMse3Njcm9sbGJhcjp7aW5pdDpGLmluaXQuYmluZCh0aGlzKSxkZXN0cm95OkYuZGVzdHJveS5iaW5kKHRoaXMpLHVwZGF0ZVNpemU6Ri51cGRhdGVTaXplLmJpbmQodGhpcyksc2V0VHJhbnNsYXRlOkYuc2V0VHJhbnNsYXRlLmJpbmQodGhpcyksc2V0VHJhbnNpdGlvbjpGLnNldFRyYW5zaXRpb24uYmluZCh0aGlzKSxlbmFibGVEcmFnZ2FibGU6Ri5lbmFibGVEcmFnZ2FibGUuYmluZCh0aGlzKSxkaXNhYmxlRHJhZ2dhYmxlOkYuZGlzYWJsZURyYWdnYWJsZS5iaW5kKHRoaXMpLHNldERyYWdQb3NpdGlvbjpGLnNldERyYWdQb3NpdGlvbi5iaW5kKHRoaXMpLG9uRHJhZ1N0YXJ0OkYub25EcmFnU3RhcnQuYmluZCh0aGlzKSxvbkRyYWdNb3ZlOkYub25EcmFnTW92ZS5iaW5kKHRoaXMpLG9uRHJhZ0VuZDpGLm9uRHJhZ0VuZC5iaW5kKHRoaXMpLGlzVG91Y2hlZDohMSx0aW1lb3V0Om51bGwsZHJhZ1RpbWVvdXQ6bnVsbH19KX0sb246e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGJhci5pbml0KCksdGhpcy5zY3JvbGxiYXIudXBkYXRlU2l6ZSgpLHRoaXMuc2Nyb2xsYmFyLnNldFRyYW5zbGF0ZSgpfSx1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGJhci51cGRhdGVTaXplKCl9LHJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsYmFyLnVwZGF0ZVNpemUoKX0sb2JzZXJ2ZXJVcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGJhci51cGRhdGVTaXplKCl9LHNldFRyYW5zbGF0ZTpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsYmFyLnNldFRyYW5zbGF0ZSgpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3RoaXMuc2Nyb2xsYmFyLnNldFRyYW5zaXRpb24oZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGJhci5kZXN0cm95KCl9fX0se25hbWU6XCJwYXJhbGxheFwiLHBhcmFtczp7cGFyYWxsYXg6e2VuYWJsZWQ6ITF9fSxjcmVhdGU6ZnVuY3Rpb24oKXtsLmV4dGVuZCh0aGlzLHtwYXJhbGxheDp7c2V0VHJhbnNmb3JtOlcuc2V0VHJhbnNmb3JtLmJpbmQodGhpcyksc2V0VHJhbnNsYXRlOlcuc2V0VHJhbnNsYXRlLmJpbmQodGhpcyksc2V0VHJhbnNpdGlvbjpXLnNldFRyYW5zaXRpb24uYmluZCh0aGlzKX19KX0sb246e2JlZm9yZUluaXQ6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzPSEwfSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMucGFyYWxsYXgmJnRoaXMucGFyYWxsYXguc2V0VHJhbnNsYXRlKCl9LHNldFRyYW5zbGF0ZTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLnBhcmFsbGF4JiZ0aGlzLnBhcmFsbGF4LnNldFRyYW5zbGF0ZSgpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3RoaXMucGFyYW1zLnBhcmFsbGF4JiZ0aGlzLnBhcmFsbGF4LnNldFRyYW5zaXRpb24oZSl9fX0se25hbWU6XCJ6b29tXCIscGFyYW1zOnt6b29tOntlbmFibGVkOiExLG1heFJhdGlvOjMsbWluUmF0aW86MSx0b2dnbGU6ITAsY29udGFpbmVyQ2xhc3M6XCJzd2lwZXItem9vbS1jb250YWluZXJcIix6b29tZWRTbGlkZUNsYXNzOlwic3dpcGVyLXNsaWRlLXpvb21lZFwifX0sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXtlbmFibGVkOiExLHNjYWxlOjEsY3VycmVudFNjYWxlOjEsaXNTY2FsaW5nOiExLGdlc3R1cmU6eyRzbGlkZUVsOnZvaWQgMCxzbGlkZVdpZHRoOnZvaWQgMCxzbGlkZUhlaWdodDp2b2lkIDAsJGltYWdlRWw6dm9pZCAwLCRpbWFnZVdyYXBFbDp2b2lkIDAsbWF4UmF0aW86M30saW1hZ2U6e2lzVG91Y2hlZDp2b2lkIDAsaXNNb3ZlZDp2b2lkIDAsY3VycmVudFg6dm9pZCAwLGN1cnJlbnRZOnZvaWQgMCxtaW5YOnZvaWQgMCxtaW5ZOnZvaWQgMCxtYXhYOnZvaWQgMCxtYXhZOnZvaWQgMCx3aWR0aDp2b2lkIDAsaGVpZ2h0OnZvaWQgMCxzdGFydFg6dm9pZCAwLHN0YXJ0WTp2b2lkIDAsdG91Y2hlc1N0YXJ0Ont9LHRvdWNoZXNDdXJyZW50Ont9fSx2ZWxvY2l0eTp7eDp2b2lkIDAseTp2b2lkIDAscHJldlBvc2l0aW9uWDp2b2lkIDAscHJldlBvc2l0aW9uWTp2b2lkIDAscHJldlRpbWU6dm9pZCAwfX07XCJvbkdlc3R1cmVTdGFydCBvbkdlc3R1cmVDaGFuZ2Ugb25HZXN0dXJlRW5kIG9uVG91Y2hTdGFydCBvblRvdWNoTW92ZSBvblRvdWNoRW5kIG9uVHJhbnNpdGlvbkVuZCB0b2dnbGUgZW5hYmxlIGRpc2FibGUgaW4gb3V0XCIuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oaSl7dFtpXT1qW2ldLmJpbmQoZSl9KSxsLmV4dGVuZChlLHt6b29tOnR9KX0sb246e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy56b29tLmVuYWJsZWQmJnRoaXMuem9vbS5lbmFibGUoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuem9vbS5kaXNhYmxlKCl9LHRvdWNoU3RhcnQ6ZnVuY3Rpb24oZSl7dGhpcy56b29tLmVuYWJsZWQmJnRoaXMuem9vbS5vblRvdWNoU3RhcnQoZSl9LHRvdWNoRW5kOmZ1bmN0aW9uKGUpe3RoaXMuem9vbS5lbmFibGVkJiZ0aGlzLnpvb20ub25Ub3VjaEVuZChlKX0sZG91YmxlVGFwOmZ1bmN0aW9uKGUpe3RoaXMucGFyYW1zLnpvb20uZW5hYmxlZCYmdGhpcy56b29tLmVuYWJsZWQmJnRoaXMucGFyYW1zLnpvb20udG9nZ2xlJiZ0aGlzLnpvb20udG9nZ2xlKGUpfSx0cmFuc2l0aW9uRW5kOmZ1bmN0aW9uKCl7dGhpcy56b29tLmVuYWJsZWQmJnRoaXMucGFyYW1zLnpvb20uZW5hYmxlZCYmdGhpcy56b29tLm9uVHJhbnNpdGlvbkVuZCgpfX19LHtuYW1lOlwibGF6eVwiLHBhcmFtczp7bGF6eTp7ZW5hYmxlZDohMSxsb2FkUHJldk5leHQ6ITEsbG9hZFByZXZOZXh0QW1vdW50OjEsbG9hZE9uVHJhbnNpdGlvblN0YXJ0OiExLGVsZW1lbnRDbGFzczpcInN3aXBlci1sYXp5XCIsbG9hZGluZ0NsYXNzOlwic3dpcGVyLWxhenktbG9hZGluZ1wiLGxvYWRlZENsYXNzOlwic3dpcGVyLWxhenktbG9hZGVkXCIscHJlbG9hZGVyQ2xhc3M6XCJzd2lwZXItbGF6eS1wcmVsb2FkZXJcIn19LGNyZWF0ZTpmdW5jdGlvbigpe2wuZXh0ZW5kKHRoaXMse2xhenk6e2luaXRpYWxJbWFnZUxvYWRlZDohMSxsb2FkOnEubG9hZC5iaW5kKHRoaXMpLGxvYWRJblNsaWRlOnEubG9hZEluU2xpZGUuYmluZCh0aGlzKX19KX0sb246e2JlZm9yZUluaXQ6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5sYXp5LmVuYWJsZWQmJnRoaXMucGFyYW1zLnByZWxvYWRJbWFnZXMmJih0aGlzLnBhcmFtcy5wcmVsb2FkSW1hZ2VzPSExKX0saW5pdDpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmxhenkuZW5hYmxlZCYmIXRoaXMucGFyYW1zLmxvb3AmJjA9PT10aGlzLnBhcmFtcy5pbml0aWFsU2xpZGUmJnRoaXMubGF6eS5sb2FkKCl9LHNjcm9sbDpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmZyZWVNb2RlJiYhdGhpcy5wYXJhbXMuZnJlZU1vZGVTdGlja3kmJnRoaXMubGF6eS5sb2FkKCl9LHJlc2l6ZTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmxhenkuZW5hYmxlZCYmdGhpcy5sYXp5LmxvYWQoKX0sc2Nyb2xsYmFyRHJhZ01vdmU6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5sYXp5LmVuYWJsZWQmJnRoaXMubGF6eS5sb2FkKCl9LHRyYW5zaXRpb25TdGFydDpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmxhenkuZW5hYmxlZCYmKHRoaXMucGFyYW1zLmxhenkubG9hZE9uVHJhbnNpdGlvblN0YXJ0fHwhdGhpcy5wYXJhbXMubGF6eS5sb2FkT25UcmFuc2l0aW9uU3RhcnQmJiF0aGlzLmxhenkuaW5pdGlhbEltYWdlTG9hZGVkKSYmdGhpcy5sYXp5LmxvYWQoKX0sdHJhbnNpdGlvbkVuZDpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmxhenkuZW5hYmxlZCYmIXRoaXMucGFyYW1zLmxhenkubG9hZE9uVHJhbnNpdGlvblN0YXJ0JiZ0aGlzLmxhenkubG9hZCgpfX19LHtuYW1lOlwiY29udHJvbGxlclwiLHBhcmFtczp7Y29udHJvbGxlcjp7Y29udHJvbDp2b2lkIDAsaW52ZXJzZTohMSxieTpcInNsaWRlXCJ9fSxjcmVhdGU6ZnVuY3Rpb24oKXtsLmV4dGVuZCh0aGlzLHtjb250cm9sbGVyOntjb250cm9sOnRoaXMucGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbCxnZXRJbnRlcnBvbGF0ZUZ1bmN0aW9uOksuZ2V0SW50ZXJwb2xhdGVGdW5jdGlvbi5iaW5kKHRoaXMpLHNldFRyYW5zbGF0ZTpLLnNldFRyYW5zbGF0ZS5iaW5kKHRoaXMpLHNldFRyYW5zaXRpb246Sy5zZXRUcmFuc2l0aW9uLmJpbmQodGhpcyl9fSl9LG9uOnt1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRyb2xsZXIuY29udHJvbCYmdGhpcy5jb250cm9sbGVyLnNwbGluZSYmKHRoaXMuY29udHJvbGxlci5zcGxpbmU9dm9pZCAwLGRlbGV0ZSB0aGlzLmNvbnRyb2xsZXIuc3BsaW5lKX0scmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5jb250cm9sbGVyLmNvbnRyb2wmJnRoaXMuY29udHJvbGxlci5zcGxpbmUmJih0aGlzLmNvbnRyb2xsZXIuc3BsaW5lPXZvaWQgMCxkZWxldGUgdGhpcy5jb250cm9sbGVyLnNwbGluZSl9LG9ic2VydmVyVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb250cm9sbGVyLmNvbnRyb2wmJnRoaXMuY29udHJvbGxlci5zcGxpbmUmJih0aGlzLmNvbnRyb2xsZXIuc3BsaW5lPXZvaWQgMCxkZWxldGUgdGhpcy5jb250cm9sbGVyLnNwbGluZSl9LHNldFRyYW5zbGF0ZTpmdW5jdGlvbihlLHQpe3RoaXMuY29udHJvbGxlci5jb250cm9sJiZ0aGlzLmNvbnRyb2xsZXIuc2V0VHJhbnNsYXRlKGUsdCl9LHNldFRyYW5zaXRpb246ZnVuY3Rpb24oZSx0KXt0aGlzLmNvbnRyb2xsZXIuY29udHJvbCYmdGhpcy5jb250cm9sbGVyLnNldFRyYW5zaXRpb24oZSx0KX19fSx7bmFtZTpcImExMXlcIixwYXJhbXM6e2ExMXk6e2VuYWJsZWQ6ITEsbm90aWZpY2F0aW9uQ2xhc3M6XCJzd2lwZXItbm90aWZpY2F0aW9uXCIscHJldlNsaWRlTWVzc2FnZTpcIlByZXZpb3VzIHNsaWRlXCIsbmV4dFNsaWRlTWVzc2FnZTpcIk5leHQgc2xpZGVcIixmaXJzdFNsaWRlTWVzc2FnZTpcIlRoaXMgaXMgdGhlIGZpcnN0IHNsaWRlXCIsbGFzdFNsaWRlTWVzc2FnZTpcIlRoaXMgaXMgdGhlIGxhc3Qgc2xpZGVcIixwYWdpbmF0aW9uQnVsbGV0TWVzc2FnZTpcIkdvIHRvIHNsaWRlIHt7aW5kZXh9fVwifX0sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztsLmV4dGVuZChlLHthMTF5OntsaXZlUmVnaW9uOnQoJzxzcGFuIGNsYXNzPVwiJytlLnBhcmFtcy5hMTF5Lm5vdGlmaWNhdGlvbkNsYXNzKydcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIj48L3NwYW4+Jyl9fSksT2JqZWN0LmtleXMoVSkuZm9yRWFjaChmdW5jdGlvbih0KXtlLmExMXlbdF09VVt0XS5iaW5kKGUpfSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMuYTExeS5lbmFibGVkJiYodGhpcy5hMTF5LmluaXQoKSx0aGlzLmExMXkudXBkYXRlTmF2aWdhdGlvbigpKX0sdG9FZGdlOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMuYTExeS5lbmFibGVkJiZ0aGlzLmExMXkudXBkYXRlTmF2aWdhdGlvbigpfSxmcm9tRWRnZTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmExMXkuZW5hYmxlZCYmdGhpcy5hMTF5LnVwZGF0ZU5hdmlnYXRpb24oKX0scGFnaW5hdGlvblVwZGF0ZTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmExMXkuZW5hYmxlZCYmdGhpcy5hMTF5LnVwZGF0ZVBhZ2luYXRpb24oKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMucGFyYW1zLmExMXkuZW5hYmxlZCYmdGhpcy5hMTF5LmRlc3Ryb3koKX19fSx7bmFtZTpcImhpc3RvcnlcIixwYXJhbXM6e2hpc3Rvcnk6e2VuYWJsZWQ6ITEscmVwbGFjZVN0YXRlOiExLGtleTpcInNsaWRlc1wifX0sY3JlYXRlOmZ1bmN0aW9uKCl7bC5leHRlbmQodGhpcyx7aGlzdG9yeTp7aW5pdDpfLmluaXQuYmluZCh0aGlzKSxzZXRIaXN0b3J5Ol8uc2V0SGlzdG9yeS5iaW5kKHRoaXMpLHNldEhpc3RvcnlQb3BTdGF0ZTpfLnNldEhpc3RvcnlQb3BTdGF0ZS5iaW5kKHRoaXMpLHNjcm9sbFRvU2xpZGU6Xy5zY3JvbGxUb1NsaWRlLmJpbmQodGhpcyksZGVzdHJveTpfLmRlc3Ryb3kuYmluZCh0aGlzKX19KX0sb246e2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQmJnRoaXMuaGlzdG9yeS5pbml0KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQmJnRoaXMuaGlzdG9yeS5kZXN0cm95KCl9LHRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24oKXt0aGlzLmhpc3RvcnkuaW5pdGlhbGl6ZWQmJnRoaXMuaGlzdG9yeS5zZXRIaXN0b3J5KHRoaXMucGFyYW1zLmhpc3Rvcnkua2V5LHRoaXMuYWN0aXZlSW5kZXgpfX19LHtuYW1lOlwiaGFzaC1uYXZpZ2F0aW9uXCIscGFyYW1zOntoYXNoTmF2aWdhdGlvbjp7ZW5hYmxlZDohMSxyZXBsYWNlU3RhdGU6ITEsd2F0Y2hTdGF0ZTohMX19LGNyZWF0ZTpmdW5jdGlvbigpe2wuZXh0ZW5kKHRoaXMse2hhc2hOYXZpZ2F0aW9uOntpbml0aWFsaXplZDohMSxpbml0OlouaW5pdC5iaW5kKHRoaXMpLGRlc3Ryb3k6Wi5kZXN0cm95LmJpbmQodGhpcyksc2V0SGFzaDpaLnNldEhhc2guYmluZCh0aGlzKSxvbkhhc2hDYW5nZTpaLm9uSGFzaENhbmdlLmJpbmQodGhpcyl9fSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCYmdGhpcy5oYXNoTmF2aWdhdGlvbi5pbml0KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5lbmFibGVkJiZ0aGlzLmhhc2hOYXZpZ2F0aW9uLmRlc3Ryb3koKX0sdHJhbnNpdGlvbkVuZDpmdW5jdGlvbigpe3RoaXMuaGFzaE5hdmlnYXRpb24uaW5pdGlhbGl6ZWQmJnRoaXMuaGFzaE5hdmlnYXRpb24uc2V0SGFzaCgpfX19LHtuYW1lOlwiYXV0b3BsYXlcIixwYXJhbXM6e2F1dG9wbGF5OntlbmFibGVkOiExLGRlbGF5OjNlMyx3YWl0Rm9yVHJhbnNpdGlvbjohMCxkaXNhYmxlT25JbnRlcmFjdGlvbjohMCxzdG9wT25MYXN0U2xpZGU6ITEscmV2ZXJzZURpcmVjdGlvbjohMX19LGNyZWF0ZTpmdW5jdGlvbigpe2wuZXh0ZW5kKHRoaXMse2F1dG9wbGF5OntydW5uaW5nOiExLHBhdXNlZDohMSxydW46US5ydW4uYmluZCh0aGlzKSxzdGFydDpRLnN0YXJ0LmJpbmQodGhpcyksc3RvcDpRLnN0b3AuYmluZCh0aGlzKSxwYXVzZTpRLnBhdXNlLmJpbmQodGhpcyl9fSl9LG9uOntpbml0OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXMuYXV0b3BsYXkuZW5hYmxlZCYmdGhpcy5hdXRvcGxheS5zdGFydCgpfSxiZWZvcmVUcmFuc2l0aW9uU3RhcnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmF1dG9wbGF5LnJ1bm5pbmcmJih0fHwhdGhpcy5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24/dGhpcy5hdXRvcGxheS5wYXVzZShlKTp0aGlzLmF1dG9wbGF5LnN0b3AoKSl9LHNsaWRlckZpcnN0TW92ZTpmdW5jdGlvbigpe3RoaXMuYXV0b3BsYXkucnVubmluZyYmKHRoaXMucGFyYW1zLmF1dG9wbGF5LmRpc2FibGVPbkludGVyYWN0aW9uP3RoaXMuYXV0b3BsYXkuc3RvcCgpOnRoaXMuYXV0b3BsYXkucGF1c2UoKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmF1dG9wbGF5LnJ1bm5pbmcmJnRoaXMuYXV0b3BsYXkuc3RvcCgpfX19LHtuYW1lOlwiZWZmZWN0LWZhZGVcIixwYXJhbXM6e2ZhZGVFZmZlY3Q6e2Nyb3NzRmFkZTohMX19LGNyZWF0ZTpmdW5jdGlvbigpe2wuZXh0ZW5kKHRoaXMse2ZhZGVFZmZlY3Q6e3NldFRyYW5zbGF0ZTpKLnNldFRyYW5zbGF0ZS5iaW5kKHRoaXMpLHNldFRyYW5zaXRpb246Si5zZXRUcmFuc2l0aW9uLmJpbmQodGhpcyl9fSl9LG9uOntiZWZvcmVJbml0OmZ1bmN0aW9uKCl7aWYoXCJmYWRlXCI9PT10aGlzLnBhcmFtcy5lZmZlY3Qpe3RoaXMuY2xhc3NOYW1lcy5wdXNoKHRoaXMucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJmYWRlXCIpO3ZhciBlPXtzbGlkZXNQZXJWaWV3OjEsc2xpZGVzUGVyQ29sdW1uOjEsc2xpZGVzUGVyR3JvdXA6MSx3YXRjaFNsaWRlc1Byb2dyZXNzOiEwLHNwYWNlQmV0d2VlbjowLHZpcnR1YWxUcmFuc2xhdGU6ITB9O2wuZXh0ZW5kKHRoaXMucGFyYW1zLGUpLGwuZXh0ZW5kKHRoaXMub3JpZ2luYWxQYXJhbXMsZSl9fSxzZXRUcmFuc2xhdGU6ZnVuY3Rpb24oKXtcImZhZGVcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmdGhpcy5mYWRlRWZmZWN0LnNldFRyYW5zbGF0ZSgpfSxzZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe1wiZmFkZVwiPT09dGhpcy5wYXJhbXMuZWZmZWN0JiZ0aGlzLmZhZGVFZmZlY3Quc2V0VHJhbnNpdGlvbihlKX19fSx7bmFtZTpcImVmZmVjdC1jdWJlXCIscGFyYW1zOntjdWJlRWZmZWN0OntzbGlkZVNoYWRvd3M6ITAsc2hhZG93OiEwLHNoYWRvd09mZnNldDoyMCxzaGFkb3dTY2FsZTouOTR9fSxjcmVhdGU6ZnVuY3Rpb24oKXtsLmV4dGVuZCh0aGlzLHtjdWJlRWZmZWN0OntzZXRUcmFuc2xhdGU6ZWUuc2V0VHJhbnNsYXRlLmJpbmQodGhpcyksc2V0VHJhbnNpdGlvbjplZS5zZXRUcmFuc2l0aW9uLmJpbmQodGhpcyl9fSl9LG9uOntiZWZvcmVJbml0OmZ1bmN0aW9uKCl7aWYoXCJjdWJlXCI9PT10aGlzLnBhcmFtcy5lZmZlY3Qpe3RoaXMuY2xhc3NOYW1lcy5wdXNoKHRoaXMucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJjdWJlXCIpLHRoaXMuY2xhc3NOYW1lcy5wdXNoKHRoaXMucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCIzZFwiKTt2YXIgZT17c2xpZGVzUGVyVmlldzoxLHNsaWRlc1BlckNvbHVtbjoxLHNsaWRlc1Blckdyb3VwOjEsd2F0Y2hTbGlkZXNQcm9ncmVzczohMCxyZXNpc3RhbmNlUmF0aW86MCxzcGFjZUJldHdlZW46MCxjZW50ZXJlZFNsaWRlczohMSx2aXJ0dWFsVHJhbnNsYXRlOiEwfTtsLmV4dGVuZCh0aGlzLnBhcmFtcyxlKSxsLmV4dGVuZCh0aGlzLm9yaWdpbmFsUGFyYW1zLGUpfX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7XCJjdWJlXCI9PT10aGlzLnBhcmFtcy5lZmZlY3QmJnRoaXMuY3ViZUVmZmVjdC5zZXRUcmFuc2xhdGUoKX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlKXtcImN1YmVcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmdGhpcy5jdWJlRWZmZWN0LnNldFRyYW5zaXRpb24oZSl9fX0se25hbWU6XCJlZmZlY3QtZmxpcFwiLHBhcmFtczp7ZmxpcEVmZmVjdDp7c2xpZGVTaGFkb3dzOiEwLGxpbWl0Um90YXRpb246ITB9fSxjcmVhdGU6ZnVuY3Rpb24oKXtsLmV4dGVuZCh0aGlzLHtmbGlwRWZmZWN0OntzZXRUcmFuc2xhdGU6dGUuc2V0VHJhbnNsYXRlLmJpbmQodGhpcyksc2V0VHJhbnNpdGlvbjp0ZS5zZXRUcmFuc2l0aW9uLmJpbmQodGhpcyl9fSl9LG9uOntiZWZvcmVJbml0OmZ1bmN0aW9uKCl7aWYoXCJmbGlwXCI9PT10aGlzLnBhcmFtcy5lZmZlY3Qpe3RoaXMuY2xhc3NOYW1lcy5wdXNoKHRoaXMucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJmbGlwXCIpLHRoaXMuY2xhc3NOYW1lcy5wdXNoKHRoaXMucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCIzZFwiKTt2YXIgZT17c2xpZGVzUGVyVmlldzoxLHNsaWRlc1BlckNvbHVtbjoxLHNsaWRlc1Blckdyb3VwOjEsd2F0Y2hTbGlkZXNQcm9ncmVzczohMCxzcGFjZUJldHdlZW46MCx2aXJ0dWFsVHJhbnNsYXRlOiEwfTtsLmV4dGVuZCh0aGlzLnBhcmFtcyxlKSxsLmV4dGVuZCh0aGlzLm9yaWdpbmFsUGFyYW1zLGUpfX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7XCJmbGlwXCI9PT10aGlzLnBhcmFtcy5lZmZlY3QmJnRoaXMuZmxpcEVmZmVjdC5zZXRUcmFuc2xhdGUoKX0sc2V0VHJhbnNpdGlvbjpmdW5jdGlvbihlKXtcImZsaXBcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmdGhpcy5mbGlwRWZmZWN0LnNldFRyYW5zaXRpb24oZSl9fX0se25hbWU6XCJlZmZlY3QtY292ZXJmbG93XCIscGFyYW1zOntjb3ZlcmZsb3dFZmZlY3Q6e3JvdGF0ZTo1MCxzdHJldGNoOjAsZGVwdGg6MTAwLG1vZGlmaWVyOjEsc2xpZGVTaGFkb3dzOiEwfX0sY3JlYXRlOmZ1bmN0aW9uKCl7bC5leHRlbmQodGhpcyx7Y292ZXJmbG93RWZmZWN0OntzZXRUcmFuc2xhdGU6aWUuc2V0VHJhbnNsYXRlLmJpbmQodGhpcyksc2V0VHJhbnNpdGlvbjppZS5zZXRUcmFuc2l0aW9uLmJpbmQodGhpcyl9fSl9LG9uOntiZWZvcmVJbml0OmZ1bmN0aW9uKCl7XCJjb3ZlcmZsb3dcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmKHRoaXMuY2xhc3NOYW1lcy5wdXNoKHRoaXMucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MrXCJjb3ZlcmZsb3dcIiksdGhpcy5jbGFzc05hbWVzLnB1c2godGhpcy5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcytcIjNkXCIpLHRoaXMucGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3M9ITAsdGhpcy5vcmlnaW5hbFBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzPSEwKX0sc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKCl7XCJjb3ZlcmZsb3dcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmdGhpcy5jb3ZlcmZsb3dFZmZlY3Quc2V0VHJhbnNsYXRlKCl9LHNldFRyYW5zaXRpb246ZnVuY3Rpb24oZSl7XCJjb3ZlcmZsb3dcIj09PXRoaXMucGFyYW1zLmVmZmVjdCYmdGhpcy5jb3ZlcmZsb3dFZmZlY3Quc2V0VHJhbnNpdGlvbihlKX19fV07cmV0dXJuIHZvaWQgMD09PWsudXNlJiYoay51c2U9ay5DbGFzcy51c2Usay5pbnN0YWxsTW9kdWxlPWsuQ2xhc3MuaW5zdGFsbE1vZHVsZSksay51c2Uoc2UpLGt9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXBlci5taW4uanMubWFwXG4iLCIvKiFcbiAgKiBCb290c3RyYXAgdjQuMC4wIChodHRwczovL2dldGJvb3RzdHJhcC5jb20pXG4gICogQ29weXJpZ2h0IDIwMTEtMjAxOCBUaGUgQm9vdHN0cmFwIEF1dGhvcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ncmFwaHMvY29udHJpYnV0b3JzKVxuICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gICovXG4hZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9lKGV4cG9ydHMscmVxdWlyZShcImpxdWVyeVwiKSxyZXF1aXJlKFwicG9wcGVyLmpzXCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIixcImpxdWVyeVwiLFwicG9wcGVyLmpzXCJdLGUpOmUodC5ib290c3RyYXA9e30sdC5qUXVlcnksdC5Qb3BwZXIpfSh0aGlzLGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1mdW5jdGlvbiBzKHQsZSxuKXtyZXR1cm4gZSYmaSh0LnByb3RvdHlwZSxlKSxuJiZpKHQsbiksdH1mdW5jdGlvbiByKCl7cmV0dXJuKHI9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49YXJndW1lbnRzW2VdO2Zvcih2YXIgaSBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYodFtpXT1uW2ldKX1yZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1lPWUmJmUuaGFzT3duUHJvcGVydHkoXCJkZWZhdWx0XCIpP2UuZGVmYXVsdDplLG49biYmbi5oYXNPd25Qcm9wZXJ0eShcImRlZmF1bHRcIik/bi5kZWZhdWx0Om47dmFyIG8sYSxsLGgsYyx1LGYsZCxfLGcscCxtLHYsRSxULHksQyxJLEEsYixELFMsdyxOLE8sayxQPWZ1bmN0aW9uKHQpe3ZhciBlPSExO2Z1bmN0aW9uIG4oZSl7dmFyIG49dGhpcyxzPSExO3JldHVybiB0KHRoaXMpLm9uZShpLlRSQU5TSVRJT05fRU5ELGZ1bmN0aW9uKCl7cz0hMH0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzfHxpLnRyaWdnZXJUcmFuc2l0aW9uRW5kKG4pfSxlKSx0aGlzfXZhciBpPXtUUkFOU0lUSU9OX0VORDpcImJzVHJhbnNpdGlvbkVuZFwiLGdldFVJRDpmdW5jdGlvbih0KXtkb3t0Kz1+figxZTYqTWF0aC5yYW5kb20oKSl9d2hpbGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkpO3JldHVybiB0fSxnZXRTZWxlY3RvckZyb21FbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciBuLGk9ZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRhcmdldFwiKTtpJiZcIiNcIiE9PWl8fChpPWUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKXx8XCJcIiksXCIjXCI9PT1pLmNoYXJBdCgwKSYmKG49aSxpPW49XCJmdW5jdGlvblwiPT10eXBlb2YgdC5lc2NhcGVTZWxlY3Rvcj90LmVzY2FwZVNlbGVjdG9yKG4pLnN1YnN0cigxKTpuLnJlcGxhY2UoLyg6fFxcLnxcXFt8XFxdfCx8PXxAKS9nLFwiXFxcXCQxXCIpKTt0cnl7cmV0dXJuIHQoZG9jdW1lbnQpLmZpbmQoaSkubGVuZ3RoPjA/aTpudWxsfWNhdGNoKHQpe3JldHVybiBudWxsfX0scmVmbG93OmZ1bmN0aW9uKHQpe3JldHVybiB0Lm9mZnNldEhlaWdodH0sdHJpZ2dlclRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24obil7dChuKS50cmlnZ2VyKGUuZW5kKX0sc3VwcG9ydHNUcmFuc2l0aW9uRW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4oZSl9LGlzRWxlbWVudDpmdW5jdGlvbih0KXtyZXR1cm4odFswXXx8dCkubm9kZVR5cGV9LHR5cGVDaGVja0NvbmZpZzpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBzIGluIG4paWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4scykpe3ZhciByPW5bc10sbz1lW3NdLGE9byYmaS5pc0VsZW1lbnQobyk/XCJlbGVtZW50XCI6KGw9byx7fS50b1N0cmluZy5jYWxsKGwpLm1hdGNoKC9cXHMoW2EtekEtWl0rKS8pWzFdLnRvTG93ZXJDYXNlKCkpO2lmKCFuZXcgUmVnRXhwKHIpLnRlc3QoYSkpdGhyb3cgbmV3IEVycm9yKHQudG9VcHBlckNhc2UoKSsnOiBPcHRpb24gXCInK3MrJ1wiIHByb3ZpZGVkIHR5cGUgXCInK2ErJ1wiIGJ1dCBleHBlY3RlZCB0eXBlIFwiJytyKydcIi4nKX12YXIgbH19O3JldHVybiBlPShcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93fHwhd2luZG93LlFVbml0KSYme2VuZDpcInRyYW5zaXRpb25lbmRcIn0sdC5mbi5lbXVsYXRlVHJhbnNpdGlvbkVuZD1uLGkuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJih0LmV2ZW50LnNwZWNpYWxbaS5UUkFOU0lUSU9OX0VORF09e2JpbmRUeXBlOmUuZW5kLGRlbGVnYXRlVHlwZTplLmVuZCxoYW5kbGU6ZnVuY3Rpb24oZSl7aWYodChlLnRhcmdldCkuaXModGhpcykpcmV0dXJuIGUuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pLGl9KGUpLEw9KGE9XCJhbGVydFwiLGg9XCIuXCIrKGw9XCJicy5hbGVydFwiKSxjPShvPWUpLmZuW2FdLHU9e0NMT1NFOlwiY2xvc2VcIitoLENMT1NFRDpcImNsb3NlZFwiK2gsQ0xJQ0tfREFUQV9BUEk6XCJjbGlja1wiK2grXCIuZGF0YS1hcGlcIn0sZj1cImFsZXJ0XCIsZD1cImZhZGVcIixfPVwic2hvd1wiLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuX2VsZW1lbnQ9dH12YXIgZT10LnByb3RvdHlwZTtyZXR1cm4gZS5jbG9zZT1mdW5jdGlvbih0KXt0PXR8fHRoaXMuX2VsZW1lbnQ7dmFyIGU9dGhpcy5fZ2V0Um9vdEVsZW1lbnQodCk7dGhpcy5fdHJpZ2dlckNsb3NlRXZlbnQoZSkuaXNEZWZhdWx0UHJldmVudGVkKCl8fHRoaXMuX3JlbW92ZUVsZW1lbnQoZSl9LGUuZGlzcG9zZT1mdW5jdGlvbigpe28ucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LGwpLHRoaXMuX2VsZW1lbnQ9bnVsbH0sZS5fZ2V0Um9vdEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9UC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHQpLG49ITE7cmV0dXJuIGUmJihuPW8oZSlbMF0pLG58fChuPW8odCkuY2xvc2VzdChcIi5cIitmKVswXSksbn0sZS5fdHJpZ2dlckNsb3NlRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9by5FdmVudCh1LkNMT1NFKTtyZXR1cm4gbyh0KS50cmlnZ2VyKGUpLGV9LGUuX3JlbW92ZUVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztvKHQpLnJlbW92ZUNsYXNzKF8pLFAuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJm8odCkuaGFzQ2xhc3MoZCk/byh0KS5vbmUoUC5UUkFOU0lUSU9OX0VORCxmdW5jdGlvbihuKXtyZXR1cm4gZS5fZGVzdHJveUVsZW1lbnQodCxuKX0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6dGhpcy5fZGVzdHJveUVsZW1lbnQodCl9LGUuX2Rlc3Ryb3lFbGVtZW50PWZ1bmN0aW9uKHQpe28odCkuZGV0YWNoKCkudHJpZ2dlcih1LkNMT1NFRCkucmVtb3ZlKCl9LHQuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49byh0aGlzKSxpPW4uZGF0YShsKTtpfHwoaT1uZXcgdCh0aGlzKSxuLmRhdGEobCxpKSksXCJjbG9zZVwiPT09ZSYmaVtlXSh0aGlzKX0pfSx0Ll9oYW5kbGVEaXNtaXNzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtlJiZlLnByZXZlbnREZWZhdWx0KCksdC5jbG9zZSh0aGlzKX19LHModCxudWxsLFt7a2V5OlwiVkVSU0lPTlwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiNC4wLjBcIn19XSksdH0oKSxvKGRvY3VtZW50KS5vbih1LkNMSUNLX0RBVEFfQVBJLCdbZGF0YS1kaXNtaXNzPVwiYWxlcnRcIl0nLGcuX2hhbmRsZURpc21pc3MobmV3IGcpKSxvLmZuW2FdPWcuX2pRdWVyeUludGVyZmFjZSxvLmZuW2FdLkNvbnN0cnVjdG9yPWcsby5mblthXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIG8uZm5bYV09YyxnLl9qUXVlcnlJbnRlcmZhY2V9LGcpLFI9KG09XCJidXR0b25cIixFPVwiLlwiKyh2PVwiYnMuYnV0dG9uXCIpLFQ9XCIuZGF0YS1hcGlcIix5PShwPWUpLmZuW21dLEM9XCJhY3RpdmVcIixJPVwiYnRuXCIsQT1cImZvY3VzXCIsYj0nW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsRD0nW2RhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiXScsUz1cImlucHV0XCIsdz1cIi5hY3RpdmVcIixOPVwiLmJ0blwiLE89e0NMSUNLX0RBVEFfQVBJOlwiY2xpY2tcIitFK1QsRk9DVVNfQkxVUl9EQVRBX0FQSTpcImZvY3VzXCIrRStUK1wiIGJsdXJcIitFK1R9LGs9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuX2VsZW1lbnQ9dH12YXIgZT10LnByb3RvdHlwZTtyZXR1cm4gZS50b2dnbGU9ZnVuY3Rpb24oKXt2YXIgdD0hMCxlPSEwLG49cCh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KEQpWzBdO2lmKG4pe3ZhciBpPXAodGhpcy5fZWxlbWVudCkuZmluZChTKVswXTtpZihpKXtpZihcInJhZGlvXCI9PT1pLnR5cGUpaWYoaS5jaGVja2VkJiZwKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKEMpKXQ9ITE7ZWxzZXt2YXIgcz1wKG4pLmZpbmQodylbMF07cyYmcChzKS5yZW1vdmVDbGFzcyhDKX1pZih0KXtpZihpLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfHxuLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfHxpLmNsYXNzTGlzdC5jb250YWlucyhcImRpc2FibGVkXCIpfHxuLmNsYXNzTGlzdC5jb250YWlucyhcImRpc2FibGVkXCIpKXJldHVybjtpLmNoZWNrZWQ9IXAodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQykscChpKS50cmlnZ2VyKFwiY2hhbmdlXCIpfWkuZm9jdXMoKSxlPSExfX1lJiZ0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtcHJlc3NlZFwiLCFwKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKEMpKSx0JiZwKHRoaXMuX2VsZW1lbnQpLnRvZ2dsZUNsYXNzKEMpfSxlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtwLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCx2KSx0aGlzLl9lbGVtZW50PW51bGx9LHQuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49cCh0aGlzKS5kYXRhKHYpO258fChuPW5ldyB0KHRoaXMpLHAodGhpcykuZGF0YSh2LG4pKSxcInRvZ2dsZVwiPT09ZSYmbltlXSgpfSl9LHModCxudWxsLFt7a2V5OlwiVkVSU0lPTlwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiNC4wLjBcIn19XSksdH0oKSxwKGRvY3VtZW50KS5vbihPLkNMSUNLX0RBVEFfQVBJLGIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPXQudGFyZ2V0O3AoZSkuaGFzQ2xhc3MoSSl8fChlPXAoZSkuY2xvc2VzdChOKSksay5falF1ZXJ5SW50ZXJmYWNlLmNhbGwocChlKSxcInRvZ2dsZVwiKX0pLm9uKE8uRk9DVVNfQkxVUl9EQVRBX0FQSSxiLGZ1bmN0aW9uKHQpe3ZhciBlPXAodC50YXJnZXQpLmNsb3Nlc3QoTilbMF07cChlKS50b2dnbGVDbGFzcyhBLC9eZm9jdXMoaW4pPyQvLnRlc3QodC50eXBlKSl9KSxwLmZuW21dPWsuX2pRdWVyeUludGVyZmFjZSxwLmZuW21dLkNvbnN0cnVjdG9yPWsscC5mblttXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHAuZm5bbV09eSxrLl9qUXVlcnlJbnRlcmZhY2V9LGspLGo9ZnVuY3Rpb24odCl7dmFyIGU9XCJjYXJvdXNlbFwiLG49XCJicy5jYXJvdXNlbFwiLGk9XCIuXCIrbixvPXQuZm5bZV0sYT17aW50ZXJ2YWw6NWUzLGtleWJvYXJkOiEwLHNsaWRlOiExLHBhdXNlOlwiaG92ZXJcIix3cmFwOiEwfSxsPXtpbnRlcnZhbDpcIihudW1iZXJ8Ym9vbGVhbilcIixrZXlib2FyZDpcImJvb2xlYW5cIixzbGlkZTpcIihib29sZWFufHN0cmluZylcIixwYXVzZTpcIihzdHJpbmd8Ym9vbGVhbilcIix3cmFwOlwiYm9vbGVhblwifSxoPVwibmV4dFwiLGM9XCJwcmV2XCIsdT1cImxlZnRcIixmPVwicmlnaHRcIixkPXtTTElERTpcInNsaWRlXCIraSxTTElEOlwic2xpZFwiK2ksS0VZRE9XTjpcImtleWRvd25cIitpLE1PVVNFRU5URVI6XCJtb3VzZWVudGVyXCIraSxNT1VTRUxFQVZFOlwibW91c2VsZWF2ZVwiK2ksVE9VQ0hFTkQ6XCJ0b3VjaGVuZFwiK2ksTE9BRF9EQVRBX0FQSTpcImxvYWRcIitpK1wiLmRhdGEtYXBpXCIsQ0xJQ0tfREFUQV9BUEk6XCJjbGlja1wiK2krXCIuZGF0YS1hcGlcIn0sXz1cImNhcm91c2VsXCIsZz1cImFjdGl2ZVwiLHA9XCJzbGlkZVwiLG09XCJjYXJvdXNlbC1pdGVtLXJpZ2h0XCIsdj1cImNhcm91c2VsLWl0ZW0tbGVmdFwiLEU9XCJjYXJvdXNlbC1pdGVtLW5leHRcIixUPVwiY2Fyb3VzZWwtaXRlbS1wcmV2XCIseT17QUNUSVZFOlwiLmFjdGl2ZVwiLEFDVElWRV9JVEVNOlwiLmFjdGl2ZS5jYXJvdXNlbC1pdGVtXCIsSVRFTTpcIi5jYXJvdXNlbC1pdGVtXCIsTkVYVF9QUkVWOlwiLmNhcm91c2VsLWl0ZW0tbmV4dCwgLmNhcm91c2VsLWl0ZW0tcHJldlwiLElORElDQVRPUlM6XCIuY2Fyb3VzZWwtaW5kaWNhdG9yc1wiLERBVEFfU0xJREU6XCJbZGF0YS1zbGlkZV0sIFtkYXRhLXNsaWRlLXRvXVwiLERBVEFfUklERTonW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJ30sQz1mdW5jdGlvbigpe2Z1bmN0aW9uIG8oZSxuKXt0aGlzLl9pdGVtcz1udWxsLHRoaXMuX2ludGVydmFsPW51bGwsdGhpcy5fYWN0aXZlRWxlbWVudD1udWxsLHRoaXMuX2lzUGF1c2VkPSExLHRoaXMuX2lzU2xpZGluZz0hMSx0aGlzLnRvdWNoVGltZW91dD1udWxsLHRoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcobiksdGhpcy5fZWxlbWVudD10KGUpWzBdLHRoaXMuX2luZGljYXRvcnNFbGVtZW50PXQodGhpcy5fZWxlbWVudCkuZmluZCh5LklORElDQVRPUlMpWzBdLHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCl9dmFyIEM9by5wcm90b3R5cGU7cmV0dXJuIEMubmV4dD1mdW5jdGlvbigpe3RoaXMuX2lzU2xpZGluZ3x8dGhpcy5fc2xpZGUoaCl9LEMubmV4dFdoZW5WaXNpYmxlPWZ1bmN0aW9uKCl7IWRvY3VtZW50LmhpZGRlbiYmdCh0aGlzLl9lbGVtZW50KS5pcyhcIjp2aXNpYmxlXCIpJiZcImhpZGRlblwiIT09dCh0aGlzLl9lbGVtZW50KS5jc3MoXCJ2aXNpYmlsaXR5XCIpJiZ0aGlzLm5leHQoKX0sQy5wcmV2PWZ1bmN0aW9uKCl7dGhpcy5faXNTbGlkaW5nfHx0aGlzLl9zbGlkZShjKX0sQy5wYXVzZT1mdW5jdGlvbihlKXtlfHwodGhpcy5faXNQYXVzZWQ9ITApLHQodGhpcy5fZWxlbWVudCkuZmluZCh5Lk5FWFRfUFJFVilbMF0mJlAuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJihQLnRyaWdnZXJUcmFuc2l0aW9uRW5kKHRoaXMuX2VsZW1lbnQpLHRoaXMuY3ljbGUoITApKSxjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKSx0aGlzLl9pbnRlcnZhbD1udWxsfSxDLmN5Y2xlPWZ1bmN0aW9uKHQpe3R8fCh0aGlzLl9pc1BhdXNlZD0hMSksdGhpcy5faW50ZXJ2YWwmJihjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKSx0aGlzLl9pbnRlcnZhbD1udWxsKSx0aGlzLl9jb25maWcuaW50ZXJ2YWwmJiF0aGlzLl9pc1BhdXNlZCYmKHRoaXMuX2ludGVydmFsPXNldEludGVydmFsKChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGU/dGhpcy5uZXh0V2hlblZpc2libGU6dGhpcy5uZXh0KS5iaW5kKHRoaXMpLHRoaXMuX2NvbmZpZy5pbnRlcnZhbCkpfSxDLnRvPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7dGhpcy5fYWN0aXZlRWxlbWVudD10KHRoaXMuX2VsZW1lbnQpLmZpbmQoeS5BQ1RJVkVfSVRFTSlbMF07dmFyIGk9dGhpcy5fZ2V0SXRlbUluZGV4KHRoaXMuX2FjdGl2ZUVsZW1lbnQpO2lmKCEoZT50aGlzLl9pdGVtcy5sZW5ndGgtMXx8ZTwwKSlpZih0aGlzLl9pc1NsaWRpbmcpdCh0aGlzLl9lbGVtZW50KS5vbmUoZC5TTElELGZ1bmN0aW9uKCl7cmV0dXJuIG4udG8oZSl9KTtlbHNle2lmKGk9PT1lKXJldHVybiB0aGlzLnBhdXNlKCksdm9pZCB0aGlzLmN5Y2xlKCk7dmFyIHM9ZT5pP2g6Yzt0aGlzLl9zbGlkZShzLHRoaXMuX2l0ZW1zW2VdKX19LEMuZGlzcG9zZT1mdW5jdGlvbigpe3QodGhpcy5fZWxlbWVudCkub2ZmKGkpLHQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LG4pLHRoaXMuX2l0ZW1zPW51bGwsdGhpcy5fY29uZmlnPW51bGwsdGhpcy5fZWxlbWVudD1udWxsLHRoaXMuX2ludGVydmFsPW51bGwsdGhpcy5faXNQYXVzZWQ9bnVsbCx0aGlzLl9pc1NsaWRpbmc9bnVsbCx0aGlzLl9hY3RpdmVFbGVtZW50PW51bGwsdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQ9bnVsbH0sQy5fZ2V0Q29uZmlnPWZ1bmN0aW9uKHQpe3JldHVybiB0PXIoe30sYSx0KSxQLnR5cGVDaGVja0NvbmZpZyhlLHQsbCksdH0sQy5fYWRkRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2NvbmZpZy5rZXlib2FyZCYmdCh0aGlzLl9lbGVtZW50KS5vbihkLktFWURPV04sZnVuY3Rpb24odCl7cmV0dXJuIGUuX2tleWRvd24odCl9KSxcImhvdmVyXCI9PT10aGlzLl9jb25maWcucGF1c2UmJih0KHRoaXMuX2VsZW1lbnQpLm9uKGQuTU9VU0VFTlRFUixmdW5jdGlvbih0KXtyZXR1cm4gZS5wYXVzZSh0KX0pLm9uKGQuTU9VU0VMRUFWRSxmdW5jdGlvbih0KXtyZXR1cm4gZS5jeWNsZSh0KX0pLFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJnQodGhpcy5fZWxlbWVudCkub24oZC5UT1VDSEVORCxmdW5jdGlvbigpe2UucGF1c2UoKSxlLnRvdWNoVGltZW91dCYmY2xlYXJUaW1lb3V0KGUudG91Y2hUaW1lb3V0KSxlLnRvdWNoVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKHQpe3JldHVybiBlLmN5Y2xlKHQpfSw1MDArZS5fY29uZmlnLmludGVydmFsKX0pKX0sQy5fa2V5ZG93bj1mdW5jdGlvbih0KXtpZighL2lucHV0fHRleHRhcmVhL2kudGVzdCh0LnRhcmdldC50YWdOYW1lKSlzd2l0Y2godC53aGljaCl7Y2FzZSAzNzp0LnByZXZlbnREZWZhdWx0KCksdGhpcy5wcmV2KCk7YnJlYWs7Y2FzZSAzOTp0LnByZXZlbnREZWZhdWx0KCksdGhpcy5uZXh0KCl9fSxDLl9nZXRJdGVtSW5kZXg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2l0ZW1zPXQubWFrZUFycmF5KHQoZSkucGFyZW50KCkuZmluZCh5LklURU0pKSx0aGlzLl9pdGVtcy5pbmRleE9mKGUpfSxDLl9nZXRJdGVtQnlEaXJlY3Rpb249ZnVuY3Rpb24odCxlKXt2YXIgbj10PT09aCxpPXQ9PT1jLHM9dGhpcy5fZ2V0SXRlbUluZGV4KGUpLHI9dGhpcy5faXRlbXMubGVuZ3RoLTE7aWYoKGkmJjA9PT1zfHxuJiZzPT09cikmJiF0aGlzLl9jb25maWcud3JhcClyZXR1cm4gZTt2YXIgbz0ocysodD09PWM/LTE6MSkpJXRoaXMuX2l0ZW1zLmxlbmd0aDtyZXR1cm4tMT09PW8/dGhpcy5faXRlbXNbdGhpcy5faXRlbXMubGVuZ3RoLTFdOnRoaXMuX2l0ZW1zW29dfSxDLl90cmlnZ2VyU2xpZGVFdmVudD1mdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMuX2dldEl0ZW1JbmRleChlKSxzPXRoaXMuX2dldEl0ZW1JbmRleCh0KHRoaXMuX2VsZW1lbnQpLmZpbmQoeS5BQ1RJVkVfSVRFTSlbMF0pLHI9dC5FdmVudChkLlNMSURFLHtyZWxhdGVkVGFyZ2V0OmUsZGlyZWN0aW9uOm4sZnJvbTpzLHRvOml9KTtyZXR1cm4gdCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHIpLHJ9LEMuX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpe3QodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpLmZpbmQoeS5BQ1RJVkUpLnJlbW92ZUNsYXNzKGcpO3ZhciBuPXRoaXMuX2luZGljYXRvcnNFbGVtZW50LmNoaWxkcmVuW3RoaXMuX2dldEl0ZW1JbmRleChlKV07biYmdChuKS5hZGRDbGFzcyhnKX19LEMuX3NsaWRlPWZ1bmN0aW9uKGUsbil7dmFyIGkscyxyLG89dGhpcyxhPXQodGhpcy5fZWxlbWVudCkuZmluZCh5LkFDVElWRV9JVEVNKVswXSxsPXRoaXMuX2dldEl0ZW1JbmRleChhKSxjPW58fGEmJnRoaXMuX2dldEl0ZW1CeURpcmVjdGlvbihlLGEpLF89dGhpcy5fZ2V0SXRlbUluZGV4KGMpLEM9Qm9vbGVhbih0aGlzLl9pbnRlcnZhbCk7aWYoZT09PWg/KGk9dixzPUUscj11KTooaT1tLHM9VCxyPWYpLGMmJnQoYykuaGFzQ2xhc3MoZykpdGhpcy5faXNTbGlkaW5nPSExO2Vsc2UgaWYoIXRoaXMuX3RyaWdnZXJTbGlkZUV2ZW50KGMscikuaXNEZWZhdWx0UHJldmVudGVkKCkmJmEmJmMpe3RoaXMuX2lzU2xpZGluZz0hMCxDJiZ0aGlzLnBhdXNlKCksdGhpcy5fc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChjKTt2YXIgST10LkV2ZW50KGQuU0xJRCx7cmVsYXRlZFRhcmdldDpjLGRpcmVjdGlvbjpyLGZyb206bCx0bzpffSk7UC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSYmdCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhwKT8odChjKS5hZGRDbGFzcyhzKSxQLnJlZmxvdyhjKSx0KGEpLmFkZENsYXNzKGkpLHQoYykuYWRkQ2xhc3MoaSksdChhKS5vbmUoUC5UUkFOU0lUSU9OX0VORCxmdW5jdGlvbigpe3QoYykucmVtb3ZlQ2xhc3MoaStcIiBcIitzKS5hZGRDbGFzcyhnKSx0KGEpLnJlbW92ZUNsYXNzKGcrXCIgXCIrcytcIiBcIitpKSxvLl9pc1NsaWRpbmc9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiB0KG8uX2VsZW1lbnQpLnRyaWdnZXIoSSl9LDApfSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoNjAwKSk6KHQoYSkucmVtb3ZlQ2xhc3MoZyksdChjKS5hZGRDbGFzcyhnKSx0aGlzLl9pc1NsaWRpbmc9ITEsdCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKEkpKSxDJiZ0aGlzLmN5Y2xlKCl9fSxvLl9qUXVlcnlJbnRlcmZhY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBpPXQodGhpcykuZGF0YShuKSxzPXIoe30sYSx0KHRoaXMpLmRhdGEoKSk7XCJvYmplY3RcIj09dHlwZW9mIGUmJihzPXIoe30scyxlKSk7dmFyIGw9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTpzLnNsaWRlO2lmKGl8fChpPW5ldyBvKHRoaXMscyksdCh0aGlzKS5kYXRhKG4saSkpLFwibnVtYmVyXCI9PXR5cGVvZiBlKWkudG8oZSk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgbCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGlbbF0pdGhyb3cgbmV3IFR5cGVFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJytsKydcIicpO2lbbF0oKX1lbHNlIHMuaW50ZXJ2YWwmJihpLnBhdXNlKCksaS5jeWNsZSgpKX0pfSxvLl9kYXRhQXBpQ2xpY2tIYW5kbGVyPWZ1bmN0aW9uKGUpe3ZhciBpPVAuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTtpZihpKXt2YXIgcz10KGkpWzBdO2lmKHMmJnQocykuaGFzQ2xhc3MoXykpe3ZhciBhPXIoe30sdChzKS5kYXRhKCksdCh0aGlzKS5kYXRhKCkpLGw9dGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNsaWRlLXRvXCIpO2wmJihhLmludGVydmFsPSExKSxvLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCh0KHMpLGEpLGwmJnQocykuZGF0YShuKS50byhsKSxlLnByZXZlbnREZWZhdWx0KCl9fX0scyhvLG51bGwsW3trZXk6XCJWRVJTSU9OXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCI0LjAuMFwifX0se2tleTpcIkRlZmF1bHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYX19XSksb30oKTtyZXR1cm4gdChkb2N1bWVudCkub24oZC5DTElDS19EQVRBX0FQSSx5LkRBVEFfU0xJREUsQy5fZGF0YUFwaUNsaWNrSGFuZGxlciksdCh3aW5kb3cpLm9uKGQuTE9BRF9EQVRBX0FQSSxmdW5jdGlvbigpe3QoeS5EQVRBX1JJREUpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpO0MuX2pRdWVyeUludGVyZmFjZS5jYWxsKGUsZS5kYXRhKCkpfSl9KSx0LmZuW2VdPUMuX2pRdWVyeUludGVyZmFjZSx0LmZuW2VdLkNvbnN0cnVjdG9yPUMsdC5mbltlXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm5bZV09byxDLl9qUXVlcnlJbnRlcmZhY2V9LEN9KGUpLEg9ZnVuY3Rpb24odCl7dmFyIGU9XCJjb2xsYXBzZVwiLG49XCJicy5jb2xsYXBzZVwiLGk9XCIuXCIrbixvPXQuZm5bZV0sYT17dG9nZ2xlOiEwLHBhcmVudDpcIlwifSxsPXt0b2dnbGU6XCJib29sZWFuXCIscGFyZW50OlwiKHN0cmluZ3xlbGVtZW50KVwifSxoPXtTSE9XOlwic2hvd1wiK2ksU0hPV046XCJzaG93blwiK2ksSElERTpcImhpZGVcIitpLEhJRERFTjpcImhpZGRlblwiK2ksQ0xJQ0tfREFUQV9BUEk6XCJjbGlja1wiK2krXCIuZGF0YS1hcGlcIn0sYz1cInNob3dcIix1PVwiY29sbGFwc2VcIixmPVwiY29sbGFwc2luZ1wiLGQ9XCJjb2xsYXBzZWRcIixfPVwid2lkdGhcIixnPVwiaGVpZ2h0XCIscD17QUNUSVZFUzpcIi5zaG93LCAuY29sbGFwc2luZ1wiLERBVEFfVE9HR0xFOidbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXSd9LG09ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKGUsbil7dGhpcy5faXNUcmFuc2l0aW9uaW5nPSExLHRoaXMuX2VsZW1lbnQ9ZSx0aGlzLl9jb25maWc9dGhpcy5fZ2V0Q29uZmlnKG4pLHRoaXMuX3RyaWdnZXJBcnJheT10Lm1ha2VBcnJheSh0KCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtocmVmPVwiIycrZS5pZCsnXCJdLFtkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtdGFyZ2V0PVwiIycrZS5pZCsnXCJdJykpO2Zvcih2YXIgaT10KHAuREFUQV9UT0dHTEUpLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIHI9aVtzXSxvPVAuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChyKTtudWxsIT09byYmdChvKS5maWx0ZXIoZSkubGVuZ3RoPjAmJih0aGlzLl9zZWxlY3Rvcj1vLHRoaXMuX3RyaWdnZXJBcnJheS5wdXNoKHIpKX10aGlzLl9wYXJlbnQ9dGhpcy5fY29uZmlnLnBhcmVudD90aGlzLl9nZXRQYXJlbnQoKTpudWxsLHRoaXMuX2NvbmZpZy5wYXJlbnR8fHRoaXMuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyh0aGlzLl9lbGVtZW50LHRoaXMuX3RyaWdnZXJBcnJheSksdGhpcy5fY29uZmlnLnRvZ2dsZSYmdGhpcy50b2dnbGUoKX12YXIgbz1pLnByb3RvdHlwZTtyZXR1cm4gby50b2dnbGU9ZnVuY3Rpb24oKXt0KHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKGMpP3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpfSxvLnNob3c9ZnVuY3Rpb24oKXt2YXIgZSxzLHI9dGhpcztpZighdGhpcy5faXNUcmFuc2l0aW9uaW5nJiYhdCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhjKSYmKHRoaXMuX3BhcmVudCYmMD09PShlPXQubWFrZUFycmF5KHQodGhpcy5fcGFyZW50KS5maW5kKHAuQUNUSVZFUykuZmlsdGVyKCdbZGF0YS1wYXJlbnQ9XCInK3RoaXMuX2NvbmZpZy5wYXJlbnQrJ1wiXScpKSkubGVuZ3RoJiYoZT1udWxsKSwhKGUmJihzPXQoZSkubm90KHRoaXMuX3NlbGVjdG9yKS5kYXRhKG4pKSYmcy5faXNUcmFuc2l0aW9uaW5nKSkpe3ZhciBvPXQuRXZlbnQoaC5TSE9XKTtpZih0KHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIobyksIW8uaXNEZWZhdWx0UHJldmVudGVkKCkpe2UmJihpLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCh0KGUpLm5vdCh0aGlzLl9zZWxlY3RvciksXCJoaWRlXCIpLHN8fHQoZSkuZGF0YShuLG51bGwpKTt2YXIgYT10aGlzLl9nZXREaW1lbnNpb24oKTt0KHRoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKHUpLmFkZENsYXNzKGYpLHRoaXMuX2VsZW1lbnQuc3R5bGVbYV09MCx0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoPjAmJnQodGhpcy5fdHJpZ2dlckFycmF5KS5yZW1vdmVDbGFzcyhkKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSx0aGlzLnNldFRyYW5zaXRpb25pbmcoITApO3ZhciBsPWZ1bmN0aW9uKCl7dChyLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhmKS5hZGRDbGFzcyh1KS5hZGRDbGFzcyhjKSxyLl9lbGVtZW50LnN0eWxlW2FdPVwiXCIsci5zZXRUcmFuc2l0aW9uaW5nKCExKSx0KHIuX2VsZW1lbnQpLnRyaWdnZXIoaC5TSE9XTil9O2lmKFAuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkpe3ZhciBfPVwic2Nyb2xsXCIrKGFbMF0udG9VcHBlckNhc2UoKSthLnNsaWNlKDEpKTt0KHRoaXMuX2VsZW1lbnQpLm9uZShQLlRSQU5TSVRJT05fRU5ELGwpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDYwMCksdGhpcy5fZWxlbWVudC5zdHlsZVthXT10aGlzLl9lbGVtZW50W19dK1wicHhcIn1lbHNlIGwoKX19fSxvLmhpZGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCF0aGlzLl9pc1RyYW5zaXRpb25pbmcmJnQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoYykpe3ZhciBuPXQuRXZlbnQoaC5ISURFKTtpZih0KHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIobiksIW4uaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBpPXRoaXMuX2dldERpbWVuc2lvbigpO2lmKHRoaXMuX2VsZW1lbnQuc3R5bGVbaV09dGhpcy5fZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtpXStcInB4XCIsUC5yZWZsb3codGhpcy5fZWxlbWVudCksdCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhmKS5yZW1vdmVDbGFzcyh1KS5yZW1vdmVDbGFzcyhjKSx0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoPjApZm9yKHZhciBzPTA7czx0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoO3MrKyl7dmFyIHI9dGhpcy5fdHJpZ2dlckFycmF5W3NdLG89UC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHIpO2lmKG51bGwhPT1vKXQobykuaGFzQ2xhc3MoYyl8fHQocikuYWRkQ2xhc3MoZCkuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSl9dGhpcy5zZXRUcmFuc2l0aW9uaW5nKCEwKTt2YXIgYT1mdW5jdGlvbigpe2Uuc2V0VHJhbnNpdGlvbmluZyghMSksdChlLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhmKS5hZGRDbGFzcyh1KS50cmlnZ2VyKGguSElEREVOKX07dGhpcy5fZWxlbWVudC5zdHlsZVtpXT1cIlwiLFAuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCk/dCh0aGlzLl9lbGVtZW50KS5vbmUoUC5UUkFOU0lUSU9OX0VORCxhKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCg2MDApOmEoKX19fSxvLnNldFRyYW5zaXRpb25pbmc9ZnVuY3Rpb24odCl7dGhpcy5faXNUcmFuc2l0aW9uaW5nPXR9LG8uZGlzcG9zZT1mdW5jdGlvbigpe3QucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LG4pLHRoaXMuX2NvbmZpZz1udWxsLHRoaXMuX3BhcmVudD1udWxsLHRoaXMuX2VsZW1lbnQ9bnVsbCx0aGlzLl90cmlnZ2VyQXJyYXk9bnVsbCx0aGlzLl9pc1RyYW5zaXRpb25pbmc9bnVsbH0sby5fZ2V0Q29uZmlnPWZ1bmN0aW9uKHQpe3JldHVybih0PXIoe30sYSx0KSkudG9nZ2xlPUJvb2xlYW4odC50b2dnbGUpLFAudHlwZUNoZWNrQ29uZmlnKGUsdCxsKSx0fSxvLl9nZXREaW1lbnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhfKT9fOmd9LG8uX2dldFBhcmVudD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsbj1udWxsO1AuaXNFbGVtZW50KHRoaXMuX2NvbmZpZy5wYXJlbnQpPyhuPXRoaXMuX2NvbmZpZy5wYXJlbnQsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMuX2NvbmZpZy5wYXJlbnQuanF1ZXJ5JiYobj10aGlzLl9jb25maWcucGFyZW50WzBdKSk6bj10KHRoaXMuX2NvbmZpZy5wYXJlbnQpWzBdO3ZhciBzPSdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIicrdGhpcy5fY29uZmlnLnBhcmVudCsnXCJdJztyZXR1cm4gdChuKS5maW5kKHMpLmVhY2goZnVuY3Rpb24odCxuKXtlLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoaS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQobiksW25dKX0pLG59LG8uX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcz1mdW5jdGlvbihlLG4pe2lmKGUpe3ZhciBpPXQoZSkuaGFzQ2xhc3MoYyk7bi5sZW5ndGg+MCYmdChuKS50b2dnbGVDbGFzcyhkLCFpKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLGkpfX0saS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIG49UC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGUpO3JldHVybiBuP3QobilbMF06bnVsbH0saS5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcz10KHRoaXMpLG89cy5kYXRhKG4pLGw9cih7fSxhLHMuZGF0YSgpLFwib2JqZWN0XCI9PXR5cGVvZiBlJiZlKTtpZighbyYmbC50b2dnbGUmJi9zaG93fGhpZGUvLnRlc3QoZSkmJihsLnRvZ2dsZT0hMSksb3x8KG89bmV3IGkodGhpcyxsKSxzLmRhdGEobixvKSksXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBvW2VdKXRocm93IG5ldyBUeXBlRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicrZSsnXCInKTtvW2VdKCl9fSl9LHMoaSxudWxsLFt7a2V5OlwiVkVSU0lPTlwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiNC4wLjBcIn19LHtrZXk6XCJEZWZhdWx0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9fV0pLGl9KCk7cmV0dXJuIHQoZG9jdW1lbnQpLm9uKGguQ0xJQ0tfREFUQV9BUEkscC5EQVRBX1RPR0dMRSxmdW5jdGlvbihlKXtcIkFcIj09PWUuY3VycmVudFRhcmdldC50YWdOYW1lJiZlLnByZXZlbnREZWZhdWx0KCk7dmFyIGk9dCh0aGlzKSxzPVAuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTt0KHMpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMpLHM9ZS5kYXRhKG4pP1widG9nZ2xlXCI6aS5kYXRhKCk7bS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoZSxzKX0pfSksdC5mbltlXT1tLl9qUXVlcnlJbnRlcmZhY2UsdC5mbltlXS5Db25zdHJ1Y3Rvcj1tLHQuZm5bZV0ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuW2VdPW8sbS5falF1ZXJ5SW50ZXJmYWNlfSxtfShlKSxXPWZ1bmN0aW9uKHQpe3ZhciBlPVwiZHJvcGRvd25cIixpPVwiYnMuZHJvcGRvd25cIixvPVwiLlwiK2ksYT1cIi5kYXRhLWFwaVwiLGw9dC5mbltlXSxoPW5ldyBSZWdFeHAoXCIzOHw0MHwyN1wiKSxjPXtISURFOlwiaGlkZVwiK28sSElEREVOOlwiaGlkZGVuXCIrbyxTSE9XOlwic2hvd1wiK28sU0hPV046XCJzaG93blwiK28sQ0xJQ0s6XCJjbGlja1wiK28sQ0xJQ0tfREFUQV9BUEk6XCJjbGlja1wiK28rYSxLRVlET1dOX0RBVEFfQVBJOlwia2V5ZG93blwiK28rYSxLRVlVUF9EQVRBX0FQSTpcImtleXVwXCIrbythfSx1PVwiZGlzYWJsZWRcIixmPVwic2hvd1wiLGQ9XCJkcm9wdXBcIixfPVwiZHJvcHJpZ2h0XCIsZz1cImRyb3BsZWZ0XCIscD1cImRyb3Bkb3duLW1lbnUtcmlnaHRcIixtPVwiZHJvcGRvd24tbWVudS1sZWZ0XCIsdj1cInBvc2l0aW9uLXN0YXRpY1wiLEU9J1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJyxUPVwiLmRyb3Bkb3duIGZvcm1cIix5PVwiLmRyb3Bkb3duLW1lbnVcIixDPVwiLm5hdmJhci1uYXZcIixJPVwiLmRyb3Bkb3duLW1lbnUgLmRyb3Bkb3duLWl0ZW06bm90KC5kaXNhYmxlZClcIixBPVwidG9wLXN0YXJ0XCIsYj1cInRvcC1lbmRcIixEPVwiYm90dG9tLXN0YXJ0XCIsUz1cImJvdHRvbS1lbmRcIix3PVwicmlnaHQtc3RhcnRcIixOPVwibGVmdC1zdGFydFwiLE89e29mZnNldDowLGZsaXA6ITAsYm91bmRhcnk6XCJzY3JvbGxQYXJlbnRcIn0saz17b2Zmc2V0OlwiKG51bWJlcnxzdHJpbmd8ZnVuY3Rpb24pXCIsZmxpcDpcImJvb2xlYW5cIixib3VuZGFyeTpcIihzdHJpbmd8ZWxlbWVudClcIn0sTD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEodCxlKXt0aGlzLl9lbGVtZW50PXQsdGhpcy5fcG9wcGVyPW51bGwsdGhpcy5fY29uZmlnPXRoaXMuX2dldENvbmZpZyhlKSx0aGlzLl9tZW51PXRoaXMuX2dldE1lbnVFbGVtZW50KCksdGhpcy5faW5OYXZiYXI9dGhpcy5fZGV0ZWN0TmF2YmFyKCksdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKX12YXIgbD1hLnByb3RvdHlwZTtyZXR1cm4gbC50b2dnbGU9ZnVuY3Rpb24oKXtpZighdGhpcy5fZWxlbWVudC5kaXNhYmxlZCYmIXQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3ModSkpe3ZhciBlPWEuX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpLGk9dCh0aGlzLl9tZW51KS5oYXNDbGFzcyhmKTtpZihhLl9jbGVhck1lbnVzKCksIWkpe3ZhciBzPXtyZWxhdGVkVGFyZ2V0OnRoaXMuX2VsZW1lbnR9LHI9dC5FdmVudChjLlNIT1cscyk7aWYodChlKS50cmlnZ2VyKHIpLCFyLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtpZighdGhpcy5faW5OYXZiYXIpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJCb290c3RyYXAgZHJvcGRvd24gcmVxdWlyZSBQb3BwZXIuanMgKGh0dHBzOi8vcG9wcGVyLmpzLm9yZylcIik7dmFyIG89dGhpcy5fZWxlbWVudDt0KGUpLmhhc0NsYXNzKGQpJiYodCh0aGlzLl9tZW51KS5oYXNDbGFzcyhtKXx8dCh0aGlzLl9tZW51KS5oYXNDbGFzcyhwKSkmJihvPWUpLFwic2Nyb2xsUGFyZW50XCIhPT10aGlzLl9jb25maWcuYm91bmRhcnkmJnQoZSkuYWRkQ2xhc3ModiksdGhpcy5fcG9wcGVyPW5ldyBuKG8sdGhpcy5fbWVudSx0aGlzLl9nZXRQb3BwZXJDb25maWcoKSl9XCJvbnRvdWNoc3RhcnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmMD09PXQoZSkuY2xvc2VzdChDKS5sZW5ndGgmJnQoXCJib2R5XCIpLmNoaWxkcmVuKCkub24oXCJtb3VzZW92ZXJcIixudWxsLHQubm9vcCksdGhpcy5fZWxlbWVudC5mb2N1cygpLHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCEwKSx0KHRoaXMuX21lbnUpLnRvZ2dsZUNsYXNzKGYpLHQoZSkudG9nZ2xlQ2xhc3MoZikudHJpZ2dlcih0LkV2ZW50KGMuU0hPV04scykpfX19fSxsLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCxpKSx0KHRoaXMuX2VsZW1lbnQpLm9mZihvKSx0aGlzLl9lbGVtZW50PW51bGwsdGhpcy5fbWVudT1udWxsLG51bGwhPT10aGlzLl9wb3BwZXImJih0aGlzLl9wb3BwZXIuZGVzdHJveSgpLHRoaXMuX3BvcHBlcj1udWxsKX0sbC51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLl9pbk5hdmJhcj10aGlzLl9kZXRlY3ROYXZiYXIoKSxudWxsIT09dGhpcy5fcG9wcGVyJiZ0aGlzLl9wb3BwZXIuc2NoZWR1bGVVcGRhdGUoKX0sbC5fYWRkRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3QodGhpcy5fZWxlbWVudCkub24oYy5DTElDSyxmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSxlLnRvZ2dsZSgpfSl9LGwuX2dldENvbmZpZz1mdW5jdGlvbihuKXtyZXR1cm4gbj1yKHt9LHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCx0KHRoaXMuX2VsZW1lbnQpLmRhdGEoKSxuKSxQLnR5cGVDaGVja0NvbmZpZyhlLG4sdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSksbn0sbC5fZ2V0TWVudUVsZW1lbnQ9ZnVuY3Rpb24oKXtpZighdGhpcy5fbWVudSl7dmFyIGU9YS5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7dGhpcy5fbWVudT10KGUpLmZpbmQoeSlbMF19cmV0dXJuIHRoaXMuX21lbnV9LGwuX2dldFBsYWNlbWVudD1mdW5jdGlvbigpe3ZhciBlPXQodGhpcy5fZWxlbWVudCkucGFyZW50KCksbj1EO3JldHVybiBlLmhhc0NsYXNzKGQpPyhuPUEsdCh0aGlzLl9tZW51KS5oYXNDbGFzcyhwKSYmKG49YikpOmUuaGFzQ2xhc3MoXyk/bj13OmUuaGFzQ2xhc3MoZyk/bj1OOnQodGhpcy5fbWVudSkuaGFzQ2xhc3MocCkmJihuPVMpLG59LGwuX2RldGVjdE5hdmJhcj1mdW5jdGlvbigpe3JldHVybiB0KHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoXCIubmF2YmFyXCIpLmxlbmd0aD4wfSxsLl9nZXRQb3BwZXJDb25maWc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9e307cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fY29uZmlnLm9mZnNldD9lLmZuPWZ1bmN0aW9uKGUpe3JldHVybiBlLm9mZnNldHM9cih7fSxlLm9mZnNldHMsdC5fY29uZmlnLm9mZnNldChlLm9mZnNldHMpfHx7fSksZX06ZS5vZmZzZXQ9dGhpcy5fY29uZmlnLm9mZnNldCx7cGxhY2VtZW50OnRoaXMuX2dldFBsYWNlbWVudCgpLG1vZGlmaWVyczp7b2Zmc2V0OmUsZmxpcDp7ZW5hYmxlZDp0aGlzLl9jb25maWcuZmxpcH0scHJldmVudE92ZXJmbG93Ontib3VuZGFyaWVzRWxlbWVudDp0aGlzLl9jb25maWcuYm91bmRhcnl9fX19LGEuX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49dCh0aGlzKS5kYXRhKGkpO2lmKG58fChuPW5ldyBhKHRoaXMsXCJvYmplY3RcIj09dHlwZW9mIGU/ZTpudWxsKSx0KHRoaXMpLmRhdGEoaSxuKSksXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBuW2VdKXRocm93IG5ldyBUeXBlRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicrZSsnXCInKTtuW2VdKCl9fSl9LGEuX2NsZWFyTWVudXM9ZnVuY3Rpb24oZSl7aWYoIWV8fDMhPT1lLndoaWNoJiYoXCJrZXl1cFwiIT09ZS50eXBlfHw5PT09ZS53aGljaCkpZm9yKHZhciBuPXQubWFrZUFycmF5KHQoRSkpLHM9MDtzPG4ubGVuZ3RoO3MrKyl7dmFyIHI9YS5fZ2V0UGFyZW50RnJvbUVsZW1lbnQobltzXSksbz10KG5bc10pLmRhdGEoaSksbD17cmVsYXRlZFRhcmdldDpuW3NdfTtpZihvKXt2YXIgaD1vLl9tZW51O2lmKHQocikuaGFzQ2xhc3MoZikmJiEoZSYmKFwiY2xpY2tcIj09PWUudHlwZSYmL2lucHV0fHRleHRhcmVhL2kudGVzdChlLnRhcmdldC50YWdOYW1lKXx8XCJrZXl1cFwiPT09ZS50eXBlJiY5PT09ZS53aGljaCkmJnQuY29udGFpbnMocixlLnRhcmdldCkpKXt2YXIgdT10LkV2ZW50KGMuSElERSxsKTt0KHIpLnRyaWdnZXIodSksdS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJnQoXCJib2R5XCIpLmNoaWxkcmVuKCkub2ZmKFwibW91c2VvdmVyXCIsbnVsbCx0Lm5vb3ApLG5bc10uc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLFwiZmFsc2VcIiksdChoKS5yZW1vdmVDbGFzcyhmKSx0KHIpLnJlbW92ZUNsYXNzKGYpLnRyaWdnZXIodC5FdmVudChjLkhJRERFTixsKSkpfX19fSxhLl9nZXRQYXJlbnRGcm9tRWxlbWVudD1mdW5jdGlvbihlKXt2YXIgbixpPVAuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlKTtyZXR1cm4gaSYmKG49dChpKVswXSksbnx8ZS5wYXJlbnROb2RlfSxhLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXI9ZnVuY3Rpb24oZSl7aWYoKC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZS50YXJnZXQudGFnTmFtZSk/ISgzMj09PWUud2hpY2h8fDI3IT09ZS53aGljaCYmKDQwIT09ZS53aGljaCYmMzghPT1lLndoaWNofHx0KGUudGFyZ2V0KS5jbG9zZXN0KHkpLmxlbmd0aCkpOmgudGVzdChlLndoaWNoKSkmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSwhdGhpcy5kaXNhYmxlZCYmIXQodGhpcykuaGFzQ2xhc3ModSkpKXt2YXIgbj1hLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzKSxpPXQobikuaGFzQ2xhc3MoZik7aWYoKGl8fDI3PT09ZS53aGljaCYmMzI9PT1lLndoaWNoKSYmKCFpfHwyNyE9PWUud2hpY2gmJjMyIT09ZS53aGljaCkpe3ZhciBzPXQobikuZmluZChJKS5nZXQoKTtpZigwIT09cy5sZW5ndGgpe3ZhciByPXMuaW5kZXhPZihlLnRhcmdldCk7Mzg9PT1lLndoaWNoJiZyPjAmJnItLSw0MD09PWUud2hpY2gmJnI8cy5sZW5ndGgtMSYmcisrLHI8MCYmKHI9MCksc1tyXS5mb2N1cygpfX1lbHNle2lmKDI3PT09ZS53aGljaCl7dmFyIG89dChuKS5maW5kKEUpWzBdO3QobykudHJpZ2dlcihcImZvY3VzXCIpfXQodGhpcykudHJpZ2dlcihcImNsaWNrXCIpfX19LHMoYSxudWxsLFt7a2V5OlwiVkVSU0lPTlwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiNC4wLjBcIn19LHtrZXk6XCJEZWZhdWx0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE99fSx7a2V5OlwiRGVmYXVsdFR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ga319XSksYX0oKTtyZXR1cm4gdChkb2N1bWVudCkub24oYy5LRVlET1dOX0RBVEFfQVBJLEUsTC5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihjLktFWURPV05fREFUQV9BUEkseSxMLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIpLm9uKGMuQ0xJQ0tfREFUQV9BUEkrXCIgXCIrYy5LRVlVUF9EQVRBX0FQSSxMLl9jbGVhck1lbnVzKS5vbihjLkNMSUNLX0RBVEFfQVBJLEUsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksTC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwodCh0aGlzKSxcInRvZ2dsZVwiKX0pLm9uKGMuQ0xJQ0tfREFUQV9BUEksVCxmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfSksdC5mbltlXT1MLl9qUXVlcnlJbnRlcmZhY2UsdC5mbltlXS5Db25zdHJ1Y3Rvcj1MLHQuZm5bZV0ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuW2VdPWwsTC5falF1ZXJ5SW50ZXJmYWNlfSxMfShlKSxNPWZ1bmN0aW9uKHQpe3ZhciBlPVwibW9kYWxcIixuPVwiYnMubW9kYWxcIixpPVwiLlwiK24sbz10LmZuLm1vZGFsLGE9e2JhY2tkcm9wOiEwLGtleWJvYXJkOiEwLGZvY3VzOiEwLHNob3c6ITB9LGw9e2JhY2tkcm9wOlwiKGJvb2xlYW58c3RyaW5nKVwiLGtleWJvYXJkOlwiYm9vbGVhblwiLGZvY3VzOlwiYm9vbGVhblwiLHNob3c6XCJib29sZWFuXCJ9LGg9e0hJREU6XCJoaWRlXCIraSxISURERU46XCJoaWRkZW5cIitpLFNIT1c6XCJzaG93XCIraSxTSE9XTjpcInNob3duXCIraSxGT0NVU0lOOlwiZm9jdXNpblwiK2ksUkVTSVpFOlwicmVzaXplXCIraSxDTElDS19ESVNNSVNTOlwiY2xpY2suZGlzbWlzc1wiK2ksS0VZRE9XTl9ESVNNSVNTOlwia2V5ZG93bi5kaXNtaXNzXCIraSxNT1VTRVVQX0RJU01JU1M6XCJtb3VzZXVwLmRpc21pc3NcIitpLE1PVVNFRE9XTl9ESVNNSVNTOlwibW91c2Vkb3duLmRpc21pc3NcIitpLENMSUNLX0RBVEFfQVBJOlwiY2xpY2tcIitpK1wiLmRhdGEtYXBpXCJ9LGM9XCJtb2RhbC1zY3JvbGxiYXItbWVhc3VyZVwiLHU9XCJtb2RhbC1iYWNrZHJvcFwiLGY9XCJtb2RhbC1vcGVuXCIsZD1cImZhZGVcIixfPVwic2hvd1wiLGc9e0RJQUxPRzpcIi5tb2RhbC1kaWFsb2dcIixEQVRBX1RPR0dMRTonW2RhdGEtdG9nZ2xlPVwibW9kYWxcIl0nLERBVEFfRElTTUlTUzonW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJyxGSVhFRF9DT05URU5UOlwiLmZpeGVkLXRvcCwgLmZpeGVkLWJvdHRvbSwgLmlzLWZpeGVkLCAuc3RpY2t5LXRvcFwiLFNUSUNLWV9DT05URU5UOlwiLnN0aWNreS10b3BcIixOQVZCQVJfVE9HR0xFUjpcIi5uYXZiYXItdG9nZ2xlclwifSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbyhlLG4pe3RoaXMuX2NvbmZpZz10aGlzLl9nZXRDb25maWcobiksdGhpcy5fZWxlbWVudD1lLHRoaXMuX2RpYWxvZz10KGUpLmZpbmQoZy5ESUFMT0cpWzBdLHRoaXMuX2JhY2tkcm9wPW51bGwsdGhpcy5faXNTaG93bj0hMSx0aGlzLl9pc0JvZHlPdmVyZmxvd2luZz0hMSx0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrPSExLHRoaXMuX29yaWdpbmFsQm9keVBhZGRpbmc9MCx0aGlzLl9zY3JvbGxiYXJXaWR0aD0wfXZhciBwPW8ucHJvdG90eXBlO3JldHVybiBwLnRvZ2dsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faXNTaG93bj90aGlzLmhpZGUoKTp0aGlzLnNob3codCl9LHAuc2hvdz1mdW5jdGlvbihlKXt2YXIgbj10aGlzO2lmKCF0aGlzLl9pc1RyYW5zaXRpb25pbmcmJiF0aGlzLl9pc1Nob3duKXtQLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpJiZ0KHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKGQpJiYodGhpcy5faXNUcmFuc2l0aW9uaW5nPSEwKTt2YXIgaT10LkV2ZW50KGguU0hPVyx7cmVsYXRlZFRhcmdldDplfSk7dCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGkpLHRoaXMuX2lzU2hvd258fGkuaXNEZWZhdWx0UHJldmVudGVkKCl8fCh0aGlzLl9pc1Nob3duPSEwLHRoaXMuX2NoZWNrU2Nyb2xsYmFyKCksdGhpcy5fc2V0U2Nyb2xsYmFyKCksdGhpcy5fYWRqdXN0RGlhbG9nKCksdChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhmKSx0aGlzLl9zZXRFc2NhcGVFdmVudCgpLHRoaXMuX3NldFJlc2l6ZUV2ZW50KCksdCh0aGlzLl9lbGVtZW50KS5vbihoLkNMSUNLX0RJU01JU1MsZy5EQVRBX0RJU01JU1MsZnVuY3Rpb24odCl7cmV0dXJuIG4uaGlkZSh0KX0pLHQodGhpcy5fZGlhbG9nKS5vbihoLk1PVVNFRE9XTl9ESVNNSVNTLGZ1bmN0aW9uKCl7dChuLl9lbGVtZW50KS5vbmUoaC5NT1VTRVVQX0RJU01JU1MsZnVuY3Rpb24oZSl7dChlLnRhcmdldCkuaXMobi5fZWxlbWVudCkmJihuLl9pZ25vcmVCYWNrZHJvcENsaWNrPSEwKX0pfSksdGhpcy5fc2hvd0JhY2tkcm9wKGZ1bmN0aW9uKCl7cmV0dXJuIG4uX3Nob3dFbGVtZW50KGUpfSkpfX0scC5oaWRlPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCgpLCF0aGlzLl9pc1RyYW5zaXRpb25pbmcmJnRoaXMuX2lzU2hvd24pe3ZhciBpPXQuRXZlbnQoaC5ISURFKTtpZih0KHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoaSksdGhpcy5faXNTaG93biYmIWkuaXNEZWZhdWx0UHJldmVudGVkKCkpe3RoaXMuX2lzU2hvd249ITE7dmFyIHM9UC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSYmdCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhkKTtzJiYodGhpcy5faXNUcmFuc2l0aW9uaW5nPSEwKSx0aGlzLl9zZXRFc2NhcGVFdmVudCgpLHRoaXMuX3NldFJlc2l6ZUV2ZW50KCksdChkb2N1bWVudCkub2ZmKGguRk9DVVNJTiksdCh0aGlzLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhfKSx0KHRoaXMuX2VsZW1lbnQpLm9mZihoLkNMSUNLX0RJU01JU1MpLHQodGhpcy5fZGlhbG9nKS5vZmYoaC5NT1VTRURPV05fRElTTUlTUykscz90KHRoaXMuX2VsZW1lbnQpLm9uZShQLlRSQU5TSVRJT05fRU5ELGZ1bmN0aW9uKHQpe3JldHVybiBuLl9oaWRlTW9kYWwodCl9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgzMDApOnRoaXMuX2hpZGVNb2RhbCgpfX19LHAuZGlzcG9zZT1mdW5jdGlvbigpe3QucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LG4pLHQod2luZG93LGRvY3VtZW50LHRoaXMuX2VsZW1lbnQsdGhpcy5fYmFja2Ryb3ApLm9mZihpKSx0aGlzLl9jb25maWc9bnVsbCx0aGlzLl9lbGVtZW50PW51bGwsdGhpcy5fZGlhbG9nPW51bGwsdGhpcy5fYmFja2Ryb3A9bnVsbCx0aGlzLl9pc1Nob3duPW51bGwsdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmc9bnVsbCx0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrPW51bGwsdGhpcy5fc2Nyb2xsYmFyV2lkdGg9bnVsbH0scC5oYW5kbGVVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLl9hZGp1c3REaWFsb2coKX0scC5fZ2V0Q29uZmlnPWZ1bmN0aW9uKHQpe3JldHVybiB0PXIoe30sYSx0KSxQLnR5cGVDaGVja0NvbmZpZyhlLHQsbCksdH0scC5fc2hvd0VsZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPVAuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJnQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoZCk7dGhpcy5fZWxlbWVudC5wYXJlbnROb2RlJiZ0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERXx8ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9lbGVtZW50KSx0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiksdGhpcy5fZWxlbWVudC5zY3JvbGxUb3A9MCxpJiZQLnJlZmxvdyh0aGlzLl9lbGVtZW50KSx0KHRoaXMuX2VsZW1lbnQpLmFkZENsYXNzKF8pLHRoaXMuX2NvbmZpZy5mb2N1cyYmdGhpcy5fZW5mb3JjZUZvY3VzKCk7dmFyIHM9dC5FdmVudChoLlNIT1dOLHtyZWxhdGVkVGFyZ2V0OmV9KSxyPWZ1bmN0aW9uKCl7bi5fY29uZmlnLmZvY3VzJiZuLl9lbGVtZW50LmZvY3VzKCksbi5faXNUcmFuc2l0aW9uaW5nPSExLHQobi5fZWxlbWVudCkudHJpZ2dlcihzKX07aT90KHRoaXMuX2RpYWxvZykub25lKFAuVFJBTlNJVElPTl9FTkQscikuZW11bGF0ZVRyYW5zaXRpb25FbmQoMzAwKTpyKCl9LHAuX2VuZm9yY2VGb2N1cz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dChkb2N1bWVudCkub2ZmKGguRk9DVVNJTikub24oaC5GT0NVU0lOLGZ1bmN0aW9uKG4pe2RvY3VtZW50IT09bi50YXJnZXQmJmUuX2VsZW1lbnQhPT1uLnRhcmdldCYmMD09PXQoZS5fZWxlbWVudCkuaGFzKG4udGFyZ2V0KS5sZW5ndGgmJmUuX2VsZW1lbnQuZm9jdXMoKX0pfSxwLl9zZXRFc2NhcGVFdmVudD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5faXNTaG93biYmdGhpcy5fY29uZmlnLmtleWJvYXJkP3QodGhpcy5fZWxlbWVudCkub24oaC5LRVlET1dOX0RJU01JU1MsZnVuY3Rpb24odCl7Mjc9PT10LndoaWNoJiYodC5wcmV2ZW50RGVmYXVsdCgpLGUuaGlkZSgpKX0pOnRoaXMuX2lzU2hvd258fHQodGhpcy5fZWxlbWVudCkub2ZmKGguS0VZRE9XTl9ESVNNSVNTKX0scC5fc2V0UmVzaXplRXZlbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2lzU2hvd24/dCh3aW5kb3cpLm9uKGguUkVTSVpFLGZ1bmN0aW9uKHQpe3JldHVybiBlLmhhbmRsZVVwZGF0ZSh0KX0pOnQod2luZG93KS5vZmYoaC5SRVNJWkUpfSxwLl9oaWRlTW9kYWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsITApLHRoaXMuX2lzVHJhbnNpdGlvbmluZz0hMSx0aGlzLl9zaG93QmFja2Ryb3AoZnVuY3Rpb24oKXt0KGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKGYpLGUuX3Jlc2V0QWRqdXN0bWVudHMoKSxlLl9yZXNldFNjcm9sbGJhcigpLHQoZS5fZWxlbWVudCkudHJpZ2dlcihoLkhJRERFTil9KX0scC5fcmVtb3ZlQmFja2Ryb3A9ZnVuY3Rpb24oKXt0aGlzLl9iYWNrZHJvcCYmKHQodGhpcy5fYmFja2Ryb3ApLnJlbW92ZSgpLHRoaXMuX2JhY2tkcm9wPW51bGwpfSxwLl9zaG93QmFja2Ryb3A9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPXQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoZCk/ZDpcIlwiO2lmKHRoaXMuX2lzU2hvd24mJnRoaXMuX2NvbmZpZy5iYWNrZHJvcCl7dmFyIHM9UC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSYmaTtpZih0aGlzLl9iYWNrZHJvcD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX2JhY2tkcm9wLmNsYXNzTmFtZT11LGkmJnQodGhpcy5fYmFja2Ryb3ApLmFkZENsYXNzKGkpLHQodGhpcy5fYmFja2Ryb3ApLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLHQodGhpcy5fZWxlbWVudCkub24oaC5DTElDS19ESVNNSVNTLGZ1bmN0aW9uKHQpe24uX2lnbm9yZUJhY2tkcm9wQ2xpY2s/bi5faWdub3JlQmFja2Ryb3BDbGljaz0hMTp0LnRhcmdldD09PXQuY3VycmVudFRhcmdldCYmKFwic3RhdGljXCI9PT1uLl9jb25maWcuYmFja2Ryb3A/bi5fZWxlbWVudC5mb2N1cygpOm4uaGlkZSgpKX0pLHMmJlAucmVmbG93KHRoaXMuX2JhY2tkcm9wKSx0KHRoaXMuX2JhY2tkcm9wKS5hZGRDbGFzcyhfKSwhZSlyZXR1cm47aWYoIXMpcmV0dXJuIHZvaWQgZSgpO3QodGhpcy5fYmFja2Ryb3ApLm9uZShQLlRSQU5TSVRJT05fRU5ELGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCl9ZWxzZSBpZighdGhpcy5faXNTaG93biYmdGhpcy5fYmFja2Ryb3Ape3QodGhpcy5fYmFja2Ryb3ApLnJlbW92ZUNsYXNzKF8pO3ZhciByPWZ1bmN0aW9uKCl7bi5fcmVtb3ZlQmFja2Ryb3AoKSxlJiZlKCl9O1Auc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJnQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoZCk/dCh0aGlzLl9iYWNrZHJvcCkub25lKFAuVFJBTlNJVElPTl9FTkQscikuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTpyKCl9ZWxzZSBlJiZlKCl9LHAuX2FkanVzdERpYWxvZz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2VsZW1lbnQuc2Nyb2xsSGVpZ2h0PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7IXRoaXMuX2lzQm9keU92ZXJmbG93aW5nJiZ0JiYodGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdD10aGlzLl9zY3JvbGxiYXJXaWR0aCtcInB4XCIpLHRoaXMuX2lzQm9keU92ZXJmbG93aW5nJiYhdCYmKHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0PXRoaXMuX3Njcm9sbGJhcldpZHRoK1wicHhcIil9LHAuX3Jlc2V0QWRqdXN0bWVudHM9ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0PVwiXCIsdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQ9XCJcIn0scC5fY2hlY2tTY3JvbGxiYXI9ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3RoaXMuX2lzQm9keU92ZXJmbG93aW5nPXQubGVmdCt0LnJpZ2h0PHdpbmRvdy5pbm5lcldpZHRoLHRoaXMuX3Njcm9sbGJhcldpZHRoPXRoaXMuX2dldFNjcm9sbGJhcldpZHRoKCl9LHAuX3NldFNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcpe3QoZy5GSVhFRF9DT05URU5UKS5lYWNoKGZ1bmN0aW9uKG4saSl7dmFyIHM9dChpKVswXS5zdHlsZS5wYWRkaW5nUmlnaHQscj10KGkpLmNzcyhcInBhZGRpbmctcmlnaHRcIik7dChpKS5kYXRhKFwicGFkZGluZy1yaWdodFwiLHMpLmNzcyhcInBhZGRpbmctcmlnaHRcIixwYXJzZUZsb2F0KHIpK2UuX3Njcm9sbGJhcldpZHRoK1wicHhcIil9KSx0KGcuU1RJQ0tZX0NPTlRFTlQpLmVhY2goZnVuY3Rpb24obixpKXt2YXIgcz10KGkpWzBdLnN0eWxlLm1hcmdpblJpZ2h0LHI9dChpKS5jc3MoXCJtYXJnaW4tcmlnaHRcIik7dChpKS5kYXRhKFwibWFyZ2luLXJpZ2h0XCIscykuY3NzKFwibWFyZ2luLXJpZ2h0XCIscGFyc2VGbG9hdChyKS1lLl9zY3JvbGxiYXJXaWR0aCtcInB4XCIpfSksdChnLk5BVkJBUl9UT0dHTEVSKS5lYWNoKGZ1bmN0aW9uKG4saSl7dmFyIHM9dChpKVswXS5zdHlsZS5tYXJnaW5SaWdodCxyPXQoaSkuY3NzKFwibWFyZ2luLXJpZ2h0XCIpO3QoaSkuZGF0YShcIm1hcmdpbi1yaWdodFwiLHMpLmNzcyhcIm1hcmdpbi1yaWdodFwiLHBhcnNlRmxvYXQocikrZS5fc2Nyb2xsYmFyV2lkdGgrXCJweFwiKX0pO3ZhciBuPWRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0LGk9dChcImJvZHlcIikuY3NzKFwicGFkZGluZy1yaWdodFwiKTt0KFwiYm9keVwiKS5kYXRhKFwicGFkZGluZy1yaWdodFwiLG4pLmNzcyhcInBhZGRpbmctcmlnaHRcIixwYXJzZUZsb2F0KGkpK3RoaXMuX3Njcm9sbGJhcldpZHRoK1wicHhcIil9fSxwLl9yZXNldFNjcm9sbGJhcj1mdW5jdGlvbigpe3QoZy5GSVhFRF9DT05URU5UKS5lYWNoKGZ1bmN0aW9uKGUsbil7dmFyIGk9dChuKS5kYXRhKFwicGFkZGluZy1yaWdodFwiKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgaSYmdChuKS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsaSkucmVtb3ZlRGF0YShcInBhZGRpbmctcmlnaHRcIil9KSx0KGcuU1RJQ0tZX0NPTlRFTlQrXCIsIFwiK2cuTkFWQkFSX1RPR0dMRVIpLmVhY2goZnVuY3Rpb24oZSxuKXt2YXIgaT10KG4pLmRhdGEoXCJtYXJnaW4tcmlnaHRcIik7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGkmJnQobikuY3NzKFwibWFyZ2luLXJpZ2h0XCIsaSkucmVtb3ZlRGF0YShcIm1hcmdpbi1yaWdodFwiKX0pO3ZhciBlPXQoXCJib2R5XCIpLmRhdGEoXCJwYWRkaW5nLXJpZ2h0XCIpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZ0KFwiYm9keVwiKS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsZSkucmVtb3ZlRGF0YShcInBhZGRpbmctcmlnaHRcIil9LHAuX2dldFNjcm9sbGJhcldpZHRoPWZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTmFtZT1jLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCk7dmFyIGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aC10LmNsaWVudFdpZHRoO3JldHVybiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpLGV9LG8uX2pRdWVyeUludGVyZmFjZT1mdW5jdGlvbihlLGkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcz10KHRoaXMpLmRhdGEobiksYT1yKHt9LG8uRGVmYXVsdCx0KHRoaXMpLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgZSYmZSk7aWYoc3x8KHM9bmV3IG8odGhpcyxhKSx0KHRoaXMpLmRhdGEobixzKSksXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBzW2VdKXRocm93IG5ldyBUeXBlRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicrZSsnXCInKTtzW2VdKGkpfWVsc2UgYS5zaG93JiZzLnNob3coaSl9KX0scyhvLG51bGwsW3trZXk6XCJWRVJTSU9OXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCI0LjAuMFwifX0se2tleTpcIkRlZmF1bHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYX19XSksb30oKTtyZXR1cm4gdChkb2N1bWVudCkub24oaC5DTElDS19EQVRBX0FQSSxnLkRBVEFfVE9HR0xFLGZ1bmN0aW9uKGUpe3ZhciBpLHM9dGhpcyxvPVAuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzKTtvJiYoaT10KG8pWzBdKTt2YXIgYT10KGkpLmRhdGEobik/XCJ0b2dnbGVcIjpyKHt9LHQoaSkuZGF0YSgpLHQodGhpcykuZGF0YSgpKTtcIkFcIiE9PXRoaXMudGFnTmFtZSYmXCJBUkVBXCIhPT10aGlzLnRhZ05hbWV8fGUucHJldmVudERlZmF1bHQoKTt2YXIgbD10KGkpLm9uZShoLlNIT1csZnVuY3Rpb24oZSl7ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8bC5vbmUoaC5ISURERU4sZnVuY3Rpb24oKXt0KHMpLmlzKFwiOnZpc2libGVcIikmJnMuZm9jdXMoKX0pfSk7cC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwodChpKSxhLHRoaXMpfSksdC5mbi5tb2RhbD1wLl9qUXVlcnlJbnRlcmZhY2UsdC5mbi5tb2RhbC5Db25zdHJ1Y3Rvcj1wLHQuZm4ubW9kYWwubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuLm1vZGFsPW8scC5falF1ZXJ5SW50ZXJmYWNlfSxwfShlKSxVPWZ1bmN0aW9uKHQpe3ZhciBlPVwidG9vbHRpcFwiLGk9XCJicy50b29sdGlwXCIsbz1cIi5cIitpLGE9dC5mbltlXSxsPW5ldyBSZWdFeHAoXCIoXnxcXFxccylicy10b29sdGlwXFxcXFMrXCIsXCJnXCIpLGg9e2FuaW1hdGlvbjpcImJvb2xlYW5cIix0ZW1wbGF0ZTpcInN0cmluZ1wiLHRpdGxlOlwiKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKVwiLHRyaWdnZXI6XCJzdHJpbmdcIixkZWxheTpcIihudW1iZXJ8b2JqZWN0KVwiLGh0bWw6XCJib29sZWFuXCIsc2VsZWN0b3I6XCIoc3RyaW5nfGJvb2xlYW4pXCIscGxhY2VtZW50OlwiKHN0cmluZ3xmdW5jdGlvbilcIixvZmZzZXQ6XCIobnVtYmVyfHN0cmluZylcIixjb250YWluZXI6XCIoc3RyaW5nfGVsZW1lbnR8Ym9vbGVhbilcIixmYWxsYmFja1BsYWNlbWVudDpcIihzdHJpbmd8YXJyYXkpXCIsYm91bmRhcnk6XCIoc3RyaW5nfGVsZW1lbnQpXCJ9LGM9e0FVVE86XCJhdXRvXCIsVE9QOlwidG9wXCIsUklHSFQ6XCJyaWdodFwiLEJPVFRPTTpcImJvdHRvbVwiLExFRlQ6XCJsZWZ0XCJ9LHU9e2FuaW1hdGlvbjohMCx0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cInRvb2x0aXBcIiByb2xlPVwidG9vbHRpcFwiPjxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+Jyx0cmlnZ2VyOlwiaG92ZXIgZm9jdXNcIix0aXRsZTpcIlwiLGRlbGF5OjAsaHRtbDohMSxzZWxlY3RvcjohMSxwbGFjZW1lbnQ6XCJ0b3BcIixvZmZzZXQ6MCxjb250YWluZXI6ITEsZmFsbGJhY2tQbGFjZW1lbnQ6XCJmbGlwXCIsYm91bmRhcnk6XCJzY3JvbGxQYXJlbnRcIn0sZj1cInNob3dcIixkPVwib3V0XCIsXz17SElERTpcImhpZGVcIitvLEhJRERFTjpcImhpZGRlblwiK28sU0hPVzpcInNob3dcIitvLFNIT1dOOlwic2hvd25cIitvLElOU0VSVEVEOlwiaW5zZXJ0ZWRcIitvLENMSUNLOlwiY2xpY2tcIitvLEZPQ1VTSU46XCJmb2N1c2luXCIrbyxGT0NVU09VVDpcImZvY3Vzb3V0XCIrbyxNT1VTRUVOVEVSOlwibW91c2VlbnRlclwiK28sTU9VU0VMRUFWRTpcIm1vdXNlbGVhdmVcIitvfSxnPVwiZmFkZVwiLHA9XCJzaG93XCIsbT1cIi50b29sdGlwLWlubmVyXCIsdj1cIi5hcnJvd1wiLEU9XCJob3ZlclwiLFQ9XCJmb2N1c1wiLHk9XCJjbGlja1wiLEM9XCJtYW51YWxcIixJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSh0LGUpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJCb290c3RyYXAgdG9vbHRpcHMgcmVxdWlyZSBQb3BwZXIuanMgKGh0dHBzOi8vcG9wcGVyLmpzLm9yZylcIik7dGhpcy5faXNFbmFibGVkPSEwLHRoaXMuX3RpbWVvdXQ9MCx0aGlzLl9ob3ZlclN0YXRlPVwiXCIsdGhpcy5fYWN0aXZlVHJpZ2dlcj17fSx0aGlzLl9wb3BwZXI9bnVsbCx0aGlzLmVsZW1lbnQ9dCx0aGlzLmNvbmZpZz10aGlzLl9nZXRDb25maWcoZSksdGhpcy50aXA9bnVsbCx0aGlzLl9zZXRMaXN0ZW5lcnMoKX12YXIgST1hLnByb3RvdHlwZTtyZXR1cm4gSS5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLl9pc0VuYWJsZWQ9ITB9LEkuZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuX2lzRW5hYmxlZD0hMX0sSS50b2dnbGVFbmFibGVkPWZ1bmN0aW9uKCl7dGhpcy5faXNFbmFibGVkPSF0aGlzLl9pc0VuYWJsZWR9LEkudG9nZ2xlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2lzRW5hYmxlZClpZihlKXt2YXIgbj10aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZLGk9dChlLmN1cnJlbnRUYXJnZXQpLmRhdGEobik7aXx8KGk9bmV3IHRoaXMuY29uc3RydWN0b3IoZS5jdXJyZW50VGFyZ2V0LHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpLHQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKG4saSkpLGkuX2FjdGl2ZVRyaWdnZXIuY2xpY2s9IWkuX2FjdGl2ZVRyaWdnZXIuY2xpY2ssaS5faXNXaXRoQWN0aXZlVHJpZ2dlcigpP2kuX2VudGVyKG51bGwsaSk6aS5fbGVhdmUobnVsbCxpKX1lbHNle2lmKHQodGhpcy5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKHApKXJldHVybiB2b2lkIHRoaXMuX2xlYXZlKG51bGwsdGhpcyk7dGhpcy5fZW50ZXIobnVsbCx0aGlzKX19LEkuZGlzcG9zZT1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KSx0LnJlbW92ZURhdGEodGhpcy5lbGVtZW50LHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVkpLHQodGhpcy5lbGVtZW50KS5vZmYodGhpcy5jb25zdHJ1Y3Rvci5FVkVOVF9LRVkpLHQodGhpcy5lbGVtZW50KS5jbG9zZXN0KFwiLm1vZGFsXCIpLm9mZihcImhpZGUuYnMubW9kYWxcIiksdGhpcy50aXAmJnQodGhpcy50aXApLnJlbW92ZSgpLHRoaXMuX2lzRW5hYmxlZD1udWxsLHRoaXMuX3RpbWVvdXQ9bnVsbCx0aGlzLl9ob3ZlclN0YXRlPW51bGwsdGhpcy5fYWN0aXZlVHJpZ2dlcj1udWxsLG51bGwhPT10aGlzLl9wb3BwZXImJnRoaXMuX3BvcHBlci5kZXN0cm95KCksdGhpcy5fcG9wcGVyPW51bGwsdGhpcy5lbGVtZW50PW51bGwsdGhpcy5jb25maWc9bnVsbCx0aGlzLnRpcD1udWxsfSxJLnNob3c9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKFwibm9uZVwiPT09dCh0aGlzLmVsZW1lbnQpLmNzcyhcImRpc3BsYXlcIikpdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHVzZSBzaG93IG9uIHZpc2libGUgZWxlbWVudHNcIik7dmFyIGk9dC5FdmVudCh0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1cpO2lmKHRoaXMuaXNXaXRoQ29udGVudCgpJiZ0aGlzLl9pc0VuYWJsZWQpe3QodGhpcy5lbGVtZW50KS50cmlnZ2VyKGkpO3ZhciBzPXQuY29udGFpbnModGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMuZWxlbWVudCk7aWYoaS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IXMpcmV0dXJuO3ZhciByPXRoaXMuZ2V0VGlwRWxlbWVudCgpLG89UC5nZXRVSUQodGhpcy5jb25zdHJ1Y3Rvci5OQU1FKTtyLnNldEF0dHJpYnV0ZShcImlkXCIsbyksdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtZGVzY3JpYmVkYnlcIixvKSx0aGlzLnNldENvbnRlbnQoKSx0aGlzLmNvbmZpZy5hbmltYXRpb24mJnQocikuYWRkQ2xhc3MoZyk7dmFyIGw9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5jb25maWcucGxhY2VtZW50P3RoaXMuY29uZmlnLnBsYWNlbWVudC5jYWxsKHRoaXMscix0aGlzLmVsZW1lbnQpOnRoaXMuY29uZmlnLnBsYWNlbWVudCxoPXRoaXMuX2dldEF0dGFjaG1lbnQobCk7dGhpcy5hZGRBdHRhY2htZW50Q2xhc3MoaCk7dmFyIGM9ITE9PT10aGlzLmNvbmZpZy5jb250YWluZXI/ZG9jdW1lbnQuYm9keTp0KHRoaXMuY29uZmlnLmNvbnRhaW5lcik7dChyKS5kYXRhKHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVksdGhpcyksdC5jb250YWlucyh0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsdGhpcy50aXApfHx0KHIpLmFwcGVuZFRvKGMpLHQodGhpcy5lbGVtZW50KS50cmlnZ2VyKHRoaXMuY29uc3RydWN0b3IuRXZlbnQuSU5TRVJURUQpLHRoaXMuX3BvcHBlcj1uZXcgbih0aGlzLmVsZW1lbnQscix7cGxhY2VtZW50OmgsbW9kaWZpZXJzOntvZmZzZXQ6e29mZnNldDp0aGlzLmNvbmZpZy5vZmZzZXR9LGZsaXA6e2JlaGF2aW9yOnRoaXMuY29uZmlnLmZhbGxiYWNrUGxhY2VtZW50fSxhcnJvdzp7ZWxlbWVudDp2fSxwcmV2ZW50T3ZlcmZsb3c6e2JvdW5kYXJpZXNFbGVtZW50OnRoaXMuY29uZmlnLmJvdW5kYXJ5fX0sb25DcmVhdGU6ZnVuY3Rpb24odCl7dC5vcmlnaW5hbFBsYWNlbWVudCE9PXQucGxhY2VtZW50JiZlLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UodCl9LG9uVXBkYXRlOmZ1bmN0aW9uKHQpe2UuX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZSh0KX19KSx0KHIpLmFkZENsYXNzKHApLFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJnQoXCJib2R5XCIpLmNoaWxkcmVuKCkub24oXCJtb3VzZW92ZXJcIixudWxsLHQubm9vcCk7dmFyIHU9ZnVuY3Rpb24oKXtlLmNvbmZpZy5hbmltYXRpb24mJmUuX2ZpeFRyYW5zaXRpb24oKTt2YXIgbj1lLl9ob3ZlclN0YXRlO2UuX2hvdmVyU3RhdGU9bnVsbCx0KGUuZWxlbWVudCkudHJpZ2dlcihlLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1dOKSxuPT09ZCYmZS5fbGVhdmUobnVsbCxlKX07UC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSYmdCh0aGlzLnRpcCkuaGFzQ2xhc3MoZyk/dCh0aGlzLnRpcCkub25lKFAuVFJBTlNJVElPTl9FTkQsdSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYS5fVFJBTlNJVElPTl9EVVJBVElPTik6dSgpfX0sSS5oaWRlPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT10aGlzLmdldFRpcEVsZW1lbnQoKSxzPXQuRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5ISURFKSxyPWZ1bmN0aW9uKCl7bi5faG92ZXJTdGF0ZSE9PWYmJmkucGFyZW50Tm9kZSYmaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkpLG4uX2NsZWFuVGlwQ2xhc3MoKSxuLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kZXNjcmliZWRieVwiKSx0KG4uZWxlbWVudCkudHJpZ2dlcihuLmNvbnN0cnVjdG9yLkV2ZW50LkhJRERFTiksbnVsbCE9PW4uX3BvcHBlciYmbi5fcG9wcGVyLmRlc3Ryb3koKSxlJiZlKCl9O3QodGhpcy5lbGVtZW50KS50cmlnZ2VyKHMpLHMuaXNEZWZhdWx0UHJldmVudGVkKCl8fCh0KGkpLnJlbW92ZUNsYXNzKHApLFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJnQoXCJib2R5XCIpLmNoaWxkcmVuKCkub2ZmKFwibW91c2VvdmVyXCIsbnVsbCx0Lm5vb3ApLHRoaXMuX2FjdGl2ZVRyaWdnZXJbeV09ITEsdGhpcy5fYWN0aXZlVHJpZ2dlcltUXT0hMSx0aGlzLl9hY3RpdmVUcmlnZ2VyW0VdPSExLFAuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJnQodGhpcy50aXApLmhhc0NsYXNzKGcpP3QoaSkub25lKFAuVFJBTlNJVElPTl9FTkQscikuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTpyKCksdGhpcy5faG92ZXJTdGF0ZT1cIlwiKX0sSS51cGRhdGU9ZnVuY3Rpb24oKXtudWxsIT09dGhpcy5fcG9wcGVyJiZ0aGlzLl9wb3BwZXIuc2NoZWR1bGVVcGRhdGUoKX0sSS5pc1dpdGhDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5nZXRUaXRsZSgpKX0sSS5hZGRBdHRhY2htZW50Q2xhc3M9ZnVuY3Rpb24oZSl7dCh0aGlzLmdldFRpcEVsZW1lbnQoKSkuYWRkQ2xhc3MoXCJicy10b29sdGlwLVwiK2UpfSxJLmdldFRpcEVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aXA9dGhpcy50aXB8fHQodGhpcy5jb25maWcudGVtcGxhdGUpWzBdLHRoaXMudGlwfSxJLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMuZ2V0VGlwRWxlbWVudCgpKTt0aGlzLnNldEVsZW1lbnRDb250ZW50KGUuZmluZChtKSx0aGlzLmdldFRpdGxlKCkpLGUucmVtb3ZlQ2xhc3MoZytcIiBcIitwKX0sSS5zZXRFbGVtZW50Q29udGVudD1mdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMuY29uZmlnLmh0bWw7XCJvYmplY3RcIj09dHlwZW9mIG4mJihuLm5vZGVUeXBlfHxuLmpxdWVyeSk/aT90KG4pLnBhcmVudCgpLmlzKGUpfHxlLmVtcHR5KCkuYXBwZW5kKG4pOmUudGV4dCh0KG4pLnRleHQoKSk6ZVtpP1wiaHRtbFwiOlwidGV4dFwiXShuKX0sSS5nZXRUaXRsZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIpO3JldHVybiB0fHwodD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLmNvbmZpZy50aXRsZT90aGlzLmNvbmZpZy50aXRsZS5jYWxsKHRoaXMuZWxlbWVudCk6dGhpcy5jb25maWcudGl0bGUpLHR9LEkuX2dldEF0dGFjaG1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGNbdC50b1VwcGVyQ2FzZSgpXX0sSS5fc2V0TGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmNvbmZpZy50cmlnZ2VyLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKFwiY2xpY2tcIj09PW4pdChlLmVsZW1lbnQpLm9uKGUuY29uc3RydWN0b3IuRXZlbnQuQ0xJQ0ssZS5jb25maWcuc2VsZWN0b3IsZnVuY3Rpb24odCl7cmV0dXJuIGUudG9nZ2xlKHQpfSk7ZWxzZSBpZihuIT09Qyl7dmFyIGk9bj09PUU/ZS5jb25zdHJ1Y3Rvci5FdmVudC5NT1VTRUVOVEVSOmUuY29uc3RydWN0b3IuRXZlbnQuRk9DVVNJTixzPW49PT1FP2UuY29uc3RydWN0b3IuRXZlbnQuTU9VU0VMRUFWRTplLmNvbnN0cnVjdG9yLkV2ZW50LkZPQ1VTT1VUO3QoZS5lbGVtZW50KS5vbihpLGUuY29uZmlnLnNlbGVjdG9yLGZ1bmN0aW9uKHQpe3JldHVybiBlLl9lbnRlcih0KX0pLm9uKHMsZS5jb25maWcuc2VsZWN0b3IsZnVuY3Rpb24odCl7cmV0dXJuIGUuX2xlYXZlKHQpfSl9dChlLmVsZW1lbnQpLmNsb3Nlc3QoXCIubW9kYWxcIikub24oXCJoaWRlLmJzLm1vZGFsXCIsZnVuY3Rpb24oKXtyZXR1cm4gZS5oaWRlKCl9KX0pLHRoaXMuY29uZmlnLnNlbGVjdG9yP3RoaXMuY29uZmlnPXIoe30sdGhpcy5jb25maWcse3RyaWdnZXI6XCJtYW51YWxcIixzZWxlY3RvcjpcIlwifSk6dGhpcy5fZml4VGl0bGUoKX0sSS5fZml4VGl0bGU9ZnVuY3Rpb24oKXt2YXIgdD10eXBlb2YgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtb3JpZ2luYWwtdGl0bGVcIik7KHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiKXx8XCJzdHJpbmdcIiE9PXQpJiYodGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtb3JpZ2luYWwtdGl0bGVcIix0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGl0bGVcIil8fFwiXCIpLHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLFwiXCIpKX0sSS5fZW50ZXI9ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZOyhuPW58fHQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKGkpKXx8KG49bmV3IHRoaXMuY29uc3RydWN0b3IoZS5jdXJyZW50VGFyZ2V0LHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpLHQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKGksbikpLGUmJihuLl9hY3RpdmVUcmlnZ2VyW1wiZm9jdXNpblwiPT09ZS50eXBlP1Q6RV09ITApLHQobi5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKHApfHxuLl9ob3ZlclN0YXRlPT09Zj9uLl9ob3ZlclN0YXRlPWY6KGNsZWFyVGltZW91dChuLl90aW1lb3V0KSxuLl9ob3ZlclN0YXRlPWYsbi5jb25maWcuZGVsYXkmJm4uY29uZmlnLmRlbGF5LnNob3c/bi5fdGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5faG92ZXJTdGF0ZT09PWYmJm4uc2hvdygpfSxuLmNvbmZpZy5kZWxheS5zaG93KTpuLnNob3coKSl9LEkuX2xlYXZlPWZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWTsobj1ufHx0KGUuY3VycmVudFRhcmdldCkuZGF0YShpKSl8fChuPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGUuY3VycmVudFRhcmdldCx0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKSx0KGUuY3VycmVudFRhcmdldCkuZGF0YShpLG4pKSxlJiYobi5fYWN0aXZlVHJpZ2dlcltcImZvY3Vzb3V0XCI9PT1lLnR5cGU/VDpFXT0hMSksbi5faXNXaXRoQWN0aXZlVHJpZ2dlcigpfHwoY2xlYXJUaW1lb3V0KG4uX3RpbWVvdXQpLG4uX2hvdmVyU3RhdGU9ZCxuLmNvbmZpZy5kZWxheSYmbi5jb25maWcuZGVsYXkuaGlkZT9uLl90aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLl9ob3ZlclN0YXRlPT09ZCYmbi5oaWRlKCl9LG4uY29uZmlnLmRlbGF5LmhpZGUpOm4uaGlkZSgpKX0sSS5faXNXaXRoQWN0aXZlVHJpZ2dlcj1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9hY3RpdmVUcmlnZ2VyKWlmKHRoaXMuX2FjdGl2ZVRyaWdnZXJbdF0pcmV0dXJuITA7cmV0dXJuITF9LEkuX2dldENvbmZpZz1mdW5jdGlvbihuKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2Yobj1yKHt9LHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCx0KHRoaXMuZWxlbWVudCkuZGF0YSgpLG4pKS5kZWxheSYmKG4uZGVsYXk9e3Nob3c6bi5kZWxheSxoaWRlOm4uZGVsYXl9KSxcIm51bWJlclwiPT10eXBlb2Ygbi50aXRsZSYmKG4udGl0bGU9bi50aXRsZS50b1N0cmluZygpKSxcIm51bWJlclwiPT10eXBlb2Ygbi5jb250ZW50JiYobi5jb250ZW50PW4uY29udGVudC50b1N0cmluZygpKSxQLnR5cGVDaGVja0NvbmZpZyhlLG4sdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSksbn0sSS5fZ2V0RGVsZWdhdGVDb25maWc9ZnVuY3Rpb24oKXt2YXIgdD17fTtpZih0aGlzLmNvbmZpZylmb3IodmFyIGUgaW4gdGhpcy5jb25maWcpdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0W2VdIT09dGhpcy5jb25maWdbZV0mJih0W2VdPXRoaXMuY29uZmlnW2VdKTtyZXR1cm4gdH0sSS5fY2xlYW5UaXBDbGFzcz1mdW5jdGlvbigpe3ZhciBlPXQodGhpcy5nZXRUaXBFbGVtZW50KCkpLG49ZS5hdHRyKFwiY2xhc3NcIikubWF0Y2gobCk7bnVsbCE9PW4mJm4ubGVuZ3RoPjAmJmUucmVtb3ZlQ2xhc3Mobi5qb2luKFwiXCIpKX0sSS5faGFuZGxlUG9wcGVyUGxhY2VtZW50Q2hhbmdlPWZ1bmN0aW9uKHQpe3RoaXMuX2NsZWFuVGlwQ2xhc3MoKSx0aGlzLmFkZEF0dGFjaG1lbnRDbGFzcyh0aGlzLl9nZXRBdHRhY2htZW50KHQucGxhY2VtZW50KSl9LEkuX2ZpeFRyYW5zaXRpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFRpcEVsZW1lbnQoKSxuPXRoaXMuY29uZmlnLmFuaW1hdGlvbjtudWxsPT09ZS5nZXRBdHRyaWJ1dGUoXCJ4LXBsYWNlbWVudFwiKSYmKHQoZSkucmVtb3ZlQ2xhc3MoZyksdGhpcy5jb25maWcuYW5pbWF0aW9uPSExLHRoaXMuaGlkZSgpLHRoaXMuc2hvdygpLHRoaXMuY29uZmlnLmFuaW1hdGlvbj1uKX0sYS5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj10KHRoaXMpLmRhdGEoaSkscz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZTtpZigobnx8IS9kaXNwb3NlfGhpZGUvLnRlc3QoZSkpJiYobnx8KG49bmV3IGEodGhpcyxzKSx0KHRoaXMpLmRhdGEoaSxuKSksXCJzdHJpbmdcIj09dHlwZW9mIGUpKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgbltlXSl0aHJvdyBuZXcgVHlwZUVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInK2UrJ1wiJyk7bltlXSgpfX0pfSxzKGEsbnVsbCxbe2tleTpcIlZFUlNJT05cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIjQuMC4wXCJ9fSx7a2V5OlwiRGVmYXVsdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB1fX0se2tleTpcIk5BTUVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZX19LHtrZXk6XCJEQVRBX0tFWVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBpfX0se2tleTpcIkV2ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIF99fSx7a2V5OlwiRVZFTlRfS0VZXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG99fSx7a2V5OlwiRGVmYXVsdFR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaH19XSksYX0oKTtyZXR1cm4gdC5mbltlXT1JLl9qUXVlcnlJbnRlcmZhY2UsdC5mbltlXS5Db25zdHJ1Y3Rvcj1JLHQuZm5bZV0ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuW2VdPWEsSS5falF1ZXJ5SW50ZXJmYWNlfSxJfShlKSx4PWZ1bmN0aW9uKHQpe3ZhciBlPVwicG9wb3ZlclwiLG49XCJicy5wb3BvdmVyXCIsaT1cIi5cIituLG89dC5mbltlXSxhPW5ldyBSZWdFeHAoXCIoXnxcXFxccylicy1wb3BvdmVyXFxcXFMrXCIsXCJnXCIpLGw9cih7fSxVLkRlZmF1bHQse3BsYWNlbWVudDpcInJpZ2h0XCIsdHJpZ2dlcjpcImNsaWNrXCIsY29udGVudDpcIlwiLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+PGgzIGNsYXNzPVwicG9wb3Zlci1oZWFkZXJcIj48L2gzPjxkaXYgY2xhc3M9XCJwb3BvdmVyLWJvZHlcIj48L2Rpdj48L2Rpdj4nfSksaD1yKHt9LFUuRGVmYXVsdFR5cGUse2NvbnRlbnQ6XCIoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pXCJ9KSxjPVwiZmFkZVwiLHU9XCJzaG93XCIsZj1cIi5wb3BvdmVyLWhlYWRlclwiLGQ9XCIucG9wb3Zlci1ib2R5XCIsXz17SElERTpcImhpZGVcIitpLEhJRERFTjpcImhpZGRlblwiK2ksU0hPVzpcInNob3dcIitpLFNIT1dOOlwic2hvd25cIitpLElOU0VSVEVEOlwiaW5zZXJ0ZWRcIitpLENMSUNLOlwiY2xpY2tcIitpLEZPQ1VTSU46XCJmb2N1c2luXCIraSxGT0NVU09VVDpcImZvY3Vzb3V0XCIraSxNT1VTRUVOVEVSOlwibW91c2VlbnRlclwiK2ksTU9VU0VMRUFWRTpcIm1vdXNlbGVhdmVcIitpfSxnPWZ1bmN0aW9uKHIpe3ZhciBvLGc7ZnVuY3Rpb24gcCgpe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31nPXIsKG89cCkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZy5wcm90b3R5cGUpLG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW8sby5fX3Byb3RvX189Zzt2YXIgbT1wLnByb3RvdHlwZTtyZXR1cm4gbS5pc1dpdGhDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKXx8dGhpcy5fZ2V0Q29udGVudCgpfSxtLmFkZEF0dGFjaG1lbnRDbGFzcz1mdW5jdGlvbihlKXt0KHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5hZGRDbGFzcyhcImJzLXBvcG92ZXItXCIrZSl9LG0uZ2V0VGlwRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRpcD10aGlzLnRpcHx8dCh0aGlzLmNvbmZpZy50ZW1wbGF0ZSlbMF0sdGhpcy50aXB9LG0uc2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBlPXQodGhpcy5nZXRUaXBFbGVtZW50KCkpO3RoaXMuc2V0RWxlbWVudENvbnRlbnQoZS5maW5kKGYpLHRoaXMuZ2V0VGl0bGUoKSk7dmFyIG49dGhpcy5fZ2V0Q29udGVudCgpO1wiZnVuY3Rpb25cIj09dHlwZW9mIG4mJihuPW4uY2FsbCh0aGlzLmVsZW1lbnQpKSx0aGlzLnNldEVsZW1lbnRDb250ZW50KGUuZmluZChkKSxuKSxlLnJlbW92ZUNsYXNzKGMrXCIgXCIrdSl9LG0uX2dldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtY29udGVudFwiKXx8dGhpcy5jb25maWcuY29udGVudH0sbS5fY2xlYW5UaXBDbGFzcz1mdW5jdGlvbigpe3ZhciBlPXQodGhpcy5nZXRUaXBFbGVtZW50KCkpLG49ZS5hdHRyKFwiY2xhc3NcIikubWF0Y2goYSk7bnVsbCE9PW4mJm4ubGVuZ3RoPjAmJmUucmVtb3ZlQ2xhc3Mobi5qb2luKFwiXCIpKX0scC5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpLmRhdGEobikscz1cIm9iamVjdFwiPT10eXBlb2YgZT9lOm51bGw7aWYoKGl8fCEvZGVzdHJveXxoaWRlLy50ZXN0KGUpKSYmKGl8fChpPW5ldyBwKHRoaXMscyksdCh0aGlzKS5kYXRhKG4saSkpLFwic3RyaW5nXCI9PXR5cGVvZiBlKSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGlbZV0pdGhyb3cgbmV3IFR5cGVFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJytlKydcIicpO2lbZV0oKX19KX0scyhwLG51bGwsW3trZXk6XCJWRVJTSU9OXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCI0LjAuMFwifX0se2tleTpcIkRlZmF1bHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbH19LHtrZXk6XCJOQU1FXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSx7a2V5OlwiREFUQV9LRVlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbn19LHtrZXk6XCJFdmVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBffX0se2tleTpcIkVWRU5UX0tFWVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBpfX0se2tleTpcIkRlZmF1bHRUeXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGh9fV0pLHB9KFUpO3JldHVybiB0LmZuW2VdPWcuX2pRdWVyeUludGVyZmFjZSx0LmZuW2VdLkNvbnN0cnVjdG9yPWcsdC5mbltlXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm5bZV09byxnLl9qUXVlcnlJbnRlcmZhY2V9LGd9KGUpLEs9ZnVuY3Rpb24odCl7dmFyIGU9XCJzY3JvbGxzcHlcIixuPVwiYnMuc2Nyb2xsc3B5XCIsaT1cIi5cIituLG89dC5mbltlXSxhPXtvZmZzZXQ6MTAsbWV0aG9kOlwiYXV0b1wiLHRhcmdldDpcIlwifSxsPXtvZmZzZXQ6XCJudW1iZXJcIixtZXRob2Q6XCJzdHJpbmdcIix0YXJnZXQ6XCIoc3RyaW5nfGVsZW1lbnQpXCJ9LGg9e0FDVElWQVRFOlwiYWN0aXZhdGVcIitpLFNDUk9MTDpcInNjcm9sbFwiK2ksTE9BRF9EQVRBX0FQSTpcImxvYWRcIitpK1wiLmRhdGEtYXBpXCJ9LGM9XCJkcm9wZG93bi1pdGVtXCIsdT1cImFjdGl2ZVwiLGY9e0RBVEFfU1BZOidbZGF0YS1zcHk9XCJzY3JvbGxcIl0nLEFDVElWRTpcIi5hY3RpdmVcIixOQVZfTElTVF9HUk9VUDpcIi5uYXYsIC5saXN0LWdyb3VwXCIsTkFWX0xJTktTOlwiLm5hdi1saW5rXCIsTkFWX0lURU1TOlwiLm5hdi1pdGVtXCIsTElTVF9JVEVNUzpcIi5saXN0LWdyb3VwLWl0ZW1cIixEUk9QRE9XTjpcIi5kcm9wZG93blwiLERST1BET1dOX0lURU1TOlwiLmRyb3Bkb3duLWl0ZW1cIixEUk9QRE9XTl9UT0dHTEU6XCIuZHJvcGRvd24tdG9nZ2xlXCJ9LGQ9XCJvZmZzZXRcIixfPVwicG9zaXRpb25cIixnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbyhlLG4pe3ZhciBpPXRoaXM7dGhpcy5fZWxlbWVudD1lLHRoaXMuX3Njcm9sbEVsZW1lbnQ9XCJCT0RZXCI9PT1lLnRhZ05hbWU/d2luZG93OmUsdGhpcy5fY29uZmlnPXRoaXMuX2dldENvbmZpZyhuKSx0aGlzLl9zZWxlY3Rvcj10aGlzLl9jb25maWcudGFyZ2V0K1wiIFwiK2YuTkFWX0xJTktTK1wiLFwiK3RoaXMuX2NvbmZpZy50YXJnZXQrXCIgXCIrZi5MSVNUX0lURU1TK1wiLFwiK3RoaXMuX2NvbmZpZy50YXJnZXQrXCIgXCIrZi5EUk9QRE9XTl9JVEVNUyx0aGlzLl9vZmZzZXRzPVtdLHRoaXMuX3RhcmdldHM9W10sdGhpcy5fYWN0aXZlVGFyZ2V0PW51bGwsdGhpcy5fc2Nyb2xsSGVpZ2h0PTAsdCh0aGlzLl9zY3JvbGxFbGVtZW50KS5vbihoLlNDUk9MTCxmdW5jdGlvbih0KXtyZXR1cm4gaS5fcHJvY2Vzcyh0KX0pLHRoaXMucmVmcmVzaCgpLHRoaXMuX3Byb2Nlc3MoKX12YXIgZz1vLnByb3RvdHlwZTtyZXR1cm4gZy5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPXRoaXMuX3Njcm9sbEVsZW1lbnQ9PT10aGlzLl9zY3JvbGxFbGVtZW50LndpbmRvdz9kOl8saT1cImF1dG9cIj09PXRoaXMuX2NvbmZpZy5tZXRob2Q/bjp0aGlzLl9jb25maWcubWV0aG9kLHM9aT09PV8/dGhpcy5fZ2V0U2Nyb2xsVG9wKCk6MDt0aGlzLl9vZmZzZXRzPVtdLHRoaXMuX3RhcmdldHM9W10sdGhpcy5fc2Nyb2xsSGVpZ2h0PXRoaXMuX2dldFNjcm9sbEhlaWdodCgpLHQubWFrZUFycmF5KHQodGhpcy5fc2VsZWN0b3IpKS5tYXAoZnVuY3Rpb24oZSl7dmFyIG4scj1QLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZSk7aWYociYmKG49dChyKVswXSksbil7dmFyIG89bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihvLndpZHRofHxvLmhlaWdodClyZXR1cm5bdChuKVtpXSgpLnRvcCtzLHJdfXJldHVybiBudWxsfSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0fSkuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0WzBdLWVbMF19KS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX29mZnNldHMucHVzaCh0WzBdKSxlLl90YXJnZXRzLnB1c2godFsxXSl9KX0sZy5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsbiksdCh0aGlzLl9zY3JvbGxFbGVtZW50KS5vZmYoaSksdGhpcy5fZWxlbWVudD1udWxsLHRoaXMuX3Njcm9sbEVsZW1lbnQ9bnVsbCx0aGlzLl9jb25maWc9bnVsbCx0aGlzLl9zZWxlY3Rvcj1udWxsLHRoaXMuX29mZnNldHM9bnVsbCx0aGlzLl90YXJnZXRzPW51bGwsdGhpcy5fYWN0aXZlVGFyZ2V0PW51bGwsdGhpcy5fc2Nyb2xsSGVpZ2h0PW51bGx9LGcuX2dldENvbmZpZz1mdW5jdGlvbihuKXtpZihcInN0cmluZ1wiIT10eXBlb2Yobj1yKHt9LGEsbikpLnRhcmdldCl7dmFyIGk9dChuLnRhcmdldCkuYXR0cihcImlkXCIpO2l8fChpPVAuZ2V0VUlEKGUpLHQobi50YXJnZXQpLmF0dHIoXCJpZFwiLGkpKSxuLnRhcmdldD1cIiNcIitpfXJldHVybiBQLnR5cGVDaGVja0NvbmZpZyhlLG4sbCksbn0sZy5fZ2V0U2Nyb2xsVG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQ9PT13aW5kb3c/dGhpcy5fc2Nyb2xsRWxlbWVudC5wYWdlWU9mZnNldDp0aGlzLl9zY3JvbGxFbGVtZW50LnNjcm9sbFRvcH0sZy5fZ2V0U2Nyb2xsSGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsSGVpZ2h0fHxNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KX0sZy5fZ2V0T2Zmc2V0SGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQ9PT13aW5kb3c/d2luZG93LmlubmVySGVpZ2h0OnRoaXMuX3Njcm9sbEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0fSxnLl9wcm9jZXNzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0U2Nyb2xsVG9wKCkrdGhpcy5fY29uZmlnLm9mZnNldCxlPXRoaXMuX2dldFNjcm9sbEhlaWdodCgpLG49dGhpcy5fY29uZmlnLm9mZnNldCtlLXRoaXMuX2dldE9mZnNldEhlaWdodCgpO2lmKHRoaXMuX3Njcm9sbEhlaWdodCE9PWUmJnRoaXMucmVmcmVzaCgpLHQ+PW4pe3ZhciBpPXRoaXMuX3RhcmdldHNbdGhpcy5fdGFyZ2V0cy5sZW5ndGgtMV07dGhpcy5fYWN0aXZlVGFyZ2V0IT09aSYmdGhpcy5fYWN0aXZhdGUoaSl9ZWxzZXtpZih0aGlzLl9hY3RpdmVUYXJnZXQmJnQ8dGhpcy5fb2Zmc2V0c1swXSYmdGhpcy5fb2Zmc2V0c1swXT4wKXJldHVybiB0aGlzLl9hY3RpdmVUYXJnZXQ9bnVsbCx2b2lkIHRoaXMuX2NsZWFyKCk7Zm9yKHZhciBzPXRoaXMuX29mZnNldHMubGVuZ3RoO3MtLTspe3RoaXMuX2FjdGl2ZVRhcmdldCE9PXRoaXMuX3RhcmdldHNbc10mJnQ+PXRoaXMuX29mZnNldHNbc10mJihcInVuZGVmaW5lZFwiPT10eXBlb2YgdGhpcy5fb2Zmc2V0c1tzKzFdfHx0PHRoaXMuX29mZnNldHNbcysxXSkmJnRoaXMuX2FjdGl2YXRlKHRoaXMuX3RhcmdldHNbc10pfX19LGcuX2FjdGl2YXRlPWZ1bmN0aW9uKGUpe3RoaXMuX2FjdGl2ZVRhcmdldD1lLHRoaXMuX2NsZWFyKCk7dmFyIG49dGhpcy5fc2VsZWN0b3Iuc3BsaXQoXCIsXCIpO249bi5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQrJ1tkYXRhLXRhcmdldD1cIicrZSsnXCJdLCcrdCsnW2hyZWY9XCInK2UrJ1wiXSd9KTt2YXIgaT10KG4uam9pbihcIixcIikpO2kuaGFzQ2xhc3MoYyk/KGkuY2xvc2VzdChmLkRST1BET1dOKS5maW5kKGYuRFJPUERPV05fVE9HR0xFKS5hZGRDbGFzcyh1KSxpLmFkZENsYXNzKHUpKTooaS5hZGRDbGFzcyh1KSxpLnBhcmVudHMoZi5OQVZfTElTVF9HUk9VUCkucHJldihmLk5BVl9MSU5LUytcIiwgXCIrZi5MSVNUX0lURU1TKS5hZGRDbGFzcyh1KSxpLnBhcmVudHMoZi5OQVZfTElTVF9HUk9VUCkucHJldihmLk5BVl9JVEVNUykuY2hpbGRyZW4oZi5OQVZfTElOS1MpLmFkZENsYXNzKHUpKSx0KHRoaXMuX3Njcm9sbEVsZW1lbnQpLnRyaWdnZXIoaC5BQ1RJVkFURSx7cmVsYXRlZFRhcmdldDplfSl9LGcuX2NsZWFyPWZ1bmN0aW9uKCl7dCh0aGlzLl9zZWxlY3RvcikuZmlsdGVyKGYuQUNUSVZFKS5yZW1vdmVDbGFzcyh1KX0sby5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaT10KHRoaXMpLmRhdGEobik7aWYoaXx8KGk9bmV3IG8odGhpcyxcIm9iamVjdFwiPT10eXBlb2YgZSYmZSksdCh0aGlzKS5kYXRhKG4saSkpLFwic3RyaW5nXCI9PXR5cGVvZiBlKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgaVtlXSl0aHJvdyBuZXcgVHlwZUVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInK2UrJ1wiJyk7aVtlXSgpfX0pfSxzKG8sbnVsbCxbe2tleTpcIlZFUlNJT05cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIjQuMC4wXCJ9fSx7a2V5OlwiRGVmYXVsdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBhfX1dKSxvfSgpO3JldHVybiB0KHdpbmRvdykub24oaC5MT0FEX0RBVEFfQVBJLGZ1bmN0aW9uKCl7Zm9yKHZhciBlPXQubWFrZUFycmF5KHQoZi5EQVRBX1NQWSkpLG49ZS5sZW5ndGg7bi0tOyl7dmFyIGk9dChlW25dKTtnLl9qUXVlcnlJbnRlcmZhY2UuY2FsbChpLGkuZGF0YSgpKX19KSx0LmZuW2VdPWcuX2pRdWVyeUludGVyZmFjZSx0LmZuW2VdLkNvbnN0cnVjdG9yPWcsdC5mbltlXS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuZm5bZV09byxnLl9qUXVlcnlJbnRlcmZhY2V9LGd9KGUpLFY9ZnVuY3Rpb24odCl7dmFyIGU9XCJicy50YWJcIixuPVwiLlwiK2UsaT10LmZuLnRhYixyPXtISURFOlwiaGlkZVwiK24sSElEREVOOlwiaGlkZGVuXCIrbixTSE9XOlwic2hvd1wiK24sU0hPV046XCJzaG93blwiK24sQ0xJQ0tfREFUQV9BUEk6XCJjbGljay5icy50YWIuZGF0YS1hcGlcIn0sbz1cImRyb3Bkb3duLW1lbnVcIixhPVwiYWN0aXZlXCIsbD1cImRpc2FibGVkXCIsaD1cImZhZGVcIixjPVwic2hvd1wiLHU9XCIuZHJvcGRvd25cIixmPVwiLm5hdiwgLmxpc3QtZ3JvdXBcIixkPVwiLmFjdGl2ZVwiLF89XCI+IGxpID4gLmFjdGl2ZVwiLGc9J1tkYXRhLXRvZ2dsZT1cInRhYlwiXSwgW2RhdGEtdG9nZ2xlPVwicGlsbFwiXSwgW2RhdGEtdG9nZ2xlPVwibGlzdFwiXScscD1cIi5kcm9wZG93bi10b2dnbGVcIixtPVwiPiAuZHJvcGRvd24tbWVudSAuYWN0aXZlXCIsdj1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCl7dGhpcy5fZWxlbWVudD10fXZhciBpPW4ucHJvdG90eXBlO3JldHVybiBpLnNob3c9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCEodGhpcy5fZWxlbWVudC5wYXJlbnROb2RlJiZ0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmdCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhhKXx8dCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhsKSkpe3ZhciBuLGkscz10KHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoZilbMF0sbz1QLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7aWYocyl7dmFyIGg9XCJVTFwiPT09cy5ub2RlTmFtZT9fOmQ7aT0oaT10Lm1ha2VBcnJheSh0KHMpLmZpbmQoaCkpKVtpLmxlbmd0aC0xXX12YXIgYz10LkV2ZW50KHIuSElERSx7cmVsYXRlZFRhcmdldDp0aGlzLl9lbGVtZW50fSksdT10LkV2ZW50KHIuU0hPVyx7cmVsYXRlZFRhcmdldDppfSk7aWYoaSYmdChpKS50cmlnZ2VyKGMpLHQodGhpcy5fZWxlbWVudCkudHJpZ2dlcih1KSwhdS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmIWMuaXNEZWZhdWx0UHJldmVudGVkKCkpe28mJihuPXQobylbMF0pLHRoaXMuX2FjdGl2YXRlKHRoaXMuX2VsZW1lbnQscyk7dmFyIGc9ZnVuY3Rpb24oKXt2YXIgbj10LkV2ZW50KHIuSElEREVOLHtyZWxhdGVkVGFyZ2V0OmUuX2VsZW1lbnR9KSxzPXQuRXZlbnQoci5TSE9XTix7cmVsYXRlZFRhcmdldDppfSk7dChpKS50cmlnZ2VyKG4pLHQoZS5fZWxlbWVudCkudHJpZ2dlcihzKX07bj90aGlzLl9hY3RpdmF0ZShuLG4ucGFyZW50Tm9kZSxnKTpnKCl9fX0saS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsZSksdGhpcy5fZWxlbWVudD1udWxsfSxpLl9hY3RpdmF0ZT1mdW5jdGlvbihlLG4saSl7dmFyIHM9dGhpcyxyPShcIlVMXCI9PT1uLm5vZGVOYW1lP3QobikuZmluZChfKTp0KG4pLmNoaWxkcmVuKGQpKVswXSxvPWkmJlAuc3VwcG9ydHNUcmFuc2l0aW9uRW5kKCkmJnImJnQocikuaGFzQ2xhc3MoaCksYT1mdW5jdGlvbigpe3JldHVybiBzLl90cmFuc2l0aW9uQ29tcGxldGUoZSxyLGkpfTtyJiZvP3Qocikub25lKFAuVFJBTlNJVElPTl9FTkQsYSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTphKCl9LGkuX3RyYW5zaXRpb25Db21wbGV0ZT1mdW5jdGlvbihlLG4saSl7aWYobil7dChuKS5yZW1vdmVDbGFzcyhjK1wiIFwiK2EpO3ZhciBzPXQobi5wYXJlbnROb2RlKS5maW5kKG0pWzBdO3MmJnQocykucmVtb3ZlQ2xhc3MoYSksXCJ0YWJcIj09PW4uZ2V0QXR0cmlidXRlKFwicm9sZVwiKSYmbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITEpfWlmKHQoZSkuYWRkQ2xhc3MoYSksXCJ0YWJcIj09PWUuZ2V0QXR0cmlidXRlKFwicm9sZVwiKSYmZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITApLFAucmVmbG93KGUpLHQoZSkuYWRkQ2xhc3MoYyksZS5wYXJlbnROb2RlJiZ0KGUucGFyZW50Tm9kZSkuaGFzQ2xhc3Mobykpe3ZhciByPXQoZSkuY2xvc2VzdCh1KVswXTtyJiZ0KHIpLmZpbmQocCkuYWRkQ2xhc3MoYSksZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsITApfWkmJmkoKX0sbi5falF1ZXJ5SW50ZXJmYWNlPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcz10KHRoaXMpLHI9cy5kYXRhKGUpO2lmKHJ8fChyPW5ldyBuKHRoaXMpLHMuZGF0YShlLHIpKSxcInN0cmluZ1wiPT10eXBlb2YgaSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHJbaV0pdGhyb3cgbmV3IFR5cGVFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJytpKydcIicpO3JbaV0oKX19KX0scyhuLG51bGwsW3trZXk6XCJWRVJTSU9OXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCI0LjAuMFwifX1dKSxufSgpO3JldHVybiB0KGRvY3VtZW50KS5vbihyLkNMSUNLX0RBVEFfQVBJLGcsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHYuX2pRdWVyeUludGVyZmFjZS5jYWxsKHQodGhpcyksXCJzaG93XCIpfSksdC5mbi50YWI9di5falF1ZXJ5SW50ZXJmYWNlLHQuZm4udGFiLkNvbnN0cnVjdG9yPXYsdC5mbi50YWIubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LmZuLnRhYj1pLHYuX2pRdWVyeUludGVyZmFjZX0sdn0oZSk7IWZ1bmN0aW9uKHQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJCb290c3RyYXAncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeS4galF1ZXJ5IG11c3QgYmUgaW5jbHVkZWQgYmVmb3JlIEJvb3RzdHJhcCdzIEphdmFTY3JpcHQuXCIpO3ZhciBlPXQuZm4uanF1ZXJ5LnNwbGl0KFwiIFwiKVswXS5zcGxpdChcIi5cIik7aWYoZVswXTwyJiZlWzFdPDl8fDE9PT1lWzBdJiY5PT09ZVsxXSYmZVsyXTwxfHxlWzBdPj00KXRocm93IG5ldyBFcnJvcihcIkJvb3RzdHJhcCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgYXQgbGVhc3QgalF1ZXJ5IHYxLjkuMSBidXQgbGVzcyB0aGFuIHY0LjAuMFwiKX0oZSksdC5VdGlsPVAsdC5BbGVydD1MLHQuQnV0dG9uPVIsdC5DYXJvdXNlbD1qLHQuQ29sbGFwc2U9SCx0LkRyb3Bkb3duPVcsdC5Nb2RhbD1NLHQuUG9wb3Zlcj14LHQuU2Nyb2xsc3B5PUssdC5UYWI9Vix0LlRvb2x0aXA9VSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ym9vdHN0cmFwLm1pbi5qcy5tYXAiLCIvKlxuICogc2VsZWN0aW9uLXNoYXJlcjogTWVkaXVtIGxpa2UgcG9wb3ZlciBtZW51IHRvIHNoYXJlIG9uIFR3aXR0ZXIgb3IgYnkgZW1haWwgYW55IHRleHQgc2VsZWN0ZWQgb24gdGhlIHBhZ2VcbiAqXG4gKiAtLSBSZXF1aXJlcyBqUXVlcnkgLS1cbiAqIC0tIEFNRCBjb21wYXRpYmxlICAtLVxuICpcbiAqIEF1dGhvcjogWGF2aWVyIERhbW1hbiAoQHhkYW1tYW4pXG4gKiBHSVQ6IGh0dHBzOi8vZ2l0aHViLmNvbS94ZGFtbWFuL3NoYXJlLXNlbGVjdGlvblxuICogTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oJCkge1xuXG4gIHZhciBTZWxlY3Rpb25TaGFyZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBpZih0eXBlb2Ygb3B0aW9ucyA9PSAnc3RyaW5nJylcbiAgICAgICAgb3B0aW9ucyA9IHsgZWxlbWVudHM6IG9wdGlvbnMgfTtcblxuICAgIHRoaXMuc2VsID0gbnVsbDtcbiAgICB0aGlzLnRleHRTZWxlY3Rpb249Jyc7XG4gICAgdGhpcy5odG1sU2VsZWN0aW9uPScnO1xuXG4gICAgdGhpcy5hcHBJZCA9ICQoJ21ldGFbcHJvcGVydHk9XCJmYjphcHBfaWRcIl0nKS5hdHRyKFwiY29udGVudFwiKSB8fCAkKCdtZXRhW3Byb3BlcnR5PVwiZmI6YXBwX2lkXCJdJykuYXR0cihcInZhbHVlXCIpO1xuICAgIHRoaXMudXJsMnNoYXJlID0gJCgnbWV0YVtwcm9wZXJ0eT1cIm9nOnVybFwiXScpLmF0dHIoXCJjb250ZW50XCIpIHx8ICQoJ21ldGFbcHJvcGVydHk9XCJvZzp1cmxcIl0nKS5hdHRyKFwidmFsdWVcIikgfHwgd2luZG93LmxvY2F0aW9uLmhyZWY7XG5cbiAgICB0aGlzLmdldFNlbGVjdGlvblRleHQgPSBmdW5jdGlvbihzZWwpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBcIlwiLCB0ZXh0ID0gXCJcIjtcbiAgICAgICAgc2VsID0gc2VsIHx8IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgaWYgKHNlbC5yYW5nZUNvdW50KSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzZWwucmFuZ2VDb3VudDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNlbC5nZXRSYW5nZUF0KGkpLmNsb25lQ29udGVudHMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0ID0gY29udGFpbmVyLnRleHRDb250ZW50O1xuICAgICAgICAgICAgaHRtbCA9IGNvbnRhaW5lci5pbm5lckhUTUw7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi50ZXh0U2VsZWN0aW9uID0gdGV4dDtcbiAgICAgICAgc2VsZi5odG1sU2VsZWN0aW9uID0gaHRtbCB8fCB0ZXh0OyAgICAgICBcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfTtcblxuICAgIHRoaXMuc2VsZWN0aW9uRGlyZWN0aW9uID0gZnVuY3Rpb24oc2VsZWN0aW9uKSB7XG4gICAgICB2YXIgc2VsID0gc2VsZWN0aW9uIHx8IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICBpZighc2VsLmFuY2hvck5vZGUpIHJldHVybiAwO1xuICAgICAgcmFuZ2Uuc2V0U3RhcnQoc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpO1xuICAgICAgcmFuZ2Uuc2V0RW5kKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCk7XG4gICAgICB2YXIgZGlyZWN0aW9uID0gKHJhbmdlLmNvbGxhcHNlZCkgPyBcImJhY2t3YXJkXCIgOiBcImZvcndhcmRcIjtcbiAgICAgIHJhbmdlLmRldGFjaCgpO1xuICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcbiAgICB9O1xuXG4gICAgdGhpcy5zaG93UG9wdW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYucG9wdW5kZXIgPSBzZWxmLnBvcHVuZGVyIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3Rpb25TaGFyZXJQb3B1bmRlcicpO1xuXG4gICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgdmFyIHNlbGVjdGlvbiA9IHNlbGYuZ2V0U2VsZWN0aW9uVGV4dChzZWwpO1xuXG4gICAgICBpZihzZWwuaXNDb2xsYXBzZWQgfHwgc2VsZWN0aW9uLmxlbmd0aCA8IDEwIHx8ICFzZWxlY3Rpb24ubWF0Y2goLyAvKSlcbiAgICAgICAgcmV0dXJuIHNlbGYuaGlkZVBvcHVuZGVyKCk7XG5cbiAgICAgIGlmKHNlbGYucG9wdW5kZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZml4ZWRcIikpIHtcbiAgICAgICAgICBzZWxmLnBvcHVuZGVyLnN0eWxlLmJvdHRvbSA9IDA7XG4gICAgICAgICAgcmV0dXJuIHNlbGYucG9wdW5kZXIuc3R5bGUuYm90dG9tO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcbiAgICAgIHZhciBub2RlID0gcmFuZ2UuZW5kQ29udGFpbmVyLnBhcmVudE5vZGU7IC8vIFRoZSA8cD4gd2hlcmUgdGhlIHNlbGVjdGlvbiBlbmRzXG5cbiAgICAgIC8vIElmIHRoZSBwb3B1bmRlciBpcyBjdXJyZW50bHkgZGlzcGxheWVkXG4gICAgICBpZihzZWxmLnBvcHVuZGVyLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICAgIC8vIElmIHRoZSBwb3B1bmRlciBpcyBhbHJlYWR5IGF0IHRoZSByaWdodCBwbGFjZSwgd2UgZG8gbm90aGluZ1xuICAgICAgICBpZihNYXRoLmNlaWwoc2VsZi5wb3B1bmRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApID09IE1hdGguY2VpbChub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSkpXG4gICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgd2UgZmlyc3QgaGlkZSBpdCBhbmQgdGhlIHdlIHRyeSBhZ2FpblxuICAgICAgICByZXR1cm4gc2VsZi5oaWRlUG9wdW5kZXIoc2VsZi5zaG93UG9wdW5kZXIpO1xuICAgICAgfVxuXG4gICAgICBpZihub2RlLm5leHRFbGVtZW50U2libGluZykge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHB1c2ggZG93biBhbGwgdGhlIGZvbGxvd2luZyBzaWJsaW5nc1xuICAgICAgICBzZWxmLnB1c2hTaWJsaW5ncyhub2RlKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIGFwcGVuZCBhIG5ldyBlbGVtZW50IHRvIHB1c2ggYWxsIHRoZSBjb250ZW50IGJlbG93XG4gICAgICAgIGlmKCFzZWxmLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgc2VsZi5wbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHNlbGYucGxhY2Vob2xkZXIuY2xhc3NOYW1lID0gJ3NlbGVjdGlvblNoYXJlclBsYWNlaG9sZGVyJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHdlIGFkZCBhIGRpdiBiZXR3ZWVuIHR3byA8cD4gdGhhdCBoYXZlIGEgMWVtIG1hcmdpbiwgdGhlIHNwYWNlIGJldHdlZW4gdGhlbVxuICAgICAgICAvLyB3aWxsIGJlY29tZSAyeCAxZW0uIFNvIHdlIGdpdmUgdGhlIHBsYWNlaG9sZGVyIGEgbmVnYXRpdmUgbWFyZ2luIHRvIGF2b2lkIHRoYXRcbiAgICAgICAgdmFyIG1hcmdpbiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpLm1hcmdpbkJvdHRvbTtcbiAgICAgICAgc2VsZi5wbGFjZWhvbGRlci5zdHlsZS5oZWlnaHQgPSBtYXJnaW47XG4gICAgICAgIHNlbGYucGxhY2Vob2xkZXIuc3R5bGUubWFyZ2luQm90dG9tID0gKC0yICogcGFyc2VJbnQobWFyZ2luLDEwKSkrJ3B4JztcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLnBsYWNlaG9sZGVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gc2Nyb2xsIG9mZnNldFxuICAgICAgdmFyIG9mZnNldFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCArIG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xuICAgICAgc2VsZi5wb3B1bmRlci5zdHlsZS50b3AgPSBNYXRoLmNlaWwob2Zmc2V0VG9wKSsncHgnO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihzZWxmLnBsYWNlaG9sZGVyKSBzZWxmLnBsYWNlaG9sZGVyLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgICAgc2VsZi5wb3B1bmRlci5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICB9LDApO1xuXG4gICAgfTtcblxuICAgIHRoaXMucHVzaFNpYmxpbmdzID0gZnVuY3Rpb24oZWwpIHtcbiAgICAgIHdoaWxlKGVsPWVsLm5leHRFbGVtZW50U2libGluZykgeyBlbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3Rpb25TaGFyZXInKTsgZWwuY2xhc3NMaXN0LmFkZCgnbW92ZURvd24nKTsgfVxuICAgIH07XG5cbiAgICB0aGlzLmhpZGVQb3B1bmRlciA9IGZ1bmN0aW9uKGNiKSB7XG4gICAgICBjYiA9IGNiIHx8IGZ1bmN0aW9uKCkge307XG5cbiAgICAgIGlmKHNlbGYucG9wdW5kZXIgPT0gXCJmaXhlZFwiKSB7XG4gICAgICAgIHNlbGYucG9wdW5kZXIuc3R5bGUuYm90dG9tID0gJy01MHB4JztcbiAgICAgICAgcmV0dXJuIGNiKCk7XG4gICAgICB9XG5cbiAgICAgIHNlbGYucG9wdW5kZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgaWYoc2VsZi5wbGFjZWhvbGRlcikgc2VsZi5wbGFjZWhvbGRlci5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAvLyBXZSBuZWVkIHRvIHB1c2ggYmFjayB1cCBhbGwgdGhlIHNpYmxpbmdzXG4gICAgICB2YXIgZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW92ZURvd24nKTtcbiAgICAgIHdoaWxlKGVsPWVsc1swXSkge1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ21vdmVEb3duJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENTUzMgdHJhbnNpdGlvbiB0YWtlcyAwLjZzXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihzZWxmLnBsYWNlaG9sZGVyKSBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShzZWxmLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgY2IoKTtcbiAgICAgIH0sIDYwMCk7XG5cbiAgICB9O1xuXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oZSkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgdmFyIHNlbGVjdGlvbiA9IHNlbGYuZ2V0U2VsZWN0aW9uVGV4dChzZWwpO1xuICAgICAgICBpZighc2VsLmlzQ29sbGFwc2VkICYmIHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24ubGVuZ3RoPjEwICYmIHNlbGVjdGlvbi5tYXRjaCgvIC8pKSB7XG4gICAgICAgICAgdmFyIHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgICAgICAgdmFyIHRvcE9mZnNldCA9IHJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIDU7XG4gICAgICAgICAgdmFyIHRvcCA9IHRvcE9mZnNldCArIHNlbGYuZ2V0UG9zaXRpb24oKS55IC0gc2VsZi4kcG9wb3Zlci5oZWlnaHQoKTtcbiAgICAgICAgICB2YXIgbGVmdCA9IDA7XG4gICAgICAgICAgaWYoZSkge1xuICAgICAgICAgICAgbGVmdCA9IGUucGFnZVg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIG9iaiA9IHNlbC5hbmNob3JOb2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICBsZWZ0ICs9IG9iai5vZmZzZXRXaWR0aCAvIDI7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgIGxlZnQgKz0gb2JqLm9mZnNldExlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZShvYmogPSBvYmoub2Zmc2V0UGFyZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3dpdGNoKHNlbGYuc2VsZWN0aW9uRGlyZWN0aW9uKHNlbCkpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ZvcndhcmQnOlxuICAgICAgICAgICAgICBsZWZ0IC09IHNlbGYuJHBvcG92ZXIud2lkdGgoKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdiYWNrd2FyZCc6XG4gICAgICAgICAgICAgIGxlZnQgKz0gc2VsZi4kcG9wb3Zlci53aWR0aCgpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZi4kcG9wb3Zlci5yZW1vdmVDbGFzcyhcImFuaW1cIikuY3NzKFwidG9wXCIsIHRvcCsxMCkuY3NzKFwibGVmdFwiLCBsZWZ0KS5zaG93KCk7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuJHBvcG92ZXIuYWRkQ2xhc3MoXCJhbmltXCIpLmNzcyhcInRvcFwiLCB0b3ApO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9LCAxMCk7XG4gICAgfTtcblxuICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHNlbGYuJHBvcG92ZXIuaGlkZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLnNtYXJ0X3RydW5jYXRlID0gZnVuY3Rpb24oc3RyLCBuKXtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHJldHVybiBzdHI7XG4gICAgICAgIHZhciB0b0xvbmcgPSBzdHIubGVuZ3RoPm4sXG4gICAgICAgICAgICBzXyA9IHRvTG9uZyA/IHN0ci5zdWJzdHIoMCxuLTEpIDogc3RyO1xuICAgICAgICBzXyA9IHRvTG9uZyA/IHNfLnN1YnN0cigwLHNfLmxhc3RJbmRleE9mKCcgJykpIDogc187XG4gICAgICAgIHJldHVybiAgdG9Mb25nID8gc18gKycuLi4nIDogc187XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0UmVsYXRlZFR3aXR0ZXJBY2NvdW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHVzZXJuYW1lcyA9IFtdO1xuXG4gICAgICB2YXIgY3JlYXRvciA9ICQoJ21ldGFbbmFtZT1cInR3aXR0ZXI6Y3JlYXRvclwiXScpLmF0dHIoXCJjb250ZW50XCIpIHx8ICQoJ21ldGFbbmFtZT1cInR3aXR0ZXI6Y3JlYXRvclwiXScpLmF0dHIoXCJ2YWx1ZVwiKTtcbiAgICAgIGlmKGNyZWF0b3IpIHVzZXJuYW1lcy5wdXNoKGNyZWF0b3IpO1xuXG5cbiAgICAgIC8vIFdlIHNjcmFwZSB0aGUgcGFnZSB0byBmaW5kIGEgbGluayB0byBodHRwKHMpOi8vdHdpdHRlci5jb20vdXNlcm5hbWVcbiAgICAgIHZhciBhbmNob3JzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2EnKTtcbiAgICAgIGZvcih2YXIgaT0wLCBsZW49YW5jaG9ycy5sZW5ndGg7aTxsZW47aSsrKSB7XG4gICAgICAgIGlmKGFuY2hvcnNbaV0uYXR0cmlidXRlcy5ocmVmICYmIHR5cGVvZiBhbmNob3JzW2ldLmF0dHJpYnV0ZXMuaHJlZi52YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgICAgICBcbiAgICAgICAgICB2YXIgbWF0Y2hlcyA9IGFuY2hvcnNbaV0uYXR0cmlidXRlcy5ocmVmLnZhbHVlLm1hdGNoKC9eaHR0cHM/OlxcL1xcL3R3aXR0ZXJcXC5jb21cXC8oW2EtejAtOV9dezEsMjB9KS9pKTtcbiAgICAgICAgICBpZihtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID4gMSAmJiBbJ3dpZGdldHMnLCdpbnRlbnQnXS5pbmRleE9mKG1hdGNoZXNbMV0pPT0tMSlcbiAgICAgICAgICAgIHVzZXJuYW1lcy5wdXNoKG1hdGNoZXNbMV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmKHVzZXJuYW1lcy5sZW5ndGggPiAwKVxuICAgICAgICByZXR1cm4gdXNlcm5hbWVzLmpvaW4oJywnKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH07XG5cbiAgICB0aGlzLnNoYXJlVHdpdHRlciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgdmFyIHRleHQgPSBcIuKAnFwiK3NlbGYuc21hcnRfdHJ1bmNhdGUoc2VsZi50ZXh0U2VsZWN0aW9uLnRyaW0oKSwgMTE0KStcIuKAnVwiO1xuICAgICAgdmFyIHVybCA9ICdodHRwOi8vdHdpdHRlci5jb20vaW50ZW50L3R3ZWV0P3RleHQ9JytlbmNvZGVVUklDb21wb25lbnQodGV4dCkrJyZyZWxhdGVkPScrc2VsZi5nZXRSZWxhdGVkVHdpdHRlckFjY291bnRzKCkrJyZ1cmw9JytlbmNvZGVVUklDb21wb25lbnQoc2VsZi51cmwyc2hhcmUpO1xuXG4gICAgICAvLyBXZSBvbmx5IHNob3cgdGhlIHZpYSBAdHdpdHRlcjpzaXRlIGlmIHdlIGhhdmUgZW5vdWdoIHJvb21cbiAgICAgIGlmKHNlbGYudmlhVHdpdHRlckFjY291bnQgJiYgdGV4dC5sZW5ndGggPCAoMTIwLTYtc2VsZi52aWFUd2l0dGVyQWNjb3VudC5sZW5ndGgpKVxuICAgICAgICB1cmwgKz0gJyZ2aWE9JytzZWxmLnZpYVR3aXR0ZXJBY2NvdW50O1xuXG4gICAgICB2YXIgdyA9IDY0MCwgaD00NDA7XG4gICAgICB2YXIgbGVmdCA9IChzY3JlZW4ud2lkdGgvMiktKHcvMik7XG4gICAgICB2YXIgdG9wID0gKHNjcmVlbi5oZWlnaHQvMiktKGgvMiktMTAwO1xuICAgICAgd2luZG93Lm9wZW4odXJsLCBcInNoYXJlX3R3aXR0ZXJcIiwgJ3Rvb2xiYXI9bm8sIGxvY2F0aW9uPW5vLCBkaXJlY3Rvcmllcz1ubywgc3RhdHVzPW5vLCBtZW51YmFyPW5vLCBzY3JvbGxiYXJzPW5vLCByZXNpemFibGU9bm8sIGNvcHloaXN0b3J5PW5vLCB3aWR0aD0nK3crJywgaGVpZ2h0PScraCsnLCB0b3A9Jyt0b3ArJywgbGVmdD0nK2xlZnQpO1xuICAgICAgc2VsZi5oaWRlKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHRoaXMuY29weVRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiQ29weVwiKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zaGFyZUZhY2Vib29rID0gZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIHRleHQgPSBzZWxmLmh0bWxTZWxlY3Rpb24ucmVwbGFjZSgvPHBbXj5dKj4vaWcsJ1xcbicpLnJlcGxhY2UoLzxcXC9wPnwgIC9pZywnJykudHJpbSgpO1xuXG4gICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9kaWFsb2cvZmVlZD8nICtcbiAgICAgICAgICAgICAgICAnYXBwX2lkPScrc2VsZi5hcHBJZCArXG4gICAgICAgICAgICAgICAgJyZkaXNwbGF5PXBvcHVwJytcbiAgICAgICAgICAgICAgICAnJmNhcHRpb249JytlbmNvZGVVUklDb21wb25lbnQodGV4dCkrXG4gICAgICAgICAgICAgICAgJyZsaW5rPScrZW5jb2RlVVJJQ29tcG9uZW50KHNlbGYudXJsMnNoYXJlKStcbiAgICAgICAgICAgICAgICAnJmhyZWY9JytlbmNvZGVVUklDb21wb25lbnQoc2VsZi51cmwyc2hhcmUpK1xuICAgICAgICAgICAgICAgICcmcmVkaXJlY3RfdXJpPScrZW5jb2RlVVJJQ29tcG9uZW50KHNlbGYudXJsMnNoYXJlKTtcbiAgICAgIHZhciB3ID0gNjQwLCBoPTQ0MDtcbiAgICAgIHZhciBsZWZ0ID0gKHNjcmVlbi53aWR0aC8yKS0ody8yKTtcbiAgICAgIHZhciB0b3AgPSAoc2NyZWVuLmhlaWdodC8yKS0oaC8yKS0xMDA7XG5cbiAgICAgIHdpbmRvdy5vcGVuKHVybCwgXCJzaGFyZV9mYWNlYm9va1wiLCAndG9vbGJhcj1ubywgbG9jYXRpb249bm8sIGRpcmVjdG9yaWVzPW5vLCBzdGF0dXM9bm8sIG1lbnViYXI9bm8sIHNjcm9sbGJhcnM9bm8sIHJlc2l6YWJsZT1ubywgY29weWhpc3Rvcnk9bm8sIHdpZHRoPScrdysnLCBoZWlnaHQ9JytoKycsIHRvcD0nK3RvcCsnLCBsZWZ0PScrbGVmdCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2hhcmVFbWFpbCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciB0ZXh0ID0gc2VsZi50ZXh0U2VsZWN0aW9uLnJlcGxhY2UoLzxwW14+XSo+L2lnLCdcXG4nKS5yZXBsYWNlKC88XFwvcD58ICAvaWcsJycpLnRyaW0oKTtcbiAgICAgIHZhciBlbWFpbCA9IHt9O1xuICAgICAgZW1haWwuc3ViamVjdCA9IGVuY29kZVVSSUNvbXBvbmVudChcIlF1b3RlIGZyb20gXCIrZG9jdW1lbnQudGl0bGUpO1xuICAgICAgZW1haWwuYm9keSA9IGVuY29kZVVSSUNvbXBvbmVudChcIuKAnFwiK3RleHQrXCLigJ1cIikrXCIlMEQlMEElMEQlMEFGcm9tOiBcIitkb2N1bWVudC50aXRsZStcIiUwRCUwQVwiK3dpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgICAgJCh0aGlzKS5hdHRyKFwiaHJlZlwiLFwibWFpbHRvOj9zdWJqZWN0PVwiK2VtYWlsLnN1YmplY3QrXCImYm9keT1cIitlbWFpbC5ib2R5KTtcbiAgICAgIHNlbGYuaGlkZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHRoaXMucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9wb3ZlckhUTUwgPSAgJzxkaXYgY2xhc3M9XCJzZWxlY3Rpb25TaGFyZXJcIiBpZD1cInNlbGVjdGlvblNoYXJlclBvcG92ZXJcIiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO1wiPidcbiAgICAgICAgICAgICAgICAgICAgICAgKyAnICA8ZGl2IGlkPVwic2VsZWN0aW9uU2hhcmVyUG9wb3Zlci1pbm5lclwiPidcbiAgICAgICAgICAgICAgICAgICAgICAgKyAnICAgIDx1bD4nXG4gICAgICAgICAgICAgICAgICAgICAgICsgJyAgICAgIDxsaT48YSBjbGFzcz1cImFjdGlvbiBjb3B5XCIgaHJlZj1cIiNjb3BpZWRcIiB0aXRsZT1cIkNvcHkgVGV4dFwiPkNvcHk8L2E+PC9saT4nXG4gICAgICAgICAgICAgICAgICAgICAgICsgJyAgICAgIDxsaT48YSBjbGFzcz1cImFjdGlvbiB0d2VldFwiIGhyZWY9XCJcIiB0aXRsZT1cIlNoYXJlIHRoaXMgc2VsZWN0aW9uIG9uIFR3aXR0ZXJcIiB0YXJnZXQ9XCJfYmxhbmtcIj5Ud2VldDwvYT48L2xpPidcbiAgICAgICAgICAgICAgICAgICAgICAgKyAnICAgICAgPGxpPjxhIGNsYXNzPVwiYWN0aW9uIGZhY2Vib29rXCIgaHJlZj1cIlwiIHRpdGxlPVwiU2hhcmUgdGhpcyBzZWxlY3Rpb24gb24gRmFjZWJvb2tcIiB0YXJnZXQ9XCJfYmxhbmtcIj5GYWNlYm9vazwvYT48L2xpPidcbiAgICAgICAgICAgICAgICAgICAgICAgKyAnICAgICAgPGxpPjxhIGNsYXNzPVwiYWN0aW9uIGVtYWlsXCIgaHJlZj1cIlwiIHRpdGxlPVwiU2hhcmUgdGhpcyBzZWxlY3Rpb24gYnkgZW1haWxcIiB0YXJnZXQ9XCJfYmxhbmtcIj5MaW5rZWRpbjwvYT48L2xpPidcbiAgICAgICAgICAgICAgICAgICAgICAgKyAnICAgIDwvdWw+J1xuICAgICAgICAgICAgICAgICAgICAgICArICcgIDwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgICAgKyAnICA8ZGl2IGNsYXNzPVwic2VsZWN0aW9uU2hhcmVyUG9wb3Zlci1jbGlwXCI+PHNwYW4gY2xhc3M9XCJzZWxlY3Rpb25TaGFyZXJQb3BvdmVyLWFycm93XCI+PC9zcGFuPjwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgICAgKyAnPC9kaXY+JztcblxuICAgICAgdmFyIHBvcHVuZGVySFRNTCA9ICc8ZGl2IGlkPVwic2VsZWN0aW9uU2hhcmVyUG9wdW5kZXJcIiBjbGFzcz1cInNlbGVjdGlvblNoYXJlclwiPidcbiAgICAgICAgICAgICAgICAgICAgICAgKyAnICA8ZGl2IGlkPVwic2VsZWN0aW9uU2hhcmVyUG9wdW5kZXItaW5uZXJcIj4nXG4gICAgICAgICAgICAgICAgICAgICAgICsgJyAgICA8bGFiZWw+U2hhcmUgdGhpcyBzZWxlY3Rpb248L2xhYmVsPidcbiAgICAgICAgICAgICAgICAgICAgICAgKyAnICAgIDx1bD4nXG4gICAgICAgICAgICAgICAgICAgICAgICsgJyAgICAgIDxsaT48YSBjbGFzcz1cImFjdGlvbiBjb3B5XCIgaHJlZj1cIiNjb3BpZWRcIiB0aXRsZT1cIkNvcHkgVGV4dFwiID5Db3B5PC9hPjwvbGk+J1xuICAgICAgICAgICAgICAgICAgICAgICArICcgICAgICA8bGk+PGEgY2xhc3M9XCJhY3Rpb24gdHdlZXRcIiBocmVmPVwiXCIgdGl0bGU9XCJTaGFyZSB0aGlzIHNlbGVjdGlvbiBvbiBUd2l0dGVyXCIgdGFyZ2V0PVwiX2JsYW5rXCI+VHdlZXQ8L2E+PC9saT4nXG4gICAgICAgICAgICAgICAgICAgICAgICsgJyAgICAgIDxsaT48YSBjbGFzcz1cImFjdGlvbiBmYWNlYm9va1wiIGhyZWY9XCJcIiB0aXRsZT1cIlNoYXJlIHRoaXMgc2VsZWN0aW9uIG9uIEZhY2Vib29rXCIgdGFyZ2V0PVwiX2JsYW5rXCI+RmFjZWJvb2s8L2E+PC9saT4nXG4gICAgICAgICAgICAgICAgICAgICAgICsgJyAgICAgIDxsaT48YSBjbGFzcz1cImFjdGlvbiBlbWFpbFwiIGhyZWY9XCJcIiB0aXRsZT1cIlNoYXJlIHRoaXMgc2VsZWN0aW9uIGJ5IGVtYWlsXCIgdGFyZ2V0PVwiX2JsYW5rXCI+PC9hPjwvbGk+J1xuICAgICAgICAgICAgICAgICAgICAgICArICcgICAgPC91bD4nXG4gICAgICAgICAgICAgICAgICAgICAgICsgJyAgPC9kaXY+J1xuICAgICAgICAgICAgICAgICAgICAgICArICc8L2Rpdj4nO1xuICAgICAgc2VsZi4kcG9wb3ZlciA9ICQocG9wb3ZlckhUTUwpO1xuICAgICAgc2VsZi4kcG9wb3Zlci5maW5kKCdhLmNvcHknKS5jbGljayhzZWxmLmNvcHlUZXh0KTtcbiAgICAgIHNlbGYuJHBvcG92ZXIuZmluZCgnYS50d2VldCcpLmNsaWNrKHNlbGYuc2hhcmVUd2l0dGVyKTtcbiAgICAgIHNlbGYuJHBvcG92ZXIuZmluZCgnYS5mYWNlYm9vaycpLmNsaWNrKHNlbGYuc2hhcmVGYWNlYm9vayk7XG4gICAgICBzZWxmLiRwb3BvdmVyLmZpbmQoJ2EuZW1haWwnKS5jbGljayhzZWxmLnNoYXJlRW1haWwpO1xuXG4gICAgICAkKCdib2R5JykuYXBwZW5kKHNlbGYuJHBvcG92ZXIpO1xuXG4gICAgICBzZWxmLiRwb3B1bmRlciA9ICQocG9wdW5kZXJIVE1MKTtcbiAgICAgIHNlbGYuJHBvcG92ZXIuZmluZCgnYS5jb3B5JykuY2xpY2soc2VsZi5jb3B5VGV4dCk7XG4gICAgICBzZWxmLiRwb3B1bmRlci5maW5kKCdhLnR3ZWV0JykuY2xpY2soc2VsZi5zaGFyZVR3aXR0ZXIpO1xuICAgICAgc2VsZi4kcG9wdW5kZXIuZmluZCgnYS5mYWNlYm9vaycpLmNsaWNrKHNlbGYuc2hhcmVGYWNlYm9vayk7XG4gICAgICBzZWxmLiRwb3B1bmRlci5maW5kKCdhLmVtYWlsJykuY2xpY2soc2VsZi5zaGFyZUVtYWlsKTtcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQoc2VsZi4kcG9wdW5kZXIpO1xuXG4gICAgICBpZiAoc2VsZi5hcHBJZCAmJiBzZWxmLnVybDJzaGFyZSl7XG4gICAgICAgICQoXCIuc2VsZWN0aW9uU2hhcmVyIGEuZmFjZWJvb2tcIikuY3NzKCdkaXNwbGF5JywnaW5saW5lLWJsb2NrJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0RWxlbWVudHMgPSBmdW5jdGlvbihlbGVtZW50cykge1xuICAgICAgaWYodHlwZW9mIGVsZW1lbnRzID09ICdzdHJpbmcnKSBlbGVtZW50cyA9ICQoZWxlbWVudHMpO1xuICAgICAgc2VsZi4kZWxlbWVudHMgPSBlbGVtZW50cyBpbnN0YW5jZW9mICQgPyBlbGVtZW50cyA6ICQoZWxlbWVudHMpO1xuICAgICAgc2VsZi4kZWxlbWVudHMubW91c2V1cChzZWxmLnNob3cpLm1vdXNlZG93bihzZWxmLmhpZGUpLmFkZENsYXNzKFwic2VsZWN0aW9uU2hhcmVhYmxlXCIpO1xuXG4gICAgICBzZWxmLiRlbGVtZW50cy5iaW5kKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSkge1xuICAgICAgICBzZWxmLmlzTW9iaWxlID0gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgICBkb2N1bWVudC5vbnNlbGVjdGlvbmNoYW5nZSA9IHNlbGYuc2VsZWN0aW9uQ2hhbmdlZDtcbiAgICB9O1xuXG4gICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkID0gZnVuY3Rpb24oZSkge1xuICAgICAgaWYoIXNlbGYuaXNNb2JpbGUpIHJldHVybjtcblxuICAgICAgaWYoc2VsZi5sYXN0U2VsZWN0aW9uQ2hhbmdlZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5sYXN0U2VsZWN0aW9uQ2hhbmdlZCk7XG4gICAgICB9XG4gICAgICBzZWxmLmxhc3RTZWxlY3Rpb25DaGFuZ2VkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5zaG93UG9wdW5kZXIoZSk7XG4gICAgICB9LCAzMDApO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc3VwcG9ydFBhZ2VPZmZzZXQgPSB3aW5kb3cucGFnZVhPZmZzZXQgIT09IHVuZGVmaW5lZDtcbiAgICAgIHZhciBpc0NTUzFDb21wYXQgPSAoKGRvY3VtZW50LmNvbXBhdE1vZGUgfHwgXCJcIikgPT09IFwiQ1NTMUNvbXBhdFwiKTtcblxuICAgICAgdmFyIHggPSBzdXBwb3J0UGFnZU9mZnNldCA/IHdpbmRvdy5wYWdlWE9mZnNldCA6IGlzQ1NTMUNvbXBhdCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IDogZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuICAgICAgdmFyIHkgPSBzdXBwb3J0UGFnZU9mZnNldCA/IHdpbmRvdy5wYWdlWU9mZnNldCA6IGlzQ1NTMUNvbXBhdCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgOiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgIHJldHVybiB7eDogeCwgeTogeX07XG4gICAgfTtcblxuICAgIHRoaXMucmVuZGVyKCk7XG5cbiAgICBpZihvcHRpb25zLmVsZW1lbnRzKSB7XG4gICAgICB0aGlzLnNldEVsZW1lbnRzKG9wdGlvbnMuZWxlbWVudHMpO1xuICAgIH1cblxuICB9O1xuXG4gIC8vIGpRdWVyeSBwbHVnaW5cbiAgLy8gVXNhZ2U6ICQoIFwicFwiICkuc2VsZWN0aW9uU2hhcmVyKCk7XG4gICQuZm4uc2VsZWN0aW9uU2hhcmVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNoYXJlciA9IG5ldyBTZWxlY3Rpb25TaGFyZXIoKTtcbiAgICBzaGFyZXIuc2V0RWxlbWVudHModGhpcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gRm9yIEFNRCAvIHJlcXVpcmVqc1xuICAvLyBVc2FnZTogcmVxdWlyZShbXCJzZWxlY3Rpb24tc2hhcmVyIVwiXSk7XG4gIC8vICAgICBvciByZXF1aXJlKFtcInNlbGVjdGlvbi1zaGFyZXJcIl0sIGZ1bmN0aW9uKHNlbGVjdGlvblNoYXJlcikgeyB2YXIgc2hhcmVyID0gbmV3IFNlbGVjdGlvblNoYXJlcigncCcpOyB9KTtcbiAgaWYodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgU2VsZWN0aW9uU2hhcmVyLmxvYWQgPSBmdW5jdGlvbiAobmFtZSwgcmVxLCBvbkxvYWQsIGNvbmZpZykge1xuICAgICAgICB2YXIgc2hhcmVyID0gbmV3IFNlbGVjdGlvblNoYXJlcigpO1xuICAgICAgICBzaGFyZXIuc2V0RWxlbWVudHMoJ3AnKTtcbiAgICAgICAgb25Mb2FkKCk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIFNlbGVjdGlvblNoYXJlcjtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gU2VsZWN0aW9uU2hhcmVyO1xuICB9IGVsc2Uge1xuICAgIC8vIFJlZ2lzdGVyaW5nIFNlbGVjdGlvblNoYXJlciBhcyBhIGdsb2JhbFxuICAgIC8vIFVzYWdlOiB2YXIgc2hhcmVyID0gbmV3IFNlbGVjdGlvblNoYXJlcigncCcpO1xuICAgIHdpbmRvdy5TZWxlY3Rpb25TaGFyZXIgPSBTZWxlY3Rpb25TaGFyZXI7XG4gIH1cblxufSkoalF1ZXJ5KTtcblxuXG5pZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kKSB7XG4gICAgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAob1RoaXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIC8vIGNsb3Nlc3QgdGhpbmcgcG9zc2libGUgdG8gdGhlIEVDTUFTY3JpcHQgNSBpbnRlcm5hbCBJc0NhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgLSB3aGF0IGlzIHRyeWluZyB0byBiZSBib3VuZCBpcyBub3QgY2FsbGFibGVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYUFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgZlRvQmluZCA9IHRoaXMsXG4gICAgICAgICAgICBmTk9QID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZCb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZlRvQmluZC5hcHBseSh0aGlzIGluc3RhbmNlb2YgZk5PUCAmJiBvVGhpc1xuICAgICAgICAgICAgICAgICAgICA/IHRoaXNcbiAgICAgICAgICAgICAgICAgICAgOiBvVGhpcyxcbiAgICAgICAgICAgICAgICAgICAgYUFyZ3MuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgZk5PUC5wcm90b3R5cGUgPSB0aGlzLnByb3RvdHlwZTtcbiAgICAgICAgZkJvdW5kLnByb3RvdHlwZSA9IG5ldyBmTk9QKCk7XG5cbiAgICAgICAgcmV0dXJuIGZCb3VuZDtcbiAgICB9O1xufVxuXG5cbi8qKiFcbiAqIHRydW5rOCB2MS4zLjJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ydmlzY29taS90cnVuazhcbiAqXG4gKiBDb3B5cmlnaHQgMjAxMiBSaWNrIFZpc2NvbWlcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqXG4gKiBEYXRlOiBPY3RvYmVyIDIxLCAyMDEyXG4gKi9cblxuKGZ1bmN0aW9uICgkKSB7XG4gICAgdmFyIG1ldGhvZHMsXG4gICAgICAgIHV0aWxzLFxuICAgICAgICBTSURFUyA9IHtcbiAgICAgICAgICAgIC8qIGNlbi4uLnRlciAqL1xuICAgICAgICAgICAgY2VudGVyOiAnY2VudGVyJyxcbiAgICAgICAgICAgIC8qIC4uLmxlZnQgKi9cbiAgICAgICAgICAgIGxlZnQ6ICdsZWZ0JyxcbiAgICAgICAgICAgIC8qIHJpZ2h0Li4uICovXG4gICAgICAgICAgICByaWdodDogJ3JpZ2h0J1xuICAgICAgICB9LFxuICAgICAgICBXSURUSCA9IHtcbiAgICAgICAgICAgIGF1dG86ICdhdXRvJ1xuICAgICAgICB9O1xuXG4gICAgZnVuY3Rpb24gdHJ1bms4KGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gICAgICAgIHRoaXMub3JpZ2luYWxfdGV4dCA9IHRoaXMuJGVsZW1lbnQuaHRtbCgpO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gJC5leHRlbmQoe30sICQuZm4udHJ1bms4LmRlZmF1bHRzKTtcbiAgICB9XG5cbiAgICB0cnVuazgucHJvdG90eXBlLnVwZGF0ZVNldHRpbmdzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9ICQuZXh0ZW5kKHRoaXMuc2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiB0cnVuY2F0ZSgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGEoJ3RydW5rOCcpLFxuICAgICAgICAgICAgc2V0dGluZ3MgPSBkYXRhLnNldHRpbmdzLFxuICAgICAgICAgICAgd2lkdGggPSBzZXR0aW5ncy53aWR0aCxcbiAgICAgICAgICAgIHNpZGUgPSBzZXR0aW5ncy5zaWRlLFxuICAgICAgICAgICAgZmlsbCA9IHNldHRpbmdzLmZpbGwsXG4gICAgICAgICAgICBsaW5lX2hlaWdodCA9IHV0aWxzLmdldExpbmVIZWlnaHQodGhpcykgKiBzZXR0aW5ncy5saW5lcyxcbiAgICAgICAgICAgIHN0ciA9IGRhdGEub3JpZ2luYWxfdGV4dCxcbiAgICAgICAgICAgIGxlbmd0aCA9IHN0ci5sZW5ndGgsXG4gICAgICAgICAgICBtYXhfYml0ZSA9ICcnLFxuICAgICAgICAgICAgbG93ZXIsIHVwcGVyLFxuICAgICAgICAgICAgYml0ZV9zaXplLFxuICAgICAgICAgICAgYml0ZTtcblxuICAgICAgICAvKiBSZXNldCB0aGUgZmllbGQgdG8gdGhlIG9yaWdpbmFsIHN0cmluZy4gKi9cbiAgICAgICAgdGhpcy5odG1sKHN0cik7XG5cbiAgICAgICAgaWYgKHdpZHRoID09PSBXSURUSC5hdXRvKSB7XG4gICAgICAgICAgICAvKiBBc3N1bWluZyB0aGVyZSBpcyBubyBcIm92ZXJmbG93OiBoaWRkZW5cIi4gKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCgpIDw9IGxpbmVfaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgLyogVGV4dCBpcyBhbHJlYWR5IGF0IHRoZSBvcHRpbWFsIHRydW5rYWdlLiAqL1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogQmluYXJ5IHNlYXJjaCB0ZWNobmlxdWUgZm9yIGZpbmRpbmcgdGhlIG9wdGltYWwgdHJ1bmthZ2UuICovXG4gICAgICAgICAgICAvKiBGaW5kIHRoZSBtYXhpbXVtIGJpdGUgd2l0aG91dCBvdmVyZmxvd2luZy4gKi9cbiAgICAgICAgICAgIGxvd2VyID0gMDtcbiAgICAgICAgICAgIHVwcGVyID0gbGVuZ3RoIC0gMTtcblxuICAgICAgICAgICAgd2hpbGUgKGxvd2VyIDw9IHVwcGVyKSB7XG4gICAgICAgICAgICAgICAgYml0ZV9zaXplID0gbG93ZXIgKyAoKHVwcGVyIC0gbG93ZXIpID4+IDEpO1xuXG4gICAgICAgICAgICAgICAgYml0ZSA9IHV0aWxzLmVhdFN0cihzdHIsIHNpZGUsIGxlbmd0aCAtIGJpdGVfc2l6ZSwgZmlsbCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmh0bWwoYml0ZSk7XG5cbiAgICAgICAgICAgICAgICAvKiBDaGVjayBmb3Igb3ZlcmZsb3cuICovXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVpZ2h0KCkgPiBsaW5lX2hlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB1cHBlciA9IGJpdGVfc2l6ZSAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb3dlciA9IGJpdGVfc2l6ZSArIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgLyogU2F2ZSB0aGUgYmlnZ2VyIGJpdGUuICovXG4gICAgICAgICAgICAgICAgICAgIG1heF9iaXRlID0gKG1heF9iaXRlLmxlbmd0aCA+IGJpdGUubGVuZ3RoKSA/IG1heF9iaXRlIDogYml0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFJlc2V0IHRoZSBjb250ZW50IHRvIGVsaW1pbmF0ZSBwb3NzaWJsZSBleGlzdGluZyBzY3JvbGwgYmFycy4gKi9cbiAgICAgICAgICAgIHRoaXMuaHRtbCgnJyk7XG5cbiAgICAgICAgICAgIC8qIERpc3BsYXkgdGhlIGJpZ2dlc3QgYml0ZS4gKi9cbiAgICAgICAgICAgIHRoaXMuaHRtbChtYXhfYml0ZSk7XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy50b29sdGlwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyKCd0aXRsZScsIHN0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWlzTmFOKHdpZHRoKSkge1xuICAgICAgICAgICAgYml0ZV9zaXplID0gbGVuZ3RoIC0gd2lkdGg7XG5cbiAgICAgICAgICAgIGJpdGUgPSB1dGlscy5lYXRTdHIoc3RyLCBzaWRlLCBiaXRlX3NpemUsIGZpbGwpO1xuXG4gICAgICAgICAgICB0aGlzLmh0bWwoYml0ZSk7XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy50b29sdGlwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyKCd0aXRsZScsIHN0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAkLmVycm9yKCdJbnZhbGlkIHdpZHRoIFwiJyArIHdpZHRoICsgJ1wiLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbWV0aG9kcyA9IHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSAkdGhpcy5kYXRhKCd0cnVuazgnKTtcblxuICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5kYXRhKCd0cnVuazgnLCAoZGF0YSA9IG5ldyB0cnVuazgodGhpcykpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZVNldHRpbmdzKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgdHJ1bmNhdGUuY2FsbCgkdGhpcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKiogVXBkYXRlcyB0aGUgdGV4dCB2YWx1ZSBvZiB0aGUgZWxlbWVudHMgd2hpbGUgbWFpbnRhaW5pbmcgdHJ1bmNhdGlvbi4gKi9cbiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAobmV3X3N0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgIC8qIFVwZGF0ZSB0ZXh0LiAqL1xuICAgICAgICAgICAgICAgIGlmIChuZXdfc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmRhdGEoJ3RydW5rOCcpLm9yaWdpbmFsX3RleHQgPSBuZXdfc3RyaW5nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qIFRydW5jYXRlIGFjY29yZGluZ2x5LiAqL1xuICAgICAgICAgICAgICAgIHRydW5jYXRlLmNhbGwoJHRoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmV2ZXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvKiBHZXQgb3JpZ2luYWwgdGV4dC4gKi9cbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9ICQodGhpcykuZGF0YSgndHJ1bms4Jykub3JpZ2luYWxfdGV4dDtcblxuICAgICAgICAgICAgICAgIC8qIFJldmVydCBlbGVtZW50IHRvIG9yaWdpbmFsIHRleHQuICovXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5odG1sKHRleHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqIFJldHVybnMgdGhpcyBpbnN0YW5jZSdzIHNldHRpbmdzIG9iamVjdC4gTk9UIENIQUlOQUJMRS4gKi9cbiAgICAgICAgZ2V0U2V0dGluZ3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldCgwKS5kYXRhKCd0cnVuazgnKS5zZXR0aW5ncztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB1dGlscyA9IHtcbiAgICAgICAgLyoqIFJlcGxhY2VzIFtiaXRlX3NpemVdIFtzaWRlXS1tb3N0IGNoYXJzIGluIFtzdHJdIHdpdGggW2ZpbGxdLiAqL1xuICAgICAgICBlYXRTdHI6IGZ1bmN0aW9uIChzdHIsIHNpZGUsIGJpdGVfc2l6ZSwgZmlsbCkge1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHN0ci5sZW5ndGgsXG4gICAgICAgICAgICAgICAga2V5ID0gdXRpbHMuZWF0U3RyLmdlbmVyYXRlS2V5LmFwcGx5KG51bGwsIGFyZ3VtZW50cyksXG4gICAgICAgICAgICAgICAgaGFsZl9sZW5ndGgsXG4gICAgICAgICAgICAgICAgaGFsZl9iaXRlX3NpemU7XG5cbiAgICAgICAgICAgIC8qIElmIHRoZSByZXN1bHQgaXMgYWxyZWFkeSBpbiB0aGUgY2FjaGUsIHJldHVybiBpdC4gKi9cbiAgICAgICAgICAgIGlmICh1dGlscy5lYXRTdHIuY2FjaGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1dGlscy5lYXRTdHIuY2FjaGVba2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogQ29tbW9uIGVycm9yIGhhbmRsaW5nLiAqL1xuICAgICAgICAgICAgaWYgKCh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykgfHwgKGxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKCdJbnZhbGlkIHNvdXJjZSBzdHJpbmcgXCInICsgc3RyICsgJ1wiLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChiaXRlX3NpemUgPCAwKSB8fCAoYml0ZV9zaXplID4gbGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoJ0ludmFsaWQgYml0ZSBzaXplIFwiJyArIGJpdGVfc2l6ZSArICdcIi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGJpdGVfc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8qIE5vIGJpdGUgc2hvdWxkIHNob3cgbm8gdHJ1bmNhdGlvbi4gKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZmlsbCArICcnKSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKCdGaWxsIHVuYWJsZSB0byBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIENvbXB1dGUgdGhlIHJlc3VsdCwgc3RvcmUgaXQgaW4gdGhlIGNhY2hlLCBhbmQgcmV0dXJuIGl0LiAqL1xuICAgICAgICAgICAgc3dpdGNoIChzaWRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBTSURFUy5yaWdodDpcbiAgICAgICAgICAgICAgICAgICAgLyogc3RyLi4uICovXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlscy5lYXRTdHIuY2FjaGVba2V5XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnRyaW0oc3RyLnN1YnN0cigwLCBsZW5ndGggLSBiaXRlX3NpemUpKSArIGZpbGw7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFNJREVTLmxlZnQ6XG4gICAgICAgICAgICAgICAgICAgIC8qIC4uLnN0ciAqL1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuZWF0U3RyLmNhY2hlW2tleV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbCArICQudHJpbShzdHIuc3Vic3RyKGJpdGVfc2l6ZSkpO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBTSURFUy5jZW50ZXI6XG4gICAgICAgICAgICAgICAgICAgIC8qIEJpdC1zaGlmdCB0byB0aGUgcmlnaHQgYnkgb25lID09PSBNYXRoLmZsb29yKHggLyAyKSAqL1xuICAgICAgICAgICAgICAgICAgICBoYWxmX2xlbmd0aCA9IGxlbmd0aCA+PiAxOyAvLyBoYWx2ZSB0aGUgbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIGhhbGZfYml0ZV9zaXplID0gYml0ZV9zaXplID4+IDE7IC8vIGhhbHZlIHRoZSBiaXRlX3NpemVcblxuICAgICAgICAgICAgICAgICAgICAvKiBzdC4uLnIgKi9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLmVhdFN0ci5jYWNoZVtrZXldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICQudHJpbSh1dGlscy5lYXRTdHIoc3RyLnN1YnN0cigwLCBsZW5ndGggLSBoYWxmX2xlbmd0aCksIFNJREVTLnJpZ2h0LCBiaXRlX3NpemUgLSBoYWxmX2JpdGVfc2l6ZSwgJycpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsICtcbiAgICAgICAgICAgICAgICAgICAgICAgICQudHJpbSh1dGlscy5lYXRTdHIoc3RyLnN1YnN0cihsZW5ndGggLSBoYWxmX2xlbmd0aCksIFNJREVTLmxlZnQsIGhhbGZfYml0ZV9zaXplLCAnJykpO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgJC5lcnJvcignSW52YWxpZCBzaWRlIFwiJyArIHNpZGUgKyAnXCIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0TGluZUhlaWdodDogZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgIHZhciAkZWxlbSA9ICQoZWxlbSksXG4gICAgICAgICAgICAgICAgZmxvYXRzID0gJGVsZW0uY3NzKCdmbG9hdCcpLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJGVsZW0uY3NzKCdwb3NpdGlvbicpLFxuICAgICAgICAgICAgICAgIGh0bWwgPSAkZWxlbS5odG1sKCksXG4gICAgICAgICAgICAgICAgd3JhcHBlcl9pZCA9ICdsaW5lLWhlaWdodC10ZXN0JyxcbiAgICAgICAgICAgICAgICBsaW5lX2hlaWdodDtcblxuICAgICAgICAgICAgaWYgKGZsb2F0cyAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgJGVsZW0uY3NzKCdmbG9hdCcsICdub25lJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ2Fic29sdXRlJykge1xuICAgICAgICAgICAgICAgICRlbGVtLmNzcygncG9zaXRpb24nLCAnc3RhdGljJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFNldCB0aGUgY29udGVudCB0byBhIHNtYWxsIHNpbmdsZSBjaGFyYWN0ZXIgYW5kIHdyYXAuICovXG4gICAgICAgICAgICAkZWxlbS5odG1sKCdpJykud3JhcCgnPGRpdiBpZD1cIicgKyB3cmFwcGVyX2lkICsgJ1wiIC8+Jyk7XG5cbiAgICAgICAgICAgIC8qIENhbGN1bGF0ZSB0aGUgbGluZSBoZWlnaHQgYnkgbWVhc3VyaW5nIHRoZSB3cmFwcGVyLiovXG4gICAgICAgICAgICBsaW5lX2hlaWdodCA9ICQoJyMnICsgd3JhcHBlcl9pZCkuaW5uZXJIZWlnaHQoKTtcblxuICAgICAgICAgICAgLyogUmVtb3ZlIHRoZSB3cmFwcGVyIGFuZCByZXNldCB0aGUgc3R5bGUvY29udGVudC4gKi9cbiAgICAgICAgICAgICRlbGVtLmh0bWwoaHRtbCkuY3NzKHtcbiAgICAgICAgICAgICAgICAnZmxvYXQnOiBmbG9hdHMsXG4gICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogcG9zaXRpb25cbiAgICAgICAgICAgIH0pLnVud3JhcCgpO1xuXG4gICAgICAgICAgICByZXR1cm4gbGluZV9oZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdXRpbHMuZWF0U3RyLmNhY2hlID0ge307XG4gICAgdXRpbHMuZWF0U3RyLmdlbmVyYXRlS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChhcmd1bWVudHMsICcnKTtcbiAgICB9O1xuXG4gICAgJC5mbi50cnVuazggPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIGlmIChtZXRob2RzW21ldGhvZF0pIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2RzW21ldGhvZF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgIW1ldGhvZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJC5lcnJvcignTWV0aG9kICcgKyBtZXRob2QgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS50cnVuazgnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKiBEZWZhdWx0IHRydW5rOCBzZXR0aW5ncy4gKi9cbiAgICAkLmZuLnRydW5rOC5kZWZhdWx0cyA9IHtcbiAgICAgICAgZmlsbDogJyZoZWxsaXA7JyxcbiAgICAgICAgbGluZXM6IDEsXG4gICAgICAgIHNpZGU6IFNJREVTLnJpZ2h0LFxuICAgICAgICB0b29sdGlwOiB0cnVlLFxuICAgICAgICB3aWR0aDogV0lEVEguYXV0b1xuICAgIH07XG59KShqUXVlcnkpO1xuXG5cbnZhciBpc0ZpcmVmb3ggPSB0eXBlb2YgSW5zdGFsbFRyaWdnZXIgIT09ICd1bmRlZmluZWQnO1xuXG5pZiAoaXNGaXJlZm94ID09PSB0cnVlKSB7XG4gICAgJCgnLnRocmVlTGluZScpLnRydW5rOCh7XG4gICAgICAgIGxpbmVzOiA0XG4gICAgfSk7XG4gICAgJCgnLnR3b0xpbmUnKS50cnVuazgoe1xuICAgICAgICBsaW5lczogM1xuICAgIH0pO1xufVxuZWxzZSB7XG4gICAgJCgnLnRocmVlTGluZScpLnRydW5rOCh7XG4gICAgICAgIGxpbmVzOiAzXG4gICAgfSk7XG4gICAgJCgnLnR3b0xpbmUnKS50cnVuazgoe1xuICAgICAgICBsaW5lczogMlxuICAgIH0pO1xufVxuXG4kKCcuZm91ckxpbmUnKS50cnVuazgoe1xuICAgIGxpbmVzOiA0XG59KTtcbiQoJy5maXZlTGluZScpLnRydW5rOCh7XG4gICAgbGluZXM6IDVcbn0pO1xuJCgnLnNpeExpbmUnKS50cnVuazgoe1xuICAgIGxpbmVzOiA2XG59KTtcbiQoJy5vbmVMaW5lJykudHJ1bms4KHtcbiAgICBsaW5lczogMVxufSk7XG5cbiQoJy5zdG9yeV92aWV3X2xpbmUnKS50cnVuazgoe1xuICAgIGxpbmVzOiAzXG59KTtcblxuJCgnLnN0b3J5X3R3b19saW5lJykudHJ1bms4KHtcbiAgICBsaW5lczogNFxufSlcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHZhciB3ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCB8fCAwKTtcbiAgICBpZiAodyA+IDk5Mikge1xuICAgICAgICAkKCcuc3Rvcnlfdmlld19saW5lJykudHJ1bms4KHtcbiAgICAgICAgICAgIGxpbmVzOiA0XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuc3RvcnlfdHdvX2xpbmUnKS50cnVuazgoe1xuICAgICAgICAgICAgbGluZXM6IDFcbiAgICAgICAgfSk7XG4gICAgfVxufSlcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHZhciB3ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCB8fCAwKTtcbiAgICBpZiAodyA8IDExODApIHtcbiAgICAgICAgJCgnLmNoYW5nZTJvbnRhYicpLnRydW5rOCh7XG4gICAgICAgICAgICBsaW5lczogMVxuICAgICAgICB9KTtcbiAgICB9XG59KVxuXG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJCgnLnNjcm9sbGJhci1pbm5lcicpLnNjcm9sbGJhcigpO1xufSk7XG4vKipcbiAqIGpRdWVyeSBDU1MgQ3VzdG9taXphYmxlIFNjcm9sbGJhclxuICpcbiAqIENvcHlyaWdodCAyMDE1LCBZdXJpeSBLaGFiYXJvdlxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuXG4gKlxuICogSWYgeW91IGZvdW5kIGJ1ZywgcGxlYXNlIGNvbnRhY3QgbWUgdmlhIGVtYWlsIDwxM3JlYWwwMDhAZ21haWwuY29tPlxuICpcbiAqIENvbXByZXNzZWQgYnkgaHR0cDovL2pzY29tcHJlc3MuY29tL1xuICpcbiAqIEBhdXRob3IgWXVyaXkgS2hhYmFyb3YgYWthIEdyb21vXG4gKiBAdmVyc2lvbiAwLjIuMTBcbiAqIEB1cmwgaHR0cHM6Ly9naXRodWIuY29tL2dyb21vL2pxdWVyeS5zY3JvbGxiYXIvXG4gKlxuICovXG4hZnVuY3Rpb24obCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxlKTplKGwualF1ZXJ5KX0odGhpcyxmdW5jdGlvbihsKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe2lmKHQud2Via2l0JiYhZSlyZXR1cm57aGVpZ2h0OjAsd2lkdGg6MH07aWYoIXQuZGF0YS5vdXRlcil7dmFyIG89e2JvcmRlcjpcIm5vbmVcIixcImJveC1zaXppbmdcIjpcImNvbnRlbnQtYm94XCIsaGVpZ2h0OlwiMjAwcHhcIixtYXJnaW46XCIwXCIscGFkZGluZzpcIjBcIix3aWR0aDpcIjIwMHB4XCJ9O3QuZGF0YS5pbm5lcj1sKFwiPGRpdj5cIikuY3NzKGwuZXh0ZW5kKHt9LG8pKSx0LmRhdGEub3V0ZXI9bChcIjxkaXY+XCIpLmNzcyhsLmV4dGVuZCh7bGVmdDpcIi0xMDAwcHhcIixvdmVyZmxvdzpcInNjcm9sbFwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCItMTAwMHB4XCJ9LG8pKS5hcHBlbmQodC5kYXRhLmlubmVyKS5hcHBlbmRUbyhcImJvZHlcIil9cmV0dXJuIHQuZGF0YS5vdXRlci5zY3JvbGxMZWZ0KDFlMykuc2Nyb2xsVG9wKDFlMykse2hlaWdodDpNYXRoLmNlaWwodC5kYXRhLm91dGVyLm9mZnNldCgpLnRvcC10LmRhdGEuaW5uZXIub2Zmc2V0KCkudG9wfHwwKSx3aWR0aDpNYXRoLmNlaWwodC5kYXRhLm91dGVyLm9mZnNldCgpLmxlZnQtdC5kYXRhLmlubmVyLm9mZnNldCgpLmxlZnR8fDApfX1mdW5jdGlvbiBvKCl7dmFyIGw9ZSghMCk7cmV0dXJuIShsLmhlaWdodHx8bC53aWR0aCl9ZnVuY3Rpb24gcyhsKXt2YXIgZT1sLm9yaWdpbmFsRXZlbnQ7cmV0dXJuIGUuYXhpcyYmZS5heGlzPT09ZS5IT1JJWk9OVEFMX0FYSVM/ITE6ZS53aGVlbERlbHRhWD8hMTohMH12YXIgcj0hMSx0PXtkYXRhOntpbmRleDowLG5hbWU6XCJzY3JvbGxiYXJcIn0sbWFjb3N4Oi9tYWMvaS50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSksbW9iaWxlOi9hbmRyb2lkfHdlYm9zfGlwaG9uZXxpcGFkfGlwb2R8YmxhY2tiZXJyeS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksb3ZlcmxheTpudWxsLHNjcm9sbDpudWxsLHNjcm9sbHM6W10sd2Via2l0Oi93ZWJraXQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYhL2VkZ2VcXC9cXGQrL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX07dC5zY3JvbGxzLmFkZD1mdW5jdGlvbihsKXt0aGlzLnJlbW92ZShsKS5wdXNoKGwpfSx0LnNjcm9sbHMucmVtb3ZlPWZ1bmN0aW9uKGUpe2Zvcig7bC5pbkFycmF5KGUsdGhpcyk+PTA7KXRoaXMuc3BsaWNlKGwuaW5BcnJheShlLHRoaXMpLDEpO3JldHVybiB0aGlzfTt2YXIgaT17YXV0b1Njcm9sbFNpemU6ITAsYXV0b1VwZGF0ZTohMCxkZWJ1ZzohMSxkaXNhYmxlQm9keVNjcm9sbDohMSxkdXJhdGlvbjoyMDAsaWdub3JlTW9iaWxlOiExLGlnbm9yZU92ZXJsYXk6ITEsc2Nyb2xsU3RlcDozMCxzaG93QXJyb3dzOiExLHN0ZXBTY3JvbGxpbmc6ITAsc2Nyb2xseDpudWxsLHNjcm9sbHk6bnVsbCxvbkRlc3Ryb3k6bnVsbCxvbkluaXQ6bnVsbCxvblNjcm9sbDpudWxsLG9uVXBkYXRlOm51bGx9LG49ZnVuY3Rpb24ocyl7dC5zY3JvbGx8fCh0Lm92ZXJsYXk9bygpLHQuc2Nyb2xsPWUoKSxhKCksbCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe3ZhciBsPSExO2lmKHQuc2Nyb2xsJiYodC5zY3JvbGwuaGVpZ2h0fHx0LnNjcm9sbC53aWR0aCkpe3ZhciBvPWUoKTsoby5oZWlnaHQhPT10LnNjcm9sbC5oZWlnaHR8fG8ud2lkdGghPT10LnNjcm9sbC53aWR0aCkmJih0LnNjcm9sbD1vLGw9ITApfWEobCl9KSksdGhpcy5jb250YWluZXI9cyx0aGlzLm5hbWVzcGFjZT1cIi5zY3JvbGxiYXJfXCIrdC5kYXRhLmluZGV4KyssdGhpcy5vcHRpb25zPWwuZXh0ZW5kKHt9LGksd2luZG93LmpRdWVyeVNjcm9sbGJhck9wdGlvbnN8fHt9KSx0aGlzLnNjcm9sbFRvPW51bGwsdGhpcy5zY3JvbGx4PXt9LHRoaXMuc2Nyb2xseT17fSxzLmRhdGEodC5kYXRhLm5hbWUsdGhpcyksdC5zY3JvbGxzLmFkZCh0aGlzKX07bi5wcm90b3R5cGU9e2Rlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLndyYXBwZXIpe3RoaXMuY29udGFpbmVyLnJlbW92ZURhdGEodC5kYXRhLm5hbWUpLHQuc2Nyb2xscy5yZW1vdmUodGhpcyk7dmFyIGU9dGhpcy5jb250YWluZXIuc2Nyb2xsTGVmdCgpLG89dGhpcy5jb250YWluZXIuc2Nyb2xsVG9wKCk7dGhpcy5jb250YWluZXIuaW5zZXJ0QmVmb3JlKHRoaXMud3JhcHBlcikuY3NzKHtoZWlnaHQ6XCJcIixtYXJnaW46XCJcIixcIm1heC1oZWlnaHRcIjpcIlwifSkucmVtb3ZlQ2xhc3MoXCJzY3JvbGwtY29udGVudCBzY3JvbGwtc2Nyb2xseF92aXNpYmxlIHNjcm9sbC1zY3JvbGx5X3Zpc2libGVcIikub2ZmKHRoaXMubmFtZXNwYWNlKS5zY3JvbGxMZWZ0KGUpLnNjcm9sbFRvcChvKSx0aGlzLnNjcm9sbHguc2Nyb2xsLnJlbW92ZUNsYXNzKFwic2Nyb2xsLXNjcm9sbHhfdmlzaWJsZVwiKS5maW5kKFwiZGl2XCIpLmFuZFNlbGYoKS5vZmYodGhpcy5uYW1lc3BhY2UpLHRoaXMuc2Nyb2xseS5zY3JvbGwucmVtb3ZlQ2xhc3MoXCJzY3JvbGwtc2Nyb2xseV92aXNpYmxlXCIpLmZpbmQoXCJkaXZcIikuYW5kU2VsZigpLm9mZih0aGlzLm5hbWVzcGFjZSksdGhpcy53cmFwcGVyLnJlbW92ZSgpLGwoZG9jdW1lbnQpLmFkZChcImJvZHlcIikub2ZmKHRoaXMubmFtZXNwYWNlKSxsLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLm9uRGVzdHJveSkmJnRoaXMub3B0aW9ucy5vbkRlc3Ryb3kuYXBwbHkodGhpcyxbdGhpcy5jb250YWluZXJdKX19LGluaXQ6ZnVuY3Rpb24oZSl7dmFyIG89dGhpcyxyPXRoaXMuY29udGFpbmVyLGk9dGhpcy5jb250YWluZXJXcmFwcGVyfHxyLG49dGhpcy5uYW1lc3BhY2UsYz1sLmV4dGVuZCh0aGlzLm9wdGlvbnMsZXx8e30pLGE9e3g6dGhpcy5zY3JvbGx4LHk6dGhpcy5zY3JvbGx5fSxkPXRoaXMud3JhcHBlcixoPXtzY3JvbGxMZWZ0OnIuc2Nyb2xsTGVmdCgpLHNjcm9sbFRvcDpyLnNjcm9sbFRvcCgpfTtpZih0Lm1vYmlsZSYmYy5pZ25vcmVNb2JpbGV8fHQub3ZlcmxheSYmYy5pZ25vcmVPdmVybGF5fHx0Lm1hY29zeCYmIXQud2Via2l0KXJldHVybiExO2lmKGQpaS5jc3Moe2hlaWdodDpcImF1dG9cIixcIm1hcmdpbi1ib3R0b21cIjotMSp0LnNjcm9sbC5oZWlnaHQrXCJweFwiLFwibWFyZ2luLXJpZ2h0XCI6LTEqdC5zY3JvbGwud2lkdGgrXCJweFwiLFwibWF4LWhlaWdodFwiOlwiXCJ9KTtlbHNle2lmKHRoaXMud3JhcHBlcj1kPWwoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInNjcm9sbC13cmFwcGVyXCIpLmFkZENsYXNzKHIuYXR0cihcImNsYXNzXCIpKS5jc3MoXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIj09ci5jc3MoXCJwb3NpdGlvblwiKT9cImFic29sdXRlXCI6XCJyZWxhdGl2ZVwiKS5pbnNlcnRCZWZvcmUocikuYXBwZW5kKHIpLHIuaXMoXCJ0ZXh0YXJlYVwiKSYmKHRoaXMuY29udGFpbmVyV3JhcHBlcj1pPWwoXCI8ZGl2PlwiKS5pbnNlcnRCZWZvcmUocikuYXBwZW5kKHIpLGQuYWRkQ2xhc3MoXCJzY3JvbGwtdGV4dGFyZWFcIikpLGkuYWRkQ2xhc3MoXCJzY3JvbGwtY29udGVudFwiKS5jc3Moe2hlaWdodDpcImF1dG9cIixcIm1hcmdpbi1ib3R0b21cIjotMSp0LnNjcm9sbC5oZWlnaHQrXCJweFwiLFwibWFyZ2luLXJpZ2h0XCI6LTEqdC5zY3JvbGwud2lkdGgrXCJweFwiLFwibWF4LWhlaWdodFwiOlwiXCJ9KSxyLm9uKFwic2Nyb2xsXCIrbixmdW5jdGlvbihlKXtsLmlzRnVuY3Rpb24oYy5vblNjcm9sbCkmJmMub25TY3JvbGwuY2FsbChvLHttYXhTY3JvbGw6YS55Lm1heFNjcm9sbE9mZnNldCxzY3JvbGw6ci5zY3JvbGxUb3AoKSxzaXplOmEueS5zaXplLHZpc2libGU6YS55LnZpc2libGV9LHttYXhTY3JvbGw6YS54Lm1heFNjcm9sbE9mZnNldCxzY3JvbGw6ci5zY3JvbGxMZWZ0KCksc2l6ZTphLnguc2l6ZSx2aXNpYmxlOmEueC52aXNpYmxlfSksYS54LmlzVmlzaWJsZSYmYS54LnNjcm9sbC5iYXIuY3NzKFwibGVmdFwiLHIuc2Nyb2xsTGVmdCgpKmEueC5reCtcInB4XCIpLGEueS5pc1Zpc2libGUmJmEueS5zY3JvbGwuYmFyLmNzcyhcInRvcFwiLHIuc2Nyb2xsVG9wKCkqYS55Lmt4K1wicHhcIil9KSxkLm9uKFwic2Nyb2xsXCIrbixmdW5jdGlvbigpe2Quc2Nyb2xsVG9wKDApLnNjcm9sbExlZnQoMCl9KSxjLmRpc2FibGVCb2R5U2Nyb2xsKXt2YXIgcD1mdW5jdGlvbihsKXtzKGwpP2EueS5pc1Zpc2libGUmJmEueS5tb3VzZXdoZWVsKGwpOmEueC5pc1Zpc2libGUmJmEueC5tb3VzZXdoZWVsKGwpfTtkLm9uKFwiTW96TW91c2VQaXhlbFNjcm9sbFwiK24scCksZC5vbihcIm1vdXNld2hlZWxcIituLHApLHQubW9iaWxlJiZkLm9uKFwidG91Y2hzdGFydFwiK24sZnVuY3Rpb24oZSl7dmFyIG89ZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMmJmUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdfHxlLHM9e3BhZ2VYOm8ucGFnZVgscGFnZVk6by5wYWdlWX0sdD17bGVmdDpyLnNjcm9sbExlZnQoKSx0b3A6ci5zY3JvbGxUb3AoKX07bChkb2N1bWVudCkub24oXCJ0b3VjaG1vdmVcIituLGZ1bmN0aW9uKGwpe3ZhciBlPWwub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzJiZsLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXXx8bDtyLnNjcm9sbExlZnQodC5sZWZ0K3MucGFnZVgtZS5wYWdlWCksci5zY3JvbGxUb3AodC50b3Arcy5wYWdlWS1lLnBhZ2VZKSxsLnByZXZlbnREZWZhdWx0KCl9KSxsKGRvY3VtZW50KS5vbihcInRvdWNoZW5kXCIrbixmdW5jdGlvbigpe2woZG9jdW1lbnQpLm9mZihuKX0pfSl9bC5pc0Z1bmN0aW9uKGMub25Jbml0KSYmYy5vbkluaXQuYXBwbHkodGhpcyxbcl0pfWwuZWFjaChhLGZ1bmN0aW9uKGUsdCl7dmFyIGk9bnVsbCxkPTEsaD1cInhcIj09PWU/XCJzY3JvbGxMZWZ0XCI6XCJzY3JvbGxUb3BcIixwPWMuc2Nyb2xsU3RlcCx1PWZ1bmN0aW9uKCl7dmFyIGw9cltoXSgpO3JbaF0obCtwKSwxPT1kJiZsK3A+PWYmJihsPXJbaF0oKSksLTE9PWQmJmY+PWwrcCYmKGw9cltoXSgpKSxyW2hdKCk9PWwmJmkmJmkoKX0sZj0wO3Quc2Nyb2xsfHwodC5zY3JvbGw9by5fZ2V0U2Nyb2xsKGNbXCJzY3JvbGxcIitlXSkuYWRkQ2xhc3MoXCJzY3JvbGwtXCIrZSksYy5zaG93QXJyb3dzJiZ0LnNjcm9sbC5hZGRDbGFzcyhcInNjcm9sbC1lbGVtZW50X2Fycm93c192aXNpYmxlXCIpLHQubW91c2V3aGVlbD1mdW5jdGlvbihsKXtpZighdC5pc1Zpc2libGV8fFwieFwiPT09ZSYmcyhsKSlyZXR1cm4hMDtpZihcInlcIj09PWUmJiFzKGwpKXJldHVybiBhLngubW91c2V3aGVlbChsKSwhMDt2YXIgaT0tMSpsLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YXx8bC5vcmlnaW5hbEV2ZW50LmRldGFpbCxuPXQuc2l6ZS10LnZpc2libGUtdC5vZmZzZXQ7cmV0dXJuKGk+MCYmbj5mfHwwPmkmJmY+MCkmJihmKz1pLDA+ZiYmKGY9MCksZj5uJiYoZj1uKSxvLnNjcm9sbFRvPW8uc2Nyb2xsVG98fHt9LG8uc2Nyb2xsVG9baF09ZixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5zY3JvbGxUbyYmKHIuc3RvcCgpLmFuaW1hdGUoby5zY3JvbGxUbywyNDAsXCJsaW5lYXJcIixmdW5jdGlvbigpe2Y9cltoXSgpfSksby5zY3JvbGxUbz1udWxsKX0sMSkpLGwucHJldmVudERlZmF1bHQoKSwhMX0sdC5zY3JvbGwub24oXCJNb3pNb3VzZVBpeGVsU2Nyb2xsXCIrbix0Lm1vdXNld2hlZWwpLm9uKFwibW91c2V3aGVlbFwiK24sdC5tb3VzZXdoZWVsKS5vbihcIm1vdXNlZW50ZXJcIituLGZ1bmN0aW9uKCl7Zj1yW2hdKCl9KSx0LnNjcm9sbC5maW5kKFwiLnNjcm9sbC1hcnJvdywgLnNjcm9sbC1lbGVtZW50X3RyYWNrXCIpLm9uKFwibW91c2Vkb3duXCIrbixmdW5jdGlvbihzKXtpZigxIT1zLndoaWNoKXJldHVybiEwO2Q9MTt2YXIgbj17ZXZlbnRPZmZzZXQ6c1tcInhcIj09PWU/XCJwYWdlWFwiOlwicGFnZVlcIl0sbWF4U2Nyb2xsVmFsdWU6dC5zaXplLXQudmlzaWJsZS10Lm9mZnNldCxzY3JvbGxiYXJPZmZzZXQ6dC5zY3JvbGwuYmFyLm9mZnNldCgpW1wieFwiPT09ZT9cImxlZnRcIjpcInRvcFwiXSxzY3JvbGxiYXJTaXplOnQuc2Nyb2xsLmJhcltcInhcIj09PWU/XCJvdXRlcldpZHRoXCI6XCJvdXRlckhlaWdodFwiXSgpfSxhPTAsdj0wO3JldHVybiBsKHRoaXMpLmhhc0NsYXNzKFwic2Nyb2xsLWFycm93XCIpPyhkPWwodGhpcykuaGFzQ2xhc3MoXCJzY3JvbGwtYXJyb3dfbW9yZVwiKT8xOi0xLHA9Yy5zY3JvbGxTdGVwKmQsZj1kPjA/bi5tYXhTY3JvbGxWYWx1ZTowKTooZD1uLmV2ZW50T2Zmc2V0Pm4uc2Nyb2xsYmFyT2Zmc2V0K24uc2Nyb2xsYmFyU2l6ZT8xOm4uZXZlbnRPZmZzZXQ8bi5zY3JvbGxiYXJPZmZzZXQ/LTE6MCxwPU1hdGgucm91bmQoLjc1KnQudmlzaWJsZSkqZCxmPW4uZXZlbnRPZmZzZXQtbi5zY3JvbGxiYXJPZmZzZXQtKGMuc3RlcFNjcm9sbGluZz8xPT1kP24uc2Nyb2xsYmFyU2l6ZTowOk1hdGgucm91bmQobi5zY3JvbGxiYXJTaXplLzIpKSxmPXJbaF0oKStmL3Qua3gpLG8uc2Nyb2xsVG89by5zY3JvbGxUb3x8e30sby5zY3JvbGxUb1toXT1jLnN0ZXBTY3JvbGxpbmc/cltoXSgpK3A6ZixjLnN0ZXBTY3JvbGxpbmcmJihpPWZ1bmN0aW9uKCl7Zj1yW2hdKCksY2xlYXJJbnRlcnZhbCh2KSxjbGVhclRpbWVvdXQoYSksYT0wLHY9MH0sYT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dj1zZXRJbnRlcnZhbCh1LDQwKX0sYy5kdXJhdGlvbisxMDApKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5zY3JvbGxUbyYmKHIuYW5pbWF0ZShvLnNjcm9sbFRvLGMuZHVyYXRpb24pLG8uc2Nyb2xsVG89bnVsbCl9LDEpLG8uX2hhbmRsZU1vdXNlRG93bihpLHMpfSksdC5zY3JvbGwuYmFyLm9uKFwibW91c2Vkb3duXCIrbixmdW5jdGlvbihzKXtpZigxIT1zLndoaWNoKXJldHVybiEwO3ZhciBpPXNbXCJ4XCI9PT1lP1wicGFnZVhcIjpcInBhZ2VZXCJdLGM9cltoXSgpO3JldHVybiB0LnNjcm9sbC5hZGRDbGFzcyhcInNjcm9sbC1kcmFnZ2FibGVcIiksbChkb2N1bWVudCkub24oXCJtb3VzZW1vdmVcIituLGZ1bmN0aW9uKGwpe3ZhciBvPXBhcnNlSW50KChsW1wieFwiPT09ZT9cInBhZ2VYXCI6XCJwYWdlWVwiXS1pKS90Lmt4LDEwKTtyW2hdKGMrbyl9KSxvLl9oYW5kbGVNb3VzZURvd24oZnVuY3Rpb24oKXt0LnNjcm9sbC5yZW1vdmVDbGFzcyhcInNjcm9sbC1kcmFnZ2FibGVcIiksZj1yW2hdKCl9LHMpfSkpfSksbC5lYWNoKGEsZnVuY3Rpb24obCxlKXt2YXIgbz1cInNjcm9sbC1zY3JvbGxcIitsK1wiX3Zpc2libGVcIixzPVwieFwiPT1sP2EueTphLng7ZS5zY3JvbGwucmVtb3ZlQ2xhc3Mobykscy5zY3JvbGwucmVtb3ZlQ2xhc3MobyksaS5yZW1vdmVDbGFzcyhvKX0pLGwuZWFjaChhLGZ1bmN0aW9uKGUsbyl7bC5leHRlbmQobyxcInhcIj09ZT97b2Zmc2V0OnBhcnNlSW50KHIuY3NzKFwibGVmdFwiKSwxMCl8fDAsc2l6ZTpyLnByb3AoXCJzY3JvbGxXaWR0aFwiKSx2aXNpYmxlOmQud2lkdGgoKX06e29mZnNldDpwYXJzZUludChyLmNzcyhcInRvcFwiKSwxMCl8fDAsc2l6ZTpyLnByb3AoXCJzY3JvbGxIZWlnaHRcIiksdmlzaWJsZTpkLmhlaWdodCgpfSl9KSx0aGlzLl91cGRhdGVTY3JvbGwoXCJ4XCIsdGhpcy5zY3JvbGx4KSx0aGlzLl91cGRhdGVTY3JvbGwoXCJ5XCIsdGhpcy5zY3JvbGx5KSxsLmlzRnVuY3Rpb24oYy5vblVwZGF0ZSkmJmMub25VcGRhdGUuYXBwbHkodGhpcyxbcl0pLGwuZWFjaChhLGZ1bmN0aW9uKGwsZSl7dmFyIG89XCJ4XCI9PT1sP1wibGVmdFwiOlwidG9wXCIscz1cInhcIj09PWw/XCJvdXRlcldpZHRoXCI6XCJvdXRlckhlaWdodFwiLHQ9XCJ4XCI9PT1sP1wid2lkdGhcIjpcImhlaWdodFwiLGk9cGFyc2VJbnQoci5jc3MobyksMTApfHwwLG49ZS5zaXplLGE9ZS52aXNpYmxlK2ksZD1lLnNjcm9sbC5zaXplW3NdKCkrKHBhcnNlSW50KGUuc2Nyb2xsLnNpemUuY3NzKG8pLDEwKXx8MCk7Yy5hdXRvU2Nyb2xsU2l6ZSYmKGUuc2Nyb2xsYmFyU2l6ZT1wYXJzZUludChkKmEvbiwxMCksZS5zY3JvbGwuYmFyLmNzcyh0LGUuc2Nyb2xsYmFyU2l6ZStcInB4XCIpKSxlLnNjcm9sbGJhclNpemU9ZS5zY3JvbGwuYmFyW3NdKCksZS5reD0oZC1lLnNjcm9sbGJhclNpemUpLyhuLWEpfHwxLGUubWF4U2Nyb2xsT2Zmc2V0PW4tYX0pLHIuc2Nyb2xsTGVmdChoLnNjcm9sbExlZnQpLnNjcm9sbFRvcChoLnNjcm9sbFRvcCkudHJpZ2dlcihcInNjcm9sbFwiKX0sX2dldFNjcm9sbDpmdW5jdGlvbihlKXt2YXIgbz17YWR2YW5jZWQ6Wyc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRcIj4nLCc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRfY29ybmVyXCI+PC9kaXY+JywnPGRpdiBjbGFzcz1cInNjcm9sbC1hcnJvdyBzY3JvbGwtYXJyb3dfbGVzc1wiPjwvZGl2PicsJzxkaXYgY2xhc3M9XCJzY3JvbGwtYXJyb3cgc2Nyb2xsLWFycm93X21vcmVcIj48L2Rpdj4nLCc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRfb3V0ZXJcIj4nLCc8ZGl2IGNsYXNzPVwic2Nyb2xsLWVsZW1lbnRfc2l6ZVwiPjwvZGl2PicsJzxkaXYgY2xhc3M9XCJzY3JvbGwtZWxlbWVudF9pbm5lci13cmFwcGVyXCI+JywnPGRpdiBjbGFzcz1cInNjcm9sbC1lbGVtZW50X2lubmVyIHNjcm9sbC1lbGVtZW50X3RyYWNrXCI+JywnPGRpdiBjbGFzcz1cInNjcm9sbC1lbGVtZW50X2lubmVyLWJvdHRvbVwiPjwvZGl2PicsXCI8L2Rpdj5cIixcIjwvZGl2PlwiLCc8ZGl2IGNsYXNzPVwic2Nyb2xsLWJhclwiPicsJzxkaXYgY2xhc3M9XCJzY3JvbGwtYmFyX2JvZHlcIj4nLCc8ZGl2IGNsYXNzPVwic2Nyb2xsLWJhcl9ib2R5LWlubmVyXCI+PC9kaXY+JyxcIjwvZGl2PlwiLCc8ZGl2IGNsYXNzPVwic2Nyb2xsLWJhcl9ib3R0b21cIj48L2Rpdj4nLCc8ZGl2IGNsYXNzPVwic2Nyb2xsLWJhcl9jZW50ZXJcIj48L2Rpdj4nLFwiPC9kaXY+XCIsXCI8L2Rpdj5cIixcIjwvZGl2PlwiXS5qb2luKFwiXCIpLHNpbXBsZTpbJzxkaXYgY2xhc3M9XCJzY3JvbGwtZWxlbWVudFwiPicsJzxkaXYgY2xhc3M9XCJzY3JvbGwtZWxlbWVudF9vdXRlclwiPicsJzxkaXYgY2xhc3M9XCJzY3JvbGwtZWxlbWVudF9zaXplXCI+PC9kaXY+JywnPGRpdiBjbGFzcz1cInNjcm9sbC1lbGVtZW50X3RyYWNrXCI+PC9kaXY+JywnPGRpdiBjbGFzcz1cInNjcm9sbC1iYXJcIj48L2Rpdj4nLFwiPC9kaXY+XCIsXCI8L2Rpdj5cIl0uam9pbihcIlwiKX07cmV0dXJuIG9bZV0mJihlPW9bZV0pLGV8fChlPW8uc2ltcGxlKSxlPVwic3RyaW5nXCI9PXR5cGVvZiBlP2woZSkuYXBwZW5kVG8odGhpcy53cmFwcGVyKTpsKGUpLGwuZXh0ZW5kKGUse2JhcjplLmZpbmQoXCIuc2Nyb2xsLWJhclwiKSxzaXplOmUuZmluZChcIi5zY3JvbGwtZWxlbWVudF9zaXplXCIpLHRyYWNrOmUuZmluZChcIi5zY3JvbGwtZWxlbWVudF90cmFja1wiKX0pLGV9LF9oYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oZSxvKXt2YXIgcz10aGlzLm5hbWVzcGFjZTtyZXR1cm4gbChkb2N1bWVudCkub24oXCJibHVyXCIrcyxmdW5jdGlvbigpe2woZG9jdW1lbnQpLmFkZChcImJvZHlcIikub2ZmKHMpLGUmJmUoKX0pLGwoZG9jdW1lbnQpLm9uKFwiZHJhZ3N0YXJ0XCIrcyxmdW5jdGlvbihsKXtyZXR1cm4gbC5wcmV2ZW50RGVmYXVsdCgpLCExfSksbChkb2N1bWVudCkub24oXCJtb3VzZXVwXCIrcyxmdW5jdGlvbigpe2woZG9jdW1lbnQpLmFkZChcImJvZHlcIikub2ZmKHMpLGUmJmUoKX0pLGwoXCJib2R5XCIpLm9uKFwic2VsZWN0c3RhcnRcIitzLGZ1bmN0aW9uKGwpe3JldHVybiBsLnByZXZlbnREZWZhdWx0KCksITF9KSxvJiZvLnByZXZlbnREZWZhdWx0KCksITF9LF91cGRhdGVTY3JvbGw6ZnVuY3Rpb24oZSxvKXt2YXIgcz10aGlzLmNvbnRhaW5lcixyPXRoaXMuY29udGFpbmVyV3JhcHBlcnx8cyxpPVwic2Nyb2xsLXNjcm9sbFwiK2UrXCJfdmlzaWJsZVwiLG49XCJ4XCI9PT1lP3RoaXMuc2Nyb2xseTp0aGlzLnNjcm9sbHgsYz1wYXJzZUludCh0aGlzLmNvbnRhaW5lci5jc3MoXCJ4XCI9PT1lP1wibGVmdFwiOlwidG9wXCIpLDEwKXx8MCxhPXRoaXMud3JhcHBlcixkPW8uc2l6ZSxoPW8udmlzaWJsZStjO28uaXNWaXNpYmxlPWQtaD4xLG8uaXNWaXNpYmxlPyhvLnNjcm9sbC5hZGRDbGFzcyhpKSxuLnNjcm9sbC5hZGRDbGFzcyhpKSxyLmFkZENsYXNzKGkpKTooby5zY3JvbGwucmVtb3ZlQ2xhc3MoaSksbi5zY3JvbGwucmVtb3ZlQ2xhc3MoaSksci5yZW1vdmVDbGFzcyhpKSksXCJ5XCI9PT1lJiYocy5pcyhcInRleHRhcmVhXCIpfHxoPmQ/ci5jc3Moe2hlaWdodDpoK3Quc2Nyb2xsLmhlaWdodCtcInB4XCIsXCJtYXgtaGVpZ2h0XCI6XCJub25lXCJ9KTpyLmNzcyh7XCJtYXgtaGVpZ2h0XCI6aCt0LnNjcm9sbC5oZWlnaHQrXCJweFwifSkpLChvLnNpemUhPXMucHJvcChcInNjcm9sbFdpZHRoXCIpfHxuLnNpemUhPXMucHJvcChcInNjcm9sbEhlaWdodFwiKXx8by52aXNpYmxlIT1hLndpZHRoKCl8fG4udmlzaWJsZSE9YS5oZWlnaHQoKXx8by5vZmZzZXQhPShwYXJzZUludChzLmNzcyhcImxlZnRcIiksMTApfHwwKXx8bi5vZmZzZXQhPShwYXJzZUludChzLmNzcyhcInRvcFwiKSwxMCl8fDApKSYmKGwuZXh0ZW5kKHRoaXMuc2Nyb2xseCx7b2Zmc2V0OnBhcnNlSW50KHMuY3NzKFwibGVmdFwiKSwxMCl8fDAsc2l6ZTpzLnByb3AoXCJzY3JvbGxXaWR0aFwiKSx2aXNpYmxlOmEud2lkdGgoKX0pLGwuZXh0ZW5kKHRoaXMuc2Nyb2xseSx7b2Zmc2V0OnBhcnNlSW50KHMuY3NzKFwidG9wXCIpLDEwKXx8MCxzaXplOnRoaXMuY29udGFpbmVyLnByb3AoXCJzY3JvbGxIZWlnaHRcIiksdmlzaWJsZTphLmhlaWdodCgpfSksdGhpcy5fdXBkYXRlU2Nyb2xsKFwieFwiPT09ZT9cInlcIjpcInhcIixuKSl9fTt2YXIgYz1uO2wuZm4uc2Nyb2xsYmFyPWZ1bmN0aW9uKGUsbyl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihvPWUsZT1cImluaXRcIiksXCJ1bmRlZmluZWRcIj09dHlwZW9mIG8mJihvPVtdKSxsLmlzQXJyYXkobyl8fChvPVtvXSksdGhpcy5ub3QoXCJib2R5LCAuc2Nyb2xsLXdyYXBwZXJcIikuZWFjaChmdW5jdGlvbigpe3ZhciBzPWwodGhpcykscj1zLmRhdGEodC5kYXRhLm5hbWUpOyhyfHxcImluaXRcIj09PWUpJiYocnx8KHI9bmV3IGMocykpLHJbZV0mJnJbZV0uYXBwbHkocixvKSl9KSx0aGlzfSxsLmZuLnNjcm9sbGJhci5vcHRpb25zPWk7dmFyIGE9ZnVuY3Rpb24oKXt2YXIgbD0wLGU9MDtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIHMsaSxuLGMsZCxoLHA7Zm9yKHM9MDtzPHQuc2Nyb2xscy5sZW5ndGg7cysrKWM9dC5zY3JvbGxzW3NdLGk9Yy5jb250YWluZXIsbj1jLm9wdGlvbnMsZD1jLndyYXBwZXIsaD1jLnNjcm9sbHgscD1jLnNjcm9sbHksKG98fG4uYXV0b1VwZGF0ZSYmZCYmZC5pcyhcIjp2aXNpYmxlXCIpJiYoaS5wcm9wKFwic2Nyb2xsV2lkdGhcIikhPWguc2l6ZXx8aS5wcm9wKFwic2Nyb2xsSGVpZ2h0XCIpIT1wLnNpemV8fGQud2lkdGgoKSE9aC52aXNpYmxlfHxkLmhlaWdodCgpIT1wLnZpc2libGUpKSYmKGMuaW5pdCgpLG4uZGVidWcmJih3aW5kb3cuY29uc29sZSYmY29uc29sZS5sb2coe3Njcm9sbEhlaWdodDppLnByb3AoXCJzY3JvbGxIZWlnaHRcIikrXCI6XCIrYy5zY3JvbGx5LnNpemUsc2Nyb2xsV2lkdGg6aS5wcm9wKFwic2Nyb2xsV2lkdGhcIikrXCI6XCIrYy5zY3JvbGx4LnNpemUsdmlzaWJsZUhlaWdodDpkLmhlaWdodCgpK1wiOlwiK2Muc2Nyb2xseS52aXNpYmxlLHZpc2libGVXaWR0aDpkLndpZHRoKCkrXCI6XCIrYy5zY3JvbGx4LnZpc2libGV9LCEwKSxlKyspKTtyJiZlPjEwPyh3aW5kb3cuY29uc29sZSYmY29uc29sZS5sb2coXCJTY3JvbGwgdXBkYXRlcyBleGNlZWQgMTBcIiksYT1mdW5jdGlvbigpe30pOihjbGVhclRpbWVvdXQobCksbD1zZXRUaW1lb3V0KGEsMzAwKSl9fSgpO3dpbmRvdy5hbmd1bGFyJiYhZnVuY3Rpb24obCl7bC5tb2R1bGUoXCJqUXVlcnlTY3JvbGxiYXJcIixbXSkucHJvdmlkZXIoXCJqUXVlcnlTY3JvbGxiYXJcIixmdW5jdGlvbigpe3ZhciBlPWk7cmV0dXJue3NldE9wdGlvbnM6ZnVuY3Rpb24obyl7bC5leHRlbmQoZSxvKX0sJGdldDpmdW5jdGlvbigpe3JldHVybntvcHRpb25zOmwuY29weShlKX19fX0pLmRpcmVjdGl2ZShcImpxdWVyeVNjcm9sbGJhclwiLFtcImpRdWVyeVNjcm9sbGJhclwiLFwiJHBhcnNlXCIsZnVuY3Rpb24obCxlKXtyZXR1cm57cmVzdHJpY3Q6XCJBQ1wiLGxpbms6ZnVuY3Rpb24obyxzLHIpe3ZhciB0PWUoci5qcXVlcnlTY3JvbGxiYXIpLGk9dChvKTtzLnNjcm9sbGJhcihpfHxsLm9wdGlvbnMpLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe3Muc2Nyb2xsYmFyKFwiZGVzdHJveVwiKX0pfX19XSl9KHdpbmRvdy5hbmd1bGFyKX0pOyIsIi8vICQoXCIub3ZlcmxheU1lbnVcIikuaGlkZSgpO1xuJChcIiNtZW51T3BlblwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgJChcIi5tZW51LWRyYXdlclwiKS50b2dnbGVDbGFzcygnb3BlbicpO1xuICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnb3ZlcmZsb3cnKTtcbiAgICAkKCcub3ZlcmxheU1lbnUnKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG59KTtcblxuJChcIiNtZW51Q2xvc2UsIC5vdmVybGF5TWVudVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgJChcIi5tZW51LWRyYXdlclwiKS5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnb3ZlcmZsb3cnKTtcbiAgICAkKCcub3ZlcmxheU1lbnUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG59KTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3aW5Ub3AgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICAgIGlmICh3aW5Ub3AgPj0gOTApIHtcbiAgICAgICAgICAgICQoXCJoZWFkZXJcIikuYWRkQ2xhc3MoXCJzdGlja3ktaGVhZGVyXCIpO1xuICAgICAgICAgICAgJCgnLmhvbWUtc3RpY2t5LCAub3ZlcmxheU1lbnUsIC5zZWN0aW9uU3RpY2t5LCAuc29jaWFsX3NoYXJlX3N1YkhlYWRlcicpLmFkZENsYXNzKCdzdGlja3knKTtcbiAgICAgICAgICAgICQoJyNob21lTWVudScpLmFkZENsYXNzKCdzdGlja3knKTtcbiAgICAgICAgICAgICQoJy5zdGlja3ktbG9nbycpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCJoZWFkZXJcIikucmVtb3ZlQ2xhc3MoXCJzdGlja3ktaGVhZGVyXCIpO1xuICAgICAgICAgICAgJCgnLmhvbWUtc3RpY2t5LCAub3ZlcmxheU1lbnUsIC5zZWN0aW9uU3RpY2t5LCAuc29jaWFsX3NoYXJlX3N1YkhlYWRlcicpLnJlbW92ZUNsYXNzKCdzdGlja3knKTtcbiAgICAgICAgICAgICQoJyNob21lTWVudScpLnJlbW92ZUNsYXNzKCdzdGlja3knKTtcbiAgICAgICAgICAgICQoJy5zdGlja3ktbG9nbycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfS8vaWYtZWxzZVxuICAgIH0pOy8vd2luIGZ1bmMuXG59KTsvL3JlYWR5IGZ1bmMuXG5cblxuJCgnLmhhc0NoaWxkIC5tZW51VG9nZ2xlJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICBpZiAoJHRoaXMubmV4dCgpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAkdGhpcy5wYXJlbnQoKS5maW5kKCcubWVudUFuY2hvcicpLnJlbW92ZUNsYXNzKCdhY3RpdmVNZW51Jyk7XG4gICAgICAgICR0aGlzLm5leHQoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICR0aGlzLm5leHQoKS5zbGlkZVVwKDEwMCk7XG4gICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdtZW51TWludXMnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkdGhpcy5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcuc3ViTWVudScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJHRoaXMucGFyZW50KCkucGFyZW50KCkuZmluZCgnLm1lbnVBbmNob3InKS5yZW1vdmVDbGFzcygnYWN0aXZlTWVudScpO1xuICAgICAgICAkdGhpcy5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcubWVudVRvZ2dsZScpLnJlbW92ZUNsYXNzKCdtZW51TWludXMnKTtcbiAgICAgICAgJHRoaXMucGFyZW50KCkucGFyZW50KCkuZmluZCgnLnN1Yk1lbnUnKS5zbGlkZVVwKDEwMCk7XG4gICAgICAgICR0aGlzLm5leHQoKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICR0aGlzLnBhcmVudCgpLmZpbmQoJy5tZW51QW5jaG9yJykuYWRkQ2xhc3MoJ2FjdGl2ZU1lbnUnKTtcbiAgICAgICAgJHRoaXMubmV4dCgpLnNsaWRlVG9nZ2xlKDEwMCk7XG4gICAgICAgICR0aGlzLmFkZENsYXNzKCdtZW51TWludXMnKTtcbiAgICB9XG59KTtcblxuXG4kKCcjY2xpY2tTZWFyY2gnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgIGlmICgkKCcjZ2xvYmFsLXNlYXJjaCcpLnZhbCgpICE9PSBcIlwiKSB7XG4gICAgICAgIHNlYXJjaCgkKCcjZ2xvYmFsLXNlYXJjaCcpLnZhbCgpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0pO1xuXG4kKCcjY2xpY2tTZWFyY2gyJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoJCgnI2dsb2JhbC1zZWFyY2gyJykudmFsKCkgIT09IFwiXCIpIHtcbiAgICAgICAgc2VhcmNoKCQoJyNnbG9iYWwtc2VhcmNoMicpLnZhbCgpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0pO1xuXG4kKCcjY2xpY2tTZWFyY2gzJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoJCgnI2dsb2JhbC1zZWFyY2gzJykudmFsKCkgIT09IFwiXCIpIHtcbiAgICAgICAgc2VhcmNoKCQoJyNnbG9iYWwtc2VhcmNoMycpLnZhbCgpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0pO1xuXG5cbmZ1bmN0aW9uIHNlYXJjaEtleVByZXNzKGUpIHtcbiAgICAvLyBsb29rIGZvciB3aW5kb3cuZXZlbnQgaW4gY2FzZSBldmVudCBpc24ndCBwYXNzZWQgaW5cbiAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsaWNrU2VhcmNoJykuY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gc2VhcmNoS2V5UHJlc3MyKGUpIHtcbiAgICAvLyBsb29rIGZvciB3aW5kb3cuZXZlbnQgaW4gY2FzZSBldmVudCBpc24ndCBwYXNzZWQgaW5cbiAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsaWNrU2VhcmNoMicpLmNsaWNrKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHNlYXJjaEtleVByZXNzMyhlKSB7XG4gICAgLy8gbG9vayBmb3Igd2luZG93LmV2ZW50IGluIGNhc2UgZXZlbnQgaXNuJ3QgcGFzc2VkIGluXG4gICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGlja1NlYXJjaDMnKS5jbGljaygpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG4kKCcjc2F2ZVBob25lJykuaGlkZSgpO1xuXG5cbmZ1bmN0aW9uIGFkZFBob25lKCkge1xuICAgICQoJy50ZXh0TnVtYmVyJykudG9nZ2xlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuaW5wdXROdW1iZXInKS50b2dnbGVDbGFzcygnc2hvdycpO1xuICAgICQoJyNhZGRQaG9uZScpLmhpZGUoKTtcbiAgICAkKCcjc2F2ZVBob25lJykuc2hvdygpO1xuXG4gICAgaWYgKGNvb2tpZSAhPT0gJycpIHtcbiAgICAgICAgdmFyIHVzZXJOYW1lID0gSlNPTi5wYXJzZShjb29raWUpO1xuICAgICAgICB2YXIgdXNlcklkID0gdXNlck5hbWUuaWQ7XG4gICAgICAgIHZhciBVc2VyUGhvbmUgPSB1c2VyTmFtZS5waG9uZU51bWJlcjtcbiAgICAgICAgJCgnI3Bob25lTnVtYmVyJykudmFsKFVzZXJQaG9uZSk7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIElzcGhvbmUocGhvbmUpIHtcbiAgICB2YXIgbnVtYmVyID0gJCgnZmllbGRfSWQnKS52YWwoKTtcbiAgICB2YXIgZmlsdGVyID0gL15bMS05XVswLTldezksMTR9JC87XG4gICAgaWYgKGZpbHRlci50ZXN0KHBob25lKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gc2F2ZVBob25lKGUpIHtcbiAgICB2YXIgcGhvbmUgPSAkKCcjcGhvbmVOdW1iZXInKS52YWwoKTtcbiAgICB2YXIgaXNWYWxpZCA9IHRydWU7XG5cbiAgICBpZiAoY29va2llICE9PSAnJykge1xuICAgICAgICB2YXIgdXNlck5hbWUgPSBKU09OLnBhcnNlKGNvb2tpZSk7XG4gICAgICAgIHZhciB1c2VySWQgPSB1c2VyTmFtZS5pZDtcbiAgICB9XG5cblxuICAgIHZhciBhdXRoS2V5ID0gZ2V0Q29va2llKFwiaG5oXCIpO1xuICAgIGlmIChhdXRoS2V5ICE9PSAnJykge1xuICAgICAgICB2YXIga2V5ID0gYXV0aEtleTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb3JtVG9KU09OKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgXCJwaG9uZU51bWJlclwiOiAkKCcjcGhvbmVOdW1iZXInKS52YWwoKSxcbiAgICAgICAgICAgIFwiaWRcIjogdXNlcklkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICgkKFwiI3Bob25lTnVtYmVyXCIpLnZhbCgpICE9PSAnJykge1xuICAgICAgICAkKFwiI3Bob25lTnVtYmVyXCIpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgJChcIiNwaG9uZU51bWJlclwiKS5hZGRDbGFzcygnZXJyb3InKTtcbiAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChJc3Bob25lKHBob25lKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgJCgnI2ludmFsaWRfZW1haWwnKS5zaG93KCk7XG4gICAgICAgICQoXCIjcGhvbmVOdW1iZXJcIikuYWRkQ2xhc3MoJ2Vycm9yJyk7XG4gICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICQoXCIjcGhvbmVOdW1iZXJcIikucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XG4gICAgfVxuXG4gICAgaWYgKGlzVmFsaWQgIT09IGZhbHNlKSB7XG4gICAgICAgIC8vIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogJy9hdXRoL2VkaXRQcm9maWxlJywgLy8gdXJsIHdoZXJlIHRvIHN1Ym1pdCB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsIC8vIHR5cGUgb2YgYWN0aW9uIFBPU1QgfHwgR0VUXG4gICAgICAgICAgICBkYXRhOiBmb3JtVG9KU09OKCksIC8vIHBvc3QgZGF0YSB8fCBnZXQgZGF0YVxuICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgXCJCYXNpYyBcIiArIGtleSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHZhciBsb2dnZWRJblVzZXIgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQpXG4gICAgICAgICAgICAgICAgc2V0Q29va2llKCd1X2QnLCBsb2dnZWRJblVzZXIpO1xuICAgICAgICAgICAgICAgICQoJy50ZXh0TnVtYmVyJykudG9nZ2xlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAkKCcuaW5wdXROdW1iZXInKS50b2dnbGVDbGFzcygnc2hvdycpO1xuICAgICAgICAgICAgICAgICQoJyNhZGRQaG9uZScpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcjc2F2ZVBob25lJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuJChcIiNtZXNzYWdlXCIpLmhpZGUoKTtcbiQoXCIjbWVzc2FnZV9lcnJvclwiKS5oaWRlKCk7XG4kKFwiI3N1Ym1pdF9idG5cIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgcGFzc3dvcmQgPSAkKCcjbmV3X3Bhc3N3b3JkJykudmFsKCk7XG4gICAgdmFyIGF1dGhLZXkgPSBnZXRDb29raWUoXCJobmhcIik7XG4gICAgaWYgKGF1dGhLZXkgIT09ICcnKSB7XG4gICAgICAgIHZhciBrZXkgPSBhdXRoS2V5O1xuXG4gICAgfVxuXG4gICAgaWYgKGNvb2tpZSAhPT0gJycpIHtcbiAgICAgICAgdmFyIHVzZXJOYW1lID0gSlNPTi5wYXJzZShjb29raWUpO1xuICAgICAgICB2YXIgdXNlcklkID0gdXNlck5hbWUuaWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ1BUb0pTT04oKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBcInBhc3N3b3JkXCI6ICQoJyNuZXdfcGFzc3dvcmQnKS52YWwoKSxcbiAgICAgICAgICAgIFwiaWRcIjogdXNlcklkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICBkZWJ1Z2dlcjtcbiAgICB2YXIgaXNWYWxpZCA9IHRydWU7XG4gICAgJCgnaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkLnRyaW0oJCh0aGlzKS52YWwoKSkgPT09ICcnKSB7XG4gICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdlcnJvcicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGNoZWNrUGFzc3dvcmQocGFzc3dvcmQpID09PSBmYWxzZSkge1xuICAgICAgICAkKCcjaW52YWxpZF9jb25fcGFzcycpLnNob3coKTtcbiAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgJCgnI2ludmFsaWRfY29uX3Bhc3MnKS5oaWRlKCk7XG4gICAgfVxuXG4gICAgY2hlY2tQYXNzd29yZCgpO1xuICAgIGlmIChpc1ZhbGlkID09PSBmYWxzZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNoZWNrUGFzc3dvcmQoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNoZWNrUGFzc3dvcmQoKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogJy9hdXRoL2NoYW5nZVBhc3N3b3JkJywgLy8gdXJsIHdoZXJlIHRvIHN1Ym1pdCB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsIC8vIHR5cGUgb2YgYWN0aW9uIFBPU1QgfHwgR0VUXG4gICAgICAgICAgICBkYXRhOiBDUFRvSlNPTigpLCAvLyBwb3N0IGRhdGEgfHwgZ2V0IGRhdGFcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmFzaWMgXCIgKyBrZXkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG9nTXNnID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAkKCcjbWVzc2FnZScpLnNob3coKTtcbiAgICAgICAgICAgICAgICBsb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbiQoXCIjc3VibWl0X2J0bl9mcFwiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBwYXNzd29yZCA9ICQoJyNuZXdfcGFzc3dvcmQnKS52YWwoKTtcblxuICAgIHZhciB1cmxDID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgdmFyIGlucHV0ID0gdXJsQy5zcGxpdCgnLycpO1xuICAgIHZhciB1c2VySUQgPSBpbnB1dFs0XTtcbiAgICB2YXIgdG9rZW4gPSBpbnB1dFs1XTtcblxuICAgIGZ1bmN0aW9uIEZQVG9KU09OKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgXCJwYXNzd29yZFwiOiAkKCcjbmV3X3Bhc3N3b3JkJykudmFsKCksXG4gICAgICAgICAgICBcInVzZXJJZFwiOiB1c2VySUQsXG4gICAgICAgICAgICBcInRva2VuXCI6IHRva2VuLFxuICAgICAgICAgICAgXCJjb25mb3JtUGFzc3dvcmRcIjogJCgnI2NvbmZpcm1fcGFzc3dvcmQnKS52YWwoKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAgZGVidWdnZXI7XG4gICAgdmFyIGlzVmFsaWQgPSB0cnVlO1xuICAgICQoJ2lucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJC50cmltKCQodGhpcykudmFsKCkpID09PSAnJykge1xuICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZXJyb3InKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChjaGVja1Bhc3N3b3JkKHBhc3N3b3JkKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgJCgnI2ludmFsaWRfY29uX3Bhc3MnKS5zaG93KCk7XG4gICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICQoJyNpbnZhbGlkX2Nvbl9wYXNzJykuaGlkZSgpO1xuICAgIH1cblxuICAgIGNoZWNrUGFzc3dvcmQoKTtcbiAgICBpZiAoaXNWYWxpZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjaGVja1Bhc3N3b3JkKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjaGVja1Bhc3N3b3JkKCk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICcvdXBkYXRlL3Bhc3N3b3JkJywgLy8gdXJsIHdoZXJlIHRvIHN1Ym1pdCB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsIC8vIHR5cGUgb2YgYWN0aW9uIFBPU1QgfHwgR0VUXG4gICAgICAgICAgICBkYXRhOiBGUFRvSlNPTigpLCAvLyBwb3N0IGRhdGEgfHwgZ2V0IGRhdGFcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvZ01zZyA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgaWYgKGxvZ01zZyA9PT0gJ0ludmFsaWQgVXJsJyB8fCBsb2dNc2cgPT09ICdVUkwgRXhwaXJlZCwgUGxlYXNlIHJlLWdlbmVyYXRlIFVSTCcpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI21lc3NhZ2VfZXJyb3InKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcjbWVzc2FnZScpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBjaGVja1Bhc3N3b3JkKCkge1xuICAgIHZhciBwYXNzID0gJCgnI25ld19wYXNzd29yZCcpLnZhbCgpO1xuICAgIHZhciBjb25mcGFzcyA9ICQoJyNjb25maXJtX3Bhc3N3b3JkJykudmFsKCk7XG4gICAgaWYgKHBhc3MgIT09IGNvbmZwYXNzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gR0xvZ2luKCkge1xuICAgICQuYWpheCh7XG4gICAgICAgIHVybDogJ2dvb2dsZS9jcmVhdGVBdXRob3JpemF0aW9uJywgLy8gdXJsIHdoZXJlIHRvIHN1Ym1pdCB0aGUgcmVxdWVzdFxuICAgICAgICB0eXBlOiBcImdldFwiLCAvLyB0eXBlIG9mIGFjdGlvbiBQT1NUIHx8IEdFVFxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLCAvLyBkYXRhIHR5cGVcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihyZXN1bHQubWVzc2FnZSwgJ19zZWxmJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gRkxvZ2luKCkge1xuICAgIC8vICBkZWJ1Z2dlcjtcbiAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6ICdmYWNlYm9vay9jcmVhdGVBdXRob3JpemF0aW9uJywgLy8gdXJsIHdoZXJlIHRvIHN1Ym1pdCB0aGUgcmVxdWVzdFxuICAgICAgICB0eXBlOiBcImdldFwiLCAvLyB0eXBlIG9mIGFjdGlvbiBQT1NUIHx8IEdFVFxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLCAvLyBkYXRhIHR5cGVcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihyZXN1bHQubWVzc2FnZSwgJ19zZWxmJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy9zZXQgY29va2llXG5cbmZ1bmN0aW9uIHNldENvb2tpZShjX25hbWUsIHZhbHVlKSB7XG4gICAgLy8gZG9jdW1lbnQuY29va2llID0gY19uYW1lICsgXCI9XCIgKyAodmFsdWUpICsgIHBhdGg9L1wiO1xuICAgIGRvY3VtZW50LmNvb2tpZSA9IGNfbmFtZSArIFwiPVwiICsgdmFsdWUgKyBcIjtcIiArIFwiO3BhdGg9L1wiO1xufVxuXG5mdW5jdGlvbiByZW1vdmVDb29raWUoY19uYW1lKSB7XG4gICAgZG9jdW1lbnQuY29va2llID0gY19uYW1lICsgXCI9XCI7XG59XG5cblxuZnVuY3Rpb24gZ2V0Q29va2llKGNfbmFtZSkge1xuICAgIGlmIChkb2N1bWVudC5jb29raWUubGVuZ3RoID4gMCkge1xuICAgICAgICBjX3N0YXJ0ID0gZG9jdW1lbnQuY29va2llLmluZGV4T2YoY19uYW1lICsgXCI9XCIpO1xuICAgICAgICBpZiAoY19zdGFydCAhPSAtMSkge1xuICAgICAgICAgICAgY19zdGFydCA9IGNfc3RhcnQgKyBjX25hbWUubGVuZ3RoICsgMTtcbiAgICAgICAgICAgIGNfZW5kID0gZG9jdW1lbnQuY29va2llLmluZGV4T2YoXCI7XCIsIGNfc3RhcnQpO1xuICAgICAgICAgICAgaWYgKGNfZW5kID09IC0xKSBjX2VuZCA9IGRvY3VtZW50LmNvb2tpZS5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdW5lc2NhcGUoZG9jdW1lbnQuY29va2llLnN1YnN0cmluZyhjX3N0YXJ0LCBjX2VuZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xufVxuXG52YXIgcmVkaXJlY3Rpb25Vcmw7XG52YXIgbG9nZ2VkSW5Vc2VyID0gbnVsbDtcbnZhciBjb29raWUgPSBnZXRDb29raWUoXCJ1X2RcIik7XG5cbi8vIGZ1bmN0aW9uIGNoZWNrQ29va2llKCkge1xuLy9cbi8vIH1cblxuKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY29va2llICE9PSAnJykge1xuICAgICAgICB2YXIgdXNlck5hbWUgPSBKU09OLnBhcnNlKGNvb2tpZSk7XG4gICAgICAgIHVzZXJOYW1lLmZ1bGxOYW1lID0gdXNlck5hbWUuZnVsbE5hbWUucmVwbGFjZSgnKycsICcgJyk7XG4gICAgICAgIGlmICh1c2VyTmFtZS5waG9uZU51bWJlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdXNlck5hbWUucGhvbmVOdW1iZXIgPSAnQWRkIFBob25lIE51bWJlcic7XG4gICAgICAgIH1cbiAgICAgICAgLy91c2VyTmFtZS5waG9uZU51bWJlcj0gdXNlck5hbWUucGhvbmVOdW1iZXIucmVwbGFjZShudWxsLCAnQWRkIFBob25lIE5vLicpO1xuICAgICAgICAkKCcuaGFzVXNlcicpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgJCgnLnVzZXJOYW1lJykudGV4dCh1c2VyTmFtZS5mdWxsTmFtZSkuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgJCgnLmVtYWlsJykudGV4dCh1c2VyTmFtZS5lbWFpbCk7XG4gICAgICAgICQoJy50ZXh0TnVtYmVyJykudGV4dCh1c2VyTmFtZS5waG9uZU51bWJlcik7XG4gICAgICAgIGlmICh1c2VyTmFtZS5pbWFnZVVybCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgJCgnLmltYWdlX3dyYXAgaW1nJykuYXR0cihcInNyY1wiLCB1c2VyTmFtZS5pbWFnZVVybCk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnI25vdFVzZXInKS5oaWRlKCk7XG4gICAgICAgICQoJy5ub3RVc2VyUHJvZmlsZScpLmhpZGUoKTtcbiAgICAgICAgJCgnLnVzZXJQcm9maWxlTG9nJykuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICByZWRpcmVjdGlvblVybCA9IHVzZXJOYW1lLnJlZGlyZWN0aW9uVXJsO1xuICAgIH1cbn0pKClcblxuXG4vL0NoZWNrXG5mdW5jdGlvbiBGQnN0YXR1cygpIHtcbiAgICBpZiAoY29va2llICE9PSAnJykge1xuICAgICAgICB2YXIgdXNlck5hbWUgPSBKU09OLnBhcnNlKGNvb2tpZSk7XG4gICAgICAgIHZhciB1c2VyRnJvbSA9IHVzZXJOYW1lLnNvY2lhbFNpZ25JblByb3ZpZGVyO1xuICAgICAgICB2YXIgdXNlckVtYWlsID0gdXNlck5hbWUuZW1haWw7XG4gICAgICAgIHZhciBzdGF0dXMgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBcInN0YXR1c1wiOiB1c2VyRnJvbSxcbiAgICAgICAgICAgIFwiZW1haWxcIjogdXNlckVtYWlsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgIH1cbn1cblxuXG4vL2NoZWNrQ29va2llKCk7XG5cblxuZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgIHZhciBhdXRoS2V5ID0gZ2V0Q29va2llKFwiaG5oXCIpO1xuICAgIGlmIChhdXRoS2V5ICE9PSAnJykge1xuICAgICAgICB2YXIga2V5ID0gYXV0aEtleTtcbiAgICB9XG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiAnL2F1dGgvbG9nb3V0JywgLy8gdXJsIHdoZXJlIHRvIHN1Ym1pdCB0aGUgcmVxdWVzdFxuICAgICAgICB0eXBlOiBcImdldFwiLCAvLyB0eXBlIG9mIGFjdGlvbiBQT1NUIHx8IEdFVFxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLCAvLyBkYXRhIHR5cGVcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24gKHhocikge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmFzaWMgXCIgKyBrZXkpO1xuICAgICAgICB9LFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB2YXIgbG9nTXNnID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0KTtcbiAgICAgICAgICAgICQoJyNub3RVc2VyJykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLmhhc1VzZXInKS5oaWRlKCk7XG4gICAgICAgICAgICAvL0ZCc3RhdHVzKCk7XG4gICAgICAgICAgICBzZXRDb29raWUoXCJiYlwiLCBGQnN0YXR1cygpKTtcbiAgICAgICAgICAgIHJlbW92ZUNvb2tpZSgndV9kJyk7XG4gICAgICAgICAgICByZW1vdmVDb29raWUoJ2huaCcpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XG4gICAgICAgICAgICBsb2dnZWRJblVzZXIgPSBudWxsO1xuICAgICAgICB9LCBlcnJvcjogZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgJCgnI25vdFVzZXInKS5zaG93KCk7XG4gICAgICAgICAgICAkKCcuaGFzVXNlcicpLmhpZGUoKTtcbiAgICAgICAgICAgIHNldENvb2tpZShcImJiXCIsIEZCc3RhdHVzKCkpO1xuICAgICAgICAgICAgcmVtb3ZlQ29va2llKCd1X2QnKTtcbiAgICAgICAgICAgIHJlbW92ZUNvb2tpZSgnaG5oJyk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJztcbiAgICAgICAgICAgIGxvZ2dlZEluVXNlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbG9nb3V0MigpIHtcbiAgICB2YXIgYXV0aEtleSA9IGdldENvb2tpZShcImhuaFwiKTtcbiAgICBpZiAoYXV0aEtleSAhPT0gJycpIHtcbiAgICAgICAgdmFyIGtleSA9IGF1dGhLZXk7XG4gICAgfVxuICAgICQuYWpheCh7XG4gICAgICAgIHVybDogJy9hdXRoL2xvZ291dCcsIC8vIHVybCB3aGVyZSB0byBzdWJtaXQgdGhlIHJlcXVlc3RcbiAgICAgICAgdHlwZTogXCJnZXRcIiwgLy8gdHlwZSBvZiBhY3Rpb24gUE9TVCB8fCBHRVRcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJywgLy8gZGF0YSB0eXBlXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBcIkJhc2ljIFwiICsga2V5KTtcbiAgICAgICAgfSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgdmFyIGxvZ01zZyA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdClcbiAgICAgICAgICAgICQoJyNub3RVc2VyJykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLmhhc1VzZXInKS5oaWRlKCk7XG4gICAgICAgICAgICBzZXRDb29raWUoXCJiYlwiLCBGQnN0YXR1cygpKTtcbiAgICAgICAgICAgIHJlbW92ZUNvb2tpZSgndV9kJyk7XG4gICAgICAgICAgICByZW1vdmVDb29raWUoJ2huaCcpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XG4gICAgICAgICAgICBsb2dnZWRJblVzZXIgPSBudWxsO1xuICAgICAgICAgICAgaXNTdWRva3UgPSBmYWxzZTtcbiAgICAgICAgfSwgZXJyb3I6IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICQoJyNub3RVc2VyJykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLmhhc1VzZXInKS5oaWRlKCk7XG4gICAgICAgICAgICBzZXRDb29raWUoXCJiYlwiLCBGQnN0YXR1cygpKTtcbiAgICAgICAgICAgIHJlbW92ZUNvb2tpZSgndV9kJyk7XG4gICAgICAgICAgICByZW1vdmVDb29raWUoJ2huaCcpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XG4gICAgICAgICAgICBsb2dnZWRJblVzZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuZnVuY3Rpb24gc2VhcmNoKHNlYXJjaFRlcm0pIHtcbiAgICAvLyAgc2VhcmNoVGVybSA9IHNlYXJjaFRlcm0ucmVwbGFjZSgvW15cXHdcXHNdL2dpLCAnICcpO1xuICAgIHNlYXJjaFRlcm0gPSBzZWFyY2hUZXJtLnRyaW0oKTtcbiAgICBzZWFyY2hUZXJtID0gc2VhcmNoVGVybS5yZXBsYWNlKC9bLV0vZ2ksICcgJyk7XG4gICAgc2VhcmNoVGVybSA9IHNlYXJjaFRlcm0ucmVwbGFjZSgvWyVdL2dpLCAnJyk7XG4gICAgc2VhcmNoVGVybSA9IHNlYXJjaFRlcm0ucmVwbGFjZSgvW1xcc10rL2dpLCAnLScpO1xuICAgIHNlYXJjaFRlcm0gPSBzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3NkJyk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VkJyk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2F1dGhvcicpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzZWN0aW9uJyk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3JlbCcpO1xuICAgIGxvY2F0aW9uLmhyZWYgPSBcIi9zZWFyY2gvXCIgKyBzZWFyY2hUZXJtO1xuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy9BbmNob3IgdXJsICBnbG9zc2FyeVxuaWYgKCQoXCJhXCIpLmhhc0NsYXNzKCdjYXJvdXNlbC1jb250cm9sLW5leHQnKSkge1xufVxuZWxzZSB7XG4gICAgJCgnYVtocmVmXj1cIiNcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSk7XG4gICAgICAgIGlmICh0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLnN0b3AoKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHRhcmdldC5vZmZzZXQoKS50b3AgLSA5MFxuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XG4gICAgICAgICAgICAkKCdodG1sLCBib2R5Jykuc3RvcCgpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogdGFyZ2V0Lm9mZnNldCgpLnRvcCAtIDE0NVxuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG4vL1NlYXJjaCB0ZXh0X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cbiQoJy5zZWFyY2gtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQoJy5oZWFkZXJTZWFyY2gnKS5hZGRDbGFzcygnc2hvdycpO1xuICAgICQoJy5oZWFkZXJTZWFyY2guc2hvdycpLmZvY3VzKCk7XG4gICAgJCgnLnNlYXJjaEljb25QYWdlJykuYWRkQ2xhc3MoJ3Nob3cnKTtcbn0pO1xuXG4kKCdib2R5JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQoJy5oZWFkZXJTZWFyY2gnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgICQoJy5oZWFkZXJTZWFyY2guc2hvdycpLmZvY3VzKCk7XG4gICAgJCgnLnNlYXJjaEljb25QYWdlJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbn0pO1xuXG4kKCdoZWFkZXIsIG5hdicpLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xufSk7XG5cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHZhciAkaW1hZ2VTcmM7XG4gICAgJCgnLmltZ1ZpZXcnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICRpbWFnZVNyYyA9ICQodGhpcykuZGF0YSgnYmlnaW1hZ2UnKTtcbiAgICB9KTtcblxuICAgICQoJy5tb2RhbCcpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICQoXCIuaW1hZ2VcIikuYXR0cignc3JjJywgJGltYWdlU3JjKTtcbiAgICB9KTtcbiAgICAkKCcubW9kYWwnKS5vbignaGlkZS5icy5tb2RhbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICQoXCIuaW1hZ2VcIikuYXR0cignc3JjJywgJycpO1xuICAgIH0pO1xufSk7XG5cblxudmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoJy5zcG90bGlnaHRTbGlkZXInLCB7XG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgIHR5cGU6ICdmcmFjdGlvbicsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZVxuICAgIH0sXG4gICAgbmF2aWdhdGlvbjoge1xuICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldidcbiAgICB9XG59KTtcblxudmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoJy5zcG9ydHNTcG90bGlnaHQnLCB7XG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgIHR5cGU6ICdmcmFjdGlvbicsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZVxuICAgIH0sXG4gICAgbmF2aWdhdGlvbjoge1xuICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldidcbiAgICB9XG59KTtcblxudmFyIGNvbWljID0gbmV3IFN3aXBlcignLmNvbWljc1NsaWRlciwgLnR3aXR0ZXJUYWtlU2xpZGUnLCB7XG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgIHR5cGU6ICdidWxsZXRzJyxcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlXG4gICAgfVxufSk7XG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBjb21pYy5vbignc2xpZGVDaGFuZ2VUcmFuc2l0aW9uU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIuY29taWMtdGl0bGVcIikuaGlkZSgpO1xuICAgICAgICAkKFwiI2NvbWljLVwiICsgKGNvbWljLmFjdGl2ZUluZGV4ICsgMSkpLnNob3coKTtcbiAgICB9KTtcbn0sIDUwMCk7XG5cbnZhciBmb3VyID0gbmV3IFN3aXBlcignLmZvdXItY29sdW1uJywge1xuICAgIHNsaWRlc1BlclZpZXc6IDQsXG4gICAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgICBzbGlkZXNQZXJHcm91cDogNCxcbiAgICAvLyBsb29wRmlsbEdyb3VwV2l0aEJsYW5rOiB0cnVlLFxuICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnXG4gICAgfSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICAgICAgdHlwZTogJ2ZyYWN0aW9uJ1xuICAgIH0sXG4gICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgMTAyNToge1xuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMFxuICAgICAgICB9LFxuICAgICAgICA3Njk6IHtcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbnZhciBnYWxsZXJ5ID0gbmV3IFN3aXBlcignLmdhbGxlcnlTbGlkZScsIHtcbiAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXG4gICAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgICAgICB0eXBlOiAnZnJhY3Rpb24nXG4gICAgfSxcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2J1xuICAgIH1cbn0pO1xuXG52YXIgY3VsdHVyZSA9IG5ldyBTd2lwZXIoJy5jdWx0dXJlU2xpZGUnLCB7XG4gICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxuICAgIHNwYWNlQmV0d2VlbjogMTAsXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgdHlwZTogJ2ZyYWN0aW9uJ1xuICAgIH0sXG4gICAgbmF2aWdhdGlvbjoge1xuICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldidcbiAgICB9LFxuICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgIDc2OToge1xuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMFxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbnZhciBnYWxsZXJ5VG9wID0gbmV3IFN3aXBlcignLmdhbGxlcnktdG9wJywge1xuICAgIHNwYWNlQmV0d2VlbjogMTBcbn0pO1xudmFyIGdhbGxlcnlUaHVtYnMgPSBuZXcgU3dpcGVyKCcuZ2FsbGVyeS10aHVtYnMnLCB7XG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcbiAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcbiAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXG4gICAgdG91Y2hSYXRpbzogMC4yLFxuICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6IHRydWUsXG4gICAgY2xpY2thYmxlOiB0cnVlLFxuICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnXG4gICAgfSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlXG4gICAgfVxuXG59KTtcblxuaWYgKCQoXCJkaXZcIikuaGFzQ2xhc3MoJ2dhbGxlcnktdGh1bWJzJykpIHtcbiAgICBnYWxsZXJ5VG9wLmNvbnRyb2xsZXIuY29udHJvbCA9IGdhbGxlcnlUaHVtYnM7XG4gICAgZ2FsbGVyeVRodW1icy5jb250cm9sbGVyLmNvbnRyb2wgPSBnYWxsZXJ5VG9wO1xufVxuXG5pZiAoJChcImRpdlwiKS5oYXNDbGFzcygnZGF0ZScpKSB7XG4gICAgdmFyIGRheXNPZldlZWsgPSBbXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXTtcbiAgICB2YXIgbW9udGhzID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl07XG4gICAgbiA9IG5ldyBEYXRlKCk7XG4gICAgeSA9IG4uZ2V0RnVsbFllYXIoKTtcbiAgICBtID0gbi5nZXRNb250aCgpO1xuICAgIGQgPSBuLmdldERhdGUoKTtcbiAgICBkYXkgPSBuLmdldERheSgpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kYXlcIikuaW5uZXJIVE1MID0gZGF5c09mV2Vla1tkYXldICsgXCIsIFwiICsgZCArIFwiIFwiICsgbW9udGhzW21dICsgXCIgXCIgKyB5O1xufVxuXG5pZiAoJChcInBcIikuaGFzQ2xhc3MoJ2NvcHlSaWdodCcpKSB7XG4gICAgbiA9IG5ldyBEYXRlKCk7XG4gICAgeSA9IG4uZ2V0RnVsbFllYXIoKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInllYXJcIikuaW5uZXJIVE1MID0geTtcbn1cblxuXG4vL1N1ZG9rdVxuXG5mdW5jdGlvbiBjbGlja0xvZ2luKGVsZW0pIHtcbiAgICB2YXIgY3VycmVudFVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgIHNldENvb2tpZSgncl9kJywgY3VycmVudFVybCk7XG4gICAgdmFyIGNvb2tpZVVybCA9IGdldENvb2tpZShcInJfZFwiKTtcbiAgICBsb2NhdGlvbi5ocmVmID0gXCIvbG9nLWluP1wiICsgZ2V0UmVmUGFyYW0oZWxlbSk7XG59XG5cbmZ1bmN0aW9uIGNsaWNrUmVnaXN0ZXIoZWxlbSkge1xuICAgIHZhciBjdXJyZW50VXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgc2V0Q29va2llKCdyX2QnLCBjdXJyZW50VXJsKTtcbiAgICB2YXIgY29va2llVXJsID0gZ2V0Q29va2llKFwicl9kXCIpO1xuICAgIGxvY2F0aW9uLmhyZWYgPSBcIi9zaWdudXA/XCIgKyBnZXRSZWZQYXJhbShlbGVtKTtcbn1cblxudmFyIGN1cnJlbnRVcmw7XG5cbi8vIHZhciBpc1N1ZG9rdSA9IGZhbHNlO1xuXG5mdW5jdGlvbiBwbGF5U3Vrb2R1KGVsZW0pIHtcbiAgICBsb2NhdGlvbi5ocmVmID0gXCIvc3Vkb2t1P1wiICsgZ2V0UmVmUGFyYW0oZWxlbSk7XG59XG5cbi8vRm9yIFJlZiBwYXJhbSBzdGFydFxuXG52YXIgZ2V0Q2xvc2VzdCA9IGZ1bmN0aW9uIChlbGVtLCBzZWxlY3Rvcikge1xuICAgIGZvciAoOyBlbGVtICYmIGVsZW0gIT09IGRvY3VtZW50OyBlbGVtID0gZWxlbS5wYXJlbnROb2RlKSB7XG4gICAgICAgIGlmICgoZWxlbS5kYXRhc2V0Wyd3aWRnZXQnXSAhPSBcIlwiKSAmJiAoZWxlbS5kYXRhc2V0Wyd3aWRnZXQnXSAhPSBudWxsKSkgcmV0dXJuIGVsZW07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcblxuZnVuY3Rpb24gZ2V0UmVmUGFyYW0oZWxlbSkge1xuICAgIHZhciBuZXdIcmVmO1xuICAgIHZhciBwYXJlbnQgPSBnZXRDbG9zZXN0KGVsZW0sICdkYXRhJyk7XG4gICAgaWYgKHBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgICB2YXIgZGF0YVZhbHVlID0gcGFyZW50LmRhdGFzZXRbXCJ3aWRnZXRcIl07XG4gICAgICAgIGRhdGFWYWx1ZSA9IGRhdGFWYWx1ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teXFx3IF0rL2csICcnKS5yZXBsYWNlKC8gKy9nLCAnLScpO1xuICAgICAgICBuZXdIcmVmID0gJ3JlZj0nICsgZGF0YVZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3SHJlZiA9PSAhdW5kZWZpbmVkID8gJycgOiBuZXdIcmVmO1xufVxuXG4kKFwiYVwiKS5tb3VzZWRvd24oZnVuY3Rpb24gKCkge1xuICAgIHZhciBocmVmID0gdGhpcy5ocmVmXG4gICAgdmFyIHBhcmVudCA9IGdldENsb3Nlc3QodGhpcywgJ2RhdGEnKTtcbiAgICBpZiAocGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHZhciBuZXdIcmVmO1xuICAgICAgICB2YXIgZGF0YVZhbHVlID0gcGFyZW50LmRhdGFzZXRbXCJ3aWRnZXRcIl07XG4gICAgICAgIGRhdGFWYWx1ZSA9IGRhdGFWYWx1ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teXFx3IF0rL2csICcnKS5yZXBsYWNlKC8gKy9nLCAnLScpO1xuICAgICAgICBpZiAoaHJlZi5pbmNsdWRlcygnPycpKSB7XG4gICAgICAgICAgICBpZiAoaHJlZi5pbmNsdWRlcygnP3JlZj0nKSkge1xuICAgICAgICAgICAgICAgIG5ld0hyZWYgPSBocmVmLnNwbGl0KFwiP3JlZj1cIilbMF0gKyAnPycgKyAncmVmPScgKyBkYXRhVmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0hyZWYgPSBocmVmICsgJyYnICsgJ3JlZj0nICsgZGF0YVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3SHJlZiA9IGhyZWYgKyAnPycgKyAncmVmPScgKyBkYXRhVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ocmVmID0gbmV3SHJlZjtcbiAgICB9XG59KTtcblxuXG4vL0ZvciBSZWYgcGFyYW0gZW5kXG5cbi8vcGFzc3dvcmQgSGlkZS9zaG93IHNjcmlwdC4uXG5cbmZ1bmN0aW9uIHNob3dQYXNzd29yZCgpIHtcbiAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzc3dvcmRcIik7XG4gICAgJCgnLnRvZ2dsZS1wYXNzd29yZCcpLnRvZ2dsZUNsYXNzKFwiZmEtZXllIGZhLWV5ZS1zbGFzaFwiKTtcbiAgICBpZiAoeC50eXBlID09PSBcInBhc3N3b3JkXCIpIHtcbiAgICAgICAgeC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgeC50eXBlID0gXCJwYXNzd29yZFwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUGFzc3dvcmREZXRlY3QoZXZlbnQpIHtcbiAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzc3dvcmRcIik7XG4gICAgaWYgKGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAkKCcudG9nZ2xlLXBhc3N3b3JkJykuYWRkQ2xhc3MoXCJmYSBmYS1mdyBmYS1leWVcIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkKCcudG9nZ2xlLXBhc3N3b3JkJykucmVtb3ZlQ2xhc3MoXCJmYSBmYS1mdyBmYS1leWUgZmEtZXllIGZhLWV5ZS1zbGFzaFwiKTtcbiAgICAgICAgeC50eXBlID0gXCJwYXNzd29yZFwiO1xuICAgIH1cbn1cblxudmFyIGJ0biA9ICQoJyNiYWNrVG9Ub3AnKTtcbiQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAzMDApIHtcbiAgICAgICAgYnRuLmFkZENsYXNzKCdzaG93Jyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBidG4ucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICB9XG59KTtcbmJ0bi5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAwfSwgJzMwMCcpO1xufSk7XG5cbnZhciBhZGRDb2RlID1cbiAgXCI8ZGl2IGlkPSdkaXYtZ3B0LWFkLTE1NTg5NTk4NzkwMzAtMCcgY2xhc3M9J3Bvc2l0aW9uaW5nJyBzdHlsZT0naGVpZ2h0OjkwcHg7IHdpZHRoOjcyOHB4Oyc+XFxuXCIgK1xuICAnPHNjcmlwdD5cXG4nICtcbiAgJ2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbiAoKSB7XFxuJyArXG4gIFwiZ29vZ2xldGFnLmRpc3BsYXkoJ2Rpdi1ncHQtYWQtMTU1ODk1OTg3OTAzMC0wJyk7XFxuXCIgK1xuICAnfSk7XFxuJyArXG4gICc8L3NjcmlwdD5cXG4nICtcbiAgJzwvZGl2Pic7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGFnQ291bnQgPSAkKCdwYWRpaW5nRGV0YWlscy5zdG9yeS1hZHZlcnRpc2UgPiBwJykubGVuZ3RoO1xuICAgIHZhciB0YWdDb3VudDEgPSA0O1xuICAgIGlmICh0YWdDb3VudCA+IDAgJiYgdGFnQ291bnQgPD0gMykge1xuICAgICAgICBhZGRTY3JpcHRDb2RlKHRhZ0NvdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiAodGFnQ291bnQgJSAzID09PSAwKSB7XG4gICAgICAgICAgICBhZGRTY3JpcHRDb2RlKHRhZ0NvdW50MSk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgIC8vICAgICBhZGRTY3JpcHRDb2RlKHRhZ0NvdW50MSk7XG4gICAgICAgIC8vICAgICBhZGRTY3JpcHRDb2RlKHRhZ0NvdW50KTtcbiAgICAgICAgLy8gfVxuXG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIGFkZFNjcmlwdENvZGUodGFnQ291bnQpIHtcbiAgICAkKGFkZENvZGUpLmluc2VydEFmdGVyKFxuICAgICAgICAnLnBhZGlpbmdEZXRhaWxzLnN0b3J5LWFkdmVydGlzZSBwOm50aC1vZi10eXBlKCcgKyB0YWdDb3VudCArICcpJ1xuICAgICk7XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRJblZpZXdQb3J0KGNsYXNzSWQpIHtcbiAgICB2YXIgcmVzdWx0ID0ge1wiaWRcIjogMCwgXCJwZXJjZW50YWdlXCI6IDB9O1xuICAgIHZhciBpZCA9IDA7XG4gICAgdmFyIHBlcmNlbnRhZ2UgPSAwO1xuICAgICQoXCIuXCIgKyBjbGFzc0lkKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjcmVlblRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgIHZhciBzY3JlZW5Cb3R0b20gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wICsgJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICB2YXIgYm94VG9wID0gJCh0aGlzKS5vZmZzZXQoKS50b3A7XG4gICAgICAgIHZhciBib3hIZWlnaHQgPSAkKHRoaXMpLmhlaWdodCgpO1xuICAgICAgICB2YXIgYm94Qm90dG9tID0gYm94VG9wICsgYm94SGVpZ2h0O1xuXG4gICAgICAgIGlmIChib3hUb3AgPiBzY3JlZW5Ub3ApIHtcbiAgICAgICAgICAgIGlmIChib3hCb3R0b20gPCBzY3JlZW5Cb3R0b20pIHtcbiAgICAgICAgICAgICAgICBwZXJjZW50YWdlID0gMTAwO1xuICAgICAgICAgICAgICAgIGlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWlkJyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlkID0gaWQ7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlO1xuXG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYm94VG9wIDwgc2NyZWVuQm90dG9tKSB7XG4gICAgICAgICAgICAgICAgLy9wYXJ0aWFsIChib3R0b20pXG4gICAgICAgICAgICAgICAgbGV0IHBlcmNlbnQgPSBNYXRoLnJvdW5kKChzY3JlZW5Cb3R0b20gLSBib3hUb3ApIC8gYm94SGVpZ2h0ICogMTAwKTtcbiAgICAgICAgICAgICAgICBpZiAocGVyY2VudCA+PSBwZXJjZW50YWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSBwZXJjZW50O1xuICAgICAgICAgICAgICAgICAgICBpZCA9ICQodGhpcykuYXR0cignZGF0YS1pZCcpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuaWQgPSBpZDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChib3hCb3R0b20gPiBzY3JlZW5Ub3ApIHtcbiAgICAgICAgICAgIGxldCBwZXJjZW50ID0gTWF0aC5yb3VuZCgoYm94Qm90dG9tIC0gc2NyZWVuVG9wKSAvIGJveEhlaWdodCAqIDEwMCk7XG4gICAgICAgICAgICBpZiAocGVyY2VudCA+PSBwZXJjZW50YWdlKSB7XG4gICAgICAgICAgICAgICAgcGVyY2VudGFnZSA9IHBlcmNlbnQ7XG4gICAgICAgICAgICAgICAgaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtaWQnKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuaWQgPSBpZDtcbiAgICAgICAgICAgICAgICByZXN1bHQucGVyY2VudGFnZSA9IHBlcmNlbnRhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJQYXJhbWV0ZXIoa2V5LCBxdWVyeVN0cmluZykge1xuICAgIHZhciBmaWx0ZXJlZFBhcmFtcyA9IFwiXCI7XG4gICAgaWYgKHF1ZXJ5U3RyaW5nICE9IHVuZGVmaW5lZCAmJiBxdWVyeVN0cmluZyAhPSBudWxsICYmIHF1ZXJ5U3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IGhhc2hlcyA9IHF1ZXJ5U3RyaW5nLnNwbGl0KCcmJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGFzaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBoYXNoID0gaGFzaGVzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICBpZiAoaGFzaFswXSAhPSBrZXkpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZFBhcmFtcyArPSBmaWx0ZXJlZFBhcmFtcy5sZW5ndGggPiAwID8gXCImXCIgKyBoYXNoWzBdICsgXCI9XCIgKyBoYXNoWzFdIDogaGFzaFswXSArIFwiPVwiICsgaGFzaFsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmlsdGVyZWRQYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGdldFBhcmFtZXRlcihrZXkpIHtcbiAgICB2YXIgcXVlcnlTdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdChcIj9cIilbMV07XG4gICAgaWYgKHF1ZXJ5U3RyaW5nICE9IHVuZGVmaW5lZCAmJiBxdWVyeVN0cmluZyAhPSBudWxsICYmIHF1ZXJ5U3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IGhhc2hlcyA9IHF1ZXJ5U3RyaW5nLnNwbGl0KCcmJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGFzaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBoYXNoID0gaGFzaGVzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICBpZiAoaGFzaFswXSA9PSBrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzaFsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gY2hlY2tJblZpZXdQb3J0KGlkKSB7XG4gICAgdmFyIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgaWYgKGVsZW0gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxldCBib3VuZGluZyA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGJvdW5kaW5nLnRvcCA+PSAwICYmXG4gICAgICAgICAgICBib3VuZGluZy5sZWZ0ID49IDAgJiZcbiAgICAgICAgICAgIGJvdW5kaW5nLnJpZ2h0IDw9ICh3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpICYmXG4gICAgICAgICAgICBib3VuZGluZy5ib3R0b20gPD0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQoJy5waG90by1zdG9yaWVzLWNvbnRhaW5lcicpLmxlbmd0aCA+IDEpIHtcblxuICAgICAgICB2YXIgX2NvbXNjb3JlID0gX2NvbXNjb3JlIHx8IFtdO1xuICAgICAgICBfY29tc2NvcmUucHVzaCh7YzE6IFwiMlwiLCBjMjogXCIxNzgyNDY1OVwifSk7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIilbMF07XG4gICAgICAgICAgICBzLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgICAgIHMuc3JjID0gKGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID09IFwiaHR0cHM6XCIgPyBcImh0dHBzOi8vc2JcIiA6IFwiaHR0cDovL2JcIikgKyBcIi5zY29yZWNhcmRyZXNlYXJjaC5jb20vYmVhY29uLmpzXCI7XG4gICAgICAgICAgICBlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzLCBlbCk7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gY29tU2NvcmVDYWxsKCkge1xuICAgICAgICAgICAgc2VsZi5DT01TQ09SRSAmJiBDT01TQ09SRS5iZWFjb24oe2MxOiBcIjJcIiwgYzI6IFwiMTc4MjQ2NTlcIn0pO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAvL3VybDogXCJ7eyByb3V0ZSgncGhvdG9nYWxsZXJ5LmNvbXNjb3JlJykgfX1cIixcbiAgICAgICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly93d3cudGVsZWdyYXBoaW5kaWEuY29tL2NvbXNjb3JlLnR4dFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsIC8vc2VuZCBpdCB0aHJvdWdoIGdldCBtZXRob2RcbiAgICAgICAgICAgICAgICBjYWNoZTogXCJmYWxzZVwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgYzE6IDIsXG4gICAgICAgICAgICAgICAgICAgIGNvbXNjb3JlOiAncGFnZXZpZXdfY2FuZGlkYXRlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3VjY2VzczpcIiArIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IsIHN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvclwiICsgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIHN0YXR1c1wiICsgc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvciBlcnJvclRocm93blwiICsgZXJyb3JUaHJvd24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9yaWdpbmFsUXVlcnlTdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdChcIj9cIilbMV07XG5cbiAgICAgICAgdmFyIG9yaWdpbmFsUGFyYW1JbWFnZUtleSA9IG51bGw7XG4gICAgICAgIGlmIChvcmlnaW5hbFF1ZXJ5U3RyaW5nICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3JpZ2luYWxQYXJhbUltYWdlS2V5ID0gZ2V0UGFyYW1ldGVyKFwic2xpZGVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb3JpZ2luYWxGaWx0ZXJlZFBhcmFtcyA9IGZpbHRlclBhcmFtZXRlcihcInNsaWRlXCIsIG9yaWdpbmFsUXVlcnlTdHJpbmcpO1xuICAgICAgICB2YXIgb3JpZ2luYWxVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnPycpWzBdO1xuICAgICAgICBpZiAob3JpZ2luYWxQYXJhbUltYWdlS2V5ICE9IG51bGwgJiYgb3JpZ2luYWxQYXJhbUltYWdlS2V5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoXCIucGhvdG8tc3Rvcmllcy1jb250YWluZXJbZGF0YS1pZD0nXCIgKyBvcmlnaW5hbFBhcmFtSW1hZ2VLZXkgKyBcIiddXCIpLm9mZnNldCgpLnRvcCAtIDMwMFxuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gZWxlbWVudEluVmlld1BvcnQoJ3Bob3RvLXN0b3JpZXMtY29udGFpbmVyJyk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5pZCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgaW1hZ2VLZXkgPSBlbGVtZW50LmlkO1xuICAgICAgICAgICAgICAgIGxldCBwYXJhbUltYWdlS2V5ID0gZ2V0UGFyYW1ldGVyKFwic2xpZGVcIik7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtSW1hZ2VLZXkgIT0gaW1hZ2VLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhhc2hyZW1vdmUgPSBvcmlnaW5hbFVybDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsRmlsdGVyZWRQYXJhbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaHJlbW92ZSArPSBcIj9cIiArIG9yaWdpbmFsRmlsdGVyZWRQYXJhbXMgKyBcIiZzbGlkZT1cIiArIGltYWdlS2V5O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaHJlbW92ZSArPSBcIj9zbGlkZT1cIiArIGltYWdlS2V5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZiAhPSBoYXNocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoJ2RhdGEnLCAndGl0bGUnLCBoYXNocmVtb3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kYXRhTGF5ZXIucHVzaCh7J2V2ZW50JzogJ1ZpcnR1YWxQYWdldmlldycsICd2aXJ0dWFsUGFnZVVSTCc6IGhhc2hyZW1vdmV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7cGF0aDogaGFzaHJlbW92ZX0sICcnLCBoYXNocmVtb3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbVNjb3JlQ2FsbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgaGFzaHJlbW92ZSA9IG9yaWdpbmFsVXJsO1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbEZpbHRlcmVkUGFyYW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzaHJlbW92ZSArPSBcIj9cIiArIG9yaWdpbmFsRmlsdGVyZWRQYXJhbXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZiAhPSBoYXNocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vXCJObyBpbWFnZSBpbiB2aWV3IHBvcnQgYW5kIHVybCBpcyBjaGFuZ2VkLCB0aGlzIGJsb2NrIHdpbGwgZ3VhcmVudGVkZCBiZSBjYWxsZWQgb25seSBvbiBzY3JvbCBhbmQgbGFzdC9maXJzdCBpbWFnZSBvZiBnYWxsZXJ5IGdvZXMgb3V0IGZyb20gdmlld3BvcnRcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKCdkYXRhJywgJ1RpdGxlJywgaGFzaHJlbW92ZSk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7cGF0aDogaGFzaHJlbW92ZX0sICcnLCBoYXNocmVtb3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgY29tU2NvcmVDYWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgIGxldCB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICB1cmwgPSB1cmwuc3BsaXQoXCI/XCIpO1xuXG4gICAgLy8gZGVidWdnZXI7XG4gICAgaWYgKHVybFsxXSA9PSBcIlwiKSB7XG4gICAgICAgIHZhciBmbGFnID0gdXJsLmluZGV4T2YoJ3NlYXJjaCcpO1xuICAgICAgICBpZiAoZmxhZykge1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKCdkYXRhJywgJ3RpdGxlJywgdXJsWzBdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodXJsWzBdLmluZGV4T2YoJ3NlYXJjaCcpID09IC0xKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzZCcpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWQnKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2F1dGhvcicpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc2VjdGlvbicpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncmVsJyk7XG4gICAgfVxuXG4gICAgbGV0IGF1dGhvciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRob3InKTtcbiAgICAkKFwic2VsZWN0I3NlYXJjaEF1dGhvclwiKS52YWwoYXV0aG9yKTtcblxuICAgIGxldCBzZWN0aW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlY3Rpb24nKTtcbiAgICAkKFwic2VsZWN0I3NlYXJjaFNlY3Rpb25cIikudmFsKHNlY3Rpb24pO1xuXG4gICAgbGV0IHNkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NkJyk7XG4gICAgJCgnaW5wdXQjc3RhcnQtZGF0ZScpLnZhbChzZCk7XG5cbiAgICBsZXQgZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWQnKTtcbiAgICAkKCdpbnB1dCNlbmQtZGF0ZScpLnZhbChlZCk7XG5cbiAgICBsZXQgcmVsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JlbCcpO1xuICAgIGlmIChyZWwgPT0gJ2ZhbHNlJykge1xuICAgICAgICAkKCdzZWxlY3Qjc29ydFJlbGV2YW5jZScpLnZhbChyZWwpO1xuICAgIH1cblxuICAgIGlmIChhdXRob3IgIT0gbnVsbCB8fCBzZWN0aW9uICE9IG51bGwgfHwgc2QgIT0gbnVsbCB8fCBlZCAhPSBudWxsIHx8IHJlbCAhPSBudWxsKSB7XG4gICAgICAgIGNoZWNrV2lkdGgoKTtcbiAgICB9XG59KVxuXG5mdW5jdGlvbiBvbkF1dGhvclNlbGVjdCgpIHtcbiAgICB2YXIgYXV0aG9yID0gJCgnI3NlYXJjaEF1dGhvcicpLnZhbCgpO1xuICAgIGlmIChhdXRob3IgIT0gJycpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F1dGhvcicsIGF1dGhvcik7XG4gICAgICAgIHZhciBhdXRob3IgPSByZW1vdmVTcGFjZUFuZFVwZGF0ZShhdXRob3IpO1xuICAgICAgICBjaGVja1dpZHRoKCk7XG4gICAgICAgIGluc2VydFBhcmFtKCdhdXRob3InLCBhdXRob3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhdXRob3InKTtcbiAgICAgICAgY2hhbmdlRmlsdGVyKCdhdXRob3InKTtcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gb25TZWN0aW9uU2VsZWN0KCkge1xuICAgIHZhciBzZWN0aW9uID0gJCgnI3NlYXJjaFNlY3Rpb24nKS52YWwoKTtcbiAgICBpZiAoc2VjdGlvbiAhPSAnJykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VjdGlvbicsIHNlY3Rpb24pO1xuICAgICAgICBjaGVja1dpZHRoKCk7XG4gICAgICAgIGluc2VydFBhcmFtKCdzZWN0aW9uJywgc2VjdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3NlY3Rpb24nKTtcbiAgICAgICAgY2hhbmdlRmlsdGVyKCdzZWN0aW9uJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVTcGFjZUFuZFVwZGF0ZShhdXRob3IpIHtcbiAgICAvLyB2YXIgYXV0aG9yID0gYXV0aG9yLnNwbGl0KCcmJyk7XG4gICAgYXV0aG9yID0gYXV0aG9yLnJlcGxhY2UoL1xccysvZywgJy0nKTtcbiAgICByZXR1cm4gYXV0aG9yO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRQYXJhbShrZXksIHZhbHVlKSB7XG4gICAga2V5ID0gZW5jb2RlVVJJKGtleSk7XG4gICAgdmFsdWUgPSBlbmNvZGVVUkkodmFsdWUpO1xuXG4gICAgdmFyIGt2cCA9IGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkuc3BsaXQoJyYnKTtcbiAgICAvLyBkZWJ1Z2dlcjtcbiAgICBpZiAoa2V5ID09ICdhdXRob3InIHx8IGtleSA9PSAnc2VjdGlvbicgfHwga2V5ID09ICdzZCcpIHtcbiAgICAgICAgaWYgKGt2cC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGt2cC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBzdHJLZXkgPSBrdnBbaV0uc3BsaXQoJz0nKTtcbiAgICAgICAgICAgICAgICBpZiAoKHN0cktleVswXSA9PSAnYWlkJyAmJiBrZXkgPT0gJ2F1dGhvcicpIHx8IChzdHJLZXlbMF0gPT0gJ3NpZCcgJiYga2V5ID09ICdzZWN0aW9uJykgfHwgKHN0cktleVswXSA9PSAnc2QnICYmIGtleSA9PSAnc2QnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09ICdzZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGt2cC5zcGxpY2UoaSwgMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrdnAuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdHJLZXlbMF0gPT0gJ3BhZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIGt2cC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGkgPSBrdnAubGVuZ3RoO1xuICAgIHZhciB4O1xuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICB4ID0ga3ZwW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgIGlmICh4WzBdID09IGtleSkge1xuICAgICAgICAgICAgeFsxXSA9IHZhbHVlO1xuICAgICAgICAgICAga3ZwW2ldID0geC5qb2luKCc9Jyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA8IDApIHtcbiAgICAgICAga3ZwW2t2cC5sZW5ndGhdID0gW2tleSwgdmFsdWVdLmpvaW4oJz0nKTtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCc/JykpIHtcbiAgICAgICAgZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID0ga3ZwLmpvaW4oJyYnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2ggPSBrdnAuam9pbignPycpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGF0ZXJhbmdlKCkge1xuICAgIGRlYnVnZ2VyO1xuICAgIGxldCBzdGRhdGUgPSAkKCcjc3RhcnQtZGF0ZScpLnZhbCgpO1xuICAgIGxldCBldGRhdGUgPSAkKCcjZW5kLWRhdGUnKS52YWwoKTtcbiAgICBsZXQgZ2V0c3RkYXRlID0gbmV3IERhdGUoc3RkYXRlKS5nZXRUaW1lKCk7XG4gICAgbGV0IGdldGV0ZGF0ZSA9IG5ldyBEYXRlKGV0ZGF0ZSkuZ2V0VGltZSgpO1xuICAgIGxldCBkYXRlID0gZ2V0c3RkYXRlICsgJyZlZD0nICsgZ2V0ZXRkYXRlO1xuICAgIGlmICghaXNOYU4oZ2V0c3RkYXRlKSAmJiAhaXNOYU4oZ2V0ZXRkYXRlKSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2QnLCBzdGRhdGUpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWQnLCBldGRhdGUpO1xuICAgICAgICBjaGVja1dpZHRoKCk7XG4gICAgICAgIGluc2VydFBhcmFtKCdzZCcsIGRhdGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2xlYXJGaWx0ZXIoKSB7XG4gICAgbGV0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgIGlmICh1cmwuaW5jbHVkZXMoXCI/XCIpKSB7XG4gICAgICAgIHVybCA9IHVybC5zcGxpdChcIj9cIilbMF07IC8vLnNwbGl0KFwiI1wiKVswXTsgd2hlbiB1IGhhdmUgIyBpbiBxdWVyeSBzdHJpbmcuLi5cbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKCduZXdVcmwnLCAndXJsJywgdXJsKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3NkJyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlZCcpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYXV0aG9yJyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzZWN0aW9uJyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdyZWwnKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH1cbn1cblxuJCgnI3NvcnRSZWxldmFuY2UnKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgIGxldCByZWwgPSAkKCcjc29ydFJlbGV2YW5jZScpLnZhbCgpO1xuICAgIGRlYnVnZ2VyO1xuICAgIGlmIChyZWwgPT0gJycpIHtcbiAgICAgICAgY2hlY2tXaWR0aCgpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncmVsJywgdHJ1ZSk7XG4gICAgICAgIGluc2VydFBhcmFtKCdyZWNlbnQnLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja1dpZHRoKCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZWwnLCByZWwpO1xuICAgICAgICBpbnNlcnRQYXJhbSgncmVjZW50JywgcmVsKTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gY2hhbmdlRmlsdGVyKGtleSkge1xuICAgIGxldCBkb21haW4gPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICB2YXIgcXVlcnlTdHJpbmcgPSBkb21haW4uc3BsaXQoJz8nKTtcbiAgICBsZXQga3ZwID0gcXVlcnlTdHJpbmdbMV0uc3BsaXQoJyYnKTtcbiAgICBpZiAoa3ZwICE9ICcnKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga3ZwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RyID0ga3ZwW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICBpZiAoKHN0clswXSA9PSAnYXV0aG9yJyAmJiBrZXkgPT0gJ2F1dGhvcicpIHx8IHN0clsxXSA9PSAnYWlkJyAmJiBrZXkgPT0gJ2F1dGhvcicpIHtcbiAgICAgICAgICAgICAgICBrdnAuc3BsaWNlKGksIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChzdHJbMF0gPT0gJ3NlY3Rpb24nICYmIGtleSA9PSAnc2VjdGlvbicpIHx8IHN0clsxXSA9PSAnc2lkJyAmJiBrZXkgPT0gJ3NlY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAga3ZwLnNwbGljZShpLCAyKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCc/JykpIHtcbiAgICAgICAga3ZwID0ga3ZwLmpvaW4oJyYnKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gcXVlcnlTdHJpbmdbMF0gKyBcIj9cIiArIGt2cDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBrdnAgPSBrdnAuam9pbignPycpO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBxdWVyeVN0cmluZ1swXSArIFwiP1wiICsga3ZwO1xuICAgIH1cblxuXG59XG5cbmZ1bmN0aW9uIGNoZWNrV2lkdGgoKSB7XG4gICAgdmFyIHNjcmVlbldpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgaWYgKHNjcmVlbldpZHRoIDw9IDk5MSkge1xuICAgICAgICAkKCcuY2xlYXJBbGxGaWx0ZXIudGFiJykuYWRkQ2xhc3MoJ3RhYi1zaXRlJyk7XG4gICAgICAgICQoJy5jbGVhckFsbEZpbHRlci50YWItc2l0ZScpLmNzcyh7J2Rpc3BsYXknOiAnYmxvY2snfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoc2NyZWVuV2lkdGggPj0gOTkyICYmIHNjcmVlbldpZHRoIDw9IDEwMjQpIHtcbiAgICAgICAgICAgICQoJy5zZWFyY2gtZmlsdGVyJykuYWRkQ2xhc3MoJ2Rlc2t0b3AnKTtcbiAgICAgICAgfVxuICAgICAgICAkKCcuY2xlYXJBbGxGaWx0ZXIuZGVza3RvcFZpZXcnKS5hZGRDbGFzcygnZGVza3RvcC1zaXRlJyk7XG4gICAgICAgICQoJy5jbGVhckFsbEZpbHRlci5kZXNrdG9wLXNpdGUnKS5jc3MoeydkaXNwbGF5JzogJ2Jsb2NrJ30pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVSZWFkTW9yZUh0bWwoYXJyKSB7XG4gICAgaHRtbCA9IFwiXCI7XG4gICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGh0bWwgKz0gJzxsaT48ZGl2IGNsYXNzPVwicGxhY2Vob2xkZXJTbWFsbCBUcmFuZGluZy1ob21lXCI+IDxhIGhyZWY9XCInICsgaXRlbS5jb250ZW50VXJsICsgJ1wiIHJlbD1cImZvbGxvd1wiIHRhcmdldD1cIl9zZWxmXCI+PGltZyBzcmM9XCJodHRwczovL3d3dy50ZWxlZ3JhcGhpbmRpYS5jb20vdW5zYWZlLzExMHg4My9zbWFydC9zdGF0aWMudGVsZWdyYXBoaW5kaWEuY29tJyArIGl0ZW0uaW1hZ2VTb3VyY2UgKyAnXCIgYWx0PVwiJyArIGl0ZW0uaW1hZ2VUaXRsZSArICdcIj48L2E+PC9kaXY+JyArICc8aDM+PGEgaHJlZj1cIicgKyBpdGVtLmNvbnRlbnRVcmwgKyAnXCIgY2xhc3M9XCJmb3VyTGluZVwiIHN0eWxlPVwiZmxvYXQ6IG5vbmU7IHBvc2l0aW9uOiBzdGF0aWM7XCI+JyArIGl0ZW0uaGVhZGxpbmUgKyAnPC9hPjwvaDM+PC9saT4nO1xuICAgIH0pO1xuICAgICQoXCIjbW9zdC1yZWFkXCIpLmh0bWwoaHRtbCk7XG59XG5cbmZ1bmN0aW9uIGZldGNoUmVhZE1vcmUocmVhZE1vcmVDb3VudFJlcXVpcmVkKSB7XG4gICAgcmVhZE1vcmVEYXRhID0gW107XG4gICAgdmFyIG1vc3RSZWFkU2V0dGluZ3MgPSB7XG4gICAgICAgIFwiYXN5bmNcIjogdHJ1ZSxcbiAgICAgICAgXCJjcm9zc0RvbWFpblwiOiB0cnVlLFxuICAgICAgICBcInVybFwiOiBcImh0dHBzOi8vYWJwLXJlbGF0ZWRzdG9yeS5zMy5hcC1zb3V0aC0xLmFtYXpvbmF3cy5jb20vVFRfbW9zdF9yZWFkX3N0b3J5L3JlYWRfbW9yZS5qc29uXCIsXG4gICAgICAgIFwibWV0aG9kXCI6IFwiR0VUXCIsXG4gICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVhZE1vcmVSZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYWRNb3JlUmVzdWx0KTtcbiAgICAgICAgICAgIGlmIChyZWFkTW9yZVJlc3VsdCAhPSB1bmRlZmluZWQgJiYgcmVhZE1vcmVSZXN1bHQubW9zdFJlYWQgIT0gdW5kZWZpbmVkICYmIHJlYWRNb3JlUmVzdWx0Lm1vc3RSZWFkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAocmVhZE1vcmVSZXN1bHQubW9zdFJlYWQubGVuZ3RoID49IHJlYWRNb3JlQ291bnRSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICByZWFkTW9yZURhdGEgPSByZWFkTW9yZVJlc3VsdC5tb3N0UmVhZC5zbGljZSgwLCByZWFkTW9yZUNvdW50UmVxdWlyZWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRNb3JlRGF0YSA9IHJlYWRNb3JlUmVzdWx0Lm1vc3RSZWFkLnNsaWNlKDAsIHJlYWRNb3JlUmVzdWx0Lm1vc3RSZWFkLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVhZE1vcmVEYXRhLmxlbmd0aCA8IHJlYWRNb3JlQ291bnRSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgIG1vcmVSZXF1aXJlZCA9IHJlYWRNb3JlQ291bnRSZXF1aXJlZCAtIHJlYWRNb3JlRGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJtb3JlUmVxdWlyZWQ9XCIgKyBtb3JlUmVxdWlyZWQpO1xuICAgICAgICAgICAgICAgIHRyZW5kaW5nU2V0dGluZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJhc3luY1wiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBcImNyb3NzRG9tYWluXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIFwidXJsXCI6IFwiaHR0cHM6Ly9hYnAtcmVsYXRlZHN0b3J5LnMzLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbS9UVF9UcmVuZGluZ19zdG9yeS90dF90cmVuZGluZy5qc29uIFwiLFxuICAgICAgICAgICAgICAgICAgICBcIm1ldGhvZFwiOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHRyZW5kaW5nUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndHJlbmRpbmcnLCB0cmVuZGluZ1Jlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmVuZGluZ1Jlc3VsdCAhPSB1bmRlZmluZWQgJiYgdHJlbmRpbmdSZXN1bHQudHRUcmVuZGluZyAhPSB1bmRlZmluZWQgJiYgdHJlbmRpbmdSZXN1bHQudHRUcmVuZGluZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vcmVSZXF1aXJlZCA8IHRyZW5kaW5nUmVzdWx0LnR0VHJlbmRpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRNb3JlRGF0YSA9IHJlYWRNb3JlRGF0YS5jb25jYXQodHJlbmRpbmdSZXN1bHQudHRUcmVuZGluZy5zbGljZSgwLCBtb3JlUmVxdWlyZWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkTW9yZURhdGEgPSByZWFkTW9yZURhdGEuY29uY2F0KHRyZW5kaW5nUmVzdWx0LnR0VHJlbmRpbmcuc2xpY2UoMCwgdHJlbmRpbmdSZXN1bHQudHRUcmVuZGluZy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZVJlYWRNb3JlSHRtbChyZWFkTW9yZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjMuLi4uLi4uLi4uLi4uLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGVyZSBpcyBhbiBlcnJvciB3aGlsZSBmZXRjaGluZyB0cmVuZGluZzpcIiArIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGF0YTpcIiArIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVSZWFkTW9yZUh0bWwocmVhZE1vcmVEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJC5hamF4KHRyZW5kaW5nU2V0dGluZykuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RyZW5kaW5nIGZldGNoIHVybCBpcyBoaXQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVSZWFkTW9yZUh0bWwocmVhZE1vcmVEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhLCBlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGVyZSBpcyBhbiBlcnJvciB3aGlsZSBmZXRjaGluZyBtb3N0IHJlYWQ6XCIgKyBlcnJvcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRhdGE6XCIgKyBkYXRhKTtcbiAgICAgICAgICAgIGdlbmVyYXRlUmVhZE1vcmVIdG1sKHJlYWRNb3JlRGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJC5hamF4KG1vc3RSZWFkU2V0dGluZ3MpLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb3N0IHJlYWQgZmV0Y2ggdXJsIGlzIGhpdCcpO1xuICAgIH0pO1xufVxuXG5mZXRjaFJlYWRNb3JlKDYpO1xuLy8gPC9zY3JpcHQ+XG5cblxuZnVuY3Rpb24gc2hvd0RlbGhpRWxlY3Rpb25UYWJsZSgpIHtcbiAgICB2YXIgbmV3WEhSID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIERPTkUgPSA0LFxuICAgICAgICBPSyA9IDIwMCxcbiAgICAgICAgc2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpLFxuICAgICAgICBjc3MgPSBcIlwiLFxuICAgICAgICBjc3NNUSA9IFwiXCIsXG4gICAgICAgIGFwaVVybCA9IFwiXCI7XG4gICAgaWYgKGxvY2F0aW9uLmhvc3RuYW1lID09IFwiaHR0cHM6Ly9tLnRlbGVncmFwaGluZGlhLmNvbS9cIikge1xuICAgICAgICBhcGlVcmwgPSAnaHR0cHM6Ly9hYnAtc3RhdGljLnMzLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbS9lbGVjdGlvbnMvZWxlY3Rpb24tMjAyMC9kZWxoaS1lbGVjdGlvbnMtMjAyMC5qc29uJyArIFwiP3NsaWRlPVwiICsgTWF0aC5yYW5kb20oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhcGlVcmwgPSAnaHR0cHM6Ly9hYnAtc3RhdGljLnMzLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbS9lbGVjdGlvbnMvZWxlY3Rpb24tMjAyMC9kZWxoaS1lbGVjdGlvbnMtMjAyMC5qc29uJyArIFwiP3NsaWRlPVwiICsgTWF0aC5yYW5kb20oKTtcbiAgICB9XG4gICAgbmV3WEhSLm9wZW4oJ0dFVCcsIGFwaVVybCk7XG4gICAgbmV3WEhSLnNlbmQoKTtcbiAgICBuZXdYSFIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAobmV3WEhSLnJlYWR5U3RhdGUgPT09IERPTkUpIHtcbiAgICAgICAgICAgIGlmIChuZXdYSFIuc3RhdHVzID09PSBPSykge1xuICAgICAgICAgICAgICAgIHZhciByZXR1cm5lZEpzb24gPSBuZXdYSFIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICAgIHZhciBvYmogPSBKU09OLnBhcnNlKHJldHVybmVkSnNvbik7XG4gICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICBvYmouZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNzcyArPSBcIi5kbC1lbGVjLVwiICsgZWxlbWVudC5wYXJ0eV9zaG9ydF9uYW1lLnRvTG93ZXJDYXNlKCkgKyBcIntiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO2JvcmRlci1sZWZ0OiA5cHggc29saWQgXCIgKyBlbGVtZW50LnBhcnR5X2NvbG9yX2NvZGUgKyBcIjttYXJnaW4tYm90dG9tOiA0cHg7cGFkZGluZzogMTJweH0uZGwtZWxlYy1cIiArIGVsZW1lbnQucGFydHlfc2hvcnRfbmFtZS50b0xvd2VyQ2FzZSgpICsgXCIgLmNvbC05e2JvcmRlci1yaWdodDogMnB4IHNvbGlkICM5Njk2OTY7cGFkZGluZzowfS5kbC1lbGVjLVwiICsgZWxlbWVudC5wYXJ0eV9zaG9ydF9uYW1lLnRvTG93ZXJDYXNlKCkgKyBcIiAuY29sLTN7cGFkZGluZzogMDt9LmRsLWVsZWMtXCIgKyBlbGVtZW50LnBhcnR5X3Nob3J0X25hbWUudG9Mb3dlckNhc2UoKSArIFwiIC5jb2wtOSBoNnttYXJnaW4tYm90dG9tOiAwO3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IDUwJTtkaXNwbGF5OiBibG9jazt0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7cGFkZGluZzogMDttYXJnaW46IDA7Zm9udC1zaXplOiAxOHB4O2NvbG9yOiBcIiArIGVsZW1lbnQucGFydHlfY29sb3JfY29kZSArIFwifVwiO1xuXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJ1xcdCcgKyAnPGRpdiBjbGFzcz1cInJvdyBkbC1lbGVjLScgKyBlbGVtZW50LnBhcnR5X3Nob3J0X25hbWUudG9Mb3dlckNhc2UoKSArICdcIj4nICsgJ1xcbic7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJ1xcdFxcdCcgKyAnPGRpdiBjbGFzcz1cImNvbC05XCI+JyArICdcXG4nO1xuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICdcXHRcXHRcXHQnICsgJzxoNj4nICsgZWxlbWVudC5wYXJ0eV9mdWxsX25hbWUgKyAnPC9oNj4nICsgJ1xcbic7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJ1xcdFxcdCcgKyAnPC9kaXY+JyArICdcXG4nO1xuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICdcXHRcXHQnICsgJzxkaXYgY2xhc3M9XCJjb2wtM1wiPicgKyAnXFxuJztcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnXFx0XFx0XFx0JyArICc8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXJcIj48c3Bhbj4nICsgZWxlbWVudC5wYXJ0eV9zZWF0cyArICc8L3NwYW4+PC9kaXY+JyArICdcXG4nO1xuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICdcXHRcXHQnICsgJzwvZGl2PicgKyAnXFxuJztcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnXFx0JyArICc8L2Rpdj4nICsgJ1xcbic7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2hlZXQuaW5uZXJIVE1MID0gY3NzO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2hlZXQpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiRGVsaGlFbGVjdGlvblRhYmxlXCIpLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogJyArIG5ld1hIUi5zdGF0dXMpOyAvLyBBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdGhlIHJlcXVlc3QuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5pZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkRlbGhpRWxlY3Rpb25UYWJsZVwiKSE9dW5kZWZpbmVkKXtcbiAgICBzaG93RGVsaGlFbGVjdGlvblRhYmxlKCk7XG4gICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBzaG93RGVsaGlFbGVjdGlvblRhYmxlKCk7XG4gICAgfSwgNjAwMDApOyAvLyA2MDAwMCBpcyBmb3Igb25lIG1pbiBhZGp1c3QgdGltZSBhY2NvcmRpbmdseVxufSIsImZ1bmN0aW9uIGVuY29kZShpbnB1dCkge1xuXHR2YXIgcmVzdWx0ID0gXCJcIjtcblx0dmFyIGN1cnJlbnRDZWxsO1xuXHR2YXIgbnVtO1xuXHR2YXIgZmFjdG9yO1xuXHR2YXIgc3RyO1xuXHR2YXIgZW5jb2RpbmdMaXN0ID0gW1wiMFwiLCBcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIiwgXCJFXCIsIFwiRlwiLCBcIkdcIiwgXCJIXCIsIFwiSVwiLCBcIkpcIiwgXCJLXCIsIFwiTFwiLCBcIk1cIiwgXCJOXCIsIFwiT1wiLCBcIlBcIiwgXCJRXCIsIFwiUlwiLCBcIlNcIiwgXCJUXCIsIFwiVVwiLCBcIlZcIiwgXCJXXCIsIFwiWFwiLCBcIllcIiwgXCJaXCIsIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBcImVcIiwgXCJmXCIsIFwiZ1wiLCBcImhcIiwgXCJpXCIsIFwialwiLCBcImtcIiwgXCJsXCIsIFwibVwiLCBcIm5cIiwgXCJvXCIsIFwicFwiLCBcInFcIiwgXCJyXCIsIFwic1wiLCBcInRcIiwgXCJ1XCIsIFwidlwiLCBcIndcIiwgXCJ4XCIsIFwieVwiLCBcInpcIl07XG5cdFxuXHRmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcblx0XHRjdXJyZW50Q2VsbCA9IGNlbGxzW2ldO1xuXG5cdFx0bnVtID0gMDtcblx0XHRmYWN0b3IgPSAxO1xuXHRcdFxuXHRcdFxuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgOTsgaisrKSB7XG5cdFx0XHRudW0gKz0gZmFjdG9yICogKGN1cnJlbnRDZWxsLnBlbmNpbG1hcmtzW2pdID8gMSA6IDApO1xuXHRcdFx0ZmFjdG9yICo9IDI7XG5cdFx0fVxuXHRcdFxuXHRcdG51bSArPSBmYWN0b3IgKiBjdXJyZW50Q2VsbC52YWx1ZTtcblx0XHRmYWN0b3IgKj0gMTA7XG5cdFx0XG5cdFx0bnVtICs9IGZhY3RvciAqIChjdXJyZW50Q2VsbC5pc0dpdmVuID8gMSA6IDApO1xuXHRcdGZhY3RvciAqPSAyO1xuXHRcdFxuXHRcdG51bSArPSBmYWN0b3IgKiBjdXJyZW50Q2VsbC5nZXRDb2xvcigpO1xuXHRcdGZhY3RvciAqPSA1O1xuXHRcdFxuXHRcdHN0ciA9IGVuY29kaW5nTGlzdFtudW0gLyAzODQ0IHwgMF07XG5cdFx0c3RyICs9IGVuY29kaW5nTGlzdFsobnVtIC8gNjIgfCAwKSAlIDYyXTtcblx0XHRzdHIgKz0gZW5jb2RpbmdMaXN0W251bSAlIDYyXTtcblx0XHRcblx0XHR3aGlsZSAoc3RyLmxlbmd0aCA8IDMpIHsgXG5cdFx0XHRzdHIgPSBcIjBcIiArIHN0cjtcblx0XHR9XG5cdFx0XG5cdFx0cmVzdWx0ICs9IHN0cjtcblx0fVxuXHRcblx0cmVzdWx0ICs9IGNlbGxzLmJsYW5rQ2VsbENvbG9yO1xuXHRcblx0cmV0dXJuIHJlc3VsdDtcblx0XG59XG5cbmZ1bmN0aW9uIGRlY29kZShpbnB1dCkge1xuXHR2YXIgcmVzdWx0ID0gXCJcIjtcblx0dmFyIGN1cnJlbnRDZWxsO1xuXHR2YXIgc3RyO1xuXHR2YXIgbnVtO1xuXHR2YXIgZmFjdG9yO1xuXHR2YXIgdmFsdWVzID0gXCJcIjtcblx0dmFyIGRlY29kaW5nTGlzdCA9IHtcIjBcIjowLCBcIjFcIjoxLCBcIjJcIjoyLCBcIjNcIjozLCBcIjRcIjo0LCBcIjVcIjo1LCBcIjZcIjo2LCBcIjdcIjo3LCBcIjhcIjo4LCBcIjlcIjo5LCBcIkFcIjoxMCwgXCJCXCI6MTEsIFwiQ1wiOjEyLCBcIkRcIjoxMywgXCJFXCI6MTQsIFwiRlwiOjE1LCBcIkdcIjoxNiwgXCJIXCI6MTcsIFwiSVwiOjE4LCBcIkpcIjoxOSwgXCJLXCI6MjAsIFwiTFwiOjIxLCBcIk1cIjoyMiwgXCJOXCI6MjMsIFwiT1wiOjI0LCBcIlBcIjoyNSwgXCJRXCI6MjYsIFwiUlwiOjI3LCBcIlNcIjoyOCwgXCJUXCI6MjksIFwiVVwiOjMwLCBcIlZcIjozMSwgXCJXXCI6MzIsIFwiWFwiOjMzLCBcIllcIjozNCwgXCJaXCI6MzUsIFwiYVwiOjM2LCBcImJcIjozNywgXCJjXCI6MzgsIFwiZFwiOjM5LCBcImVcIjo0MCwgXCJmXCI6NDEsIFwiZ1wiOjQyLCBcImhcIjo0MywgXCJpXCI6NDQsIFwialwiOjQ1LCBcImtcIjo0NiwgXCJsXCI6NDcsIFwibVwiOjQ4LCBcIm5cIjo0OSwgXCJvXCI6NTAsIFwicFwiOjUxLCBcInFcIjo1MiwgXCJyXCI6NTMsIFwic1wiOjU0LCBcInRcIjo1NSwgXCJ1XCI6NTYsIFwidlwiOjU3LCBcIndcIjo1OCwgXCJ4XCI6NTksIFwieVwiOjYwLCBcInpcIjo2MX07XG5cdHZhciBjb2xvcnNFbmNvZGVkID0gdHJ1ZTtcblx0XG5cdGlucHV0ID0gaW5wdXQucmVwbGFjZSgvW14wLTlBLVphLXpdL2csIFwiXCIpXG5cdFxuXHRpZiAoaW5wdXQubGVuZ3RoICE9PSAyNDMgJiYgaW5wdXQubGVuZ3RoICE9PSAyNDQpIHtcblx0XHRhbGVydChcIkludmFsaWQgaW5wdXQuXCIpO1xuXHRcdHJldHVybjtcblx0fVxuXHRcblx0Y29sb3JzRW5jb2RlZCA9IGlucHV0Lmxlbmd0aCA9PT0gMjQ0O1xuXHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XG5cdFx0Y3VycmVudENlbGwgPSBjZWxsc1tpXTtcblx0XHRcblx0XHRmYWN0b3IgPSAxO1xuXHRcdFxuXHRcdGlmIChjb2xvcnNFbmNvZGVkKSB7XG5cdFx0XHRudW0gPSBkZWNvZGluZ0xpc3RbaW5wdXQuY2hhckF0KGkgKiAzKV0gKiAzODQ0O1xuXHRcdFx0bnVtICs9IGRlY29kaW5nTGlzdFtpbnB1dC5jaGFyQXQoaSAqIDMgKyAxKV0gKiA2Mjtcblx0XHRcdG51bSArPSBkZWNvZGluZ0xpc3RbaW5wdXQuY2hhckF0KGkgKiAzICsgMildO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRudW0gPSBwYXJzZUludChpbnB1dC5zbGljZShpICogMywgaSAqIDMgKyAzKSwgMzYpO1xuXHRcdH1cblx0XHRcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IDk7IGorKykge1xuXHRcdFx0ZmFjdG9yID0gMjtcblx0XHRcdGN1cnJlbnRDZWxsLnBlbmNpbG1hcmtzW2pdID0gISEobnVtICUgZmFjdG9yKTtcblx0XHRcdFxuXHRcdFx0bnVtID0gKG51bSAvIGZhY3RvcikgfCAwO1xuXHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdGZhY3RvciA9IDEwO1xuXHRcdGN1cnJlbnRDZWxsLnNldFZhbHVlKG51bSAlIGZhY3Rvcik7XG5cdFx0dmFsdWVzICs9IG51bSAlIGZhY3RvciArIFwiXCI7XG5cdFx0bnVtID0gKG51bSAvIGZhY3RvcikgfCAwO1xuXHRcdFxuXHRcdGZhY3RvciA9IDI7XG5cdFx0Y3VycmVudENlbGwuaXNHaXZlbiA9ICEhKG51bSAlIGZhY3Rvcik7XG5cdFx0bnVtID0gKG51bSAvIGZhY3RvcikgfCAwO1xuXHRcdFxuXHRcdGZhY3RvciA9IDU7XG5cdFx0Y3VycmVudENlbGwuc2V0Q29sb3IobnVtICUgZmFjdG9yKTtcblx0XHRudW0gPSAobnVtIC8gZmFjdG9yKSB8IDA7XG5cdFx0XG5cdFx0aWYgKGN1cnJlbnRDZWxsLmlzR2l2ZW4pIHtcblx0XHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuaW5uZXJIVE1MID0gY3VycmVudENlbGwudmFsdWU7XG5cdFx0XHRjdXJyZW50Q2VsbC5jYW5kaWRhdGVzRWxlbWVudC5pbm5lckhUTUwgPSBjdXJyZW50Q2VsbC52YWx1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKGN1cnJlbnRDZWxsLnZhbHVlKSB7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuZmlyc3RDaGlsZC52YWx1ZSA9IGN1cnJlbnRDZWxsLnZhbHVlO1xuXHRcdFx0XHRjdXJyZW50Q2VsbC5jYW5kaWRhdGVzRWxlbWVudC5pbm5lckhUTUwgPSBjdXJyZW50Q2VsbC52YWx1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFVwZGF0ZSBwZW5jaWxtYXJrcyBkaXNwbGF5LlxuXHRcdFx0XHRjdXJyZW50Q2VsbC5jYW5kaWRhdGVzRWxlbWVudC5pbm5lckhUTUwgPSBjdXJyZW50Q2VsbC5nZXRQZW5jaWxtYXJrU3RyaW5nKCk7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuZmlyc3RDaGlsZC52YWx1ZSA9IFwiXCI7XG5cdFx0XHRcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdH1cblx0XG5cdGNlbGxzLmJsYW5rQ2VsbENvbG9yID0gcGFyc2VJbnQoaW5wdXQuY2hhckF0KDI0MykpO1xuXHRcblx0Ly8gSGlnaGxpZ2h0IHNlbGVjdGVkIGNvbG9yIGxpbmsuXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFya19ibGFua19jZWxsc18wXCIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiXCI7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFya19ibGFua19jZWxsc19cIiArIGNlbGxzLmJsYW5rQ2VsbENvbG9yKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNGRjhcIjtcblx0XG5cdFxuXHR2YXIgcHV6emxlID0gbmV3IFB1enpsZSh2YWx1ZXMpO1xuXG5cdGlmICghcHV6emxlLmhhc1NvbHV0aW9uKCkpIHtcblx0XHRhbGVydChcIlRoZXJlIGlzIG5vIHNvbHV0aW9uIGZvciB0aGUgaW5wdXR0ZWQgdmFsdWVzLlwiKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvcF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJlZ2luX3NvbHZpbmdcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRyb2xzXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JpZF90YWJsZVwiKS5zdHlsZS5wb3NpdGlvbiA9IFwic3RhdGljXCI7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JpZF90YWJsZVwiKS5zdHlsZS5tYXJnaW5Ub3AgPSBcIjhweFwiO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyaWRfdGFibGVcIikuc3R5bGUubWFyZ2luTGVmdCA9IFwiOHB4XCI7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lkZV9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbXBvcnRfc2F2ZV9idXR0b25cIikudGl0bGUgPSBcIlRoaXMgb3B0aW9uIGlzIGRpc2FibGVkIHdoZW4gYSBzdWRva3UgcHV6emxlIGlzIGluIHByb2dyZXNzLlwiO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltcG9ydF9zYXZlX2J1dHRvblwiKS5kaXNhYmxlZCA9IHRydWU7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzdGVfcHV6emxlX2J1dHRvblwiKS50aXRsZSA9IFwiVGhpcyBvcHRpb24gaXMgZGlzYWJsZWQgd2hlbiBhIHN1ZG9rdSBwdXp6bGUgaXMgaW4gcHJvZ3Jlc3MuXCI7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzdGVfcHV6emxlX2J1dHRvblwiKS5kaXNhYmxlZCA9IHRydWU7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZF9jb29raWVcIikudGl0bGUgPSBcIlRoaXMgb3B0aW9uIGlzIGRpc2FibGVkIHdoZW4gYSBzdWRva3UgcHV6emxlIGlzIGluIHByb2dyZXNzLlwiO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRfY29va2llXCIpLmRpc2FibGVkID0gdHJ1ZTtcblx0XG5cdGNlbGxzLnNvbHV0aW9uID0gcHV6emxlLnRvU3RyaW5nKCk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xuXHRcdGNlbGxzW2ldLnNvbHV0aW9uID0gcGFyc2VJbnQoY2VsbHMuc29sdXRpb24uY2hhckF0KGkpKTtcblx0fVxuXHRcblx0c2hvd0R1cGxpY2F0ZXMoKTtcbn1cblxuZnVuY3Rpb24gbG9hZEZyb21Db29raWUoKSB7XG5cdHZhciB2YWx1ZXMgPSBkb2N1bWVudC5jb29raWUucmVwbGFjZSgvKD86KD86XnwuKjtcXHMqKXN0YXRlXFxzKlxcPVxccyooKD86W147XSg/ITspKSpbXjtdPykuKil8LiovLCAnJDEnKTtcblx0XG5cdGlmICh2YWx1ZXMpIHtcblx0XHRkZWNvZGUodmFsdWVzKTtcblx0fSBlbHNlIHtcblx0XHRhbGVydChcIk5vIGN1cnJlbnQgc2F2ZSBleGlzdHMuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHNhdmVUb0Nvb2tpZSgpIHtcblx0dmFyIHZhbHVlcyA9IGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKC8oPzooPzpefC4qO1xccyopc3RhdGVcXHMqXFw9XFxzKigoPzpbXjtdKD8hOykpKlteO10/KS4qKXwuKi8sICckMScpO1xuXHRcblx0XG5cdGlmICh2YWx1ZXMpIHtcblx0XHRpZighY29uZmlybShcIkEgc2F2ZSBhbHJlYWR5IGV4aXN0cy4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIG92ZXJ3cml0ZSBpdD9cIikpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XHRcdFxuXHR9XG5cdFxuXHRkb2N1bWVudC5jb29raWUgPSAnc3RhdGU9JyArIGVuY29kZSgpICsgJzsgZXhwaXJlcz1GcmksIDMxIERlYyA5OTk5IDIzOjU5OjU5IEdNVCc7XG5cdFxuXHRpZiAoZG9jdW1lbnQuY29va2llKSB7XG5cdFx0YWxlcnQoXCJTYXZlIHN1Y2Nlc3NmdWwuXCIpO1xuXHR9IGVsc2Uge1xuXHRcdGFsZXJ0KFwiU2F2ZSBmYWlsZWQuIE1ha2Ugc3VyZSBjb29raWVzIGFyZSBlbmFibGVkIGluIHlvdXIgYnJvd3Nlci5cIik7XG5cdH1cblx0XG59XG4iLCJBcnJheS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24odmFsKSB7XG5cdHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aDtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdGlmICh0aGlzW2ldID09PSB2YWwpIHtcblx0XHRcdHRoaXMuc3BsaWNlKGksIDEpOyAvLyBSZW1vdmUgdGhlIGVsZW1lbnRcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmYWxzZTtcbn07XG5cbkFycmF5LnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKHZhbCkge1xuXHR2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdGlmICh0aGlzW2ldLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiQ2VsbFwiICYmIHRoaXNbaV0uaW5kZXggPT09IHZhbC5pbmRleCkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBlbHNlIGlmICh0aGlzW2ldID09PSB2YWwpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmYWxzZTtcbn1cblxuXG5mdW5jdGlvbiBQdXp6bGUoZ2l2ZW5zKSB7XG5cdFxuXHR2YXIgY2VsbHMgPSBbXTtcblx0dmFyIGd1ZXNzQ2VsbDsgLy8gU3RvcmUgZ3Vlc3MgY2VsbCAodGhlIGNlbGwgd2l0aCB0aGUgbGVhc3QgY2FuZGlkYXRlcykgYWZ0ZXIgcHJvY2Vzc2luZyBpbiBjYXNlIGl0IGNoYW5nZXMuXG5cdHZhciBndWVzc0NlbGxDYW5kaWRhdGVzO1xuXHR2YXIgc29sdXRpb247XG5cblx0dmFyIENlbGwgPSBmdW5jdGlvbiBDZWxsKGluZGV4LCB2YWx1ZSkge1xuXHRcdHRoaXMubmVpZ2hib3JzID0gW107XG5cdFx0dGhpcy5yb3dOZWlnaGJvcnMgPSBbXTtcblx0XHR0aGlzLmNvbHVtbk5laWdoYm9ycyA9IFtdO1xuXHRcdHRoaXMuYmxvY2tOZWlnaGJvcnMgPSBbXTtcblx0XHR0aGlzLmNhbmRpZGF0ZXMgPSBbXTtcblxuXHRcdHZhciBibG9ja3MgPSBbXG5cdFx0XHQwLCAwLCAwLCAxLCAxLCAxLCAyLCAyLCAyLFxuXHRcdFx0MCwgMCwgMCwgMSwgMSwgMSwgMiwgMiwgMixcblx0XHRcdDAsIDAsIDAsIDEsIDEsIDEsIDIsIDIsIDIsXG5cdFx0XHQzLCAzLCAzLCA0LCA0LCA0LCA1LCA1LCA1LFxuXHRcdFx0MywgMywgMywgNCwgNCwgNCwgNSwgNSwgNSxcblx0XHRcdDMsIDMsIDMsIDQsIDQsIDQsIDUsIDUsIDUsXG5cdFx0XHQ2LCA2LCA2LCA3LCA3LCA3LCA4LCA4LCA4LFxuXHRcdFx0NiwgNiwgNiwgNywgNywgNywgOCwgOCwgOCxcblx0XHRcdDYsIDYsIDYsIDcsIDcsIDcsIDgsIDgsIDhcblx0XHRdO1xuXG5cdFx0dmFyIGJsb2NrSW5kZWNlcyA9IFtcblx0XHRcdCAwLCAgMSwgIDIsICA5LCAxMCwgMTEsIDE4LCAxOSwgMjAsXG5cdFx0XHQgMywgIDQsICA1LCAxMiwgMTMsIDE0LCAyMSwgMjIsIDIzLFxuXHRcdFx0IDYsICA3LCAgOCwgMTUsIDE2LCAxNywgMjQsIDI1LCAyNixcblx0XHRcdDI3LCAyOCwgMjksIDM2LCAzNywgMzgsIDQ1LCA0NiwgNDcsXG5cdFx0XHQzMCwgMzEsIDMyLCAzOSwgNDAsIDQxLCA0OCwgNDksIDUwLFxuXHRcdFx0MzMsIDM0LCAzNSwgNDIsIDQzLCA0NCwgNTEsIDUyLCA1Myxcblx0XHRcdDU0LCA1NSwgNTYsIDYzLCA2NCwgNjUsIDcyLCA3MywgNzQsXG5cdFx0XHQ1NywgNTgsIDU5LCA2NiwgNjcsIDY4LCA3NSwgNzYsIDc3LFxuXHRcdFx0NjAsIDYxLCA2MiwgNjksIDcwLCA3MSwgNzgsIDc5LCA4MFxuXHRcdF07XG5cblx0XHR2YXIgY3VycmVudENlbGw7XG5cdFx0dmFyIHJvdyA9IE1hdGguZmxvb3IoaW5kZXggLyA5KTtcblx0XHR2YXIgY29sdW1uID0gaW5kZXggJSA5O1xuXHRcdHZhciBibG9jayA9IGJsb2Nrc1tpbmRleF07XG5cblx0XHR0aGlzLnByb2Nlc3NlZCA9IHRydWU7XG5cdFx0dGhpcy5pbmRleCA9IGluZGV4O1xuXHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0XHR0aGlzLmNvbG9yID0gMDtcblxuXHRcdGlmICh2YWx1ZSA9PT0gMCkge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDE7IGkgPD0gOTsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuY2FuZGlkYXRlcy5wdXNoKGkpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmNhbmRpZGF0ZXMucHVzaCh2YWx1ZSk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IG5laWdoYm9ycy5cblxuXHRcdC8vIHJvd1xuXHRcdGZvciAodmFyIGkgPSByb3cgKiA5OyAoaSA8IChyb3cgKyAxKSAqIDkpICYmIGkgPCBpbmRleDsgaSsrKSB7XG5cdFx0XHRjdXJyZW50Q2VsbCA9IGNlbGxzW2ldO1xuXG5cdFx0XHR0aGlzLm5laWdoYm9ycy5wdXNoKGN1cnJlbnRDZWxsKTtcblx0XHRcdGN1cnJlbnRDZWxsLm5laWdoYm9ycy5wdXNoKHRoaXMpO1xuXG5cdFx0XHR0aGlzLnJvd05laWdoYm9ycy5wdXNoKGN1cnJlbnRDZWxsKTtcblx0XHRcdGN1cnJlbnRDZWxsLnJvd05laWdoYm9ycy5wdXNoKHRoaXMpO1xuXHRcdH1cblxuXHRcdC8vIGNvbHVtblxuXHRcdGZvciAodmFyIGkgPSBjb2x1bW47IGkgPCA4MSAmJiBpIDwgaW5kZXg7IGkgKz0gOSkge1xuXHRcdFx0Y3VycmVudENlbGwgPSBjZWxsc1tpXTtcblxuXHRcdFx0aWYgKCEgdGhpcy5uZWlnaGJvcnMuY29udGFpbnMoY3VycmVudENlbGwpKSB7XG5cdFx0XHRcdHRoaXMubmVpZ2hib3JzLnB1c2goY3VycmVudENlbGwpO1xuXHRcdFx0XHRjdXJyZW50Q2VsbC5uZWlnaGJvcnMucHVzaCh0aGlzKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5jb2x1bW5OZWlnaGJvcnMucHVzaChjdXJyZW50Q2VsbCk7XG5cdFx0XHRjdXJyZW50Q2VsbC5jb2x1bW5OZWlnaGJvcnMucHVzaCh0aGlzKTtcblx0XHR9XG5cblx0XHQvLyBibG9ja1xuXHRcdGZvciAodmFyIGkgPSBibG9jayAqIDk7IGkgPCAoYmxvY2sgKyAxKSAqIDk7IGkrKykge1xuXHRcdFx0aWYgKGJsb2NrSW5kZWNlc1tpXSA8IGluZGV4KSB7XG5cblx0XHRcdFx0Y3VycmVudENlbGwgPSBjZWxsc1tibG9ja0luZGVjZXNbaV1dO1xuXG5cdFx0XHRcdGlmICghIHRoaXMubmVpZ2hib3JzLmNvbnRhaW5zKGN1cnJlbnRDZWxsKSkge1xuXHRcdFx0XHRcdHRoaXMubmVpZ2hib3JzLnB1c2goY3VycmVudENlbGwpO1xuXHRcdFx0XHRcdGN1cnJlbnRDZWxsLm5laWdoYm9ycy5wdXNoKHRoaXMpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5ibG9ja05laWdoYm9ycy5wdXNoKGN1cnJlbnRDZWxsKTtcblx0XHRcdFx0Y3VycmVudENlbGwuYmxvY2tOZWlnaGJvcnMucHVzaCh0aGlzKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLnNldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcblxuXHRcdFx0aWYgKHZhbHVlID09PSAwKSB7XG5cdFx0XHRcdHRoaXMuY2FuZGlkYXRlcyA9IFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5XTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuY2FuZGlkYXRlcyA9IFt2YWx1ZV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMudmFsdWUgKyBcIlwiO1xuXHRcdH07XG5cdH07XG5cblx0Ly8gSW5pdGlhbGl6ZSBjZWxscy5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XG5cdFx0Y2VsbHNbaV0gPSBuZXcgQ2VsbChpLCAwKTtcblx0fVxuXG5cdHZhciBwcm9jZXNzU2luZ2xlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjdXJyZW50Q2VsbDtcblx0XHR2YXIgcmVzdWx0ID0gZmFsc2U7XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcblx0XHRcdGN1cnJlbnRDZWxsID0gY2VsbHNbaV07XG5cblx0XHRcdGlmIChjdXJyZW50Q2VsbC5jYW5kaWRhdGVzLmxlbmd0aCA9PT0gMSAmJiAhY3VycmVudENlbGwucHJvY2Vzc2VkKSB7XG5cdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cblx0XHRcdFx0Y3VycmVudENlbGwudmFsdWUgPSBjdXJyZW50Q2VsbC5jYW5kaWRhdGVzWzBdO1xuXHRcdFx0XHRjdXJyZW50Q2VsbC5wcm9jZXNzZWQgPSB0cnVlO1xuXG5cdFx0XHRcdGZvciAodmFyIHYgPSAwOyB2IDwgY3VycmVudENlbGwubmVpZ2hib3JzLmxlbmd0aDsgdisrKSB7XG5cblxuXHRcdFx0XHRcdGlmIChjdXJyZW50Q2VsbC5uZWlnaGJvcnNbdl0uY2FuZGlkYXRlcy5yZW1vdmUoY3VycmVudENlbGwudmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50Q2VsbC5uZWlnaGJvcnNbdl0ucHJvY2Vzc2VkID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHR2YXIgcHJvY2Vzc0hpZGRlblNpbmdsZXMgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgY3VycmVudENlbGw7XG5cdFx0dmFyIHVuaXF1ZUNhbmRpZGF0ZXMgPSBbXTtcblx0XHR2YXIgcmVzdWx0ID0gZmFsc2U7XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcblx0XHRcdGN1cnJlbnRDZWxsID0gY2VsbHNbaV07XG5cblx0XHRcdGlmIChjdXJyZW50Q2VsbC52YWx1ZSAhPT0gMCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0dW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGggPSAwO1xuXG5cdFx0XHQvLyByb3dcblx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMgPSB1bmlxdWVDYW5kaWRhdGVzLmNvbmNhdChjdXJyZW50Q2VsbC5jYW5kaWRhdGVzKTtcblxuXHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5yb3dOZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0Zm9yICh2YXIgdSA9IDA7IHUgPCBjdXJyZW50Q2VsbC5yb3dOZWlnaGJvcnNbdl0uY2FuZGlkYXRlcy5sZW5ndGg7IHUrKykge1xuXHRcdFx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMucmVtb3ZlKGN1cnJlbnRDZWxsLnJvd05laWdoYm9yc1t2XS5jYW5kaWRhdGVzW3VdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAodW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0Y3VycmVudENlbGwudmFsdWUgPSB1bmlxdWVDYW5kaWRhdGVzWzBdO1xuXHRcdFx0XHRjdXJyZW50Q2VsbC5jYW5kaWRhdGVzLmxlbmd0aCA9IDA7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmNhbmRpZGF0ZXMucHVzaChjdXJyZW50Q2VsbC52YWx1ZSk7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLnByb2Nlc3NlZCA9IHRydWU7XG5cblx0XHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5uZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0XHRpZiAoY3VycmVudENlbGwubmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXMucmVtb3ZlKGN1cnJlbnRDZWxsLnZhbHVlKSkge1xuXHRcdFx0XHRcdFx0Y3VycmVudENlbGwubmVpZ2hib3JzW3ZdLnByb2Nlc3NlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHR1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCA9IDA7XG5cblx0XHRcdC8vIGNvbHVtblxuXHRcdFx0dW5pcXVlQ2FuZGlkYXRlcyA9IHVuaXF1ZUNhbmRpZGF0ZXMuY29uY2F0KGN1cnJlbnRDZWxsLmNhbmRpZGF0ZXMpO1xuXG5cdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IGN1cnJlbnRDZWxsLmNvbHVtbk5laWdoYm9ycy5sZW5ndGg7IHYrKykge1xuXHRcdFx0XHRmb3IgKHZhciB1ID0gMDsgdSA8IGN1cnJlbnRDZWxsLmNvbHVtbk5laWdoYm9yc1t2XS5jYW5kaWRhdGVzLmxlbmd0aDsgdSsrKSB7XG5cdFx0XHRcdFx0dW5pcXVlQ2FuZGlkYXRlcy5yZW1vdmUoY3VycmVudENlbGwuY29sdW1uTmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXNbdV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRjdXJyZW50Q2VsbC52YWx1ZSA9IHVuaXF1ZUNhbmRpZGF0ZXNbMF07XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmNhbmRpZGF0ZXMubGVuZ3RoID0gMDtcblx0XHRcdFx0Y3VycmVudENlbGwuY2FuZGlkYXRlcy5wdXNoKGN1cnJlbnRDZWxsLnZhbHVlKTtcblx0XHRcdFx0Y3VycmVudENlbGwucHJvY2Vzc2VkID0gdHJ1ZTtcblxuXHRcdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IGN1cnJlbnRDZWxsLm5laWdoYm9ycy5sZW5ndGg7IHYrKykge1xuXHRcdFx0XHRcdGlmIChjdXJyZW50Q2VsbC5uZWlnaGJvcnNbdl0uY2FuZGlkYXRlcy5yZW1vdmUoY3VycmVudENlbGwudmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50Q2VsbC5uZWlnaGJvcnNbdl0ucHJvY2Vzc2VkID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVzdWx0ID0gdHJ1ZTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMubGVuZ3RoID0gMDtcblxuXHRcdFx0Ly8gYmxvY2tcblx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMgPSB1bmlxdWVDYW5kaWRhdGVzLmNvbmNhdChjdXJyZW50Q2VsbC5jYW5kaWRhdGVzKTtcblxuXHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9ycy5sZW5ndGg7IHYrKykge1xuXHRcdFx0XHRmb3IgKHZhciB1ID0gMDsgdSA8IGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXMubGVuZ3RoOyB1KyspIHtcblx0XHRcdFx0XHR1bmlxdWVDYW5kaWRhdGVzLnJlbW92ZShjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XS5jYW5kaWRhdGVzW3VdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAodW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0Y3VycmVudENlbGwudmFsdWUgPSB1bmlxdWVDYW5kaWRhdGVzWzBdO1xuXHRcdFx0XHRjdXJyZW50Q2VsbC5jYW5kaWRhdGVzLmxlbmd0aCA9IDA7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmNhbmRpZGF0ZXMucHVzaChjdXJyZW50Q2VsbC52YWx1ZSk7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLnByb2Nlc3NlZCA9IHRydWU7XG5cblx0XHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5uZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0XHRpZiAoY3VycmVudENlbGwubmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXMucmVtb3ZlKGN1cnJlbnRDZWxsLnZhbHVlKSkge1xuXHRcdFx0XHRcdFx0Y3VycmVudENlbGwubmVpZ2hib3JzW3ZdLnByb2Nlc3NlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cblx0dmFyIGludGVyc2VjdGlvblJlbW92YWwgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgY3VycmVudENlbGw7XG5cdFx0dmFyIHVuaXF1ZUNhbmRpZGF0ZXMgPSBbXTtcblx0XHR2YXIgaW50ZXJzZWN0aW9uID0gW107XG5cdFx0dmFyIHJlc3VsdCA9IGZhbHNlO1xuXHRcdHZhciBzaXplO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSArPSAzKSB7XG5cdFx0XHRjdXJyZW50Q2VsbCA9IGNlbGxzW2ldO1xuXG5cdFx0XHRpZiAoY3VycmVudENlbGwuY2FuZGlkYXRlcy5sZW5ndGggPD0gMSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aW50ZXJzZWN0aW9uLmxlbmd0aCA9IDA7XG5cdFx0XHR1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCA9IDA7XG5cblx0XHRcdGZvciAodmFyIHYgPSAwOyB2IDwgY3VycmVudENlbGwuYmxvY2tOZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0aWYgKGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzW3ZdLnZhbHVlID09PSAwICYmIGN1cnJlbnRDZWxsLnJvd05laWdoYm9ycy5jb250YWlucyhjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XSkpIHtcblx0XHRcdFx0XHRpbnRlcnNlY3Rpb24ucHVzaChjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKGludGVyc2VjdGlvbi5sZW5ndGggPD0gMSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBpbnRlcnNlY3Rpb24ubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0Zm9yICh2YXIgdSA9IDA7IHUgPCBpbnRlcnNlY3Rpb25bdl0uY2FuZGlkYXRlcy5sZW5ndGg7IHUrKykge1xuXHRcdFx0XHRcdGlmICghdW5pcXVlQ2FuZGlkYXRlcy5jb250YWlucyhpbnRlcnNlY3Rpb25bdl0uY2FuZGlkYXRlc1t1XSkpIHtcblx0XHRcdFx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMucHVzaChpbnRlcnNlY3Rpb25bdl0uY2FuZGlkYXRlc1t1XSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5yb3dOZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0aWYgKCEgaW50ZXJzZWN0aW9uLmNvbnRhaW5zKGN1cnJlbnRDZWxsLnJvd05laWdoYm9yc1t2XSkpIHtcblx0XHRcdFx0XHRmb3IgKHZhciB1ID0gMDsgdSA8IGN1cnJlbnRDZWxsLnJvd05laWdoYm9yc1t2XS5jYW5kaWRhdGVzLmxlbmd0aDsgdSsrKSB7XG5cdFx0XHRcdFx0XHR1bmlxdWVDYW5kaWRhdGVzLnJlbW92ZShjdXJyZW50Q2VsbC5yb3dOZWlnaGJvcnNbdl0uY2FuZGlkYXRlc1t1XSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCA+IDAgJiYgaW50ZXJzZWN0aW9uLmxlbmd0aCA+PSB1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCkge1xuXG5cdFx0XHRcdGZvciAodmFyIHYgPSAwOyB2IDwgY3VycmVudENlbGwuYmxvY2tOZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblxuXHRcdFx0XHRcdGlmIChjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XS52YWx1ZSA9PT0gMCAmJiAhIGludGVyc2VjdGlvbi5jb250YWlucyhjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XSkpIHtcblx0XHRcdFx0XHRcdHNpemUgPSBjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XS5jYW5kaWRhdGVzLmxlbmd0aDtcblxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgdSA9IDA7IHUgPCB1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aDsgdSsrKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXMucmVtb3ZlKHVuaXF1ZUNhbmRpZGF0ZXNbdV0pO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudENlbGwuYmxvY2tOZWlnaGJvcnNbdl0uY2FuZGlkYXRlcy5sZW5ndGggIT0gc2l6ZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XS5wcm9jZXNzZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0cmVzdWx0ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGggPSAwO1xuXG5cdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IGludGVyc2VjdGlvbi5sZW5ndGg7IHYrKykge1xuXHRcdFx0XHRpZiAoaW50ZXJzZWN0aW9uW3ZdLnZhbHVlID09PSAwKSB7XG5cblx0XHRcdFx0XHRmb3IgKHZhciB1ID0gMDsgdSA8IGludGVyc2VjdGlvblt2XS5jYW5kaWRhdGVzLmxlbmd0aDsgdSsrKSB7XG5cdFx0XHRcdFx0XHRpZiAoIXVuaXF1ZUNhbmRpZGF0ZXMuY29udGFpbnMoaW50ZXJzZWN0aW9uW3ZdLmNhbmRpZGF0ZXNbdV0pKSB7XG5cdFx0XHRcdFx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMucHVzaChpbnRlcnNlY3Rpb25bdl0uY2FuZGlkYXRlc1t1XSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9ycy5sZW5ndGg7IHYrKykge1xuXHRcdFx0XHRpZiAoIWludGVyc2VjdGlvbi5jb250YWlucyhjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XSkpIHtcblx0XHRcdFx0XHRmb3IgKHZhciB1ID0gMDsgdSA8IGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXMubGVuZ3RoOyB1KyspIHtcblx0XHRcdFx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMucmVtb3ZlKGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXNbdV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAodW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGggPiAwICYmIGludGVyc2VjdGlvbi5sZW5ndGggPj0gdW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGgpIHtcblx0XHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5yb3dOZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0XHRpZiAoY3VycmVudENlbGwucm93TmVpZ2hib3JzW3ZdLnZhbHVlID09PSAwICYmICFpbnRlcnNlY3Rpb24uY29udGFpbnMoY3VycmVudENlbGwucm93TmVpZ2hib3JzW3ZdKSkge1xuXHRcdFx0XHRcdFx0c2l6ZSA9IGN1cnJlbnRDZWxsLnJvd05laWdoYm9yc1t2XS5jYW5kaWRhdGVzLmxlbmd0aDtcblxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgdSA9IDA7IHUgPCB1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aDsgdSsrKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRDZWxsLnJvd05laWdoYm9yc1t2XS5jYW5kaWRhdGVzLnJlbW92ZSh1bmlxdWVDYW5kaWRhdGVzW3VdKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRDZWxsLnJvd05laWdoYm9yc1t2XS5jYW5kaWRhdGVzLmxlbmd0aCAhPSBzaXplKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRDZWxsLnJvd05laWdoYm9yc1t2XS5wcm9jZXNzZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0cmVzdWx0ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpID0gaSAlIDkgPT09IDggPyBpICsgMTggOiBpICsgMSkge1xuXHRcdFx0Y3VycmVudENlbGwgPSBjZWxsc1tpXTtcblxuXHRcdFx0aWYgKGN1cnJlbnRDZWxsLmNhbmRpZGF0ZXMubGVuZ3RoIDw9IDEpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGludGVyc2VjdGlvbi5sZW5ndGggPSAwO1xuXG5cdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzLmxlbmd0aDsgdisrKSB7XG5cdFx0XHRcdGlmIChjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XS52YWx1ZSA9PT0gMCAmJiBjdXJyZW50Q2VsbC5jb2x1bW5OZWlnaGJvcnMuY29udGFpbnMoY3VycmVudENlbGwuYmxvY2tOZWlnaGJvcnNbdl0pKSB7XG5cdFx0XHRcdFx0aW50ZXJzZWN0aW9uLnB1c2goY3VycmVudENlbGwuYmxvY2tOZWlnaGJvcnNbdl0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpbnRlcnNlY3Rpb24ubGVuZ3RoIDw9IDEpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblxuXHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBpbnRlcnNlY3Rpb24ubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0Zm9yICh2YXIgdSA9IDA7IHUgPCBpbnRlcnNlY3Rpb25bdl0uY2FuZGlkYXRlcy5sZW5ndGg7IHUrKykge1xuXHRcdFx0XHRcdGlmICghdW5pcXVlQ2FuZGlkYXRlcy5jb250YWlucyhpbnRlcnNlY3Rpb25bdl0uY2FuZGlkYXRlc1t1XSkpIHtcblx0XHRcdFx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMucHVzaChpbnRlcnNlY3Rpb25bdl0uY2FuZGlkYXRlc1t1XSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5jb2x1bW5OZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0aWYgKCEgaW50ZXJzZWN0aW9uLmNvbnRhaW5zKGN1cnJlbnRDZWxsLmNvbHVtbk5laWdoYm9yc1t2XSkpIHtcblx0XHRcdFx0XHRmb3IgKHZhciB1ID0gMDsgdSA8IGN1cnJlbnRDZWxsLmNvbHVtbk5laWdoYm9yc1t2XS5jYW5kaWRhdGVzLmxlbmd0aDsgdSsrKSB7XG5cdFx0XHRcdFx0XHR1bmlxdWVDYW5kaWRhdGVzLnJlbW92ZShjdXJyZW50Q2VsbC5jb2x1bW5OZWlnaGJvcnNbdl0uY2FuZGlkYXRlc1t1XSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCA+IDAgJiYgaW50ZXJzZWN0aW9uLmxlbmd0aCA+PSB1bmlxdWVDYW5kaWRhdGVzLmxlbmd0aCkge1xuXHRcdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzLmxlbmd0aDsgdisrKSB7XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzW3ZdLnZhbHVlID09PSAwICYmICFpbnRlcnNlY3Rpb24uY29udGFpbnMoY3VycmVudENlbGwuYmxvY2tOZWlnaGJvcnNbdl0pKSB7XG5cdFx0XHRcdFx0XHRzaXplID0gY3VycmVudENlbGwuYmxvY2tOZWlnaGJvcnNbdl0uY2FuZGlkYXRlcy5sZW5ndGg7XG5cblx0XHRcdFx0XHRcdGZvciAodmFyIHUgPSAwOyB1IDwgdW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGg7IHUrKykge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XS5jYW5kaWRhdGVzLnJlbW92ZSh1bmlxdWVDYW5kaWRhdGVzW3VdKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXMubGVuZ3RoICE9IHNpemUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudENlbGwuYmxvY2tOZWlnaGJvcnNbdl0ucHJvY2Vzc2VkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMubGVuZ3RoID0gMDtcblxuXHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBpbnRlcnNlY3Rpb24ubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0aWYgKGludGVyc2VjdGlvblt2XS52YWx1ZSA9PT0gMCkge1xuXHRcdFx0XHRcdGZvciAodmFyIHUgPSAwOyB1IDwgaW50ZXJzZWN0aW9uW3ZdLmNhbmRpZGF0ZXMubGVuZ3RoOyB1KyspIHtcblx0XHRcdFx0XHRcdGlmICghdW5pcXVlQ2FuZGlkYXRlcy5jb250YWlucyhpbnRlcnNlY3Rpb25bdl0uY2FuZGlkYXRlc1t1XSkpIHtcblx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FuZGlkYXRlcy5wdXNoKGludGVyc2VjdGlvblt2XS5jYW5kaWRhdGVzW3VdKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKHVuaXF1ZUNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzLmxlbmd0aDsgdisrKSB7XG5cdFx0XHRcdGlmICghIGludGVyc2VjdGlvbi5jb250YWlucyhjdXJyZW50Q2VsbC5ibG9ja05laWdoYm9yc1t2XSkpIHtcblx0XHRcdFx0XHRmb3IgKHZhciB1ID0gMDsgdSA8IGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXMubGVuZ3RoOyB1KyspIHtcblx0XHRcdFx0XHRcdHVuaXF1ZUNhbmRpZGF0ZXMucmVtb3ZlKGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzW3ZdLmNhbmRpZGF0ZXNbdV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAodW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGggPiAwICYmIGludGVyc2VjdGlvbi5sZW5ndGggPj0gdW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGgpIHtcblx0XHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5jb2x1bW5OZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0XHRpZiAoY3VycmVudENlbGwuY29sdW1uTmVpZ2hib3JzW3ZdLnZhbHVlID09PSAwICYmICEgaW50ZXJzZWN0aW9uLmNvbnRhaW5zKGN1cnJlbnRDZWxsLmNvbHVtbk5laWdoYm9yc1t2XSkpIHtcblx0XHRcdFx0XHRcdHNpemUgPSBjdXJyZW50Q2VsbC5jb2x1bW5OZWlnaGJvcnNbdl0uY2FuZGlkYXRlcy5sZW5ndGg7XG5cblx0XHRcdFx0XHRcdGZvciAodmFyIHUgPSAwOyB1IDwgdW5pcXVlQ2FuZGlkYXRlcy5sZW5ndGg7IHUrKykge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50Q2VsbC5jb2x1bW5OZWlnaGJvcnNbdl0uY2FuZGlkYXRlcy5yZW1vdmUodW5pcXVlQ2FuZGlkYXRlc1t1XSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChjdXJyZW50Q2VsbC5jb2x1bW5OZWlnaGJvcnNbdl0uY2FuZGlkYXRlcy5sZW5ndGggIT0gc2l6ZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50Q2VsbC5jb2x1bW5OZWlnaGJvcnNbdl0ucHJvY2Vzc2VkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHQvLyBQZXJmb3JtIGZ1bmN0aW9uIG9mIGdyaWQuXG5cdC8vIFJlc2V0IGNlbGxzIHRvIHZhbHVlcy5cblx0Ly8gUHJvY2VzcyBzaW5nbGVzLCBoaWRkZW4gc2luZ2xlcy5cblx0Ly8gU2V0IGd1ZXNzQ2VsbCB0byB0aGUgaW5kZXggb2YgdGhlIGNlbGwgd2l0aCB0aGUgbGVhc3QgbnVtYmVyIG9mIGNhbmRpZGF0ZXM7IHNldCBndWVzc0NlbGxDYW5kaWRhdGVzLlxuXHQvLyBSZXR1cm4gZWFjaCBjZWxsJ3MgdmFsdWUgY29uY2F0ZW5hdGVkIGluIGEgc3RyaW5nLlxuXHR2YXIgcHJvY2VzcyA9IGZ1bmN0aW9uKHZhbHVlcykge1xuXHRcdHZhciBjdXJyZW50Q2VsbDtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xuXHRcdFx0Y2VsbHNbaV0uc2V0VmFsdWUoMCk7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XG5cdFx0XHR2YWx1ZSA9IHBhcnNlSW50KHZhbHVlc1tpXSk7XG5cblx0XHRcdGN1cnJlbnRDZWxsID0gY2VsbHNbaV07XG5cblx0XHRcdGlmICh2YWx1ZSAhPT0gMCkge1xuXHRcdFx0XHRjdXJyZW50Q2VsbC5zZXRWYWx1ZSh2YWx1ZSk7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLnByb2Nlc3NlZCA9IHRydWU7XG5cblx0XHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBjdXJyZW50Q2VsbC5uZWlnaGJvcnMubGVuZ3RoOyB2KyspIHtcblxuXHRcdFx0XHRcdGlmIChjdXJyZW50Q2VsbC5uZWlnaGJvcnNbdl0uY2FuZGlkYXRlcy5yZW1vdmUodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50Q2VsbC5uZWlnaGJvcnNbdl0ucHJvY2Vzc2VkID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjdXJyZW50Q2VsbC5wcm9jZXNzZWQgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR3aGlsZSAocHJvY2Vzc1NpbmdsZXMoKSB8fCBwcm9jZXNzSGlkZGVuU2luZ2xlcygpIHx8IGludGVyc2VjdGlvblJlbW92YWwoKSkge31cblxuXHRcdGd1ZXNzQ2VsbCA9IGNlbGxzWzBdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDE7IGkgPCA4MTsgaSsrKSB7XG5cdFx0XHRpZiAoZ3Vlc3NDZWxsLnZhbHVlICE9PSAwKSB7XG5cdFx0XHRcdGd1ZXNzQ2VsbCA9IGNlbGxzW2ldO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudENlbGwgPSBjZWxsc1tpXTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENob29zZSB0aGUgY2VsbCB3aXRoIHRoZSBsZWFzdCBjYW5kaWRhdGVzOlxuXHRcdFx0XHQvLyBpZiAoY3VycmVudENlbGwudmFsdWUgPT09IDAgJiYgY3VycmVudENlbGwuY2FuZGlkYXRlcy5sZW5ndGggPCBndWVzc0NlbGwuY2FuZGlkYXRlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHQvLyBndWVzc0NlbGwgPSBjdXJyZW50Q2VsbDtcblx0XHRcdFx0Ly8gfVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ2hvb3NlIHRoZSBmaXJzdCBlbXB0eSBjZWxsLlxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRndWVzc0NlbGxDYW5kaWRhdGVzID0gZ3Vlc3NDZWxsLmNhbmRpZGF0ZXM7XG5cblx0XHR2YXIgcmVzdWx0ID0gXCJcIjtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xuXG5cdFx0XHRyZXN1bHQgKz0gY2VsbHNbaV0udmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHR2YXIgaXNWYWxpZCA9IGZ1bmN0aW9uKHZhbHVlcykge1xuXHRcdHZhciBjdXJyZW50Q2VsbDtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xuXHRcdFx0Y3VycmVudENlbGwgPSBjZWxsc1tpXTtcblxuXHRcdFx0aWYgKHZhbHVlc1tpXSAhPT0gXCIwXCIpIHtcblxuXHRcdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IGN1cnJlbnRDZWxsLm5laWdoYm9ycy5sZW5ndGg7IHYrKykge1xuXHRcdFx0XHRcdGlmICh2YWx1ZXNbY3VycmVudENlbGwubmVpZ2hib3JzW3ZdLmluZGV4XSA9PT0gdmFsdWVzW2ldKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH07XG5cblx0dmFyIGlzRmlsbGVkID0gZnVuY3Rpb24odmFsdWVzKSB7XG5cdFx0IHJldHVybiB2YWx1ZXMuaW5kZXhPZihcIjBcIikgPT09IC0xO1xuXHR9O1xuXG5cdHRoaXMuaGFzU29sdXRpb24gPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gaXNGaWxsZWQoc29sdXRpb24pICYmIGlzVmFsaWQoc29sdXRpb24pO1xuXHR9O1xuXG5cdHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc29sdXRpb247XG5cdH07XG5cblx0XG5cdHZhciBzb2x2ZSA9IGZ1bmN0aW9uIHNvbHZlKGdpdmVucykge1xuXHRcdHZhciBzdGFjayA9IFtdO1xuXHRcdHZhciB2YWx1ZXM7XG5cdFx0dmFyIGxlbmd0aDtcblxuXHRcdHN0YWNrLnB1c2goZ2l2ZW5zKTtcblxuXHRcdHdoaWxlKHN0YWNrLmxlbmd0aCA+IDApIHtcblx0XHRcdHZhbHVlcyA9IHN0YWNrLnBvcCgpO1xuXHRcdFx0dmFsdWVzID0gcHJvY2Vzcyh2YWx1ZXMpO1xuXG5cdFx0XHRpZiAoaXNGaWxsZWQodmFsdWVzKSkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaXNWYWxpZCh2YWx1ZXMpKSB7XG5cdFx0XHRcdGxlbmd0aCA9IGd1ZXNzQ2VsbENhbmRpZGF0ZXMubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAodmFyIGkgPSBsZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdHN0YWNrLnB1c2godmFsdWVzLnN1YnN0cigwLCBndWVzc0NlbGwuaW5kZXgpICsgZ3Vlc3NDZWxsQ2FuZGlkYXRlc1tpXSArIHZhbHVlcy5zdWJzdHIoZ3Vlc3NDZWxsLmluZGV4ICsgMSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGdpdmVucztcblx0fTtcblxuXHRzb2x1dGlvbiA9IHNvbHZlKGdpdmVucyk7XG59XG4iLCJ2YXIgY2VsbHMgPSBbXTtcbnZhciBnYW1lTGV2ZWw7XG52YXIgc3RvcF9jbGljayA9IHRydWU7XG52YXIgaGlnaGxpZ2h0U3RhdHVzID0gZmFsc2U7XG52YXIgaGlnaGxpZ2h0VmFsdWUgPSAwO1xudmFyIHNlbGVjdGVkRGF0ZTtcbnZhciBzdWRva3VfanNvbjtcbnZhciBzdWRva3VfbGV2ZWwgPSBbXTtcbnZhciB0b2RheTtcblxuJChcIiNnZXRfYXV0b1wiKS5jbGljayhmdW5jdGlvbigpe1xuICBjbGVhclBlbmNpbG1hcmtzKCk7XG4gIHVwZGF0ZVBlbmNpbG1hcmtzKCk7XG59KTtcbiQoZG9jdW1lbnQpLnJlYWR5KCBmdW5jdGlvbigpIHtcbiAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgdmFyIGRheSA9IChcIjBcIiArIGN1cnJlbnREYXRlLmdldERhdGUoKSkuc2xpY2UoLTIpO1xuICAgIHZhciBtb250aCA9IChcIjBcIiArIChjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKTtcbiAgICB2YXIgdG9kYXkgO1xuICAgIHZhciBjb29raWVEYXRhID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZGF0ZScpO1xuICAgIGlmKCFjb29raWVEYXRhKXtcbiAgICAgICAgdG9kYXkgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpK1wiLVwiKyhtb250aCkrXCItXCIrKGRheSkgO1xuICAgIH1lbHNle1xuICAgICAgICB0b2RheSA9IGNvb2tpZURhdGE7XG4gICAgfVxuICAgJCgnI2RhdGVhcGlja2VyJykudmFsKHRvZGF5KTtcbn0pO1xuZnVuY3Rpb24gaW5wdXRPbktleURvd24oZSkge1xuXHR2YXIgY29kZSA9IGUua2V5Q29kZTtcblx0dmFyIHBvcztcblxuXHRzd2l0Y2ggKGNvZGUpIHtcblx0XHRjYXNlIDk6IC8vIHRhYlxuXHRcdGNhc2UgMjc6IC8vIGVzY2FwZVxuXHRcdGNhc2UgMzM6IC8vIHBhZ2UgdXBcblx0XHRjYXNlIDM0OiAvLyBwYWdlIGRvd25cblx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRicmVhaztcblxuXHRcdGNhc2UgMzc6IC8vIGxlZnRcblx0XHRwb3MgPSB0aGlzLmluZGV4O1xuXG5cdFx0ZG8ge1xuXHRcdFx0aWYgKHBvcyA9PT0gMCkge1xuXHRcdFx0XHRwb3MgPSA4MDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBvcy0tO1xuXHRcdFx0fVxuXHRcdH0gd2hpbGUgKGNlbGxzW3Bvc10uaXNHaXZlbik7XG5cblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNlbGxcIiArIHBvcyArIFwiX2lucHV0XCIpLmZvY3VzKCk7XG5cdFx0YnJlYWs7XG5cblx0XHRjYXNlIDM4OiAvLyB1cFxuXHRcdHBvcyA9IHRoaXMuaW5kZXg7XG5cblx0XHRkbyB7XG5cdFx0XHRpZiAocG9zIDwgOSkge1xuXHRcdFx0XHRwb3MgKz0gNzI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwb3MgLT0gOTtcblx0XHRcdH1cblx0XHR9IHdoaWxlIChjZWxsc1twb3NdLmlzR2l2ZW4pO1xuXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjZWxsXCIgKyBwb3MgKyBcIl9pbnB1dFwiKS5mb2N1cygpO1xuXHRcdGJyZWFrO1xuXG5cdFx0Y2FzZSAzOTogLy8gcmlnaHRcblx0XHRwb3MgPSB0aGlzLmluZGV4O1xuXG5cdFx0ZG8ge1xuXHRcdFx0aWYgKHBvcyA9PT0gODApIHtcblx0XHRcdFx0cG9zID0gMDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBvcysrO1xuXHRcdFx0fVxuXHRcdH0gd2hpbGUgKGNlbGxzW3Bvc10uaXNHaXZlbik7XG5cblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNlbGxcIiArIHBvcyArIFwiX2lucHV0XCIpLmZvY3VzKCk7XG5cdFx0YnJlYWs7XG5cblx0XHRjYXNlIDEzOiAvLyBlbnRlclxuXHRcdGNhc2UgNDA6IC8vIGRvd25cblx0XHRwb3MgPSB0aGlzLmluZGV4O1xuXG5cdFx0ZG8ge1xuXHRcdFx0aWYgKHBvcyA+IDcxKSB7XG5cdFx0XHRcdHBvcyAtPSA3Mjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBvcyArPSA5O1xuXHRcdFx0fVxuXHRcdH0gd2hpbGUgKGNlbGxzW3Bvc10uaXNHaXZlbik7XG5cblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNlbGxcIiArIHBvcyArIFwiX2lucHV0XCIpLmZvY3VzKCk7XG5cdFx0YnJlYWs7XG5cblx0XHQvLyA2NS05MCBhLXpcblx0XHQvLyA0OC01NyAwLTlcblx0XHQvLyA5Ny0xMDUgbnVtcGFkIDAtOVxuXG5cdFx0ZGVmYXVsdDpcblxuXHRcdFx0Ly8gZnVuY3Rpb24ga2V5c1xuXHRcdFx0aWYgKGNvZGUgPj0gMTEyICYmIGNvZGUgPD0gMTIzKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndyaXRlX21vZGVfdmFsdWVzXCIpLmNoZWNrZWQpIHtcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnZWRpdGVkX3BlbmNpbHMnKTtcblxuXHRcdFx0XHQvLyBiYWNrc3BhY2UgfHwgZGVsZXRlXG5cdFx0XHRcdGlmIChjb2RlID09PSA4IHx8IGNvZGUgPT09IDQ2KSB7XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnRDZWxsID0gY2VsbHNbdGhpcy5pbmRleF07XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG5cdFx0XHRcdFx0Y3VycmVudENlbGwuc2V0VmFsdWUoMCk7XG5cdFx0XHRcdFx0Ly8gY3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuaW5uZXJIVE1MID0gY3VycmVudENlbGwuZ2V0UGVuY2lsbWFya1N0cmluZygpO1xuXHRcdFx0XHRcdHNob3dEdXBsaWNhdGVzKCk7XG5cdFx0XHRcdFx0Y3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNhbmRpZGF0ZXNfaGlnaGxpZ2h0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNlbGxfaGlnaGxpZ2h0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjY2VsbFwiICsgY3VycmVudENlbGwuaW5kZXggKyBcIl9pbnB1dFwiKS5yZW1vdmVDbGFzcygnaGlkZUNhbmRpZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICAvLyBCZWZvcmUgZ2l2ZW5zIGFyZSBzdWJtaXR0ZWQsIGF1dG9tYXRpY2FsbHkgdXBkYXRlIHBlbmNpbG1hcmtzLlxuXHRcdFx0XHRcdGlmICghY2VsbHMuaGFzT3duUHJvcGVydHkoXCJzb2x1dGlvblwiKSkge1xuXHRcdFx0XHRcdFx0dXBkYXRlUGVuY2lsbWFya3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gMC05IHx8IG51bXBhZCAwLTlcblx0XHRcdFx0ZWxzZSBpZiAoKGNvZGUgPiA0OCAmJiBjb2RlIDw9IDU3KSB8fCAoY29kZSA+IDk2ICYmIGNvZGUgPD0gMTA1KSkge1xuXHRcdFx0XHRcdHZhciBkaWdpdCA9IGNvZGUgLSA0ODtcblxuXHRcdFx0XHRcdGlmIChkaWdpdCA+IDkpIGRpZ2l0ID0gY29kZSAtIDk2OyAvLyBGaXggb2Zmc2V0IGZvciBudW1wYWQuXG5cblx0XHRcdFx0XHR0aGlzLnZhbHVlID0gZGlnaXQ7XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnRDZWxsID0gY2VsbHNbdGhpcy5pbmRleF07XG5cdFx0XHRcdFx0Y3VycmVudENlbGwuc2V0VmFsdWUoZGlnaXQpO1xuXHRcdFx0XHRcdGlmICgoaGlnaGxpZ2h0VmFsdWU9PT1kaWdpdCkgJiYgKGhpZ2hsaWdodFN0YXR1cz09dHJ1ZSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNhbmRpZGF0ZXNfaGlnaGxpZ2h0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbC5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjZWxsX2hpZ2hsaWdodGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0c2hvd0R1cGxpY2F0ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNjZWxsXCIgKyBjdXJyZW50Q2VsbC5pbmRleCArIFwiX2lucHV0XCIpLmFkZENsYXNzKCdoaWRlQ2FuZGlkYXRlJyk7XG5cdFx0XHRcdFx0Ly8gQmVmb3JlIGdpdmVucyBhcmUgc3VibWl0dGVkLCBhdXRvbWF0aWNhbGx5IHVwZGF0ZSBwZW5jaWxtYXJrcy5cblx0XHRcdFx0XHRpZiAoIWNlbGxzLmhhc093blByb3BlcnR5KFwic29sdXRpb25cIikpIHtcblx0XHRcdFx0XHRcdHVwZGF0ZVBlbmNpbG1hcmtzKCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF1dG9fcGVuY2lsbWFya3NcIikuY2hlY2tlZCkge1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50Q2VsbC5uZWlnaGJvcnNbaV0udmFsdWUgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHRjdXJyZW50Q2VsbC5uZWlnaGJvcnNbaV0ucGVuY2lsbWFya3NbY3VycmVudENlbGwudmFsdWUgLSAxXSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRDZWxsLm5laWdoYm9yc1tpXS5jYW5kaWRhdGVzRWxlbWVudC5pbm5lckhUTUwgPSBjdXJyZW50Q2VsbC5uZWlnaGJvcnNbaV0uZ2V0UGVuY2lsbWFya1N0cmluZygpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIGN1cnJlbnRDZWxsLmNhbmRpZGF0ZXNFbGVtZW50LmlubmVySFRNTCA9IGN1cnJlbnRDZWxsLnZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0ICAgICAgICBpZiAoY29kZSA9PT0gOCB8fCBjb2RlID09PSA0Nikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDZWxsID0gY2VsbHNbdGhpcy5pbmRleF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENlbGwuc2V0VmFsdWUoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50Q2VsbC5jYW5kaWRhdGVzRWxlbWVudC5pbm5lckhUTUwgPSBjdXJyZW50Q2VsbC5nZXRQZW5jaWxtYXJrU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RHVwbGljYXRlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNhbmRpZGF0ZXNfaGlnaGxpZ2h0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbC5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjZWxsX2hpZ2hsaWdodGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmVmb3JlIGdpdmVucyBhcmUgc3VibWl0dGVkLCBhdXRvbWF0aWNhbGx5IHVwZGF0ZSBwZW5jaWxtYXJrcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2VsbHMuaGFzT3duUHJvcGVydHkoXCJzb2x1dGlvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBlbmNpbG1hcmtzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXHRcdFx0XHQvLyBQZW5jaWwgbWFya3M6IDAtOSB8fCBudW1wYWQgMC05XG5cdFx0XHRcdGlmICgoY29kZSA+IDQ4ICYmIGNvZGUgPD0gNTcpIHx8IChjb2RlID4gOTYgJiYgY29kZSA8PSAxMDUpKSB7XG5cdFx0XHRcdFx0dmFyIGRpZ2l0ID0gY29kZSAtIDQ4O1xuXG5cdFx0XHRcdFx0aWYgKGRpZ2l0ID4gOSkgZGlnaXQgPSBjb2RlIC0gOTY7IC8vIEZpeCBvZmZzZXQgZm9yIG51bXBhZC5cblxuXHRcdFx0XHRcdHZhciBjdXJyZW50Q2VsbCA9IGNlbGxzW3RoaXMuaW5kZXhdO1xuXHRcdFx0XHRcdHRhcmdldCA9ICdjZWxsJyt0aGlzLmluZGV4KydfaW5wdXQnXG5cblx0XHRcdFx0XHRpZiAoY3VycmVudENlbGwudmFsdWUgPT09IDApIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRDZWxsLnBlbmNpbG1hcmtzW2RpZ2l0IC0gMV0gPSAhY3VycmVudENlbGwucGVuY2lsbWFya3NbZGlnaXQgLSAxXTtcblxuXHRcdFx0XHRcdFx0Ly8gY3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuaW5uZXJIVE1MID0gY3VycmVudENlbGwuZ2V0UGVuY2lsbWFya1N0cmluZygpO1xuXHRcdFx0XHRcdFx0YXJyMSA9IGN1cnJlbnRDZWxsLmdldFBlbmNpbG1hcmtTdHJpbmcoKS5zcGxpdCgnJyk7XG5cdFx0XHRcdFx0XHRhcnIyID0gWycxJywnMicsJzMnLCc0JywnNScsJzYnLCc3JywnOCcsJzknXVxuXHRcdFx0XHRcdFx0JCgnIycrdGFyZ2V0KS5wYXJlbnQoKS5jaGlsZHJlbihcIi5zbWFsbF9zdWRva3VcIikuc2hvdygpLmFkZENsYXNzKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIHRhcmdldCkuYWRkQ2xhc3MoJ2VkaXRlZF9wZW5jaWxzJyk7XG5cblxuXHRcdFx0XHRcdFx0JCgnLicrdGFyZ2V0KycgJysnLmNhbmRpZGF0ZXNfc3Vkb2t1IHRkJykuZWFjaCggZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHRcdFx0XHR9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6ID0gJyc7XG5cdFx0XHRcdFx0XHRpZiAoISQoJyMnK3RhcmdldCkucGFyZW50KCkuY2hpbGRyZW4oXCIuc21hbGxfc3Vkb2t1XCIpLmhhc0NsYXNzKFwiYXNzaXN0XCIpKXtcblx0XHRcdFx0XHRcdFx0dmFyIHogPSAkLmdyZXAoYXJyMiwgZnVuY3Rpb24oZWwpe3JldHVybiAkLmluQXJyYXkoZWwsIGFycjEpID09IC0xfSk7XG5cblx0XHRcdFx0XHRcdFx0JC5lYWNoKHosIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0JCgnLicrdGFyZ2V0KS5maW5kKCcjJyt2YWx1ZSkuYXBwZW5kKHZhbHVlKVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHRcdCQuZWFjaChhcnIxLCBmdW5jdGlvbiggaW5kZXgsIHZhbHVlICkge1xuXHRcdFx0XHRcdFx0XHRcdCQoJy4nK3RhcmdldCkuZmluZCgnIycrdmFsdWUpLmFwcGVuZCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW5wdXRPbkZvY3VzKCkge1xuXHRcdGNlbGxzLmxhc3RTZWxlY3RlZENlbGwgPSB0aGlzLmluZGV4O1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlUGVuY2lsbWFya3MoKSB7XG5cdFx0dmFyIGN1cnJlbnRDZWxsO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xuXHRcdFx0Y3VycmVudENlbGwgPSBjZWxsc1tpXTtcblxuXHRcdFx0aWYgKGN1cnJlbnRDZWxsLnZhbHVlID09PSAwKSB7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLnBlbmNpbG1hcmtzID0gW3RydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWVdO1xuXG5cdFx0XHRcdGZvciAodmFyIGsgPSAwOyBrIDwgMjA7IGsrKykge1xuXHRcdFx0XHRcdGN1cnJlbnRDZWxsLnBlbmNpbG1hcmtzW2N1cnJlbnRDZWxsLm5laWdoYm9yc1trXS52YWx1ZSAtIDFdID0gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudENlbGwucGVuY2lsbWFya3MgPSBbZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZV07XG5cdFx0XHRcdGN1cnJlbnRDZWxsLnBlbmNpbG1hcmtzW2N1cnJlbnRDZWxsLnZhbHVlIC0gMV0gPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0Ly8gY3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuaW5uZXJIVE1MID0gY3VycmVudENlbGwucGVuY2lsbWFya3MubWFwKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCl7aWYodmFsdWUpcmV0dXJuIGluZGV4ICsgMTt9KS5qb2luKFwiXCIpO1xuXHRcdFx0Y29udGVuZGVycyA9IGN1cnJlbnRDZWxsLnBlbmNpbG1hcmtzLm1hcChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpe2lmKHZhbHVlKXJldHVybiBpbmRleCArIDE7fSkuam9pbihcIlwiKTtcblx0XHRcdGlmIChjdXJyZW50Q2VsbC5jYW5kaWRhdGVzRWxlbWVudC5pbm5lckhUTUwuaW5jbHVkZXMoJ3RhYmxlJykpe1xuXHRcdFx0XHR0YXJnZXQgPSAnY2VsbCcraSsnX2lucHV0J1xuXHRcdFx0XHQkKCcjJyt0YXJnZXQpLnBhcmVudCgpLmNoaWxkcmVuKFwiLnNtYWxsX3N1ZG9rdVwiKS5zaG93KCkuYWRkQ2xhc3ModGFyZ2V0KTtcblx0XHRcdFx0JCgnIycrdGFyZ2V0KS5wYXJlbnQoKS5jaGlsZHJlbihcIi5zbWFsbF9zdWRva3VcIikuc2hvdygpLmFkZENsYXNzKCdhc3Npc3QnKTtcblx0XHRcdFx0JCgnIycrdGFyZ2V0KS5hZGRDbGFzcygnZWRpdGVkX3BlbmNpbHMnKTtcblx0XHRcdFx0eiA9IGNvbnRlbmRlcnMuc3BsaXQoJycpXG5cdFx0XHRcdCQuZWFjaCh6LCBmdW5jdGlvbiggaW5kZXgsIHZhbHVlICkge1xuXHRcdFx0XHRcdCQoJy4nK3RhcmdldCkuZmluZCgnIycrdmFsdWUpLmFwcGVuZCh2YWx1ZSlcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHN0b3BfY2xpY2spe1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZXRfYXV0b1wiKS5kaXNhYmxlZD1mYWxzZTtcblx0XHRcdHN0b3BfY2xpY2sgPSBmYWxzZTtcblx0XHR9XG5cdFx0ZWxzZXtcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2V0X2F1dG9cIikuZGlzYWJsZWQ9dHJ1ZTtcblx0XHR9XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhclBlbmNpbG1hcmtzKCkge1xuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2V0X2F1dG9cIikuZGlzYWJsZWQ9ZmFsc2U7XG5cdFx0dmFyIGN1cnJlbnRDZWxsO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XG5cdFx0XHRjdXJyZW50Q2VsbCA9IGNlbGxzW2ldO1xuXHRcdFx0Y3VycmVudENlbGwucGVuY2lsbWFya3MgPSBbdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZV07XG5cdFx0XHRpZiAoY3VycmVudENlbGwudmFsdWUgPT09IDApIHtcblx0XHRcdFx0Ly8gY3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuaW5uZXJIVE1MID0gXCIxMjM0NTY3ODlcIjtcblx0XHRcdFx0Y3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuaW5uZXJIVE1MID0gY3VycmVudENlbGwudmFsdWUgKyBcIlwiO1xuXHRcdFx0fVxuXHRcdFx0dGFyZ2V0ID0gJ2NlbGwnK2krJ19pbnB1dCdcbiAgICAgICAgICAgICQoJyMnK3RhcmdldCkucGFyZW50KCkuY2hpbGRyZW4oXCIuc21hbGxfc3Vkb2t1XCIpLnNob3coKS5yZW1vdmVDbGFzcyh0YXJnZXQpO1xuICAgICAgICAgICAgJCgnIycrdGFyZ2V0KS5wYXJlbnQoKS5jaGlsZHJlbihcIi5zbWFsbF9zdWRva3VcIikuc2hvdygpLnJlbW92ZUNsYXNzKCdhc3Npc3QnKTtcbiAgICAgICAgICAgICQoJyMnK3RhcmdldCkucmVtb3ZlQ2xhc3MoJ2VkaXRlZF9wZW5jaWxzJyk7XG5cdFx0fVxuXHRcdHBlbmNpbE1hcmtUYWJsZSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2hvd0R1cGxpY2F0ZXMoKSB7XG5cdFx0dmFyIGN1cnJlbnRDZWxsO1xuXG5cdFx0aWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hvd19kdXBsaWNhdGVzXCIpLmNoZWNrZWQpIHtcblxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XG5cdFx0XHRcdGN1cnJlbnRDZWxsID0gY2VsbHNbaV07XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNlbGxfZHVwbGljYXRlXCIpO1xuXG5cdFx0XHRcdGlmIChjdXJyZW50Q2VsbC52YWx1ZSAhPT0gMCkge1xuXHRcdFx0XHRcdGZvciAodmFyIGsgPSAwOyBrIDwgMjA7IGsrKykge1xuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRDZWxsLnZhbHVlID09PSBjdXJyZW50Q2VsbC5uZWlnaGJvcnNba10udmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudENlbGwuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY2VsbF9kdXBsaWNhdGVcIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XG5cdFx0XHRcdGNlbGxzW2ldLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNlbGxfZHVwbGljYXRlXCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFyQ2VsbHMoKSB7XG5cdFx0aWYgKCF3aW5kb3cuY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjbGVhciB0aGlzIHN1ZG9rdSBwdXp6bGU/XCIpKSByZXR1cm47XG5cdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuXHR9XG5cblx0Ly8gZnVuY3Rpb24gcmVtb3ZlUGVuY2lsbWFya3MoKXtcblx0Ly8gXHQkKCcud3JpdGVfbW9kZV92YWx1ZXMnKS5oaWRlKCcnKVxuXHQvLyB9XG5cbmZ1bmN0aW9uIHRvZGF5RGF0ZSgpIHtcblx0XHR2YXIgdG9kYXkgPSBuZXcgRGF0ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGVhcGlja2VyXCIpLnZhbHVlKTtcblx0XHR2YXIgZGQgPSB0b2RheS5nZXREYXRlKCk7XG5cdFx0dmFyIG1tID0gdG9kYXkuZ2V0TW9udGgoKSsxOyAvL0phbnVhcnkgaXMgMCFcblxuXHRcdHZhciB5eXl5ID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcblx0XHRpZihkZDwxMCl7XG5cdFx0XHRkZD0nMCcrZGQ7XG4gICAgICAgIH1cblx0XHRpZihtbTwxMCl7XG5cdFx0XHRtbT0nMCcrbW07XG4gICAgICAgIH1cblx0XHR2YXIgdG9kYXkgPSBkZCsnLycrbW0rJy8nK3l5eXk7XG5cdFx0cmV0dXJuIHRvZGF5XG5cdH1cblxuZnVuY3Rpb24gdG9kYXlEYXRlVG9BamF4KCkge1xuICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZWFwaWNrZXJcIikudmFsdWUpO1xuICAgIHZhciBkZCA9IHRvZGF5LmdldERhdGUoKTtcbiAgICB2YXIgbW0gPSB0b2RheS5nZXRNb250aCgpICsgMTsgLy9KYW51YXJ5IGlzIDAhXG5cbiAgICB2YXIgeXl5eSA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gICAgaWYgKGRkIDwgMTApIHtcbiAgICAgICAgZGQgPSAnMCcgKyBkZDtcbiAgICB9XG4gICAgaWYgKG1tIDwgMTApIHtcbiAgICAgICAgbW0gPSAnMCcgKyBtbTtcbiAgICB9XG4gICAgdmFyIHRvZGF5ID0gZGQgKyAnLScgKyBtbSArICctJyArIHl5eXk7XG4gICAgcmV0dXJuIHRvZGF5O1xufVxuXG5mdW5jdGlvbiBnZXRTdWRva3VEYXRhRnJvbUFqYXgoKSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgICAgICB1cmw6ICcvc3Vkb2t1L2RhdGEnLFxuICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1wic3Vkb2t1RGF0ZVwiOiB0b2RheURhdGVUb0FqYXgoKX0pLFxuICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Vkb2t1X2pzb24gPSBkYXRhO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXgpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgdmFyIGR1bW15X3N1ZG9rdV9sZXZlbCA9IFtcImVhc3lcIiwgXCJtZWRpdW1cIiwgXCJoYXJkXCIsIFwiZGlhYm9saWNhbFwiXTtcbiAgICBpZiAodHlwZW9mIHN1ZG9rdV9qc29uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0b2RheSA9IHRvZGF5RGF0ZSgpO1xuICAgICAgICBzdWRva3VfanNvblt0b2RheV0uZm9yRWFjaChmdW5jdGlvbiAoZWxlLCBpbmRleCkge1xuICAgICAgICAgICAgc3Vkb2t1X2xldmVsLnB1c2goT2JqZWN0LmtleXMoZWxlKVswXSlcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBkdW1teV9zdWRva3VfbGV2ZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzdWRva3VfbGV2ZWwuaW5jbHVkZXMoZHVtbXlfc3Vkb2t1X2xldmVsW2ldKSkge1xuICAgICAgICAgICAgICAgICQoJyNwYXN0ZV9wdXp6bGVfYnV0dG9uXycgKyBkdW1teV9zdWRva3VfbGV2ZWxbaV0pLnNob3coKTtcbiAgICAgICAgICAgICAgICBpZiAoZHVtbXlfc3Vkb2t1X2xldmVsW2ldID09PSBcImVhc3lcIikge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2ZpcnN0X3NwYW5cIikuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZHVtbXlfc3Vkb2t1X2xldmVsW2ldID09PSBcImRpYWJvbGljYWxcIikge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3RoaXJkX3NwYW5cIikuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZHVtbXlfc3Vkb2t1X2xldmVsW2ldID09PSBcImhhcmRcIikge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3NlY29uZF9zcGFuXCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZHVtbXlfc3Vkb2t1X2xldmVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAkKCcjcGFzdGVfcHV6emxlX2J1dHRvbl8nICsgZHVtbXlfc3Vkb2t1X2xldmVsW2ldKS5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgJChcIiNmaXJzdF9zcGFuLCAjdGhpcmRfc3BhbiwgI3NlY29uZF9zcGFuXCIpLnNob3coKTtcbiAgICB9XG5cbn1cblx0ZnVuY3Rpb24gZ2VuZXJhdGVTdWRva3UobGV2ZWwpe1xuXHRcdHZhciBhcnJheV9rZXlzID0gbmV3IEFycmF5KCk7XG5cdFx0dmFyIGFycmF5X3ZhbHVlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBnZXRTdWRva3VEYXRhRnJvbUFqYXgoKTtcbiAgICAgICAgdG9kYXkgPSB0b2RheURhdGUoKTtcblx0XHRpZiAobGV2ZWwgPT0gJ2Vhc3knKSB7XG5cdFx0XHRnZW5lcmF0ZUJvYXJkID0gbXlTdWRva3VKUy5nZW5lcmF0ZUJvYXJkKCdlYXN5Jyk7XG5cdFx0XHRnZXRCb2FyZCA9IG15U3Vkb2t1SlMuZ2V0Qm9hcmQoJ2Vhc3knKVxuXHRcdH0gZWxzZSBpZiAobGV2ZWwgPT0gJ21lZGl1bScpIHtcblx0XHRcdGdlbmVyYXRlQm9hcmQgPSBteVN1ZG9rdUpTLmdlbmVyYXRlQm9hcmQoJ21lZGl1bScpO1xuXHRcdFx0Z2V0Qm9hcmQgPSBteVN1ZG9rdUpTLmdldEJvYXJkKCdtZWRpdW0nKVxuXHRcdH0gZWxzZSBpZiAobGV2ZWwgPT0gJ2hhcmQnKXtcblx0XHRcdGdlbmVyYXRlQm9hcmQgPSBteVN1ZG9rdUpTLmdlbmVyYXRlQm9hcmQoJ2hhcmQnKTtcblx0XHRcdGdldEJvYXJkID0gbXlTdWRva3VKUy5nZXRCb2FyZCgnaGFyZCcpXG5cdFx0fSBlbHNlIGlmIChsZXZlbCA9PSAnZGlhYm9saWNhbCcpe1xuICAgICAgICAgICAgZ2VuZXJhdGVCb2FyZCA9IG15U3Vkb2t1SlMuZ2VuZXJhdGVCb2FyZCgnZGlhYm9saWNhbCcpO1xuICAgICAgICAgICAgZ2V0Qm9hcmQgPSBteVN1ZG9rdUpTLmdldEJvYXJkKCdkaWFib2xpY2FsJylcbiAgICAgICAgfWVsc2V7XG5cdFx0XHRnZW5lcmF0ZUJvYXJkID0gbXlTdWRva3VKUy5nZW5lcmF0ZUJvYXJkKCdlYXN5Jyk7XG5cdFx0XHRnZXRCb2FyZCA9IG15U3Vkb2t1SlMuZ2V0Qm9hcmQoJ2Vhc3knKVxuXHRcdH1cblxuXHRcdGZvciAodmFyIGtleSBpbiBnZXRCb2FyZClcblx0XHR7XG5cdFx0XHRhcnJheV9rZXlzLnB1c2goa2V5KTtcblx0XHRcdGFycmF5X3ZhbHVlcy5wdXNoKGdldEJvYXJkW2tleV0udmFsKTtcblx0XHR9XG5cblx0XHRpZiAoYXJyYXlfdmFsdWVzLmxlbmd0aCA9PSA4Myl7XG5cdFx0XHRhcnJheV92YWx1ZXMuc3BsaWNlKDgxLCAyKVxuXHRcdH1cblxuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgYXJyYXlfdmFsdWVzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoYXJyYXlfdmFsdWVzW2pdID09IG51bGwpIHtcblx0XHRcdFx0YXJyYXlfdmFsdWVzW2pdID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdFx0YXJyYXlfdmFsdWVzLnRvU3RyaW5nKClcblx0XHRzdWRva3Vfc3RyaW5nID0gYXJyYXlfdmFsdWVzLnRvU3RyaW5nKCkucmVwbGFjZSggLywvZywgXCJcIiApO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygc3Vkb2t1X2pzb24gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICQoJyNjb3B5cmlnaHRfc3Vkb2t1JykuaGlkZSgpO1xuXHRcdFx0cmV0dXJuKHN1ZG9rdV9zdHJpbmcpO1xuXHRcdH1cblx0XHRlbHNle1xuICAgICAgICAgICAgdG9kYXkgPSB0b2RheURhdGUoKTtcbiAgICAgICAgICAgIHN1ZG9rdV9qc29uW3RvZGF5XS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZS5lYXN5ICYmIGxldmVsID09ICdlYXN5Jykge1xuICAgICAgICAgICAgICAgICAgICBzdWRva3Vfc3RyaW5nID0gZWxlLmVhc3kudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlbGUubWVkaXVtICYmIGxldmVsID09ICdtZWRpdW0nKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1ZG9rdV9zdHJpbmcgPSBlbGUubWVkaXVtLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZWxlLmhhcmQgJiYgbGV2ZWwgPT0gJ2hhcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1ZG9rdV9zdHJpbmcgPSBlbGUuaGFyZC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVsZS5kaWFib2xpY2FsICYmIGxldmVsID09ICdkaWFib2xpY2FsJykge1xuICAgICAgICAgICAgICAgICAgICBzdWRva3Vfc3RyaW5nID0gZWxlLmRpYWJvbGljYWwudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXHRcdH1cblx0XHRyZXR1cm4oc3Vkb2t1X3N0cmluZyk7XG5cdH1cblx0ZnVuY3Rpb24gcGFzdGVQdXp6bGUobGV2ZWwpIHtcblx0XHR2YXIgdmFsdWVzID0gZ2VuZXJhdGVTdWRva3UobGV2ZWwpXG5cdFx0Z2FtZUxldmVsID0gbGV2ZWw7XG4gICAgICAgIGxlYWRlckJvYXJkKCk7XG5cblx0Ly8gdmFyIHZhbHVlcyA9IHdpbmRvdy5wcm9tcHQoXCJFbnRlciBhIHN1ZG9rdSBwdXp6bGUuIFVzZSBcXFwiMFxcXCIsIFxcXCIuXFxcIiwgXFxcIipcXFwiLCBvciBcXFwiX1xcXCIgZm9yIGVtcHR5IGNlbGxzLlxcbkFsbCBvdGhlciBjaGFyYWN0ZXJzIGFyZSBpZ25vcmVkLlxcbkFsdGVybmF0aXZlbHksIGxvYWQgYSBwcmV2aW91c2x5IHNhdmVkIHB1enpsZS5cIik7XG5cdC8vIHZhciB2YWx1ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3RlX3B1enpsZVwiKS52YWx1ZTtcblxuXHR2YWx1ZXMgPSB2YWx1ZXMucmVwbGFjZSgvWy4qX10vZywgXCIwXCIpO1xuXHR2YWx1ZXMgPSB2YWx1ZXMucmVwbGFjZSgvW14wLTldL2csIFwiXCIpO1xuXG5cdGlmICh2YWx1ZXMubGVuZ3RoICE9PSA4MSkge1xuXHRcdHdpbmRvdy5hbGVydChcIkludmFsaWQgaW5wdXRcIik7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcblx0XHR2YXIgY3VycmVudENlbGwgPSBjZWxsc1tpXTtcblxuXHRcdGlmIChjdXJyZW50Q2VsbC5lbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcblx0XHRcdGN1cnJlbnRDZWxsLnNldFZhbHVlKHBhcnNlSW50KHZhbHVlcy5jaGFyQXQoaSkpKTtcblxuXHRcdFx0aWYgKGN1cnJlbnRDZWxsLnZhbHVlICE9PSAwKSB7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuZmlyc3RDaGlsZC52YWx1ZSA9IGN1cnJlbnRDZWxsLnZhbHVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudENlbGwuZWxlbWVudC5maXJzdENoaWxkLnZhbHVlID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRjbGVhclBlbmNpbG1hcmtzKCk7XG5cdGhpZ2hsaWdodCgwKTtcblx0Ly9zaG93RHVwbGljYXRlcygpO1xufVxuXG5mdW5jdGlvbiBzYXZlUHV6emxlKCkge1xuXHR3aW5kb3cucHJvbXB0KFwiQ29weSB0aGUgdGV4dCBzdHJpbmcgYmVsb3cgYW5kIHBhc3RlIGl0IGludG8gYSBuZXcgdGV4dCBmaWxlLlxcblRvIHJlLWxvYWQgdGhlIHB1enpsZSwgcGFzdGUgdGhlIHN0cmluZyBpbnRvIHRoZSBwYXN0ZSBwdXp6bGUgdG9vbC5cIiwgZW5jb2RlKCkpO1xuXG59XG5cbmZ1bmN0aW9uIHNhdmVMb2FkUHV6emxlKCkge1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNpZGVfYmFyXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xuXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29weV9wdXp6bGVcIikudmFsdWUgPSBjZWxscy50b1N0cmluZygpLnJlcGxhY2UoL1teMC05XS9nLCBcIlwiKTtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleHBvcnRfc2F2ZVwiKS52YWx1ZSA9IGVuY29kZSgpO1xufVxuXG5mdW5jdGlvbiBoaWdobGlnaHQodmFsdWUpIHtcblx0aWYgKHZhbHVlID09PSAwKSB7XG4gICAgXHRcdGhpZ2hsaWdodFN0YXR1cyA9IGZhbHNlO1xuICAgIFx0XHRoaWdobGlnaHRWYWx1ZSA9IDA7XG4gICAgXHRcdCQoJy5oaWdobGlnaHRfYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ251bWJlcl9oaWdobGlnaHRlZCcpO1xuICAgIFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcbiAgICBcdFx0XHRjZWxsc1tpXS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjZWxsX2hpZ2hsaWdodGVkXCIpO1xuICAgIFx0XHRcdGNlbGxzW2ldLmNhbmRpZGF0ZXNFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjYW5kaWRhdGVzX2hpZ2hsaWdodGVkXCIpO1xuICAgIFx0XHR9XG4gICAgfSBlbHNlIHtcbiAgICBcdFx0aGlnaGxpZ2h0KDApO1xuICAgIFx0XHRoaWdobGlnaHRTdGF0dXMgPSB0cnVlO1xuICAgIFx0XHRoaWdobGlnaHRWYWx1ZSA9IHZhbHVlO1xuICAgIFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcbiAgICBcdFx0XHR2YXIgY3VycmVudENlbGwgPSBjZWxsc1tpXTtcbiAgICBcdFx0XHRpZiAoY3VycmVudENlbGwudmFsdWUgIT09IDAgfHwgIWN1cnJlbnRDZWxsLnBlbmNpbG1hcmtzW3ZhbHVlIC0gMV0pIHtcbiAgICBcdFx0XHRcdGlmIChjdXJyZW50Q2VsbC52YWx1ZSA9PSB2YWx1ZSl7XG4gICAgXHRcdFx0XHRcdGN1cnJlbnRDZWxsLmNhbmRpZGF0ZXNFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjYW5kaWRhdGVzX2hpZ2hsaWdodGVkXCIpO1xuICAgIFx0XHRcdFx0XHRjdXJyZW50Q2VsbC5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjZWxsX2hpZ2hsaWdodGVkXCIpO1xuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH0gZWxzZSB7XG4gICAgXHRcdFx0XHRjdXJyZW50Q2VsbC5jYW5kaWRhdGVzRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FuZGlkYXRlc19oaWdobGlnaHRlZFwiKTtcbiAgICBcdFx0XHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNlbGxfaGlnaGxpZ2h0ZWRcIik7XG4gICAgXHRcdFx0fVxuXG4gICAgXHQgICAgfVxuXG4gICAgXHQgICAgZm9yICh2YXIgaSA9IDE7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgJCgnLmhpZ2hsaWdodF9idXR0b24nKS5yZW1vdmVDbGFzcygnbnVtYmVyX2hpZ2hsaWdodGVkJyk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLm51bWJlcl9oaWdobGlnaHQnICsgdmFsdWUpLmFkZENsYXNzKCdudW1iZXJfaGlnaGxpZ2h0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXHR9XG59XG5cbmZ1bmN0aW9uIHN1Ym1pdEdpdmVucygpIHtcblx0dmFyIGN1cnJlbnRDZWxsO1xuXHR2YXIgdmFsdWVzID0gXCJcIjtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcblx0XHRjdXJyZW50Q2VsbCA9IGNlbGxzW2ldO1xuXG5cdFx0dmFsdWVzICs9IGN1cnJlbnRDZWxsLnZhbHVlO1xuXG5cdH1cblxuXHRpZiAoKHZhbHVlcy5tYXRjaChuZXcgUmVnRXhwKFwiMFwiLCBcImdcIikpIHx8IFtdKS5sZW5ndGggPT0gODEpe1xuXHRcdC8vIHJldHVybiggYWxlcnQgKCdwbGVhc2Ugc2VsZWN0IGEgbGV2ZWwnKSk7XG5cdH1cblx0dmFyIHB1enpsZSA9IG5ldyBQdXp6bGUodmFsdWVzKTtcblxuXHRpZiAoIXB1enpsZS5oYXNTb2x1dGlvbigpKSB7XG5cdFx0YWxlcnQoXCJUaGVyZSBpcyBubyBzb2x1dGlvbiBmb3IgdGhlIGlucHV0dGVkIHZhbHVlcy5cIik7XG5cdH0gZWxzZSB7XG5cblx0XHQvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvcF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmVnaW5fc29sdmluZ1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0Ly8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250cm9sc1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JpZF90YWJsZVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXHRcdC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JpZF90YWJsZVwiKS5zdHlsZS5wb3NpdGlvbiA9IFwic3RhdGljXCI7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JpZF90YWJsZVwiKS5zdHlsZS5tYXJnaW5Ub3AgPSBcIjI1cHhcIjtcblx0XHQvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNpZGVfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuXHRcdC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1wb3J0X3NhdmVfYnV0dG9uXCIpLnRpdGxlID0gXCJUaGlzIG9wdGlvbiBpcyBkaXNhYmxlZCB3aGVuIGEgc3Vkb2t1IHB1enpsZSBpcyBpbiBwcm9ncmVzcy5cIjtcblx0XHQvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltcG9ydF9zYXZlX2J1dHRvblwiKS5kaXNhYmxlZCA9IHRydWU7XG5cdFx0Ly8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXN0ZV9wdXp6bGVfYnV0dG9uX2Vhc3lcIikudGl0bGUgPSBcIlRoaXMgb3B0aW9uIGlzIGRpc2FibGVkIHdoZW4gYSBzdWRva3UgcHV6emxlIGlzIGluIHByb2dyZXNzLlwiO1xuXHRcdC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzdGVfcHV6emxlX2J1dHRvbl9tZWRpdW1cIikudGl0bGUgPSBcIlRoaXMgb3B0aW9uIGlzIGRpc2FibGVkIHdoZW4gYSBzdWRva3UgcHV6emxlIGlzIGluIHByb2dyZXNzLlwiO1xuXHRcdC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzdGVfcHV6emxlX2J1dHRvbl9oYXJkXCIpLnRpdGxlID0gXCJUaGlzIG9wdGlvbiBpcyBkaXNhYmxlZCB3aGVuIGEgc3Vkb2t1IHB1enpsZSBpcyBpbiBwcm9ncmVzcy5cIjtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3RlX3B1enpsZV9idXR0b25fZWFzeVwiKS5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzdGVfcHV6emxlX2J1dHRvbl9tZWRpdW1cIikuZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3RlX3B1enpsZV9idXR0b25faGFyZFwiKS5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzdGVfcHV6emxlX2J1dHRvbl9kaWFib2xpY2FsXCIpLmRpc2FibGVkID0gZmFsc2U7XG5cdFx0Ly8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkX2Nvb2tpZVwiKS50aXRsZSA9IFwiVGhpcyBvcHRpb24gaXMgZGlzYWJsZWQgd2hlbiBhIHN1ZG9rdSBwdXp6bGUgaXMgaW4gcHJvZ3Jlc3MuXCI7XG5cdFx0Ly8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkX2Nvb2tpZVwiKS5kaXNhYmxlZCA9IHRydWU7XG5cblx0XHRjZWxscy5zb2x1dGlvbiA9IHB1enpsZS50b1N0cmluZygpO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xuXHRcdFx0Y3VycmVudENlbGwgPSBjZWxsc1tpXTtcblxuXHRcdFx0aWYgKGN1cnJlbnRDZWxsLnZhbHVlICE9PSAwKSB7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuaW5uZXJIVE1MID0gY3VycmVudENlbGwudmFsdWU7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmlzR2l2ZW4gPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudENlbGwuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYmxhbmtfY2VsbF9oaWdobGlnaHRfYmxhY2tcIik7XG5cdFx0XHR9XG5cblx0XHRcdGN1cnJlbnRDZWxsLnNvbHV0aW9uID0gcGFyc2VJbnQoY2VsbHMuc29sdXRpb25baV0pO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBzaG93U29sdXRpb24oKSB7XG5cdHZhciBjdXJyZW50RWxlbWVudDtcblx0dmFyIHJvdztcblx0dmFyIHNvbHV0aW9uID0gXCJcIjtcblxuXHRpZiAoY2VsbHMuc29sdXRpb24gPT09IHVuZGVmaW5lZCB8fCAhd2luZG93LmNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2hvdyB0aGUgc29sdXRpb24/XCIpKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IDk7IGkrKykge1xuXHRcdHJvdyA9IGkgKiA5O1xuXHRcdHNvbHV0aW9uICs9IGNlbGxzLnNvbHV0aW9uLmNoYXJBdChyb3cpICsgXCIgXCIgKyBjZWxscy5zb2x1dGlvbi5jaGFyQXQocm93ICsgMSkgKyBcIiBcIiArIGNlbGxzLnNvbHV0aW9uLmNoYXJBdChyb3cgKyAyKSArIFwiIHwgXCI7XG5cdFx0c29sdXRpb24gKz0gY2VsbHMuc29sdXRpb24uY2hhckF0KHJvdyArIDMpICsgXCIgXCIgKyBjZWxscy5zb2x1dGlvbi5jaGFyQXQocm93ICsgNCkgKyBcIiBcIiArIGNlbGxzLnNvbHV0aW9uLmNoYXJBdChyb3cgKyA1KSArIFwiIHwgXCI7XG5cdFx0c29sdXRpb24gKz0gY2VsbHMuc29sdXRpb24uY2hhckF0KHJvdyArIDYpICsgXCIgXCIgKyBjZWxscy5zb2x1dGlvbi5jaGFyQXQocm93ICsgNykgKyBcIiBcIiArIGNlbGxzLnNvbHV0aW9uLmNoYXJBdChyb3cgKyA4KSArIFwiPGJyIC8+XCI7XG5cblx0XHRpZiAoaSA9PSAyIHx8IGkgPT0gNSkge1xuXHRcdFx0c29sdXRpb24gKz0gXCItLS0tLS0rLS0tLS0tLSstLS0tLS08YnIgLz5cIjtcblx0XHR9XG5cdH1cblxuXHRpZiAod2luZG93LnNvbHV0aW9uV2luZG93KSB7XG5cdFx0d2luZG93LnNvbHV0aW9uV2luZG93LmNsb3NlKCk7XG5cdH1cblxuXHR3aW5kb3cuc29sdXRpb25XaW5kb3cgPSB3aW5kb3cub3BlbihcIlwiLCBcIlwiLCBcImhlaWdodD0yMzAsd2lkdGg9MjA4LHN0YXR1cz0wLG1lbnViYXI9MFwiKTtcblxuICAgIGN1cnJlbnRFbGVtZW50ID0gd2luZG93LnNvbHV0aW9uV2luZG93LmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRpdGxlXCIpKTtcblx0Y3VycmVudEVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlNvbHV0aW9uXCI7XG5cblxuICAgIGN1cnJlbnRFbGVtZW50ID0gd2luZG93LnNvbHV0aW9uV2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG5cbiAgICBjdXJyZW50RWxlbWVudC5pbm5lckhUTUwgPSBzb2x1dGlvbjtcblx0Y3VycmVudEVsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9IFwiQ29uc29sYXMsIENvdXJpZXIgTmV3LCBtb25vc3BhY2VcIjtcblx0Y3VycmVudEVsZW1lbnQuc3R5bGUuZm9udENvbG9yID0gXCIjNjY2XCI7XG5cdGN1cnJlbnRFbGVtZW50LnN0eWxlLmZvbnRTaXplID0gXCIxNXB4XCI7XG5cbiAgICB3aW5kb3cub251bmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0d2luZG93LnNvbHV0aW9uV2luZG93LmNsb3NlKCk7XG5cdH07XG5cblxuICAgIC8vIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3dfc29sdXRpb25cIikuY2hlY2tlZCkge1xuXHRcdC8vIGlmICghd2luZG93LmNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2hvdyB0aGUgc29sdXRpb24/XCIpKSB7XG5cdFx0XHQvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3dfc29sdXRpb25cIikuY2hlY2tlZCA9IGZhbHNlO1xuXHRcdFx0Ly8gcmV0dXJuO1xuXHRcdC8vIH1cblxuXHRcdC8vIGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xuXHRcdFx0Ly8gY3VycmVudENlbGwgPSBjZWxsc1tpXTtcblxuXHRcdFx0Ly8gaWYgKGN1cnJlbnRDZWxsLmVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQvLyBjdXJyZW50Q2VsbC5lbGVtZW50LmZpcnN0Q2hpbGQudmFsdWUgPSBjdXJyZW50Q2VsbC5zb2x1dGlvbjtcblx0XHRcdFx0Ly8gY3VycmVudENlbGwuZWxlbWVudC5maXJzdENoaWxkLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdC8vIH1cblxuXG5cdFx0Ly8gfVxuXHQvLyB9IGVsc2Uge1xuXHRcdC8vIGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xuXHRcdFx0Ly8gY3VycmVudENlbGwgPSBjZWxsc1tpXTtcblxuXHRcdFx0Ly8gaWYgKGN1cnJlbnRDZWxsLmVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQvLyBjdXJyZW50Q2VsbC5lbGVtZW50LmZpcnN0Q2hpbGQuZGlzYWJsZWQgPSBmYWxzZTtcblxuXHRcdFx0XHQvLyBjdXJyZW50Q2VsbC5lbGVtZW50LmZpcnN0Q2hpbGQudmFsdWUgPSBjdXJyZW50Q2VsbC52YWx1ZSA9PT0gMCA/IFwiXCIgOiBjdXJyZW50Q2VsbC52YWx1ZTtcblx0XHRcdC8vIH1cblx0XHQvLyB9XG5cdC8vIH1cbn1cblxuZnVuY3Rpb24gZ2V0SGludCgpIHtcblx0aWYgKGNlbGxzLmxhc3RTZWxlY3RlZENlbGwgPT09IG51bGwpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHR2YXIgY3VycmVudENlbGwgPSBjZWxsc1tjZWxscy5sYXN0U2VsZWN0ZWRDZWxsXTtcblxuXHRpZiAoY2VsbHMuaGludHMgPiAwICYmIGN1cnJlbnRDZWxsLmVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuXHRcdGN1cnJlbnRDZWxsLnZhbHVlID0gY3VycmVudENlbGwuc29sdXRpb247XG5cdFx0Y3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuaW5uZXJIVE1MID0gY3VycmVudENlbGwudmFsdWUgKyBcIlwiO1xuXHRcdGN1cnJlbnRDZWxsLnNldFZhbHVlKGN1cnJlbnRDZWxsLnZhbHVlKTtcblx0XHRjdXJyZW50Q2VsbC5lbGVtZW50LmlubmVySFRNTCA9IGN1cnJlbnRDZWxsLnZhbHVlO1xuXHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNlbGxfaGludFwiKTtcblx0XHRzaG93RHVwbGljYXRlcygpO1xuXG5cdFx0Y2VsbHMuaGludHMtLTtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdldF9oaW50XCIpLnZhbHVlID0gXCJIaW50IChcIiArIGNlbGxzLmhpbnRzICsgXCIpXCI7XG5cblx0XHRpZiAoY2VsbHMuaGludHMgPT09IDIpIHtcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2V0X2hpbnRcIikudGl0bGUgPSBcIkdpdmUgYSBoaW50IGZvciB0aGUgc2VsZWN0ZWQgY2VsbC4gVGhlcmUgYXJlIHR3byBoaW50cyByZW1haW5pbmcuXCI7XG5cdFx0fSBlbHNlIGlmIChjZWxscy5oaW50cyA9PT0gMSkge1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZXRfaGludFwiKS50aXRsZSA9IFwiR2l2ZSBhIGhpbnQgZm9yIHRoZSBzZWxlY3RlZCBjZWxsLiBUaGVyZSBpcyBvbmUgaGludCByZW1haW5pbmcuXCI7XG5cblx0XHR9IGVsc2UgaWYgKGNlbGxzLmhpbnRzIDw9IDApIHtcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2V0X2hpbnRcIikuZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZXRfaGludFwiKS50aXRsZSA9IFwiVGhlcmUgYXJlIG5vIG1vcmUgaGludHMgcmVtYWluaW5nLlwiO1xuXHRcdH1cblxuXHR9XG59XG5cbmZ1bmN0aW9uIHNldEJsYW5rQ2VsbHMoY29sb3IpIHtcblx0dmFyIGN1cnJlbnRDZWxsO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xuXHRcdGN1cnJlbnRDZWxsID0gY2VsbHNbaV07XG5cblx0XHRpZiAoY3VycmVudENlbGwudmFsdWUgPT09IDApIHtcblx0XHRcdGN1cnJlbnRDZWxsLnNldENvbG9yKGNvbG9yKTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyBIaWdobGlnaHQgc2VsZWN0ZWQgbGluay5cblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXJrX2JsYW5rX2NlbGxzX1wiICsgY2VsbHMuYmxhbmtDZWxsQ29sb3IpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiXCI7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFya19ibGFua19jZWxsc19cIiArIGNvbG9yKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNGRjhcIjtcblxuICAgIGNlbGxzLmJsYW5rQ2VsbENvbG9yID0gY29sb3I7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUNvbG9yZWRDZWxscyhjb2xvcikge1xuXHR2YXIgY29sb3JWYWx1ZUxpc3QgPSBbXCJibGFja1wiLCBcImJsdWVcIiwgXCJyZWRcIiwgXCJncmVlblwiLCBcInB1cnBsZVwiXTtcblxuICAgIGlmICghY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgYWxsIGNlbGxzIG1hcmtlZCBcIiArIGNvbG9yVmFsdWVMaXN0W2NvbG9yXSArIFwiP1wiKSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHZhciBjdXJyZW50Q2VsbDtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcblx0XHRjdXJyZW50Q2VsbCA9IGNlbGxzW2ldO1xuXG5cdFx0aWYgKGN1cnJlbnRDZWxsLnZhbHVlICE9PSAwICYmIGN1cnJlbnRDZWxsLmdldENvbG9yKCkgPT09IGNvbG9yKSB7XG5cdFx0XHRjdXJyZW50Q2VsbC5lbGVtZW50LmZpcnN0Q2hpbGQudmFsdWUgPSBcIlwiO1xuXHRcdFx0Y3VycmVudENlbGwuc2V0VmFsdWUoMCk7XG5cdFx0XHRjdXJyZW50Q2VsbC5jYW5kaWRhdGVzRWxlbWVudC5pbm5lckhUTUwgPSBjdXJyZW50Q2VsbC5nZXRQZW5jaWxtYXJrU3RyaW5nKCk7XG5cblx0XHRcdGN1cnJlbnRDZWxsLnNldENvbG9yKGNlbGxzLmJsYW5rQ2VsbENvbG9yKTtcblx0XHR9XG5cdH1cblxuXHRzaG93RHVwbGljYXRlcygpO1xufVxuXG4vLyB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdGZ1bmN0aW9uIGxvYWRTdWRva3UoKSB7XG5cdC8vIHdpbmRvdy5sb2NhdGlvbiA9IFwiaHR0cDovL3d3dy5pbnRyZXBpZGNvZGVyLmNvbS9wcm9qZWN0cy9zdWRva3UvXCI7XG5cbiAgICAgICAgdmFyIENlbGwgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblx0XHR0aGlzLmluZGV4ID0gaW5kZXg7XG5cdFx0dGhpcy52YWx1ZSA9IDA7XG5cdFx0dGhpcy5lbGVtZW50ID0gdW5kZWZpbmVkO1xuXHRcdHRoaXMuY2FuZGlkYXRlc0VsZW1lbnQgPSB1bmRlZmluZWQ7XG5cblx0XHR0aGlzLm5laWdoYm9ycyA9IFtdO1xuXHRcdHRoaXMucm93TmVpZ2hib3JzID0gW107XG5cdFx0dGhpcy5jb2x1bW5OZWlnaGJvcnMgPSBbXTtcblx0XHR0aGlzLmJsb2NrTmVpZ2hib3JzID0gW107XG5cdFx0dGhpcy5jYW5kaWRhdGVzID0gW107XG5cdFx0dGhpcy5wZW5jaWxtYXJrcyA9IFt0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlXTtcblx0XHR0aGlzLmlzR2l2ZW4gPSBmYWxzZTtcblx0XHR2YXIgY29sb3IgPSAwO1xuXG5cdFx0dmFyIGJsb2NrcyA9IFtcblx0XHQwLCAwLCAwLCAxLCAxLCAxLCAyLCAyLCAyLFxuXHRcdDAsIDAsIDAsIDEsIDEsIDEsIDIsIDIsIDIsXG5cdFx0MCwgMCwgMCwgMSwgMSwgMSwgMiwgMiwgMixcblx0XHQzLCAzLCAzLCA0LCA0LCA0LCA1LCA1LCA1LFxuXHRcdDMsIDMsIDMsIDQsIDQsIDQsIDUsIDUsIDUsXG5cdFx0MywgMywgMywgNCwgNCwgNCwgNSwgNSwgNSxcblx0XHQ2LCA2LCA2LCA3LCA3LCA3LCA4LCA4LCA4LFxuXHRcdDYsIDYsIDYsIDcsIDcsIDcsIDgsIDgsIDgsXG5cdFx0NiwgNiwgNiwgNywgNywgNywgOCwgOCwgOFxuXHRcdF07XG5cblx0XHR2YXIgYmxvY2tJbmRlY2VzID0gWzAsIDEsIDIsIDksIDEwLCAxMSwgMTgsIDE5LCAyMCwgMywgNCwgNSwgMTIsIDEzLCAxNCwgMjEsIDIyLCAyMywgNiwgNywgOCwgMTUsIDE2LCAxNywgMjQsIDI1LCAyNiwgMjcsIDI4LCAyOSwgMzYsIDM3LCAzOCwgNDUsIDQ2LCA0NywgMzAsIDMxLCAzMiwgMzksIDQwLCA0MSwgNDgsIDQ5LCA1MCwgMzMsIDM0LCAzNSwgNDIsIDQzLCA0NCwgNTEsIDUyLCA1MywgNTQsIDU1LCA1NiwgNjMsIDY0LCA2NSwgNzIsIDczLCA3NCwgNTcsIDU4LCA1OSwgNjYsIDY3LCA2OCwgNzUsIDc2LCA3NywgNjAsIDYxLCA2MiwgNjksIDcwLCA3MSwgNzgsIDc5LCA4MF07XG5cblx0XHR2YXIgY3VycmVudENlbGw7XG5cdFx0dmFyIHJvdyA9IE1hdGguZmxvb3IoaW5kZXggLyA5KTtcblx0XHR2YXIgY29sdW1uID0gaW5kZXggJSA5O1xuXHRcdHZhciBibG9jayA9IGJsb2Nrc1tpbmRleF07XG5cblxuXHRcdC8vIFNldCBuZWlnaGJvcnMuXG5cblx0XHQvLyByb3dcblx0XHRmb3IgKHZhciBpID0gcm93ICogOTsgKGkgPCAocm93ICsgMSkgKiA5KSAmJiBpIDwgaW5kZXg7IGkrKykge1xuXHRcdFx0Y3VycmVudENlbGwgPSBjZWxsc1tpXTtcblxuXHRcdFx0dGhpcy5uZWlnaGJvcnMucHVzaChjdXJyZW50Q2VsbCk7XG5cdFx0XHRjdXJyZW50Q2VsbC5uZWlnaGJvcnMucHVzaCh0aGlzKTtcblxuXHRcdFx0dGhpcy5yb3dOZWlnaGJvcnMucHVzaChjdXJyZW50Q2VsbCk7XG5cdFx0XHRjdXJyZW50Q2VsbC5yb3dOZWlnaGJvcnMucHVzaCh0aGlzKTtcblx0XHR9XG5cblx0XHQvLyBjb2x1bW5cblx0XHRmb3IgKHZhciBpID0gY29sdW1uOyBpIDwgODEgJiYgaSA8IGluZGV4OyBpICs9IDkpIHtcblx0XHRcdGN1cnJlbnRDZWxsID0gY2VsbHNbaV07XG5cblx0XHRcdGlmICghIHRoaXMubmVpZ2hib3JzLmNvbnRhaW5zKGN1cnJlbnRDZWxsKSkge1xuXHRcdFx0XHR0aGlzLm5laWdoYm9ycy5wdXNoKGN1cnJlbnRDZWxsKTtcblx0XHRcdFx0Y3VycmVudENlbGwubmVpZ2hib3JzLnB1c2godGhpcyk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuY29sdW1uTmVpZ2hib3JzLnB1c2goY3VycmVudENlbGwpO1xuXHRcdFx0Y3VycmVudENlbGwuY29sdW1uTmVpZ2hib3JzLnB1c2godGhpcyk7XG5cdFx0fVxuXG5cdFx0Ly8gYmxvY2tcblx0XHRmb3IgKHZhciBpID0gYmxvY2sgKiA5OyBpIDwgKGJsb2NrICsgMSkgKiA5OyBpKyspIHtcblx0XHRcdGlmIChibG9ja0luZGVjZXNbaV0gPCBpbmRleCkge1xuXG5cdFx0XHRcdGN1cnJlbnRDZWxsID0gY2VsbHNbYmxvY2tJbmRlY2VzW2ldXTtcblxuXHRcdFx0XHRpZiAoISB0aGlzLm5laWdoYm9ycy5jb250YWlucyhjdXJyZW50Q2VsbCkpIHtcblx0XHRcdFx0XHR0aGlzLm5laWdoYm9ycy5wdXNoKGN1cnJlbnRDZWxsKTtcblx0XHRcdFx0XHRjdXJyZW50Q2VsbC5uZWlnaGJvcnMucHVzaCh0aGlzKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuYmxvY2tOZWlnaGJvcnMucHVzaChjdXJyZW50Q2VsbCk7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmJsb2NrTmVpZ2hib3JzLnB1c2godGhpcyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR0aGlzLnZhbHVlID0gdmFsdWU7XG5cblx0XHRcdGlmICh2YWx1ZSA9PT0gMCkge1xuXHRcdFx0XHR0aGlzLmNhbmRpZGF0ZXMgPSBbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOV07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmNhbmRpZGF0ZXMgPSBbdmFsdWVdO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHR0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy52YWx1ZSArIFwiXCI7XG5cdFx0fTtcblxuICAgICAgICAgICAgdGhpcy5nZXRQZW5jaWxtYXJrU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHJlc3VsdCA9IFwiXCI7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDk7IGkrKykge1xuXHRcdFx0XHRpZiAodGhpcy5wZW5jaWxtYXJrc1tpXSkge1xuXHRcdFx0XHRcdHJlc3VsdCArPSBpICsgMTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0XHR9O1xuXG4gICAgICAgICAgICB0aGlzLmdldENvbG9yID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNvbG9yO1xuXHRcdH07XG5cbiAgICAgICAgICAgIHRoaXMuc2V0Q29sb3IgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdHZhciBjb2xvclZhbHVlTGlzdCA9IFtcImJsYWNrXCIsIFwiYmx1ZVwiLCBcInJlZFwiLCBcImdyZWVuXCIsIFwicHVycGxlXCJdO1xuXG4gICAgICAgICAgICAgICAgY29sb3IgPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYmxhbmtfY2VsbF9oaWdobGlnaHRfYmxhY2tcIik7XG5cdFx0XHR0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImJsYW5rX2NlbGxfaGlnaGxpZ2h0X3JlZFwiKTtcblx0XHRcdHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYmxhbmtfY2VsbF9oaWdobGlnaHRfYmx1ZVwiKTtcblx0XHRcdHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYmxhbmtfY2VsbF9oaWdobGlnaHRfZ3JlZW5cIik7XG5cdFx0XHR0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImJsYW5rX2NlbGxfaGlnaGxpZ2h0X3B1cnBsZVwiKTtcblxuXHRcdFx0dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJibGFua19jZWxsX2hpZ2hsaWdodF9cIiArIGNvbG9yVmFsdWVMaXN0W2NvbG9yXSk7XG5cdFx0fTtcblxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSgwKTtcblxuXG4gICAgICAgIH07XG5cblx0dmFyIHRhYkluZGV4ID0gMTtcblxuXHR2YXIgZ3JpZF90YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JpZF90YWJsZVwiKTtcblxuXHQvLyBpZiAoISQoXCIjZ3JpZF90YWJsZVwiKS5oYXNDbGFzcyhcImhhc1NvbHV0aW9uXCIpKXtcblx0Ly8gXHQkKFwiI2dyaWRfdGFibGVcIikuaGlkZSgpO1xuXHQvLyB9XG5cdHZhciBjdXJyZW50Um93LCBjdXJyZW50Q2VsbCwgY3VycmVudElucHV0O1xuXHR2YXIgY3VycmVudENhbmRpZGF0ZVJvdztcblxuXHRmb3IgKHZhciByb3cgPSAwOyByb3cgPCA5OyByb3crKykge1xuXHRcdGN1cnJlbnRSb3cgPSBncmlkX3RhYmxlLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKSk7IC8vIEFwcGVuZCByb3cgdG8gPHRib2R5PlxuXHRcdC8vIGN1cnJlbnRDYW5kaWRhdGVSb3cgPSBncmlkX3RhYmxlLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKSk7IC8vIEFwcGVuZCByb3cgdG8gPHRib2R5PlxuXG5cdFx0Zm9yICh2YXIgY29sID0gMDsgY29sIDwgOTsgY29sKyspIHtcblx0XHRcdGN1cnJlbnRDZWxsID0gbmV3IENlbGwocm93ICogOSArIGNvbCk7XG5cdFx0XHRjZWxsc1tyb3cgKiA5ICsgY29sXSA9IGN1cnJlbnRDZWxsO1xuXG5cdFx0XHRjdXJyZW50Q2VsbC5lbGVtZW50ID0gY3VycmVudFJvdy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIikpO1xuXHRcdFx0Y3VycmVudENlbGwuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY2VsbFwiKTtcblx0XHRcdGN1cnJlbnRDZWxsLmNhbmRpZGF0ZXNFbGVtZW50ID0gY3VycmVudENlbGwuZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcblx0XHRcdGN1cnJlbnRDZWxsLmNhbmRpZGF0ZXNFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjYW5kaWRhdGVzXCIpO1xuXHRcdFx0Y3VycmVudENlbGwuY2FuZGlkYXRlc0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNtYWxsX3N1ZG9rdVwiKTtcblxuXHRcdFx0Y3VycmVudElucHV0ID0gY3VycmVudENlbGwuZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIikpO1xuXG4gICAgICAgICAgICBpZiAoL2FuZHJvaWR8d2Vib3N8aXBob25lfGlwYWR8aXBvZHxibGFja2JlcnJ5L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpKSB7XG5cdFx0XHRcdGN1cnJlbnRJbnB1dC50eXBlID0gXCJ0ZWxcIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGN1cnJlbnRJbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG5cdFx0XHR9XG5cbiAgICAgICAgICAgIGN1cnJlbnRJbnB1dC50YWJJbmRleCA9IHRhYkluZGV4O1xuXHRcdFx0dGFiSW5kZXgrKztcblxuXHRcdFx0Y3VycmVudElucHV0LmluZGV4ID0gY3VycmVudENlbGwuaW5kZXg7XG5cdFx0XHRjdXJyZW50SW5wdXQuaWQgPSBcImNlbGxcIiArIGN1cnJlbnRDZWxsLmluZGV4ICsgXCJfaW5wdXRcIjtcblx0XHRcdGN1cnJlbnRJbnB1dC5vbmtleWRvd24gPSBpbnB1dE9uS2V5RG93bjtcblx0XHRcdGN1cnJlbnRJbnB1dC5vbmZvY3VzID0gaW5wdXRPbkZvY3VzO1xuXG5cdFx0XHRpZiAocm93ID09PSAwIHx8IHJvdyA9PT0gMyB8fCByb3cgPT09IDYpIHtcblx0XHRcdFx0Y3VycmVudENlbGwuZWxlbWVudC5zdHlsZS5ib3JkZXJUb3BTdHlsZSA9IFwic29saWRcIjtcblx0XHRcdFx0Y3VycmVudENlbGwuZWxlbWVudC5zdHlsZS5ib3JkZXJUb3BXaWR0aCA9IFwiMnB4XCI7XG4gICAgICAgICAgICAgICAgY3VycmVudENlbGwuZWxlbWVudC5zdHlsZS5ib3JkZXJUb3BDb2xvciA9IFwiIzdjODYyZlwiO1xuXHRcdFx0fSBlbHNlIGlmIChyb3cgPT09IDgpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbC5lbGVtZW50LnN0eWxlLmJvcmRlckJvdHRvbVN0eWxlID0gXCJzb2xpZFwiO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsLmVsZW1lbnQuc3R5bGUuYm9yZGVyQm90dG9tV2lkdGggPSBcIjJweFwiO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsLmVsZW1lbnQuc3R5bGUuYm9yZGVyQm90dG9tQ29sb3IgPSBcIiM3Yzg2MmZcIjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGNvbCA9PT0gMCB8fCBjb2wgPT09IDMgfHwgY29sID09PSA2KSB7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuc3R5bGUuYm9yZGVyTGVmdFN0eWxlID0gXCJzb2xpZFwiO1xuXHRcdFx0XHRjdXJyZW50Q2VsbC5lbGVtZW50LnN0eWxlLmJvcmRlckxlZnRXaWR0aCA9IFwiMnB4XCI7XG4gICAgICAgICAgICAgICAgY3VycmVudENlbGwuZWxlbWVudC5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSBcIiM3Yzg2MmZcIjtcblx0XHRcdH0gZWxzZSBpZiAoY29sID09PSA4KSB7XG5cdFx0XHRcdGN1cnJlbnRDZWxsLmVsZW1lbnQuc3R5bGUuYm9yZGVyUmlnaHRTdHlsZSA9IFwic29saWRcIjtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbC5lbGVtZW50LnN0eWxlLmJvcmRlclJpZ2h0Q29sb3IgPSBcIiM3Yzg2MmZcIjtcblx0XHRcdFx0Y3VycmVudENlbGwuZWxlbWVudC5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gXCIycHhcIjtcblx0XHRcdH1cblxuXHRcdH1cblx0fVxuXG5cdGNlbGxzLmxhc3RTZWxlY3RlZENlbGwgPSBudWxsO1xuXHRjZWxscy5oaW50cyA9IDM7XG5cdGNlbGxzLmJsYW5rQ2VsbENvbG9yID0gMDtcblxuICAgICAgICB1cGRhdGVQZW5jaWxtYXJrcygpO1xuXHRpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVsxXSA9PSAnbWVkaXVtJyl7XG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXN0ZV9wdXp6bGVfYnV0dG9uX21lZGl1bVwiKS5jbGljaygpO1xuXHRcdHN1Ym1pdEdpdmVucygpXG5cdFx0c3RhcnRDbG9jaygpO1xuXHRcdGJ1dHRvblBsYXlQcmVzcygpXG5cblx0fWVsc2UgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMV0gPT0gJ2Vhc3knKXtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3RlX3B1enpsZV9idXR0b25fZWFzeVwiKS5jbGljaygpO1xuXHRcdHN1Ym1pdEdpdmVucygpXG5cdFx0c3RhcnRDbG9jaygpO1xuXHRcdGJ1dHRvblBsYXlQcmVzcygpXG5cblx0fWVsc2UgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMV0gPT0gJ2hhcmQnKXtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3RlX3B1enpsZV9idXR0b25faGFyZFwiKS5jbGljaygpO1xuXHRcdHN1Ym1pdEdpdmVucygpXG5cdFx0c3RhcnRDbG9jaygpO1xuXHRcdGJ1dHRvblBsYXlQcmVzcygpXG5cbiAgICB9ZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVsxXSA9PSAnZGlhYm9saWNhbCcpe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3RlX3B1enpsZV9idXR0b25fZGlhYm9saWNhbFwiKS5jbGljaygpO1xuICAgICAgICBzdWJtaXRHaXZlbnMoKVxuICAgICAgICBzdGFydENsb2NrKCk7XG4gICAgICAgIGJ1dHRvblBsYXlQcmVzcygpXG5cbiAgICB9ZWxzZSB7XG4gICAgICAgIGdldFN1ZG9rdURhdGFGcm9tQWpheCgpO1xuICAgICAgICBpZiAodHlwZW9mIHN1ZG9rdV9qc29uICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB0b2RheSA9IHRvZGF5RGF0ZSgpO1xuICAgICAgICAgICAgc3Vkb2t1X2pzb25bdG9kYXldLmZvckVhY2goZnVuY3Rpb24gKGVsZSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBzdWRva3VfbGV2ZWwucHVzaChPYmplY3Qua2V5cyhlbGUpWzBdKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzdWRva3VfbGV2ZWxbMF0gPT0gJ21lZGl1bScpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3RlX3B1enpsZV9idXR0b25fbWVkaXVtXCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgc3VibWl0R2l2ZW5zKClcbiAgICAgICAgICAgICAgICBzdGFydENsb2NrKCk7XG4gICAgICAgICAgICAgICAgYnV0dG9uUGxheVByZXNzKClcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdWRva3VfbGV2ZWxbMF0gPT0gJ2Vhc3knKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXN0ZV9wdXp6bGVfYnV0dG9uX2Vhc3lcIikuY2xpY2soKTtcbiAgICAgICAgICAgICAgICBzdWJtaXRHaXZlbnMoKVxuICAgICAgICAgICAgICAgIHN0YXJ0Q2xvY2soKTtcbiAgICAgICAgICAgICAgICBidXR0b25QbGF5UHJlc3MoKVxuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1ZG9rdV9sZXZlbFswXSA9PSAnaGFyZCcpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3RlX3B1enpsZV9idXR0b25faGFyZFwiKS5jbGljaygpO1xuICAgICAgICAgICAgICAgIHN1Ym1pdEdpdmVucygpXG4gICAgICAgICAgICAgICAgc3RhcnRDbG9jaygpO1xuICAgICAgICAgICAgICAgIGJ1dHRvblBsYXlQcmVzcygpXG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3Vkb2t1X2xldmVsWzBdID09ICdkaWFib2xpY2FsJykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFzdGVfcHV6emxlX2J1dHRvbl9kaWFib2xpY2FsXCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgc3VibWl0R2l2ZW5zKClcbiAgICAgICAgICAgICAgICBzdGFydENsb2NrKCk7XG4gICAgICAgICAgICAgICAgYnV0dG9uUGxheVByZXNzKClcblxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXN0ZV9wdXp6bGVfYnV0dG9uX2Vhc3lcIikuY2xpY2soKTtcbiAgICAgICAgICAgIHN1Ym1pdEdpdmVucygpXG4gICAgICAgICAgICBzdGFydENsb2NrKCk7XG4gICAgICAgICAgICBidXR0b25QbGF5UHJlc3MoKVxuICAgICAgICB9XG5cdH1cblxuXG4gICAgICAgIHRvZGF5RGF0ZSgpXG5cbiAgIC8vICBcdHNtYWxsX3N1ZG9rdSA9ICQuZWFjaChkYXRhLCBmdW5jdGlvbihpKSB7XG4gICAvLyAgICBcdGlmKCEoaSVudW1Db2xzKSkgdFJvdyA9ICQoJzx0cj4nKTtcblxuICAgLy8gICAgXHR0Q2VsbCA9ICQoJzx0ZD4nKS5odG1sKGRhdGFbaV0pO1xuXG4gICAvLyAgICBcdCQoJyNzbWFsbF9zdWRva3UnKS5hcHBlbmQodFJvdy5hcHBlbmQodENlbGwpKTtcbiAgIC8vICBcdH0pO1xuICAgLy8gIFx0JCgnLnNtYWxsX3N1ZG9rdScpLmFwcGVuZCgkKCcjc21hbGxfc3Vkb2t1JykpXG5cbiB9O1xuXG4gLy8gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gLy8gXHRmaW5kUmVzdWx0KCk7XG4gLy8gfSwgMTAwMDApO1xuXG4gZnVuY3Rpb24gcGVuY2lsTWFya1RhYmxlKCl7XG4gXHQkKCcuc21hbGxfc3Vkb2t1JykuYXBwZW5kKCc8dGFibGUgY2xhc3M9XCJjYW5kaWRhdGVzX3N1ZG9rdVwiPjx0cj48dGQgaWQ9XCIxXCI+PC90ZD48dGQgaWQ9XCIyXCI+PC90ZD48dGQgaWQ9XCIzXCI+PC90ZD48L3RyPjx0cj48dGQgaWQ9XCI0XCI+PC90ZD48dGQgaWQ9XCI1XCI+PC90ZD48dGQgaWQ9XCI2XCI+PC90ZD48L3RyPjx0cj48dGQgaWQ9XCI3XCI+PC90ZD48dGQgaWQ9XCI4XCI+PC90ZD48dGQgaWQ9XCI5XCI+PC90ZD48L3RyPjwvdGFibGU+Jyk7XG4gXHQvLyAkKCcuc21hbGxfc3Vkb2t1JykuaGlkZSgpXG4gfVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQoXCJkaXZcIikuaGFzQ2xhc3MoJ3N1ZG9rdUdyaWQnKSkge1xuICAgICAgICBsb2FkU3Vkb2t1KCk7XG4gICAgICAgIC8vcGVuY2lsTWFya1RhYmxlKCk7XG4gICAgICAgIGNoYW5nZWxldmVsKClcbiAgICB9XG59KTtcblxuICQoJyNyZXNldCcpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICBzdWRva3VfcmVzZXQoKTtcbiB9KVxuXG5mdW5jdGlvbiBwcmludERhdGEoZGl2VG9QcmludClcbntcbndpbmRvdy5wcmludCgpO1xufVxuXG4kKCcjcHJpbnQnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XG5wcmludERhdGEoJ2dyaWRfdGFibGUnKTtcbn0pXG5cbiQoJyNwYXN0ZV9wdXp6bGVfYnV0dG9uX2Vhc3knKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgJCgnI3Bhc3RlX3B1enpsZV9idXR0b25faGFyZCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCcjcGFzdGVfcHV6emxlX2J1dHRvbl9tZWRpdW0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgJCgnI3Bhc3RlX3B1enpsZV9idXR0b25fZGlhYm9saWNhbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbn0pO1xuXG4kKCcjcGFzdGVfcHV6emxlX2J1dHRvbl9tZWRpdW0nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgJCgnI3Bhc3RlX3B1enpsZV9idXR0b25fZWFzeScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCcjcGFzdGVfcHV6emxlX2J1dHRvbl9oYXJkJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICQoJyNwYXN0ZV9wdXp6bGVfYnV0dG9uX2RpYWJvbGljYWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG59KTtcblxuJCgnI3Bhc3RlX3B1enpsZV9idXR0b25faGFyZCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCcjcGFzdGVfcHV6emxlX2J1dHRvbl9lYXN5JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICQoJyNwYXN0ZV9wdXp6bGVfYnV0dG9uX21lZGl1bScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCcjcGFzdGVfcHV6emxlX2J1dHRvbl9kaWFib2xpY2FsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xufSk7XG4kKCcjcGFzdGVfcHV6emxlX2J1dHRvbl9kaWFib2xpY2FsJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICQoJyNwYXN0ZV9wdXp6bGVfYnV0dG9uX2Vhc3knKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgJCgnI3Bhc3RlX3B1enpsZV9idXR0b25fbWVkaXVtJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICQoJyNwYXN0ZV9wdXp6bGVfYnV0dG9uX2hhcmQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG59KTtcblxuIGZ1bmN0aW9uIGNoYW5nZWxldmVsKCl7XG4gXHQkKCcjcGFzdGVfcHV6emxlX2J1dHRvbl9tZWRpdW0nKS5jbGljayhmdW5jdGlvbigpIHtcbiBcdFx0dmFyIHBhdGhBcnJheSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCAnIycgKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXRoQXJyYXlbMF0gKyAnI21lZGl1bSc7XG4gXHRcdGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAvL2xvYWRTdWRva3UoKTtcbiBcdH0pO1xuIFx0JCgnI3Bhc3RlX3B1enpsZV9idXR0b25fZWFzeScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGF0aEFycmF5ID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXRoQXJyYXlbMF0gKyAnI2Vhc3knO1xuIFx0XHRsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgLy9sb2FkU3Vkb2t1KCk7XG4gXHR9KTtcblxuIFx0JCgnI3Bhc3RlX3B1enpsZV9idXR0b25faGFyZCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGF0aEFycmF5ID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXRoQXJyYXlbMF0gKyAnI2hhcmQnO1xuIFx0XHRsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgLy9sb2FkU3Vkb2t1KCk7XG4gXHR9KTtcbiBcdCQoJyNwYXN0ZV9wdXp6bGVfYnV0dG9uX2RpYWJvbGljYWwnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBwYXRoQXJyYXkgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXRoQXJyYXlbMF0gKyAnI2RpYWJvbGljYWwnO1xuICAgICBcdFx0bG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIC8vbG9hZFN1ZG9rdSgpO1xuICAgICBcdH0pO1xuIH1cblxuIGZ1bmN0aW9uIENQVG9KU09OKCkge1xuICAgICB2YXIgdGltZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdF90aW1lXCIpLmlubmVyVGV4dDtcbiAgICAgdmFyIHRpbWVyQXJyYXkgPSB0aW1lci5zcGxpdCgnOicpO1xuICAgICB2YXIgcmVzdWx0TG9uZyA9IHRpbWVyQXJyYXlbMF0gKyB0aW1lckFycmF5WzFdICsgdGltZXJBcnJheVsyXTtcbiAgICAgdmFyIHVzZXJOYW1lID0gJCgnI3BsYXllcl9uYW1lJykudmFsKCk7XG4gICAgIHZhciB1c2VyRW1haWwgPSAkKCcjcGxheWVyX2VtYWlsJykudmFsKCk7XG4gICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgIFwicmVzdWx0XCI6IHRpbWVyLFxuICAgICAgICAgICAgIFwibGV2ZWxUeXBlXCI6Z2FtZUxldmVsLnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgICAgXCJnYW1lVHlwZVwiOlwiU1VET0tVXCIsXG4gICAgICAgICAgICAgXCJyZXN1bHRMb25nXCI6IHJlc3VsdExvbmcsXG4gICAgICAgICAgICAgXCJnYW1lRGF0ZVwiOm5ldyBEYXRlKCksXG4gICAgICAgICAgICAgXCJkaXNwbGF5TmFtZVwiOnVzZXJOYW1lLFxuICAgICAgICAgICAgIFwiZW1haWxcIjp1c2VyRW1haWxcbiAgICAgICAgIH0pO1xuIH1cblxuIGZ1bmN0aW9uIHNlbmRSZXN1bHQoKXtcbiB2YXIgdXNlck5hbWUgPSAkKCcjcGxheWVyX25hbWUnKS52YWwoKTtcbiAgICAgdmFyIHVzZXJFbWFpbCA9ICQoJyNwbGF5ZXJfZW1haWwnKS52YWwoKTtcblx0IHZhciBpc1ZhbGlkID0gdHJ1ZTtcblx0IFxuXHQgaWYgKHVzZXJOYW1lICE9PSAnJykge1xuXHRcdCAkKCcjcGxheWVyX25hbWUnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcblx0IH1cblx0IGVsc2V7XG5cdFx0ICQoJyNwbGF5ZXJfbmFtZScpLmFkZENsYXNzKCdlcnJvcicpO1xuXHRcdCAkKCcjYmxhbmtfZmllbGRzJykuc2hvdygpO1xuXHRcdCBpc1ZhbGlkID0gZmFsc2U7XG5cdCB9XG5cdCBpZiggdXNlckVtYWlsICE9PSAnJykge1xuXHRcdCAkKCcjcGxheWVyX2VtYWlsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XG5cdCB9XG5cdCBlbHNle1xuXHRcdCQoJyNibGFua19maWVsZHMnKS5zaG93KCk7XG5cdFx0JCgnI3BsYXllcl9lbWFpbCcpLmFkZENsYXNzKCdlcnJvcicpO1xuXHRcdGlzVmFsaWQgPSBmYWxzZTtcblx0IH1cblx0IGlmKHVzZXJFbWFpbCAhPT0nJyl7XG4gICAgICAgICAkKCcjYmxhbmtfZmllbGRzJykuaGlkZSgpO1xuICAgICAgICAgdmFyIHJlZ2V4ID0gL14oW2EtekEtWjAtOV9cXC5cXC1cXCtdKStcXEAoKFthLXpBLVowLTlcXC1dKStcXC4pKyhbYS16QS1aMC05XXsyLDR9KSskLztcbiAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QodXNlckVtYWlsKSkge1xuXHRcdFx0ICAkKCcjaW52YWxpZF9lbWFpbCcpLnNob3coKTtcblx0XHRcdCAgJCgnI3BsYXllcl9lbWFpbCcpLmFkZENsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgJCgnI2ludmFsaWRfZW1haWwnKS5oaWRlKCk7XG4gICAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgfVxuICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICcvZ2FtZS9yZXN1bHQnLCAvLyB1cmwgd2hlcmUgdG8gc3VibWl0IHRoZSByZXF1ZXN0XG4gICAgICAgICAgICB0eXBlOiBcInBvc3RcIiwgLy8gdHlwZSBvZiBhY3Rpb24gUE9TVCB8fCBHRVRcbiAgICAgICAgICAgIGRhdGE6IENQVG9KU09OKCksIC8vIHBvc3QgZGF0YSB8fCBnZXQgZGF0YVxuICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkKCcudXNlcl9kYXRhJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGxlYWRlckJvYXJkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiB9XG5cbnZhciBzdG9wVGltZXIgPSBmYWxzZTtcbiB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiBcdFx0aW5wdXRDZWxscyA9ICQoJy5jZWxsIGlucHV0JylcbiBcdFx0JC5lYWNoKGlucHV0Q2VsbHMsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XG4gXHRcdFx0dmFyIGlucHV0ID0gJCgnIycrdmFsdWUuaWQpXG4gXHRcdFx0aWYgKHRoaXMucGFyZW50RWxlbWVudC5vdXRlckhUTUwuaW5jbHVkZXMoJ2NlbGxfZHVwbGljYXRlJykgfHwgaW5wdXQudmFsKCkgPT0gXCJcIil7XG4vLyBcdFx0XHRcdGNvbnNvbGUubG9nKHRoaXMpXG4gXHRcdFx0XHRyZXR1cm4gZmFsc2VcbiBcdFx0XHR9ZWxzZSBpZiAoKCF0aGlzLm91dGVySFRNTC5pbmNsdWRlcygnY2VsbF9kdXBsaWNhdGUnKSB8fCBpbnB1dC52YWwoKSAhPSBcIlwiICkmJiAoaW5wdXRDZWxscy5sZW5ndGggPT0gaW5kZXgrMSkpe1xuIFx0XHRcdCAgICBpZighc3RvcFRpbWVyKXtcbiBcdFx0XHQgICAgICAgIHN0b3BUaW1lciA9IHRydWU7XG4gXHRcdFx0ICAgICAgICAgdmFyIGhoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJob3Vyc1wiKS5pbm5lclRleHQ7XG4gICAgICAgICAgICAgICAgICAgICB2YXIgbW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1pbnV0ZXNcIikuaW5uZXJUZXh0XG4gICAgICAgICAgICAgICAgICAgICB2YXIgc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlY29uZHNcIikuaW5uZXJUZXh0XG4gICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXIgPSBoaCtcIjpcIittbStcIjpcIitzcztcbiBcdFx0XHQgICAgICAgICQoJy5yZXN1bHRTdWRva3UnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5wbGF5U3Vkb2t1JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3Jlc3VsdFwiKS5odG1sKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNyZXN1bHRfdGltZVwiKS5odG1sKHRpbWVyKVxuIFx0XHRcdCAgICB9XG5cbiBcdFx0XHR9XG4gXHRcdH0pO1xuIH0sIDMwMDApO1xuXG5mdW5jdGlvbiBsZWFkZXJCb2FyZCgpe1xuICBcdCQuYWpheCh7XG5cdFx0IHVybDogJy9nYW1lL2xlYWRlckJvYXJkJywgLy8gdXJsIHdoZXJlIHRvIHN1Ym1pdCB0aGUgcmVxdWVzdFxuXHRcdCB0eXBlOiBcInBvc3RcIiwgLy8gdHlwZSBvZiBhY3Rpb24gUE9TVCB8fCBHRVRcblx0XHQgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0XHQgIFwibGV2ZWxUeXBlXCI6Z2FtZUxldmVsLnRvVXBwZXJDYXNlKCksXG5cdFx0XHRcdFx0XHRcdCAgXCJnYW1lVHlwZVwiOlwiU1VET0tVXCIsXG5cdFx0XHRcdFx0XHRcdCAgXCJnYW1lRGF0ZVwiOm5ldyBEYXRlKClcblx0XHRcdFx0XHRcdCAgfSksIC8vIHBvc3QgZGF0YSB8fCBnZXQgZGF0YVxuXHRcdCBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdCBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG5cdFx0XHQgdmFyIHRhYmxlID0gcmVzdWx0O1xuICAgICAgICAgICAgIHRhYmxlRGF0YShyZXN1bHQpO1xuXHRcdCB9XG5cdCB9KTtcblxufTtcblxuZnVuY3Rpb24gdGFibGVEYXRhKHRhYmxlKSB7XG5cdHZhciByb3dzID0gJyc7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFibGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAvLyAgcm93cyArPSAnPHRyIGlkID0gXCJyb3cnICsgaSArICdcIj48dGQ+ICR7ZGlzcGxheU5hbWV9IDwvdGQ+PHRkPnRhYmxlW2ldLmRpc3BsYXlOYW1lPC90ZD48dGQ+dGFibGVbaV0uZHVyYXRpb248L3RkPjwvdHI+JztcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGMnLCB0YWJsZVtpXS5kaXNwbGF5TmFtZSwgJCk7XG4gICAgICAgICAgICAgICAgcm93cyArPVwiPHRyPlwiK1xuICAgICAgICAgICAgICAgICAgICBcIjx0ZD5cIisgKGkrMSkgKyBcIjwvdGQ+XCIrXG4gICAgICAgICAgICAgICAgICAgIFwiPHRkPlwiKyB0YWJsZVtpXS5kaXNwbGF5TmFtZSArIFwiPC90ZD5cIitcbiAgICAgICAgICAgICAgICAgICAgXCI8dGQ+XCIrIHRhYmxlW2ldLmR1cmF0aW9uICsgXCI8L3RkPlwiK1xuXHRcdFx0XHRcdFwiPC90cj5cIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1ZG9rdV9wbGF5ZXJzJykuaW5uZXJIVE1MID0gcm93cztcbiAgICAgICAgICAgICQoXCIjdGFibGVIdG1sXCIpLmh0bWwocm93cyk7XG4gICAgICAgIH0sIDEwMDApO1xuXG5cdH0pKCk7XG59XG5cbiQoZnVuY3Rpb24oKXtcbiAgICB2YXIgZHRUb2RheSA9IG5ldyBEYXRlKCk7XG5cbiAgICB2YXIgbW9udGggPSBkdFRvZGF5LmdldE1vbnRoKCkgKyAxO1xuICAgIHZhciBkYXkgPSBkdFRvZGF5LmdldERhdGUoKTtcbiAgICB2YXIgeWVhciA9IGR0VG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICBpZihtb250aCA8IDEwKVxuICAgICAgICBtb250aCA9ICcwJyArIG1vbnRoLnRvU3RyaW5nKCk7XG4gICAgaWYoZGF5IDwgMTApXG4gICAgICAgIGRheSA9ICcwJyArIGRheS50b1N0cmluZygpO1xuXG4gICAgdmFyIG1heERhdGUgPSB5ZWFyICsgJy0nICsgbW9udGggKyAnLScgKyBkYXk7XG4gICAgJCgnI2RhdGVhcGlja2VyJykuYXR0cignbWF4JywgbWF4RGF0ZSk7XG59KTtcblxuZnVuY3Rpb24gc3Vkb2t1X3Jlc2V0KCl7XG4gICAgJC5lYWNoKGNlbGxzLCBmdW5jdGlvbiggaW5kZXgsIGNlbGwgKSB7XG4gICAgICAgICAgICBpZiAoY2VsbFtcImVsZW1lbnRcIl0uY2xhc3NMaXN0LnZhbHVlLmluY2x1ZGVzKCdibGFua19jZWxsX2hpZ2hsaWdodF9ibGFjaycpKXtcbiAgICAgICAgICAgICAgICAkKCcjZ3JpZF90YWJsZSBpbnB1dCcpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgJCgnI2dyaWRfdGFibGUgaW5wdXQnKS5yZW1vdmVDbGFzcygnZWRpdGVkX3BlbmNpbHMnKTtcbiAgICAgICAgICAgICAgICAkKCcjZ3JpZF90YWJsZSBpbnB1dCcpLnJlbW92ZUNsYXNzKCdoaWRlQ2FuZGlkYXRlJyk7XG4gICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgY2VsbFsnZWxlbWVudCddLmNsYXNzTGlzdC5yZW1vdmUoXCJjZWxsX2R1cGxpY2F0ZVwiKTtcbiAgICAgICAgICAgICAgICBjZWxsLnBlbmNpbG1hcmtzID0gW3RydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlXVxuICAgICAgICAgICAgfVxuICAgIH0pO1xuICAgIGNsZWFyUGVuY2lsbWFya3MoKTtcbiAgICBoaWdobGlnaHQoMCk7XG59XG5cbndpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgIGlmICgkKCcuYXNzaXN0JykubGVuZ3RoID4gMCl7XG4gICAgICAgIGNsZWFyUGVuY2lsbWFya3MoKTtcbiAgICAgICAgdXBkYXRlUGVuY2lsbWFya3MoKTtcbiAgICB9XG59LCA1KTtcblxuZnVuY3Rpb24gZ2V0aW5wdXREYXRlKCl7XG4gICAgc2VsZWN0ZWREYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlYXBpY2tlclwiKS52YWx1ZTtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdkYXRlJywgc2VsZWN0ZWREYXRlKTtcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMF07XG59XG5cbiIsInZhciBuc09wdGlvbnMgPVxuICAgIHtcbiAgICAgICAgc2xpZGVySWQ6IFwibmluamEtc2xpZGVyXCIsXG4gICAgICAgIHRyYW5zaXRpb25UeXBlOiBcImZhZGVcIiwgLy9cImZhZGVcIiwgXCJzbGlkZVwiLCBcInpvb21cIiwgXCJrZW5idXJucyAxLjJcIiBvciBcIm5vbmVcIlxuICAgICAgICBhdXRvQWR2YW5jZTogZmFsc2UsIC8vSWYgYXV0b0FkdmFuY2UgaXMgcmVxdWlyZWQsIGRvbid0IHNldCB0aGlzIHRvIHRydWUuIFlvdSBjYW4gc2V0IHRoZSBhdXRvQWR2YW5jZSBvZiB0aGUgVGh1bWJuYWlsIFNsaWRlciB0byB0cnVlIGJlY2F1c2UgdGhlIFwiYmVmb3JlXCIgY2FsbGJhY2sgZnVuY3Rpb24gbGlzdGVkIGJlbG93IGhhcyBiZWVuIHNldCB0byBsZXQgdGhpcyBzbGlkZXIgdG8gYmUgZHJpdmVuIGJ5IHRoZSBUaHVtYm5haWwgU2xpZGVyLlxuICAgICAgICByZXdpbmQ6IGZhbHNlLFxuICAgICAgICBkZWxheTogXCJkZWZhdWx0XCIsXG4gICAgICAgIHRyYW5zaXRpb25TcGVlZDogNDAwLFxuICAgICAgICBhc3BlY3RSYXRpbzogXCIyOjFcIixcbiAgICAgICAgaW5pdFNsaWRlckJ5Q2FsbGluZ0luaXRGdW5jOiBmYWxzZSxcbiAgICAgICAgc2h1ZmZsZTogZmFsc2UsXG4gICAgICAgIHN0YXJ0U2xpZGVJbmRleDogMCwgLy8wLWJhc2VkXG4gICAgICAgIG5hdmlnYXRlQnlUYXA6IHRydWUsXG4gICAgICAgIGtleWJvYXJkTmF2OiB0cnVlLFxuICAgICAgICBiZWZvcmU6IGZ1bmN0aW9uIChjdXJyZW50SWR4LCBuZXh0SWR4LCBtYW51YWwpIHtcbiAgICAgICAgICAgIGlmIChtYW51YWwgJiYgdHlwZW9mIG1jVGh1bWJuYWlsU2xpZGVyICE9IFwidW5kZWZpbmVkXCIpIG1jVGh1bWJuYWlsU2xpZGVyLmRpc3BsYXkobmV4dElkeCk7XG4gICAgICAgIH0sXG4gICAgICAgIGxpY2Vuc2U6IFwiYjJlNjcxXCJcbiAgICB9O1xuXG52YXIgbnNsaWRlciA9IG5ldyBOaW5qYVNsaWRlcihuc09wdGlvbnMpO1xuXG4vKiBOaW5qYSBTbGlkZXIgdjIwMTYuMTIuMjkgQ29weXJpZ2h0IHd3dy5tZW51Y29vbC5jb20gKi9cbmZ1bmN0aW9uIE5pbmphU2xpZGVyKGEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpZiAodHlwZW9mIFN0cmluZy5wcm90b3R5cGUudHJpbSAhPT0gXCJmdW5jdGlvblwiKSBTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpXG4gICAgfTtcbiAgICB2YXIgZSA9IFwibGVuZ3RoXCIsIHQgPSBhLnNsaWRlcklkLCBwYiA9IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGQuY2hpbGROb2RlcywgYyA9IFtdO1xuICAgICAgICAgICAgaWYgKGEpIGZvciAodmFyIGIgPSAwLCBmID0gYVtlXTsgYiA8IGY7IGIrKykgYVtiXS5ub2RlVHlwZSA9PSAxICYmIGMucHVzaChhW2JdKTtcbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgIH0sIEUgPSBmdW5jdGlvbiAoYiwgYSkge1xuICAgICAgICAgICAgcmV0dXJuIGIuZ2V0QXR0cmlidXRlKGEpXG4gICAgICAgIH0sIGRiID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpXG4gICAgICAgIH0sIGsgPSBkb2N1bWVudCwgUCA9IFwiZG9jdW1lbnRFbGVtZW50XCIsIHUgPSBcImFkZEV2ZW50TGlzdGVuZXJcIiwgZiA9IFwiY2xhc3NOYW1lXCIsIEYgPSBcImhlaWdodFwiLCBBID0gXCJ6SW5kZXhcIixcbiAgICAgICAgUiA9IFwiYmFja2dyb3VuZEltYWdlXCIsIFFiID0gZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIHZhciBhID0gYy5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgaWYgKGEgJiYgYVtlXSkge1xuICAgICAgICAgICAgICAgIHZhciBiID0gYVtlXTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoYi0tKSBhW2JdLm5vZGVUeXBlICE9IDEgJiYgYVtiXVt5XS5yZW1vdmVDaGlsZChhW2JdKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB4ID0gZnVuY3Rpb24gKGEsIGMsIGIpIHtcbiAgICAgICAgICAgIGlmIChhW3VdKSBhW3VdKGMsIGIsIGZhbHNlKTsgZWxzZSBhLmF0dGFjaEV2ZW50ICYmIGEuYXR0YWNoRXZlbnQoXCJvblwiICsgYywgYilcbiAgICAgICAgfSwgeWIgPSBmdW5jdGlvbiAoZCwgYykge1xuICAgICAgICAgICAgZm9yICh2YXIgYiA9IFtdLCBhID0gMDsgYSA8IGRbZV07IGErKykgYltiW2VdXSA9IFN0cmluZ1tuYl0oZFthYl0oYSkgLSAoYyA/IGMgOiAzKSk7XG4gICAgICAgICAgICByZXR1cm4gYi5qb2luKFwiXCIpXG4gICAgICAgIH0sIHNiID0gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGlmIChhICYmIGEuc3RvcFByb3BhZ2F0aW9uKSBhLnN0b3BQcm9wYWdhdGlvbigpOyBlbHNlIGlmICh3aW5kb3cuZXZlbnQpIHdpbmRvdy5ldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlXG4gICAgICAgIH0sIHJiID0gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIHZhciBhID0gYiB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgICBpZiAoYS5wcmV2ZW50RGVmYXVsdCkgYS5wcmV2ZW50RGVmYXVsdCgpOyBlbHNlIGlmIChhKSBhLnJldHVyblZhbHVlID0gZmFsc2VcbiAgICAgICAgfSwgVGIgPSBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBiW2RdLndlYmtpdEFuaW1hdGlvbk5hbWUgIT0gXCJ1bmRlZmluZWRcIikgdmFyIGEgPSBcIi13ZWJraXQtXCI7IGVsc2UgYSA9IFwiXCI7XG4gICAgICAgICAgICByZXR1cm4gYVxuICAgICAgICB9LCBPYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBiID0gZGIoaywgXCJoZWFkXCIpO1xuICAgICAgICAgICAgaWYgKGJbZV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGsuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgICAgICAgICAgIGJbMF0uYXBwZW5kQ2hpbGQoYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuc2hlZXQgPyBhLnNoZWV0IDogYS5zdHlsZVNoZWV0XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIDBcbiAgICAgICAgfSwgSiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpXG4gICAgICAgIH0sIEFiID0gW1wiJDEkMiQzXCIsIFwiJDEkMiQzXCIsIFwiJDEkMjRcIiwgXCIkMSQyM1wiLCBcIiQxJDIyXCJdLCBZYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gYS5yZXBsYWNlKC8oPzouKlxcLik/KFxcdykoW1xcd1xcLV0pP1teLl0qKFxcdylcXC5bXi5dKiQvLCBcIiQxJDMkMlwiKVxuICAgICAgICB9LFxuICAgICAgICB6YiA9IFsvKD86LipcXC4pPyhcXHcpKFtcXHdcXC1dKVteLl0qKFxcdylcXC5bXi5dKyQvLCAvLiooW1xcd1xcLV0pXFwuKFxcdykoXFx3KVxcLlteLl0rJC8sIC9eKD86LipcXC4pPyhcXHcpKFxcdylcXC5bXi5dKyQvLCAvLiooW1xcd1xcLV0pKFtcXHdcXC1dKVxcLmNvbVxcLlteLl0rJC8sIC9eKFxcdylbXi5dKihcXHcpJC9dLFxuICAgICAgICBtID0gc2V0VGltZW91dCwgeSA9IFwicGFyZW50Tm9kZVwiLCBmID0gXCJjbGFzc05hbWVcIiwgZCA9IFwic3R5bGVcIiwgTCA9IFwicGFkZGluZ1RvcFwiLCBuYiA9IFwiZnJvbUNoYXJDb2RlXCIsXG4gICAgICAgIGFiID0gXCJjaGFyQ29kZUF0XCIsIHYsIFosIEQsIEgsIEksIHZiLCBTID0ge30sIHMgPSB7fSwgQjtcbiAgICB2ID0gKG5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkIHx8IG5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCkgJiYgKG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzIHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyk7XG4gICAgWiA9IFwib250b3VjaHN0YXJ0XCIgaW4gd2luZG93IHx8IHdpbmRvdy5Eb2N1bWVudFRvdWNoICYmIGsgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoIHx8IHY7XG4gICAgdmFyIEViID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoWikge1xuICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIEQgPSBcInBvaW50ZXJkb3duXCI7XG4gICAgICAgICAgICAgICAgSCA9IFwicG9pbnRlcm1vdmVcIjtcbiAgICAgICAgICAgICAgICBJID0gXCJwb2ludGVydXBcIlxuICAgICAgICAgICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIEQgPSBcIk1TUG9pbnRlckRvd25cIjtcbiAgICAgICAgICAgICAgICBIID0gXCJNU1BvaW50ZXJNb3ZlXCI7XG4gICAgICAgICAgICAgICAgSSA9IFwiTVNQb2ludGVyVXBcIlxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBEID0gXCJ0b3VjaHN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgSCA9IFwidG91Y2htb3ZlXCI7XG4gICAgICAgICAgICAgICAgSSA9IFwidG91Y2hlbmRcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmIgPSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlRXZlbnQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hKGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBIOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYihhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgSTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMoYSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzYihhKVxuICAgICAgICAgICAgICAgIH0sIGE6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICAgIGJbY11bZF1baCA/IFwidG9wXCIgOiBcImxlZnRcIl0gPSBcIjBcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgJiYgYS5wb2ludGVyVHlwZSAhPSBcInRvdWNoXCIpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgTigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHYgPyBhIDogYS50b3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICBTID0ge3g6IGUucGFnZVgsIHk6IGUucGFnZVksIHQ6ICtuZXcgRGF0ZX07XG4gICAgICAgICAgICAgICAgICAgIEIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBzID0ge307XG4gICAgICAgICAgICAgICAgICAgIGdbdV0oSCwgdGhpcywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBnW3VdKEksIHRoaXMsIGZhbHNlKVxuICAgICAgICAgICAgICAgIH0sIGI6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdiAmJiAoYS50b3VjaGVzW2VdID4gMSB8fCBhLnNjYWxlICYmIGEuc2NhbGUgIT09IDEpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ICYmIGEucG9pbnRlclR5cGUgIT0gXCJ0b3VjaFwiKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gdiA/IGEgOiBhLnRvdWNoZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIHNbaCA/IFwieVwiIDogXCJ4XCJdID0gZi5wYWdlWCAtIFMueDtcbiAgICAgICAgICAgICAgICAgICAgc1toID8gXCJ4XCIgOiBcInlcIl0gPSBmLnBhZ2VZIC0gUy55O1xuICAgICAgICAgICAgICAgICAgICBpZiAodiAmJiBNYXRoLmFicyhzLngpIDwgMjEpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEIgPT09IG51bGwpIEIgPSAhIShCIHx8IE1hdGguYWJzKHMueCkgPCBNYXRoLmFicyhzLnkpKTtcbiAgICAgICAgICAgICAgICAgICAgIUIgJiYgcmIoYSk7XG4gICAgICAgICAgICAgICAgICAgIGJbY11bZF1baCA/IFwidG9wXCIgOiBcImxlZnRcIl0gPSBzLnggKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9LCBjOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gK25ldyBEYXRlIC0gUy50LCBlID0gZiA8IDI1MCAmJiBNYXRoLmFicyhzLngpID4gMjAgfHwgTWF0aC5hYnMocy54KSA+IDk5O1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PSByIC0gMSAmJiBzLnggPCAwIHx8ICFjICYmIHMueCA+IDApIGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICBCID09PSBudWxsICYmIGEubmF2aWdhdGVCeVRhcCAmJiAhYltjXS5wbGF5ZXIgJiYgbihjICsgMSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChCID09PSBmYWxzZSkgaWYgKGUpIG4oYyArIChzLnggPiAwID8gLTEgOiAxKSwgMSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYltjXVtkXVtoID8gXCJ0b3BcIiA6IFwibGVmdFwiXSA9IFwiMFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2IoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGcucmVtb3ZlRXZlbnRMaXN0ZW5lcihILCB0aGlzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGcucmVtb3ZlRXZlbnRMaXN0ZW5lcihJLCB0aGlzLCBmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ1t1XShELCB2YiwgZmFsc2UpXG4gICAgICAgIH1cbiAgICB9LCBpID0ge307XG4gICAgaS5hID0gT2IoKTtcbiAgICB2YXIgV2IgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgICBmb3IgKHZhciBjLCBkLCBiID0gYVtlXTsgYjsgYyA9IHBhcnNlSW50KEooKSAqIGIpLCBkID0gYVstLWJdLCBhW2JdID0gYVtjXSwgYVtjXSA9IGQpIDtcbiAgICAgICAgcmV0dXJuIGFcbiAgICB9LCBWYiA9IGZ1bmN0aW9uIChhLCBjKSB7XG4gICAgICAgIHZhciBiID0gYVtlXTtcbiAgICAgICAgd2hpbGUgKGItLSkgaWYgKGFbYl0gPT09IGMpIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9LCBLID0gZnVuY3Rpb24gKGEsIGMpIHtcbiAgICAgICAgdmFyIGIgPSBmYWxzZTtcbiAgICAgICAgaWYgKGFbZl0gJiYgdHlwZW9mIGFbZl0gPT0gXCJzdHJpbmdcIikgYiA9IFZiKGFbZl0uc3BsaXQoXCIgXCIpLCBjKTtcbiAgICAgICAgcmV0dXJuIGJcbiAgICB9LCBvID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgICAgaWYgKCFLKGEsIGIpKSBpZiAoYVtmXSA9PSBcIlwiKSBhW2ZdID0gYjsgZWxzZSBpZiAoYykgYVtmXSA9IGIgKyBcIiBcIiArIGFbZl07IGVsc2UgYVtmXSArPSBcIiBcIiArIGJcbiAgICB9LCBDID0gZnVuY3Rpb24gKGMsIGcpIHtcbiAgICAgICAgaWYgKGNbZl0pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGQgPSBcIlwiLCBiID0gY1tmXS5zcGxpdChcIiBcIiksIGEgPSAwLCBoID0gYltlXTsgYSA8IGg7IGErKykgaWYgKGJbYV0gIT09IGcpIGQgKz0gYlthXSArIFwiIFwiO1xuICAgICAgICAgICAgY1tmXSA9IGQudHJpbSgpXG4gICAgICAgIH1cbiAgICB9LCBnYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIGlmIChhW2ZdKSBhW2ZdID0gYVtmXS5yZXBsYWNlKC9cXHM/c2wtXFx3Ky9nLCBcIlwiKVxuICAgIH0sIEdiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IHRoaXM7XG4gICAgICAgIGlmIChhW2ZdKSBhW2ZdID0gYVtmXS5yZXBsYWNlKC9zbC1zXFx3Ky8sIFwibnMtc2hvd1wiKS5yZXBsYWNlKC9zbC1jXFx3Ky8sIFwiXCIpXG4gICAgfSwgcSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIGEgPSBcIiNcIiArIHQgKyBhLnJlcGxhY2UoXCJfX1wiLCBpLnApO1xuICAgICAgICBpLmEuaW5zZXJ0UnVsZShhLCAwKVxuICAgIH0sIFNiID0gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgdmFyIGIgPSBZYihkb2N1bWVudC5kb21haW4ucmVwbGFjZShcInd3dy5cIiwgXCJcIikpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdHlwZW9mIGF0b2IgPT0gXCJmdW5jdGlvblwiICYmIChmdW5jdGlvbiAoYSwgYykge1xuICAgICAgICAgICAgICAgIHZhciBiID0geWIoYXRvYihcImR5MTNRV2dzTFQ5dGFpeFBMSG93TkMxQlFTdHdLeW9xVHl4Nk1Ib3ljR2x5YTNoc01UVXRRVUVyZUNzdGQwRTBQMjFxTEhjdGQxOXVZVEp0Y25kcGRuaEdhV3B6ZG1rc2JWOXJLQ1UyTmlVM05TVTJSU1VsTmpZbE56VWxOa1VsTmpNbE56UWxOamtsTmtZbE5rVWxNakFsTmpVbE1qZ2xLU284Wnk5a1ltMXRLWFZwYW5RdE1pbzhhQ2t4S2p4b0tUSXFQR3BuS1c0K1N5bHZMWEFxS254M1luTWhjejVPWW5WcEwzTmliMlZ3YmlrcUxYUStaQUZlTFhZK2JDa29WM0J0YUdsMkpIUjVkbWRzWlhkcEpIWnBjVzF5YUdsMktDb3RkejRvY1dKelptOTFUM0JsWmlnOFpIQnZkSEJ0Wmk5dGNHZ3BjeW84YW1jcGRDOXZjR1ZtVDJKdVpqNCtLRUlvS25RK2F5bDBLZ0U4YW1jcGN6OHZPU3AwTDNSbWRVSjFkWE5xWTNaMVppa29ZbTExS0MxMktqeG1iWFJtSVdwbktYTS9MemdxZkhkaWMzSStaWEJrZG01bWIzVXZaSE5tWW5WbVZXWjVkVTl3WldZcGRpb3RSejV0ZDNJMVBHcG5LWE0vTHpnMktrYytSM2N2YW05MFpuTjFRMlpuY0hObUtYSXRSeXB6Wm5WMmMyOGhkV2xxZER3Mk9TVTJSaVUyUlNVOGFtY3Bjejh2T1NwMEwzUm1kVUoxZFhOcVkzWjFaaWtvWW0xMWNHUjJibVlsSkc5MUwyUnpabUoxWmxWbWVRPT1cIiksIGFbZV0gKyBwYXJzZUludChhLmNoYXJBdCgxKSkpLnN1YnN0cigwLCAzKTtcbiAgICAgICAgICAgICAgICB0eXBlb2YgdGhpc1tiXSA9PT0gXCJmdW5jdGlvblwiICYmIHRoaXNbYl0oYywgemIsIEFiKVxuICAgICAgICAgICAgfSkoYiwgYSlcbiAgICAgICAgfSBjYXRjaCAoYykge1xuICAgICAgICB9XG4gICAgfSwgRyA9IGZ1bmN0aW9uIChhLCBjLCBmLCBlLCBiKSB7XG4gICAgICAgIHZhciBkID0gXCJAXCIgKyBpLnAgKyBcImtleWZyYW1lcyBcIiArIGEgKyBcIiB7ZnJvbXtcIiArIGMgKyBcIjt9IHRve1wiICsgZiArIFwiO319XCI7XG4gICAgICAgIGkuYS5pbnNlcnRSdWxlKGQsIDApO1xuICAgICAgICBxKFwiIFwiICsgZSArIFwie19fYW5pbWF0aW9uOlwiICsgYSArIFwiIFwiICsgYiArIFwiO31cIilcbiAgICB9LCBIYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgRyhcInpvb20taW5cIiwgXCJ0cmFuc2Zvcm06c2NhbGUoMSlcIiwgXCJ0cmFuc2Zvcm06c2NhbGUoXCIgKyBhLnNjYWxlICsgXCIpXCIsIFwibGkubnMtc2hvdyAubnMtaW1nXCIsIGEuZSArIGwgKyBcIm1zIDEgYWx0ZXJuYXRlIG5vbmVcIik7XG4gICAgICAgIFYoKTtcbiAgICAgICAgcShcIiB1bCBsaSAubnMtaW1nIHtiYWNrZ3JvdW5kLXNpemU6Y292ZXI7fVwiKVxuICAgIH0sIEZiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYyA9IGEuZSAqIDEwMCAvIChhLmUgKyBsKSxcbiAgICAgICAgICAgIGIgPSBcIkBcIiArIGkucCArIFwia2V5ZnJhbWVzIHpvb20taW4gezAle19fdHJhbnNmb3JtOnNjYWxlKDEuNCk7X19hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMSwxLjIsLjAyLC45Mik7fSBcIiArIGMgKyBcIiV7X190cmFuc2Zvcm06c2NhbGUoMSk7X19hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2U7fSAxMDAle19fdHJhbnNmb3JtOnNjYWxlKDEuMSk7fX1cIjtcbiAgICAgICAgYiA9IGIucmVwbGFjZSgvX18vZywgaS5wKTtcbiAgICAgICAgaS5hLmluc2VydFJ1bGUoYiwgMCk7XG4gICAgICAgIHEoXCIgbGkubnMtc2hvdyAubnMtaW1nIHtfX2FuaW1hdGlvbjp6b29tLWluIFwiICsgKGEuZSArIGwpICsgXCJtcyAxIGFsdGVybmF0ZSBib3RoO31cIik7XG4gICAgICAgIFYoKTtcbiAgICAgICAgcShcIiB1bCBsaSAubnMtaW1nIHtiYWNrZ3JvdW5kLXNpemU6Y292ZXI7fVwiKVxuICAgIH0sIFYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHEoXCIgbGkge19fdHJhbnNpdGlvbjpvcGFjaXR5IFwiICsgbCArIFwibXM7fVwiKVxuICAgIH0sIERiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaCkgdmFyIGIgPSBcIjEwMCVcIjsgZWxzZSBiID0gKHNjcmVlbi53aWR0aCAvICgxLjUgKiBnW3ldLm9mZnNldFdpZHRoKSArIC41KSAqIDEwMCArIFwiJVwiO1xuICAgICAgICB2YXIgYyA9IGwgKyBcIm1zIGVhc2UgYm90aFwiO1xuICAgICAgICBpZiAoYS5jICE9IFwic2xpZGVcIiAmJiAhaCAmJiBsID4gMjk0KSBjID0gXCIyOTRtcyBlYXNlIGJvdGhcIjtcbiAgICAgICAgdmFyIGsgPSBpLnAgKyBcInRyYW5zZm9ybTp0cmFuc2xhdGVcIiArIChoID8gXCJZXCIgOiBcIlhcIikgKyBcIihcIiwgZiA9IGsgKyBiICsgXCIpXCIsIGUgPSBrICsgXCItXCIgKyBiICsgXCIpXCIsXG4gICAgICAgICAgICBkID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYSA/IGIgPyBmIDogZSA6IGsgKyBcIjApXCJcbiAgICAgICAgICAgIH0sIGogPSBmdW5jdGlvbiAoZywgYywgYSwgYikge1xuICAgICAgICAgICAgICAgIEcoXCJzbC1jbFwiICsgYSwgZChiLCAxKSwgZSwgXCJsaS5zbC1jbFwiICsgYSwgYyk7XG4gICAgICAgICAgICAgICAgRyhcInNsLWNyXCIgKyBhLCBkKGIsIDApLCBmLCBcImxpLnNsLWNyXCIgKyBhLCBjKTtcbiAgICAgICAgICAgICAgICBHKFwic2wtc2xcIiArIGEsIGYsIGQoYiwgMCksIFwibGkuc2wtc2xcIiArIGEsIGMpO1xuICAgICAgICAgICAgICAgIEcoXCJzbC1zclwiICsgYSwgZSwgZChiLCAxKSwgXCJsaS5zbC1zclwiICsgYSwgYylcbiAgICAgICAgICAgIH07XG4gICAgICAgIGooYiwgYywgXCJcIiwgMCk7XG4gICAgICAgIGooXCIxMDAlXCIsIGMsIFwiMlwiLCAwKTtcbiAgICAgICAgaihiLCBjLCBcIjNcIiwgMSk7XG4gICAgICAgIHEoXCIgbGlbY2xhc3MqPSdzbC0nXSB7b3BhY2l0eToxO19fdHJhbnNpdGlvbjpvcGFjaXR5IDBtczt9XCIpXG4gICAgfSwgZmIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHEoXCIuZnVsbHNjcmVlbnt6LWluZGV4OjIxNDc0ODE5NjM7dG9wOjA7bGVmdDowO2JvdHRvbTowO3JpZ2h0OjA7d2lkdGg6MTAwJTtwb3NpdGlvbjpmaXhlZDt0ZXh0LWFsaWduOmNlbnRlcjtvdmVyZmxvdy15OmF1dG87fVwiKTtcbiAgICAgICAgcShcIi5mdWxsc2NyZWVuOmJlZm9yZXtjb250ZW50OicnO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtoZWlnaHQ6MTAwJTt9XCIpO1xuICAgICAgICBxKFwiIC5mcy1pY29ue2N1cnNvcjpwb2ludGVyO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6OTk5OTk7fVwiKTtcbiAgICAgICAgcShcIi5mdWxsc2NyZWVuIC5mcy1pY29ue3Bvc2l0aW9uOmZpeGVkO3RvcDo2cHg7cmlnaHQ6NnB4O31cIik7XG4gICAgICAgIHEoXCIuZnVsbHNjcmVlbj5kaXZ7ZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246bWlkZGxlO3dpZHRoOjk1JTt9XCIpO1xuICAgICAgICB2YXIgYSA9IFwiQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjc2N3B4KSB7ZGl2I1wiICsgdCArIFwiLmZ1bGxzY3JlZW4+ZGl2e3dpZHRoOjEwMCU7fX1cIjtcbiAgICAgICAgaS5hLmluc2VydFJ1bGUoYSwgMClcbiAgICB9LCBMYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgRyhcIm1jU3Bpbm5lclwiLCBcInRyYW5zZm9ybTpyb3RhdGUoMGRlZylcIiwgXCJ0cmFuc2Zvcm06cm90YXRlKDM2MGRlZylcIiwgXCJsaS5sb2FkaW5nOjphZnRlclwiLCBcIi42cyBsaW5lYXIgaW5maW5pdGVcIik7XG4gICAgICAgIHEoXCIgbGkubG9hZGluZzo6YWZ0ZXJ7Y29udGVudDonJztkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjMwcHg7aGVpZ2h0OjMwcHg7Ym9yZGVyLXdpZHRoOjRweDtib3JkZXItY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuOCk7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci10b3AtY29sb3I6YmxhY2s7Ym9yZGVyLXJpZ2h0LWNvbG9yOnJnYmEoMCwwLDAsLjgpO2JvcmRlci1yYWRpdXM6NTAlO21hcmdpbjphdXRvO2xlZnQ6MDtyaWdodDowO3RvcDowO2JvdHRvbTowO31cIilcbiAgICB9LCBCYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGEgPSBcIiNcIiArIHQgKyBcIi1wcmV2OmFmdGVyXCIsXG4gICAgICAgICAgICBiID0gXCJjb250ZW50Oic8Jztmb250LXNpemU6MjBweDtmb250LXdlaWdodDpib2xkO2NvbG9yOiNmZmY7cG9zaXRpb246YWJzb2x1dGU7bGVmdDoxMHB4O1wiO1xuICAgICAgICBpLmEuYWRkUnVsZShhLCBiLCAwKTtcbiAgICAgICAgaS5hLmFkZFJ1bGUoYS5yZXBsYWNlKFwicHJldlwiLCBcIm5leHRcIiksIGIucmVwbGFjZShcIjxcIiwgXCI+XCIpLnJlcGxhY2UoXCJsZWZ0XCIsIFwicmlnaHRcIiksIDApXG4gICAgfSwgY2IgPSBmdW5jdGlvbiAoYikge1xuICAgICAgICB2YXIgYSA9IHI7XG4gICAgICAgIHJldHVybiBiID49IDAgPyBiICUgYSA6IChhICsgYiAlIGEpICUgYVxuICAgIH0sIHAgPSBudWxsLCBnLCBqLCBoLCBPLCBiID0gW10sIFQsIGhiLCBiYiwgdywgVSwgTSwgeGIsIHogPSBmYWxzZSwgYyA9IDAsIHIgPSAwLCBsLCBVYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiAhYS5jb21wbGV0ZSA/IDAgOiBhLndpZHRoID09PSAwID8gMCA6IDFcbiAgICB9LCBqYiA9IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIGlmIChiLnJUKSB7XG4gICAgICAgICAgICBnW2RdW0xdID0gYi5yVDtcbiAgICAgICAgICAgIGlmIChhLmcgIT0gXCJhdXRvXCIpIGIuclQgPSAwXG4gICAgICAgIH1cbiAgICB9LCBxYiA9IGZ1bmN0aW9uIChlLCBjLCBiKSB7XG4gICAgICAgIGlmICghai52UiAmJiAoYS5nID09IFwiYXV0b1wiIHx8IGdbZF1bTF0gPT0gXCI1MC4xMjM0JVwiKSkge1xuICAgICAgICAgICAgYi5yVCA9IGMgLyBlICogMTAwICsgXCIlXCI7XG4gICAgICAgICAgICBnW2RdW0xdID09IFwiNTAuMTIzNCVcIiAmJiBqYihiKVxuICAgICAgICB9XG4gICAgfSwgUGIgPSBmdW5jdGlvbiAoYiwgbikge1xuICAgICAgICBpZiAoYi5sTCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgcCA9IHNjcmVlbi53aWR0aCwgbCA9IGRiKGIsIFwiKlwiKTtcbiAgICAgICAgICAgIGlmIChsW2VdKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZyA9IFtdLCBhLCBpLCBoLCBjID0gMDsgYyA8IGxbZV07IGMrKykgSyhsW2NdLCBcIm5zLWltZ1wiKSAmJiBnLnB1c2gobFtjXSk7XG4gICAgICAgICAgICAgICAgaWYgKGdbZV0pIGEgPSBnWzBdOyBlbHNlIGIubEwgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChnW2VdID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMTsgYyA8IGdbZV07IGMrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IEUoZ1tjXSwgXCJkYXRhLXNjcmVlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGguc3BsaXQoXCItXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoW2VdID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhbMV0gPT0gXCJtYXhcIikgaFsxXSA9IDk5OTk5OTk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID49IGhbMF0gJiYgcCA8PSBoWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZ1tjXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBnW2VdOyBjKyspIGlmIChnW2NdICE9PSBhKSBnW2NdW2RdLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYSkge1xuICAgICAgICAgICAgICAgICAgICBiLmxMID0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEudGFnTmFtZSA9PSBcIkFcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IEUoYSwgXCJocmVmXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeChhLCBcImNsaWNrXCIsIHJiKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEudGFnTmFtZSA9PSBcIklNR1wiKSBpID0gRShhLCBcInNyY1wiKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgayA9IGFbZF1bUl07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayAmJiBrLmluZGV4T2YoXCJ1cmwoXCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IGsuc3Vic3RyaW5nKDQsIGtbZV0gLSAxKS5yZXBsYWNlKC9bXFwnXFxcIl0vZywgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoRShhLCBcImRhdGEtZnMtaW1hZ2VcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIubklzID0gW2ksIEUoYSwgXCJkYXRhLWZzLWltYWdlXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChLKGosIFwiZnVsbHNjcmVlblwiKSkgaSA9IGIubklzWzFdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGkpIGIubkkgPSBhOyBlbHNlIGIubEwgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IG5ldyBJbWFnZTtcbiAgICAgICAgICAgICAgICAgICAgZi5vbmxvYWQgPSBmLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5tQSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLndpZHRoICYmIGFbRl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEubUEudGFnTmFtZSA9PSBcIkFcIikgYS5tQVtkXVtSXSA9IFwidXJsKCdcIiArIGEuc3JjICsgXCInKVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxYihhLm5hdHVyYWxXaWR0aCB8fCBhLndpZHRoLCBhLm5hdHVyYWxIZWlnaHQgfHwgYVtGXSwgYS5tTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEMoYS5tTCwgXCJsb2FkaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuaXMxICYmIFkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZi5zcmMgPSBpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoVWIoZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEMoYiwgXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcWIoZi5uYXR1cmFsV2lkdGgsIGYubmF0dXJhbEhlaWdodCwgYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBuID09PSAxICYmIFkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLnRhZ05hbWUgPT0gXCJBXCIpIGFbZF1bUl0gPSBcInVybCgnXCIgKyBpICsgXCInKVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZiA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYuaXMxID0gbiA9PT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYubUEgPSBhO1xuICAgICAgICAgICAgICAgICAgICAgICAgZi5tTCA9IGI7XG4gICAgICAgICAgICAgICAgICAgICAgICBvKGIsIFwibG9hZGluZ1wiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGIubEwgPSAwXG4gICAgICAgIH1cbiAgICAgICAgYi5sTCA9PT0gMCAmJiBuID09PSAxICYmIFkoKVxuICAgIH0sIGxiID0gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgZm9yICh2YXIgZSA9IGEgPT09IDEgPyBjIDogYyAtIDEsIGQgPSBlOyBkIDwgZSArIGE7IGQrKykgUGIoYltjYihkKV0sIGEpO1xuICAgICAgICBhID09IDEgJiYgSmIoKVxuICAgIH0sIGtiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocCkgbnNWaWRlb1BsdWdpbi5jYWxsKHApOyBlbHNlIG0oa2IsIDMwMClcbiAgICB9LCBZID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBtKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG4oYywgOSlcbiAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgeCh3aW5kb3csIFwicmVzaXplXCIsIE5iKTtcbiAgICAgICAgeChrLCBcInZpc2liaWxpdHljaGFuZ2VcIiwgWGIpXG4gICAgfSwgbWIgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgICBpZiAocCAmJiBwLnBsYXlBdXRvVmlkZW8pIHAucGxheUF1dG9WaWRlbyhhKTsgZWxzZSBtKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG1iKGEpXG4gICAgICAgIH0sIDIwMClcbiAgICB9LCBOYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHlwZW9mIG5zVmlkZW9QbHVnaW4gPT0gXCJmdW5jdGlvblwiICYmIHAuc2V0SWZyYW1lU2l6ZSgpO1xuICAgICAgICBpZiAoai52UikgaltkXVtGXSA9IGoudlIgKiBrW1BdLmNsaWVudEhlaWdodCAvIDEwMCArIFwicHhcIlxuICAgIH0sIEpiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAobmV3IEZ1bmN0aW9uKFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBcImVcIiwgXCJmXCIsIFwiZ1wiLCBcImhcIiwgXCJpXCIsIFwialwiLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgZm9yICh2YXIgYiA9IFtdLCBhID0gMCwgZCA9IGNbZV07IGEgPCBkOyBhKyspIGJbYltlXV0gPSBTdHJpbmdbbmJdKGNbYWJdKGEpIC0gNCk7XG4gICAgICAgICAgICByZXR1cm4gYi5qb2luKFwiXCIpXG4gICAgICAgIH0oXCJ6ZXYkTkFqeXJneG1zcix8MH0tf3pldiRlQWp5cmd4bXNyLH4tf3pldiRnQX5fZmEsNC0yeHNXeHZtcmssLT92aXh5dnIkZzJ3eWZ3eHYsZzJwaXJreGwxNS1cXHUwMDgxP3ZpeHl2ciR8L31fNWEvZSx9XzRhLS9lLH1fNmEtL2UsfV81YS1cXHUwMDgxME9BanlyZ3htc3IsfDB9LX92aXh5dnIkfDJnbGV2RXgsfS1cXHUwMDgxMHFBZV9rLCtzcGpsdXpsKy1hXFx1MDA4MFxcdTAwODArNTorMHJBdGV2d2lNcngsTyxxMDUtLVxcdTAwODBcXHUwMDgwOjB6QW1fZXhzZkNleHNmLCteSz14XVtweSstPmssK2t2dGhwdSstYVxcdTAwODBcXHUwMDgwK3A1eCswc0F6MnZpdHBlZ2ksaV9yMTZhMGxfcjE2YS0yd3RwbXgsKystP2oydEFoLGctP21qLHElQU4sK2YrL3Iwcy0tf3pldiR2QVFleGwydmVyaHNxLC0wdzB5QWssK1VwdXFoJ1pzcGtseSd7eXBocyd9bHl6cHZ1Ky0/bWosdkAyNy13QWdfbmFfbmEydHZpem1zeXdXbWZwbXJrP21qLHZAMjoqKiV3LX93QWdfbmFfbmFfbmE/bWosdyoqdzJyaXx4V21mcG1yay13QXcycml8eFdtZnBtcmtcXHUwMDgxbWosdkIyPS13QW0yZnNofT9taixPLHowNC1BQStwKyoqTyx6MHoycGlya3hsMTUtQUEreCstd0E0P21qLHctd19uYTJtcndpdnhGaWpzdmksbV9rLCtqeWxoe2xbbH97VXZrbCstYSx5LTB3LVxcdTAwODFcIikpKS5hcHBseSh0aGlzLCBbYSwgYWIsIGcsIFRiLCB6YiwgaSwgeWIsIEFiLCBkb2N1bWVudCwgeV0pXG4gICAgfSwgbiA9IGZ1bmN0aW9uIChjLCBkKSB7XG4gICAgICAgIGlmIChiW2VdID09IDEgJiYgYyA+IDApIHJldHVybjtcbiAgICAgICAgYS5wYXVzZU9uSG92ZXIgJiYgY2xlYXJUaW1lb3V0KGJiKTtcbiAgICAgICAgcCAmJiBwLnVubG9hZFBsYXllciAmJiBwLnVubG9hZFBsYXllcigpO1xuICAgICAgICB0YihjLCBkKVxuICAgIH0sIFEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHogPSAhejtcbiAgICAgICAgeGJbZl0gPSB6ID8gXCJwYXVzZWRcIiA6IFwiXCI7XG4gICAgICAgICF6ICYmIG4oYyArIDEsIDApO1xuICAgICAgICByZXR1cm4gelxuICAgIH0sIFhiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYS5kKSBpZiAoeikge1xuICAgICAgICAgICAgaWYgKHAuaWZyYW1lICYmIHAuaWZyYW1lW3ldW2RdW0FdID09IFwiMjE0NzQ4MTk2NFwiKSB7XG4gICAgICAgICAgICAgICAgeiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbShRLCAyMjAwKVxuICAgICAgICB9IGVsc2UgUSgpXG4gICAgfSwgTWIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBOKCk7XG4gICAgICAgIGJbY2IoYyAtIGUpXVtkXVtBXSA9IC0xO1xuICAgICAgICB2YXIgYSA9IGJbY11bZF07XG4gICAgICAgIGEudHJhbnNpdGlvbiA9IGggPyBcInRvcFwiIDogXCJsZWZ0IC4xNnNcIjtcbiAgICAgICAgYVtoID8gXCJ0b3BcIiA6IFwibGVmdFwiXSA9IC0xNCAqIGUgKyBcIiVcIjtcbiAgICAgICAgbShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhW2ggPyBcInRvcFwiIDogXCJsZWZ0XCJdID0gXCIwJVwiO1xuICAgICAgICAgICAgbShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYS50cmFuc2l0aW9uID0gXCJcIlxuICAgICAgICAgICAgfSwgMTYwKTtcbiAgICAgICAgICAgIHdiKClcbiAgICAgICAgfSwgMTYwKVxuICAgIH0sIGViID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IHRoaXMuaWQuaW5kZXhPZihcIi1wcmV2XCIpID09IC0xID8gMSA6IC0xO1xuICAgICAgICBpZiAodGhpc1tmXSA9PSBcImRpc2FibGVkXCIgJiYgTykgTWIoYSk7IGVsc2UgbihjICsgYSwgMSlcbiAgICB9LCBOID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoVCk7XG4gICAgICAgIFQgPSBudWxsO1xuICAgICAgICBjbGVhclRpbWVvdXQoaGIpXG4gICAgfSwgd2IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChhLmQpIFQgPSBtKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG4oYyArIDEsIDApXG4gICAgICAgIH0sIGEuZSlcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSWIoYikge1xuICAgICAgICBpZiAoIWIpIGIgPSB3aW5kb3cuZXZlbnQ7XG4gICAgICAgIHZhciBhID0gYi5rZXlDb2RlO1xuICAgICAgICAoYSA9PSAzNyB8fCBoICYmIGEgPT0gMzgpICYmIG4oYyAtIDEsIDEpO1xuICAgICAgICAoYSA9PSAzOSB8fCBoICYmIGEgPT0gNDApICYmIG4oYyArIDEsIDEpXG4gICAgfVxuXG4gICAgdmFyIHViID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBnID0gZjtcbiAgICAgICAgS2IoKTtcbiAgICAgICAgU2IoYS5hKTtcbiAgICAgICAgaWYgKGEucGF1c2VPbkhvdmVyICYmIGEuZCkge1xuICAgICAgICAgICAgZy5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYmIpO1xuICAgICAgICAgICAgICAgIE4oKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGcub25tb3VzZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5pZnJhbWUgJiYgZS5pZnJhbWVbeV1bZF1bQV0gPT0gXCIyMTQ3NDgxOTY0XCIpIHJldHVybjtcbiAgICAgICAgICAgICAgICBiYiA9IG0oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBuKGMgKyAxLCAxKVxuICAgICAgICAgICAgICAgIH0sIDJlMylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYS5jICE9IFwic2xpZGVcIikgZ1tkXS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIGUuZCgpO1xuICAgICAgICBlLmMoKTtcbiAgICAgICAgdHlwZW9mIG5zVmlkZW9QbHVnaW4gPT0gXCJmdW5jdGlvblwiICYmIGtiKCk7XG4gICAgICAgIHIgPiAxICYmIEViKCk7XG4gICAgICAgIGUuYWRkTmF2cygpO1xuICAgICAgICBsYigxKTtcbiAgICAgICAgaWYgKGkuYSkge1xuICAgICAgICAgICAgdmFyIGogPSBrLmFsbCAmJiAhYXRvYjtcbiAgICAgICAgICAgIGlmIChpLmEuaW5zZXJ0UnVsZSAmJiAhaikge1xuICAgICAgICAgICAgICAgIGlmIChhLmMgPT0gXCJmYWRlXCIpIFYoKTsgZWxzZSBpZiAoYS5jID09IFwiem9vbVwiKSBGYigpOyBlbHNlIGEuYyA9PSBcImtiXCIgJiYgSGIoKTtcbiAgICAgICAgICAgICAgICBPICYmIERiKCk7XG4gICAgICAgICAgICAgICAgRCAmJiBELmluZGV4T2YoXCJvaW50ZXJcIikgIT0gLTEgJiYgcShcIiBVTCB7LW1zLXRvdWNoLWFjdGlvbjpwYW4tXCIgKyAoaCA/IFwieFwiIDogXCJ5XCIpICsgXCI7dG91Y2gtYWN0aW9uOnBhbi1cIiArIChoID8gXCJ4XCIgOiBcInlcIikgKyBcIjt9XCIpO1xuICAgICAgICAgICAgICAgIGZiKCk7XG4gICAgICAgICAgICAgICAgTGIoKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChrLmFsbCAmJiAha1t1XSkge1xuICAgICAgICAgICAgICAgIEJiKCk7XG4gICAgICAgICAgICAgICAgaS5hLmFkZFJ1bGUoXCJkaXYuZnMtaWNvblwiLCBcImRpc3BsYXk6bm9uZSFpbXBvcnRhbnQ7XCIsIDApO1xuICAgICAgICAgICAgICAgIGkuYS5hZGRSdWxlKFwiI1wiICsgdCArIFwiIGxpXCIsIFwidmlzaWJpbGl0eTpoaWRkZW47XCIsIDApO1xuICAgICAgICAgICAgICAgIGkuYS5hZGRSdWxlKFwiI1wiICsgdCArIFwiIGxpW2NsYXNzKj0nc2wtcyddXCIsIFwidmlzaWJpbGl0eTp2aXNpYmxlO1wiLCAwKTtcbiAgICAgICAgICAgICAgICBpLmEuYWRkUnVsZShcIiNcIiArIHQgKyBcIiBsaVtjbGFzcyo9J25zLXNob3cnXVwiLCBcInZpc2liaWxpdHk6dmlzaWJsZTtcIiwgMClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmIoKTtcbiAgICAgICAgICAgICAgICBxKFwiIGxpW2NsYXNzKj0nc2wtcyddIHtvcGFjaXR5OjE7fVwiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIChhLmMgPT0gXCJ6b29tXCIgfHwgYS5jID09IFwia2JcIikgJiYgYlswXS5uSSAmJiBpYihiWzBdLm5JLCAwLCBiWzBdLmRMKTtcbiAgICAgICAgbyhiWzBdLCBcIm5zLXNob3cgc2wtMFwiKTtcbiAgICAgICAgYS5rZXlib2FyZE5hdiAmJiByID4gMSAmJiB4KGssIFwia2V5ZG93blwiLCBJYilcbiAgICB9LCBLYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYS5jID0gYS50cmFuc2l0aW9uVHlwZTtcbiAgICAgICAgYS5hID0gYS5saWNlbnNlO1xuICAgICAgICBhLmQgPSBhLmF1dG9BZHZhbmNlO1xuICAgICAgICBhLmUgPSBhLmRlbGF5O1xuICAgICAgICBhLmcgPSBhLmFzcGVjdFJhdGlvO1xuICAgICAgICBoID0gYS5jLmluZGV4T2YoXCJ2ZXJ0aVwiKSAhPSAtMTtcbiAgICAgICAgaWYgKGEuYy5pbmRleE9mKFwia2VuYnVybnNcIikgIT0gLTEpIHtcbiAgICAgICAgICAgIHZhciBjID0gYS5jLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgIGEuYyA9IFwia2JcIjtcbiAgICAgICAgICAgIGEuc2NhbGUgPSAxLjI7XG4gICAgICAgICAgICBpZiAoY1tlXSA+IDEpIGEuc2NhbGUgPSBwYXJzZUZsb2F0KGNbMV0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEucGF1c2VPbkhvdmVyKSBhLm5hdmlnYXRlQnlUYXAgPSAwO1xuICAgICAgICBpZiAodHlwZW9mIGEubSA9PSBcInVuZGVmaW5lZFwiKSBhLm0gPSAxO1xuICAgICAgICBpZiAodHlwZW9mIGEubiA9PSBcInVuZGVmaW5lZFwiKSBhLm4gPSAxO1xuICAgICAgICBPID0gYS5jID09IFwic2xpZGVcIiB8fCBoIHx8IGEubTtcbiAgICAgICAgaWYgKGEuYyA9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgYS5jID0gXCJmYWRlXCI7XG4gICAgICAgICAgICBhLnRyYW5zaXRpb25TcGVlZCA9IDBcbiAgICAgICAgfVxuICAgICAgICB2YXIgYiA9IGEuZTtcbiAgICAgICAgaWYgKGIgPT09IFwiZGVmYXVsdFwiKSBzd2l0Y2ggKGEuYykge1xuICAgICAgICAgICAgY2FzZVwia2JcIjpcbiAgICAgICAgICAgIGNhc2VcInpvb21cIjpcbiAgICAgICAgICAgICAgICBiID0gNmUzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBiID0gMzUwMFxuICAgICAgICB9XG4gICAgICAgIGwgPSBhLnRyYW5zaXRpb25TcGVlZDtcbiAgICAgICAgaWYgKGwgPT09IFwiZGVmYXVsdFwiKSBzd2l0Y2ggKGEuYykge1xuICAgICAgICAgICAgY2FzZVwia2JcIjpcbiAgICAgICAgICAgIGNhc2VcInpvb21cIjpcbiAgICAgICAgICAgICAgICBsID0gMTUwMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2VcImZhZGVcIjpcbiAgICAgICAgICAgICAgICBsID0gMmUzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBsID0gMzAwXG4gICAgICAgIH1cbiAgICAgICAgYiA9IGIgKiAxO1xuICAgICAgICBsID0gbCAqIDE7XG4gICAgICAgIGlmIChsID4gYikgYiA9IGw7XG4gICAgICAgIGEuZSA9IGJcbiAgICB9LCBaYiA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIGlmICghYSB8fCBhID09IFwiZGVmYXVsdFwiKSBhID0gYjtcbiAgICAgICAgcmV0dXJuIGFcbiAgICB9LCBpYiA9IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZhciBsID0gSigpLCBmID0gSigpLCBnID0gSigpLCBoID0gSigpLCBqID0gbCA8IC41ID8gXCJhbHRlcm5hdGVcIiA6IFwiYWx0ZXJuYXRlLXJldmVyc2VcIjtcbiAgICAgICAgaWYgKGYgPCAuMykgdmFyIGMgPSBcImxlZnRcIjsgZWxzZSBpZiAoZiA8IC42KSBjID0gXCJjZW50ZXJcIjsgZWxzZSBjID0gXCJyaWdodFwiO1xuICAgICAgICBpZiAoZyA8IC40NSkgdmFyIGUgPSBcInRvcFwiOyBlbHNlIGlmIChnIDwgLjU1KSBlID0gXCJjZW50ZXJcIjsgZWxzZSBlID0gXCJib3R0b21cIjtcbiAgICAgICAgaWYgKGggPCAuMikgdmFyIGkgPSBcImxpbmVhclwiOyBlbHNlIGkgPSBoIDwgLjYgPyBcImN1YmljLWJlemllciguOTQsLjA0LC45NCwuNDkpXCIgOiBcImN1YmljLWJlemllciguOTMsLjIsLjg3LC41MilcIjtcbiAgICAgICAgdmFyIGsgPSBjICsgXCIgXCIgKyBlO1xuICAgICAgICBiW2RdLldlYmtpdFRyYW5zZm9ybU9yaWdpbiA9IGJbZF0udHJhbnNmb3JtT3JpZ2luID0gaztcbiAgICAgICAgaWYgKGEuYyA9PSBcImtiXCIpIHtcbiAgICAgICAgICAgIGJbZF0uV2Via2l0QW5pbWF0aW9uRGlyZWN0aW9uID0gYltkXS5hbmltYXRpb25EaXJlY3Rpb24gPSBqO1xuICAgICAgICAgICAgYltkXS5XZWJraXRBbmltYXRpb25UaW1pbmdGdW5jdGlvbiA9IGJbZF0uYW5pbWF0aW9uVGltaW5nRnVuY3Rpb24gPSBpXG4gICAgICAgIH1cbiAgICB9LCBDYiA9IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIGlmIChNKSB7XG4gICAgICAgICAgICBVLmlubmVySFRNTCA9IE0uaW5uZXJIVE1MID0gXCI8ZGl2PlwiICsgKGIgKyAxKSArIFwiICYjODcyNTsgXCIgKyByICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgICAgIFVbZl0gPSBiID8gXCJcIiA6IFwiZGlzYWJsZWRcIjtcbiAgICAgICAgICAgIE1bZl0gPSBiID09IHIgLSAxID8gXCJkaXNhYmxlZFwiIDogXCJcIjtcbiAgICAgICAgICAgIGlmICghYS5uKSBVW2ZdID0gTVtmXSA9IFwiXCI7XG4gICAgICAgICAgICBpZiAod1tlXSkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gd1tlXTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoYy0tKSB3W2NdW2ZdID0gXCJcIjtcbiAgICAgICAgICAgICAgICB3W2JdW2ZdID0gXCJhY3RpdmVcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgWCA9IGZ1bmN0aW9uIChmLCBhLCBlLCBjKSB7XG4gICAgICAgIChjICYmIGEgPCBlIHx8ICFjICYmIGEgPiBlKSAmJiBtKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJbYV1bZF1bQV0gPSAxO1xuICAgICAgICAgICAgbyhiW2FdLCBcIm5zLXNob3dcIik7XG4gICAgICAgICAgICBvKGJbYV0sIFwic2wtY1wiICsgKGMgPyBcImwzXCIgOiBcInIzXCIpKTtcbiAgICAgICAgICAgIFgoZiwgYSArIChjID8gMSA6IC0xKSwgZSwgYylcbiAgICAgICAgfSwgZilcbiAgICB9LCBvYiA9IGZ1bmN0aW9uIChlLCBnLCBmLCBhLCBjKSB7XG4gICAgICAgIHZhciBoID0gMjAwICogKGUgLSAxKSAvIGU7XG4gICAgICAgIG0oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYlthXVtkXVtBXSA9IDE7XG4gICAgICAgICAgICBvKGJbYV0sIFwibnMtc2hvd1wiKTtcbiAgICAgICAgICAgIG8oYlthXSwgXCJzbC1zXCIgKyAoYyA/IFwibFwiIDogXCJyXCIpICsgZylcbiAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgaGIgPSBtKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGggPSBjID8gZiA6IGEgKyAxLCBpID0gYyA/IGEgOiBmICsgMSwgZyA9IGg7IGcgPCBpOyBnKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGJbZ107XG4gICAgICAgICAgICAgICAgZ2IoZSk7XG4gICAgICAgICAgICAgICAgQyhlLCBcIm5zLXNob3dcIik7XG4gICAgICAgICAgICAgICAgZVtkXVtBXSA9IC0xXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGwpXG4gICAgfSwgdGIgPSBmdW5jdGlvbiAoZSwgcCkge1xuICAgICAgICBlID0gY2IoZSk7XG4gICAgICAgIGlmICghcCAmJiAoeiB8fCBlID09IGMpKSByZXR1cm47XG4gICAgICAgIE4oKTtcbiAgICAgICAgYltlXVtkXVtoID8gXCJ0b3BcIiA6IFwibGVmdFwiXSA9IFwiMFwiO1xuICAgICAgICBmb3IgKHZhciBrID0gMCwgdSA9IHI7IGsgPCB1OyBrKyspIHtcbiAgICAgICAgICAgIGJba11bZF1bQV0gPSBrID09PSBlID8gMSA6IGsgPT09IGMgPyAwIDogLTE7XG4gICAgICAgICAgICBpZiAoayAhPSBlKSBpZiAoayA9PSBjICYmIChhLmMgPT0gXCJ6b29tXCIgfHwgYS5jID09IFwia2JcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGs7XG4gICAgICAgICAgICAgICAgbShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIEMoYlt0XSwgXCJucy1zaG93XCIpXG4gICAgICAgICAgICAgICAgfSwgbClcbiAgICAgICAgICAgIH0gZWxzZSBDKGJba10sIFwibnMtc2hvd1wiKTtcbiAgICAgICAgICAgIE8gJiYgZ2IoYltrXSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocCA9PSA5KSBDKGJbMF0sIFwic2wtMFwiKTsgZWxzZSBpZiAoYS5jID09IFwic2xpZGVcIiB8fCBoIHx8IGEubSAmJiBwKSB7XG4gICAgICAgICAgICAhcCAmJiBvKGJbZV0sIFwibnMtc2hvd1wiKTtcbiAgICAgICAgICAgIHZhciBuID0gIWggJiYgai5vZmZzZXRXaWR0aCA9PSBnW3ldLm9mZnNldFdpZHRoID8gXCIyXCIgOiBcIlwiLCBmID0gZSAtIGM7XG4gICAgICAgICAgICBpZiAoIWEucmV3aW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlICYmIGMgPT0gciAtIDEpIGYgPSAxO1xuICAgICAgICAgICAgICAgIGlmICghYyAmJiBlICE9IDEgJiYgZSA9PSByIC0gMSkgZiA9IC0xXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZiA9PSAxKSB7XG4gICAgICAgICAgICAgICAgbyhiW2NdLCBcInNsLWNsXCIgKyBuKTtcbiAgICAgICAgICAgICAgICBvKGJbZV0sIFwic2wtc2xcIiArIG4pXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGYgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBvKGJbY10sIFwic2wtY3JcIiArIG4pO1xuICAgICAgICAgICAgICAgIG8oYltlXSwgXCJzbC1zclwiICsgbilcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZiA+IDEpIHtcbiAgICAgICAgICAgICAgICBvKGJbY10sIFwic2wtY2xcIiArIG4pO1xuICAgICAgICAgICAgICAgIFgoMjAwIC8gZiwgYyArIDEsIGUsIDEpO1xuICAgICAgICAgICAgICAgIG9iKGYsIG4sIGMgKyAxLCBlLCAxKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChmIDwgLTEpIHtcbiAgICAgICAgICAgICAgICBvKGJbY10sIFwic2wtY3JcIiArIG4pO1xuICAgICAgICAgICAgICAgIGJbZV1bZF1bQV0gPSAtMTtcbiAgICAgICAgICAgICAgICBYKDIwMCAvIC1mLCBjIC0gMSwgZSwgMCk7XG4gICAgICAgICAgICAgICAgb2IoLWYsIG4sIGMgLSAxLCBlLCAwKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbyhiW2VdLCBcIm5zLXNob3dcIik7XG4gICAgICAgICAgICAoYS5jID09IFwiem9vbVwiIHx8IGEuYyA9PSBcImtiXCIpICYmIGJbZV0ubkkgJiYgaS5hLmluc2VydFJ1bGUgJiYgaWIoYltlXS5uSSwgZSwgYltlXS5kTClcbiAgICAgICAgfVxuICAgICAgICBDYihlKTtcbiAgICAgICAgdmFyIHEgPSBjO1xuICAgICAgICBjID0gZTtcbiAgICAgICAgbGIoNCk7XG4gICAgICAgICFqLnZSICYmIGpiKGJbZV0pO1xuICAgICAgICBpZiAoYS5kKSB7XG4gICAgICAgICAgICB2YXIgcyA9IE1hdGguYWJzKGYpID4gMSA/IDIwMCA6IDA7XG4gICAgICAgICAgICBUID0gbShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGIoZSArIDEsIDApXG4gICAgICAgICAgICB9LCBiW2VdLmRMICsgcylcbiAgICAgICAgfVxuICAgICAgICBiW2VdLnBsYXllciAmJiBtYihiW2VdKTtcbiAgICAgICAgYS5iZWZvcmUgJiYgYS5iZWZvcmUocSwgZSwgcCA9PSA5ID8gZmFsc2UgOiBwKVxuICAgIH07XG4gICAgdWIucHJvdG90eXBlID0ge1xuICAgICAgICBiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZiA9IGcuY2hpbGRyZW4sIGQ7XG4gICAgICAgICAgICByID0gZltlXTtcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBoID0gZltlXTsgYyA8IGg7IGMrKykge1xuICAgICAgICAgICAgICAgIGJbY10gPSBmW2NdO1xuICAgICAgICAgICAgICAgIGJbY10uaXggPSBjO1xuICAgICAgICAgICAgICAgIGQgPSBFKGJbY10sIFwiZGF0YS1kZWxheVwiKTtcbiAgICAgICAgICAgICAgICBiW2NdLmRMID0gZCA/IHBhcnNlSW50KGQpIDogYS5lXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFFiKGcpO1xuICAgICAgICAgICAgdGhpcy5iKCk7XG4gICAgICAgICAgICB2YXIgZCA9IDA7XG4gICAgICAgICAgICBpZiAoYS5zaHVmZmxlKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IFdiKGIpLCBjID0gMCwgayA9IGlbZV07IGMgPCBrOyBjKyspIGcuYXBwZW5kQ2hpbGQoaVtjXSk7XG4gICAgICAgICAgICAgICAgZCA9IDFcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5zdGFydFNsaWRlSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gYS5zdGFydFNsaWRlSW5kZXggJSBiW2VdLCBjID0gMDsgYyA8IGo7IGMrKykgZy5hcHBlbmRDaGlsZChiW2NdKTtcbiAgICAgICAgICAgICAgICBkID0gMVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZCAmJiB0aGlzLmIoKTtcbiAgICAgICAgICAgIGlmIChhLmMgIT0gXCJzbGlkZVwiICYmICFoICYmIGEubSkge1xuICAgICAgICAgICAgICAgIHZhciBmID0gcjtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZi0tKSB4KGJbZl0sIFwiYW5pbWF0aW9uZW5kXCIsIEdiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoYS5nLmluZGV4T2YoXCI6XCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIGIgPSBhLmcuc3BsaXQoXCI6XCIpO1xuICAgICAgICAgICAgICAgIGlmIChiWzFdLmluZGV4T2YoXCIlXCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGoudlIgPSBwYXJzZUludChiWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgaltkXVtGXSA9IGoudlIgKiBrW1BdLmNsaWVudEhlaWdodCAvIDEwMCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgZ1tkXVtGXSA9IGdbeV1bZF1bRl0gPSBcIjEwMCVcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjID0gYlsxXSAvIGJbMF07XG4gICAgICAgICAgICAgICAgZ1tkXVtMXSA9IGMgKiAxMDAgKyBcIiVcIlxuICAgICAgICAgICAgfSBlbHNlIGdbZF1bTF0gPSBcIjUwLjEyMzQlXCI7XG4gICAgICAgICAgICBnW2RdW0ZdID0gXCIwXCJcbiAgICAgICAgfSwgZTogZnVuY3Rpb24gKGIsIGQpIHtcbiAgICAgICAgICAgIHZhciBjID0gdCArIGIsIGEgPSBrLmdldEVsZW1lbnRCeUlkKGMpO1xuICAgICAgICAgICAgaWYgKCFhKSB7XG4gICAgICAgICAgICAgICAgYSA9IGsuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBhLmlkID0gYztcbiAgICAgICAgICAgICAgICBhID0gZ1t5XS5hcHBlbmRDaGlsZChhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIgIT0gXCItcGFnZXJcIikge1xuICAgICAgICAgICAgICAgIGEub25jbGljayA9IGQ7XG4gICAgICAgICAgICAgICAgWiAmJiBhW3VdKFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgICAgICBhLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGEudGFyZ2V0LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIHNiKGEpXG4gICAgICAgICAgICAgICAgfSwgZmFsc2UpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYVxuICAgICAgICB9LCBhZGROYXZzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAociA+IDEpIHtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IHRoaXMuZShcIi1wYWdlclwiLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBiKGgpW2VdKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBbXSwgYSA9IDA7IGEgPCByOyBhKyspIGkucHVzaCgnPGEgcmVsPVwiJyArIGEgKyAnXCI+JyArIChhICsgMSkgKyBcIjwvYT5cIik7XG4gICAgICAgICAgICAgICAgICAgIGguaW5uZXJIVE1MID0gaS5qb2luKFwiXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHcgPSBwYihoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IHdbZV07IGErKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PSBjKSB3W2FdW2ZdID0gXCJhY3RpdmVcIjtcbiAgICAgICAgICAgICAgICAgICAgd1thXS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBwYXJzZUludChFKHRoaXMsIFwicmVsXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgIT0gYyAmJiBuKGEsIDEpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVSA9IHRoaXMuZShcIi1wcmV2XCIsIGViKTtcbiAgICAgICAgICAgICAgICBNID0gdGhpcy5lKFwiLW5leHRcIiwgZWIpO1xuICAgICAgICAgICAgICAgIHhiID0gdGhpcy5lKFwiLXBhdXNlLXBsYXlcIiwgUSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnID0gai5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZnMtaWNvblwiKSB8fCBbXTtcbiAgICAgICAgICAgIGlmIChnW2VdKSB7XG4gICAgICAgICAgICAgICAgZyA9IGdbMF07XG4gICAgICAgICAgICAgICAgeChnLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBLKGosIFwiZnVsbHNjcmVlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEMoaiwgXCJmdWxsc2NyZWVuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAga1tQXVtkXS5vdmVyZmxvdyA9IFwiYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvKGosIFwiZnVsbHNjcmVlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtbUF1bZF0ub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGZzSWNvbkNsaWNrID09IFwiZnVuY3Rpb25cIiAmJiBmc0ljb25DbGljayhjLCBqKTtcbiAgICAgICAgICAgICAgICAgICAgYyA9ICFjO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhLCBmID0gMDsgZiA8IGJbZV07IGYrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGJbZl07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5uSXMpIGlmIChhLm5JLnRhZ05hbWUgPT0gXCJJTUdcIikgYS5uSS5zcmMgPSBhLm5Jc1tjID8gMSA6IDBdOyBlbHNlIGEubklbZF1bUl0gPSBcInVybCgnXCIgKyBhLm5Jc1tjID8gMSA6IDBdICsgXCInKVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB4KGssIFwia2V5ZG93blwiLCBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgICAgICBhLmtleUNvZGUgPT0gMjcgJiYgSyhqLCBcImZ1bGxzY3JlZW5cIikgJiYgZy5jbGljaygpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgc2xpZGVySWQ6IHQsIHN0b3A6IE4sIGdldExpczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJcbiAgICAgICAgfSwgZ2V0SW5kZXg6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgIH0sIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGEuZCAmJiBuKGMgKyAxLCAwKVxuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgVyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaiA9IGsuZ2V0RWxlbWVudEJ5SWQodCk7XG4gICAgICAgIGlmIChqKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGRiKGosIFwidWxcIik7XG4gICAgICAgICAgICBpZiAoYVtlXSkgcCA9IG5ldyB1YihhWzBdKVxuICAgICAgICB9XG4gICAgfSwgUmIgPSBmdW5jdGlvbiAoYykge1xuICAgICAgICB2YXIgYSA9IDA7XG5cbiAgICAgICAgZnVuY3Rpb24gYigpIHtcbiAgICAgICAgICAgIGlmIChhKSByZXR1cm47XG4gICAgICAgICAgICBhID0gMTtcbiAgICAgICAgICAgIG0oYywgNClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChrW3VdKSBrW3VdKFwiRE9NQ29udGVudExvYWRlZFwiLCBiLCBmYWxzZSk7IGVsc2UgeCh3aW5kb3csIFwibG9hZFwiLCBiKVxuICAgIH07XG4gICAgaWYgKCFhLmluaXRTbGlkZXJCeUNhbGxpbmdJbml0RnVuYykgaWYgKGsuZ2V0RWxlbWVudEJ5SWQodCkpIFcoKTsgZWxzZSBSYihXKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBkaXNwbGF5U2xpZGU6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAoYltlXSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYSA9PSBcIm51bWJlclwiKSB2YXIgYyA9IGE7IGVsc2UgYyA9IGEuaXg7XG4gICAgICAgICAgICAgICAgbihjLCAwKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBuKGMgKyAxLCAxKVxuICAgICAgICB9LCBwcmV2OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBuKGMgLSAxLCAxKVxuICAgICAgICB9LCB0b2dnbGU6IFEsIGdldFBvczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNcbiAgICAgICAgfSwgZ2V0U2xpZGVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYlxuICAgICAgICB9LCBwbGF5VmlkZW86IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGEgPT0gXCJudW1iZXJcIikgYSA9IGJbYV07XG4gICAgICAgICAgICBpZiAoYS5wbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBuKGEuaXgsIDApO1xuICAgICAgICAgICAgICAgIHAucGxheVZpZGVvKGEucGxheWVyKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBpbml0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgIXAgJiYgVygpO1xuICAgICAgICAgICAgdHlwZW9mIGEgIT0gXCJ1bmRlZmluZWRcIiAmJiB0aGlzLmRpc3BsYXlTbGlkZShhKVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiLy8gc3Vkb2t1SlMgdjAuNC40XG4vLyBodHRwczovL2dpdGh1Yi5jb20vcG9ja2V0am9zby9zdWRva3VKU1xuLy8gQXV0aG9yOiBKb25hcyBPaGxzc29uXG4vLyBMaWNlbnNlOiBNSVRcblxuKGZ1bmN0aW9uICh3aW5kb3csICQsIHVuZGVmaW5lZCkge1xuXHQndXNlIHN0cmljdCc7XG5cdC8qVE9ETzpcblx0XHQtLXBvc3NpYmxlIGFkZGl0aW9ucy0tXG5cdFx0dG9nZ2xlIGVkaXQgY2FuZGlkYXRlc1xuXHRcdHVuZG8vcmVkb1xuXHQqL1xuXG5cdC8qKlxuXHQqIERlZmluZSBhIGpRdWVyeSBwbHVnaW5cblx0Ki9cbiAgICAkLmZuLnN1ZG9rdUpTID0gZnVuY3Rpb24ob3B0cykge1xuXG5cdFx0Lypcblx0XHQgKiBjb25zdGFudHNcblx0XHQgKi0tLS0tLS0tLS0tKi9cblxuXHRcdHZhciBESUZGSUNVTFRZX0VBU1kgPSBcImVhc3lcIjtcblx0XHR2YXIgRElGRklDVUxUWV9NRURJVU0gPSBcIm1lZGl1bVwiO1xuXHRcdHZhciBESUZGSUNVTFRZX0hBUkQgPSBcImhhcmRcIjtcblx0XHR2YXIgRElGRklDVUxUWV9WRVJZX0hBUkQgPSBcImRpYWJvbGljYWxcIjtcblxuXHRcdHZhciBTT0xWRV9NT0RFX1NURVAgPSBcInN0ZXBcIjtcblx0XHR2YXIgU09MVkVfTU9ERV9BTEwgPSBcImFsbFwiO1xuXG5cdFx0dmFyIERJRkZJQ1VMVElFUyA9IFtcblx0XHRcdERJRkZJQ1VMVFlfRUFTWSxcblx0XHRcdERJRkZJQ1VMVFlfTUVESVVNLFxuXHRcdFx0RElGRklDVUxUWV9IQVJELFxuXHRcdFx0RElGRklDVUxUWV9WRVJZX0hBUkRcblx0XHRdO1xuXG5cdFx0Lypcblx0XHQgKiB2YXJpYWJsZXNcblx0XHQgKi0tLS0tLS0tLS0tKi9cblx0XHRvcHRzID0gb3B0cyB8fCB7fTtcblx0XHR2YXIgc29sdmVNb2RlID0gU09MVkVfTU9ERV9TVEVQLFxuXHRcdFx0XHRkaWZmaWN1bHR5ID0gXCJ1bmtub3duXCIsXG5cdFx0XHRcdGNhbmRpZGF0ZXNTaG93aW5nID0gZmFsc2UsXG5cdFx0XHRcdGVkaXRpbmdDYW5kaWRhdGVzID0gZmFsc2UsXG5cdFx0XHRcdGJvYXJkRmluaXNoZWQgPSBmYWxzZSxcblx0XHRcdFx0Ym9hcmRFcnJvciA9IGZhbHNlLFxuXHRcdFx0XHRvbmx5VXBkYXRlZENhbmRpZGF0ZXMgPSBmYWxzZSxcblx0XHRcdFx0Z3JhZGluZ01vZGUgPSBmYWxzZSwgLy9zb2x2aW5nIHdpdGhvdXQgdXBkYXRpbmcgVUlcblx0XHRcdFx0Z2VuZXJhdGluZ01vZGUgPSBmYWxzZSwgLy9zaWxlbmNlIGJvYXJkIHVuc29sdmFibGUgZXJyb3JzXG5cdFx0XHRcdGludmFsaWRDYW5kaWRhdGVzID0gW10sIC8vdXNlZCBieSB0aGUgZ2VuZXJhdGVCb2FyZCBmdW5jdGlvblxuXG5cblx0XHQvKlxuXHRcdHRoZSBzY29yZSByZWZsZWN0cyBob3cgbXVjaCBpbmNyZWFzZWQgZGlmZmljdWx0eSB0aGUgYm9hcmQgZ2V0cyBieSBoYXZpbmcgdGhlIHBhdHRlcm4gcmF0aGVyIHRoYW4gYW4gYWxyZWFkeSBzb2x2ZWQgY2VsbFxuXHRcdCovXG5cdFx0XHRzdHJhdGVnaWVzID0gW1xuXHRcdFx0XHR7dGl0bGU6IFwib3BlblNpbmdsZXNcIiwgZm46XHRvcGVuU2luZ2xlcywgc2NvcmUgOiAwLjFcdH0sXG5cdFx0XHRcdCAvL2hhcmRlciBmb3IgaHVtYW4gdG8gc3BvdFxuXHRcdFx0XHR7dGl0bGU6IFwic2luZ2xlQ2FuZGlkYXRlXCIsIGZuOlx0c2luZ2xlQ2FuZGlkYXRlLCBzY29yZSA6IDlcdH0sXG5cdFx0XHRcdHt0aXRsZTogXCJ2aXN1YWxFbGltaW5hdGlvblwiLCBmbjpcdHZpc3VhbEVsaW1pbmF0aW9uLCBzY29yZSA6IDhcdH0sXG5cdFx0XHRcdC8vb25seSBlbGltaW5hdGVzIG9uZSBjYW5kaWRhdGUsIHNob3VsZCBoYXZlIGxvd2VyIHNjb3JlP1xuXHRcdFx0XHR7dGl0bGU6IFwibmFrZWRQYWlyXCIsIGZuOlx0bmFrZWRQYWlyLCBzY29yZSA6IDUwXHR9LFxuXHRcdFx0XHR7dGl0bGU6IFwicG9pbnRpbmdFbGltaW5hdGlvblwiLCBmbjpcdHBvaW50aW5nRWxpbWluYXRpb24sIHNjb3JlIDogODBcdH0sXG5cdFx0XHRcdC8vaGFyZGVyIGZvciBodW1hbiB0byBzcG90XG5cdFx0XHRcdHt0aXRsZTogXCJoaWRkZW5QYWlyXCIsIGZuOlx0aGlkZGVuUGFpciwgc2NvcmUgOlx0OTBcdH0sXG5cdFx0XHRcdHt0aXRsZTogXCJuYWtlZFRyaXBsZXRcIiwgZm46XHRuYWtlZFRyaXBsZXQsIHNjb3JlIDpcdDEwMCB9LFxuXHRcdFx0XHQvL25ldmVyIGdldHMgdXNlZCB1bmxlc3MgYWJvdmUgc3RyYXRzIGFyZSB0dXJuZWQgb2ZmP1xuXHRcdFx0XHR7dGl0bGU6IFwiaGlkZGVuVHJpcGxldFwiLCBmbjpcdGhpZGRlblRyaXBsZXQsIHNjb3JlIDpcdDE0MFx0fSxcblx0XHRcdFx0Ly9uZXZlciBnZXRzIHVzZWQgdW5sZXNzIGFib3ZlIHN0cmF0cyBhcmUgdHVybmVkIG9mZj9cblx0XHRcdFx0e3RpdGxlOiBcIm5ha2VkUXVhZFwiLCBmbjpcdG5ha2VkUXVhZCwgc2NvcmUgOlx0MTUwIH0sXG5cdFx0XHRcdC8vbmV2ZXIgZ2V0cyB1c2VkIHVubGVzcyBhYm92ZSBzdHJhdHMgYXJlIHR1cm5lZCBvZmY/XG5cdFx0XHRcdHt0aXRsZTogXCJoaWRkZW5RdWFkXCIsIGZuOlx0aGlkZGVuUXVhZCwgc2NvcmUgOlx0MjgwXHR9XG5cdFx0XHRdLFxuXG5cblx0XHQvL25yIG9mIHRpbWVzIGVhY2ggc3RyYXRlZ3kgaGFzIGJlZW4gdXNlZCBmb3Igc29sdmluZyB0aGlzIGJvYXJkIC0gdXNlZCB0byBjYWxjdWxhdGUgZGlmZmljdWx0eSBzY29yZVxuXHRcdFx0dXNlZFN0cmF0ZWdpZXMgPSBbXSxcblxuXHRcdC8qYm9hcmQgdmFyaWFibGUgZ2V0cyBlbmhhbmNlZCBpbnRvIGxpc3Qgb2Ygb2JqZWN0cyBvbiBpbml0OlxuXHRcdFx0LHtcblx0XHRcdFx0dmFsOiBudWxsXG5cdFx0XHRcdCxjYW5kaWRhdGVzOiBbXG5cdFx0XHRcdFx0XVxuXHRcdFx0fVxuXHRcdCovXG5cdFx0XHRib2FyZCA9IFtdLFxuXHRcdFx0Ym9hcmRTaXplLFxuXHRcdFx0Ym9hcmROdW1iZXJzLCAvLyBhcnJheSBvZiAxLTkgYnkgZGVmYXVsdCwgZ2VuZXJhdGVkIGluIGluaXRCb2FyZFxuXG5cdFx0Ly9pbmRleGVzIG9mIGNlbGxzIGluIGVhY2ggaG91c2UgLSBnZW5lcmF0ZWQgb24gdGhlIGZseSBiYXNlZCBvbiBib2FyZFNpemVcblx0XHRcdGhvdXNlcyA9IFtcblx0XHRcdFx0Ly9ob3IuIHJvd3Ncblx0XHRcdFx0W10sXG5cdFx0XHRcdC8vdmVydC4gcm93c1xuXHRcdFx0XHRbXSxcblx0XHRcdFx0Ly9ib3hlc1xuXHRcdFx0XHRbXVxuXHRcdFx0XTtcblxuXG5cblxuXHRcdC8qXG5cdFx0ICogc2VsZWN0b3JzXG5cdFx0ICotLS0tLS0tLS0tLSovXG5cdFx0IHZhciAkYm9hcmQgPSAkKHRoaXMpLFxuXHRcdFx0JGJvYXJkSW5wdXRzLCAvL2NyZWF0ZWRcblx0XHRcdCRib2FyZElucHV0Q2FuZGlkYXRlczsgLy9jcmVhdGVkXG5cblxuXG5cdFx0IC8qXG5cdFx0ICogbWV0aG9kc1xuXHRcdCAqLS0tLS0tLS0tLS0qL1xuXHRcdCAvL3Nob3J0Y3V0IGZvciBsb2dnaW5nLi5cblx0XHRmdW5jdGlvbiBsb2cobXNnKXtcblx0XHRcdGlmKHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUubG9nKVxuXHRcdFx0IGNvbnNvbGUubG9nKG1zZyk7XG5cdFx0fVxuXG5cblx0XHQvL2FycmF5IGNvbnRhaW5zIGZ1bmN0aW9uXG5cdFx0dmFyIGNvbnRhaW5zID0gZnVuY3Rpb24oYSwgb2JqKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKGFbaV0gPT09IG9iaikge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHRcdHZhciB1bmlxdWVBcnJheSA9IGZ1bmN0aW9uKGEpIHtcblx0XHRcdHZhciB0ZW1wID0ge307XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspXG5cdFx0XHRcdHRlbXBbYVtpXV0gPSB0cnVlO1xuXHRcdFx0dmFyIHIgPSBbXTtcblx0XHRcdGZvciAodmFyIGsgaW4gdGVtcClcblx0XHRcdFx0ci5wdXNoKGspO1xuXHRcdFx0cmV0dXJuIHI7XG5cdFx0fTtcblxuXG5cblx0XHQvKiBjYWxjQm9hcmREaWZmaWN1bHR5XG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiAgVFlQRTogc29sZWx5IGJhc2VkIG9uIHN0cmF0ZWdpZXMgcmVxdWlyZWQgdG8gc29sdmUgYm9hcmQgKGkuZS4gc2luZ2xlIGNvdW50IHBlciBzdHJhdGVneSlcblx0XHQgKiAgU0NPUkU6IGRpc3Rpbmd1aXNoIGJldHdlZW4gYm9hcmRzIG9mIHNhbWUgZGlmZmljdWx0eS4uIGJhc2VkIG9uIHBvaW50IHN5c3RlbS4gTmVlZHMgd29yay5cblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0dmFyIGNhbGNCb2FyZERpZmZpY3VsdHkgPSBmdW5jdGlvbih1c2VkU3RyYXRlZ2llcyl7XG5cdFx0XHR2YXIgYm9hcmREaWZmID0ge307XG5cdFx0XHRpZih1c2VkU3RyYXRlZ2llcy5sZW5ndGggPCAzKVxuXHRcdFx0XHRib2FyZERpZmYubGV2ZWwgPSBESUZGSUNVTFRZX0VBU1k7XG5cdFx0XHRlbHNlIGlmKHVzZWRTdHJhdGVnaWVzLmxlbmd0aCA8IDQpXG5cdFx0XHRcdGJvYXJkRGlmZi5sZXZlbCA9IERJRkZJQ1VMVFlfTUVESVVNO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRib2FyZERpZmYubGV2ZWwgPSBESUZGSUNVTFRZX0hBUkQ7XG5cblx0XHRcdHZhciB0b3RhbFNjb3JlID0gMDtcblx0XHRcdGZvcih2YXIgaT0wOyBpIDwgc3RyYXRlZ2llcy5sZW5ndGg7IGkrKyl7XG5cdFx0XHRcdHZhciBmcmVxID0gdXNlZFN0cmF0ZWdpZXNbaV07XG5cdFx0XHRcdGlmKCFmcmVxKVxuXHRcdFx0XHRcdGNvbnRpbnVlOyAvL3VuZGVmaW5lZCBvciAwLCB3b24ndCBlZmZlY3Qgc2NvcmVcblx0XHRcdFx0dmFyIHN0cmF0T2JqID0gc3RyYXRlZ2llc1tpXTtcblx0XHRcdFx0dG90YWxTY29yZSArPSBmcmVxICogc3RyYXRPYmouc2NvcmU7XG5cdFx0XHR9XG5cdFx0XHRib2FyZERpZmYuc2NvcmUgPSB0b3RhbFNjb3JlO1xuXHRcdFx0Ly9sb2coXCJ0b3RhbFNjb3JlOiBcIit0b3RhbFNjb3JlKTtcblxuXHRcdFx0aWYodG90YWxTY29yZSA+IDc1MClcblx0XHRcdC8vIGlmKHRvdGFsU2NvcmUgPiAyMjAwKVxuXHRcdFx0XHRib2FyZERpZmYubGV2ZWwgPSBESUZGSUNVTFRZX1ZFUllfSEFSRDtcblxuXHRcdFx0cmV0dXJuIGJvYXJkRGlmZjtcblx0XHR9O1xuXG5cblx0XHQvKiBpc0JvYXJkRmluaXNoZWRcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0dmFyIGlzQm9hcmRGaW5pc2hlZCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRmb3IgKHZhciBpPTA7IGkgPCBib2FyZFNpemUqYm9hcmRTaXplOyBpKyspe1xuXHRcdFx0XHRpZihib2FyZFtpXS52YWwgPT09IG51bGwpXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXG5cdFx0LyogZ2VuZXJhdGVIb3VzZUluZGV4TGlzdFxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHR2YXIgZ2VuZXJhdGVIb3VzZUluZGV4TGlzdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vIHJlc2V0IGhvdXNlc1xuICAgICAgICBob3VzZXMgPSBbXG5cdFx0XHRcdC8vaG9yLiByb3dzXG5cdFx0XHRcdFtdLFxuXHRcdFx0XHQvL3ZlcnQuIHJvd3Ncblx0XHRcdFx0W10sXG5cdFx0XHRcdC8vYm94ZXNcblx0XHRcdFx0W11cblx0XHRcdF1cblx0XHRcdHZhciBib3hTaWRlU2l6ZSA9IE1hdGguc3FydChib2FyZFNpemUpO1xuXG5cdFx0XHRmb3IodmFyIGk9MDsgaSA8IGJvYXJkU2l6ZTsgaSsrKXtcblx0XHRcdFx0dmFyIGhyb3cgPSBbXTsgLy9ob3Jpc29udGFsIHJvd1xuXHRcdFx0XHR2YXIgdnJvdyA9IFtdOyAvL3ZlcnRpY2FsIHJvd1xuXHRcdFx0XHR2YXIgYm94ID0gW107XG5cdFx0XHRcdGZvcih2YXIgaj0wOyBqIDwgYm9hcmRTaXplOyBqKyspe1xuXHRcdFx0XHRcdGhyb3cucHVzaChib2FyZFNpemUqaSArIGopO1xuXHRcdFx0XHRcdHZyb3cucHVzaChib2FyZFNpemUqaiArIGkpO1xuXG5cdFx0XHRcdFx0aWYoaiA8IGJveFNpZGVTaXplKXtcblx0XHRcdFx0XHRcdGZvcih2YXIgaz0wOyBrIDwgYm94U2lkZVNpemU7IGsrKyl7XG5cdFx0XHRcdFx0XHRcdC8vMCwgMCwwLCAyNywgMjcsMjcsIDU0LCA1NCwgNTQgZm9yIGEgc3RhbmRhcmQgc3Vkb2t1XG5cdFx0XHRcdFx0XHRcdHZhciBhID0gTWF0aC5mbG9vcihpL2JveFNpZGVTaXplKSAqIGJvYXJkU2l6ZSAqIGJveFNpZGVTaXplO1xuXHRcdFx0XHRcdFx0XHQvL1swLTJdIGZvciBhIHN0YW5kYXJkIHN1ZG9rdVxuXHRcdFx0XHRcdFx0XHR2YXIgYiA9IChpJWJveFNpZGVTaXplKSAqIGJveFNpZGVTaXplO1xuXHRcdFx0XHRcdFx0XHR2YXIgYm94U3RhcnRJbmRleCA9IGEgK2I7IC8vMCAzIDYgMjcgMzAgMzMgNTQgNTcgNjBcblxuXHRcdFx0XHRcdFx0XHRcdC8vZXZlcnkgYm94U2lkZVNpemUgYm94LCBza2lwIGJvYXJkU2l6ZSBudW0gcm93cyB0byBuZXh0IGJveCAob24gbmV3IGhvcml6b250YWwgcm93KVxuXHRcdFx0XHRcdFx0XHRcdC8vTWF0aC5mbG9vcihpL2JveFNpZGVTaXplKSpib2FyZFNpemUqMlxuXHRcdFx0XHRcdFx0XHRcdC8vc2tpcCBhY3Jvc3MgaG9yaXpvbnRhbGx5IHRvIG5leHQgYm94XG5cdFx0XHRcdFx0XHRcdFx0Ly8rIGkqYm94U2lkZVNpemU7XG5cblxuXHRcdFx0XHRcdFx0XHRib3gucHVzaChib3hTdGFydEluZGV4ICsgYm9hcmRTaXplKmogKyBrKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aG91c2VzWzBdLnB1c2goaHJvdyk7XG5cdFx0XHRcdGhvdXNlc1sxXS5wdXNoKHZyb3cpO1xuXHRcdFx0XHRob3VzZXNbMl0ucHVzaChib3gpO1xuXHRcdFx0fVxuXHRcdH07XG5cblxuXHRcdC8qIGluaXRCb2FyZFxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tXG5cdFx0ICogIGluaXRzIGJvYXJkLCB2YXJpYWJsZXMuXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdHZhciBpbml0Qm9hcmQgPSBmdW5jdGlvbihvcHRzKXtcblx0XHRcdHZhciBhbHJlYWR5RW5oYW5jZWQgPSAoYm9hcmRbMF0gIT09IG51bGwgJiYgdHlwZW9mIGJvYXJkWzBdID09PSBcIm9iamVjdFwiKTtcblx0XHRcdHZhciBudWxsQ2FuZGlkYXRlTGlzdCA9IFtdO1xuICAgICAgYm9hcmROdW1iZXJzID0gW107XG5cdFx0XHRib2FyZFNpemUgPSAoIWJvYXJkLmxlbmd0aCAmJiBvcHRzLmJvYXJkU2l6ZSkgfHwgTWF0aC5zcXJ0KGJvYXJkLmxlbmd0aCkgfHwgOTtcblx0XHRcdCRib2FyZC5hdHRyKFwiZGF0YS1ib2FyZC1zaXplXCIsIGJvYXJkU2l6ZSk7XG5cdFx0XHRpZihib2FyZFNpemUgJSAxICE9PSAwIHx8IE1hdGguc3FydChib2FyZFNpemUpICUgMSAhPT0gMCkge1xuXHRcdFx0XHRsb2coXCJpbnZhbGlkIGJvYXJkU2l6ZTogXCIrYm9hcmRTaXplKTtcblx0XHRcdFx0aWYodHlwZW9mIG9wdHMuYm9hcmRFcnJvckZuID09PSBcImZ1bmN0aW9uXCIpXG5cdFx0XHRcdFx0b3B0cy5ib2FyZEVycm9yRm4oe21zZzogXCJpbnZhbGlkIGJvYXJkIHNpemVcIn0pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRmb3IgKHZhciBpPTA7IGkgPCBib2FyZFNpemU7IGkrKyl7XG5cdFx0XHRcdGJvYXJkTnVtYmVycy5wdXNoKGkrMSk7XG5cdFx0XHRcdG51bGxDYW5kaWRhdGVMaXN0LnB1c2gobnVsbCk7XG5cdFx0XHR9XG5cdFx0XHRnZW5lcmF0ZUhvdXNlSW5kZXhMaXN0KCk7XG5cblx0XHRcdGlmKCFhbHJlYWR5RW5oYW5jZWQpe1xuXHRcdFx0XHQvL2VuaGFuY2UgYm9hcmQgdG8gaGFuZGxlIGNhbmRpZGF0ZXMsIGFuZCBwb3NzaWJseSBvdGhlciBwYXJhbXNcblx0XHRcdFx0Zm9yKHZhciBqPTA7IGogPCBib2FyZFNpemUqYm9hcmRTaXplIDsgaisrKXtcblx0XHRcdFx0XHR2YXIgY2VsbFZhbCA9ICh0eXBlb2YgYm9hcmRbal0gPT09IFwidW5kZWZpbmVkXCIpID8gbnVsbCA6IGJvYXJkW2pdO1xuXHRcdFx0XHRcdHZhciBjYW5kaWRhdGVzID0gY2VsbFZhbCA9PT0gbnVsbCA/IGJvYXJkTnVtYmVycy5zbGljZSgpIDogbnVsbENhbmRpZGF0ZUxpc3Quc2xpY2UoKTtcblx0XHRcdFx0XHRib2FyZFtqXSA9IHtcblx0XHRcdFx0XHRcdHZhbDogY2VsbFZhbCxcblx0XHRcdFx0XHRcdGNhbmRpZGF0ZXM6IGNhbmRpZGF0ZXNcblx0XHRcdFx0XHRcdC8vdGl0bGU6IFwiXCIgcG9zc2libCBhZGQgaW4gJ0ExLiBCMS4uLmV0Y1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cblx0XHQvKiByZW5kZXJCb2FyZFxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tXG5cdFx0ICogIGR5bmFtaWNhbGx5IHJlbmRlcnMgdGhlIGJvYXJkIG9uIHRoZSBzY3JlZW4gKGludG8gdGhlIERPTSksIGJhc2VkIG9uIGJvYXJkIHZhcmlhYmxlXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdHZhciByZW5kZXJCb2FyZCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQvL2xvZyhcInJlbmRlckJvYXJkXCIpO1xuXHRcdFx0Ly9sb2coYm9hcmQpO1xuXHRcdFx0dmFyIGh0bWxTdHJpbmcgPSBcIlwiO1xuXHRcdFx0Zm9yKHZhciBpPTA7IGkgPCBib2FyZFNpemUqYm9hcmRTaXplOyBpKyspe1xuXHRcdFx0XHRodG1sU3RyaW5nICs9IHJlbmRlckJvYXJkQ2VsbChib2FyZFtpXSwgaSk7XG5cblx0XHRcdFx0aWYoKGkrMSkgJSBib2FyZFNpemUgPT09IDApIHtcblx0XHRcdFx0XHRodG1sU3RyaW5nICs9IFwiPGJyPlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvL2xvZyhodG1sU3RyaW5nKTtcblx0XHRcdCRib2FyZC5hcHBlbmQoaHRtbFN0cmluZyk7XG5cblx0XHRcdC8vc2F2ZSBpbXBvcnRhbnQgYm9hcmQgZWxlbWVudHNcblx0XHRcdCRib2FyZElucHV0cyA9ICRib2FyZC5maW5kKFwiaW5wdXRcIik7XG5cdFx0XHQkYm9hcmRJbnB1dENhbmRpZGF0ZXMgPSAkYm9hcmQuZmluZChcIi5jYW5kaWRhdGVzXCIpO1xuXHRcdH07XG5cblx0XHQvKiByZW5kZXJCb2FyZENlbGxcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0dmFyIHJlbmRlckJvYXJkQ2VsbCA9IGZ1bmN0aW9uKGJvYXJkQ2VsbCwgaWQpe1xuXHRcdFx0dmFyIHZhbCA9IChib2FyZENlbGwudmFsID09PSBudWxsKSA/IFwiXCIgOiBib2FyZENlbGwudmFsO1xuXHRcdFx0dmFyIGNhbmRpZGF0ZXMgPSBib2FyZENlbGwuY2FuZGlkYXRlcyB8fCBbXTtcblx0XHRcdHZhciBjYW5kaWRhdGVzU3RyaW5nID0gYnVpbGRDYW5kaWRhdGVzU3RyaW5nKGNhbmRpZGF0ZXMpO1xuXHRcdFx0dmFyIG1heGxlbmd0aCA9IChib2FyZFNpemUgPCAxMCkgPyBcIiBtYXhsZW5ndGg9JzEnXCIgOiBcIlwiO1xuXHRcdFx0cmV0dXJuIFwiPGRpdiBjbGFzcz0nc3Vkb2t1LWJvYXJkLWNlbGwnPlwiICtcblx0XHRcdFx0XHRcdC8vd2FudCB0byB1c2UgdHlwZT1udW1iZXIsIGJ1dCB0aGVuIGhhdmUgdG8gcHJldmVudCBjaHJvbWUgc2Nyb2xsaW5nIGFuZCB1cCBkb3duIGtleSBiZWhhdmlvcnMuLlxuXHRcdFx0XHRcdFx0XCI8aW5wdXQgdHlwZT0ndGV4dCcgcGF0dGVybj0nXFxcXGQqJyBub3ZhbGlkYXRlIGlkPSdpbnB1dC1cIitpZCtcIicgdmFsdWU9J1wiK3ZhbCtcIidcIittYXhsZW5ndGgrXCI+XCIgK1xuXHRcdFx0XHRcdFx0XCI8ZGl2IGlkPSdpbnB1dC1cIitpZCtcIi1jYW5kaWRhdGVzJyBjbGFzcz0nY2FuZGlkYXRlcyc+XCIgKyBjYW5kaWRhdGVzU3RyaW5nICsgXCI8L2Rpdj5cIiArXG5cdFx0XHRcdFx0XCI8L2Rpdj5cIjtcblx0XHR9O1xuXG5cblx0XHQvKiBidWlsZENhbmRpZGF0ZXNTdHJpbmdcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0dmFyIGJ1aWxkQ2FuZGlkYXRlc1N0cmluZyA9IGZ1bmN0aW9uKGNhbmRpZGF0ZXNMaXN0KXtcblx0XHRcdHZhciBzPVwiXCI7XG5cdFx0XHRmb3IodmFyIGk9MTsgaTxib2FyZFNpemUrMTsgaSsrKXtcblx0XHRcdFx0aWYoY29udGFpbnMoY2FuZGlkYXRlc0xpc3QsaSkpXG5cdFx0XHRcdFx0cys9IFwiPGRpdj5cIitpK1wiPC9kaXY+IFwiO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0cys9IFwiPGRpdj4mbmJzcDs8L2Rpdj4gXCI7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcztcblx0XHR9O1xuXG5cblx0XHQvKiB1cGRhdGVVSVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tXG5cdFx0ICogIHVwZGF0ZXMgdGhlIFVJXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHR2YXIgdXBkYXRlVUkgPSBmdW5jdGlvbihvcHRzKXtcblx0XHRcdHZhciBvcHRzID0gb3B0cyB8fCB7fTtcblx0XHRcdHZhciBwYWludE5ldyA9ICh0eXBlb2Ygb3B0cy5wYWludE5ldyAhPT0gXCJ1bmRlZmluZWRcIikgPyBvcHRzLnBhaW50TmV3IDogdHJ1ZTtcblx0XHRcdHVwZGF0ZVVJQm9hcmQocGFpbnROZXcpO1xuXHRcdH0qL1xuXG5cdFx0LyogdXBkYXRlVUlCb2FyZCAtXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiAgdXBkYXRlcyB0aGUgYm9hcmQgd2l0aCBvdXIgbGF0ZXN0IHZhbHVlc1xuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHQgdmFyIHVwZGF0ZVVJQm9hcmQgPSBmdW5jdGlvbihwYWludE5ldyl7XG5cdFx0XHQvL2xvZyhcInJlIHBhaW50aW5nIGV2ZXJ5IGlucHV0IG9uIGJvYXJkLi5cIik7XG5cdFx0XHQkYm9hcmRJbnB1dHNcblx0XHRcdFx0LnJlbW92ZUNsYXNzKFwiaGlnaGxpZ2h0LXZhbFwiKVxuXHRcdFx0XHQuZWFjaChmdW5jdGlvbihpLHYpe1xuXHRcdFx0XHRcdHZhciAkaW5wdXQgPSAkKHRoaXMpO1xuXHRcdFx0XHRcdHZhciBuZXdWYWwgPSBib2FyZFtpXS52YWw7XG5cdFx0XHRcdFx0Ly9pZihuZXdWYWwgJiYgcGFyc2VJbnQoJGlucHV0LnZhbCgpKSAhPT0gbmV3VmFsKSB7XG5cdFx0XHRcdFx0XHQkaW5wdXQudmFsKG5ld1ZhbCk7XG5cdFx0XHRcdFx0XHRpZihwYWludE5ldylcblx0XHRcdFx0XHRcdFx0JGlucHV0LmFkZENsYXNzKFwiaGlnaGxpZ2h0LXZhbFwiKTtcblx0XHRcdFx0XHQvL31cblx0XHRcdFx0XHR2YXIgJGNhbmRpZGF0ZXMgPSAkaW5wdXQuc2libGluZ3MoXCIuY2FuZGlkYXRlc1wiKTtcblx0XHRcdFx0XHQkY2FuZGlkYXRlcy5odG1sKGJ1aWxkQ2FuZGlkYXRlc1N0cmluZyhib2FyZFtpXS5jYW5kaWRhdGVzKSk7XG5cblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXG5cdFx0LyogdXBkYXRlVUlCb2FyZENlbGwgLVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tXG5cdFx0ICogIHVwZGF0ZXMgT05FIGNlbGwgb24gdGhlIGJvYXJkIHdpdGggb3VyIGxhdGVzdCB2YWx1ZXNcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0IHZhciB1cGRhdGVVSUJvYXJkQ2VsbCA9IGZ1bmN0aW9uKGNlbGxJbmRleCwgb3B0cyl7XG5cdFx0XHRvcHRzID0gb3B0cyB8fCB7fTtcblx0XHRcdC8vbG9nKFwidXBkYXRlVUlCb2FyZENlbGw6IFwiK2NlbGxJbmRleCk7XG5cdFx0XHQvL2lmKCEob3B0cy5tb2RlICYmIG9wdHMubW9kZSA9PT0gXCJvbmx5LWNhbmRpZGF0ZXNcIikpe1xuXHRcdFx0XHR2YXIgbmV3VmFsID0gYm9hcmRbY2VsbEluZGV4XS52YWw7XG5cblx0XHRcdFx0Ly8kYm9hcmRJbnB1dHMucmVtb3ZlQ2xhc3MoXCJoaWdobGlnaHQtdmFsXCIpO1xuXG5cdFx0XHRcdC8vc2hvdWxkbid0IGFsd2F5cyBhZGQgaGlnaHRsaWdodC12YWwgY2xhc3Ncblx0XHRcdFx0JChcIiNpbnB1dC1cIitjZWxsSW5kZXgpXG5cdFx0XHRcdFx0LnZhbChuZXdWYWwpXG5cdFx0XHRcdFx0LmFkZENsYXNzKFwiaGlnaGxpZ2h0LXZhbFwiKTtcblx0XHRcdC8vfVxuXHRcdFx0JChcIiNpbnB1dC1cIitjZWxsSW5kZXgrXCItY2FuZGlkYXRlc1wiKVxuXHRcdFx0XHQuaHRtbChidWlsZENhbmRpZGF0ZXNTdHJpbmcoYm9hcmRbY2VsbEluZGV4XS5jYW5kaWRhdGVzKSk7XG5cdFx0fTtcblxuXHRcdC8qIHVJQm9hcmRIaWdobGlnaHRSZW1vdmVDYW5kaWRhdGVcblx0XHQgKiAtLS0tLS0tLS0tLS0tLVxuXHRcdCAqICBoaWdobGlnaHQgY2FuZGlkYXRlIGluIGNlbGwgdGhhdCBpcyBhYm91dCB0byBiZSByZW1vdmVkXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdHZhciB1SUJvYXJkSGlnaGxpZ2h0UmVtb3ZlQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2VsbEluZGV4LCBkaWdpdCl7XG5cdFx0XHQkKFwiI2lucHV0LVwiK2NlbGxJbmRleCtcIi1jYW5kaWRhdGVzIGRpdjpudGgtb2YtdHlwZShcIitkaWdpdCtcIilcIikuYWRkQ2xhc3MoXCJjYW5kaWRhdGUtLXRvLXJlbW92ZVwiKTtcblx0XHR9O1xuXG5cdFx0LyogdUlCb2FyZEhpZ2hsaWdodENhbmRpZGF0ZSAtXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiAgaGlnaGlnaHQgY2FuZGlkYXRlIGluIGNlbGwgdGhhdCBoZWxwcyBlbGltaW5hdGUgYW5vdGhlciBjYW5kaWRhdGVcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0dmFyIHVJQm9hcmRIaWdobGlnaHRDYW5kaWRhdGUgPSBmdW5jdGlvbihjZWxsSW5kZXgsIGRpZ2l0KXtcblx0XHRcdCQoXCIjaW5wdXQtXCIrY2VsbEluZGV4K1wiLWNhbmRpZGF0ZXMgZGl2Om50aC1vZi10eXBlKFwiK2RpZ2l0K1wiKVwiKS5hZGRDbGFzcyhcImNhbmRpZGF0ZS0taGlnaGxpZ2h0XCIpO1xuXHRcdH07XG5cblxuXHRcdC8qIHJlbW92ZUNhbmRpZGF0ZXNGcm9tQ2VsbFxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHR2YXIgcmVtb3ZlQ2FuZGlkYXRlc0Zyb21DZWxsID0gZnVuY3Rpb24oY2VsbCwgY2FuZGlkYXRlcyl7XG5cdFx0XHR2YXIgYm9hcmRDZWxsID0gYm9hcmRbY2VsbF07XG5cdFx0XHR2YXIgYyA9IGJvYXJkQ2VsbC5jYW5kaWRhdGVzO1xuXHRcdFx0dmFyIGNlbGxVcGRhdGVkID0gZmFsc2U7XG5cdFx0XHRmb3IodmFyIGk9MDsgaSA8IGNhbmRpZGF0ZXMubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHQvLy0xIGJlY2F1c2UgY2FuZGlkYXRlICcxJyBpcyBhdCBpbmRleCAwIGV0Yy5cblx0XHRcdFx0aWYoY1tjYW5kaWRhdGVzW2ldLTFdICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0Y1tjYW5kaWRhdGVzW2ldLTFdID0gbnVsbDsgLy93cml0ZXMgdG8gYm9hcmQgdmFyaWFibGVcblx0XHRcdFx0XHRjZWxsVXBkYXRlZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKGNlbGxVcGRhdGVkICYmIHNvbHZlTW9kZSA9PT0gU09MVkVfTU9ERV9TVEVQKVxuXHRcdFx0XHR1cGRhdGVVSUJvYXJkQ2VsbChjZWxsLCB7bW9kZTogXCJvbmx5LWNhbmRpZGF0ZXNcIn0pO1xuXHRcdH07XG5cblxuXHRcdC8qIHJlbW92ZUNhbmRpZGF0ZXNGcm9tQ2VsbHNcblx0XHQgKiAtLS1yZXR1cm5zIGxpc3Qgb2YgY2VsbHMgd2hlcmUgYW55IGNhbmRpZGF0cyB3aGVyZSByZW1vdmVkXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdHZhciByZW1vdmVDYW5kaWRhdGVzRnJvbUNlbGxzID0gZnVuY3Rpb24oY2VsbHMsIGNhbmRpZGF0ZXMpe1xuXHRcdFx0Ly9sb2coXCJyZW1vdmVDYW5kaWRhdGVzRnJvbUNlbGxzXCIpO1xuXHRcdFx0dmFyIGNlbGxzVXBkYXRlZCA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgaT0wOyBpIDwgY2VsbHMubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHR2YXIgYyA9IGJvYXJkW2NlbGxzW2ldXS5jYW5kaWRhdGVzO1xuXG5cdFx0XHRcdGZvcih2YXIgaj0wOyBqIDwgY2FuZGlkYXRlcy5sZW5ndGg7IGorKyl7XG5cdFx0XHRcdFx0dmFyIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbal07XG5cdFx0XHRcdFx0Ly8tMSBiZWNhdXNlIGNhbmRpZGF0ZSAnMScgaXMgYXQgaW5kZXggMCBldGMuXG5cdFx0XHRcdFx0aWYoY1tjYW5kaWRhdGUtMV0gIT09IG51bGwpIHtcblx0XHRcdFx0XHRcdGNbY2FuZGlkYXRlLTFdID0gbnVsbDsgLy9OT1RFOiBhbHNvIGRlbGV0ZXMgdGhlbSBmcm9tIGJvYXJkIHZhcmlhYmxlXG5cdFx0XHRcdFx0XHRjZWxsc1VwZGF0ZWQucHVzaChjZWxsc1tpXSk7IC8vd2lsbCBwdXNoIHNhbWUgY2VsbCBtdWx0aXBsZSB0aW1lc1xuXG5cdFx0XHRcdFx0XHRpZihzb2x2ZU1vZGU9PT1TT0xWRV9NT0RFX1NURVApe1xuXHRcdFx0XHRcdFx0XHQvL2hpZ2hsaWdodCBjYW5kaWRhdGUgYXMgdG8gYmUgcmVtb3ZlZCBvbiBib2FyZFxuXHRcdFx0XHRcdFx0XHR1SUJvYXJkSGlnaGxpZ2h0UmVtb3ZlQ2FuZGlkYXRlKGNlbGxzW2ldLGNhbmRpZGF0ZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gY2VsbHNVcGRhdGVkO1xuXHRcdH07XG5cblx0XHR2YXIgaGlnaExpZ2h0Q2FuZGlkYXRlc09uQ2VsbHMgPSBmdW5jdGlvbihjYW5kaWRhdGVzLCBjZWxscyl7XG5cdFx0XHRmb3IodmFyIGk9MDsgaSA8IGNlbGxzLmxlbmd0aDsgaSsrKXtcblx0XHRcdFx0dmFyIGNlbGxDYW5kaWRhdGVzID0gYm9hcmRbY2VsbHNbaV1dLmNhbmRpZGF0ZXM7XG5cblx0XHRcdFx0Zm9yKHZhciBqPTA7IGogPCBjZWxsQ2FuZGlkYXRlcy5sZW5ndGg7IGorKyl7XG5cdFx0XHRcdFx0aWYoY29udGFpbnMoY2FuZGlkYXRlcywgY2VsbENhbmRpZGF0ZXNbal0pKVxuXHRcdFx0XHRcdFx0dUlCb2FyZEhpZ2hsaWdodENhbmRpZGF0ZShjZWxsc1tpXSxjZWxsQ2FuZGlkYXRlc1tqXSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXHRcdH07XG5cblxuXHRcdHZhciByZXNldEJvYXJkVmFyaWFibGVzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRib2FyZEZpbmlzaGVkID0gZmFsc2U7XG5cdFx0XHRib2FyZEVycm9yID0gZmFsc2U7XG5cdFx0XHRvbmx5VXBkYXRlZENhbmRpZGF0ZXMgPSBmYWxzZTtcblx0XHRcdHVzZWRTdHJhdGVnaWVzID0gW107XG5cdFx0XHRncmFkaW5nTW9kZSA9IGZhbHNlO1xuXHRcdH07XG5cblxuXHRcdC8qIGNsZWFyQm9hcmRcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0dmFyIGNsZWFyQm9hcmQgPSBmdW5jdGlvbigpe1xuXHRcdFx0cmVzZXRCb2FyZFZhcmlhYmxlcygpO1xuXG5cdFx0XHQvL3Jlc2V0IGJvYXJkIHZhcmlhYmxlXG5cdFx0XHR2YXIgY2FuZHMgPSBib2FyZE51bWJlcnMuc2xpY2UoMCk7XG5cdFx0XHRmb3IodmFyIGk9MDsgaSA8Ym9hcmRTaXplKmJvYXJkU2l6ZTtpKyspe1xuXHRcdFx0XHRib2FyZFtpXSA9IHtcblx0XHRcdFx0XHR2YWw6IG51bGwsXG5cdFx0XHRcdFx0Y2FuZGlkYXRlczogY2FuZHMuc2xpY2UoKVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHQvL3Jlc2V0IFVJXG5cdFx0XHQkYm9hcmRJbnB1dHNcblx0XHRcdFx0LnJlbW92ZUNsYXNzKFwiaGlnaGxpZ2h0LXZhbFwiKVxuXHRcdFx0XHQudmFsKFwiXCIpO1xuXG5cdFx0XHR1cGRhdGVVSUJvYXJkKGZhbHNlKTtcblx0XHR9O1xuXG5cdFx0dmFyIGdldE51bGxDYW5kaWRhdGVzTGlzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGwgPSBbXTtcblx0XHRcdGZvciAodmFyIGk9MDsgaSA8IGJvYXJkU2l6ZTsgaSsrKXtcblx0XHRcdFx0bC5wdXNoKG51bGwpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGw7XG5cdFx0fTtcblxuXG5cdFx0LyogcmVzZXRDYW5kaWRhdGVzXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdHZhciByZXNldENhbmRpZGF0ZXMgPSBmdW5jdGlvbih1cGRhdGVVSSl7XG5cdFx0XHR2YXIgcmVzZXRDYW5kaWRhdGVzTGlzdCA9IGJvYXJkTnVtYmVycy5zbGljZSgwKTtcblx0XHRcdGZvcih2YXIgaT0wOyBpIDxib2FyZFNpemUqYm9hcmRTaXplO2krKyl7XG5cdFx0XHRcdGlmKGJvYXJkW2ldLnZhbCA9PT0gbnVsbCl7XG5cdFx0XHRcdFx0Ym9hcmRbaV0uY2FuZGlkYXRlcyA9IHJlc2V0Q2FuZGlkYXRlc0xpc3Quc2xpY2UoKTsgLy9vdGhlcndpc2Ugc2FtZSBsaXN0IChub3QgcmVmZXJlbmNlISkgb24gZXZlcnkgY2VsbFxuXHRcdFx0XHRcdGlmKHVwZGF0ZVVJICE9PSBmYWxzZSlcblx0XHRcdFx0XHRcdCQoXCIjaW5wdXQtXCIraStcIi1jYW5kaWRhdGVzXCIpLmh0bWwoYnVpbGRDYW5kaWRhdGVzU3RyaW5nKHJlc2V0Q2FuZGlkYXRlc0xpc3QpKTtcblx0XHRcdFx0fSBlbHNlIGlmKHVwZGF0ZVVJICE9PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0JChcIiNpbnB1dC1cIitpK1wiLWNhbmRpZGF0ZXNcIikuaHRtbChcIlwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvKiBzZXRCb2FyZENlbGwgLSBkb2VzIG5vdCB1cGRhdGUgVUlcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0dmFyIHNldEJvYXJkQ2VsbCA9IGZ1bmN0aW9uKGNlbGxJbmRleCwgdmFsKXtcblx0XHRcdHZhciBib2FyZENlbGwgPSBib2FyZFtjZWxsSW5kZXhdO1xuXHRcdFx0Ly91cGRhdGUgdmFsXG5cdFx0XHRib2FyZENlbGwudmFsID0gdmFsO1xuXHRcdFx0aWYodmFsICE9PSBudWxsKVxuXHRcdFx0XHRib2FyZENlbGwuY2FuZGlkYXRlcyA9IGdldE51bGxDYW5kaWRhdGVzTGlzdCgpO1xuXHRcdH07XG5cblx0XHQvKiBpbmRleEluSG91c2Vcblx0XHQgKiAtLS0tLS0tLS0tLS0tLVxuXHRcdCAqICByZXR1cm5zIGluZGV4ICgwLTkpIGZvciBkaWdpdCBpbiBob3VzZSwgZmFsc2UgaWYgbm90IGluIGhvdXNlXG5cdFx0ICogIE5PVEU6IGNhcmVmdWwgZXZhbHVhdGluZyByZXR1cm5lZCBpbmRleCBpcyBJTiByb3csIGFzIDA9PWZhbHNlLlxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHQgdmFyIGluZGV4SW5Ib3VzZSA9IGZ1bmN0aW9uKGRpZ2l0LGhvdXNlKXtcblx0XHRcdGZvcih2YXIgaT0wOyBpIDwgYm9hcmRTaXplOyBpKyspe1xuXHRcdFx0XHRpZihib2FyZFtob3VzZVtpXV0udmFsPT09ZGlnaXQpXG5cdFx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0XHQvL25vdCBpbiBob3VzZVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cblxuXG5cdFx0IC8qIGhvdXNlc1dpdGhDZWxsXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiAgcmV0dXJucyBob3VzZXMgdGhhdCBhIGNlbGwgYmVsb25ncyB0b1xuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHQgdmFyIGhvdXNlc1dpdGhDZWxsID0gZnVuY3Rpb24oY2VsbEluZGV4KXtcblx0XHRcdHZhciBib3hTaWRlU2l6ZSA9IE1hdGguc3FydChib2FyZFNpemUpO1xuXHRcdFx0dmFyIGhvdXNlcyA9IFtdO1xuXHRcdFx0Ly9ob3Jpc29udGFsIHJvd1xuXHRcdFx0dmFyIGhyb3cgPSBNYXRoLmZsb29yKGNlbGxJbmRleC9ib2FyZFNpemUpO1xuXHRcdFx0aG91c2VzLnB1c2goaHJvdyk7XG5cdFx0XHQvL3ZlcnRpY2FsIHJvd1xuXHRcdFx0dmFyIHZyb3cgPSBNYXRoLmZsb29yKGNlbGxJbmRleCVib2FyZFNpemUpO1xuXHRcdFx0aG91c2VzLnB1c2godnJvdyk7XG5cdFx0XHQvL2JveFxuXHRcdFx0dmFyIGJveCA9IChNYXRoLmZsb29yKGhyb3cvYm94U2lkZVNpemUpKmJveFNpZGVTaXplKSArIE1hdGguZmxvb3IodnJvdy9ib3hTaWRlU2l6ZSk7XG5cdFx0XHRob3VzZXMucHVzaChib3gpO1xuXG5cdFx0XHRyZXR1cm4gaG91c2VzO1xuXHRcdH07XG5cblxuXHRcdC8qIG51bWJlcnNMZWZ0XG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiAgcmV0dXJucyB1bnVzZWQgbnVtYmVycyBpbiBhIGhvdXNlXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdCB2YXIgbnVtYmVyc0xlZnQgPSBmdW5jdGlvbihob3VzZSl7XG5cdFx0XHR2YXIgbnVtYmVycyA9IGJvYXJkTnVtYmVycy5zbGljZSgpO1xuXHRcdFx0Zm9yKHZhciBpPTA7IGkgPCBob3VzZS5sZW5ndGg7IGkrKyl7XG5cdFx0XHRcdGZvcih2YXIgaj0wOyBqIDwgbnVtYmVycy5sZW5ndGg7IGorKyl7XG5cdFx0XHRcdFx0Ly9yZW1vdmUgYWxsIG51bWJlcnMgdGhhdCBhcmUgYWxyZWFkeSBiZWluZyB1c2VkXG5cdFx0XHRcdFx0aWYobnVtYmVyc1tqXSA9PT0gYm9hcmRbaG91c2VbaV1dLnZhbClcblx0XHRcdFx0XHRcdG51bWJlcnMuc3BsaWNlKGosMSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vcmV0dXJuIHJlbWFpbmluZyBudW1iZXJzXG5cdFx0XHRyZXR1cm4gbnVtYmVycztcblx0XHR9O1xuXG5cblx0XHQgLyogbnVtYmVyc1Rha2VuXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiAgcmV0dXJucyB1c2VkIG51bWJlcnMgaW4gYSBob3VzZVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHQgdmFyIG51bWJlcnNUYWtlbiA9IGZ1bmN0aW9uKGhvdXNlKXtcblx0XHRcdHZhciBudW1iZXJzID0gW107XG5cdFx0XHRmb3IodmFyIGk9MDsgaSA8IGhvdXNlLmxlbmd0aDsgaSsrKXtcblx0XHRcdFx0dmFyIG4gPSBib2FyZFtob3VzZVtpXV0udmFsO1xuXHRcdFx0XHRpZihuICE9PSBudWxsKVxuXHRcdFx0XHRcdG51bWJlcnMucHVzaChuKTtcblx0XHRcdH1cblx0XHRcdC8vcmV0dXJuIHJlbWFpbmluZyBudW1iZXJzXG5cdFx0XHRyZXR1cm4gbnVtYmVycztcblx0XHR9O1xuXG5cblx0XHQgLyogY2FuZGlkYXRlc0xlZnRcblx0XHQgKiAtLS0tLS0tLS0tLS0tLVxuXHRcdCAqICByZXR1cm5zIGxpc3Qgb2YgY2FuZGlkYXRlcyBmb3IgY2VsbCAod2l0aCBudWxsJ3MgcmVtb3ZlZClcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0IHZhciBjYW5kaWRhdGVzTGVmdCA9IGZ1bmN0aW9uKGNlbGxJbmRleCl7XG5cdFx0XHR2YXIgdCA9IFtdO1xuXHRcdFx0dmFyIGNhbmRpZGF0ZXMgPSBib2FyZFtjZWxsSW5kZXhdLmNhbmRpZGF0ZXM7XG5cdFx0XHRmb3IgKHZhciBpPTA7IGkgPCBjYW5kaWRhdGVzLmxlbmd0aDsgaSsrKXtcblx0XHRcdFx0aWYgKGNhbmRpZGF0ZXNbaV0gIT09IG51bGwpXG5cdFx0XHRcdFx0dC5wdXNoKGNhbmRpZGF0ZXNbaV0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHQ7XG5cdFx0fTtcblxuXG5cdFx0IC8qIGNlbGxzRm9yQ2FuZGlkYXRlXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiAgcmV0dXJucyBsaXN0IG9mIHBvc3NpYmxlIGNlbGxzIChjZWxsSW5kZXgpIGZvciBjYW5kaWRhdGUgKGluIGEgaG91c2UpXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdCB2YXIgY2VsbHNGb3JDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUsaG91c2Upe1xuXHRcdFx0dmFyIHQgPSBbXTtcblx0XHRcdGZvcih2YXIgaT0wOyBpIDwgaG91c2UubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHR2YXIgY2VsbCA9IGJvYXJkW2hvdXNlW2ldXTtcblx0XHRcdFx0dmFyIGNhbmRpZGF0ZXMgPSBjZWxsLmNhbmRpZGF0ZXM7XG5cdFx0XHRcdGlmKGNvbnRhaW5zKGNhbmRpZGF0ZXMsIGNhbmRpZGF0ZSkpXG5cdFx0XHRcdFx0dC5wdXNoKGhvdXNlW2ldKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0O1xuXHRcdH07XG5cblxuXG5cdFx0Lyogb3BlblNpbmdsZXNcblx0XHQgKiAtLS0tLS0tLS0tLS0tLVxuXHRcdCAqICBjaGVja3MgZm9yIGhvdXNlcyB3aXRoIGp1c3Qgb25lIGVtcHR5IGNlbGwgLSBmaWxscyBpdCBpbiBib2FyZCB2YXJpYWJsZSBpZiBzb1xuXHRcdCAqIC0tIHJldHVybnMgZWZmZWN0ZWRDZWxscyAtIHRoZSB1cGRhdGVkIGNlbGwocyksIG9yIGZhbHNlXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdGZ1bmN0aW9uIG9wZW5TaW5nbGVzKCl7XG5cdFx0XHQvL2xvZyhcImxvb2tpbmcgZm9yIG9wZW5TaW5nbGVzXCIpO1xuXG5cdFx0XHQvL2ZvciBlYWNoIHR5cGUgb2YgaG91c2UuLihob3Igcm93IC8gdmVydCByb3cgLyBib3gpXG5cdFx0XHR2YXIgaGxlbmd0aCA9IGhvdXNlcy5sZW5ndGg7XG5cdFx0XHRmb3IodmFyIGk9MDsgaSA8IGhsZW5ndGg7IGkrKyl7XG5cblx0XHRcdFx0Ly9mb3IgZWFjaCBzdWNoIGhvdXNlXG5cdFx0XHRcdHZhciBob3VzZXNDb21wbGV0ZWQgPSAwOyAvL2lmIGdvZXMgdXAgdG8gOSwgc3Vkb2t1IGlzIGZpbmlzaGVkXG5cblx0XHRcdFx0Zm9yKHZhciBqPTA7IGogPCBib2FyZFNpemU7IGorKyl7XG5cdFx0XHRcdFx0dmFyIGVtcHR5Q2VsbHMgPSBbXTtcblxuXHRcdFx0XHRcdC8vIGZvciBlYWNoIGNlbGwuLlxuXHRcdFx0XHRcdGZvciAodmFyIGs9MDsgayA8IGJvYXJkU2l6ZTsgaysrKXtcblxuXHRcdFx0XHRcdFx0dmFyIGJvYXJkSW5kZXggPSBob3VzZXNbaV1bal1ba107XG5cdFx0XHRcdFx0XHRpZihib2FyZFtib2FyZEluZGV4XS52YWwgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0ZW1wdHlDZWxscy5wdXNoKHtob3VzZTogaG91c2VzW2ldW2pdLCBjZWxsOiBib2FyZEluZGV4fSk7XG5cdFx0XHRcdFx0XHRcdGlmKGVtcHR5Q2VsbHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vbG9nKFwibW9yZSB0aGFuIG9uZSBlbXB0eSBjZWxsLCBob3VzZSBhcmVhIDpbXCIraStcIl1bXCIraitcIl1cIik7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly9vbmUgZW1wdHkgY2VsbCBmb3VuZFxuXHRcdFx0XHRcdGlmKGVtcHR5Q2VsbHMubGVuZ3RoID09PSAxKXtcblx0XHRcdFx0XHRcdHZhciBlbXB0eUNlbGwgPSBlbXB0eUNlbGxzWzBdO1xuXHRcdFx0XHRcdFx0Ly9ncmFiIG51bWJlciB0byBmaWxsIGluIGluIGNlbGxcblx0XHRcdFx0XHRcdHZhciB2YWwgPSBudW1iZXJzTGVmdChlbXB0eUNlbGwuaG91c2UpO1xuXHRcdFx0XHRcdFx0aWYodmFsLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHRcdFx0Ly9sb2coXCJvcGVuU2luZ2xlcyBmb3VuZCBtb3JlIHRoYW4gb25lIGFuc3dlciBmb3I6IFwiK2VtcHR5Q2VsbC5jZWxsK1wiIC4uIGJvYXJkIGluY29ycmVjdCFcIik7XG5cdFx0XHRcdFx0XHRcdGJvYXJkRXJyb3IgPSB0cnVlOyAvL3RvIGZvcmNlIHNvbHZlIGFsbCBsb29wIHRvIHN0b3Bcblx0XHRcdFx0XHRcdFx0cmV0dXJuIC0xOyAvL2Vycm9yXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vbG9nKFwiZmlsbCBpbiBzaW5nbGUgZW1wdHkgY2VsbCBcIiArIGVtcHR5Q2VsbC5jZWxsK1wiLCB2YWw6IFwiK3ZhbCk7XG5cblx0XHRcdFx0XHRcdHNldEJvYXJkQ2VsbChlbXB0eUNlbGwuY2VsbCwgdmFsWzBdKTsgLy9kb2VzIG5vdCB1cGRhdGUgVUlcblx0XHRcdFx0XHRcdGlmKHNvbHZlTW9kZT09PVNPTFZFX01PREVfU1RFUClcblx0XHRcdFx0XHRcdFx0dUlCb2FyZEhpZ2hsaWdodENhbmRpZGF0ZShlbXB0eUNlbGwuY2VsbCwgdmFsWzBdKTtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIFtlbXB0eUNlbGwuY2VsbF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vbm8gZW1wdHkgZWxscy4uXG5cdFx0XHRcdFx0aWYoZW1wdHlDZWxscy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdGhvdXNlc0NvbXBsZXRlZCsrO1xuXHRcdFx0XHRcdFx0Ly9sb2coaStcIiBcIitqK1wiOiBcIitob3VzZXNDb21wbGV0ZWQpO1xuXHRcdFx0XHRcdFx0aWYoaG91c2VzQ29tcGxldGVkID09PSBib2FyZFNpemUpe1xuXHRcdFx0XHRcdFx0XHRib2FyZEZpbmlzaGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIC0xOyAvL3NwZWNpYWwgY2FzZSwgZG9uZVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXG5cdFx0LyogdmlzdWFsRWxpbWluYXRpb25PZkNhbmRpZGF0ZXNcblx0XHQgKiAtLS0tLS0tLS0tLS0tLVxuXHRcdCAqIEFMV0FZUyByZXR1cm5zIGZhbHNlXG5cdFx0ICogLS0gc3BlY2lhbCBjb21wYXJlZCB0byBvdGhlciBzdHJhdHM6IGRvZXNuJ3Qgc3RlcCAtIHVwZGF0ZXMgd2hvbGUgYm9hcmQsXG5cdFx0IGluIG9uZSBnby4gU2luY2UgaXQgYWxzbyBvbmx5IHVwZGF0ZXMgY2FuZGlkYXRlcywgd2UgY2FuIHNraXAgc3RyYWlnaHQgdG8gbmV4dCBzdHJhdCwgc2luY2Ugd2Uga25vdyB0aGF0IG5laXRoZXIgdGhpcyBvbmUgbm9yIHRoZSBvbmUocykgYmVmb3JlICh0aGF0IG9ubHkgbG9vayBhdCBhY3R1YWwgbnVtYmVycyBvbiBib2FyZCksIHdpbGwgZmluZCBhbnl0aGluZyBuZXcuXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdGZ1bmN0aW9uIHZpc3VhbEVsaW1pbmF0aW9uT2ZDYW5kaWRhdGVzKCl7XG5cdFx0XHQvL2ZvciBlYWNoIHR5cGUgb2YgaG91c2UuLihob3Igcm93IC8gdmVydCByb3cgLyBib3gpXG5cdFx0XHR2YXIgaGxlbmd0aCA9IGhvdXNlcy5sZW5ndGg7XG5cdFx0XHRmb3IodmFyIGk9MDsgaSA8IGhsZW5ndGg7IGkrKyl7XG5cblx0XHRcdFx0Ly9mb3IgZWFjaCBzdWNoIGhvdXNlXG5cdFx0XHRcdGZvcih2YXIgaj0wOyBqIDwgYm9hcmRTaXplOyBqKyspe1xuXHRcdFx0XHRcdHZhciBob3VzZSA9IGhvdXNlc1tpXVtqXTtcblx0XHRcdFx0XHR2YXIgY2FuZGlkYXRlc1RvUmVtb3ZlID0gbnVtYmVyc1Rha2VuKGhvdXNlKTtcblx0XHRcdFx0XHQvL2xvZyhjYW5kaWRhdGVzVG9SZW1vdmUpO1xuXG5cdFx0XHRcdFx0Ly8gZm9yIGVhY2ggY2VsbC4uXG5cdFx0XHRcdFx0Zm9yICh2YXIgaz0wOyBrIDwgYm9hcmRTaXplOyBrKyspe1xuXHRcdFx0XHRcdFx0dmFyIGNlbGwgPSBob3VzZVtrXTtcblx0XHRcdFx0XHRcdHZhciBjYW5kaWRhdGVzID0gYm9hcmRbY2VsbF0uY2FuZGlkYXRlcztcblx0XHRcdFx0XHRcdHJlbW92ZUNhbmRpZGF0ZXNGcm9tQ2VsbChjZWxsLCBjYW5kaWRhdGVzVG9SZW1vdmUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXG5cdFx0LyogdmlzdWFsRWxpbWluYXRpb25cblx0XHQgKiAtLS0tLS0tLS0tLS0tLVxuXHRcdCAqIExvb2tzIGZvciBob3VzZXMgd2hlcmUgYSBkaWdpdCBvbmx5IGFwcGVhcnMgaW4gb25lIHNsb3Rcblx0XHQgKiAtbWVhbmluZyB3ZSBrbm93IHRoZSBkaWdpdCBnb2VzIGluIHRoYXQgc2xvdC5cblx0XHQgKiAtLSByZXR1cm5zIGVmZmVjdGVkQ2VsbHMgLSB0aGUgdXBkYXRlZCBjZWxsKHMpLCBvciBmYWxzZVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRmdW5jdGlvbiB2aXN1YWxFbGltaW5hdGlvbigpe1xuXHRcdFx0Ly9sb2coXCJ2aXN1YWxFbGltaW5hdGlvblwiKTtcblx0XHRcdC8vZm9yIGVhY2ggdHlwZSBvZiBob3VzZS4uKGhvciByb3cgLyB2ZXJ0IHJvdyAvIGJveClcblx0XHRcdHZhciBobGVuZ3RoID0gaG91c2VzLmxlbmd0aDtcblx0XHRcdGZvcih2YXIgaT0wOyBpIDwgaGxlbmd0aDsgaSsrKXtcblxuXHRcdFx0XHQvL2ZvciBlYWNoIHN1Y2ggaG91c2Vcblx0XHRcdFx0Zm9yKHZhciBqPTA7IGogPCBib2FyZFNpemU7IGorKyl7XG5cdFx0XHRcdFx0dmFyIGhvdXNlID0gaG91c2VzW2ldW2pdO1xuXHRcdFx0XHRcdHZhciBkaWdpdHMgPSBudW1iZXJzTGVmdChob3VzZSk7XG5cblx0XHRcdFx0XHQvL2ZvciBlYWNoIGRpZ2l0IGxlZnQgZm9yIHRoYXQgaG91c2Vcblx0XHRcdFx0XHRmb3IgKHZhciBrPTA7IGsgPCBkaWdpdHMubGVuZ3RoOyBrKyspe1xuXHRcdFx0XHRcdFx0dmFyIGRpZ2l0ID0gZGlnaXRzW2tdO1xuXHRcdFx0XHRcdFx0dmFyIHBvc3NpYmxlQ2VsbHMgPSBbXTtcblxuXHRcdFx0XHRcdFx0Ly9mb3IgZWFjaCBjZWxsIGluIGhvdXNlXG5cdFx0XHRcdFx0XHRmb3IodmFyIGw9MDsgbCA8IGJvYXJkU2l6ZTsgbCsrKXtcblx0XHRcdFx0XHRcdFx0dmFyIGNlbGwgPSBob3VzZVtsXTtcblx0XHRcdFx0XHRcdFx0dmFyIGJvYXJkQ2VsbCA9IGJvYXJkW2NlbGxdO1xuXHRcdFx0XHRcdFx0XHQvL2lmIHRoZSBkaWdpdCBvbmx5IGFwcGVhcnMgYXMgYSBjYW5kaWRhdGUgaW4gb25lIHNsb3QsIHRoYXQncyB3aGVyZSBpdCBoYXMgdG8gZ29cblx0XHRcdFx0XHRcdFx0aWYgKGNvbnRhaW5zKGJvYXJkQ2VsbC5jYW5kaWRhdGVzLCBkaWdpdCkpe1xuXHRcdFx0XHRcdFx0XHRcdHBvc3NpYmxlQ2VsbHMucHVzaChjZWxsKTtcblx0XHRcdFx0XHRcdFx0XHRpZihwb3NzaWJsZUNlbGxzLmxlbmd0aCA+IDEpXG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhazsgLy9ubyB3ZSBjYW4ndCB0ZWxsIGFueXRoaW5nIGluIHRoaXMgY2FzZVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmKHBvc3NpYmxlQ2VsbHMubGVuZ3RoID09PSAxKXtcblx0XHRcdFx0XHRcdFx0dmFyIGNlbGxJbmRleCA9IHBvc3NpYmxlQ2VsbHNbMF07XG5cblx0XHRcdFx0XHRcdFx0Ly9sb2coXCJvbmx5IHNsb3Qgd2hlcmUgXCIrZGlnaXQrXCIgYXBwZWFycyBpbiBob3VzZS4gXCIpO1xuXG5cblx0XHRcdFx0XHRcdFx0c2V0Qm9hcmRDZWxsKGNlbGxJbmRleCwgZGlnaXQpOyAvL2RvZXMgbm90IHVwZGF0ZSBVSVxuXG5cdFx0XHRcdFx0XHRcdGlmKHNvbHZlTW9kZT09PVNPTFZFX01PREVfU1RFUClcblx0XHRcdFx0XHRcdFx0XHR1SUJvYXJkSGlnaGxpZ2h0Q2FuZGlkYXRlKGNlbGxJbmRleCwgZGlnaXQpO1xuXG5cdFx0XHRcdFx0XHRcdG9ubHlVcGRhdGVkQ2FuZGlkYXRlcyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gW2NlbGxJbmRleF07IC8vb25lIHN0ZXAgYXQgdGhlIHRpbWVcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXG5cdFx0Lyogc2luZ2xlQ2FuZGlkYXRlXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiBMb29rcyBmb3IgY2VsbHMgd2l0aCBvbmx5IG9uZSBjYW5kaWRhdGVcblx0XHQgKiAtLSByZXR1cm5zIGVmZmVjdGVkQ2VsbHMgLSB0aGUgdXBkYXRlZCBjZWxsKHMpLCBvciBmYWxzZVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRmdW5jdGlvbiBzaW5nbGVDYW5kaWRhdGUoKXtcblx0XHRcdC8vYmVmb3JlIHdlIHN0YXJ0IHdpdGggY2FuZGlkYXRlIHN0cmF0ZWdpZXMsIHdlIG5lZWQgdG8gdXBkYXRlIGNhbmRpZGF0ZXMgZnJvbSBsYXN0IHJvdW5kOlxuXHRcdFx0dmlzdWFsRWxpbWluYXRpb25PZkNhbmRpZGF0ZXMoKTsgLy9UT0RPOiBhIGJpdCBoYWNreXksIHNob3VsZCBwcm9iYWJseSBub3QgYmUgaGVyZVxuXG5cdFx0XHQvL2ZvciBlYWNoIGNlbGxcblxuXHRcdFx0Zm9yKHZhciBpPTA7IGkgPCBib2FyZC5sZW5ndGg7IGkrKyl7XG5cdFx0XHRcdHZhciBjZWxsID0gYm9hcmRbaV07XG5cdFx0XHRcdHZhciBjYW5kaWRhdGVzID0gY2VsbC5jYW5kaWRhdGVzO1xuXG5cdFx0XHRcdC8vZm9yIGVhY2ggY2FuZGlkYXRlIGZvciB0aGF0IGNlbGxcblx0XHRcdFx0dmFyIHBvc3NpYmxlQ2FuZGlkYXRlcyA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBqPTA7IGogPCBjYW5kaWRhdGVzLmxlbmd0aDsgaisrKXtcblx0XHRcdFx0XHRpZiAoY2FuZGlkYXRlc1tqXSAhPT0gbnVsbClcblx0XHRcdFx0XHRcdHBvc3NpYmxlQ2FuZGlkYXRlcy5wdXNoKGNhbmRpZGF0ZXNbal0pO1xuXHRcdFx0XHRcdGlmKHBvc3NpYmxlQ2FuZGlkYXRlcy5sZW5ndGggPjEpXG5cdFx0XHRcdFx0XHRicmVhazsgLy9jYW4ndCBmaW5kIGFuc3dlciBoZXJlXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYocG9zc2libGVDYW5kaWRhdGVzLmxlbmd0aCA9PT0gMSl7XG5cdFx0XHRcdFx0dmFyIGRpZ2l0ID0gcG9zc2libGVDYW5kaWRhdGVzWzBdO1xuXG5cdFx0XHRcdFx0Ly9sb2coXCJvbmx5IG9uZSBjYW5kaWRhdGUgaW4gY2VsbDogXCIrZGlnaXQrXCIgaW4gaG91c2UuIFwiKTtcblxuXG5cdFx0XHRcdFx0c2V0Qm9hcmRDZWxsKGksIGRpZ2l0KTsgLy9kb2VzIG5vdCB1cGRhdGUgVUlcblx0XHRcdFx0XHRpZihzb2x2ZU1vZGU9PT1TT0xWRV9NT0RFX1NURVApXG5cdFx0XHRcdFx0XHR1SUJvYXJkSGlnaGxpZ2h0Q2FuZGlkYXRlKGksIGRpZ2l0KTtcblxuXHRcdFx0XHRcdG9ubHlVcGRhdGVkQ2FuZGlkYXRlcyA9IGZhbHNlO1xuXHRcdFx0XHRcdHJldHVybiBbaV07IC8vb25lIHN0ZXAgYXQgdGhlIHRpbWVcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXG5cdFx0LyogcG9pbnRpbmdFbGltaW5hdGlvblxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tXG5cdFx0ICogaWYgY2FuZGlkYXRlcyBvZiBhIHR5cGUgKGRpZ2l0KSBpbiBhIGJveCBvbmx5IGFwcGFyIG9uIG9uZSByb3csIGFsbCBvdGhlclxuXHRcdCAqIHNhbWUgdHlwZSBjYW5kaWRhdGVzIGNhbiBiZSByZW1vdmVkIGZyb20gdGhhdCByb3dcblx0XHQgLS0tLS0tLS0tLS0tT1ItLS0tLS0tLS0tLS0tLVxuXHRcdCAqIHNhbWUgYXMgYWJvdmUsIGJ1dCByb3cgaW5zdGVhZCBvZiBib3gsIGFuZCB2aWNlIHZlcnNhLlxuXHRcdCAqIC0tIHJldHVybnMgZWZmZWN0ZWRDZWxscyAtIHRoZSB1cGRhdGVkIGNlbGwocyksIG9yIGZhbHNlXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdGZ1bmN0aW9uIHBvaW50aW5nRWxpbWluYXRpb24oKXtcblx0XHRcdHZhciBlZmZlY3RlZENlbGxzID0gZmFsc2U7XG5cblx0XHRcdC8vZm9yIGVhY2ggdHlwZSBvZiBob3VzZS4uKGhvciByb3cgLyB2ZXJ0IHJvdyAvIGJveClcblx0XHRcdHZhciBobGVuZ3RoID0gaG91c2VzLmxlbmd0aDtcblx0XHRcdGZvcih2YXIgYT0wOyBhIDwgaGxlbmd0aDsgYSsrKXtcblx0XHRcdFx0dmFyIGhvdXNlVHlwZSA9IGE7XG5cblx0XHRcdFx0Zm9yKHZhciBpPTA7IGkgPCBib2FyZFNpemU7IGkrKyl7XG5cdFx0XHRcdFx0dmFyIGhvdXNlID0gaG91c2VzW2hvdXNlVHlwZV1baV07XG5cblx0XHRcdFx0XHQvL2ZvciBlYWNoIGRpZ2l0IGxlZnQgZm9yIHRoaXMgaG91c2Vcblx0XHRcdFx0XHR2YXIgZGlnaXRzID0gbnVtYmVyc0xlZnQoaG91c2UpO1xuXHRcdFx0XHRcdGZvcih2YXIgaj0wOyBqPCBkaWdpdHMubGVuZ3RoOyBqKyspe1xuXHRcdFx0XHRcdFx0dmFyIGRpZ2l0ID0gZGlnaXRzW2pdO1xuXHRcdFx0XHRcdFx0Ly9jaGVjayBpZiBkaWdpdCAoY2FuZGlkYXRlKSBvbmx5IGFwcGVhcnMgaW4gb25lIHJvdyAoaWYgY2hlY2tpbmcgYm94ZXMpLFxuXHRcdFx0XHRcdFx0Ly8sIG9yIG9ubHkgaW4gb25lIGJveCAoaWYgY2hlY2tpbmcgcm93cylcblxuXHRcdFx0XHRcdFx0dmFyIHNhbWVBbHRIb3VzZSA9IHRydWU7IC8vcm93IGlmIGNoZWNraW5nIGJveCwgYW5kIHZpY2UgdmVyc2Fcblx0XHRcdFx0XHRcdHZhciBob3VzZUlkID0gLTE7XG5cdFx0XHRcdFx0XHQvL3doZW4gcG9pbnQgY2hlY2tpbmcgZnJvbSBib3gsIG5lZWQgdG8gY29tcGFyZSBib3RoIGtpbmQgb2Ygcm93c1xuXHRcdFx0XHRcdFx0Ly90aGF0IGJveCBjZWxscyBhcmUgYWxzbyBwYXJ0IG9mLCBzbyB1c2UgaG91c2VUd29JZCBhcyB3ZWxsXG5cdFx0XHRcdFx0XHR2YXIgaG91c2VUd29JZCA9IC0xO1xuXHRcdFx0XHRcdFx0dmFyIHNhbWVBbHRUd29Ib3VzZSA9IHRydWU7XG5cdFx0XHRcdFx0XHR2YXIgY2VsbHNXaXRoQ2FuZGlkYXRlID0gW107XG5cdFx0XHRcdFx0XHQvL3ZhciBjZWxsRGlzdGFuY2UgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHQvL2ZvciBlYWNoIGNlbGxcblx0XHRcdFx0XHRcdGZvcih2YXIgaz0wOyBrIDwgaG91c2UubGVuZ3RoOyBrKyspe1xuXHRcdFx0XHRcdFx0XHR2YXIgY2VsbCA9IGhvdXNlW2tdO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChjb250YWlucyhib2FyZFtjZWxsXS5jYW5kaWRhdGVzLGRpZ2l0KSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBjZWxsSG91c2VzID0gaG91c2VzV2l0aENlbGwoY2VsbCk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIG5ld0hvdXNlSWQgPSAoaG91c2VUeXBlID09PTIpID8gY2VsbEhvdXNlc1swXSA6IGNlbGxIb3VzZXNbMl07XG5cdFx0XHRcdFx0XHRcdFx0dmFyIG5ld0hvdXNlVHdvSWQgPSAoaG91c2VUeXBlID09PTIpID8gY2VsbEhvdXNlc1sxXSA6IGNlbGxIb3VzZXNbMl07XG5cblx0XHRcdFx0XHRcdFx0XHQvL2lmKGNlbGxzV2l0aENhbmRpZGF0ZS5sZW5ndGggPiAwKXsgLy93aHkgdGhpY2UgdGhlIHNhbWU/XG5cblxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoY2VsbHNXaXRoQ2FuZGlkYXRlLmxlbmd0aCA+IDApe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZihuZXdIb3VzZUlkICE9PSBob3VzZUlkKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzYW1lQWx0SG91c2UgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZihob3VzZVR3b0lkICE9PSBuZXdIb3VzZVR3b0lkKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzYW1lQWx0VHdvSG91c2UgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZihzYW1lQWx0SG91c2UgPT09IGZhbHNlICYmIHNhbWVBbHRUd29Ib3VzZSA9PT0gZmFsc2Upe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrOyAvL25vdCBpbiBzYW1lIGFsdEhvdXNlIChib3gvcm93KVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvL31cblx0XHRcdFx0XHRcdFx0XHRob3VzZUlkID0gbmV3SG91c2VJZDtcblx0XHRcdFx0XHRcdFx0XHRob3VzZVR3b0lkID0gbmV3SG91c2VUd29JZDtcblx0XHRcdFx0XHRcdFx0XHRjZWxsc1dpdGhDYW5kaWRhdGUucHVzaChjZWxsKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoKHNhbWVBbHRIb3VzZSA9PT0gdHJ1ZSB8fCBzYW1lQWx0VHdvSG91c2UgPT09IHRydWUgKSAmJiBjZWxsc1dpdGhDYW5kaWRhdGUubGVuZ3RoID4gMCl7XG5cdFx0XHRcdFx0XHRcdC8vbG9nKFwic2FtZUFsdEhvdXNlLi5cIik7XG5cdFx0XHRcdFx0XHRcdC8vd2Ugc3RpbGwgbmVlZCB0byBjaGVjayB0aGF0IHRoaXMgYWN0dWFsbHkgZWxpbWluYXRlcyBzb21ldGhpbmcsIGkuZS4gdGhlc2UgcG9zc2libGUgY2VsbHMgY2FuJ3QgYmUgb25seSBpbiBob3VzZVxuXG5cdFx0XHRcdFx0XHRcdC8vZmlyc3QgZmlndXJlIG91dCB3aGF0IGtpbmQgb2YgaG91c2Ugd2UgYXJlIHRhbGtpbmcgYWJvdXQuLlxuXHRcdFx0XHRcdFx0XHR2YXIgaCA9IGhvdXNlc1dpdGhDZWxsKGNlbGxzV2l0aENhbmRpZGF0ZVswXSk7XG5cdFx0XHRcdFx0XHRcdHZhciBhbHRIb3VzZVR5cGUgPSAyO1xuXHRcdFx0XHRcdFx0XHRpZihob3VzZVR5cGUgPT09Mil7XG5cdFx0XHRcdFx0XHRcdFx0aWYoc2FtZUFsdEhvdXNlKVxuXHRcdFx0XHRcdFx0XHRcdFx0YWx0SG91c2VUeXBlID0gMDtcblx0XHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdFx0XHRhbHRIb3VzZVR5cGUgPSAxO1xuXHRcdFx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHRcdFx0XHR2YXIgYWx0SG91c2UgPSBob3VzZXNbYWx0SG91c2VUeXBlXVtoW2FsdEhvdXNlVHlwZV1dO1xuXHRcdFx0XHRcdFx0XHR2YXIgY2VsbHNFZmZlY3RlZCA9IFtdO1xuXG5cdFx0XHRcdFx0XHRcdC8vbG9nKFwiaG91c2VzW1wiK2hvdXNlVHlwZStcIl1bXCIraFtob3VzZVR5cGVdK1wiXS5sZW5ndGg6IFwiK2hvdXNlc1tob3VzZVR5cGVdW2hbaG91c2VUeXBlXV0ubGVuZ3RoKTtcblxuXHRcdFx0XHRcdFx0XHQvL25lZWQgdG8gcmVtb3ZlIGNlbGxzV2l0aENhbmRpZGF0ZSAtIGZyb20gY2VsbHMgdG8gcmVtb3ZlIGZyb21cblx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgeD0wOyB4PCBhbHRIb3VzZS5sZW5ndGg7IHgrKyl7XG5cdFx0XHRcdFx0XHRcdFx0aWYoIWNvbnRhaW5zKGNlbGxzV2l0aENhbmRpZGF0ZSwgYWx0SG91c2VbeF0pKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjZWxsc0VmZmVjdGVkLnB1c2goYWx0SG91c2VbeF0pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHQvL2xvZyhcImhvdXNlc1tcIitob3VzZVR5cGUrXCJdW1wiK2hbaG91c2VUeXBlXStcIl0ubGVuZ3RoOiBcIitob3VzZXNbaG91c2VUeXBlXVtoW2hvdXNlVHlwZV1dLmxlbmd0aCk7XG5cblx0XHRcdFx0XHRcdFx0Ly9yZW1vdmUgYWxsIGNhbmRpZGF0ZXMgb24gYWx0SG91c2UsIG91dHNpZGUgb2YgaG91c2Vcblx0XHRcdFx0XHRcdFx0dmFyIGNlbGxzVXBkYXRlZCA9IHJlbW92ZUNhbmRpZGF0ZXNGcm9tQ2VsbHMoY2VsbHNFZmZlY3RlZCwgW2RpZ2l0XSk7XG5cblx0XHRcdFx0XHRcdFx0aWYoY2VsbHNVcGRhdGVkLmxlbmd0aCA+IDApe1xuXHRcdFx0XHRcdFx0XHRcdC8vIGxvZyhcInBvaW50aW5nOiBkaWdpdCBcIitkaWdpdCtcIiwgZnJvbSBob3VzZVR5cGU6IFwiK2hvdXNlVHlwZSk7XG5cblx0XHRcdFx0XHRcdFx0XHRpZihzb2x2ZU1vZGUgPT09IFNPTFZFX01PREVfU1RFUClcblx0XHRcdFx0XHRcdFx0XHRcdGhpZ2hMaWdodENhbmRpZGF0ZXNPbkNlbGxzKFtkaWdpdF0sIGNlbGxzV2l0aENhbmRpZGF0ZSk7XG5cblxuXHRcdFx0XHRcdFx0XHRcdG9ubHlVcGRhdGVkQ2FuZGlkYXRlcyA9IHRydWU7XG5cblx0XHRcdFx0XHRcdFx0XHQvL3JldHVybiBjZWxsc1VwZGF0ZWQuY29uY2F0KGNlbGxzV2l0aENhbmRpZGF0ZSk7XG5cdFx0XHRcdFx0XHRcdFx0Ly9vbmx5IHJldHVybiBjZWxscyB3aGVyZSB3ZSBhY3R1YWxseSB1cGRhdGUgY2FuZGlkYXRlc1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBjZWxsc1VwZGF0ZWQ7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblxuXG5cdFx0LyogbmFrZWRDYW5kaWRhdGVzXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiBsb29rcyBmb3IgbiBuciBvZiBjZWxscyBpbiBob3VzZSwgd2hpY2ggdG9nZXRoZXIgaGFzIGV4YWN0bHkgbiB1bmlxdWUgY2FuZGlkYXRlcy5cblx0XHRcdHRoaXMgbWVhbnMgdGhlc2UgY2FuZGlkYXRlcyB3aWxsIGdvIGludG8gdGhlc2UgY2VsbHMsIGFuZCBjYW4gYmUgcmVtb3ZlZCBlbHNld2hlcmUgaW4gaG91c2UuXG5cdFx0ICpcblx0XHQgKiAtLSByZXR1cm5zIGVmZmVjdGVkQ2VsbHMgLSB0aGUgdXBkYXRlZCBjZWxsKHMpLCBvciBmYWxzZVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRmdW5jdGlvbiBuYWtlZENhbmRpZGF0ZXMobil7XG5cblx0XHRcdC8vZm9yIGVhY2ggdHlwZSBvZiBob3VzZS4uKGhvciByb3cgLyB2ZXJ0IHJvdyAvIGJveClcblx0XHRcdHZhciBobGVuZ3RoID0gaG91c2VzLmxlbmd0aDtcblx0XHRcdGZvcih2YXIgaT0wOyBpIDwgaGxlbmd0aDsgaSsrKXtcblxuXHRcdFx0XHQvL2ZvciBlYWNoIHN1Y2ggaG91c2Vcblx0XHRcdFx0Zm9yKHZhciBqPTA7IGogPCBib2FyZFNpemU7IGorKyl7XG5cdFx0XHRcdFx0Ly9sb2coXCJbXCIraStcIl1cIitcIltcIitqK1wiXVwiKTtcblx0XHRcdFx0XHR2YXIgaG91c2UgPSBob3VzZXNbaV1bal07XG5cdFx0XHRcdFx0aWYobnVtYmVyc0xlZnQoaG91c2UpLmxlbmd0aCA8PSBuKSAvL2Nhbid0IGVsaW1pbmF0ZSBhbnkgY2FuZGlkYXRlc1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0dmFyIGNvbWJpbmVJbmZvID0gW107IC8ve2NlbGw6IHgsIGNhbmRpZGF0ZXM6IFtdfSwge30gLi5cblx0XHRcdFx0XHQvL2NvbWJpbmVkQ2FuZGlkYXRlcyxjZWxsc1dpdGhDYW5kaWRhdGU7XG5cdFx0XHRcdFx0dmFyIG1pbkluZGV4ZXMgPSBbLTFdO1xuXHRcdFx0XHRcdC8vbG9nKFwiLS0tLS0tLS0tLS0tLS1cIik7XG5cdFx0XHRcdFx0Ly9sb2coXCJob3VzZTogW1wiK2krXCJdW1wiK2orXCJdXCIpO1xuXG5cblx0XHRcdFx0XHQvL2NoZWNrcyBldmVyeSBjb21ibyBvZiBuIGNhbmRpZGF0ZXMgaW4gaG91c2UsIHJldHVybnMgcGF0dGVybiwgb3IgZmFsc2Vcblx0XHRcdFx0XHR2YXIgcmVzdWx0ID0gY2hlY2tDb21iaW5lZENhbmRpZGF0ZXMoaG91c2UsIDApO1xuXHRcdFx0XHRcdGlmKHJlc3VsdCAhPT0gZmFsc2UpXG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7IC8vcGF0dGVybiBub3QgZm91bmRcblxuXHRcdFx0ZnVuY3Rpb24gY2hlY2tDb21iaW5lZENhbmRpZGF0ZXMoaG91c2UsIHN0YXJ0SW5kZXgpe1xuXHRcdFx0XHQvL2xvZyhcInN0YXJ0SW5kZXg6IFwiK3N0YXJ0SW5kZXgpO1xuXHRcdFx0XHRmb3IodmFyIGk9TWF0aC5tYXgoc3RhcnRJbmRleCwgbWluSW5kZXhlc1tzdGFydEluZGV4XSk7IGkgPCBib2FyZFNpemUtbitzdGFydEluZGV4OyBpKyspe1xuXHRcdFx0XHRcdC8vbG9nKGkpO1xuXG5cdFx0XHRcdFx0Ly9uZXZlciBjaGVjayB0aGlzIGNlbGwgYWdhaW4sIGluIHRoaXMgbG9vcFxuXHRcdFx0XHRcdG1pbkluZGV4ZXNbc3RhcnRJbmRleF0gPSBpKzE7XG5cdFx0XHRcdFx0Ly9vciBpbiBhIHRoaXMgbG9vcCBkZWVwZXIgZG93biBpbiByZWN1cnNpb25zXG5cdFx0XHRcdFx0bWluSW5kZXhlc1tzdGFydEluZGV4KzFdID0gaSsxO1xuXG5cdFx0XHRcdFx0Ly9pZihzdGFydEluZGV4ID09PSAwKXtcblx0XHRcdFx0XHQvL1x0Y29tYmluZWRDYW5kaWRhdGVzID0gW107XG5cdFx0XHRcdFx0Ly9cdGNlbGxzV2l0aENhbmRpZGF0ZSA9IFtdOyAvL3Jlc2V0XG5cdFx0XHRcdFx0Ly99XG5cdFx0XHRcdFx0dmFyIGNlbGwgPSBob3VzZVtpXTtcblx0XHRcdFx0XHR2YXIgY2VsbENhbmRpZGF0ZXMgPSBjYW5kaWRhdGVzTGVmdChjZWxsKTtcblxuXHRcdFx0XHRcdGlmKGNlbGxDYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCB8fCBjZWxsQ2FuZGlkYXRlcy5sZW5ndGggPiBuKVxuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cblxuXHRcdFx0XHRcdC8vdHJ5IGFkZGluZyB0aGlzIGNlbGwgYW5kIGl0J3MgY2VsbENhbmRpZGF0ZXMsXG5cdFx0XHRcdFx0Ly9idXQgZmlyc3QgbmVlZCB0byBjaGVjayB0aGF0IHRoYXQgZG9lc24ndCBtYWtlICh1bmlxdWUpIGFtb3VudCBvZlxuXHRcdFx0XHRcdC8vY2FuZGlkYXRlcyBpbiBjb21iaW5lSW5mbyA+IG5cblxuXHRcdFx0XHRcdC8vaWYgdGhpcyBpcyB0aGUgZmlyc3QgaXRlbSB3ZSBhZGQsIHdlIGRvbid0IG5lZWQgdGhpcyBjaGVjayAoYWJvdmUgb25lIGlzIGVub3VnaClcblx0XHRcdFx0XHRpZihjb21iaW5lSW5mby5sZW5ndGggPiAwKXtcblx0XHRcdFx0XHRcdHZhciB0ZW1wID0gY2VsbENhbmRpZGF0ZXMuc2xpY2UoKTtcblx0XHRcdFx0XHRcdGZvcih2YXIgYSA9MDsgYSA8IGNvbWJpbmVJbmZvLmxlbmd0aDsgYSsrKXtcblx0XHRcdFx0XHRcdFx0dmFyIGNhbmRpZGF0ZXMgPSBjb21iaW5lSW5mb1thXS5jYW5kaWRhdGVzO1xuXHRcdFx0XHRcdFx0XHRmb3IodmFyIGI9MDsgYiA8IGNhbmRpZGF0ZXMubGVuZ3RoOyBiKyspe1xuXHRcdFx0XHRcdFx0XHRcdGlmKCFjb250YWlucyh0ZW1wLGNhbmRpZGF0ZXNbYl0pKVxuXHRcdFx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKGNhbmRpZGF0ZXNbYl0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZih0ZW1wLmxlbmd0aCA+IG4pe1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTsgLy9jb21iaW5lZCBjYW5kaWRhdGVzIHNwcmVhZCBvdmVyID4gbiBjZWxscywgd29uJ3Qgd29ya1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29tYmluZUluZm8ucHVzaCh7Y2VsbDogY2VsbCwgY2FuZGlkYXRlczogY2VsbENhbmRpZGF0ZXN9KTtcblxuXG5cdFx0XHRcdFx0aWYoc3RhcnRJbmRleCA8IG4tMSkge1xuXHRcdFx0XHRcdFx0Ly9zdGlsbCBuZWVkIHRvIGdvIGRlZXBlciBpbnRvIGNvbWJvXG5cdFx0XHRcdFx0XHR2YXIgciA9IGNoZWNrQ29tYmluZWRDYW5kaWRhdGVzKGhvdXNlLCBzdGFydEluZGV4KzEpO1xuXHRcdFx0XHRcdFx0Ly93aGVuIHdlIGNvbWUgYmFjaywgY2hlY2sgaWYgdGhhdCdzIGJlY2F1c2Ugd2UgZm91bmQgYW5zd2VyLlxuXHRcdFx0XHRcdFx0Ly9pZiBzbywgcmV0dXJuIHdpdGggaXQsIG90aGVyd2lzZSwga2VlcCBsb29raW5nXG5cdFx0XHRcdFx0XHRpZiAociAhPT0gZmFsc2UpXG5cdFx0XHRcdFx0XHRcdHJldHVybiByO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vY2hlY2sgaWYgd2UgbWF0Y2ggb3VyIHBhdHRlcm5cblx0XHRcdFx0XHQvL2lmIHdlIGhhdmUgbWFuYWdlZCB0byBjb21iaW5lIG4tMSBjZWxscyxcblx0XHRcdFx0XHQvLyh3ZSBhbHJlYWR5IGtub3cgdGhhdCBjb21iaW5lZENhbmRpZGF0ZXMgaXMgPiBuKVxuXHRcdFx0XHRcdC8vdGhlbiB3ZSBmb3VuZCBhIG1hdGNoIVxuXHRcdFx0XHRcdGlmKGNvbWJpbmVJbmZvLmxlbmd0aCA9PT0gbil7XG5cdFx0XHRcdFx0XHQvL25vdyB3ZSBuZWVkIHRvIGNoZWNrIHdoZXRoZXIgdGhpcyBlbGltaW5hdGVzIGFueSBjYW5kaWRhdGVzXG5cblxuXHRcdFx0XHRcdFx0Ly9ub3cgd2UgbmVlZCB0byBjaGVjayB3aGV0aGVyIHRoaXMgZWxpbWluYXRlcyBhbnkgY2FuZGlkYXRlc1xuXG5cdFx0XHRcdFx0XHR2YXIgY2VsbHNXaXRoQ2FuZGlkYXRlcyA9IFtdO1xuXHRcdFx0XHRcdFx0dmFyIGNvbWJpbmVkQ2FuZGlkYXRlcyA9IFtdOyAvL25vdCB1bmlxdWUgZWl0aGVyLi5cblx0XHRcdFx0XHRcdGZvcih2YXIgeD0wOyB4PCBjb21iaW5lSW5mby5sZW5ndGg7eCsrKXtcblx0XHRcdFx0XHRcdFx0Y2VsbHNXaXRoQ2FuZGlkYXRlcy5wdXNoKGNvbWJpbmVJbmZvW3hdLmNlbGwpO1xuXHRcdFx0XHRcdFx0XHRjb21iaW5lZENhbmRpZGF0ZXMgPSBjb21iaW5lZENhbmRpZGF0ZXMuY29uY2F0KGNvbWJpbmVJbmZvW3hdLmNhbmRpZGF0ZXMpO1xuXHRcdFx0XHRcdFx0fVxuXG5cblxuXHRcdFx0XHRcdFx0Ly9nZXQgYWxsIGNlbGxzIGluIGhvdXNlIEVYQ0VQVCBjZWxsc1dpdGhDYW5kaWRhdGVzXG5cdFx0XHRcdFx0XHR2YXIgY2VsbHNFZmZlY3RlZCA9IFtdO1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgeT0wOyB5PCBib2FyZFNpemU7IHkrKyl7XG5cdFx0XHRcdFx0XHRcdGlmKCFjb250YWlucyhjZWxsc1dpdGhDYW5kaWRhdGVzLCBob3VzZVt5XSkpIHtcblx0XHRcdFx0XHRcdFx0XHRjZWxsc0VmZmVjdGVkLnB1c2goaG91c2VbeV0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vcmVtb3ZlIGFsbCBjYW5kaWRhdGVzIG9uIGhvdXNlLCBleGNlcHQgdGhlIG9uIGNlbGxzIG1hdGNoZWQgaW4gcGF0dGVyblxuXHRcdFx0XHRcdFx0dmFyIGNlbGxzVXBkYXRlZCA9IHJlbW92ZUNhbmRpZGF0ZXNGcm9tQ2VsbHMoY2VsbHNFZmZlY3RlZCwgY29tYmluZWRDYW5kaWRhdGVzKTtcblxuXHRcdFx0XHRcdFx0Ly9pZiBpdCBkb2VzIHJlbW92ZSBjYW5kaWRhdGVzLCB3ZSdyZSBzdWNjZWRlZCFcblx0XHRcdFx0XHRcdGlmKGNlbGxzVXBkYXRlZC5sZW5ndGggPiAwKXtcblx0XHRcdFx0XHRcdFx0Ly9sb2coXCJuYWtlZENhbmRpZGF0ZXM6IFwiKTtcblx0XHRcdFx0XHRcdFx0Ly9sb2coY29tYmluZWRDYW5kaWRhdGVzKTtcblxuXHRcdFx0XHRcdFx0XHRpZihzb2x2ZU1vZGUgPT09IFNPTFZFX01PREVfU1RFUClcblx0XHRcdFx0XHRcdFx0XHRoaWdoTGlnaHRDYW5kaWRhdGVzT25DZWxscyhjb21iaW5lZENhbmRpZGF0ZXMsIGNlbGxzV2l0aENhbmRpZGF0ZXMpO1xuXG5cdFx0XHRcdFx0XHRcdG9ubHlVcGRhdGVkQ2FuZGlkYXRlcyA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdC8vcmV0dXJuIGNlbGxzV2l0aENhbmRpZGF0ZXMuY29uY2F0KGNlbGxzVXBkYXRlZCk7XG5cblx0XHRcdFx0XHRcdFx0Ly9yZXR1cm4gY2VsbHMgd2UgYWN0dWFsbHkgdXBkYXRlLCBkdXBsaWNhdGVzIHJlbW92ZWRcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHVuaXF1ZUFycmF5KGNlbGxzVXBkYXRlZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHN0YXJ0SW5kZXggPiAwKSB7XG5cdFx0XHRcdFx0Ly9pZiB3ZSBhZGRlZCBhIHZhbHVlIHRvIG91ciBjb21ibyBjaGVjaywgYnV0IGZhaWxlZCB0byBmaW5kIHBhdHRlcm4sIHdlIG5vdyBuZWVkIGRyb3AgdGhhdCB2YWx1ZSBhbmQgZ28gYmFjayB1cCBpbiBjaGFpbiBhbmQgY29udGludWUgdG8gY2hlY2suLlxuXHRcdFx0XHRcdGlmKGNvbWJpbmVJbmZvLmxlbmd0aCA+IHN0YXJ0SW5kZXgtMSl7XG5cdFx0XHRcdFx0XHQvL2xvZyhcIm5ha2VkQ2FuczogbmVlZCB0byBwb3AgbGFzdCBhZGRlZCB2YWx1ZXMuLlwiKTtcblx0XHRcdFx0XHRcdGNvbWJpbmVJbmZvLnBvcCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cblx0XHQvKiBuYWtlZFBhaXJcblx0XHQgKiAtLS0tLS0tLS0tLS0tLVxuXHRcdCAqIHNlZSBuYWtlZENhbmRpZGF0ZUVsaW1pbmF0aW9uIGZvciBleHBsYW5hdGlvblxuXHRcdCAqIC0tIHJldHVybnMgZWZmZWN0ZWRDZWxscyAtIHRoZSB1cGRhdGVkIGNlbGwocyksIG9yIGZhbHNlXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdGZ1bmN0aW9uIG5ha2VkUGFpcigpe1xuXHRcdFx0cmV0dXJuIG5ha2VkQ2FuZGlkYXRlcygyKTtcblx0XHR9XG5cblx0XHQvKiBuYWtlZFRyaXBsZXRcblx0XHQgKiAtLS0tLS0tLS0tLS0tLVxuXHRcdCAqIHNlZSBuYWtlZENhbmRpZGF0ZUVsaW1pbmF0aW9uIGZvciBleHBsYW5hdGlvblxuXHRcdCAqIC0tIHJldHVybnMgZWZmZWN0ZWRDZWxscyAtIHRoZSB1cGRhdGVkIGNlbGwocyksIG9yIGZhbHNlXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdGZ1bmN0aW9uIG5ha2VkVHJpcGxldCgpe1xuXHRcdFx0cmV0dXJuIG5ha2VkQ2FuZGlkYXRlcygzKTtcblx0XHR9XG5cblx0XHQvKiBuYWtlZFF1YWRcblx0XHQgKiAtLS0tLS0tLS0tLS0tLVxuXHRcdCAqIHNlZSBuYWtlZENhbmRpZGF0ZUVsaW1pbmF0aW9uIGZvciBleHBsYW5hdGlvblxuXHRcdCAqIC0tIHJldHVybnMgZWZmZWN0ZWRDZWxscyAtIHRoZSB1cGRhdGVkIGNlbGwocyksIG9yIGZhbHNlXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdGZ1bmN0aW9uIG5ha2VkUXVhZCgpe1xuXHRcdFx0cmV0dXJuIG5ha2VkQ2FuZGlkYXRlcyg0KTtcblx0XHR9XG5cblxuXG5cblx0XHQvKiBoaWRkZW5Mb2NrZWRDYW5kaWRhdGVzXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiBsb29rcyBmb3IgbiBuciBvZiBjZWxscyBpbiBob3VzZSwgd2hpY2ggdG9nZXRoZXIgaGFzIGV4YWN0bHkgbiB1bmlxdWUgY2FuZGlkYXRlcy5cblx0XHRcdHRoaXMgbWVhbnMgdGhlc2UgY2FuZGlkYXRlcyB3aWxsIGdvIGludG8gdGhlc2UgY2VsbHMsIGFuZCBjYW4gYmUgcmVtb3ZlZCBlbHNld2hlcmUgaW4gaG91c2UuXG5cdFx0ICpcblx0XHQgKiAtLSByZXR1cm5zIGVmZmVjdGVkQ2VsbHMgLSB0aGUgdXBkYXRlZCBjZWxsKHMpLCBvciBmYWxzZVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRmdW5jdGlvbiBoaWRkZW5Mb2NrZWRDYW5kaWRhdGVzKG4pe1xuXG5cdFx0XHQvL2ZvciBlYWNoIHR5cGUgb2YgaG91c2UuLihob3Igcm93IC8gdmVydCByb3cgLyBib3gpXG5cdFx0XHR2YXIgaGxlbmd0aCA9IGhvdXNlcy5sZW5ndGg7XG5cdFx0XHRmb3IodmFyIGk9MDsgaSA8IGhsZW5ndGg7IGkrKyl7XG5cblx0XHRcdFx0Ly9mb3IgZWFjaCBzdWNoIGhvdXNlXG5cdFx0XHRcdGZvcih2YXIgaj0wOyBqIDwgYm9hcmRTaXplOyBqKyspe1xuXHRcdFx0XHRcdHZhciBob3VzZSA9IGhvdXNlc1tpXVtqXTtcblx0XHRcdFx0XHRpZihudW1iZXJzTGVmdChob3VzZSkubGVuZ3RoIDw9IG4pIC8vY2FuJ3QgZWxpbWluYXRlIGFueSBjYW5kaWRhdGVzXG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR2YXIgY29tYmluZUluZm8gPSBbXTsgLy97Y2FuZGF0ZTogeCwgY2VsbHNXaXRoQ2FuZGlkYXRlOiBbXX0sIHt9IC4uXG5cdFx0XHRcdFx0Ly9jb21iaW5lZENhbmRpZGF0ZXMsY2VsbHNXaXRoQ2FuZGlkYXRlO1xuXHRcdFx0XHRcdHZhciBtaW5JbmRleGVzID0gWy0xXTtcblx0XHRcdFx0XHQvL2xvZyhcIi0tLS0tLS0tLS0tLS0tXCIpO1xuXHRcdFx0XHRcdC8vbG9nKFwiaG91c2U6IFtcIitpK1wiXVtcIitqK1wiXVwiKTtcblxuXHRcdFx0XHRcdC8vY2hlY2tzIGV2ZXJ5IGNvbWJvIG9mIG4gY2FuZGlkYXRlcyBpbiBob3VzZSwgcmV0dXJucyBwYXR0ZXJuLCBvciBmYWxzZVxuXHRcdFx0XHRcdHZhciByZXN1bHQgPSBjaGVja0xvY2tlZENhbmRpZGF0ZXMoaG91c2UsIDApO1xuXHRcdFx0XHRcdGlmKHJlc3VsdCAhPT0gZmFsc2UpXG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7IC8vcGF0dGVybiBub3QgZm91bmRcblxuXHRcdFx0ZnVuY3Rpb24gY2hlY2tMb2NrZWRDYW5kaWRhdGVzKGhvdXNlLCBzdGFydEluZGV4KXtcblx0XHRcdFx0Ly9sb2coXCJzdGFydEluZGV4OiBcIitzdGFydEluZGV4KTtcblx0XHRcdFx0Zm9yKHZhciBpPU1hdGgubWF4KHN0YXJ0SW5kZXgsIG1pbkluZGV4ZXNbc3RhcnRJbmRleF0pOyBpIDw9IGJvYXJkU2l6ZS1uK3N0YXJ0SW5kZXg7IGkrKyl7XG5cblx0XHRcdFx0XHQvL2xvZyhpKTtcblx0XHRcdFx0XHQvL25ldmVyIGNoZWNrIHRoaXMgY2VsbCBhZ2FpbiwgaW4gdGhpcyBsb29wXG5cdFx0XHRcdFx0bWluSW5kZXhlc1tzdGFydEluZGV4XSA9IGkrMTtcblx0XHRcdFx0XHQvL29yIGluIGEgdGhpcyBsb29wIGRlZXBlciBkb3duIGluIHJlY3Vyc2lvbnNcblx0XHRcdFx0XHRtaW5JbmRleGVzW3N0YXJ0SW5kZXgrMV0gPSBpKzE7XG5cblx0XHRcdFx0XHR2YXIgY2FuZGlkYXRlID0gaSsxO1xuXHRcdFx0XHRcdC8vbG9nKGNhbmRpZGF0ZSk7XG5cblxuXHRcdFx0XHRcdHZhciBwb3NzaWJsZUNlbGxzID0gY2VsbHNGb3JDYW5kaWRhdGUoY2FuZGlkYXRlLGhvdXNlKTtcblxuXHRcdFx0XHRcdGlmKHBvc3NpYmxlQ2VsbHMubGVuZ3RoID09PSAwIHx8IHBvc3NpYmxlQ2VsbHMubGVuZ3RoID4gbilcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0Ly90cnkgYWRkaW5nIHRoaXMgY2FuZGlkYXRlIGFuZCBpdCdzIHBvc3NpYmxlIGNlbGxzLFxuXHRcdFx0XHRcdC8vYnV0IGZpcnN0IG5lZWQgdG8gY2hlY2sgdGhhdCB0aGF0IGRvZXNuJ3QgbWFrZSAodW5pcXVlKSBhbW91bnQgb2Zcblx0XHRcdFx0XHQvL3Bvc3NpYmxlIGNlbGxzIGluIGNvbWJpbmVJbmZvID4gblxuXHRcdFx0XHRcdGlmKGNvbWJpbmVJbmZvLmxlbmd0aCA+IDApe1xuXHRcdFx0XHRcdFx0dmFyIHRlbXAgPSBwb3NzaWJsZUNlbGxzLnNsaWNlKCk7XG5cdFx0XHRcdFx0XHRmb3IodmFyIGEgPTA7IGEgPCBjb21iaW5lSW5mby5sZW5ndGg7IGErKyl7XG5cdFx0XHRcdFx0XHRcdHZhciBjZWxscyA9IGNvbWJpbmVJbmZvW2FdLmNlbGxzO1xuXHRcdFx0XHRcdFx0XHRmb3IodmFyIGI9MDsgYiA8IGNlbGxzLmxlbmd0aDsgYisrKXtcblx0XHRcdFx0XHRcdFx0XHRpZighY29udGFpbnModGVtcCxjZWxsc1tiXSkpXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZW1wLnB1c2goY2VsbHNbYl0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZih0ZW1wLmxlbmd0aCA+IG4pe1xuXHRcdFx0XHRcdFx0XHQvL2xvZyhcImNvbWJpbmVkIGNhbmRpZGF0ZXMgc3ByZWFkIG92ZXIgPiBuIGNlbGxzXCIpO1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTsgLy9jb21iaW5lZCBjYW5kaWRhdGVzIHNwcmVhZCBvdmVyID4gbiBjZWxscywgd29uJ3Qgd29ya1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29tYmluZUluZm8ucHVzaCh7Y2FuZGlkYXRlOiBjYW5kaWRhdGUsIGNlbGxzOiBwb3NzaWJsZUNlbGxzfSk7XG5cblx0XHRcdFx0XHRpZihzdGFydEluZGV4IDwgbi0xKSB7XG5cdFx0XHRcdFx0XHQvL3N0aWxsIG5lZWQgdG8gZ28gZGVlcGVyIGludG8gY29tYm9cblx0XHRcdFx0XHRcdHZhciByID0gY2hlY2tMb2NrZWRDYW5kaWRhdGVzKGhvdXNlLCBzdGFydEluZGV4KzEpO1xuXHRcdFx0XHRcdFx0Ly93aGVuIHdlIGNvbWUgYmFjaywgY2hlY2sgaWYgdGhhdCdzIGJlY2F1c2Ugd2UgZm91bmQgYW5zd2VyLlxuXHRcdFx0XHRcdFx0Ly9pZiBzbywgcmV0dXJuIHdpdGggaXQsIG90aGVyd2lzZSwga2VlcCBsb29raW5nXG5cdFx0XHRcdFx0XHRpZiAociAhPT0gZmFsc2UpXG5cdFx0XHRcdFx0XHRcdHJldHVybiByO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvL2NoZWNrIGlmIHdlIG1hdGNoIG91ciBwYXR0ZXJuXG5cdFx0XHRcdFx0Ly9pZiB3ZSBoYXZlIG1hbmFnZWQgdG8gY29tYmluZSBuLTEgY2FuZGlkYXRlcyxcblx0XHRcdFx0XHQvLyh3ZSBhbHJlYWR5IGtub3cgdGhhdCBjZWxsc1dpdGhDYW5kaWRhdGVzIGlzIDw9IG4pXG5cdFx0XHRcdFx0Ly90aGVuIHdlIGZvdW5kIGEgbWF0Y2ghXG5cdFx0XHRcdFx0aWYoY29tYmluZUluZm8ubGVuZ3RoID09PSBuKXtcblxuXHRcdFx0XHRcdFx0Ly9ub3cgd2UgbmVlZCB0byBjaGVjayB3aGV0aGVyIHRoaXMgZWxpbWluYXRlcyBhbnkgY2FuZGlkYXRlc1xuXG5cdFx0XHRcdFx0XHR2YXIgY29tYmluZWRDYW5kaWRhdGVzID0gW107IC8vbm90IHVuaXF1ZSBub3cuLi5cblx0XHRcdFx0XHRcdHZhciBjZWxsc1dpdGhDYW5kaWRhdGVzID0gW107IC8vbm90IHVuaXF1ZSBlaXRoZXIuLlxuXHRcdFx0XHRcdFx0Zm9yKHZhciB4PTA7IHg8IGNvbWJpbmVJbmZvLmxlbmd0aDt4Kyspe1xuXHRcdFx0XHRcdFx0XHRjb21iaW5lZENhbmRpZGF0ZXMucHVzaChjb21iaW5lSW5mb1t4XS5jYW5kaWRhdGUpO1xuXHRcdFx0XHRcdFx0XHRjZWxsc1dpdGhDYW5kaWRhdGVzID0gY2VsbHNXaXRoQ2FuZGlkYXRlcy5jb25jYXQoY29tYmluZUluZm9beF0uY2VsbHMpO1xuXHRcdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0XHRcdHZhciBjYW5kaWRhdGVzVG9SZW1vdmUgPSBbXTtcblx0XHRcdFx0XHRcdGZvcih2YXIgYz0wOyBjPGJvYXJkU2l6ZTsgYysrKXtcblx0XHRcdFx0XHRcdFx0aWYoIWNvbnRhaW5zKGNvbWJpbmVkQ2FuZGlkYXRlcywgYysxKSlcblx0XHRcdFx0XHRcdFx0XHRjYW5kaWRhdGVzVG9SZW1vdmUucHVzaChjKzEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly9sb2coXCJjYW5kaWRhdGVzIHRvIHJlbW92ZTpcIilcblx0XHRcdFx0XHRcdC8vbG9nKGNhbmRpZGF0ZXNUb1JlbW92ZSk7XG5cblx0XHRcdFx0XHRcdC8vcmVtb3ZlIGFsbCBvdGhlciBjYW5kaWRhdGVzIGZyb20gY2VsbHNXaXRoQ2FuZGlkYXRlc1xuXHRcdFx0XHRcdFx0dmFyIGNlbGxzVXBkYXRlZCA9IHJlbW92ZUNhbmRpZGF0ZXNGcm9tQ2VsbHMoY2VsbHNXaXRoQ2FuZGlkYXRlcywgY2FuZGlkYXRlc1RvUmVtb3ZlKTtcblxuXHRcdFx0XHRcdFx0Ly9pZiBpdCBkb2VzIHJlbW92ZSBjYW5kaWRhdGVzLCB3ZSdyZSBzdWNjZWRlZCFcblx0XHRcdFx0XHRcdGlmKGNlbGxzVXBkYXRlZC5sZW5ndGggPiAwKXtcblx0XHRcdFx0XHRcdFx0Ly9sb2coXCJoaWRkZW5Mb2NrZWRDYW5kaWRhdGVzOiBcIik7XG5cdFx0XHRcdFx0XHRcdC8vbG9nKGNvbWJpbmVkQ2FuZGlkYXRlcyk7XG5cblx0XHRcdFx0XHRcdFx0aWYoc29sdmVNb2RlID09PSBTT0xWRV9NT0RFX1NURVApXG5cdFx0XHRcdFx0XHRcdFx0aGlnaExpZ2h0Q2FuZGlkYXRlc09uQ2VsbHMoY29tYmluZWRDYW5kaWRhdGVzLCBjZWxsc1dpdGhDYW5kaWRhdGVzKTtcblxuXHRcdFx0XHRcdFx0XHRvbmx5VXBkYXRlZENhbmRpZGF0ZXMgPSB0cnVlO1xuXG5cdFx0XHRcdFx0XHRcdC8vZmlsdGVyIG91dCBkdXBsaWNhdGVzXG5cdFx0XHRcdFx0XHRcdHJldHVybiB1bmlxdWVBcnJheShjZWxsc1dpdGhDYW5kaWRhdGVzKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoc3RhcnRJbmRleCA+IDApIHtcblx0XHRcdFx0XHQvL2lmIHdlIGFkZGVkIGEgdmFsdWUgdG8gb3VyIGNvbWJvIGNoZWNrLCBidXQgZmFpbGVkIHRvIGZpbmQgcGF0dGVybiwgd2Ugbm93IG5lZWQgZHJvcCB0aGF0IHZhbHVlIGFuZCBnbyBiYWNrIHVwIGluIGNoYWluIGFuZCBjb250aW51IHRvIGNoZWNrLi5cblx0XHRcdFx0XHRpZihjb21iaW5lSW5mby5sZW5ndGggPiBzdGFydEluZGV4LTEpe1xuXHRcdFx0XHRcdFx0Y29tYmluZUluZm8ucG9wKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblxuXG5cdFx0LyogaGlkZGVuUGFpclxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tXG5cdFx0ICogc2VlIGhpZGRlbkxvY2tlZENhbmRpZGF0ZXMgZm9yIGV4cGxhbmF0aW9uXG5cdFx0ICogLS0gcmV0dXJucyBlZmZlY3RlZENlbGxzIC0gdGhlIHVwZGF0ZWQgY2VsbChzKSwgb3IgZmFsc2Vcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0ZnVuY3Rpb24gaGlkZGVuUGFpcigpe1xuXHRcdFx0cmV0dXJuIGhpZGRlbkxvY2tlZENhbmRpZGF0ZXMoMik7XG5cdFx0fVxuXG5cblx0XHQvKiBoaWRkZW5UcmlwbGV0XG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiBzZWUgaGlkZGVuTG9ja2VkQ2FuZGlkYXRlcyBmb3IgZXhwbGFuYXRpb25cblx0XHQgKiAtLSByZXR1cm5zIGVmZmVjdGVkQ2VsbHMgLSB0aGUgdXBkYXRlZCBjZWxsKHMpLCBvciBmYWxzZVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRmdW5jdGlvbiBoaWRkZW5UcmlwbGV0KCl7XG5cdFx0XHRyZXR1cm4gaGlkZGVuTG9ja2VkQ2FuZGlkYXRlcygzKTtcblx0XHR9XG5cblx0XHQvKiBoaWRkZW5RdWFkXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiBzZWUgaGlkZGVuTG9ja2VkQ2FuZGlkYXRlcyBmb3IgZXhwbGFuYXRpb25cblx0XHQgKiAtLSByZXR1cm5zIGVmZmVjdGVkQ2VsbHMgLSB0aGUgdXBkYXRlZCBjZWxsKHMpLCBvciBmYWxzZVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRmdW5jdGlvbiBoaWRkZW5RdWFkKCl7XG5cdFx0XHRyZXR1cm4gaGlkZGVuTG9ja2VkQ2FuZGlkYXRlcyg0KTtcblx0XHR9XG5cblxuXG5cblx0XHQvKiBzb2x2ZUZuXG5cdFx0ICogLS0tLS0tLS0tLS0tLS1cblx0XHQgKiAgYXBwbGllcyBzdHJhdGVneSBpICh3aGVyZSBpIHJlcHJlc2VudHMgc3RyYXRlZ3ksIG9yZGVyZWQgYnkgc2ltcGxpY2l0eVxuXHRcdCAqICAtaWYgc3RyYXRlZ3kgZmFpbHMgKHRvbyBhZHZhbmNlZCBhIHN1ZG9rdSkgQU5EIGFuIG1vcmUgYWR2YW5jZWQgc3RyYXRlZ3kgZXhpc3RzOlxuXHRcdCAqXHRcdGNhbGxzIGl0c2VsZiB3aXRoIGkrK1xuXHRcdCAqICByZXR1cm5zIGNhbkNvbnRpbnVlIHRydWV8ZmFsc2UgLSBvbmx5IHJlbGV2YW50IGZvciBzb2x2ZU1vZGUgXCJhbGxcIlxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHR2YXIgbnJTb2x2ZUxvb3BzID0gMDtcblx0XHR2YXIgZWZmZWN0ZWRDZWxscyA9IGZhbHNlO1xuXG5cdFx0dmFyIHNvbHZlRm4gPSBmdW5jdGlvbihpKXtcblx0XHRcdC8vbG9nKGkpO1xuXHRcdFx0aWYoYm9hcmRGaW5pc2hlZCkge1xuXHRcdFx0XHRpZighZ3JhZGluZ01vZGUpIHtcblx0XHRcdFx0XHR1cGRhdGVVSUJvYXJkKGZhbHNlKTtcblx0XHRcdFx0XHQvL2xvZyhcImZpbmlzaGVkIVwiKTtcblx0XHRcdFx0XHQvL2xvZyhcInVzZWRTdHJhdHM6XCIpXG5cdFx0XHRcdFx0Ly9sb2codXNlZFN0cmF0ZWdpZXMpO1xuXG5cdFx0XHRcdFx0Ly9jYWxsYmFja1xuXHRcdFx0XHRcdGlmKHR5cGVvZiBvcHRzLmJvYXJkRmluaXNoZWRGbiA9PT0gXCJmdW5jdGlvblwiKXtcblx0XHRcdFx0XHRcdG9wdHMuYm9hcmRGaW5pc2hlZEZuKHtcblx0XHRcdFx0XHRcdFx0ZGlmZmljdWx0eUluZm86IGNhbGNCb2FyZERpZmZpY3VsdHkodXNlZFN0cmF0ZWdpZXMpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7IC8vd2UncmUgZG9uZSFcblxuXHRcdFx0fSBlbHNlIGlmIChzb2x2ZU1vZGUgPT09IFNPTFZFX01PREVfU1RFUCl7XG5cdFx0XHRcdC8vbGlrZWx5IHRoYXQgd2UncmUgdXBkYXRpbmcgdHdpY2UgaWYgIWNhbmRpZGF0ZXNTaG93aW5nICYmICFvbmx5VXBkYXRlZENhbmRpZGF0ZXMsXG5cdFx0XHRcdC8vYnV0IHdlIGNhbid0IHRlbGwgaWYgdXNlciBqdXN0IHRvZ2dsZWQgY2FuZGlkYXRlc1Nob3dpbmcuLiBzbyBoYXZlIHRvIGRvIGl0IGhlcmUgKGFnYWluKS5cblx0XHRcdFx0aWYoZWZmZWN0ZWRDZWxscyAmJiBlZmZlY3RlZENlbGxzICE9PSAtMSl7XG5cdFx0XHRcdFx0Ly91cGRhdGUgY2FuZGlkYXRlcyBhbmQvb3IgbmV3IG51bWJlcnNcblx0XHRcdFx0XHQvL3JlbW92ZSBoaWdobGlnaHRzIGZyb20gbGFzdCBzdGVwXG5cdFx0XHRcdFx0JGJvYXJkSW5wdXRzLnJlbW92ZUNsYXNzKFwiaGlnaGxpZ2h0LXZhbFwiKTtcblx0XHRcdFx0XHQkKFwiLmNhbmRpZGF0ZS0taGlnaGxpZ2h0XCIpLnJlbW92ZUNsYXNzKFwiY2FuZGlkYXRlLS1oaWdobGlnaHRcIik7XG5cdFx0XHRcdFx0Ly91cGRhdGUgYm9hcmQgd2l0aCBuZXcgZWZmZWN0ZWQgY2VsbChzKSBpbmZvXG5cdFx0XHRcdFx0Zm9yKHZhciBqPTA7IGogPCBlZmZlY3RlZENlbGxzLmxlbmd0aDsgaisrKXtcblx0XHRcdFx0XHRcdHVwZGF0ZVVJQm9hcmRDZWxsKGVmZmVjdGVkQ2VsbHNbal0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRuclNvbHZlTG9vcHMrKztcblx0XHRcdHZhciBzdHJhdCA9IHN0cmF0ZWdpZXNbaV0uZm47XG5cdFx0XHQvL2xvZyhcInVzZSBzdHJhdCBucjpcIiAraSk7XG5cdFx0XHRlZmZlY3RlZENlbGxzID0gc3RyYXQoKTtcblxuXHRcdFx0aWYoZWZmZWN0ZWRDZWxscyA9PT0gZmFsc2Upe1xuXHRcdFx0XHRpZihzdHJhdGVnaWVzLmxlbmd0aCA+IGkrMSkge1xuXHRcdFx0XHRcdHJldHVybiBzb2x2ZUZuKGkrMSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYodHlwZW9mIG9wdHMuYm9hcmRFcnJvckZuID09PSBcImZ1bmN0aW9uXCIgJiYgIWdlbmVyYXRpbmdNb2RlKVxuXHRcdFx0XHRcdFx0b3B0cy5ib2FyZEVycm9yRm4oe21zZzogXCJubyBtb3JlIHN0cmF0ZWdpZXNcIn0pO1xuXG5cdFx0XHRcdFx0aWYoIWdyYWRpbmdNb2RlICYmICFnZW5lcmF0aW5nTW9kZSAmJiBzb2x2ZU1vZGU9PT1TT0xWRV9NT0RFX0FMTClcblx0XHRcdFx0XHRcdHVwZGF0ZVVJQm9hcmQoZmFsc2UpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2UgaWYgKGJvYXJkRXJyb3Ipe1xuXHRcdFx0XHRpZih0eXBlb2Ygb3B0cy5ib2FyZEVycm9yRm4gPT09IFwiZnVuY3Rpb25cIilcblx0XHRcdFx0XHRvcHRzLmJvYXJkRXJyb3JGbih7bXNnOiBcIkJvYXJkIGluY29ycmVjdFwifSk7XG5cblx0XHRcdFx0aWYoc29sdmVNb2RlID09PSBTT0xWRV9NT0RFX0FMTCkge1xuXHRcdFx0XHRcdHVwZGF0ZVVJQm9hcmQoZmFsc2UpOyAvL3Nob3cgdXNlciBjdXJyZW50IHN0YXRlIG9mIGJvYXJkLi4uIGhvdyBtdWNoIHRoZXkgbmVlZCB0byByZXNldCBmb3IgaXQgdG8gd29yayBhZ2Fpbi5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBmYWxzZTsgLy93ZSBjYW4ndCBkbyBubyBtb3JlIHNvbHZpbmdcblxuXHRcdFx0fSBlbHNlIGlmKHNvbHZlTW9kZT09PVNPTFZFX01PREVfU1RFUCl7XG5cdFx0XHRcdC8vIGlmIHVzZXIgY2xpY2tlZCBzb2x2ZSBzdGVwLCBhbmQgd2UncmUgb25seSBnb2luZyB0byBmaWxsIGluIGEgbmV3IHZhbHVlIChub3QgbWVzc2luZyB3aXRoIGNhbmRpZGF0ZXMpIC0gdGhlbiBzaG93IHVzZXIgc3RyYWlnaHQgYXdheVxuXHRcdFx0XHQvL2NhbGxiYWNrXG5cdFx0XHRcdGlmKHR5cGVvZiBvcHRzLmJvYXJkVXBkYXRlZEZuID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRvcHRzLmJvYXJkVXBkYXRlZEZuKHtjYXVzZTogc3RyYXRlZ2llc1tpXS50aXRsZSwgY2VsbHNVcGRhdGVkOiBlZmZlY3RlZENlbGxzfSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvL2NoZWNrIGlmIHRoaXMgZmluaXNoZWQgdGhlIGJvYXJkXG5cdFx0XHRcdGlmKGlzQm9hcmRGaW5pc2hlZCgpKXtcblx0XHRcdFx0XHRib2FyZEZpbmlzaGVkID0gdHJ1ZTtcblx0XHRcdFx0XHQvL2NhbGxiYWNrXG5cdFx0XHRcdFx0aWYodHlwZW9mIG9wdHMuYm9hcmRGaW5pc2hlZEZuID09PSBcImZ1bmN0aW9uXCIpe1xuXHRcdFx0XHRcdFx0b3B0cy5ib2FyZEZpbmlzaGVkRm4oe1xuXHRcdFx0XHRcdFx0XHRkaWZmaWN1bHR5SW5mbzogY2FsY0JvYXJkRGlmZmljdWx0eSh1c2VkU3RyYXRlZ2llcylcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvL3BhaW50IHRoZSBsYXN0IGNlbGwgc3RyYWlnaHQgYXdheVxuXHRcdFx0XHRcdGlmKGNhbmRpZGF0ZXNTaG93aW5nKVxuXHRcdFx0XHRcdFx0dXBkYXRlVUlCb2FyZChmYWxzZSk7XG5cdFx0XHRcdH1cblxuXG5cblx0XHRcdFx0Ly9pZiBhIG5ldyBudW1iZXIgd2FzIGZpbGxlZCBpbiwgc2hvdyB0aGlzIG9uIGJvYXJkXG5cdFx0XHRcdGlmKCFjYW5kaWRhdGVzU2hvd2luZyAmJiAhb25seVVwZGF0ZWRDYW5kaWRhdGVzICYmXG5cdFx0XHRcdFx0ZWZmZWN0ZWRDZWxscyAmJiBlZmZlY3RlZENlbGxzICE9PSAtMSl7XG5cdFx0XHRcdFx0Ly9yZW1vdmUgaGlnaGxpZ2h0cyBmcm9tIGxhc3Qgc3RlcFxuXHRcdFx0XHRcdCRib2FyZElucHV0cy5yZW1vdmVDbGFzcyhcImhpZ2hsaWdodC12YWxcIik7XG5cdFx0XHRcdFx0JChcIi5jYW5kaWRhdGUtLWhpZ2hsaWdodFwiKS5yZW1vdmVDbGFzcyhcImNhbmRpZGF0ZS0taGlnaGxpZ2h0XCIpO1xuXHRcdFx0XHRcdC8vdXBkYXRlIGJvYXJkIHdpdGggbmV3IGVmZmVjdGVkIGNlbGwocykgaW5mb1xuXHRcdFx0XHRcdGZvcih2YXIgaz0wOyBrIDwgZWZmZWN0ZWRDZWxscy5sZW5ndGg7IGsrKyl7XG5cdFx0XHRcdFx0XHR1cGRhdGVVSUJvYXJkQ2VsbChlZmZlY3RlZENlbGxzW2tdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly93ZSBnb3QgYW4gYW5zd2VyLCB1c2luZyBzdHJhdGVneSBpXG5cdFx0XHRpZih0eXBlb2YgdXNlZFN0cmF0ZWdpZXNbaV0gPT09IFwidW5kZWZpbmVkXCIpXG5cdFx0XHRcdHVzZWRTdHJhdGVnaWVzW2ldID0gMDtcblx0XHRcdHVzZWRTdHJhdGVnaWVzW2ldID0gdXNlZFN0cmF0ZWdpZXNbaV0gKyAxO1xuXHRcdFx0Ly9pZiB3ZSBvbmx5IHVwZGF0ZWQgY2FuZGlkYXRlcywgbWFrZSBzdXJlIHRoZXkncmUgc2hvd2luZ1xuXHRcdFx0aWYoIWdyYWRpbmdNb2RlICYmICFjYW5kaWRhdGVzU2hvd2luZyAmJiBvbmx5VXBkYXRlZENhbmRpZGF0ZXMpey8vICYmIGkgPiAzKXtcblx0XHRcdFx0c2hvd0NhbmRpZGF0ZXMoKTtcblxuXHRcdFx0XHQvL2NhbGxiYWNrIGluIGNhc2UgVUkgaGFzIHRvZ2dsZSBidG4sIHNvIGl0IGNhbiBiZSB1cGRhdGVkXG5cdFx0XHRcdGlmKHR5cGVvZiBvcHRzLmNhbmRpZGF0ZVNob3dUb2dnbGVGbiA9PT0gXCJmdW5jdGlvblwiKVxuXHRcdFx0XHRcdG9wdHMuY2FuZGlkYXRlU2hvd1RvZ2dsZUZuKHRydWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHJ1ZTsgLy8gY2FuIGNvbnRpbnVlXG5cdFx0fTtcblxuXG5cdFx0Lyoga2V5Ym9hcmRNb3ZlQm9hcmRGb2N1cyAtIHB1dHMgZm9jdXMgb24gYWRqYWNlbnQgYm9hcmQgY2VsbFxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHR2YXIga2V5Ym9hcmRNb3ZlQm9hcmRGb2N1cyA9IGZ1bmN0aW9uKGN1cnJlbnRJZCwga2V5Q29kZSl7XG5cdFx0XHR2YXIgbmV3SWQgPSBjdXJyZW50SWQ7XG5cdFx0XHQvL3JpZ2h0XG5cdFx0XHRpZihrZXlDb2RlID09PTM5KVxuXHRcdFx0XHRuZXdJZCsrO1xuXHRcdFx0Ly9sZWZ0XG5cdFx0XHRlbHNlIGlmKGtleUNvZGUgPT09IDM3KVxuXHRcdFx0XHRuZXdJZC0tO1xuXHRcdFx0Ly9kb3duXG5cdFx0XHRlbHNlIGlmKGtleUNvZGUgPT09NDApXG5cdFx0XHRcdG5ld0lkID0gbmV3SWQgKyBib2FyZFNpemU7XG5cdFx0XHQvL3VwXG5cdFx0XHRlbHNlIGlmKGtleUNvZGUgPT09MzgpXG5cdFx0XHRcdG5ld0lkID0gbmV3SWQgLSBib2FyZFNpemU7XG5cblx0XHRcdC8vb3V0IG9mIGJvdW5kc1xuXHRcdFx0aWYobmV3SWQgPCAwIHx8IG5ld0lkID4gKGJvYXJkU2l6ZSpib2FyZFNpemUpKVxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdC8vZm9jdXMgaW5wdXRcblx0XHRcdCQoXCIjaW5wdXQtXCIrbmV3SWQpLmZvY3VzKCk7XG5cdFx0fTtcblxuXG5cdFx0LyogdG9nZ2xlQ2FuZGlkYXRlT25DZWxsIC0gdXNlZCBmb3IgZWRpdGluZ0NhbmRpZGF0ZXMgbW9kZVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHR2YXIgdG9nZ2xlQ2FuZGlkYXRlT25DZWxsID0gZnVuY3Rpb24oY2FuZGlkYXRlLCBjZWxsKXtcblx0XHRcdHZhciBib2FyZENlbGwgPSBib2FyZFtjZWxsXTtcblx0XHRcdGlmKGJvYXJkQ2VsbC52YWwpe1xuXHRcdFx0XHRyZXR1cm47ICAvLyBkb24ndCBtb2RpZnkgY2FuZGlkYXRlcyB3aGVuIGEgY2VsbCBhbHJlYWR5IGhhcyBhIG51bWJlclxuXHRcdFx0fVxuXHRcdFx0dmFyIGMgPSBib2FyZENlbGwuY2FuZGlkYXRlcztcblx0XHRcdGNbY2FuZGlkYXRlLTFdID0gY1tjYW5kaWRhdGUtMV0gPT09IG51bGwgPyBjYW5kaWRhdGUgOiBudWxsO1xuXHRcdFx0aWYoc29sdmVNb2RlID09PSBTT0xWRV9NT0RFX1NURVApXG5cdFx0XHRcdHVwZGF0ZVVJQm9hcmRDZWxsKGNlbGwsIHttb2RlOiBcIm9ubHktY2FuZGlkYXRlc1wifSk7XG5cdFx0fTtcblxuXHRcdC8qIGtleWJvYXJkTnVtYmVySW5wdXQgLSB1cGRhdGUgb3VyIGJvYXJkIG1vZGVsXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdHZhciBrZXlib2FyZE51bWJlcklucHV0ID0gZnVuY3Rpb24oaW5wdXQsIGlkKXtcblx0XHRcdHZhciB2YWwgPSBwYXJzZUludChpbnB1dC52YWwoKSk7XG5cdFx0XHRpZihlZGl0aW5nQ2FuZGlkYXRlcyl7XG5cdFx0XHRcdHRvZ2dsZUNhbmRpZGF0ZU9uQ2VsbCh2YWwsIGlkKTtcblx0XHRcdFx0Ly8gcmVzZXQgdmFsdWUgb24gYm9hcmRcblx0XHRcdFx0aW5wdXQudmFsKGJvYXJkW2lkXS52YWwpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vbG9nKGlkK1wiOiBcIit2YWwgK1wiIGVudGVyZWQuXCIpO1xuXG5cdFx0XHR2YXIgY2FuZGlkYXRlcyA9IGdldE51bGxDYW5kaWRhdGVzTGlzdCgpOyAvL1tudWxsLG51bGwuLi4ubnVsbF07XG5cblxuXHRcdFx0aWYgKHZhbCA+IDApIHsgLy9pbnZhbGlkYXRlcyBOYW5cblx0XHRcdFx0Ly9jaGVjayB0aGF0IHRoaXMgZG9lc24ndCBtYWtlIGJvYXJkIGluY29ycmVjdFxuXHRcdFx0XHR2YXIgdGVtcCA9IGhvdXNlc1dpdGhDZWxsKGlkKTtcblx0XHRcdFx0Ly9mb3IgZWFjaCB0eXBlIG9mIGhvdXNlXG5cdFx0XHRcdGZvcih2YXIgaT0wOyBpIDwgaG91c2VzLmxlbmd0aDsgaSsrKXtcblxuXHRcdFx0XHRcdGlmKGluZGV4SW5Ib3VzZSh2YWwsIGhvdXNlc1tpXVt0ZW1wW2ldXSkpe1xuXHRcdFx0XHRcdFx0Ly9kaWdpdCBhbHJlYWR5IGluIGhvdXNlIC0gYm9hcmQgaW5jb3JyZWN0IHdpdGggdXNlciBpbnB1dFxuXHRcdFx0XHRcdFx0Ly8gbG9nKFwiYm9hcmQgaW5jb3JyZWN0IVwiKTtcblx0XHRcdFx0XHRcdHZhciBhbHJlYWR5RXhpc3RpbmdDZWxsSW5Ib3VzZVdpdGhEaWdpdCA9IGhvdXNlc1tpXVt0ZW1wW2ldXVtpbmRleEluSG91c2UodmFsLCBob3VzZXNbaV1bdGVtcFtpXV0pXTtcblxuXHRcdFx0XHRcdFx0Ly90aGlzIGhhcHBlbnMgaW4gY2FuZGlkYXRlIG1vZGUsIGlmIHdlIGhpZ2hsaWdodCBvbiB1aSBib2FyZCBiZWZvcmUgZW50ZXJpbmcgdmFsdWUsIGFuZCB1c2VyIHRoZW4gZW50ZXJzIGJlZm9yZSB1cy5cblx0XHRcdFx0XHRcdGlmKGFscmVhZHlFeGlzdGluZ0NlbGxJbkhvdXNlV2l0aERpZ2l0ID09PSBpZClcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cblx0XHRcdFx0XHRcdCQoXCIjaW5wdXQtXCIgKyBhbHJlYWR5RXhpc3RpbmdDZWxsSW5Ib3VzZVdpdGhEaWdpdCArIFwiLCAjaW5wdXQtXCIraWQpXG5cdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyhcImJvYXJkLWNlbGwtLWVycm9yXCIpO1xuXHRcdFx0XHRcdFx0Ly9tYWtlIGFzIGluY29ycmVjdCBpbiBVSVxuXG5cdFx0XHRcdFx0XHQvL2lucHV0IHdhcyBpbmNvcnJlY3QsIHNvIGRvbid0IHVwZGF0ZSBvdXIgYm9hcmQgbW9kZWxcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvL3JlbW92ZSBjYW5kaWRhdGVzLi5cblx0XHRcdFx0aW5wdXQuc2libGluZ3MoXCIuY2FuZGlkYXRlc1wiKS5odG1sKGJ1aWxkQ2FuZGlkYXRlc1N0cmluZyhjYW5kaWRhdGVzKSk7XG5cdFx0XHRcdC8vdXBkYXRlIGJvYXJkXG5cdFx0XHRcdGJvYXJkW2lkXS5jYW5kaWRhdGVzID0gY2FuZGlkYXRlcztcblx0XHRcdFx0Ym9hcmRbaWRdLnZhbCA9IHZhbDtcblxuXHRcdFx0XHQvL2NoZWNrIGlmIHRoYXQgZmluaXNoZWQgYm9hcmRcblx0XHRcdFx0aWYoaXNCb2FyZEZpbmlzaGVkKCkpe1xuXHRcdFx0XHRcdGJvYXJkRmluaXNoZWQgPSB0cnVlO1xuXHRcdFx0XHRcdGxvZyhcInVzZXIgZmluaXNoZWQgYm9hcmQhXCIpO1xuXHRcdFx0XHRcdGlmKHR5cGVvZiBvcHRzLmJvYXJkRmluaXNoZWRGbiA9PT0gXCJmdW5jdGlvblwiKXtcblx0XHRcdFx0XHRcdG9wdHMuYm9hcmRGaW5pc2hlZEZuKHtcblx0XHRcdFx0XHRcdFx0Ly93ZSByYXRlIHRoZSBib2FyZCB2aWEgd2hhdCBzdHJhdGVnaWVzIHdhcyB1c2VkIHRvIHNvbHZlIGl0XG5cdFx0XHRcdFx0XHRcdC8vd2UgZG9uJ3QgaGF2ZSB0aGlzIGluZm8gaWYgdXNlciBzb2x2ZWQgaXQsIHVubGVzcyB3ZVxuXHRcdFx0XHRcdFx0XHQvL2Fsd2F5cyBhbmFseXplIGJvYXJkIG9uIGluaXQuLiBidXQgdGhhdCBjb3VsZCBiZSBzbG93LlxuXG5cdFx0XHRcdFx0XHRcdC8vZGlmZmljdWx0eUluZm86IG51bGxcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ym9hcmRFcnJvciA9IGZhbHNlOyAvL3Jlc2V0LCBpbiBjYXNlIHRoZXkgZml4ZWQgYm9hcmQgLSBvdGhlcndpc2UsIHdlJ2xsIGZpbmQgdGhlIGVycm9yIGFnYWluXG5cdFx0XHRcdHZhbCA9IG51bGw7XG5cdFx0XHRcdC8vYWRkIGJhY2sgY2FuZGlkYXRlcyB0byBVSSBjZWxsXG5cdFx0XHRcdGNhbmRpZGF0ZXMgPSBib2FyZE51bWJlcnMuc2xpY2UoKTtcblx0XHRcdFx0aW5wdXQuc2libGluZ3MoXCIuY2FuZGlkYXRlc1wiKS5odG1sKGJ1aWxkQ2FuZGlkYXRlc1N0cmluZyhjYW5kaWRhdGVzKSk7XG5cblx0XHRcdFx0Ly9uZWVkcyB0byBoYXBwZW4gYmVmb3JlIHdlIHJlc2V0Q2FuZGlkYXRlcyBiZWxvd1xuXHRcdFx0XHRib2FyZFtpZF0udmFsID0gdmFsO1xuXG5cdFx0XHRcdC8vdXBkYXRlIGNhbmRpZGF0ZXMgKGlmIHdlIGNvdWxkIHJldmVyc2UgcmVtb3ZlIGNhbmRpZGF0ZXMgZnJvbSB0aGlzIGNlbGwgYW5kIG91dHdhcmRzLCB3ZSB3b3VsZG4ndCBoYXZlIHRvIHJlZG8gYWxsIGJvYXJkKVxuXHRcdFx0XHRyZXNldENhbmRpZGF0ZXMoKTtcblx0XHRcdFx0dmlzdWFsRWxpbWluYXRpb25PZkNhbmRpZGF0ZXMoKTtcblx0XHRcdH1cblx0XHRcdC8vbG9nKGJvYXJkWzFdLmNhbmRpZGF0ZXMpO1xuXG5cdFx0XHQvL0hBQ0s6IHJlbW92ZSBhbGwgZXJyb3JzIGFzIHNvb24gYXMgdGhleSBmaXggb25lIC0gdGhlIG90aGVyIGNlbGxzIGp1c3QgZ2V0IGVtcHRpZWQgb24gYm9hcmQgKGluIFVJOyBhbHJlYWR5IHdlcmUgbnVsbCBpbiBtb2RlbClcblx0XHRcdGlmKCQoXCIjaW5wdXQtXCIraWQpLmhhc0NsYXNzKFwiYm9hcmQtY2VsbC0tZXJyb3JcIikpXG5cdFx0XHRcdCRib2FyZElucHV0cy5yZW1vdmVDbGFzcyhcImJvYXJkLWNlbGwtLWVycm9yXCIpO1xuXG5cdFx0XHRpZih0eXBlb2Ygb3B0cy5ib2FyZFVwZGF0ZWRGbiA9PT0gXCJmdW5jdGlvblwiKVxuXHRcdFx0XHRvcHRzLmJvYXJkVXBkYXRlZEZuKHtjYXVzZTogXCJ1c2VyIGlucHV0XCIsIGNlbGxzVXBkYXRlZDogW2lkXX0pO1xuXG5cdFx0XHRvbmx5VXBkYXRlZENhbmRpZGF0ZXMgPSBmYWxzZTtcblx0XHR9O1xuXG5cdFx0LyogdG9nZ2xlU2hvd0NhbmRpZGF0ZXNcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0dmFyIHRvZ2dsZVNob3dDYW5kaWRhdGVzID0gZnVuY3Rpb24oKXtcblx0XHRcdCRib2FyZC50b2dnbGVDbGFzcyhcInNob3dDYW5kaWRhdGVzXCIpO1xuXHRcdFx0Y2FuZGlkYXRlc1Nob3dpbmcgPSAhY2FuZGlkYXRlc1Nob3dpbmc7XG5cdFx0fTtcblxuXHRcdCAvKiBhbmFseXplQm9hcmRcblx0XHQgICogc29sdmVzIGEgY29weSBvZiB0aGUgY3VycmVudCBib2FyZCh3aXRob3V0IHVwZGF0aW5nIHRoZSBVSSksXG5cdFx0ICAqIHJlcG9ydHMgYmFjazogZXJyb3J8ZmluaXNoZWQsIHVzZWRTdHJhdGVnaWVzIGFuZCBkaWZmaWN1bHR5IGxldmVsIGFuZCBzY29yZVxuXHRcdCAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0IHZhciBhbmFseXplQm9hcmQgPSBmdW5jdGlvbigpe1xuXHRcdFx0Z3JhZGluZ01vZGUgPSB0cnVlO1xuXHRcdFx0c29sdmVNb2RlID0gU09MVkVfTU9ERV9BTEw7XG5cdFx0XHR2YXIgdXNlZFN0cmF0ZWdpZXNDbG9uZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodXNlZFN0cmF0ZWdpZXMpKTtcblx0XHRcdHZhciBib2FyZENsb25lID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShib2FyZCkpO1xuXHRcdFx0dmFyIGNhbkNvbnRpbnVlID0gdHJ1ZTtcblx0XHRcdHdoaWxlKGNhbkNvbnRpbnVlKSB7XG5cdFx0XHRcdHZhciBzdGFydFN0cmF0ID0gb25seVVwZGF0ZWRDYW5kaWRhdGVzID8gMiA6IDA7XG5cdFx0XHRcdGNhbkNvbnRpbnVlID0gc29sdmVGbihzdGFydFN0cmF0KTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGRhdGEgPSB7fTtcblx0XHRcdGlmKGJvYXJkRXJyb3Ipe1xuXHRcdFx0XHRkYXRhLmVycm9yID0gXCJCb2FyZCBpbmNvcnJlY3RcIjtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRkYXRhLmZpbmlzaGVkID0gYm9hcmRGaW5pc2hlZDtcblx0XHRcdFx0ZGF0YS51c2VkU3RyYXRlZ2llcyA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGk8dXNlZFN0cmF0ZWdpZXMubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHRcdHZhciBzdHJhdCA9IHN0cmF0ZWdpZXNbaV07XG5cdFx0XHRcdFx0Ly9vbmx5IHJldHVybiBzdHJhdGVnaWVzIHRoYXQgd2VyZSBhY3R1YWxseSB1c2VkXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiB1c2VkU3RyYXRlZ2llc1tpXSAhPT1cInVuZGVmaW5lZFwiKXtcblx0XHRcdFx0XHRcdGRhdGEudXNlZFN0cmF0ZWdpZXNbaV0gPSB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBzdHJhdC50aXRsZSxcblx0XHRcdFx0XHRcdFx0ZnJlcTogdXNlZFN0cmF0ZWdpZXNbaV1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGJvYXJkRmluaXNoZWQpIHtcblx0XHRcdFx0XHR2YXIgYm9hcmREaWZmID0gY2FsY0JvYXJkRGlmZmljdWx0eSh1c2VkU3RyYXRlZ2llcyk7XG5cdFx0XHRcdFx0ZGF0YS5sZXZlbCA9IGJvYXJkRGlmZi5sZXZlbDtcblx0XHRcdFx0XHRkYXRhLnNjb3JlID0gYm9hcmREaWZmLnNjb3JlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVzdG9yZSBldmVyeXRoaW5nIHRvIHN0YXRlIChiZWZvcmUgc29sdmluZylcblx0XHRcdHJlc2V0Qm9hcmRWYXJpYWJsZXMoKTtcblx0XHRcdHVzZWRTdHJhdGVnaWVzICA9IHVzZWRTdHJhdGVnaWVzQ2xvbmU7XG5cdFx0XHRib2FyZCA9IGJvYXJkQ2xvbmU7XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH07XG5cblxuXHRcdCB2YXIgc2V0Qm9hcmRDZWxsV2l0aFJhbmRvbUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNlbGxJbmRleCwgZm9yY2VVSVVwZGF0ZSl7XG5cdFx0XHQvLyBDSEVDSyBzdGlsbCB2YWxpZFxuXHRcdFx0dmlzdWFsRWxpbWluYXRpb25PZkNhbmRpZGF0ZXMoKTtcblx0XHRcdC8vIERSQVcgUkFORE9NIENBTkRJREFURVxuXHRcdFx0Ly8gZG9uJ3QgZHJhdyBhbHJlYWR5IGludmFsaWRhdGVkIGNhbmRpZGF0ZXMgZm9yIGNlbGxcblx0XHRcdHZhciBpbnZhbGlkcyA9IGludmFsaWRDYW5kaWRhdGVzICYmIGludmFsaWRDYW5kaWRhdGVzW2NlbGxJbmRleF07XG5cdFx0XHQvLyBUT0RPOiBkb24ndCB1c2UgSlMgZmlsdGVyIC0gbm90IHN1cHBvcnRlZCBlbm91Z2goPylcblx0XHRcdHZhciBjYW5kaWRhdGVzID0gYm9hcmRbY2VsbEluZGV4XS5jYW5kaWRhdGVzLmZpbHRlcihmdW5jdGlvbihjYW5kaWRhdGUpe1xuXHRcdFx0XHRpZighY2FuZGlkYXRlIHx8IChpbnZhbGlkcyAmJiBjb250YWlucyhpbnZhbGlkcywgY2FuZGlkYXRlKSkpXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRyZXR1cm4gY2FuZGlkYXRlO1xuXHRcdFx0fSk7XG5cdFx0XHQvLyBpZiBjZWxsIGhhcyAwIGNhbmRpZGF0ZXMgLSBmYWlsIHRvIHNldCBjZWxsLlxuXHRcdFx0aWYoY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIHJhbmRJbmRleCA9IE1hdGgucm91bmQgKCBNYXRoLnJhbmRvbSgpICogKGNhbmRpZGF0ZXMubGVuZ3RoIC0gMSkpO1xuXHRcdFx0dmFyIHJhbmRvbUNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbcmFuZEluZGV4XTtcblx0XHRcdC8vIFVQREFURSBCT0FSRFxuXHRcdFx0c2V0Qm9hcmRDZWxsKGNlbGxJbmRleCwgcmFuZG9tQ2FuZGlkYXRlKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH07XG5cblx0XHR2YXIgZ2VuZXJhdGVCb2FyZEFuc3dlclJlY3Vyc2l2ZWx5ID0gZnVuY3Rpb24oY2VsbEluZGV4KXtcblx0XHRcdGlmKChjZWxsSW5kZXgrMSkgPiAoYm9hcmRTaXplKmJvYXJkU2l6ZSkpe1xuXHRcdFx0XHQvL2RvbmVcblx0XHRcdFx0aW52YWxpZENhbmRpZGF0ZXMgPSBbXTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZihzZXRCb2FyZENlbGxXaXRoUmFuZG9tQ2FuZGlkYXRlKGNlbGxJbmRleCkpe1xuXHRcdFx0XHRnZW5lcmF0ZUJvYXJkQW5zd2VyUmVjdXJzaXZlbHkoY2VsbEluZGV4ICsgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZihjZWxsSW5kZXggPD0gMClcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdHZhciBsYXN0SW5kZXggPSBjZWxsSW5kZXggLSAxO1xuXHRcdFx0XHRpbnZhbGlkQ2FuZGlkYXRlc1tsYXN0SW5kZXhdID0gaW52YWxpZENhbmRpZGF0ZXNbbGFzdEluZGV4XSB8fCBbXTtcblx0XHRcdFx0aW52YWxpZENhbmRpZGF0ZXNbbGFzdEluZGV4XS5wdXNoKGJvYXJkW2xhc3RJbmRleF0udmFsKTtcblx0XHRcdFx0Ly8gc2V0IHZhbCBiYWNrIHRvIG51bGxcblx0XHRcdFx0c2V0Qm9hcmRDZWxsKGxhc3RJbmRleCwgbnVsbCk7XG5cdFx0XHRcdC8vIHJlc2V0IGNhbmRpZGF0ZXMsIG9ubHkgaW4gbW9kZWwuXG5cdFx0XHRcdHJlc2V0Q2FuZGlkYXRlcyhmYWxzZSk7XG5cdFx0XHRcdC8vIHJlc2V0IGludmFsaWQgY2FuZGlkYXRlcyBmb3IgY2VsbEluZGV4XG5cdFx0XHRcdGludmFsaWRDYW5kaWRhdGVzW2NlbGxJbmRleF0gPSBbXTtcblx0XHRcdFx0Ly8gdGhlbiB0cnkgYWdhaW5cblx0XHRcdFx0Z2VuZXJhdGVCb2FyZEFuc3dlclJlY3Vyc2l2ZWx5KGxhc3RJbmRleCk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIGVhc3lFbm91Z2ggPSBmdW5jdGlvbihkYXRhKXtcblx0XHRcdC8vIGNvbnNvbGUubG9nKGRhdGEubGV2ZWwpO1xuXHRcdFx0aWYoZGF0YS5sZXZlbCA9PT0gRElGRklDVUxUWV9FQVNZKVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdGlmKGRhdGEubGV2ZWwgPT09IERJRkZJQ1VMVFlfTUVESVVNKVxuXHRcdFx0XHRyZXR1cm4gZGlmZmljdWx0eSAhPT0gRElGRklDVUxUWV9FQVNZO1xuXHRcdFx0aWYoZGF0YS5sZXZlbCA9PT0gRElGRklDVUxUWV9IQVJEKVxuXHRcdFx0XHRyZXR1cm4gZGlmZmljdWx0eSAhPT0gRElGRklDVUxUWV9FQVNZICYmIGRpZmZpY3VsdHkgIT09IERJRkZJQ1VMVFlfTUVESVVNO1xuXHRcdFx0aWYoZGF0YS5sZXZlbCA9PT0gRElGRklDVUxUWV9WRVJZX0hBUkQpXG5cdFx0XHRcdHJldHVybiBkaWZmaWN1bHR5ICE9PSBESUZGSUNVTFRZX0VBU1kgJiYgZGlmZmljdWx0eSAhPT0gRElGRklDVUxUWV9NRURJVU0gJiYgZGlmZmljdWx0eSAhPT0gRElGRklDVUxUWV9IQVJEO1xuXHRcdH07XG5cdFx0dmFyIGhhcmRFbm91Z2ggPSBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRpZihkaWZmaWN1bHR5ID09PSBESUZGSUNVTFRZX0VBU1kpXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0aWYoZGlmZmljdWx0eSA9PT0gRElGRklDVUxUWV9NRURJVU0pXG5cdFx0XHRcdHJldHVybiBkYXRhLmxldmVsICE9PSBESUZGSUNVTFRZX0VBU1k7XG5cdFx0XHRpZihkaWZmaWN1bHR5ID09PSBESUZGSUNVTFRZX0hBUkQpXG5cdFx0XHRcdHJldHVybiBkYXRhLmxldmVsICE9PSBESUZGSUNVTFRZX0VBU1kgJiYgZGF0YS5sZXZlbCAhPT0gRElGRklDVUxUWV9NRURJVU07XG5cdFx0XHRpZihkaWZmaWN1bHR5ID09PSBESUZGSUNVTFRZX1ZFUllfSEFSRClcblx0XHRcdFx0cmV0dXJuIGRhdGEubGV2ZWwgIT09IERJRkZJQ1VMVFlfRUFTWSAmJiBkYXRhLmxldmVsICE9PSBESUZGSUNVTFRZX01FRElVTSAmJiBkYXRhLmxldmVsICE9PSBESUZGSUNVTFRZX0hBUkQ7XG5cdFx0fTtcblxuXHRcdHZhciBkaWdDZWxscyA9IGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgY2VsbHMgPSBbXTtcblx0XHRcdHZhciBnaXZlbiA9IGJvYXJkU2l6ZSpib2FyZFNpemU7XG5cdFx0XHR2YXIgbWluR2l2ZW4gPSAxNztcblx0XHRcdGlmKGRpZmZpY3VsdHkgPT09IERJRkZJQ1VMVFlfRUFTWSl7XG5cdFx0XHRcdG1pbkdpdmVuID0gNDA7XG5cdFx0XHR9IGVsc2UgaWYoZGlmZmljdWx0eSA9PT0gRElGRklDVUxUWV9NRURJVU0pe1xuXHRcdFx0XHRtaW5HaXZlbiA9IDMwO1xuXHRcdFx0fVxuICAgICAgaWYgKGJvYXJkU2l6ZSA8IDkpIHtcbiAgICAgICAgbWluR2l2ZW4gPSA0XG4gICAgICB9XG5cdFx0XHRmb3IgKHZhciBpPTA7IGkgPCBib2FyZFNpemUqYm9hcmRTaXplOyBpKyspe1xuXHRcdFx0XHRjZWxscy5wdXNoKGkpO1xuXHRcdFx0fVxuXG5cdFx0XHR3aGlsZShjZWxscy5sZW5ndGggPiAwICYmIGdpdmVuID4gbWluR2l2ZW4pe1xuXHRcdFx0XHR2YXIgcmFuZEluZGV4ID0gTWF0aC5yb3VuZCAoIE1hdGgucmFuZG9tKCkgKiAoY2VsbHMubGVuZ3RoIC0gMSkpO1xuXHRcdFx0XHR2YXIgY2VsbEluZGV4ID0gY2VsbHMuc3BsaWNlKHJhbmRJbmRleCwxKTtcblx0XHRcdFx0dmFyIHZhbCA9IGJvYXJkW2NlbGxJbmRleF0udmFsO1xuXG5cdFx0XHRcdC8vIHJlbW92ZSB2YWx1ZSBmcm9tIHRoaXMgY2VsbFxuXHRcdFx0XHRzZXRCb2FyZENlbGwoY2VsbEluZGV4LCBudWxsKTtcblx0XHRcdFx0Ly8gcmVzZXQgY2FuZGlkYXRlcywgb25seSBpbiBtb2RlbC5cblx0XHRcdFx0cmVzZXRDYW5kaWRhdGVzKGZhbHNlKTtcblxuXHRcdFx0XHR2YXIgZGF0YSA9IGFuYWx5emVCb2FyZCgpO1xuXHRcdFx0XHRpZiAoZGF0YS5maW5pc2hlZCAhPT0gZmFsc2UgJiYgZWFzeUVub3VnaChkYXRhKSkge1xuXHRcdFx0XHRcdGdpdmVuLS07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gcmVzZXQgLSBkb24ndCBkaWcgdGhpcyBjZWxsXG5cdFx0XHRcdFx0c2V0Qm9hcmRDZWxsKGNlbGxJbmRleCwgdmFsKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cdFx0fTtcblxuICAgIC8vIGdlbmVyYXRlcyBib2FyZCBwdXp6bGUsIGkuZS4gdGhlIGFuc3dlcnMgZm9yIHRoaXMgcm91bmRcbiAgICAvLyByZXF1aXJlcyB0aGF0IGEgYm9hcmQgZm9yIGJvYXJkU2l6ZSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYXRlZFxuXHRcdHZhciBnZW5lcmF0ZUJvYXJkID0gZnVuY3Rpb24oZGlmZiwgY2FsbGJhY2spe1xuXHRcdFx0aWYoJGJvYXJkSW5wdXRzKVxuXHRcdFx0XHRjbGVhckJvYXJkKCk7XG4gICAgICBpZiAoY29udGFpbnMoRElGRklDVUxUSUVTLCBkaWZmKSkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gZGlmZlxuICAgICAgfSBlbHNlIGlmIChib2FyZFNpemUgPj0gOSkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gRElGRklDVUxUWV9NRURJVU1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpZmZpY3VsdHkgPSBESUZGSUNVTFRZX0VBU1lcbiAgICAgIH1cblx0XHRcdGdlbmVyYXRpbmdNb2RlID0gdHJ1ZTtcblx0XHRcdHNvbHZlTW9kZSA9IFNPTFZFX01PREVfQUxMO1xuXG5cdFx0XHQvLyB0aGUgYm9hcmQgZ2VuZXJhdGVkIHdpbGwgcG9zc2libHkgbm90IGJlIGhhcmQgZW5vdWdoXG5cdFx0XHQvLyAoaWYgeW91IGFza2VkIGZvciBcImhhcmRcIiwgeW91IG1vc3QgbGlrZWx5IGdldCBcIm1lZGl1bVwiKVxuXHRcdFx0Z2VuZXJhdGVCb2FyZEFuc3dlclJlY3Vyc2l2ZWx5KDApO1xuXG5cdFx0XHQvLyBhdHRlbXB0IG9uZSAtIHNhdmUgdGhlIGFuc3dlciwgYW5kIHRyeSBkaWdnaW5nIG11bHRpcGxlIHRpbWVzLlxuXHRcdFx0dmFyIGJvYXJkQW5zd2VyID0gYm9hcmQuc2xpY2UoKTtcblxuXHRcdFx0dmFyIGJvYXJkVG9vRWFzeSA9IHRydWU7XG5cblx0XHRcdHdoaWxlKGJvYXJkVG9vRWFzeSl7XG5cdFx0XHRcdGRpZ0NlbGxzKCk7XG5cdFx0XHRcdHZhciBkYXRhID0gYW5hbHl6ZUJvYXJkKCk7XG5cdFx0XHRcdGlmKGhhcmRFbm91Z2goZGF0YSkpXG5cdFx0XHRcdFx0Ym9hcmRUb29FYXN5ID0gZmFsc2U7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRib2FyZCA9IGJvYXJkQW5zd2VyO1xuXHRcdFx0fVxuXHRcdFx0c29sdmVNb2RlID0gU09MVkVfTU9ERV9TVEVQO1xuXHRcdFx0aWYoJGJvYXJkSW5wdXRzKVxuXHRcdFx0XHR1cGRhdGVVSUJvYXJkKCk7XG5cblx0XHRcdHZpc3VhbEVsaW1pbmF0aW9uT2ZDYW5kaWRhdGVzKCk7XG5cblx0XHRcdGlmKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyl7XG5cdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXG5cdFx0Lypcblx0XHQgKiBpbml0L0FQSS9ldmVudHNcblx0XHQgKi0tLS0tLS0tLS0tKi9cblx0XHRpZighb3B0cy5ib2FyZCkge1xuXHRcdFx0aW5pdEJvYXJkKG9wdHMpO1xuXHRcdFx0Z2VuZXJhdGVCb2FyZChvcHRzKTtcblx0XHRcdHJlbmRlckJvYXJkKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJvYXJkID0gb3B0cy5ib2FyZDtcblx0XHRcdGluaXRCb2FyZCgpO1xuXHRcdFx0cmVuZGVyQm9hcmQoKTtcblx0XHRcdHZpc3VhbEVsaW1pbmF0aW9uT2ZDYW5kaWRhdGVzKCk7XG5cdFx0fVxuXG5cblx0XHQkYm9hcmRJbnB1dHMub24oXCJrZXl1cFwiLCBmdW5jdGlvbihlKXtcblx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyk7XG5cdFx0XHR2YXIgaWQgPSBwYXJzZUludCgkdGhpcy5hdHRyKFwiaWRcIikucmVwbGFjZShcImlucHV0LVwiLFwiXCIpKTtcblx0XHRcdC8vYWxsb3cga2V5Ym9hcmQgbW92ZW1lbnRzXG5cdFx0XHRpZihlLmtleUNvZGUgPj0zNyAmJiBlLmtleUNvZGUgPD0gNDApey8vIHx8IGUua2V5Q29kZSA9PT00OCl7XG5cdFx0XHRcdGtleWJvYXJkTW92ZUJvYXJkRm9jdXMoaWQsIGUua2V5Q29kZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ly9saXN0ZW4gb24gY2hhbmdlIGJlY2F1c2UgdmFsIGlzIGluY29ycmVjdCBhbGwgdGhlIHRpbWUgb24ga2V5dXAsIGJlY2F1c2UgaGF2ZSB0byBmaWx0ZXIgb3V0IGFsbCBvdGhlciBrZXlzLlxuXHRcdCRib2FyZElucHV0cy5vbihcImNoYW5nZVwiLCBmdW5jdGlvbigpe1xuXHRcdFx0dmFyICR0aGlzID0gJCh0aGlzKTtcblx0XHRcdHZhciBpZCA9IHBhcnNlSW50KCR0aGlzLmF0dHIoXCJpZFwiKS5yZXBsYWNlKFwiaW5wdXQtXCIsXCJcIikpO1xuXHRcdFx0a2V5Ym9hcmROdW1iZXJJbnB1dCgkdGhpcywgaWQpO1xuXHRcdH0pO1xuXG5cblxuXHRcdC8qKlxuXHRcdCogUFVCTElDIG1ldGhvZHNcblx0XHQqIC0tLS0tLS0tLS0tLS0tLS0tICovXG5cdFx0dmFyIHNvbHZlQWxsID0gZnVuY3Rpb24oKXtcblx0XHRcdHNvbHZlTW9kZSA9IFNPTFZFX01PREVfQUxMO1xuXHRcdFx0dmFyIGNhbkNvbnRpbnVlID0gdHJ1ZTtcblx0XHRcdHdoaWxlKGNhbkNvbnRpbnVlKSB7XG5cdFx0XHRcdHZhciBzdGFydFN0cmF0ID0gb25seVVwZGF0ZWRDYW5kaWRhdGVzID8gMiA6IDA7XG5cdFx0XHRcdGNhbkNvbnRpbnVlID0gc29sdmVGbihzdGFydFN0cmF0KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIHNvbHZlU3RlcCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRzb2x2ZU1vZGUgPSBTT0xWRV9NT0RFX1NURVA7XG5cdFx0XHR2YXIgc3RhcnRTdHJhdCA9IG9ubHlVcGRhdGVkQ2FuZGlkYXRlcyA/IDIgOiAwO1xuXHRcdFx0c29sdmVGbihzdGFydFN0cmF0KTtcblx0XHR9O1xuXG5cdFx0dmFyIGdldEJvYXJkID0gZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiBib2FyZDtcblx0XHR9O1xuXG5cdFx0dmFyIHNldEJvYXJkID0gZnVuY3Rpb24obmV3Qm9hcmQpe1xuICAgICAgY2xlYXJCb2FyZCgpOyAvLyBpZiBhbnkgcHJlLWV4aXN0aW5nXG5cdFx0XHRib2FyZCA9IG5ld0JvYXJkO1xuXHRcdFx0aW5pdEJvYXJkKCk7XG5cdFx0XHR2aXN1YWxFbGltaW5hdGlvbk9mQ2FuZGlkYXRlcygpO1xuXHRcdFx0dXBkYXRlVUlCb2FyZChmYWxzZSk7XG5cdFx0fTtcblxuXHRcdHZhciBoaWRlQ2FuZGlkYXRlcyA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQkYm9hcmQucmVtb3ZlQ2xhc3MoXCJzaG93Q2FuZGlkYXRlc1wiKTtcblx0XHRcdGNhbmRpZGF0ZXNTaG93aW5nID0gZmFsc2U7XG5cdFx0fTtcblx0XHR2YXIgc2hvd0NhbmRpZGF0ZXMgPSBmdW5jdGlvbigpe1xuXHRcdFx0JGJvYXJkLmFkZENsYXNzKFwic2hvd0NhbmRpZGF0ZXNcIik7XG5cdFx0XHRjYW5kaWRhdGVzU2hvd2luZyA9IHRydWU7XG5cdFx0fTtcblxuXHRcdHZhciBzZXRFZGl0aW5nQ2FuZGlkYXRlcyA9IGZ1bmN0aW9uKG5ld1ZhbCl7XG5cdFx0XHRlZGl0aW5nQ2FuZGlkYXRlcyA9IG5ld1ZhbDtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHNvbHZlQWxsIDogc29sdmVBbGwsXG5cdFx0XHRzb2x2ZVN0ZXAgOiBzb2x2ZVN0ZXAsXG5cdFx0XHRhbmFseXplQm9hcmQgOiBhbmFseXplQm9hcmQsXG5cdFx0XHRjbGVhckJvYXJkIDogY2xlYXJCb2FyZCxcblx0XHRcdGdldEJvYXJkIDogZ2V0Qm9hcmQsXG5cdFx0XHRzZXRCb2FyZCA6IHNldEJvYXJkLFxuXHRcdFx0aGlkZUNhbmRpZGF0ZXMgOiBoaWRlQ2FuZGlkYXRlcyxcblx0XHRcdHNob3dDYW5kaWRhdGVzIDogc2hvd0NhbmRpZGF0ZXMsXG5cdFx0XHRzZXRFZGl0aW5nQ2FuZGlkYXRlczogc2V0RWRpdGluZ0NhbmRpZGF0ZXMsXG5cdFx0XHRnZW5lcmF0ZUJvYXJkIDogZ2VuZXJhdGVCb2FyZFxuXHRcdH07XG5cdH07XG5cblxufSkod2luZG93LCBqUXVlcnkpO1xuXG52YXIgJGNhbmRpZGF0ZVRvZ2dsZSA9ICQoXCIuanMtY2FuZGlkYXRlLXRvZ2dsZVwiKSxcbiAgICAkZ2VuZXJhdGVCb2FyZEJ0bkVhc3kgPSAkKFwiLmpzLWdlbmVyYXRlLWJvYXJkLWJ0bi0tZWFzeVwiKSxcbiAgICAkZ2VuZXJhdGVCb2FyZEJ0bk1lZGl1bSA9ICQoXCIuanMtZ2VuZXJhdGUtYm9hcmQtYnRuLS1tZWRpdW1cIiksXG4gICAgJGdlbmVyYXRlQm9hcmRCdG5IYXJkID0gJChcIi5qcy1nZW5lcmF0ZS1ib2FyZC1idG4tLWhhcmRcIiksXG4gICAgJGdlbmVyYXRlQm9hcmRCdG5WZXJ5SGFyZCA9ICQoXCIuanMtZ2VuZXJhdGUtYm9hcmQtYnRuLS12ZXJ5LWhhcmRcIiksXG5cbiAgICAkc29sdmVTdGVwQnRuID0gJChcIi5qcy1zb2x2ZS1zdGVwLWJ0blwiKSxcbiAgICAkc29sdmVBbGxCdG4gPSAkKFwiLmpzLXNvbHZlLWFsbC1idG5cIiksXG4gICAgJGNsZWFyQm9hcmRCdG4gPSAkKFwiLmpzLWNsZWFyLWJvYXJkLWJ0blwiKSxcblxuXG5cbiAgICBteVN1ZG9rdUpTID0gJChcIiNzdWRva3VcIikuc3Vkb2t1SlMoe1xuICAgICAgICBkaWZmaWN1bHR5OiBcInZlcnkgaGFyZFwiXG4gICAgICAgIC8vY2hhbmdlIHN0YXRlIG9mIG91ciBjYW5kaWRhdGUgc2hvd2luZyBjaGVja2JveCBvbiBjaGFuZ2UgaW4gc3Vkb2t1SlNcbiAgICAgICAgLGNhbmRpZGF0ZVNob3dUb2dnbGVGbiA6IGZ1bmN0aW9uKHNob3dpbmcpe1xuICAgICAgICAkY2FuZGlkYXRlVG9nZ2xlLnByb3AoXCJjaGVja2VkXCIsIHNob3dpbmcpO1xuICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAkc29sdmVTdGVwQnRuLm9uKFwiY2xpY2tcIiwgbXlTdWRva3VKUy5zb2x2ZVN0ZXApO1xuICAgICRzb2x2ZUFsbEJ0bi5vbihcImNsaWNrXCIsIG15U3Vkb2t1SlMuc29sdmVBbGwpO1xuICAgICRjbGVhckJvYXJkQnRuLm9uKFwiY2xpY2tcIiwgbXlTdWRva3VKUy5jbGVhckJvYXJkKTtcblxuICAgICRnZW5lcmF0ZUJvYXJkQnRuRWFzeS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgIG15U3Vkb2t1SlMuZ2VuZXJhdGVCb2FyZChcImVhc3lcIik7XG4gICAgfSk7XG4gICAgJGdlbmVyYXRlQm9hcmRCdG5NZWRpdW0ub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgICAgICBteVN1ZG9rdUpTLmdlbmVyYXRlQm9hcmQoXCJtZWRpdW1cIik7XG4gICAgfSk7XG4gICAgJGdlbmVyYXRlQm9hcmRCdG5IYXJkLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgbXlTdWRva3VKUy5nZW5lcmF0ZUJvYXJkKFwiaGFyZFwiKTtcbiAgICB9KTtcbiAgICAkZ2VuZXJhdGVCb2FyZEJ0blZlcnlIYXJkLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgIG15U3Vkb2t1SlMuZ2VuZXJhdGVCb2FyZChcImRpYWJvbGljYWxcIik7XG4gICAgfSk7XG5cbiAgICAkY2FuZGlkYXRlVG9nZ2xlLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKCRjYW5kaWRhdGVUb2dnbGUuaXMoXCI6Y2hlY2tlZFwiKSlcbiAgICAgICAgICAgIG15U3Vkb2t1SlMuc2hvd0NhbmRpZGF0ZXMoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbXlTdWRva3VKUy5oaWRlQ2FuZGlkYXRlcygpO1xuICAgIH0pO1xuICAgICRjYW5kaWRhdGVUb2dnbGUudHJpZ2dlcihcImNoYW5nZVwiKTtcblxuIiwidmFyIHRodW1ibmFpbFNsaWRlck9wdGlvbnMgPVxuICAgIHtcbiAgICAgICAgc2xpZGVySWQ6IFwidGh1bWJuYWlsLXNsaWRlclwiLFxuICAgICAgICBvcmllbnRhdGlvbjogXCJob3Jpem9udGFsXCIsXG4gICAgICAgIHRodW1iV2lkdGg6IFwiYXV0b1wiLFxuICAgICAgICB0aHVtYkhlaWdodDogXCI1MHB4XCIsXG4gICAgICAgIHNob3dNb2RlOiAxLFxuICAgICAgICBhdXRvQWR2YW5jZTogZmFsc2UsXG4gICAgICAgIHNlbGVjdGFibGU6IHRydWUsXG4gICAgICAgIHNsaWRlSW50ZXJ2YWw6IDMwMDAsXG4gICAgICAgIHRyYW5zaXRpb25TcGVlZDogNzAwLFxuICAgICAgICBzaHVmZmxlOiBmYWxzZSxcbiAgICAgICAgc3RhcnRTbGlkZUluZGV4OiAwLCAvLzAtYmFzZWRcbiAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICBpbml0U2xpZGVyQnlDYWxsaW5nSW5pdEZ1bmM6IGZhbHNlLFxuICAgICAgICByaWdodEdhcDogbnVsbCxcbiAgICAgICAga2V5Ym9hcmROYXY6IGZhbHNlLFxuICAgICAgICBtb3VzZXdoZWVsTmF2OiBmYWxzZSxcbiAgICAgICAgYmVmb3JlOiBmdW5jdGlvbiAoY3VycmVudElkeCwgbmV4dElkeCwgbWFudWFsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5zbGlkZXIgIT0gXCJ1bmRlZmluZWRcIikgbnNsaWRlci5kaXNwbGF5U2xpZGUobmV4dElkeCk7XG4gICAgICAgIH0sXG4gICAgICAgIGxpY2Vuc2U6IFwiYjJlNjcxXCJcbiAgICB9O1xuXG52YXIgbWNUaHVtYm5haWxTbGlkZXIgPSBuZXcgVGh1bWJuYWlsU2xpZGVyKHRodW1ibmFpbFNsaWRlck9wdGlvbnMpO1xuXG4vKiBUaHVtYm5haWxTbGlkZXIgU2xpZGVyIHYyMDE1LjEwLjI2LiBDb3B5cmlnaHQoQykgd3d3Lm1lbnVjb29sLmNvbS4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gKi9cbmZ1bmN0aW9uIFRodW1ibmFpbFNsaWRlcihhKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnRyaW0gIT09IFwiZnVuY3Rpb25cIikgU3RyaW5nLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKVxuICAgIH07XG4gICAgdmFyIGUgPSBcImxlbmd0aFwiLCBsID0gZG9jdW1lbnQsIE1iID0gZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIHZhciBhID0gYy5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgaWYgKGEgJiYgYVtlXSkge1xuICAgICAgICAgICAgICAgIHZhciBiID0gYVtlXTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoYi0tKSBhW2JdLm5vZGVUeXBlICE9IDEgJiYgYVtiXVttXS5yZW1vdmVDaGlsZChhW2JdKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBlYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAoYSAmJiBhLnN0b3BQcm9wYWdhdGlvbikgYS5zdG9wUHJvcGFnYXRpb24oKTsgZWxzZSBpZiAoYSAmJiB0eXBlb2YgYS5jYW5jZWxCdWJibGUgIT0gXCJ1bmRlZmluZWRcIikgYS5jYW5jZWxCdWJibGUgPSB0cnVlXG4gICAgICAgIH0sIGRiID0gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIHZhciBhID0gYiB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgICBpZiAoYS5wcmV2ZW50RGVmYXVsdCkgYS5wcmV2ZW50RGVmYXVsdCgpOyBlbHNlIGlmIChhKSBhLnJldHVyblZhbHVlID0gZmFsc2VcbiAgICAgICAgfSwgUWIgPSBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBiW2ZdLndlYmtpdEFuaW1hdGlvbk5hbWUgIT0gXCJ1bmRlZmluZWRcIikgdmFyIGEgPSBcIi13ZWJraXQtXCI7IGVsc2UgYSA9IFwiXCI7XG4gICAgICAgICAgICByZXR1cm4gYVxuICAgICAgICB9LCBLYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBiID0gbC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIik7XG4gICAgICAgICAgICBpZiAoYltlXSkge1xuICAgICAgICAgICAgICAgIHZhciBhID0gbC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgICAgICAgICAgYlswXS5hcHBlbmRDaGlsZChhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5zaGVldCA/IGEuc2hlZXQgOiBhLnN0eWxlU2hlZXRcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gMFxuICAgICAgICB9LCB4YiA9IFtcIiQxJDIkM1wiLCBcIiQxJDIkM1wiLCBcIiQxJDI0XCIsIFwiJDEkMjNcIiwgXCIkMSQyMlwiXSwgdmIgPSBmdW5jdGlvbiAoZCwgYykge1xuICAgICAgICAgICAgZm9yICh2YXIgYiA9IFtdLCBhID0gMDsgYSA8IGRbZV07IGErKykgYltiW2VdXSA9IFN0cmluZ1trYl0oZFtaXShhKSAtIChjID8gYyA6IDMpKTtcbiAgICAgICAgICAgIHJldHVybiBiLmpvaW4oXCJcIilcbiAgICAgICAgfSwgVmIgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIGEucmVwbGFjZSgvKD86LipcXC4pPyhcXHcpKFtcXHdcXC1dKT9bXi5dKihcXHcpXFwuW14uXSokLywgXCIkMSQzJDJcIilcbiAgICAgICAgfSxcbiAgICAgICAgd2IgPSBbLyg/Oi4qXFwuKT8oXFx3KShbXFx3XFwtXSlbXi5dKihcXHcpXFwuW14uXSskLywgLy4qKFtcXHdcXC1dKVxcLihcXHcpKFxcdylcXC5bXi5dKyQvLCAvXig/Oi4qXFwuKT8oXFx3KShcXHcpXFwuW14uXSskLywgLy4qKFtcXHdcXC1dKShbXFx3XFwtXSlcXC5jb21cXC5bXi5dKyQvLCAvXihcXHcpW14uXSooXFx3KSQvXSxcbiAgICAgICAgcCA9IHdpbmRvdy5zZXRUaW1lb3V0LCBzID0gXCJuZXh0U2libGluZ1wiLCBxID0gXCJwcmV2aW91c1NpYmxpbmdcIiwgVWIgPSBsLmFsbCAmJiAhd2luZG93LmF0b2IsIG8gPSB7fTtcbiAgICBvLmEgPSBLYigpO1xuICAgIHZhciBtYiA9IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIGIgPSBcIiNcIiArIGEuYiArIGIucmVwbGFjZShcIl9fXCIsIG8ucCk7XG4gICAgICAgIG8uYS5pbnNlcnRSdWxlKGIsIDApXG4gICAgfSwgRGIgPSBmdW5jdGlvbiAoYSwgYywgZiwgZSwgYikge1xuICAgICAgICB2YXIgZCA9IFwiQFwiICsgby5wICsgXCJrZXlmcmFtZXMgXCIgKyBhICsgXCIge2Zyb217XCIgKyBjICsgXCI7fSB0b3tcIiArIGYgKyBcIjt9fVwiO1xuICAgICAgICBvLmEuaW5zZXJ0UnVsZShkLCAwKTtcbiAgICAgICAgbWIoXCIgXCIgKyBlICsgXCJ7X19hbmltYXRpb246XCIgKyBhICsgXCIgXCIgKyBiICsgXCI7fVwiKVxuICAgIH0sIEliID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBEYihcIm1jU3Bpbm5lclwiLCBcInRyYW5zZm9ybTpyb3RhdGUoMGRlZylcIiwgXCJ0cmFuc2Zvcm06cm90YXRlKDM2MGRlZylcIiwgXCJsaS5sb2FkaW5nOjphZnRlclwiLCBcIi43cyBsaW5lYXIgaW5maW5pdGVcIik7XG4gICAgICAgIG1iKFwiIHVsIGxpLmxvYWRpbmc6OmFmdGVye2NvbnRlbnQ6Jyc7ZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoyNHB4O2hlaWdodDoyNHB4O2JvcmRlci13aWR0aDo0cHg7Ym9yZGVyLWNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjgpO2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItdG9wLWNvbG9yOmJsYWNrO2JvcmRlci1yaWdodC1jb2xvcjpyZ2JhKDAsMCwwLC44KTtib3JkZXItcmFkaXVzOjUwJTttYXJnaW46YXV0bztsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDt9XCIpXG4gICAgfSwgQWIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjID0gXCIjXCIgKyBhLmIgKyBcIi1wcmV2OmFmdGVyXCIsXG4gICAgICAgICAgICBiID0gXCJjb250ZW50Oic8Jztmb250LXNpemU6MjBweDtmb250LXdlaWdodDpib2xkO2NvbG9yOiM2NjY7cG9zaXRpb246YWJzb2x1dGU7bGVmdDoxMHB4O1wiO1xuICAgICAgICBpZiAoIWEuYykgYiA9IGIucmVwbGFjZShcIjxcIiwgXCJeXCIpO1xuICAgICAgICBvLmEuYWRkUnVsZShjLCBiLCAwKTtcbiAgICAgICAgby5hLmFkZFJ1bGUoYy5yZXBsYWNlKFwicHJldlwiLCBcIm5leHRcIiksIGIucmVwbGFjZShcIjxcIiwgXCI+XCIpLnJlcGxhY2UoXCJeXCIsIFwidlwiKS5yZXBsYWNlKFwibGVmdFwiLCBcInJpZ2h0XCIpLCAwKVxuICAgIH0sIEUsIE4sIEEsIEIsIEMsIHJiLCBMID0ge30sIHcgPSB7fSwgejtcbiAgICBFID0gKG5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkIHx8IG5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCkgJiYgKG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzIHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyk7XG4gICAgdmFyIEJiID0gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgcmV0dXJuIEEgPT0gXCJwb2ludGVyZG93blwiICYmIChhLnBvaW50ZXJUeXBlID09IGEuTVNQT0lOVEVSX1RZUEVfTU9VU0UgfHwgYS5wb2ludGVyVHlwZSA9PSBcIm1vdXNlXCIpXG4gICAgfTtcbiAgICBOID0gXCJvbnRvdWNoc3RhcnRcIiBpbiB3aW5kb3cgfHwgd2luZG93LkRvY3VtZW50VG91Y2ggJiYgbCBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2ggfHwgRTtcbiAgICB2YXIgQ2IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoTikge1xuICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgQSA9IFwicG9pbnRlcmRvd25cIjtcbiAgICAgICAgICAgICAgICAgICAgQiA9IFwicG9pbnRlcm1vdmVcIjtcbiAgICAgICAgICAgICAgICAgICAgQyA9IFwicG9pbnRlcnVwXCJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIEEgPSBcIk1TUG9pbnRlckRvd25cIjtcbiAgICAgICAgICAgICAgICAgICAgQiA9IFwiTVNQb2ludGVyTW92ZVwiO1xuICAgICAgICAgICAgICAgICAgICBDID0gXCJNU1BvaW50ZXJVcFwiXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgQSA9IFwidG91Y2hzdGFydFwiO1xuICAgICAgICAgICAgICAgICAgICBCID0gXCJ0b3VjaG1vdmVcIjtcbiAgICAgICAgICAgICAgICAgICAgQyA9IFwidG91Y2hlbmRcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByYiA9IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXZlbnQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhLnByZXZlbnRNYW5pcHVsYXRpb24gJiYgYS5wcmV2ZW50TWFuaXB1bGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGEudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hKGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYihhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMoYSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGViKGEpXG4gICAgICAgICAgICAgICAgICAgIH0sIGE6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQmIoYSkgfHwgY1tlXSA8IDIpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gRSA/IGEgOiBhLnRvdWNoZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBMID0ge3g6IGRbYmJdLCB5OiBkW2NiXSwgbDogYi5wU307XG4gICAgICAgICAgICAgICAgICAgICAgICB6ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHcgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJbdF0oQiwgdGhpcywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYlt0XShDLCB0aGlzLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgfSwgYjogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghRSAmJiAoYS50b3VjaGVzW2VdID4gMSB8fCBhLnNjYWxlICYmIGEuc2NhbGUgIT09IDEpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IEUgPyBhIDogYS50b3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHt4OiBiW2JiXSAtIEwueCwgeTogYltjYl0gLSBMLnl9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHogPT09IG51bGwpIHogPSAhISh6IHx8IE1hdGguYWJzKHcueCkgPCBNYXRoLmFicyh3LnkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgheikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiKGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFcgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHViKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaShMLmwgKyB3LngsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIGM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh6ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gZywgbCA9IE1hdGguYWJzKHcueCkgPiAzMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IHcueCA+IDAgPyAxIDogLTEsIG0gPSBmICogdy54ICogMS41IC8gY1tnXVtoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYgPT09IDEgJiYgYS5mID09IDMgJiYgIWNbZ11bcV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0gYi5maXJzdENoaWxkW2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5pbnNlcnRCZWZvcmUoYi5sYXN0Q2hpbGQsIGIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKGIucFMgKyBrIC0gYi5maXJzdENoaWxkW3NdW2RdLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBLKC0tZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGZvciAodmFyIGogPSAwOyBqIDw9IG07IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY1tlXVtxXSkgZS0tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNbZV1bc10pIGUrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBLKGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbihlLCA0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkoTC5sKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEuZykgUiA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKKGcgKyAxLCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBhLmkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXID0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGIucmVtb3ZlRXZlbnRMaXN0ZW5lcihCLCB0aGlzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiLnJlbW92ZUV2ZW50TGlzdGVuZXIoQywgdGhpcywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGJbdF0oQSwgcmIsIGZhbHNlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBQYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICB2YXIgYiA9IFZiKGRvY3VtZW50LmRvbWFpbi5yZXBsYWNlKFwid3d3LlwiLCBcIlwiKSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHR5cGVvZiBhdG9iID09IFwiZnVuY3Rpb25cIiAmJiAoZnVuY3Rpb24gKGEsIGMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSB2YihhdG9iKFwiZHkxM1FXZ3NMVDl0YWl4UExIb3dOQzFCUVN0d0t5b3FUeXg2TUhveWNHbHlhM2hzTVRVdFFVRXJlQ3N0ZDBFMFAyMXFMSGN0ZDE5dVlUSnRjbmRwZG5oR2FXcHpkbWtzYlY5cktDVTJOaVUzTlNVMlJTVWxOallsTnpVbE5rVWxOak1sTnpRbE5qa2xOa1lsTmtVbE1qQWxOalVsTWpnbEtTbzhaeTlrWW0xdEtYVnBhblF0TWlvOGFDa3hLanhvS1RJcVBHcG5LVzQrU3lsdkxYQXFLbngzWW5NaGN6NU9ZblZwTDNOaWIyVndiaWtxTFhRK1pBRmVMWFkrYkNrb1YzQnRhR2wySkhSNWRtZHNaWGRwSkhacGNXMXlhR2wyS0NvdGR6NG9jV0p6Wm05MVQzQmxaaWc4WkhCdmRIQnRaaTl0Y0dncGN5bzhhbWNwZEM5dmNHVm1UMkp1Wmo0K0tFSW9LblErYXlsMEtnRThhbWNwY3o4dk9TcDBMM1JtZFVKMWRYTnFZM1oxWmlrb1ltMTFLQzEyS2p4bWJYUm1JV3BuS1hNL0x6Z3FmSGRpYzNJK1pYQmtkbTVtYjNVdlpITm1ZblZtVldaNWRVOXdaV1lwZGlvdFJ6NXRkM0kxUEdwbktYTS9MemcyS2tjK1IzY3ZhbTkwWm5OMVEyWm5jSE5tS1hJdFJ5cHpablYyYzI4aGRXbHFkRHcyT1NVMlJpVTJSU1U4YW1jcGN6OHZPU3AwTDNSbWRVSjFkWE5xWTNaMVppa29ZbTExY0dSMmJtWWxKRzkxTDJSelptSjFabFZtZVE9PVwiKSwgYVtlXSArIHBhcnNlSW50KGEuY2hhckF0KDEpKSkuc3Vic3RyKDAsIDMpO1xuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdGhpc1tiXSA9PT0gXCJmdW5jdGlvblwiICYmIHRoaXNbYl0oYywgd2IsIHhiKVxuICAgICAgICAgICAgICAgIH0pKGIsIGEpXG4gICAgICAgICAgICB9IGNhdGNoIChjKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGYgPSBcInN0eWxlXCIsIHQgPSBcImFkZEV2ZW50TGlzdGVuZXJcIiwgciA9IFwiY2xhc3NOYW1lXCIsIG0gPSBcInBhcmVudE5vZGVcIiwga2IgPSBcImZyb21DaGFyQ29kZVwiLCBaID0gXCJjaGFyQ29kZUF0XCIsXG4gICAgICAgIFNiID0gZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGMsIGQsIGIgPSBhW2VdOyBiOyBjID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIGIpLCBkID0gYVstLWJdLCBhW2JdID0gYVtjXSwgYVtjXSA9IGQpIDtcbiAgICAgICAgICAgIHJldHVybiBhXG4gICAgICAgIH0sIFJiID0gZnVuY3Rpb24gKGEsIGMpIHtcbiAgICAgICAgICAgIHZhciBiID0gYVtlXTtcbiAgICAgICAgICAgIHdoaWxlIChiLS0pIGlmIChhW2JdID09PSBjKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9LCBJID0gZnVuY3Rpb24gKGEsIGMpIHtcbiAgICAgICAgICAgIHZhciBiID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoYVtyXSkgYiA9IFJiKGFbcl0uc3BsaXQoXCIgXCIpLCBjKTtcbiAgICAgICAgICAgIHJldHVybiBiXG4gICAgICAgIH0sIFAgPSBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICAgICAgaWYgKCFJKGEsIGIpKSBpZiAoYVtyXSA9PSBcIlwiKSBhW3JdID0gYjsgZWxzZSBpZiAoYykgYVtyXSA9IGIgKyBcIiBcIiArIGFbcl07IGVsc2UgYVtyXSArPSBcIiBcIiArIGJcbiAgICAgICAgfSwgSCA9IGZ1bmN0aW9uIChjLCBmKSB7XG4gICAgICAgICAgICBpZiAoY1tyXSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSBcIlwiLCBiID0gY1tyXS5zcGxpdChcIiBcIiksIGEgPSAwLCBnID0gYltlXTsgYSA8IGc7IGErKykgaWYgKGJbYV0gIT09IGYpIGQgKz0gYlthXSArIFwiIFwiO1xuICAgICAgICAgICAgICAgIGNbcl0gPSBkLnRyaW0oKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBLID0gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIHZhciBhID0gY1tlXTtcbiAgICAgICAgICAgIHJldHVybiBiID49IDAgPyBiICUgYSA6IChhICsgYiAlIGEpICUgYVxuICAgICAgICB9LCB2ID0gZnVuY3Rpb24gKGEsIGMsIGIpIHtcbiAgICAgICAgICAgIGlmIChhW3RdKSBhW3RdKGMsIGIsIGZhbHNlKTsgZWxzZSBhLmF0dGFjaEV2ZW50ICYmIGEuYXR0YWNoRXZlbnQoXCJvblwiICsgYywgYilcbiAgICAgICAgfSwgaSA9IGZ1bmN0aW9uIChkLCBlKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGJbZl07XG4gICAgICAgICAgICBpZiAoby5jKSB7XG4gICAgICAgICAgICAgICAgYy53ZWJraXRUcmFuc2l0aW9uRHVyYXRpb24gPSBjLnRyYW5zaXRpb25EdXJhdGlvbiA9IChlID8gMCA6IGEuaikgKyBcIm1zXCI7XG4gICAgICAgICAgICAgICAgYy53ZWJraXRUcmFuc2Zvcm0gPSBjLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlXCIgKyAoYS5jID8gXCJYKFwiIDogXCJZKFwiKSArIGQgKyBcInB4KVwiXG4gICAgICAgICAgICB9IGVsc2UgY1tsYl0gPSBkICsgXCJweFwiO1xuICAgICAgICAgICAgYi5wUyA9IGRcbiAgICAgICAgfSwgb2IgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuICFhLmNvbXBsZXRlID8gMCA6IGEud2lkdGggPT09IDAgPyAwIDogMVxuICAgICAgICB9LCBNID0gbnVsbCwgaiwgeCA9IDAsIGIsIGMgPSBbXSwgZyA9IDAsIFIsIFdiLCBTID0gMCwgZmIgPSAwLCB0YiwgeSA9IDAsIFcgPSAxLCBhYiwgaWIsIGQsIGgsIGssIGxiLCB1ID0gMCwgYmIsIGNiLFxuICAgICAgICBzYiwgTGIgPSBmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgaWYgKCFiLnppbWcpIHtcbiAgICAgICAgICAgICAgICBiLnppbWcgPSAxO1xuICAgICAgICAgICAgICAgIGIudGh1bWIgPSBiLnRodW1iU3JjID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpO1xuICAgICAgICAgICAgICAgIGlmIChoW2VdKSBmb3IgKHZhciBpID0gMDsgaSA8IGhbZV07IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGhbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChJKGQsIFwidGh1bWJcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLnRhZ05hbWUgPT0gXCJBXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2ZdLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIiArIGMgKyBcIicpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC50YWdOYW1lID09IFwiSU1HXCIpIGMgPSBkLnNyYzsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGRbZl0uYmFja2dyb3VuZEltYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjICYmIGMuaW5kZXhPZihcInVybChcIikgIT0gLTEpIGMgPSBjLnN1YnN0cmluZyg0LCBjW2VdIC0gMSkucmVwbGFjZSgvW1xcJ1xcXCJdL2csIFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFttXS50YWdOYW1lICE9IFwiQVwiKSBkW2ZdLmN1cnNvciA9IGEuaCA/IFwicG9pbnRlclwiIDogXCJkZWZhdWx0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIudGh1bWIgPSBkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIudGh1bWJTcmMgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gbmV3IEltYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcub25sb2FkID0gZy5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLnppbWcgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLndpZHRoICYmIGEuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIKGIsIFwibG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8oYiwgYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIE8oYiwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnNyYyA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iKGcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuemltZyA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8oYiwgZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUChiLCBcImxvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuemltZyA9IGdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIuemltZyAhPT0gMSAmJiBvYihiLnppbWcpKSB7XG4gICAgICAgICAgICAgICAgSChiLCBcImxvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgTyhiLCBiLnppbWcpO1xuICAgICAgICAgICAgICAgIGIuemltZyA9IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgcWIgPSAwLCBqYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gZyA9PSAwICYmIGEgPT0gY1tlXSAtIDFcbiAgICAgICAgfSwgbmIgPSBmdW5jdGlvbiAoaSwgbSkge1xuICAgICAgICAgICAgdmFyIGwgPSBjW2ldLCBmID0gMTtcbiAgICAgICAgICAgIGlmIChhLmYgPT0gMykgaWYgKG0gPT0gNCkgZiA9IGxbZF0gPj0gY1tnXVtkXTsgZWxzZSBmID0gaSA+IGcgJiYgIWpiKGkpIHx8IGcgPT0gY1tlXSAtIDEgJiYgaSA9PSAwOyBlbHNlIGlmIChtID09IDQpIGlmIChiLnBTICsgbFtkXSA8IDIwKSBmID0gMDsgZWxzZSBpZiAoYi5wUyArIGxbZF0gKyBsW2hdID49IGpba10pIGYgPSAxOyBlbHNlIGYgPSAtMTsgZWxzZSBmID0gaSA+PSBnICYmICFqYihpKTtcbiAgICAgICAgICAgIHJldHVybiBmXG4gICAgICAgIH0sIEYgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIGEuaW5kZXhPZihcIiVcIikgIT0gLTEgPyBwYXJzZUZsb2F0KGEpIC8gMTAwIDogcGFyc2VJbnQoYSlcbiAgICAgICAgfSwgRmIgPSBmdW5jdGlvbiAoYSwgZCwgYykge1xuICAgICAgICAgICAgaWYgKGQuaW5kZXhPZihcInB4XCIpICE9IC0xICYmIGMuaW5kZXhPZihcInB4XCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgYVtmXS53aWR0aCA9IGQ7XG4gICAgICAgICAgICAgICAgYVtmXS5oZWlnaHQgPSBjXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBiID0gYVtxXTtcbiAgICAgICAgICAgICAgICBpZiAoIWIgfHwgIWJbZl0ud2lkdGgpIGIgPSBhW3NdO1xuICAgICAgICAgICAgICAgIGlmIChiICYmIGJbZl0ud2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYVtmXS53aWR0aCA9IGJbZl0ud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGFbZl0uaGVpZ2h0ID0gYltmXS5oZWlnaHRcbiAgICAgICAgICAgICAgICB9IGVsc2UgYVtmXS53aWR0aCA9IGFbZl0uaGVpZ2h0ID0gXCI2NHB4XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgTyA9IGZ1bmN0aW9uIChwLCBrKSB7XG4gICAgICAgICAgICB2YXIgaiA9IGEuZCwgZCA9IGEuZTtcbiAgICAgICAgICAgIGlmICghaykgRmIocCwgaiwgZCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBpID0gay5uYXR1cmFsV2lkdGggfHwgay53aWR0aCwgaCA9IGsubmF0dXJhbEhlaWdodCB8fCBrLmhlaWdodCwgZSA9IFwid2lkdGhcIiwgZyA9IFwiaGVpZ2h0XCIsIGMgPSBwW2ZdO1xuICAgICAgICAgICAgICAgIGlmIChqID09IFwiYXV0b1wiKSBpZiAoZCA9PSBcImF1dG9cIikge1xuICAgICAgICAgICAgICAgICAgICBjW2ddID0gaCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgY1tlXSA9IGkgKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQuaW5kZXhPZihcIiVcIikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSAod2luZG93LmlubmVySGVpZ2h0IHx8IGwuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkgKiBGKGQpO1xuICAgICAgICAgICAgICAgICAgICBjW2ddID0gbyArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgY1tlXSA9IGkgLyBoICogbyArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhLmMpIGJbbV1bZl0ud2lkdGggPSBjW2VdXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY1tnXSA9IGQ7XG4gICAgICAgICAgICAgICAgICAgIGNbZV0gPSBpIC8gaCAqIEYoZCkgKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGouaW5kZXhPZihcIiVcIikgIT0gLTEpIGlmIChkID09IFwiYXV0b1wiIHx8IGQuaW5kZXhPZihcIiVcIikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBGKGopLCBxID0gYlttXVttXS5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhLmMgJiYgbiA8IC43MSAmJiBxIDwgNDE1KSBuID0gLjk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gcSAqIG47XG4gICAgICAgICAgICAgICAgICAgIGNbZV0gPSByICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICBjW2ddID0gaCAvIGkgKiByICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWEuYykgYlttXVtmXS53aWR0aCA9IGNbZV1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjW2VdID0gaSAvIGggKiBGKGQpICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICBjW2ddID0gZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNbZV0gPSBqO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZCA9PSBcImF1dG9cIiB8fCBkLmluZGV4T2YoXCIlXCIpICE9IC0xKSBjW2ddID0gaCAvIGkgKiBGKGopICsgXCJweFwiOyBlbHNlIGNbZ10gPSBkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBHID0gZnVuY3Rpb24gKGQsIGksIGwsIG8pIHtcbiAgICAgICAgICAgIHZhciBnID0geCB8fCA1LCByID0gMDtcbiAgICAgICAgICAgIGlmIChhLmYgPT0gMyAmJiBpKSBpZiAobCkgdmFyIGYgPSBNYXRoLmNlaWwoZyAvIDIpLCBtID0gZCAtIGYsIG4gPSBkICsgZiArIDE7IGVsc2Uge1xuICAgICAgICAgICAgICAgIG0gPSBkIC0gZztcbiAgICAgICAgICAgICAgICBuID0gZCArIDFcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZiA9IGc7XG4gICAgICAgICAgICAgICAgaWYgKG8pIGYgPSBmICogMjtcbiAgICAgICAgICAgICAgICBpZiAobCkge1xuICAgICAgICAgICAgICAgICAgICBtID0gZDtcbiAgICAgICAgICAgICAgICAgICAgbiA9IGQgKyBmICsgMVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG0gPSBkIC0gZiAtIDE7XG4gICAgICAgICAgICAgICAgICAgIG4gPSBkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgcSA9IG07IHEgPCBuOyBxKyspIHtcbiAgICAgICAgICAgICAgICBmID0gSyhxKTtcbiAgICAgICAgICAgICAgICBMYihjW2ZdKTtcbiAgICAgICAgICAgICAgICBpZiAoY1tmXS56aW1nICE9PSAxKSByID0gMVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICAhcWIrKyAmJiBHYigpO1xuICAgICAgICAgICAgICAgIGlmICgoIXIgfHwgcWIgPiAxMCkgJiYgTSkgaWYgKGJbaF0gPiBqW2tdIHx8IHggPj0gY1tlXSkge1xuICAgICAgICAgICAgICAgICAgICB4ID0gZyArIDI7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID4gY1tlXSkgeCA9IGNbZV07XG4gICAgICAgICAgICAgICAgICAgIEpiKClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB4ID0gZyArIDE7XG4gICAgICAgICAgICAgICAgICAgIEcoZCwgaSwgbCwgbylcbiAgICAgICAgICAgICAgICB9IGVsc2UgcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIEcoZCwgaSwgbCwgbylcbiAgICAgICAgICAgICAgICB9LCA1MDApXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIFQgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIGIucFMgKyBhW2RdIDwgMCA/IGEgOiBhW3FdID8gVChhW3FdKSA6IGFcbiAgICAgICAgfSwgRCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gYi5wUyArIGFbZF0gKyBhW2hdID4galtrXSA/IGEgOiBhW3NdID8gRChhW3NdKSA6IGFcbiAgICAgICAgfSwgVSA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYltkXSAtIGFbZF0gKyAyMCA+IGpba10gPyBhW3NdIDogYVtxXSA/IFUoYVtxXSwgYikgOiBhXG4gICAgICAgIH0sIHpiID0gZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIGlmIChhLmYgPT0gMikgdmFyIGIgPSBjOyBlbHNlIGIgPSBUKGMpO1xuICAgICAgICAgICAgaWYgKGJbcV0pIGIgPSBVKGIsIGIpO1xuICAgICAgICAgICAgcmV0dXJuIGJcbiAgICAgICAgfSwgTmIgPSBmdW5jdGlvbiAoZiwgbCkge1xuICAgICAgICAgICAgZiA9IEsoZik7XG4gICAgICAgICAgICB2YXIgZSA9IGNbZl07XG4gICAgICAgICAgICBpZiAoZyA9PSBmICYmIGwgIT0gNCAmJiBhLmYgIT0gMykgcmV0dXJuIGY7XG4gICAgICAgICAgICB2YXIgbSA9IG5iKGYsIGwpO1xuICAgICAgICAgICAgaWYgKGEuZiA9PSAzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGwgJiYgbCAhPSAzICYmIGwgIT0gNCkgZSA9IG0gPyBEKGNbZ10pIDogVChjW2ddKTtcbiAgICAgICAgICAgICAgICBpKC1lW2RdICsgKGpba10gLSBlW2hdKSAvIDIsIGwgPT0gMylcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobCA9PT0gNCkge1xuICAgICAgICAgICAgICAgIGlmIChiLnBTICsgZVtkXSA8IDIwKSB7XG4gICAgICAgICAgICAgICAgICAgIGUgPSBVKGNbZl0sIGNbZl0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZVtxXSkgaSgtZVtkXSArIHUpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkoODApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgYS5qIC8gMilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5vID09PSAwICYmICFlW3NdICYmIGIucFMgKyBiW2hdID09IGpba10pIHtcbiAgICAgICAgICAgICAgICAgICAgaShqW2tdIC0gYltoXSAtIDgwKTtcbiAgICAgICAgICAgICAgICAgICAgcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKGpba10gLSBiW2hdKVxuICAgICAgICAgICAgICAgICAgICB9LCBhLmogLyAyKVxuICAgICAgICAgICAgICAgIH0gZWxzZSBiLnBTICsgZVtkXSArIGVbaF0gKyAzMCA+IGpba10gJiYgVihlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZlxuICAgICAgICAgICAgfSBlbHNlIGlmIChsKSB7XG4gICAgICAgICAgICAgICAgZSA9IG0gPyBEKGNbZ10pIDogemIoY1tnXSk7XG4gICAgICAgICAgICAgICAgaWYgKG0pIFYoZSk7IGVsc2UgaSgtZVtkXSArIHUpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGEuZiA9PSAyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtKSBpKC1lW2RdICsgdSk7IGVsc2UgaWYgKGIucFMgKyBlW2RdICsgZVtoXSArIDIwID4galtrXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGVbc107XG4gICAgICAgICAgICAgICAgICAgIGlmICghbikgbiA9IGU7XG4gICAgICAgICAgICAgICAgICAgIGkoLW5bZF0gLSBuW2hdIC0gdSArIGpba10pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChiLnBTICsgYltoXSA8PSBqW2tdKSB7XG4gICAgICAgICAgICAgICAgZSA9IGNbMF07XG4gICAgICAgICAgICAgICAgaSgtZVtkXSArIHUpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhLmYgPT0gNCkgZSA9IEQoY1tnXSk7XG4gICAgICAgICAgICAgICAgVihlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGUuaXhcbiAgICAgICAgfSwgViA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGEubyA9PSBcIm51bWJlclwiICYmIGJbaF0gLSBjW2RdICsgYS5vIDwgaltrXSkgaShqW2tdIC0gYltoXSAtIGEubyk7IGVsc2UgaSgtY1tkXSArIHUpXG4gICAgICAgIH0sIEdiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgKG5ldyBGdW5jdGlvbihcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJlXCIsIFwiZlwiLCBcImdcIiwgXCJoXCIsIFwiaVwiLCBcImpcIiwgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBiID0gW10sIGEgPSAwLCBkID0gY1tlXTsgYSA8IGQ7IGErKykgYltiW2VdXSA9IFN0cmluZ1trYl0oY1taXShhKSAtIDQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBiLmpvaW4oXCJcIilcbiAgICAgICAgICAgIH0oXCJ6ZXYkTkFqeXJneG1zcix8MH0tf3pldiRlQWp5cmd4bXNyLH4tf3pldiRnQX5fZmEsNC0yeHNXeHZtcmssLT92aXh5dnIkZzJ3eWZ3eHYsZzJwaXJreGwxNS1cXHUwMDgxP3ZpeHl2ciR8L31fNWEvZSx9XzRhLS9lLH1fNmEtXFx1MDA4MTBPQWp5cmd4bXNyLHwwfS1/dml4eXZyJHwyZ2xldkV4LH0tXFx1MDA4MTBxQWVfaywrc3BqbHV6bCstYVxcdTAwODBcXHUwMDgwKzU6KzByQXRldndpTXJ4LE8scTA1LS1cXHUwMDgwXFx1MDA4MDowekFtX2ssK2t2dGhwdSstYVxcdTAwODBcXHUwMDgwK3A1eCswc0F6MnZpdHBlZ2ksaV9yMTZhMGxfcjE2YS0yd3RwbXgsKystP2oydEFoLGctP21qLHEybXJoaXxTaixOLCtmKy9yMHMtLUFBMTUtf3pldiR2QVFleGwydmVyaHNxLC0wdzB5QWssK1tvfHRpdWhwcydac3BrbHkne3lwaHMnfWx5enB2dSstP21qLHZAMjctd0FnX25hX25hMnR2aXptc3l3V21mcG1yaz9taix2QDI6Kioldy1/d0FnX25hX25hX25hP21qLHcqKncycml8eFdtZnBtcmstd0F3MnJpfHhXbWZwbXJrXFx1MDA4MW1qLHZCMj0td0FtMmZzaH0/bWosTyx6MDQtQUErcCsqKk8sejB6MnBpcmt4bDE1LUFBK3grLXdBND9taix3LXdfbmEybXJ3aXZ4Rmlqc3ZpLG1faywranlsaHtsW2x/e1V2a2wrLWEseS0wdy1cXHUwMDgxXCIpKSkuYXBwbHkodGhpcywgW2EsIFosIGIsIFFiLCB3YiwgbywgdmIsIHhiLCBkb2N1bWVudCwgbV0pXG4gICAgICAgIH0sIEpiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdSA9IGNbZV0gPiAxID8gY1sxXVtkXSAtIGNbMF1bZF0gLSBjWzBdW2hdIDogMDtcbiAgICAgICAgICAgIGJbZl0ubXNUb3VjaEFjdGlvbiA9IGJbZl0udG91Y2hBY3Rpb24gPSBhLmMgPyBcInBhbi15XCIgOiBcInBhbi14XCI7XG4gICAgICAgICAgICBiW2ZdLndlYmtpdFRyYW5zaXRpb25Qcm9wZXJ0eSA9IGJbZl0udHJhbnNpdGlvblByb3BlcnR5ID0gXCJ0cmFuc2Zvcm1cIjtcbiAgICAgICAgICAgIGJbZl0ud2Via2l0VHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uID0gYltmXS50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24gPSBcImN1YmljLWJlemllciguMiwuODgsLjUsMSlcIjtcbiAgICAgICAgICAgIG4oZywgYS5mID09IDMgPyAzIDogMSlcbiAgICAgICAgfSwgbiA9IGZ1bmN0aW9uIChjLCBiKSB7XG4gICAgICAgICAgICBhLm0gJiYgY2xlYXJUaW1lb3V0KGFiKTtcbiAgICAgICAgICAgIEooYywgYik7XG4gICAgICAgICAgICBpZiAoYS5nKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChSKTtcbiAgICAgICAgICAgICAgICBSID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgSihnICsgMSwgMClcbiAgICAgICAgICAgICAgICB9LCBhLmkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIFEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB5ID0gIXk7XG4gICAgICAgICAgICB0YltyXSA9IHkgPyBcInBhdXNlXCIgOiBcIlwiO1xuICAgICAgICAgICAgIXkgJiYgbihnICsgMSwgMClcbiAgICAgICAgfSwgVGIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoYS5nKSBpZiAoeSkgcChRLCAyMjAwKTsgZWxzZSBRKClcbiAgICAgICAgfSwgRWIgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKCFhKSBhID0gd2luZG93LmV2ZW50O1xuICAgICAgICAgICAgdmFyIGIgPSBhLmtleUNvZGU7XG4gICAgICAgICAgICBiID09IDM3ICYmIG4oZyAtIDEsIDEpO1xuICAgICAgICAgICAgYiA9PSAzOSAmJiBuKGcgKyAxLCAxKVxuICAgICAgICB9LCB1YiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoUilcbiAgICAgICAgfSwgWSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gIWEgPyAwIDogYS5ub2RlVHlwZSAhPSAxID8gWShhW21dKSA6IGEudGFnTmFtZSA9PSBcIkxJXCIgPyBhIDogYS50YWdOYW1lID09IFwiVUxcIiA/IDAgOiBZKGFbbV0pXG4gICAgICAgIH0sIEhiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYS5iID0gYS5zbGlkZXJJZDtcbiAgICAgICAgICAgIGEuYyA9IGEub3JpZW50YXRpb247XG4gICAgICAgICAgICBhLmQgPSBhLnRodW1iV2lkdGg7XG4gICAgICAgICAgICBhLmUgPSBhLnRodW1iSGVpZ2h0O1xuICAgICAgICAgICAgYS5mID0gYS5zaG93TW9kZTtcbiAgICAgICAgICAgIGEuZyA9IGEuYXV0b0FkdmFuY2U7XG4gICAgICAgICAgICBhLmggPSBhLnNlbGVjdGFibGU7XG4gICAgICAgICAgICBhLmkgPSBhLnNsaWRlSW50ZXJ2YWw7XG4gICAgICAgICAgICBhLmogPSBhLnRyYW5zaXRpb25TcGVlZDtcbiAgICAgICAgICAgIGEuayA9IGEuc2h1ZmZsZTtcbiAgICAgICAgICAgIGEubCA9IGEuc3RhcnRTbGlkZUluZGV4O1xuICAgICAgICAgICAgYS5tID0gYS5wYXVzZU9uSG92ZXI7XG4gICAgICAgICAgICBhLm8gPSBhLnJpZ2h0R2FwO1xuICAgICAgICAgICAgYS5wID0gYS5rZXlib2FyZE5hdjtcbiAgICAgICAgICAgIGEucSA9IGEubW91c2V3aGVlbE5hdjtcbiAgICAgICAgICAgIGEuciA9IGEuYmVmb3JlO1xuICAgICAgICAgICAgYS5hID0gYS5saWNlbnNlO1xuICAgICAgICAgICAgYS5jID0gYS5jID09IFwiaG9yaXpvbnRhbFwiO1xuICAgICAgICAgICAgaWYgKGEuaSA8IGEuaiArIDFlMykgYS5pID0gYS5qICsgMWUzO1xuICAgICAgICAgICAgc2IgPSBhLmogKyAxMDA7XG4gICAgICAgICAgICBpZiAoYS5mID09IDIgfHwgYS5mID09IDMpIGEuaCA9IHRydWU7XG4gICAgICAgICAgICBhLm0gPSBhLm0gJiYgIU4gJiYgYS5nO1xuICAgICAgICAgICAgdmFyIGIgPSBhLmM7XG4gICAgICAgICAgICBoID0gYiA/IFwib2Zmc2V0V2lkdGhcIiA6IFwib2Zmc2V0SGVpZ2h0XCI7XG4gICAgICAgICAgICBrID0gYiA/IFwiY2xpZW50V2lkdGhcIiA6IFwiY2xpZW50SGVpZ2h0XCI7XG4gICAgICAgICAgICBkID0gYiA/IFwib2Zmc2V0TGVmdFwiIDogXCJvZmZzZXRUb3BcIjtcbiAgICAgICAgICAgIGxiID0gYiA/IFwibGVmdFwiIDogXCJ0b3BcIjtcbiAgICAgICAgICAgIGJiID0gYiA/IFwicGFnZVhcIiA6IFwicGFnZVlcIjtcbiAgICAgICAgICAgIGNiID0gYiA/IFwicGFnZVlcIiA6IFwicGFnZVhcIlxuICAgICAgICB9LCBwYiA9IGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICBIYigpO1xuICAgICAgICAgICAgYiA9IHM7XG4gICAgICAgICAgICBiLnBTID0gMDtcbiAgICAgICAgICAgIFBiKGEuYSk7XG4gICAgICAgICAgICBqID0gYlttXTtcbiAgICAgICAgICAgIGlmIChhLm0pIHtcbiAgICAgICAgICAgICAgICB2KGIsIFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFiKTtcbiAgICAgICAgICAgICAgICAgICAgdWIoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHYoYiwgXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFiID0gcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuKGcgKyAxLCAwKVxuICAgICAgICAgICAgICAgICAgICB9LCAyZTMpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYigpO1xuICAgICAgICAgICAgdihiLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgdmFyIGIgPSBjLnRhcmdldCB8fCBjLnNyY0VsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGIgJiYgYi5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGIudGFnTmFtZSA9PSBcIkFcIiAmJiBJKGIsIFwidGh1bWJcIikgJiYgZGIoYyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhLmgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gWShiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkKSBXICYmIG4oZC5peCwgNClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlYihjKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYS5xKSB7XG4gICAgICAgICAgICAgICAgdmFyIHEgPSBsLmdldEVsZW1lbnRCeUlkKGEuYiksIGkgPSAvRmlyZWZveC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgPyBcIkRPTU1vdXNlU2Nyb2xsXCIgOiBcIm1vdXNld2hlZWxcIixcbiAgICAgICAgICAgICAgICAgICAgZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdihxLCBpLCBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGEgfHwgd2luZG93LmV2ZW50LCBiID0gYS5kZXRhaWwgPyAtYS5kZXRhaWwgOiBhLndoZWVsRGVsdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiID0gYiA+IDAgPyAxIDogLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICBkID0gcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSihnIC0gYiwgNClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDYwKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRiKGEpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENiKCk7XG4gICAgICAgICAgICBHKDAsIDEsIDEsIDApO1xuICAgICAgICAgICAgby5jID0gdHlwZW9mIGJbZl0udHJhbnNmb3JtICE9IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGJbZl0ud2Via2l0VHJhbnNmb3JtICE9IFwidW5kZWZpbmVkXCI7XG4gICAgICAgICAgICBpZiAoby5hKSBpZiAoby5hLmluc2VydFJ1bGUgJiYgIVViKSBJYigpOyBlbHNlIGwuYWxsICYmICFsW3RdICYmIEFiKCk7XG4gICAgICAgICAgICBhLnAgJiYgdihsLCBcImtleWRvd25cIiwgRWIpO1xuICAgICAgICAgICAgdihsLCBcInZpc2liaWxpdHljaGFuZ2VcIiwgVGIpO1xuICAgICAgICAgICAgaWYgKChhLmQgKyBhLmUpLmluZGV4T2YoXCIlXCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIGggPSBudWxsLCByID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBlW2ZdLCBqID0gZS5vZmZzZXRXaWR0aCwgaSA9IGUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoYS5kLmluZGV4T2YoXCIlXCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHBhcnNlRmxvYXQoYS5kKSAvIDEwMCwgZyA9IGJbbV1bbV0uY2xpZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWEuYyAmJiBjIDwgLjcxICYmIGcgPCA0MTUpIGMgPSAuOTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQud2lkdGggPSBnICogYyArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQuaGVpZ2h0ID0gaSAvIGogKiBnICogYyArIFwicHhcIlxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHBhcnNlRmxvYXQoYS5lKSAvIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBsLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICogYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGQuaGVpZ2h0ID0gaCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQud2lkdGggPSBqIC8gaSAqIGggKyBcInB4XCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWEuYykgYlttXVtmXS53aWR0aCA9IGQud2lkdGhcbiAgICAgICAgICAgICAgICB9LCBrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaCk7XG4gICAgICAgICAgICAgICAgICAgIGggPSBwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAwLCBiID0gY1tlXTsgYSA8IGI7IGErKykgcihjW2FdKVxuICAgICAgICAgICAgICAgICAgICB9LCA5OSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHYod2luZG93LCBcInJlc2l6ZVwiLCBrKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB5YiA9IGZ1bmN0aW9uIChnKSB7XG4gICAgICAgICAgICBpZiAoYS5oKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDAsIGkgPSBjW2VdOyBkIDwgaTsgZCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIEgoY1tkXSwgXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgIGNbZF1bZl0uekluZGV4ID0gMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBQKGNbZ10sIFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIGNbZ11bZl0uekluZGV4ID0gMVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUyA9PSAwICYmIE0uZSgpO1xuICAgICAgICAgICAgaWYgKGEuZiAhPSAzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGIucFMgKyB1IDwgMCkgSChTLCBcImRpc2FibGVkXCIpOyBlbHNlIFAoUywgXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoYi5wUyArIGJbaF0gLSB1IC0gMSA8PSBqW2tdKSBQKGZiLCBcImRpc2FibGVkXCIpOyBlbHNlIEgoZmIsIFwiZGlzYWJsZWRcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYSA9IGIuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGlmIChiLnBTICsgYVtkXSA+IC01MCkgcmV0dXJuO1xuICAgICAgICAgICAgd2hpbGUgKDEpIGlmIChiLnBTICsgYVtkXSA8IDAgJiYgYVtzXSkgYSA9IGFbc107IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhW3FdKSBhID0gYVtxXTtcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGUgPSBhW2RdLCBjID0gYi5maXJzdENoaWxkO1xuICAgICAgICAgICAgd2hpbGUgKGMgIT0gYSkge1xuICAgICAgICAgICAgICAgIGIuYXBwZW5kQ2hpbGQoYi5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICBjID0gYi5maXJzdENoaWxkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKGIucFMgKyBlIC0gYVtkXSwgMSlcbiAgICAgICAgfSwgZ2IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYSA9IEQoYi5maXJzdENoaWxkKSwgZiA9IGFbZF0sIGMgPSBiLmxhc3RDaGlsZCwgZSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoYyAhPSBhICYmIGUgPCB4ICYmIGMuemltZyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGIuaW5zZXJ0QmVmb3JlKGIubGFzdENoaWxkLCBiLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIGMgPSBiLmxhc3RDaGlsZDtcbiAgICAgICAgICAgICAgICBlKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkoYi5wUyArIGYgLSBhW2RdLCAxKVxuICAgICAgICB9LCBKID0gZnVuY3Rpb24gKGIsIGQpIHtcbiAgICAgICAgICAgIGlmIChjW2VdIDwgMikgcmV0dXJuO1xuICAgICAgICAgICAgYiA9IEsoYik7XG4gICAgICAgICAgICBpZiAoIWQgJiYgKHkgfHwgYiA9PSBnKSkgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGYgPSBuYihiLCBkKTtcbiAgICAgICAgICAgIGlmIChkICYmIGYgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBHKGIsIDAsIGYsIDEpO1xuICAgICAgICAgICAgICAgIGlmIChhLmYgPT0gMykge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaWIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZikgaGIoKTsgZWxzZSBnYigpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGggPSBnO1xuICAgICAgICAgICAgYiA9IE5iKGIsIGQpO1xuICAgICAgICAgICAgeWIoYik7XG4gICAgICAgICAgICBnID0gYjtcbiAgICAgICAgICAgIEcoYiwgMCwgMSwgYS5mID09IDQpO1xuICAgICAgICAgICAgaWYgKGEuZiA9PSAzKSBpYiA9IHAoaGIsIHNiKTtcbiAgICAgICAgICAgIGEuciAmJiBhLnIoaCwgYiwgZClcbiAgICAgICAgfTtcbiAgICBwYi5wcm90b3R5cGUgPSB7XG4gICAgICAgIGM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGcgPSBiLmNoaWxkcmVuLCBkID0gMCwgaCA9IGdbZV07IGQgPCBoOyBkKyspIHtcbiAgICAgICAgICAgICAgICBjW2RdID0gZ1tkXTtcbiAgICAgICAgICAgICAgICBjW2RdLml4ID0gZDtcbiAgICAgICAgICAgICAgICBjW2RdW2ZdLmRpc3BsYXkgPSBhLmMgPyBcImlubGluZS1ibG9ja1wiIDogXCJibG9ja1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIE1iKGIpO1xuICAgICAgICAgICAgdGhpcy5jKCk7XG4gICAgICAgICAgICB2YXIgZiA9IDA7XG4gICAgICAgICAgICBpZiAoYS5rKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZyA9IFNiKGMpLCBkID0gMCwgaSA9IGdbZV07IGQgPCBpOyBkKyspIGIuYXBwZW5kQ2hpbGQoZ1tkXSk7XG4gICAgICAgICAgICAgICAgZiA9IDFcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5sKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaCA9IGEubCAlIGNbZV0sIGQgPSAwOyBkIDwgaDsgZCsrKSBiLmFwcGVuZENoaWxkKGNbZF0pO1xuICAgICAgICAgICAgICAgIGYgPSAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmICYmIHRoaXMuYygpXG4gICAgICAgIH0sIGQ6IGZ1bmN0aW9uIChkLCBjKSB7XG4gICAgICAgICAgICB2YXIgYiA9IGwuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGIuaWQgPSBhLmIgKyBkO1xuICAgICAgICAgICAgaWYgKGMpIGIub25jbGljayA9IGM7XG4gICAgICAgICAgICBOICYmIGJbdF0oXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgYS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGEudGFyZ2V0LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgZWIoYSlcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIGIgPSBqW21dLmFwcGVuZENoaWxkKGIpO1xuICAgICAgICAgICAgcmV0dXJuIGJcbiAgICAgICAgfSwgZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgUyA9IHRoaXMuZChcIi1wcmV2XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAhSSh0aGlzLCBcImRpc2FibGVkXCIpICYmIG4oZyAtIDEsIDEpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZiID0gdGhpcy5kKFwiLW5leHRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICFJKHRoaXMsIFwiZGlzYWJsZWRcIikgJiYgbihnICsgMSwgMSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGIgPSB0aGlzLmQoXCItcGF1c2UtcGxheVwiLCBRKVxuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgWCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGIgPSBsLmdldEVsZW1lbnRCeUlkKGEuc2xpZGVySWQpO1xuICAgICAgICBpZiAoYikge1xuICAgICAgICAgICAgdmFyIGMgPSBiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidWxcIik7XG4gICAgICAgICAgICBpZiAoY1tlXSkgTSA9IG5ldyBwYihjWzBdKVxuICAgICAgICB9XG4gICAgfSwgT2IgPSBmdW5jdGlvbiAoYykge1xuICAgICAgICB2YXIgYSA9IDA7XG5cbiAgICAgICAgZnVuY3Rpb24gYigpIHtcbiAgICAgICAgICAgIGlmIChhKSByZXR1cm47XG4gICAgICAgICAgICBhID0gMTtcbiAgICAgICAgICAgIHAoYywgNClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsW3RdKSBsW3RdKFwiRE9NQ29udGVudExvYWRlZFwiLCBiLCBmYWxzZSk7IGVsc2Ugdih3aW5kb3csIFwibG9hZFwiLCBiKVxuICAgIH07XG4gICAgaWYgKCFhLmluaXRTbGlkZXJCeUNhbGxpbmdJbml0RnVuYykgaWYgKGwuZ2V0RWxlbWVudEJ5SWQoYS5zbGlkZXJJZCkpIFgoKTsgZWxzZSBPYihYKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBkaXNwbGF5OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKGNbZV0pIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGEgPT0gXCJudW1iZXJcIikgdmFyIGIgPSBhOyBlbHNlIGIgPSBhLml4O1xuICAgICAgICAgICAgICAgIG4oYiwgNClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgcHJldjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbihnIC0gMSwgMSlcbiAgICAgICAgfSwgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbihnICsgMSwgMSlcbiAgICAgICAgfSwgZ2V0UG9zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZ1xuICAgICAgICB9LCBnZXRTbGlkZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgIH0sIGdldFNsaWRlSW5kZXg6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gYS5peFxuICAgICAgICB9LCB0b2dnbGU6IFEsIGluaXQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAhTSAmJiBYKCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgPT0gXCJudW1iZXJcIikgdmFyIGIgPSBlOyBlbHNlIGIgPSBiID8gZS5peCA6IDA7XG4gICAgICAgICAgICBpZiAoYS5mID09IDMpIHtcbiAgICAgICAgICAgICAgICBpKC1jW2JdW2RdICsgKGpba10gLSBjW2JdW2hdKSAvIDIsIDEpO1xuICAgICAgICAgICAgICAgIGdiKCk7XG4gICAgICAgICAgICAgICAgSihiLCAwKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpKC1jW2JdW2RdICsgaltoXSwgNCk7XG4gICAgICAgICAgICAgICAgbihiLCA0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5cbiIsInZhciBjb3VudGVyID0gMDtcbnZhciBpc1BhdXNlZCA9IHRydWU7XG5cbiQoXCIjcGF1c2UsICNyZXN1bWVcIikuaGlkZSgpO1xuJChcIiNkYXlzLCAjaG91cnMsICNmaXJzdC1kaXZpZGVyLCAjc2Vjb25kLWRpdmlkZXJcIikuaGlkZSgpO1xuJChcIiNzdGFydFwiKS5zaG93KCk7XG5cbnZhciB0ID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgIGlmICghaXNQYXVzZWQpIHtcbiAgICAgICAgY291bnRlcisrO1xuICAgICAgICB2YXIgcyA9IGNvdW50ZXI7XG4gICAgICAgIGNvbnZlcnRTZWNvbmRzKE1hdGguZmxvb3IocykpO1xuICAgIH1cbn0sIDEwMDApO1xuXG4vLyBCdXR0b24gQ2xpY2sgRXZlbnRzXG4kKFwiI3N0YXJ0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICBzdGFydENsb2NrKCk7XG4gICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgJChcIiNwYXVzZVwiKS5zaG93KCk7XG4gICAgJChcIiNyZXNldCwgI3N0b3BcIikuY3NzKFwib3BhY2l0eVwiLCBcIjFcIik7XG59KTtcblxuJChcIiNwYXVzZVwiKS5jbGljayhmdW5jdGlvbiAoKXtcbiAgICBwYXVzZUNsb2NrKCk7XG4gICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgJChcIiNyZXN1bWVcIikuc2hvdygpO1xufSk7XG5cbiQoXCIjcmVzdW1lXCIpLmNsaWNrKGZ1bmN0aW9uICgpe1xuICAgIHJlc3VtZUNsb2NrKCk7XG4gICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgJChcIiNwYXVzZVwiKS5zaG93KCk7XG59KTtcblxuJChcIiNyZXNldFwiKS5jbGljayhmdW5jdGlvbiAoKXtcbiAgICByZXNldENsb2NrKCk7XG4gICAgJChcIiNyZXN1bWVcIikuaGlkZSgpO1xuICAgICQoXCIjcGF1c2VcIikuc2hvdygpO1xufSk7XG5cbiQoXCIjc3RvcFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgcmVzZXRDbG9jaygpO1xuICAgICQoXCIjcGF1c2UsICNyZXN1bWVcIikuaGlkZSgpO1xuICAgICQoXCIjc3RhcnRcIikuc2hvdygpO1xuICAgICQoXCIjcmVzZXQsICNzdG9wXCIpLmNzcyhcIm9wYWNpdHlcIiwgXCIwXCIpO1xufSk7XG5cblxuZnVuY3Rpb24gc3RhcnRDbG9jaygpIHsgXG4gICAgaXNQYXVzZWQgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIHBhdXNlQ2xvY2soKSB7IFxuICAgIGlzUGF1c2VkID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJlc3VtZUNsb2NrKCkgeyBpc1BhdXNlZCA9IGZhbHNlOyB9XG5mdW5jdGlvbiByZXNldENsb2NrKCkge1xuICAgIGNvdW50ZXIgPSAwO1xuICAgICQoXCIjZGF5c1wiKS5odG1sKFwiMDBcIik7XG4gICAgJChcIiNob3Vyc1wiKS5odG1sKFwiMDBcIik7XG4gICAgJChcIiNtaW51dGVzXCIpLmh0bWwoXCIwMFwiKTtcbiAgICAkKFwiI3NlY29uZHNcIikuaHRtbChcIjAwXCIpO1xufVxuZnVuY3Rpb24gc3RvcENsb2NrKCkge1xuICAgIHJlc2V0Q2xvY2soKTtcbiAgICBpc1BhdXNlZCA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRTZWNvbmRzKHMpIHtcbiAgICB2YXIgZGF5cyA9IE1hdGguZmxvb3IocyAvIDg2NDAwKVxuICAgIHZhciBob3VycyA9IE1hdGguZmxvb3IoKHMgJSA4NjQwMCkgLyAzNjAwKTtcbiAgICB2YXIgbWludXRlcyA9IE1hdGguZmxvb3IoKChzICUgODY0MDApICUgMzYwMCkgLyA2MCk7XG4gICAgdmFyIHNlY29uZHMgPSAoKHMgJSA4NjQwMCkgJSAzNjAwKSAlIDYwO1xuICAgIFxuICAgIGlmIChkYXlzICAgICAgICA8IDEwKSB7ZGF5cyAgICAgID0gXCIwXCIgKyBkYXlzfVxuICAgIGlmIChob3VycyAgIDwgMTApIHtob3VycyAgICAgPSBcIjBcIiArIGhvdXJzO31cbiAgICBpZiAobWludXRlcyA8IDEwKSB7bWludXRlcyA9IFwiMFwiICsgbWludXRlczt9XG4gICAgaWYgKHNlY29uZHMgPCAxMCkge3NlY29uZHMgPSBcIjBcIiArIHNlY29uZHM7fVxuICAgIFxuICAgICQoXCIjZGF5c1wiKS5odG1sKGRheXMpO1xuICAgICQoXCIjaG91cnNcIikuaHRtbChob3Vycyk7XG4gICAgJChcIiNtaW51dGVzXCIpLmh0bWwobWludXRlcyk7XG4gICAgJChcIiNzZWNvbmRzXCIpLmh0bWwoc2Vjb25kcyk7XG4gICAgXG4gICAgaWYgKGRheXMgPT0gMCAmJiBob3VycyA9PSAwKSB7XG4gICAgICAgICQoXCIjZGF5cywgI2hvdXJzXCIpLmhpZGUoKTtcbiAgICAgICAgJChcIiNmaXJzdC1kaXZpZGVyLCAjc2Vjb25kLWRpdmlkZXJcIikuaGlkZSgpO1xuICAgIH0gZWxzZSBpZiAoZGF5cyA9PSAwKSB7XG4gICAgICAgICQoXCIjZGF5c1wiKS5oaWRlKCk7XG4gICAgICAgICQoXCIjaG91cnNcIikuc2hvdygpO1xuICAgICAgICAkKFwiI3NlY29uZC1kaXZpZGVyXCIpLnNob3coKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwicCwgLmRpdmlkZXJcIikuc2hvdygpO1xuICAgIH1cbn1cblxudmFyIHN0YXRlID0gJ3N0b3AnO1xuXG4gZnVuY3Rpb24gYnV0dG9uUGxheVByZXNzKCkge1xuICAgICB2YXIgYnV0dG9uID0gJCgnI2J1dHRvbl9wbGF5Jyk7XG4gICAgIGlmIChzdGF0ZSA9PT0gJ3N0b3AnKSB7XG4gXHRcdHN0YXRlPSdwbGF5JztcbiAgICAgICAgIGJ1dHRvbi5hdHRyKCdjbGFzcycsIFwiaWNvbi1wYXVzZSBzcHJpdGVcIik7XG4gICAgIH1cbiAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICdwbGF5JyB8fCBzdGF0ZSA9PT0gJ3Jlc3VtZScpIHtcbiBcdFx0c3RhdGUgPSAncGF1c2UnO1xuICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bWVHYW1lXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICBidXR0b24uYXR0cignY2xhc3MnLCBcImljb24tcGxheUNzcyBzcHJpdGVcIik7XG4gXHRcdHBhdXNlQ2xvY2soKTtcbiBcdH1cbiAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICdwYXVzZScpIHtcbiBcdFx0c3RhdGUgPSAncmVzdW1lJztcbiAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdW1lR2FtZVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICBidXR0b24uYXR0cignY2xhc3MnLCBcImljb24tcGF1c2Ugc3ByaXRlXCIpO1xuIFx0XHRyZXN1bWVDbG9jaygpOyAgICAgICBcbiBcdH1cbiBcdGNvbnNvbGUubG9nKFwiYnV0dG9uIHBsYXkgcHJlc3NlZCwgcGxheSB3YXMgXCIrc3RhdGUpO1xuIH1cbiJdfQ==
