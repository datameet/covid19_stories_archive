window.fbAsyncInit=function(){FB.init({appId:"381223709255975",cookie:!0,xfbml:!0,version:"v5.0"})},function(e,r,o){var t,i=e.getElementsByTagName(r)[0];e.getElementById(o)||((t=e.createElement(r)).id=o,t.src="https://connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(t,i))}(document,"script","facebook-jssdk");var isSubmitted=!1,isSiSubmitted=!1,categories_ids_arr=[];function phoneNumberXX(e){try{var r="";if(void 0!==e&&null!=e&&"null"!=e&&""!=e){r=e.substr(0,2);for(var o=1;o<=10;o++)2<o&&(r+=6==o?" x":"x")}return r}catch(e){console.info("Error: phoneNumberXX try failed! "+e)}}function validateFld(e){try{var r=e.data("type");if("phone"==r){return""==e.val()?(e.parent("div").find(".error-msg").text("कृपया फ़ोन नंबर दर्ज करें।").removeClass("p-hide"),!1):0==/^[0-9]{10}$/.test(e.val())?(e.parent("div").find(".error-msg").text("कृपया एक मान्य फोन नंबर दर्ज करें।").removeClass("p-hide"),!1):(e.parent("div").find(".error-msg").addClass("p-hide"),!0)}if("email"==r)return""!=e.val()&&0==isValidEmail(e.val())?(e.parent("div").find(".error-msg").removeClass("p-hide"),!1):(e.parent("div").find(".error-msg").addClass("p-hide"),!0);if("number"==r){var o=new RegExp("^[0-9]+$");return""==e.val()?(e.parent("div").find(".error-msg").removeClass("p-hide"),!1):0==o.test(e.val())?(e.parent("div").find(".error-msg").text("कृपया मान्य नंबर दर्ज करें।").removeClass("p-hide"),!1):(e.parent("div").find(".error-msg").addClass("p-hide"),!0)}if("radio"!=r)return"pass"==r?""==e.val()?(e.parent("div").find(".error-msg").text("कृपया पासवर्ड दर्ज करें।").removeClass("p-hide"),!1):""!=e.val()&&e.val().length<6?(e.parent("div").find(".error-msg").text("पासवर्ड न्यूनतम 6 वर्ण का होना चाहिए").removeClass("p-hide"),!1):(e.parent("div").find(".error-msg").addClass("p-hide"),!0):""==e.val()?(e.parent("div").find(".error-msg").removeClass("p-hide"),!1):(e.parent("div").find(".error-msg").addClass("p-hide"),!0);var t=$("input[name='gender']:checked").val();return void 0===t||""==t?($(".gender-validate").removeClass("p-hide"),!1):($(".gender-validate").addClass("p-hide"),!0)}catch(e){console.info("Error: validateFld try failed! "+e)}}function loadImagePreview(e){try{var r=new FileReader;r.onload=function(){var e=document.getElementById("userProfileImg");$("#photo_raw_data").val(r.result),e.src=r.result},r.readAsDataURL(e.target.files[0])}catch(e){console.info("Error: loadImagePreview try failed! "+e)}}function serviceAuth(){var e=getCookieV1("u-auth-cookie");null!=typeof e&&null!=e&&""!=e&&$.ajax({type:"POST",url:site_url+"authenticate/",data:{"data-type":"auth-cookie",data:e},success:function(e){try{1==e.status&&window.location.reload()}catch(e){console.info("Error: auth-cookie try failed! "+e)}},error:function(e){console.info("Error: auth-cookie api error!")}})}function checkFBLoginState(){try{$("#fbLoginBtn").addClass("btnLoading"),FB.login(function(r){"connected"===r.status?FB.api("/me",function(e){getFBUserInfo(r.authResponse.userID)}):$("#fbLoginBtn").removeClass("btnLoading")},{scope:"public_profile,email"})}catch(e){console.info("Error: checkFBLoginState try failed! "+e)}}function getFBUserInfo(e){try{FB.api("/"+e+"/?fields=id,name,email,picture.type(large)","GET",{},function(e){var r={name:e.name,email:e.email,id:e.id,imgUrl:e.picture.data.url};$.ajax({type:"POST",url:site_url+"authenticate/",data:{"data-type":"social-auth",data:r},success:function(e){try{setCookie("u-auth-cookie","",0),1==e.status?window.location.href=site_url+"profile/"+e.res.user.user_id+"/":$("#fbLoginBtn").removeClass("btnLoading")}catch(e){console.info("Error: getFBUserInfo api try failed! "+e)}},error:function(e){$("#fbLoginBtn").removeClass("btnLoading"),console.info("Error: FB:social-auth api error!")}})})}catch(e){console.info("Error: FB getFBUserInfo try failed! "+e)}}function onLoadGoogleCallback(){try{gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"622365563271-tp2qm7p5aunt42gj97hvs94089otq00q.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),auth2.attachClickHandler(element,{},function(e){$("#googleSignInBtn").addClass("btnLoading");var r=e.getBasicProfile(),o={name:r.getName(),email:r.getEmail(),id:r.getId(),imgUrl:r.getImageUrl()};$.ajax({type:"POST",url:site_url+"authenticate/",data:{"data-type":"social-auth",data:o},success:function(e){try{setCookie("u-auth-cookie","",0),1==e.status?window.location.href=site_url+"profile/"+e.res.user.user_id+"/":$("#googleSignInBtn").removeClass("btnLoading")}catch(e){console.info("Error: onLoadGoogleCallback api try failed! "+e)}},error:function(e){$("#googleSignInBtn").removeClass("btnLoading"),console.info("Error: Google:social-auth api error!")}})},function(e){console.log("Google Sign-in error",e)})}),element=document.getElementById("googleSignInBtn")}catch(e){console.info("Error: onLoadGoogleCallback try failed! "+e)}}function pSignOut(){try{window.location.href=site_url+"logout/"}catch(e){console.info("Error: signOut try failed! "+e)}}$(document).ready(function(){$(document).on("click",".login-popup",function(){$("body").addClass("oh"),$(".login-modal").removeClass("p-hidden")}),$(document).on("click",".close-recpopup",function(){$("body").removeClass("oh"),$(".login-modal").addClass("p-hidden")}),$(document).on("click","#plogout",function(){pSignOut()}),$("#otp-phone").text(phoneNumberXX(getCookieV1("OTPPhone"))),$("#signin #siPhone, #signin #siPassword").blur(function(){validateFld($(this))}),$("form#signInForm").submit(function(e){if(e.preventDefault(),1!=isSiSubmitted){var r=new FormData(this),o=$(this);$siPhoneObj=$("#signin #siPhone"),$siPassObj=$("#signin #siPassword"),0!=validateFld($siPhoneObj)&&0!=validateFld($siPassObj)&&(isSiSubmitted=!0,$("#signinBtn").addClass("btnLoading"),$.ajax({type:o.attr("method"),url:o.attr("action"),data:r,enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,success:function(e){try{1==e.status?window.location.href=site_url+"profile/"+e.res.data.user.user_id+"/":(isSiSubmitted=!1,$("#signinBtn").removeClass("btnLoading"),void 0!==e.errors.phone&&""!=e.errors.phone&&$siPhoneObj.parent("div").find(".error-msg").text(e.errors.phone.error).removeClass("p-hide"),void 0!==e.errors.password&&""!=e.errors.password&&$siPassObj.parent("div").find(".error-msg").text(e.errors.password.error).removeClass("p-hide"))}catch(e){console.info("Error: signIn try failed! "+e)}},error:function(e){console.info("Error: signIn api error!"),isSiSubmitted=!1,$("#signinBtn").removeClass("btnLoading")}}))}}),$spphoneObj=$("#signup #phone"),$sppassObj=$("#signup #password"),$spnameObj=$("#signup #name"),$("#signup #phone, #signup #password, #signup #name").blur(function(){validateFld($(this))}),$(".jsSignUpFrm :input").keypress(function(e){13==e.which&&$("#signup #signupBtn").click()}),$("#signup #signupBtn").click(function(){if(1!=isSubmitted){var r=this;0!=validateFld($spphoneObj)&&0!=validateFld($sppassObj)&&0!=validateFld($spnameObj)&&(isSubmitted=!0,$(r).addClass("btnLoading"),setCookie("OTPPhone",$spphoneObj.val().trim(),1),setCookie("OTPRedirect","profile",1),$.ajax({url:api_domain+"registerUser",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({phone:$spphoneObj.val(),password:$sppassObj.val(),name:$spnameObj.val(),photo:$("#photo_raw_data").val(),channel_id:site_channel_id}),success:function(e){try{1==e.status?window.location.href=site_url+"otp-verify/":(isSubmitted=!1,$(r).removeClass("btnLoading"),void 0!==e.errors.phone&&""!=e.errors.phone&&$spphoneObj.parent("div").find(".error-msg").text(e.errors.phone.error).removeClass("p-hide"),void 0!==e.errors.password&&""!=e.errors.password&&$sppassObj.parent("div").find(".error-msg").text(e.errors.password.error).removeClass("p-hide"),void 0!==e.errors.name&&""!=e.errors.name&&$spnameObj.parent("div").find(".error-msg").text(e.errors.name.error).removeClass("p-hide"))}catch(e){console.info("Error: signUp try failed! "+e)}},error:function(e){console.info("Error: signup api error!"),isSubmitted=!1,$(r).removeClass("btnLoading")}}))}}),$fpPhoneObj=$("#forgotPassword #fpPhone"),$("#forgotPassword #fpPhone").blur(function(){validateFld($(this))}),$(".jsFPFrm :input").keypress(function(e){13==e.which&&$("#forgotPassword #forgotPasswordBtn").click()}),$("#forgotPassword #forgotPasswordBtn").click(function(){if(1!=isSubmitted){var r=this;0!=validateFld($fpPhoneObj)&&(isSubmitted=!0,$(r).addClass("btnLoading"),setCookie("OTPPhone",$fpPhoneObj.val().trim(),1),setCookie("OTPRedirect","reset-password",1),$.ajax({url:api_domain+"forgotPassword",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({phone:$fpPhoneObj.val().trim(),channel_id:site_channel_id}),success:function(e){try{isSubmitted=!1,$(r).removeClass("btnLoading"),1==e.status?window.location.href=site_url+"otp-verify/":void 0!==e.errors.phone&&""!=e.errors.phone&&$fpPhoneObj.parent("div").find(".error-msg").text(e.errors.phone.error).removeClass("p-hide")}catch(e){console.info("Error: forgot Password try failed! "+e)}},error:function(e){console.info("Error: forgotPassword api error!"),isSubmitted=!1,$(r).removeClass("btnLoading")}}))}}),$otpObj=$("#otpPage #otp_code"),$($otpObj).blur(function(){validateFld($(this))}),$("#otp_code").keypress(function(e){13==e.which&&$("#otpPage #otpVerifyBtn").click()}),$("#otpPage #otpVerifyBtn").click(function(){if(1!=isSubmitted){var r=this;if(0!=validateFld($otpObj)){isSubmitted=!0,$(r).addClass("btnLoading");var e=getCookieV1("OTPPhone"),o=getCookieV1("OTPRedirect");if("profile"==o)var t="Register";else if("reset-password"==o){t="Forgot Password";setCookie("resetPassPhone",e,1)}else if("change-pass"==o)t="Reset Password";$.ajax({type:"POST",url:site_url+"otp-validate/",data:{type:t,phone:e,otp:$otpObj.val().trim(),channel_id:site_channel_id},success:function(e){try{1==e.status?(setCookie("OTPPhone","",0),setCookie("OTPRedirect","",0),window.location.href="Register"==t?site_url+"profile/"+e.res.user.user_id+"/":site_url+o+"/"):(timerOn=!1,$("#resendOTP").text("कोड दोबरा भेजें").removeClass("p-hide"),setTimeout(function(){document.getElementById("otpCountdown").innerHTML="0:00"},1e3),isSubmitted=!1,$(r).removeClass("btnLoading"),void 0!==e.errors.otp&&""!=e.errors.otp&&$otpObj.parent("div").find(".error-msg").text(e.errors.otp.error).removeClass("p-hide"))}catch(e){console.info("Error: OTP verify try failed! "+e)}},error:function(e){console.info("Error: OTP verify api error!"),isSubmitted=!1,$(r).removeClass("btnLoading")}})}}}),isResendOTP=!1,$("#resendOTP").click(function(){if(1!=isResendOTP){$("#otp_code").parent("div").find(".error-msg").addClass("p-hide"),timerOn=!1;var r=this;$(r).text("एसएमएस भेजा जा रहा है...");var e=getCookieV1("OTPPhone"),o=getCookieV1("OTPRedirect");if("profile"==o)var t="Register";else if("forgot-pass"==o)t="Forgot Password";else if("change-pass"==o)t="Reset Password";$.ajax({url:api_domain+"resendOtp",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({type:t,phone:e,channel_id:site_channel_id}),success:function(e){try{isResendOTP=!1,$(r).text("कोड दोबरा भेजें").addClass("p-hide"),1==e.status?(timerOn=!0,otpCountdown(120)):$(r).text("कोड दोबरा भेजें").removeClass("p-hide")}catch(e){console.info("Error: OTP-resend try failed! "+e)}},error:function(e){console.info("Error: OTP-resend api error!"),isResendOTP=!1,$(r).text("कोड दोबरा भेजें").addClass("p-hide")}})}}),$newPassObj=$("#resetPassword #new_password"),$($newPassObj).blur(function(){validateFld($(this))}),$("#new_password").keypress(function(e){13==e.which&&$("#resetPassword #resetPasswordBtn").click()}),$("#resetPassword #resetPasswordBtn").click(function(){if(1!=isSubmitted){var r=this;if(0!=validateFld($newPassObj)){var e=getCookieV1("resetPassPhone");isSubmitted=!0,$(r).addClass("btnLoading"),$.ajax({url:api_domain+"resetPassword",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({phone:e,new_password:$newPassObj.val().trim(),channel_id:site_channel_id}),success:function(e){try{isSubmitted=!1,$(r).removeClass("btnLoading"),1==e.status?(setCookie("resetPassPhone","",0),$("#notify-msg").removeClass("p-hide"),$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){$("#notify-msg").addClass("p-hide"),window.location.href=site_url},15e3)):void 0!==e.errors.new_password&&""!=e.errors.new_password&&$newPassObj.parent("div").find(".error-msg").text(e.errors.new_password.error).removeClass("p-hide")}catch(e){console.info("Error: Reset password try failed! "+e)}},error:function(e){console.info("Error: Reset password api error!"),isSubmitted=!1,$(r).removeClass("btnLoading")}})}}}),$pPhoneObj=$("#profile-interest #phone"),$pNameObj=$("#profile-interest #name"),$pEmailObj=$("#profile-interest #email"),$pGenderObj=$("#profile-interest #gender"),$pAgeObj=$("#profile-interest #age"),$("#profile-interest #name, #profile-interest #email, #profile-interest #gender, #profile-interest #age").blur(function(){validateFld($(this))}),$(".jsProfileFrm :input").keypress(function(e){13==e.which&&$("#profile-interest #profileBtn").click()}),$("#profile-interest #profileBtn").click(function(){if(1!=isSubmitted){var r=this;0!=validateFld($pNameObj)&&0!=validateFld($pEmailObj)&&0!=validateFld($pGenderObj)&&0!=validateFld($pAgeObj)&&(isSubmitted=!0,$(r).addClass("btnLoading"),$.ajax({url:site_url+"update-profile/",type:"POST",data:{type:"profile",phone:$pPhoneObj.val().trim(),name:$pNameObj.val().trim(),email:$pEmailObj.val().trim(),is_subscribe:$("#is_subscribe").is(":checked")?"Y":"N",gender:$("input[name='gender']:checked").val(),age:$pAgeObj.val().trim(),photo:$("#photo_raw_data").val()},success:function(e){try{isSubmitted=!1,$(r).removeClass("btnLoading"),1==e.status?($("#notify-msg").removeClass("p-hide"),$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){window.location.href=site_url+"profile-interest/"+user_uid+"/"},500)):(void 0!==e.errors.phone&&""!=e.errors.phone&&$pPhoneObj.parent("div").find(".error-msg").text(e.errors.phone.error).removeClass("p-hide"),void 0!==e.errors.name&&""!=e.errors.name&&$pNameObj.parent("div").find(".error-msg").text(e.errors.name.error).removeClass("p-hide"),void 0!==e.errors.email&&""!=e.errors.email&&$pEmailObj.parent("div").find(".error-msg").text(e.errors.email.error).removeClass("p-hide"),void 0!==e.errors.gender&&""!=e.errors.gender&&$pGenderObj.parent("div").find(".error-msg").text(e.errors.gender.error).removeClass("p-hide"),void 0!==e.errors.age&&""!=e.errors.age&&$pAgeObj.parent("div").find(".error-msg").text(e.errors.age.error).removeClass("p-hide"))}catch(e){console.info("Error: Profile try failed! "+e)}},error:function(e){console.info("Error: Profile api error!"),isSubmitted=!1,$(r).removeClass("btnLoading")}}))}}),$("#profile-interest-page .jsSelectPI").click(function(){$(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),$(".error-msg").addClass("p-hide"))}),$("#profile-interest-page #profileIBtn").click(function(){if(1!=isSubmitted){var r=this,o=[];if($.each($("#uInterests").find(".active"),function(e,r){o.push($(this).data("id"))}),0==o.length)return $(".error-msg").text("कृपया आपकी रूचि का चयन करेें।").removeClass("p-hide"),!1;$(r).addClass("btnLoading");var e=o.join(",");$.ajax({url:site_url+"update-profile/",type:"POST",data:{type:"profile-interest",categories:e},success:function(e){try{isSubmitted=!1,$(r).removeClass("btnLoading"),1==e.status?($("#notify-msg").removeClass("p-hide"),$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){window.location.href=site_url+"profile/"+user_uid+"/"},500)):void 0!==e.errors.category&&""!=e.errors.category?$(".error-msg").text(e.errors.category.error).removeClass("p-hide"):void 0!==e.errors.access_token&&""!=e.errors.access_token&&$(".error-msg").text(e.errors.access_token.error).removeClass("p-hide")}catch(e){console.info("Error: Profile interest try failed! "+e)}},error:function(e){console.info("Error: profile interest api error!"),isSubmitted=!1,$(r).removeClass("btnLoading")}})}}),$.ajax({type:"GET",url:site_url+"authenticate-state/",data:{},success:function(e){try{$("#p-auth-state").html(e.stateHtml)}catch(e){console.info("Error: authenticate-state api try failed! "+e)}},error:function(e){console.info("Error: authenticate-state api error!")}})}),Array.prototype.removeFromArrayByValue=function(){try{for(var e,r,o=arguments,t=o.length;t&&this.length;)for(e=o[--t];-1!==(r=this.indexOf(e));)this.splice(r,1);return this}catch(e){console.info("Error: removeFromArrayByValue try failed! "+e)}};