(self.AMP=self.AMP||[]).push({n:"amp-audio",v:"2005151844001",f:(function(AMP,_){
var k,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},l;if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var n;a:{var ba={a:!0},p={};try{p.__proto__=ba;n=p.a;break a}catch(a){}n=!1}l=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=l,r;function t(){return r?r:r=Promise.resolve(void 0)};function ca(){var a,b;this.promise=new Promise(function(c,e){a=c;b=e});this.resolve=a;this.reject=b};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function u(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var da=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;var ea=Object.prototype.toString;var v=self.AMP_CONFIG||{},fa=("string"==typeof v.cdnProxyRegex?new RegExp(v.cdnProxyRegex):v.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function x(a){if(self.document&&self.document.head&&(!self.location||!fa.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}v.cdnUrl||x("runtime-host");v.geoApiUrl||x("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var y=self.__AMP_LOG;function z(){if(!y.user)throw Error("failed to call initLogConstructor");return y.user}function A(){if(y.dev)return y.dev;throw Error("failed to call initLogConstructor");}function ha(){}function B(a,b,c,e,f){z().assert(a,b,c,e,f,void 0,void 0,void 0,void 0,void 0,void 0)};var C=Object.prototype.hasOwnProperty;function ia(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function ja(a){return a.closest?a.closest("AMP-STORY"):ia(a,function(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return b?b.call(a,"AMP-STORY"):!1})};function D(){this.w=100;this.l=this.m=0;this.j=Object.create(null)}D.prototype.has=function(a){return!!this.j[a]};D.prototype.get=function(a){var b=this.j[a];if(b)return b.access=++this.l,b.payload};D.prototype.put=function(a,b){this.has(a)||this.m++;this.j[a]={payload:b,access:this.l};if(!(this.m<=this.w)){A().warn("lru-cache","Trimming LRU cache");a=this.j;var c=this.l+1,e;for(e in a){var f=a[e].access;if(f<c){c=f;var d=e}}void 0!==d&&(delete a[d],this.m--)}};(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0,action:!0});var E,F;
function G(a,b){var c=void 0===c?"source":c;B(null!=a,"%s %s must be available",b,c);var e=a;if("string"==typeof e){E||(E=self.document.createElement("a"),F=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new D));var f=F,d=E;if(f&&f.has(e))e=f.get(e);else{d.href=e;d.protocol||(d.href=d.href);var g={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==g.pathname[0]&&(g.pathname="/"+g.pathname);if("http:"==
g.protocol&&80==g.port||"https:"==g.protocol&&443==g.port)g.port="",g.host=g.hostname;g.origin=d.origin&&"null"!=d.origin?d.origin:"data:"!=g.protocol&&g.host?g.protocol+"//"+g.host:g.href;f&&f.put(e,g);e=g}}(f="https:"==e.protocol||"localhost"==e.hostname||"127.0.0.1"==e.hostname)||(e=e.hostname,f=e.length-10,f=0<=f&&e.indexOf(".localhost",f)==f);B(f||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,
a)};function H(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){var e=a.AMP_CONFIG[c];"number"===typeof e&&0<=e&&1>=e&&(b[c]=Math.random()<e)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var f=a.AMP_CONFIG["allow-doc-opt-in"],d=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');
if(d){var g=d.getAttribute("content").split(",");for(c=0;c<g.length;c++)-1!=f.indexOf(g[c])&&(b[g[c]]=!0)}}Object.assign(b,ka(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];var h=a.location.originalHash||a.location.hash;a=Object.create(null);if(h)for(var m;m=da.exec(h);){var w=u(m[1],m[1]);m=m[2]?u(m[2].replace(/\+/g," "),m[2]):"";a[w]=m}for(h=0;h<c.length;h++)w=a["e-"+c[h]],"1"==w&&(b[c[h]]=!0),"0"==
w&&(b[c[h]]=!1)}return b}function ka(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(f){A().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var e=0;e<c.length;e++)0!=c[e].length&&("-"==c[e][0]?a[c[e].substr(1)]=!1:a[c[e]]=!0);return a};var I={},J=(I["ampdoc-fie"]={isTrafficEligible:function(){return!0},branches:[["21065001"],["21065002"]]},I);function la(a){var b=a.ownerDocument.defaultView,c=b.__AMP_TOP||(b.__AMP_TOP=b),e=b!=c;if(H(c)["ampdoc-fie"]){c.__AMP_EXPERIMENT_BRANCHES=c.__AMP_EXPERIMENT_BRANCHES||{};for(d in J)if(C.call(J,d)&&!C.call(c.__AMP_EXPERIMENT_BRANCHES,d))if(J[d].isTrafficEligible&&J[d].isTrafficEligible(c)){var f;if(f=!c.__AMP_EXPERIMENT_BRANCHES[d])f=d,f=!!H(c)[f];f&&(f=J[d].branches,c.__AMP_EXPERIMENT_BRANCHES[d]=f[Math.floor(Math.random()*f.length)]||null)}else c.__AMP_EXPERIMENT_BRANCHES[d]=null;var d="21065002"===
(c.__AMP_EXPERIMENT_BRANCHES?c.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else d=!1;var g=d;e&&!g?a=K(b,"url")?L(b,"url"):null:(a=M(a),a=N(a),a=K(a,"url")?L(a,"url"):null);return a}function O(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return L(a,b)}function M(a){return a.nodeType?O((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function N(a){a=M(a);return a.isSingleDoc()?a.win:a}
function L(a,b){K(a,b);a=P(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Q(a){var b=P(a)["amp-analytics-instrumentation"];if(b){if(b.promise)return b.promise;L(a,"amp-analytics-instrumentation");return b.promise=Promise.resolve(b.obj)}return null}function P(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function K(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}
function ma(){var a=new ca,b=a.promise,c=a.resolve;a=a.reject;b.catch(function(){});return{obj:null,promise:b,resolve:c,reject:a,context:null,ctor:null}};function na(a){var b=Q(N(a));if(b)return b;var c=M(a);return c.waitForBodyOpen().then(function(){var a=c.win;var b=c.win.document.head;if(b){var d={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(var g=0;g<b.length;g++){var h=b[g];h=h.getAttribute("custom-element")||h.getAttribute("custom-template");d[h]=!0}d=Object.keys(d)}else d=[];return d.includes("amp-analytics")?O(a,"extensions").waitForExtension(a,"amp-analytics"):t()}).then(function(){var b=c.win;if(b.__AMP_EXTENDED_ELEMENTS&&
b.__AMP_EXTENDED_ELEMENTS["amp-analytics"]){b=N(a);var f=Q(b);f?b=f:(b=P(b),b["amp-analytics-instrumentation"]=ma(),b=b["amp-analytics-instrumentation"].promise)}else b=null;return b})};var R={title:"",artist:"",album:"",artwork:[{src:""}]};function oa(a,b,c,e,f){var d=b.navigator;"mediaSession"in d&&b.MediaMetadata&&(d.mediaSession.metadata=new b.MediaMetadata(R),pa(a,c),d.mediaSession.metadata=new b.MediaMetadata(c),d.mediaSession.setActionHandler("play",e),d.mediaSession.setActionHandler("pause",f))}
function qa(a){var b=a.querySelector('script[type="application/ld+json"]');if(b){try{var c=JSON.parse(b.textContent)}catch(f){c=null}var e=c;if(e&&e.image){if("string"===typeof e.image)return e.image;if(e.image["@list"]&&"string"===typeof e.image["@list"][0])return e.image["@list"][0];if("string"===typeof e.image.url)return e.image.url;if("string"===typeof e.image[0])return e.image[0]}}}
function pa(a,b){var c=la(a);if(b&&b.artwork){var e=b.artwork;ha(Array.isArray(e));e.forEach(function(a){a&&(a="[object Object]"===ea.call(a)?a.src:a,B(c.isProtocolValid(a)))})}};var S;function ra(a,b,c){var e=sa();a.addEventListener(b,function(a){try{return c(a)}catch(d){throw self.__AMP_REPORT_ERROR(d),d;}},e?void 0:!1)}function sa(){if(void 0!==S)return S;S=!1;try{var a={get capture(){S=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return S};function T(a,b,c){ra(a,b,c)};function U(a,b){na(a).then(function(c){c&&c.triggerEventForTarget(a,b,void 0)})};function V(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.o=R;a.isPlaying=!1;return a}var W=AMP.BaseElement;V.prototype=aa(W.prototype);V.prototype.constructor=V;if(q)q(V,W);else for(var X in W)if("prototype"!=X)if(Object.defineProperties){var Y=Object.getOwnPropertyDescriptor(W,X);Y&&Object.defineProperty(V,X,Y)}else V[X]=W[X];V.C=W.prototype;k=V.prototype;k.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a};
k.buildCallback=function(){"nodisplay"===this.getLayout()&&(this.element.removeAttribute("autoplay"),this.buildAudioElement());this.element.classList.add("i-amphtml-media-component");this.registerAction("play",this.B.bind(this));this.registerAction("pause",this.A.bind(this))};
k.mutatedAttributesCallback=function(a){if(this.h){var b=a.src,c=a.controlsList,e=a.loop;if(void 0!==b||void 0!==c||void 0!==e)void 0!==b&&G(b,this.element),this.propagateAttributes(["src","loop","controlsList"],this.h);b=a.title;var f=a.album,d=a.artwork;void 0===a.artist&&void 0===b&&void 0===f&&void 0===d||Z(this)}};
k.buildAudioElement=function(){var a=this,b=this.element.ownerDocument.createElement("audio");if(!b.play)return this.toggleFallback(!0),t();b.controls=!0;var c=this.element.getAttribute("src");c&&G(c,this.element);this.propagateAttributes("src preload autoplay muted loop aria-label aria-describedby aria-labelledby controlsList".split(" "),b);this.applyFillContent(b);this.getRealChildNodes().forEach(function(a){a.getAttribute&&a.getAttribute("src")&&G(a.getAttribute("src"),a);b.appendChild(a)});this.element.appendChild(b);
this.h=b;T(this.h,"playing",function(){return ta(a)});T(this.h,"play",function(){return U(a.element,"audio-play")});T(this.h,"pause",function(){return U(a.element,"audio-pause")})};k.layoutCallback=function(){"nodisplay"!==this.getLayout()&&this.buildAudioElement();Z(this);return"none"===this.element.getAttribute("preload")?this.h:this.loadPromise(this.h)};
function Z(a){var b=a.getAmpDoc().win.document,c=a.element.getAttribute("artist")||"",e=a.element.getAttribute("title")||a.element.getAttribute("aria-label")||b.title||"",f=a.element.getAttribute("album")||"",d;(d=a.element.getAttribute("artwork")||qa(b))||(d=(d=b.querySelector('meta[property="og:image"]'))?d.getAttribute("content"):void 0);d||(d=(b=b.querySelector('link[rel="shortcut icon"]')||b.querySelector('link[rel="icon"]'))?b.getAttribute("href"):void 0);a.o={title:e,artist:c,album:f,artwork:[{src:d||
""}]}}k.renderOutsideViewport=function(){return!0};k.pauseCallback=function(){this.h&&this.h.pause()};function ua(a){return a.h?ja(a.element)?(z().warn("amp-audio","<amp-story> elements do not support actions on <amp-audio> elements"),!1):!0:!1}k.A=function(){ua(this)&&this.h.pause()};k.B=function(){ua(this)&&this.h.play()};function ta(a){oa(a.element,a.win,a.o,function(){a.h.play()},function(){a.h.pause()})}(function(a){a.registerElement("amp-audio",V)})(self.AMP);
})});

//# sourceMappingURL=amp-audio-0.1.js.map
