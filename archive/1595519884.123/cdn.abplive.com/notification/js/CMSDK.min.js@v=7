!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("CMSDK",[],t):"object"==typeof exports?exports.CMSDK=t():e.CMSDK=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(332)},function(e,t,n){(function(e){"use strict";function t(e,t,n){e[t]||Object[r](e,t,{writable:!0,configurable:!0,value:n})}if(n(2),n(328),n(329),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,n){n(3),n(53),n(54),n(55),n(56),n(58),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(70),n(72),n(74),n(76),n(79),n(80),n(81),n(85),n(87),n(89),n(92),n(93),n(94),n(95),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(105),n(106),n(107),n(109),n(110),n(111),n(113),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(132),n(133),n(137),n(138),n(139),n(140),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(158),n(159),n(161),n(162),n(168),n(169),n(171),n(172),n(173),n(177),n(178),n(179),n(180),n(181),n(183),n(184),n(185),n(186),n(189),n(191),n(192),n(193),n(195),n(197),n(199),n(201),n(202),n(203),n(207),n(208),n(209),n(211),n(221),n(225),n(226),n(228),n(229),n(233),n(234),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(256),n(257),n(258),n(259),n(260),n(262),n(263),n(264),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(275),n(276),n(278),n(279),n(280),n(281),n(284),n(285),n(287),n(288),n(289),n(290),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),e.exports=n(9)},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(6),a=n(8),s=n(18),u=n(25).KEY,c=n(7),l=n(21),f=n(26),d=n(19),h=n(27),p=n(28),v=n(29),g=n(30),y=n(45),m=n(12),_=n(13),b=n(46),E=n(33),S=n(16),w=n(17),T=n(47),O=n(50),k=n(52),x=n(43),P=n(11),C=n(31),M=k.f,I=P.f,A=O.f,D=r.Symbol,N=r.JSON,R=N&&N.stringify,j="prototype",L=h("_hidden"),U=h("toPrimitive"),F={}.propertyIsEnumerable,B=l("symbol-registry"),K=l("symbols"),V=l("op-symbols"),H=Object[j],G="function"==typeof D&&!!x.f,W=r.QObject,q=!W||!W[j]||!W[j].findChild,J=o&&c(function(){return 7!=T(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=M(H,t);r&&delete H[t],I(e,t,n),r&&e!==H&&I(H,t,r)}:I,Y=function(e){var t=K[e]=T(D[j]);return t._k=e,t},z=G&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},X=function(e,t,n){return e===H&&X(V,t,n),m(e),t=S(t,!0),m(n),i(K,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=T(n,{enumerable:w(0,!1)})):(i(e,L)||I(e,L,w(1,{})),e[L][t]=!0),J(e,t,n)):I(e,t,n)},$=function(e,t){m(e);for(var n,r=g(t=E(t)),i=0,o=r.length;o>i;)X(e,n=r[i++],t[n]);return e},Q=function(e,t){return void 0===t?T(e):$(T(e),t)},Z=function(e){var t=F.call(this,e=S(e,!0));return!(this===H&&i(K,e)&&!i(V,e))&&(!(t||!i(this,e)||!i(K,e)||i(this,L)&&this[L][e])||t)},ee=function(e,t){if(e=E(e),t=S(t,!0),e!==H||!i(K,t)||i(V,t)){var n=M(e,t);return!n||!i(K,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},te=function(e){for(var t,n=A(E(e)),r=[],o=0;n.length>o;)i(K,t=n[o++])||t==L||t==u||r.push(t);return r},ne=function(e){for(var t,n=e===H,r=A(n?V:E(e)),o=[],a=0;r.length>a;)!i(K,t=r[a++])||n&&!i(H,t)||o.push(K[t]);return o};G||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(V,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),J(this,e,w(1,n))};return o&&q&&J(H,e,{configurable:!0,set:t}),Y(e)},s(D[j],"toString",function(){return this._k}),k.f=ee,P.f=X,n(51).f=O.f=te,n(44).f=Z,x.f=ne,o&&!n(22)&&s(H,"propertyIsEnumerable",Z,!0),p.f=function(e){return Y(h(e))}),a(a.G+a.W+a.F*!G,{Symbol:D});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)h(re[ie++]);for(var oe=C(h.store),ae=0;oe.length>ae;)v(oe[ae++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return i(B,e+="")?B[e]:B[e]=D(e)},keyFor:function(e){if(!z(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!G,"Object",{create:Q,defineProperty:X,defineProperties:$,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var se=c(function(){x.f(1)});a(a.S+a.F*se,"Object",{getOwnPropertySymbols:function(e){return x.f(b(e))}}),N&&a(a.S+a.F*(!G||c(function(){var e=D();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!z(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!z(t))return t}),r[1]=t,R.apply(N,r)}}),D[j][U]||n(10)(D[j],U,D[j].valueOf),f(D,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(4),i=n(9),o=n(10),a=n(18),s=n(23),u="prototype",c=function(e,t,n){var l,f,d,h,p=e&c.F,v=e&c.G,g=e&c.S,y=e&c.P,m=e&c.B,_=v?r:g?r[t]||(r[t]={}):(r[t]||{})[u],b=v?i:i[t]||(i[t]={}),E=b[u]||(b[u]={});v&&(n=t);for(l in n)f=!p&&_&&void 0!==_[l],d=(f?_:n)[l],h=m&&f?s(d,r):y&&"function"==typeof d?s(Function.call,d):d,_&&a(_,l,d,e&c.U),b[l]!=d&&o(b,l,h),y&&E[l]!=d&&(E[l]=d)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(11),i=n(17);e.exports=n(6)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(12),i=n(14),o=n(16),a=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(13);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(6)&&!n(7)(function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(13),i=n(4).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(13);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(4),i=n(10),o=n(5),a=n(19)("src"),s=n(20),u="toString",c=(""+s).split(u);n(9).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){e.exports=n(21)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(9),i=n(4),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(22)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!1},function(e,t,n){var r=n(24);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(19)("meta"),i=n(13),o=n(5),a=n(11).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(7)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,n){var r=n(11).f,i=n(5),o=n(27)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(21)("wks"),i=n(19),o=n(4).Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},function(e,t,n){t.f=n(27)},function(e,t,n){var r=n(4),i=n(9),o=n(22),a=n(28),s=n(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(31),i=n(43),o=n(44);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(32),i=n(42);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(5),i=n(33),o=n(37)(!1),a=n(41)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(34),i=n(36);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(35);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(33),i=n(38),o=n(40);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(39),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(39),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(21)("keys"),i=n(19);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(35);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(36);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(12),i=n(48),o=n(42),a=n(41)("IE_PROTO"),s=function(){},u="prototype",c=function(){var e,t=n(15)("iframe"),r=o.length,i="<",a=">";for(t.style.display="none",n(49).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),c=e.F;r--;)delete c[u][o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(11),i=n(12),o=n(31);e.exports=n(6)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(33),i=n(51).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){var r=n(32),i=n(42).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(44),i=n(17),o=n(33),a=n(16),s=n(5),u=n(14),c=Object.getOwnPropertyDescriptor;t.f=n(6)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(8);r(r.S,"Object",{create:n(47)})},function(e,t,n){var r=n(8);r(r.S+r.F*!n(6),"Object",{defineProperty:n(11).f})},function(e,t,n){var r=n(8);r(r.S+r.F*!n(6),"Object",{defineProperties:n(48)})},function(e,t,n){var r=n(33),i=n(52).f;n(57)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){var r=n(8),i=n(9),o=n(7);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(46),i=n(59);n(57)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(5),i=n(46),o=n(41)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(46),i=n(31);n(57)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){n(57)("getOwnPropertyNames",function(){return n(50).f})},function(e,t,n){var r=n(13),i=n(25).onFreeze;n(57)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(13),i=n(25).onFreeze;n(57)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(13),i=n(25).onFreeze;n(57)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(13);n(57)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(13);n(57)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(13);n(57)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(8);r(r.S+r.F,"Object",{assign:n(69)})},function(e,t,n){"use strict";var r=n(6),i=n(31),o=n(43),a=n(44),s=n(46),u=n(34),c=Object.assign;e.exports=!c||n(7)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=s(e),c=arguments.length,l=1,f=o.f,d=a.f;c>l;)for(var h,p=u(arguments[l++]),v=f?i(p).concat(f(p)):i(p),g=v.length,y=0;g>y;)h=v[y++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:c},function(e,t,n){var r=n(8);r(r.S,"Object",{is:n(71)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var r=n(8);r(r.S,"Object",{setPrototypeOf:n(73).set})},function(e,t,n){var r=n(13),i=n(12),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(23)(Function.call,n(52).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){"use strict";var r=n(75),i={};i[n(27)("toStringTag")]="z",i+""!="[object z]"&&n(18)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(35),i=n(27)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(8);r(r.P,"Function",{bind:n(77)})},function(e,t,n){"use strict";var r=n(24),i=n(13),o=n(78),a=[].slice,s={},u=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(11).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in i||n(6)&&r(i,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(13),i=n(59),o=n(27)("hasInstance"),a=Function.prototype;o in a||n(11).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(8),i=n(82);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(4).parseInt,i=n(83).trim,o=n(84),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(8),i=n(36),o=n(7),a=n(84),s="["+a+"]",u="â€‹Â…",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(e,t,n){var i={},s=o(function(){return!!a[e]()||u[e]()!=u}),c=i[e]=s?t(d):a[e];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},d=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},function(e,t){e.exports="\t\n\v\f\r Â áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},function(e,t,n){var r=n(8),i=n(86);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){var r=n(4).parseFloat,i=n(83).trim;e.exports=1/r(n(84)+"-0")!==-(1/0)?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(35),a=n(88),s=n(16),u=n(7),c=n(51).f,l=n(52).f,f=n(11).f,d=n(83).trim,h="Number",p=r[h],v=p,g=p.prototype,y=o(n(47)(g))==h,m="trim"in String.prototype,_=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=m?t.trim():d(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,u=t.slice(2),c=0,l=u.length;c<l;c++)if(a=u.charCodeAt(c),a<48||a>i)return NaN;return parseInt(u,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(y?u(function(){g.valueOf.call(n)}):o(n)!=h)?a(new v(_(t)),n,p):_(t)};for(var b,E=n(6)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;E.length>S;S++)i(v,b=E[S])&&!i(p,b)&&f(p,b,l(v,b));p.prototype=g,g.constructor=p,n(18)(r,h,p)}},function(e,t,n){var r=n(13),i=n(73).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(8),i=n(39),o=n(90),a=n(91),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f="0",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=u(r/1e7)},h=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=u(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call(f,7-n.length)+n}return t},v=function(e,t,n){return 0===t?n:t%2===1?v(e,t-1,n*e):v(e*e,t/2,n)},g=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(7)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,u=o(this,l),c=i(e),y="",m=f;if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(t=g(u*v(2,69,1))-69,n=t<0?u*v(2,-t,1):u/v(2,t,1),n*=4503599627370496,t=52-t,t>0){for(d(0,n),r=c;r>=7;)d(1e7,0),r-=7;for(d(v(10,r,1),0),r=t-1;r>=23;)h(1<<23),r-=23;h(1<<r),d(1,1),h(2),m=p()}else d(0,n),d(1<<-t,0),m=p()+a.call(f,c);return c>0?(s=m.length,m=y+(s<=c?"0."+a.call(f,c-s)+m:m.slice(0,s-c)+"."+m.slice(s-c))):m=y+m,m}})},function(e,t,n){var r=n(35);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var r=n(39),i=n(36);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){"use strict";var r=n(8),i=n(7),o=n(90),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(8);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(8),i=n(4).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(8);r(r.S,"Number",{isInteger:n(96)})},function(e,t,n){var r=n(13),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){var r=n(8);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(8),i=n(96),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(8);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(8);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(8),i=n(86);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(8),i=n(82);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(8),i=n(104),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=n(8),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(8),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(8),i=n(108);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){var r=n(8);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(8),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(8),i=n(112);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(8);r(r.S,"Math",{fround:n(114)})},function(e,t,n){var r=n(108),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126),c=function(e){return e+1/o-1/o};e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),l=r(e);return i<u?l*c(i/u/a)*u*a:(t=(1+a/o)*i,n=t-(t-i),n>s||n!=n?l*(1/0):l*n)}},function(e,t,n){var r=n(8),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)n=i(arguments[a++]),u<n?(r=u/n,o=o*r*r+1,u=n):n>0?(r=n/u,o+=r*r):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(e,t,n){var r=n(8),i=Math.imul;r(r.S+r.F*n(7)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(e,t){var n=65535,r=+e,i=+t,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},function(e,t,n){var r=n(8);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(8);r(r.S,"Math",{log1p:n(104)})},function(e,t,n){var r=n(8);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(8);r(r.S,"Math",{sign:n(108)})},function(e,t,n){var r=n(8),i=n(112),o=Math.exp;r(r.S+r.F*n(7)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(8),i=n(112),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(8);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(8),i=n(40),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(8),i=n(33),o=n(38);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(83)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(128)(!0);n(129)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(39),i=n(36);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(e,t,n){"use strict";var r=n(22),i=n(8),o=n(18),a=n(10),s=n(130),u=n(131),c=n(26),l=n(59),f=n(27)("iterator"),d=!([].keys&&"next"in[].keys()),h="@@iterator",p="keys",v="values",g=function(){return this};e.exports=function(e,t,n,y,m,_,b){u(n,t,y);var E,S,w,T=function(e){if(!d&&e in P)return P[e];switch(e){case p:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},O=t+" Iterator",k=m==v,x=!1,P=e.prototype,C=P[f]||P[h]||m&&P[m],M=C||T(m),I=m?k?T("entries"):M:void 0,A="Array"==t?P.entries||C:C;if(A&&(w=l(A.call(new e)),w!==Object.prototype&&w.next&&(c(w,O,!0),r||"function"==typeof w[f]||a(w,f,g))),k&&C&&C.name!==v&&(x=!0,M=function(){return C.call(this)}),r&&!b||!d&&!x&&P[f]||a(P,f,M),s[t]=M,s[O]=g,m)if(E={values:k?M:T(v),keys:_?M:T(p),entries:I},b)for(S in E)S in P||o(P,S,E[S]);else i(i.P+i.F*(d||x),t,E);return E}},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(47),i=n(17),o=n(26),a={};n(10)(a,n(27)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(8),i=n(128)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(8),i=n(38),o=n(134),a="endsWith",s=""[a];r(r.P+r.F*n(136)(a),"String",{endsWith:function(e){var t=o(this,e,a),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),u=void 0===n?r:Math.min(i(n),r),c=String(e);return s?s.call(t,c,u):t.slice(u-c.length,u)===c}})},function(e,t,n){var r=n(135),i=n(36);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(13),i=n(35),o=n(27)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(27)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){"use strict";var r=n(8),i=n(134),o="includes";r(r.P+r.F*n(136)(o),"String",{includes:function(e){return!!~i(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(8);r(r.P,"String",{repeat:n(91)})},function(e,t,n){"use strict";var r=n(8),i=n(38),o=n(134),a="startsWith",s=""[a];r(r.P+r.F*n(136)(a),"String",{startsWith:function(e){var t=o(this,e,a),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return s?s.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(141)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){var r=n(8),i=n(7),o=n(36),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){"use strict";n(141)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(141)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(141)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(141)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(141)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(141)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(141)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(141)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(141)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(141)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(141)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(141)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var r=n(8);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(8),i=n(46),o=n(16);r(r.P+r.F*n(7)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){
return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(8),i=n(157);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(7),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i="Invalid Date",o="toString",a=r[o],s=r.getTime;new Date(NaN)+""!=i&&n(18)(r,o,function(){var e=s.call(this);return e===e?a.call(this):i})},function(e,t,n){var r=n(27)("toPrimitive"),i=Date.prototype;r in i||n(10)(i,r,n(160))},function(e,t,n){"use strict";var r=n(12),i=n(16),o="number";e.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),e!=o)}},function(e,t,n){var r=n(8);r(r.S,"Array",{isArray:n(45)})},function(e,t,n){"use strict";var r=n(23),i=n(8),o=n(46),a=n(163),s=n(164),u=n(38),c=n(165),l=n(166);i(i.S+i.F*!n(167)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,f,d=o(e),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,y=0,m=l(d);if(g&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==m||h==Array&&s(m))for(t=u(d.length),n=new h(t);t>y;y++)c(n,y,g?v(d[y],y):d[y]);else for(f=m.call(d),n=new h;!(i=f.next()).done;y++)c(n,y,g?a(f,v,[i.value,y],!0):i.value);return n.length=y,n}})},function(e,t,n){var r=n(12);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(130),i=n(27)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(11),i=n(17);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(75),i=n(27)("iterator"),o=n(130);e.exports=n(9).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(27)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(8),i=n(165);r(r.S+r.F*n(7)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(8),i=n(33),o=[].join;r(r.P+r.F*(n(34)!=Object||!n(170)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";var r=n(8),i=n(49),o=n(35),a=n(40),s=n(38),u=[].slice;r(r.P+r.F*n(7)(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return u.call(this,e,t);for(var i=a(e,n),c=a(t,n),l=s(c-i),f=new Array(l),d=0;d<l;d++)f[d]="String"==r?this.charAt(i+d):this[i+d];return f}})},function(e,t,n){"use strict";var r=n(8),i=n(24),o=n(46),a=n(7),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(170)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(8),i=n(174)(0),o=n(170)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(23),i=n(34),o=n(46),a=n(38),s=n(175);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var v,g,y=o(t),m=i(y),_=r(s,p,3),b=a(m.length),E=0,S=n?h(t,b):u?h(t,0):void 0;b>E;E++)if((d||E in m)&&(v=m[E],g=_(v,E,y),e))if(n)S[E]=g;else if(g)switch(e){case 3:return!0;case 5:return v;case 6:return E;case 2:S.push(v)}else if(l)return!1;return f?-1:c||l?l:S}}},function(e,t,n){var r=n(176);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(13),i=n(45),o=n(27)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(8),i=n(174)(1);r(r.P+r.F*!n(170)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(174)(2);r(r.P+r.F*!n(170)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(174)(3);r(r.P+r.F*!n(170)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(174)(4);r(r.P+r.F*!n(170)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(182);r(r.P+r.F*!n(170)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){var r=n(24),i=n(46),o=n(34),a=n(38);e.exports=function(e,t,n,s,u){r(t);var c=i(e),l=o(c),f=a(c.length),d=u?f-1:0,h=u?-1:1;if(n<2)for(;;){if(d in l){s=l[d],d+=h;break}if(d+=h,u?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;u?d>=0:f>d;d+=h)d in l&&(s=t(s,l[d],d,c));return s}},function(e,t,n){"use strict";var r=n(8),i=n(182);r(r.P+r.F*!n(170)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(8),i=n(37)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(170)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(33),o=n(39),a=n(38),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(170)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(8);r(r.P,"Array",{copyWithin:n(187)}),n(188)("copyWithin")},function(e,t,n){"use strict";var r=n(46),i=n(40),o=n(38);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),u=i(t,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(e,t,n){var r=n(27)("unscopables"),i=Array.prototype;void 0==i[r]&&n(10)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r=n(8);r(r.P,"Array",{fill:n(190)}),n(188)("fill")},function(e,t,n){"use strict";var r=n(46),i=n(40),o=n(38);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(8),i=n(174)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(188)(o)},function(e,t,n){"use strict";var r=n(8),i=n(174)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(188)(o)},function(e,t,n){n(194)("Array")},function(e,t,n){"use strict";var r=n(4),i=n(11),o=n(6),a=n(27)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(188),i=n(196),o=n(130),a=n(33);e.exports=n(129)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(4),i=n(88),o=n(11).f,a=n(51).f,s=n(135),u=n(198),c=r.RegExp,l=c,f=c.prototype,d=/a/g,h=/a/g,p=new c(d)!==d;if(n(6)&&(!p||n(7)(function(){return h[n(27)("match")]=!1,c(d)!=d||c(h)==h||"/a/i"!=c(d,"i")}))){c=function(e,t){var n=this instanceof c,r=s(e),o=void 0===t;return!n&&r&&e.constructor===c&&o?e:i(p?new l(r&&!o?e.source:e,t):l((r=e instanceof c)?e.source:e,r&&o?u.call(e):t),n?this:f,c)};for(var v=(function(e){e in c||o(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}),g=a(l),y=0;g.length>y;)v(g[y++]);f.constructor=c,c.prototype=f,n(18)(r,"RegExp",c)}n(194)("RegExp")},function(e,t,n){"use strict";var r=n(12);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(200);n(8)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){"use strict";var r=n(198),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s="lastIndex",u=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[s]||0!==t[s]}(),c=void 0!==/()??/.exec("")[1],l=u||c;l&&(a=function(e){var t,n,a,l,f=this;return c&&(n=new RegExp("^"+f.source+"$(?!\\s)",r.call(f))),u&&(t=f[s]),a=i.call(f,e),u&&a&&(f[s]=f.global?a.index+a[0].length:t),c&&a&&a.length>1&&o.call(a[0],n,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)}),a}),e.exports=a},function(e,t,n){"use strict";n(202);var r=n(12),i=n(198),o=n(6),a="toString",s=/./[a],u=function(e){n(18)(RegExp.prototype,a,e,!0)};n(7)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?u(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):s.name!=a&&u(function(){return s.call(this)})},function(e,t,n){n(6)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(198)})},function(e,t,n){"use strict";var r=n(12),i=n(38),o=n(204),a=n(205);n(206)("match",1,function(e,t,n,s){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var u=r(e),c=String(this);if(!u.global)return a(u,c);var l=u.unicode;u.lastIndex=0;for(var f,d=[],h=0;null!==(f=a(u,c));){var p=String(f[0]);d[h]=p,""===p&&(u.lastIndex=o(c,i(u.lastIndex),l)),h++}return 0===h?null:d}]})},function(e,t,n){"use strict";var r=n(128)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){"use strict";var r=n(75),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(199);var r=n(18),i=n(10),o=n(7),a=n(36),s=n(27),u=n(200),c=s("species"),l=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var d=s(e),h=!o(function(){var t={};return t[d]=function(){return 7},7!=""[e](t)}),p=h?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!t}):void 0;if(!h||!p||"replace"===e&&!l||"split"===e&&!f){var v=/./[d],g=n(a,d,""[e],function(e,t,n,r,i){return t.exec===u?h&&!i?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),y=g[0],m=g[1];r(String.prototype,e,y),i(RegExp.prototype,d,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},function(e,t,n){"use strict";var r=n(12),i=n(46),o=n(38),a=n(39),s=n(204),u=n(205),c=Math.max,l=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};n(206)("replace",2,function(e,t,n,v){function g(e,t,r,o,a,s){var u=r+e.length,c=o.length,l=h;return void 0!==a&&(a=i(a),l=d),n.call(s,l,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>c){var d=f(l/10);return 0===d?n:d<=c?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s})}return[function(r,i){var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=v(n,e,this,t);if(i.done)return i.value;var f=r(e),d=String(this),h="function"==typeof t;h||(t=String(t));var y=f.global;if(y){var m=f.unicode;f.lastIndex=0}for(var _=[];;){var b=u(f,d);if(null===b)break;if(_.push(b),!y)break;var E=String(b[0]);""===E&&(f.lastIndex=s(d,o(f.lastIndex),m))}for(var S="",w=0,T=0;T<_.length;T++){b=_[T];for(var O=String(b[0]),k=c(l(a(b.index),d.length),0),x=[],P=1;P<b.length;P++)x.push(p(b[P]));var C=b.groups;if(h){var M=[O].concat(x,k,d);void 0!==C&&M.push(C);var I=String(t.apply(void 0,M))}else I=g(O,d,k,x,C,t);k>=w&&(S+=d.slice(w,k)+I,w=k+O.length)}return S+d.slice(w)}]})},function(e,t,n){"use strict";var r=n(12),i=n(71),o=n(205);n(206)("search",1,function(e,t,n,a){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),u=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var l=o(s,u);return i(s.lastIndex,c)||(s.lastIndex=c),null===l?-1:l.index}]})},function(e,t,n){"use strict";var r=n(135),i=n(12),o=n(210),a=n(204),s=n(38),u=n(205),c=n(200),l=n(7),f=Math.min,d=[].push,h="split",p="length",v="lastIndex",g=4294967295,y=!l(function(){RegExp(g,"y")});n(206)("split",2,function(e,t,n,l){var m;return m="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||"."[h](/()()/)[p]>1||""[h](/.?/)[p]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,h=void 0===t?g:t>>>0,y=new RegExp(e.source,l+"g");(o=c.call(y,i))&&(a=y[v],!(a>f&&(u.push(i.slice(f,o.index)),o[p]>1&&o.index<i[p]&&d.apply(u,o.slice(1)),s=o[0][p],f=a,u[p]>=h)));)y[v]===o.index&&y[v]++;return f===i[p]?!s&&y.test("")||u.push(""):u.push(i.slice(f)),u[p]>h?u.slice(0,h):u}:"0"[h](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,r):m.call(String(i),n,r)},function(e,t){var r=l(m,e,this,t,m!==n);if(r.done)return r.value;var c=i(e),d=String(this),h=o(c,RegExp),p=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(y?"y":"g"),_=new h(y?c:"^(?:"+c.source+")",v),b=void 0===t?g:t>>>0;if(0===b)return[];if(0===d.length)return null===u(_,d)?[d]:[];for(var E=0,S=0,w=[];S<d.length;){_.lastIndex=y?S:0;var T,O=u(_,y?d:d.slice(S));if(null===O||(T=f(s(_.lastIndex+(y?0:S)),d.length))===E)S=a(d,S,p);else{if(w.push(d.slice(E,S)),w.length===b)return w;for(var k=1;k<=O.length-1;k++)if(w.push(O[k]),w.length===b)return w;S=E=T}}return w.push(d.slice(E)),w}]})},function(e,t,n){var r=n(12),i=n(24),o=n(27)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){"use strict";var r,i,o,a,s=n(22),u=n(4),c=n(23),l=n(75),f=n(8),d=n(13),h=n(24),p=n(212),v=n(213),g=n(210),y=n(214).set,m=n(215)(),_=n(216),b=n(217),E=n(218),S=n(219),w="Promise",T=u.TypeError,O=u.process,k=O&&O.versions,x=k&&k.v8||"",P=u[w],C="process"==l(O),M=function(){},I=i=_.f,A=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[n(27)("species")]=function(e){e(M,M)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==x.indexOf("6.6")&&E.indexOf("Chrome/66")===-1}catch(e){}}(),D=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},N=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&L(e),e._h=1),s===!0?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?c(T("Promise-chain cycle")):(o=D(n))?o.call(n,u,c):u(n)):c(r)}catch(e){l&&!a&&l.exit(),c(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){y.call(u,function(){var t,n,r,i=e._v,o=j(e);if(o&&(t=b(function(){C?O.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=C||j(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){y.call(u,function(){var t;C?O.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),N(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw T("Promise can't be resolved itself");(t=D(e))?m(function(){var r={_w:n,_d:!1};try{t.call(e,c(F,r,1),c(U,r,1))}catch(e){U.call(r,e)}}):(n._v=e,n._s=1,N(n,!1))}catch(e){U.call({_w:n,_d:!1},e)}}};A||(P=function(e){p(this,P,w,"_h"),h(e),r.call(this);try{e(c(F,this,1),c(U,this,1))}catch(e){U.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(220)(P.prototype,{then:function(e,t){var n=I(g(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?O.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(F,e,1),this.reject=c(U,e,1)},_.f=I=function(e){return e===P||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!A,{Promise:P}),n(26)(P,w),n(194)(w),a=n(9)[w],f(f.S+f.F*!A,w,{reject:function(e){var t=I(this),n=t.reject;return n(e),t.promise}}),f(f.S+f.F*(s||!A),w,{resolve:function(e){return S(s&&this===a?P:this,e)}}),f(f.S+f.F*!(A&&n(167)(function(e){P.all(e).catch(M)})),w,{all:function(e){var t=this,n=I(t),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=I(t),r=n.reject,i=b(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(23),i=n(163),o=n(164),a=n(12),s=n(38),u=n(166),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,g,y=d?function(){return e}:u(e),m=r(n,f,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>_;_++)if(g=t?m(a(p=e[_])[0],p[1]):m(e[_]),g===c||g===l)return g}else for(v=y.call(e);!(p=v.next()).done;)if(g=i(v,m,p.value,t),g===c||g===l)return g};t.BREAK=c,t.RETURN=l},function(e,t,n){var r,i,o,a=n(23),s=n(78),u=n(49),c=n(15),l=n(4),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,g=0,y={},m="onreadystatechange",_=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){_.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},h=function(e){delete y[e]},"process"==n(35)(f)?r=function(e){f.nextTick(a(_,e,1))}:v&&v.now?r=function(e){v.now(a(_,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r=m in c("script")?function(e){u.appendChild(c("script"))[m]=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(a(_,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){var r=n(4),i=n(214).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(35)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(24);e.exports.f=function(e){return new r(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(4),i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){var r=n(12),i=n(13),o=n(216);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},function(e,t,n){var r=n(18);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";var r=n(222),i=n(223),o="Map";e.exports=n(224)(o,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,o),e);return t&&t.v},set:function(e,t){return r.def(i(this,o),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(11).f,i=n(47),o=n(220),a=n(23),s=n(212),u=n(213),c=n(129),l=n(196),f=n(194),d=n(6),h=n(25).fastKey,p=n(223),v=d?"_s":"size",g=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=g(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=g(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:g,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){var r=n(13);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(4),i=n(8),o=n(18),a=n(220),s=n(25),u=n(213),c=n(212),l=n(13),f=n(7),d=n(167),h=n(26),p=n(88);e.exports=function(e,t,n,v,g,y){var m=r[e],_=m,b=g?"set":"add",E=_&&_.prototype,S={},w=function(e){var t=E[e];o(E,e,"delete"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(y||E.forEach&&!f(function(){(new _).entries().next()}))){var T=new _,O=T[b](y?{}:-0,1)!=T,k=f(function(){T.has(1)}),x=d(function(e){new _(e)}),P=!y&&f(function(){for(var e=new _,t=5;t--;)e[b](t,t);return!e.has(-0)});x||(_=t(function(t,n){c(t,_,e);var r=p(new m,t,_);return void 0!=n&&u(n,g,r[b],r),r}),_.prototype=E,E.constructor=_),(k||P)&&(w("delete"),w("has"),g&&w("get")),(P||O)&&w(b),y&&E.clear&&delete E.clear}else _=v.getConstructor(t,e,g,b),a(_.prototype,n),s.NEED=!0;return h(_,e),S[e]=_,i(i.G+i.W+i.F*(_!=m),S),y||v.setStrong(_,e,g),_}},function(e,t,n){"use strict";var r=n(222),i=n(223),o="Set";e.exports=n(224)(o,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,o),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(4),o=n(174)(0),a=n(18),s=n(25),u=n(69),c=n(227),l=n(13),f=n(223),d=n(223),h=!i.ActiveXObject&&"ActiveXObject"in i,p="WeakMap",v=s.getWeak,g=Object.isExtensible,y=c.ufstore,m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},_={get:function(e){if(l(e)){var t=v(e);return t===!0?y(f(this,p)).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(f(this,p),e,t)}},b=e.exports=n(224)(p,m,_,c,!0,!0);d&&h&&(r=c.getConstructor(m,p),u(r.prototype,_),s.NEED=!0,o(["delete","has","get","set"],function(e){var t=b.prototype,n=t[e];a(t,e,function(t,i){if(l(t)&&!g(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},function(e,t,n){"use strict";var r=n(220),i=n(25).getWeak,o=n(12),a=n(13),s=n(212),u=n(213),c=n(174),l=n(5),f=n(223),d=c(5),h=c(6),p=0,v=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},y=function(e,t){return d(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var c=e(function(e,r){s(e,c,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=r&&u(r,n,e[o],e)});return r(c.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return n===!0?v(f(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return n===!0?v(f(this,t)).has(e):n&&l(n,this._i)}}),c},def:function(e,t,n){var r=i(o(t),!0);return r===!0?v(e).set(t,n):r[e._i]=n,e},ufstore:v}},function(e,t,n){"use strict";var r=n(227),i=n(223),o="WeakSet";n(224)(o,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,o),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(8),i=n(230),o=n(231),a=n(12),s=n(40),u=n(38),c=n(13),l=n(4).ArrayBuffer,f=n(210),d=o.ArrayBuffer,h=o.DataView,p=i.ABV&&l.isView,v=d.prototype.slice,g=i.VIEW,y="ArrayBuffer";r(r.G+r.W+r.F*(l!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,y,{isView:function(e){return p&&p(e)||c(e)&&g in e}}),r(r.P+r.U+r.F*n(7)(function(){return!new d(2).slice(1,void 0).byteLength}),y,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(f(this,d))(u(i-r)),c=new h(this),l=new h(o),p=0;r<i;)l.setUint8(p++,c.getUint8(r++));return o}}),n(194)(y)},function(e,t,n){for(var r,i=n(4),o=n(10),a=n(19),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,d=9,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<d;)(r=i[h[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(e,t,n){"use strict";function r(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?K(2,-24)-K(2,-77):0,f=0,d=e<0||0===e&&1/e<0?1:0;for(e=B(e),e!=e||e===U?(i=e!=e?1:0,r=u):(r=V(H(e)/G),e*(o=K(2,-r))<1&&(r--,o*=2),e+=r+c>=1?l/o:l*K(2,1-c),e*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(e*o-1)*K(2,t),r+=c):(i=e*K(2,c-1)*K(2,t),r=0));t>=8;a[f++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*d,a}function i(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-U:U;r+=K(2,t),l-=a}return(c?-1:1)*r*K(2,l-t)}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function a(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function c(e){return r(e,52,8)}function l(e){return r(e,23,4)}function f(e,t,n){k(e[I],t,{get:function(){return this[n]}})}function d(e,t,n,r){var i=+n,o=T(i);if(o+t>e[z])throw L(D);var a=e[Y]._b,s=o+e[X],u=a.slice(s,s+t);return r?u:u.reverse()}function h(e,t,n,r,i,o){var a=+n,s=T(a);if(s+t>e[z])throw L(D);for(var u=e[Y]._b,c=s+e[X],l=r(+i),f=0;f<t;f++)u[c+f]=l[o?f:t-f-1]}var p=n(4),v=n(6),g=n(22),y=n(230),m=n(10),_=n(220),b=n(7),E=n(212),S=n(39),w=n(38),T=n(232),O=n(51).f,k=n(11).f,x=n(190),P=n(26),C="ArrayBuffer",M="DataView",I="prototype",A="Wrong length!",D="Wrong index!",N=p[C],R=p[M],j=p.Math,L=p.RangeError,U=p.Infinity,F=N,B=j.abs,K=j.pow,V=j.floor,H=j.log,G=j.LN2,W="buffer",q="byteLength",J="byteOffset",Y=v?"_b":W,z=v?"_l":q,X=v?"_o":J;if(y.ABV){if(!b(function(){N(1)})||!b(function(){new N(-1)})||b(function(){return new N,new N(1.5),new N(NaN),N.name!=C})){N=function(e){return E(this,N),new F(T(e))};for(var $,Q=N[I]=F[I],Z=O(F),ee=0;Z.length>ee;)($=Z[ee++])in N||m(N,$,F[$]);g||(Q.constructor=N)}var te=new R(new N(2)),ne=R[I].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||_(R[I],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else N=function(e){E(this,N,C);var t=T(e);this._b=x.call(new Array(t),0),this[z]=t},R=function(e,t,n){E(this,R,M),E(e,N,M);var r=e[z],i=S(t);if(i<0||i>r)throw L("Wrong offset!");if(n=void 0===n?r-i:w(n),i+n>r)throw L(A);this[Y]=e,this[X]=i,this[z]=n},v&&(f(N,q,"_l"),f(R,W,"_b"),f(R,q,"_l"),f(R,J,"_o")),_(R[I],{getInt8:function(e){return d(this,1,e)[0]<<24>>24},getUint8:function(e){return d(this,1,e)[0]},getInt16:function(e){var t=d(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=d(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return o(d(this,4,e,arguments[1]))},getUint32:function(e){return o(d(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(d(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(d(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){h(this,1,e,a,t)},setUint8:function(e,t){h(this,1,e,a,t)},setInt16:function(e,t){h(this,2,e,s,t,arguments[2])},setUint16:function(e,t){h(this,2,e,s,t,arguments[2])},setInt32:function(e,t){h(this,4,e,u,t,arguments[2])},setUint32:function(e,t){h(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){h(this,4,e,l,t,arguments[2])},setFloat64:function(e,t){h(this,8,e,c,t,arguments[2])}});P(N,C),P(R,M),m(R[I],y.VIEW,!0),t[C]=N,t[M]=R},function(e,t,n){var r=n(39),i=n(38);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(8);r(r.G+r.W+r.F*!n(230).ABV,{DataView:n(231).DataView})},function(e,t,n){n(235)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";if(n(6)){
var r=n(22),i=n(4),o=n(7),a=n(8),s=n(230),u=n(231),c=n(23),l=n(212),f=n(17),d=n(10),h=n(220),p=n(39),v=n(38),g=n(232),y=n(40),m=n(16),_=n(5),b=n(75),E=n(13),S=n(46),w=n(164),T=n(47),O=n(59),k=n(51).f,x=n(166),P=n(19),C=n(27),M=n(174),I=n(37),A=n(210),D=n(195),N=n(130),R=n(167),j=n(194),L=n(190),U=n(187),F=n(11),B=n(52),K=F.f,V=B.f,H=i.RangeError,G=i.TypeError,W=i.Uint8Array,q="ArrayBuffer",J="Shared"+q,Y="BYTES_PER_ELEMENT",z="prototype",X=Array[z],$=u.ArrayBuffer,Q=u.DataView,Z=M(0),ee=M(2),te=M(3),ne=M(4),re=M(5),ie=M(6),oe=I(!0),ae=I(!1),se=D.values,ue=D.keys,ce=D.entries,le=X.lastIndexOf,fe=X.reduce,de=X.reduceRight,he=X.join,pe=X.sort,ve=X.slice,ge=X.toString,ye=X.toLocaleString,me=C("iterator"),_e=C("toStringTag"),be=P("typed_constructor"),Ee=P("def_constructor"),Se=s.CONSTR,we=s.TYPED,Te=s.VIEW,Oe="Wrong length!",ke=M(1,function(e,t){return Ie(A(e,e[Ee]),t)}),xe=o(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),Pe=!!W&&!!W[z].set&&o(function(){new W(1).set({})}),Ce=function(e,t){var n=p(e);if(n<0||n%t)throw H("Wrong offset!");return n},Me=function(e){if(E(e)&&we in e)return e;throw G(e+" is not a typed array!")},Ie=function(e,t){if(!(E(e)&&be in e))throw G("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return De(A(e,e[Ee]),t)},De=function(e,t){for(var n=0,r=t.length,i=Ie(e,r);r>n;)i[n]=t[n++];return i},Ne=function(e,t,n){K(e,t,{get:function(){return this._d[n]}})},Re=function(e){var t,n,r,i,o,a,s=S(e),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,d=x(s);if(void 0!=d&&!w(d)){for(a=d.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(f&&u>2&&(l=c(l,arguments[2],2)),t=0,n=v(s.length),i=Ie(this,n);n>t;t++)i[t]=f?l(s[t],t):s[t];return i},je=function(){for(var e=0,t=arguments.length,n=Ie(this,t);t>e;)n[e]=arguments[e++];return n},Le=!!W&&o(function(){ye.call(new W(1))}),Ue=function(){return ye.apply(Le?ve.call(Me(this)):Me(this),arguments)},Fe={copyWithin:function(e,t){return U.call(Me(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return ne(Me(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return L.apply(Me(this),arguments)},filter:function(e){return Ae(this,ee(Me(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return re(Me(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ie(Me(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Z(Me(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ae(Me(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return oe(Me(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return he.apply(Me(this),arguments)},lastIndexOf:function(e){return le.apply(Me(this),arguments)},map:function(e){return ke(Me(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(Me(this),arguments)},reduceRight:function(e){return de.apply(Me(this),arguments)},reverse:function(){for(var e,t=this,n=Me(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return te(Me(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return pe.call(Me(this),e)},subarray:function(e,t){var n=Me(this),r=n.length,i=y(e,r);return new(A(n,n[Ee]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===t?r:y(t,r))-i))}},Be=function(e,t){return Ae(this,ve.call(Me(this),e,t))},Ke=function(e){Me(this);var t=Ce(arguments[1],1),n=this.length,r=S(e),i=v(r.length),o=0;if(i+t>n)throw H(Oe);for(;o<i;)this[t+o]=r[o++]},Ve={entries:function(){return ce.call(Me(this))},keys:function(){return ue.call(Me(this))},values:function(){return se.call(Me(this))}},He=function(e,t){return E(e)&&e[we]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ge=function(e,t){return He(e,t=m(t,!0))?f(2,e[t]):V(e,t)},We=function(e,t,n){return!(He(e,t=m(t,!0))&&E(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?K(e,t,n):(e[t]=n.value,e)};Se||(B.f=Ge,F.f=We),a(a.S+a.F*!Se,"Object",{getOwnPropertyDescriptor:Ge,defineProperty:We}),o(function(){ge.call({})})&&(ge=ye=function(){return he.call(this)});var qe=h({},Fe);h(qe,Ve),d(qe,me,Ve.values),h(qe,{slice:Be,set:Ke,constructor:function(){},toString:ge,toLocaleString:Ue}),Ne(qe,"buffer","b"),Ne(qe,"byteOffset","o"),Ne(qe,"byteLength","l"),Ne(qe,"length","e"),K(qe,_e,{get:function(){return this[we]}}),e.exports=function(e,t,n,u){u=!!u;var c=e+(u?"Clamped":"")+"Array",f="get"+e,h="set"+e,p=i[c],y=p||{},m=p&&O(p),_=!p||!s.ABV,S={},w=p&&p[z],x=function(e,n){var r=e._d;return r.v[f](n*t+r.o,xe)},P=function(e,n,r){var i=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[h](n*t+i.o,r,xe)},C=function(e,t){K(e,t,{get:function(){return x(this,t)},set:function(e){return P(this,t,e)},enumerable:!0})};_?(p=n(function(e,n,r,i){l(e,p,c,"_d");var o,a,s,u,f=0,h=0;if(E(n)){if(!(n instanceof $||(u=b(n))==q||u==J))return we in n?De(p,n):Re.call(p,n);o=n,h=Ce(r,t);var y=n.byteLength;if(void 0===i){if(y%t)throw H(Oe);if(a=y-h,a<0)throw H(Oe)}else if(a=v(i)*t,a+h>y)throw H(Oe);s=a/t}else s=g(n),a=s*t,o=new $(a);for(d(e,"_d",{b:o,o:h,l:a,e:s,v:new Q(o)});f<s;)C(e,f++)}),w=p[z]=T(qe),d(w,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&R(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=n(function(e,n,r,i){l(e,p,c);var o;return E(n)?n instanceof $||(o=b(n))==q||o==J?void 0!==i?new y(n,Ce(r,t),i):void 0!==r?new y(n,Ce(r,t)):new y(n):we in n?De(p,n):Re.call(p,n):new y(g(n))}),Z(m!==Function.prototype?k(y).concat(k(m)):k(y),function(e){e in p||d(p,e,y[e])}),p[z]=w,r||(w.constructor=p));var M=w[me],I=!!M&&("values"==M.name||void 0==M.name),A=Ve.values;d(p,be,!0),d(w,we,c),d(w,Te,!0),d(w,Ee,p),(u?new p(1)[_e]==c:_e in w)||K(w,_e,{get:function(){return c}}),S[c]=p,a(a.G+a.W+a.F*(p!=y),S),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o(function(){y.of.call(p,1)}),c,{from:Re,of:je}),Y in w||d(w,Y,t),a(a.P,c,Fe),j(c),a(a.P+a.F*Pe,c,{set:Ke}),a(a.P+a.F*!I,c,Ve),r||w.toString==ge||(w.toString=ge),a(a.P+a.F*o(function(){new p(1).slice()}),c,{slice:Be}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){w.toLocaleString.call([1,2])})),c,{toLocaleString:Ue}),N[c]=I?M:A,r||I||d(w,me,A)}}else e.exports=function(){}},function(e,t,n){n(235)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(235)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){n(235)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(235)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(235)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(235)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(235)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(235)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){var r=n(8),i=n(24),o=n(12),a=(n(4).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(7)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),u=o(n);return a?a(r,t,u):s.call(r,t,u)}})},function(e,t,n){var r=n(8),i=n(47),o=n(24),a=n(12),s=n(13),u=n(7),c=n(77),l=(n(4).Reflect||{}).construct,f=u(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),d=!u(function(){l(function(){})});r(r.S+r.F*(f||d),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var u=n.prototype,h=i(s(u)?u:Object.prototype),p=Function.apply.call(e,h,t);return s(p)?p:h}})},function(e,t,n){var r=n(11),i=n(8),o=n(12),a=n(16);i(i.S+i.F*n(7)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(8),i=n(52).f,o=n(12);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(8),i=n(12),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(131)(o,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:void 0,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){function r(e,t){var n,s,l=arguments.length<3?e:arguments[2];return c(e)===l?e[t]:(n=i.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:u(s=o(e))?r(s,t,l):void 0}var i=n(52),o=n(59),a=n(5),s=n(8),u=n(13),c=n(12);s(s.S,"Reflect",{get:r})},function(e,t,n){var r=n(52),i=n(8),o=n(12);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(8),i=n(59),o=n(12);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(8);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(8),i=n(12),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(8);r(r.S,"Reflect",{ownKeys:n(255)})},function(e,t,n){var r=n(51),i=n(43),o=n(12),a=n(4).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(8),i=n(12),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){function r(e,t,n){var u,d,h=arguments.length<4?e:arguments[3],p=o.f(l(e),t);if(!p){if(f(d=a(e)))return r(d,t,n,h);p=c(0)}if(s(p,"value")){if(p.writable===!1||!f(h))return!1;if(u=o.f(h,t)){if(u.get||u.set||u.writable===!1)return!1;u.value=n,i.f(h,t,u)}else i.f(h,t,c(0,n));return!0}return void 0!==p.set&&(p.set.call(h,n),!0)}var i=n(11),o=n(52),a=n(59),s=n(5),u=n(8),c=n(17),l=n(12),f=n(13);u(u.S,"Reflect",{set:r})},function(e,t,n){var r=n(8),i=n(73);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(8),i=n(37)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(188)("includes")},function(e,t,n){"use strict";var r=n(8),i=n(261),o=n(46),a=n(38),s=n(24),u=n(175);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=u(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(188)("flatMap")},function(e,t,n){"use strict";function r(e,t,n,c,l,f,d,h){for(var p,v,g=l,y=0,m=!!d&&s(d,h,3);y<c;){if(y in n){if(p=m?m(n[y],y,t):n[y],v=!1,o(p)&&(v=p[u],v=void 0!==v?!!v:i(p)),v&&f>0)g=r(e,t,p,a(p.length),g,f-1)-1;else{if(g>=9007199254740991)throw TypeError();e[g]=p}g++}y++}return g}var i=n(45),o=n(13),a=n(38),s=n(23),u=n(27)("isConcatSpreadable");e.exports=r},function(e,t,n){"use strict";var r=n(8),i=n(261),o=n(46),a=n(38),s=n(39),u=n(175);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=a(t.length),r=u(t,0);return i(r,t,t,n,0,void 0===e?1:s(e)),r}}),n(188)("flatten")},function(e,t,n){"use strict";var r=n(8),i=n(128)(!0);r(r.P,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(8),i=n(265),o=n(218),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){var r=n(38),i=n(91),o=n(36);e.exports=function(e,t,n,a){var s=String(o(e)),u=s.length,c=void 0===n?" ":String(n),l=r(t);if(l<=u||""==c)return s;var f=l-u,d=i.call(c,Math.ceil(f/c.length));return d.length>f&&(d=d.slice(0,f)),a?d+s:s+d}},function(e,t,n){"use strict";var r=n(8),i=n(265),o=n(218),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(83)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(83)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var r=n(8),i=n(36),o=n(38),a=n(135),s=n(198),u=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};n(131)(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in u?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new c(r,t)}})},function(e,t,n){n(29)("asyncIterator")},function(e,t,n){n(29)("observable")},function(e,t,n){var r=n(8),i=n(255),o=n(33),a=n(52),s=n(165);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),u=a.f,c=i(r),l={},f=0;c.length>f;)n=u(r,t=c[f++]),void 0!==n&&s(l,t,n);return l}})},function(e,t,n){var r=n(8),i=n(274)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(6),i=n(31),o=n(33),a=n(44).f;e.exports=function(e){return function(t){for(var n,s=o(t),u=i(s),c=u.length,l=0,f=[];c>l;)n=u[l++],r&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}}},function(e,t,n){var r=n(8),i=n(274)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(8),i=n(46),o=n(24),a=n(11);n(6)&&r(r.P+n(277),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";e.exports=n(22)||!n(7)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(4)[e]})},function(e,t,n){"use strict";var r=n(8),i=n(46),o=n(24),a=n(11);n(6)&&r(r.P+n(277),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(8),i=n(46),o=n(16),a=n(59),s=n(52).f;n(6)&&r(r.P+n(277),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do if(t=s(n,r))return t.get;while(n=a(n))}})},function(e,t,n){"use strict";var r=n(8),i=n(46),o=n(16),a=n(59),s=n(52).f;n(6)&&r(r.P+n(277),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do if(t=s(n,r))return t.set;while(n=a(n))}})},function(e,t,n){var r=n(8);r(r.P+r.R,"Map",{toJSON:n(282)("Map")})},function(e,t,n){var r=n(75),i=n(283);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(213);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){var r=n(8);r(r.P+r.R,"Set",{toJSON:n(282)("Set")})},function(e,t,n){n(286)("Map")},function(e,t,n){"use strict";var r=n(8);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(286)("Set")},function(e,t,n){n(286)("WeakMap")},function(e,t,n){n(286)("WeakSet")},function(e,t,n){n(291)("Map")},function(e,t,n){"use strict";var r=n(8),i=n(24),o=n(23),a=n(213);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){n(291)("Set")},function(e,t,n){n(291)("WeakMap")},function(e,t,n){n(291)("WeakSet")},function(e,t,n){var r=n(8);r(r.G,{global:n(4)})},function(e,t,n){var r=n(8);r(r.S,"System",{global:n(4)})},function(e,t,n){var r=n(8),i=n(35);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){var r=n(8);r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var r=n(8);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var r=n(8),i=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*i}})},function(e,t,n){var r=n(8),i=n(302),o=n(114);r(r.S,"Math",{fscale:function(e,t,n,r,a){return o(i(e,t,n,r,a))}})},function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-(1/0)?e:(e-t)*(i-r)/(n-t)+r}},function(e,t,n){var r=n(8);r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(e,t,n){var r=n(8);r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(e,t,n){var r=n(8);r(r.S,"Math",{imulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>16,u=i>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>16)+((o*u>>>0)+(c&n)>>16)}})},function(e,t,n){var r=n(8);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var r=n(8),i=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*i}})},function(e,t,n){var r=n(8);r(r.S,"Math",{scale:n(302)})},function(e,t,n){var r=n(8);r(r.S,"Math",{umulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>>16,u=i>>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>>16)+((o*u>>>0)+(c&n)>>>16)}})},function(e,t,n){var r=n(8);r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){"use strict";var r=n(8),i=n(9),o=n(4),a=n(210),s=n(219);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(8),i=n(216),o=n(217);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(314),i=n(12),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},function(e,t,n){var r=n(221),i=n(8),o=n(21)("metadata"),a=o.store||(o.store=new(n(226))),s=function(e,t,n){var i=a.get(e);if(!i){if(!n)return;a.set(e,i=new r)}var o=i.get(t);if(!o){if(!n)return;i.set(t,o=new r)}return o},u=function(e,t,n){var r=s(t,n,!1);return void 0!==r&&r.has(e)},c=function(e,t,n){var r=s(t,n,!1);return void 0===r?void 0:r.get(e)},l=function(e,t,n,r){s(n,r,!0).set(e,t)},f=function(e,t){var n=s(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},d=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},h=function(e){i(i.S,"Reflect",e)};e.exports={store:a,map:s,has:u,get:c,set:l,keys:f,key:d,exp:h}},function(e,t,n){var r=n(314),i=n(12),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var u=s.get(t);return u.delete(n),!!u.size||s.delete(t)}})},function(e,t,n){var r=n(314),i=n(12),o=n(59),a=r.has,s=r.get,u=r.key,c=function(e,t,n){var r=a(e,t,n);if(r)return s(e,t,n);var i=o(t);return null!==i?c(e,i,n):void 0};r.exp({getMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,n){var r=n(225),i=n(283),o=n(314),a=n(12),s=n(59),u=o.keys,c=o.key,l=function(e,t){var n=u(e,t),o=s(e);if(null===o)return n;var a=l(o,t);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(e){return l(a(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,n){var r=n(314),i=n(12),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(314),i=n(12),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var r=n(314),i=n(12),o=n(59),a=r.has,s=r.key,u=function(e,t,n){var r=a(e,t,n);if(r)return!0;var i=o(t);return null!==i&&u(e,i,n)};r.exp({hasMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(314),i=n(12),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(314),i=n(12),o=n(24),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:o)(n),a(r))}}})},function(e,t,n){var r=n(8),i=n(215)(),o=n(4).process,a="process"==n(35)(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";var r=n(8),i=n(4),o=n(9),a=n(215)(),s=n(27)("observable"),u=n(24),c=n(12),l=n(212),f=n(220),d=n(10),h=n(213),p=h.RETURN,v=function(e){return null==e?void 0:u(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},y=function(e){return void 0===e._o},m=function(e){y(e)||(e._o=void 0,g(e))},_=function(e,t){c(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(t){return void e.error(t)}y(this)&&g(this)};_.prototype=f({},{unsubscribe:function(){m(this)}});var b=function(e){this._s=e};b.prototype=f({},{next:function(e){var t=this._s;if(!y(t)){var n=t._o;try{var r=v(n.next);if(r)return r.call(n,e)}catch(e){try{m(t)}finally{throw e}}}},error:function(e){var t=this._s;if(y(t))throw e;var n=t._o;t._o=void 0;try{var r=v(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!y(t)){var n=t._o;t._o=void 0;try{var r=v(n.complete);e=r?r.call(n,e):void 0}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var E=function(e){l(this,E,"Observable","_f")._f=u(e)};f(E.prototype,{subscribe:function(e){return new _(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)(function(n,r){u(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})})}}),f(E,{from:function(e){var t="function"==typeof this?this:E,n=v(c(e)[s]);if(n){var r=c(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return a(function(){if(!n){try{if(h(e,!1,function(e){if(t.next(e),n)return p})===p)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:E)(function(e){var t=!1;return a(function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}}),function(){t=!0}})}}),d(E.prototype,s,function(){return this}),r(r.G,{Observable:E}),n(194)("Observable")},function(e,t,n){var r=n(4),i=n(8),o=n(218),a=[].slice,s=/MSIE .\./.test(o),u=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){var r=n(8),i=n(214);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(195),i=n(31),o=n(18),a=n(4),s=n(10),u=n(130),c=n(27),l=c("iterator"),f=c("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),v=0;v<p.length;v++){var g,y=p[v],m=h[y],_=a[y],b=_&&_.prototype;if(b&&(b[l]||s(b,l,d),b[f]||s(b,f,y),u[y]=d,m))for(g in r)b[g]||o(b,g,r[g],!0)}},function(e,t){(function(t){!function(t){"use strict";function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new h(r||[]);return a._invoke=c(e,n,s),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function n(t,i,o,a){var s=r(e[t],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&m.call(c,"__await")?Promise.resolve(c.__await).then(function(e){n("next",e,o,a)},function(e){n("throw",e,o,a)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},a)}a(s.arg)}function i(e,t){function r(){return new Promise(function(r,i){n(e,t,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n));var o;this._invoke=i}function c(e,t,n){var i=O;return function(o,a){if(i===x)throw new Error("Generator is already running");if(i===P){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===C)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===O)throw i=P,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=x;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?P:k,c.arg===C)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=P,n.method="throw",n.arg=c.arg)}}}function l(e,t){var n=e.iterator[t.method];if(n===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,l(e,t),"throw"===t.method))return C;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,C;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,C):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,C)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return r.next=r}}return{next:v}}function v(){return{value:g,done:!0}}var g,y=Object.prototype,m=y.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",E=_.asyncIterator||"@@asyncIterator",S=_.toStringTag||"@@toStringTag",w="object"==typeof e,T=t.regeneratorRuntime;if(T)return void(w&&(e.exports=T));T=t.regeneratorRuntime=w?e.exports:{},T.wrap=n;var O="suspendedStart",k="suspendedYield",x="executing",P="completed",C={},M={};M[b]=function(){return this};var I=Object.getPrototypeOf,A=I&&I(I(p([])));A&&A!==y&&m.call(A,b)&&(M=A);var D=a.prototype=i.prototype=Object.create(M);o.prototype=D.constructor=a,a.constructor=o,a[S]=o.displayName="GeneratorFunction",T.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,S in e||(e[S]="GeneratorFunction")),e.prototype=Object.create(D),e},T.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[E]=function(){return this},T.AsyncIterator=u,T.async=function(e,t,r,i){var o=new u(n(e,t,r,i));return T.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(D),D[S]="Generator",D[b]=function(){return this},D.toString=function(){return"[object Generator]"},T.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},T.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,C):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),C},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),C}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=g),C}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},function(e,t,n){n(330),e.exports=n(9).RegExp.escape},function(e,t,n){var r=n(8),i=n(331)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(1);var s=n(333),u=i(s),c=n(334),l=i(c),f=n(338),d=i(f),h=n(339),p=i(h),v=n(335),g=i(v),y=n(340),m=i(y),_=n(341),b=r(_),E=n(344),S=r(E),w=n(346),T=r(w),O=n(345),k=r(O),x=n(348),P=r(x),C=n(351),M=r(C),I=n(353),A=r(I),D=n(356),N=r(D),R=n(357),j=r(R),L=n(360),U=r(L),F=n(362),B=r(F),K=n(363),V=r(K),H=n(336),G=r(H),W=n(364),q=r(W),J=n(365),Y=r(J),z=n(369),X=r(z),$=n(370),Q=r($),Z=n(371),ee=r(Z),te=n(375),ne=r(te),re=n(376),ie=r(re),oe=n(377),ae=r(oe),se=n(378),ue=r(se),ce=n(380),le=r(ce),fe=n(382),de=r(fe),he=n(385),pe=r(he),ve=n(387),ge=r(ve),ye=n(388),me=r(ye),_e=n(393),be=r(_e),Ee=n(394),Se=r(Ee),we=n(395),Te=r(we),Oe=n(398),ke=r(Oe),xe=n(366),Pe=i(xe),Ce=n(400),Me=r(Ce),Ie=n(402),Ae=r(Ie),De=n(367),Ne=r(De),Re=n(404),je=r(Re),Le=[{key:"loadstart",callback:"onLoadStart"},{key:"progress",callback:"onProgress"},{key:"loadedmetadata",callback:"onLoadedMetadata"},{key:"playing",callback:"onPlaying"},{key:"seeking",callback:"onSeeking",capture:!0},{key:"seeked",
callback:"onSeeked"},{key:"ended",callback:"onEnded"},{key:"durationchange",callback:"onDurationChange"},{key:"timeupdate",callback:"onTimeUpdate"},{key:"play",callback:"onPlay"},{key:"pause",callback:"onPause"},{key:"abort",callback:"onAbort"},{key:"error",callback:"onError"}],Ue=null,Fe=function(){function e(t){var n=this;if(o(this,e),Ue)d.log(this,"reusing CMSDK instance"),console.dir(this);else{if(Ue=this,this.polyfillManager=new G.default,this.configurationOriginal=t,l.APP_CODE=t.appCode,l.PARTNER_ID=t.partnerId,l.ID_NAMESPACE=t.idNamespace?t.idNamespace:"",l.APP_VER=t.appVersion?t.appVersion:l.APP_VER,l.ALLOW_GEO_LOCATION=void 0!==t.allowGeoLocation?t.allowGeoLocation:l.ALLOW_GEO_LOCATION,l.ALLOW_WEB_PUSH=void 0!==t.enablePush?t.enablePush:l.ALLOW_WEB_PUSH,l.CMSDK_SERVICE_WORKER_FOLDER=void 0!==t.serviceWorkerFolder?t.serviceWorkerFolder:l.CMSDK_SERVICE_WORKER_FOLDER,l.APPLICATION_SERVER_PUB_KEY=t.webPushPublicKey?t.webPushPublicKey:l.APPLICATION_SERVER_PUB_KEY,l.CMSDK_INBOX_ENABLE=void 0!==t.enableInbox?t.enableInbox:l.CMSDK_INBOX_ENABLE,l.CMSDK_REFERRER_TAGGING_ENABLE=void 0!==t.reportReferrer?t.reportReferrer:l.CMSDK_REFERRER_TAGGING_ENABLE,l.CMSDK_ENABLE_READING_CAMPAIGN_LIST=void 0!==t.enableReadingCampaignList?t.enableReadingCampaignList:l.CMSDK_ENABLE_READING_CAMPAIGN_LIST,l.CMSDK_INCLUDE_RECOMMENDATION_PROFILE=void 0!==t.includeRecommendationProfile?t.includeRecommendationProfile:l.CMSDK_INCLUDE_RECOMMENDATION_PROFILE,t.uninterruptedPlayInterval?l.UNINTERRUPTED_PLAY_INTERVAL_MS=1e3*+t.uninterruptedPlayInterval:t.uninterrupedPlayInterval&&(l.UNINTERRUPTED_PLAY_INTERVAL_MS=1e3*+t.uninterrupedPlayInterval),t.idleTimeout&&(l.IDLE_TIMEOUT_MS=1e3*+t.idleTimeout),t.referrerTimeOfLifeHours&&(l.LAST_REFERRER_TOL=3600*+t.referrerTimeOfLifeHours*1e3),t.inboxPageSize&&(l.CMSDK_INBOX_PAGE_SIZE=+t.inboxPageSize),t.maxNumberOfCachedEvents){var r=+t.maxNumberOfCachedEvents;r>=1&&(l.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS=r)}l.IDLE_TIMEOUT_MS<=l.UNINTERRUPTED_PLAY_INTERVAL_MS&&(console.log("Invalid configuration detected: idleTimeout="+t.idleTimeout+" MUST be less than uninterrupedPlayInterval="+t.uninterrupedPlayInterval),l.IDLE_TIMEOUT_MS=l.UNINTERRUPTED_PLAY_INTERVAL_MS,l.UNINTERRUPTED_PLAY_INTERVAL_MS=Math.max(l.IDLE_TIMEOUT_MS-5e3,1e3));var i="0.47.3";i&&i.length>0&&(l.SDK_VER=i),g.setHeader(u.SERVER+"_"),this.dbManager=new me.default(this),this.interTabCommManager=new Te.default(this),this.interTabCommManager.setup(),g.setLogHeader("<["+this.interTabCommManager.tabId+"]>"),this.eventReportingManager=new Se.default(this),this.eventManager=new be.default(this),this.waitForSilentUser=!1,this.uuid=e.readOrCreateUuid(),this.subscribers=[],this.storedConsumptionEvent=null,this.jwPlayerManagers={},this.html5VideoManagers={},this.ooyalaPlayerManagers={},this.genericPlayerManagers={},this.idleControlManager=null,this.pushManager=null,this.referrerManager=null,this.inboxManager=new Q.default(this),this.sessionCreatorManager=null,this.sessionSilentCreatorManager=null,this.userSetManager=new pe.default(this),this.appConfigManager=new ke.default(this),this.configurationParsed=l,d.log(this,"server: "+u.SERVER),d.log(this,"this.configurationParsed:"),console.dir(this.configurationParsed),window.addEventListener("beforeunload",function(){n._onUnload()},!1),window.addEventListener("unload",function(){n._onUnload()},!1),this._checkInstantiateIdleControlManager(),this._checkInstantiatePushManager(),setTimeout(function(){d.log(n,"setTimeout->_checkInboxManager"),n._checkInboxManager()},1500)}return console.log("serviceWorkerFolder:"+l.CMSDK_SERVICE_WORKER_FOLDER),l.CMSDK_REFERRER_TAGGING_ENABLE?(console.log("document.referrer:"+document.referrer),console.log("x-cm-referrer:"+e._getQueryParameter("x-cm-referrer")),console.log("domain:"+document.domain),l.saveReferrer(l,document.referrer,e._getQueryParameter("x-cm-referrer"))&&(null===this.referrerManager&&(this.referrerManager=new X.default(this)),this.referrerManager.markNeedToSendTags(l))):console.log("CMSDK_REFERRER_TAGGING_ENABLE: false"),Ue}return a(e,null,[{key:"readOrCreateUuid",value:function(){var e=g.getCookie(l.CMSDK_UUID_COOKIES);return console.log("getCookie: "+l.CMSDK_UUID_COOKIES+"="+e),void 0!==e&&0!==e.length||(e=g.getRealCookie(l.CMSDK_UUID_COOKIES),console.log("getRealCookie: "+l.CMSDK_UUID_COOKIES+"="+e),void 0!==e&&0!==e.length||(e=p.UUID.generate(),g.setRealCookie(l.CMSDK_UUID_COOKIES,e)),g.setCookie(l.CMSDK_UUID_COOKIES,e),console.log("setCookie: "+l.CMSDK_UUID_COOKIES+"="+e)),e}}]),a(e,[{key:"register",value:function(e,t,n){var r=this;return d.log(this,"register "+e+" extraData="+JSON.stringify(t)+" deviceExtraData="+JSON.stringify(n)),l.isInCompileTimeDisabledMode()?void d.log(this,"SDK is disabled (compile-time option)"):(this._internalUnsetUser(),l.isValidActiveSessionId()?(this.appConfigManager.start(),void setTimeout(function(){d.log(r,"setTimeout->after register"),l.isInRuntimeTimeDisabledMode()||(r.eventManager.reportAllStoredEvents(),l.CMSDK_INCLUDE_RECOMMENDATION_PROFILE&&r.appConfigManager.readRecoProfile())},1500)):(this.waitForSilentUser=null!==e&&e,l.isInRuntimeTimeDisabledMode()||new b.default(this).execute(),l.shouldRequestThrottling()?void this.appConfigManager.start(e,t,n):(this.appConfigManager.start(),void this._register(e,t,n))))}},{key:"setSilentUser",value:function(e){return d.log(this,"setSilentUser: "+e),l.isInCompileTimeDisabledMode()?void d.log(this,"SDK is disabled (compile-time option)"):void(this.waitForSilentUser&&void 0!==e&&0!==e.length&&(l.setExternalSilentUser(e),this._isSdkDelayedByAppConfig()||this._shouldWaitForSilentUser()||this._register()))}},{key:"_isSdkDelayedByAppConfig",value:function(){return this.appConfigManager.isRequestingThrottling()?(d.log(this,"SDK is fetching blocking PartnerAppConfig"),!0):!(l.isValidActiveSessionId()||!l.shouldThrottleRegistration())&&(d.log(this,"SDK registration is throttled by PartnerAppConfig"),!0)}},{key:"_onBlockingAppConfigFetched",value:function(e,t,n){if(l.isInCompileOrRunTimeDisabledMode())return void d.log(this,"SDK is disabled");if(e&&this.waitForSilentUser){var r=l.getExternalSilentUser();if(r&&r.length>0)return void this.setSilentUser(r)}this._register(e,t,n)}},{key:"_onTimeoutThrottledRegistration",value:function(e,t,n){return l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):(d.log(this,"SDK registration is throttled by PartnerAppConfig, _onTimeoutThrottledRegistration!"),void this._onBlockingAppConfigFetched(e,t,n))}},{key:"setUser",value:function(e,t,n,r,i,o){return d.log(this,"cmsdk.setUser "+e+" sT="+t+" extraData="+JSON.stringify(n)+" mD="+r+" p="+i+" isCP="+o),l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(this._isSdkDelayedByAppConfig()||this._shouldWaitForSilentUser()||this.userSetManager.setUser(e,t,n,r,i,o))}},{key:"unsetUser",value:function(){return d.log(this,"cmsdk.unsetUser"),l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(this._isSdkDelayedByAppConfig()||(this.eventManager.reportAllStoredEvents(),this._internalUnsetUser(),l.CMSDK_INCLUDE_RECOMMENDATION_PROFILE&&(l.setForceUpdateRecoProfile(),this.appConfigManager.readRecoProfile())))}},{key:"updateUserExtraData",value:function(e){return l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(this._isSdkDelayedByAppConfig()||e&&(this._shouldWaitForSilentUser()||this.userSetManager.updateUserExtraData(e)))}},{key:"onNewPushToken",value:function(e){var t=m.default(e);l.checkWebPushTokenHashChanged(t)?new Ne.default(this,e).execute():console.log("onNewPushToken: webPush token has not changed")}},{key:"reportAppEvent",value:function(e,t){return l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(this._isSdkDelayedByAppConfig()||this.eventManager.reportAppEvent(new P.default(e,t)))}},{key:"reportMediaEvent",value:function(e,t,n,r){if(l.isInCompileOrRunTimeDisabledMode())return d.log(this,"SDK is disabled"),!1;if(this._isSdkDelayedByAppConfig())return!1;if(!e||0===e.length||"0"===e||0===e)return d.log(this,"MediaEvent: Invalid mediaId="+e+", no event will be reported"),!1;try{var i=new M.default(e,t,n,r);this.eventManager.reportMediaEvent(i)}catch(e){console.log(e)}return!0}},{key:"createConsumerTag",value:function(e,t){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),!1):!this._isSdkDelayedByAppConfig()&&(l.isValidActiveSessionId()?(new A.default(e,t).report(this),!0):(d.log(this,"No session yet"),!1))}},{key:"deleteConsumerTag",value:function(e){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),!1):!this._isSdkDelayedByAppConfig()&&(l.isValidActiveSessionId()?(new N.default(e).report(this),!0):(d.log(this,"No session yet"),!1))}},{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"createConsumptionEvent",value:function(e,t,n,r,i,o,a){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),null):this._isSdkDelayedByAppConfig()?null:(this.eventManager.reportStoredActiveConsumptionEvent(),this.storedConsumptionEvent=new j.default(this,e,t,n,r,i,o,a),this.storedConsumptionEvent)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter(function(t){if(t!==e)return t})}},{key:"_addJwPlayerListener",value:function(e,t,n,r){e.on(t,function(t){n[r](e,t)})}},{key:"setupOoyalaPlayer",value:function(e,t,n,r){var i=void 0,o=e.getElementId(),a=!!r&&r.useAppEvents;this.ooyalaPlayerManagers.hasOwnProperty(o)?(i=this.ooyalaPlayerManagers[o],i.finishStartedEvents(!0),console.log("setupOoyalaPlayer: re-creating new OoyalaPlayerManager for id="+o+",config="+JSON.stringify(r)),i=new B.default(this,e,t,n,a,r)):(i=new B.default(this,e,t,n,a,r),console.log("setupOoyalaPlayer: created new OoyalaPlayerManager for id="+o+",config="+JSON.stringify(r))),this.ooyalaPlayerManagers[o]=i,i.setup()}},{key:"setupJwPlayer",value:function(e,t,n,r){var i=void 0;this.jwPlayerManagers.hasOwnProperty(e.id)?(i=this.jwPlayerManagers[e.id],i.finishStartedEvents(!0),console.log("setupJwPlayer: re-creating new JwPlayerManager for id="+e.id+",config="+JSON.stringify(r)),i=new U.default(this,e.id,t,n,r)):(i=new U.default(this,e.id,t,n,r),console.log("setupJwPlayer: created new JwPlayerManager for id="+e.id+",config="+JSON.stringify(r))),this.jwPlayerManagers[e.id]=i,this._addJwPlayerListener(e,"ready",i,"onReady"),this._addJwPlayerListener(e,"playlist",i,"onPlaylistLoaded"),this._addJwPlayerListener(e,"play",i,"onPlay"),this._addJwPlayerListener(e,"time",i,"onTime"),this._addJwPlayerListener(e,"complete",i,"onComplete"),this._addJwPlayerListener(e,"pause",i,"onPause"),this._addJwPlayerListener(e,"seek",i,"onSeeked"),this._addJwPlayerListener(e,"playlistItem",i,"onPlaylistItemIsGoingToChange")}},{key:"_addHtml5MediaPlayerListener",value:function(e,t,n,r,i){e.addEventListener(t,n.addCreatedCallback(t,function(t){n[r](e,t)}),i)}},{key:"_removeHtml5MediaPlayerListener",value:function(e,t,n,r,i){var o=n.getCreatedCallback(t);o&&e.removeEventListener(t,o,i)}},{key:"resetHtml5MediaPlayer",value:function(e){var t=e.id;if(!t&&e.config&&(t=e.config.id),this.html5VideoManagers.hasOwnProperty(t)){d.log(this,"resetHtml5MediaPlayer: id="+t),l.DEBUG_LOCAL_SESSION_STORAGES&&l.printLocalAndSessionStorage(this);var n=this.html5VideoManagers[t];this.html5VideoManagers[t]=void 0,n.finishStartedEvents(!0);var r=!0,i=!1,o=void 0;try{for(var a,s=Le[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;this._removeHtml5MediaPlayerListener(e,u.key,n,u.callback,void 0!==u.capture&&u.capture)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}else d.log(this,"resetHtml5MediaPlayer: not found manager for id="+t)}},{key:"setupHtml5MediaPlayer",value:function(e,t,n,r,i){var o=e.id;!o&&e.config&&(o=e.config.id),l.DEBUG_HTML5_APP_EVENTS&&this.reportAppEvent("setupHtml5MediaPlayer",{playerId:o}),this.html5VideoManagers.hasOwnProperty(o)&&this.resetHtml5MediaPlayer(e),d.log(this,"setupHtml5MediaPlayer: creating new Html5MediaPlayerManager for id="+o+",config="+JSON.stringify(i)),l.DEBUG_LOCAL_SESSION_STORAGES&&l.printLocalAndSessionStorage(this);var a=new q.default(this,o,t,n,r,i);this.html5VideoManagers[o]=a;var s=!0,u=!1,c=void 0;try{for(var f,h=Le[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;this._addHtml5MediaPlayerListener(e,p.key,a,p.callback,void 0!==p.capture&&p.capture)}}catch(e){u=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw c}}}},{key:"_addVideoJsMediaPlayerListener",value:function(e,t,n,r,i){e.on(t,n.addCreatedCallback(t,function(t){n[r](e,t)}))}},{key:"_removeVideoJsMediaPlayerListener",value:function(e,t,n,r,i){var o=n.getCreatedCallback(t);o&&e.off(t,o)}},{key:"resetVideoJsMediaPlayer",value:function(e){var t=e.id_;if(this.html5VideoManagers.hasOwnProperty(t)){d.log(this,"resetVideoJsMediaPlayer: id="+t),l.DEBUG_LOCAL_SESSION_STORAGES&&l.printLocalAndSessionStorage(this);var n=this.html5VideoManagers[t];this.html5VideoManagers[t]=void 0,n.finishStartedEvents(!0);var r=!0,i=!1,o=void 0;try{for(var a,s=Le[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;this._removeVideoJsMediaPlayerListener(e,u.key,n,u.callback,void 0!==u.capture&&u.capture)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}else d.log(this,"resetVideoJsMediaPlayer: not found manager for id="+t)}},{key:"setupVideoJsMediaPlayer",value:function(e,t,n,r,i){var o=e.id_;this.html5VideoManagers.hasOwnProperty(o)&&this.resetVideoJsMediaPlayer(e),d.log(this,"setupVideoJsMediaPlayer: creating new Html5MediaPlayerManager for id="+o+",config="+JSON.stringify(i)),l.DEBUG_LOCAL_SESSION_STORAGES&&l.printLocalAndSessionStorage(this);var a=new q.default(this,o,t,n,r,i);this.html5VideoManagers[o]=a;var s=!0,u=!1,c=void 0;try{for(var f,h=Le[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;this._addVideoJsMediaPlayerListener(e,p.key,a,p.callback,void 0!==p.capture&&p.capture)}}catch(e){u=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw c}}}},{key:"setupLogixMediaPlayerIntegration",value:function(t,n,r,i,o){var a=e._findKeyByPlayerInstance(this.genericPlayerManagers,t);a&&this.genericPlayerManagers.hasOwnProperty(a)&&this.stopLogixMediaPlayerIntegration(t),a||(a=p.UUID_short.generate()),d.log(this,"setupLogixMediaPlayerIntegration: creating new GenericPlayerManager for mediaId="+n+",config="+JSON.stringify(o));var s=new Ae.default(this,a,n.toString(),r,i,o);this.genericPlayerManagers[a]={cmsdkPlayerManager:s,cmsdkPlayerInstance:t},s.subscribe(t)}},{key:"changeMediaInLogixMediaPlayerIntegration",value:function(e,t,n){this.changeMediaInHtml5GenericMediaPlayerIntegration(e,t.toString(),n)}},{key:"stopLogixMediaPlayerIntegration",value:function(e){this.stopHtml5GenericMediaPlayerIntegration(e)}},{key:"setupHtml5GenericMediaPlayerIntegration",value:function(t,n,r,i,o){var a=e._findKeyByPlayerInstance(this.genericPlayerManagers,t);a&&this.genericPlayerManagers.hasOwnProperty(a)&&this.stopLogixMediaPlayerIntegration(t),a||(a=p.UUID_short.generate()),d.log(this,"setupHtml5GenericMediaPlayerIntegration: creating new GenericPlayerManager for mediaId="+n+",config="+JSON.stringify(o));var s=new je.default(this,a,n.toString(),r,i,o);this.genericPlayerManagers[a]={cmsdkPlayerManager:s,cmsdkPlayerInstance:t},s.subscribe(t)}},{key:"changeMediaInHtml5GenericMediaPlayerIntegration",value:function(t,n,r){var i=e._findKeyByPlayerInstance(this.genericPlayerManagers,t);i&&this.genericPlayerManagers.hasOwnProperty(i)&&(d.log(this,"changeMediaInHtml5GenericMediaPlayerIntegration: id="+i),l.DEBUG_LOCAL_SESSION_STORAGES&&l.printLocalAndSessionStorage(this),this.genericPlayerManagers[i].cmsdkPlayerManager.changeMedia(n.toString(),r))}},{key:"stopHtml5GenericMediaPlayerIntegration",value:function(t){var n=e._findKeyByPlayerInstance(this.genericPlayerManagers,t);n&&this.genericPlayerManagers.hasOwnProperty(n)&&(d.log(this,"stopHtml5GenericMediaPlayerIntegration: id="+n),l.DEBUG_LOCAL_SESSION_STORAGES&&l.printLocalAndSessionStorage(this),this.genericPlayerManagers[n].cmsdkPlayerManager.finishStartedEvents(!0),this.genericPlayerManagers[n].cmsdkPlayerManager.unsubscribe(t),delete this.genericPlayerManagers[n])}},{key:"registerPushDefaultPage",value:function(e){null===this.pushManager&&(this.pushManager=new Y.default(this)),this.pushManager.registerPushDefaultPage(e)}},{key:"registerPushDeepLink",value:function(e,t){null===this.pushManager&&(this.pushManager=new Y.default(this)),this.pushManager.registerPushDeepLink(e,t)}},{key:"fetchInbox",value:function(e,t,n){if(l.isInCompileOrRunTimeDisabledMode())return void d.log(this,"SDK is disabled");if(!this._isSdkDelayedByAppConfig())return l.isValidActiveSessionId()?void(this.inboxManager&&this.inboxManager.fetchInbox(e,t,n)):void n(null)}},{key:"registerInboxRefreshed",value:function(e){return l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(this._isSdkDelayedByAppConfig()||this.inboxManager&&this.inboxManager.registerInboxRefreshed(e))}},{key:"markInboxOpened",value:function(e,t){return l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(this._isSdkDelayedByAppConfig()||l.isValidActiveSessionId()&&this.inboxManager&&this.inboxManager.markInboxOpened(e,t))}},{key:"hasInboxNewMessages",value:function(){return!!this.inboxManager&&this.inboxManager.hasInboxNewMessages()}},{key:"markInboxMessagesOpened",value:function(e,t){return l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(this._isSdkDelayedByAppConfig()||l.isValidActiveSessionId()&&this.inboxManager&&this.inboxManager.markInboxMessagesOpened(e,t))}},{key:"markInboxMessagesDeleted",value:function(e,t){return l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(this._isSdkDelayedByAppConfig()||l.isValidActiveSessionId()&&this.inboxManager&&this.inboxManager.markInboxMessagesDeleted(e,t))}},{key:"fetchRegisteredMediaTags",value:function(e){return l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(this._isSdkDelayedByAppConfig()||new ne.default(this).execute(function(t){console.log("fetchRegisteredMediaTags: "+t),e&&e(t)}))}},{key:"createMediaTag",value:function(e,t,n,r){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),!1):!this._isSdkDelayedByAppConfig()&&(l.isValidActiveSessionId()?e&&0!==e.length&&"0"!==e&&0!==e?(new ie.default(e,t,n,r).report(this),!0):(console.log("Invalid mediaId, no tag will be created"),!1):(d.log(this,"No session yet"),!1))}},{key:"deleteMediaTag",value:function(e,t,n){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),!1):!this._isSdkDelayedByAppConfig()&&(l.isValidActiveSessionId()?(new ae.default(e,t,n).report(this),!0):(d.log(this,"No session yet"),!1))}},{key:"readMediaTag",value:function(e,t){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),void t()):this._isSdkDelayedByAppConfig()?void t():l.isValidActiveSessionId()?void new ue.default(e).execute(this,function(n){console.log("readMediaTag("+e+"):"+JSON.stringify(n)),t&&t(n)}):(d.log(this,"No session yet"),void t())}},{key:"readAllMediaTags",value:function(e,t,n){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),void n()):this._isSdkDelayedByAppConfig()?void n():l.isValidActiveSessionId()?void new le.default(e,t).execute(this,function(e){console.log("readAllMediaTags: "+JSON.stringify(e)),n&&n(e)}):(d.log(this,"No session yet"),void n())}},{key:"readAllMediaTagsForMediaArray",value:function(e,t){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),void t()):this._isSdkDelayedByAppConfig()?void t():l.isValidActiveSessionId()?void new le.default(e).execute(this,function(e){console.log("readAllMediaTags: "+JSON.stringify(e)+"; result.length="+e.length),t&&t(e)}):(d.log(this,"No session yet"),void t())}},{key:"readAllConsumerTags",value:function(e){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),void e()):this._isSdkDelayedByAppConfig()?void e():l.isValidActiveSessionId()?void(new Me.default).execute(this,function(t){console.log("readAllConsumerTags: "+JSON.stringify(t)+"; result.length="+t.length),e&&e(t)}):(d.log(this,"No session yet"),void e())}},{key:"readAllConsumerTagsWithFilter",value:function(e,t){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),void t()):this._isSdkDelayedByAppConfig()?void t():l.isValidActiveSessionId()?void new Me.default(e).execute(this,function(n){console.log("readAllConsumerTagsWithFilter("+JSON.stringify(e)+"): "+JSON.stringify(n)+"; result.length="+(n?n.length:-1)),t&&t(n)}):(d.log(this,"No session yet"),void t())}},{key:"readConsumptionState",value:function(e,t,n){return l.isInCompileOrRunTimeDisabledMode()?(d.log(this,"SDK is disabled"),void n()):this._isSdkDelayedByAppConfig()?void n():l.isValidActiveSessionId()?void new ge.default(this,e,t).execute(function(e){e?console.log("readConsumptionState: "+JSON.stringify(e)+"; result.length="+e.length):console.log("readConsumptionState: null"),n&&n(e)}):(d.log(this,"No session yet"),void n())}},{key:"getRecommendationProfile",value:function(){return l.getRecommendationProfile()}},{key:"setProfile",value:function(e,t){return l.isUserDataActive()?(d.log(this,"setUserProfile: "+e+" isCP="+t),l.setUserProfile(e,t),void this._fireSubscribers(null,this)):(d.log(this,"setSilentUserProfile: "+e+" isCP="+t),l.setSilentUserProfile(e,t),void this._fireSubscribers(null,this))}},{key:"_internalUnsetUser",value:function(){this._getUser()&&l.internalUnsetUser(),this._fireSubscribers(null,this)}},{key:"_fireSubscribers",value:function(e,t){var n=t||window;this.subscribers&&this.subscribers.forEach(function(t){t.call(n,e)})}},{key:"_onDisabledModeTurnedOff",value:function(){d.log(this,"_onDisabledModeTurnedOff"),this._onSessionChanged(null)}},{key:"_onSessionChanged",value:function(e){return l.isValidActiveSessionId()&&e===new T.default(this,!0,null,null).header&&this.userSetManager.hasAutoSetUser()?void this.userSetManager.processAutoSetUser():(l.isValidActiveSessionId()&&e!==new ee.default(this).header&&this.inboxManager&&this.inboxManager.onSessionChanged(),void(l.isValidActiveSessionId()&&(l.CMSDK_STORE_EVENTS_ONLY_WHEN_NO_SESSION&&this.eventManager.reportAllStoredEvents(),this.userSetManager.checkUpdateUserExtraData(),l.CMSDK_INCLUDE_RECOMMENDATION_PROFILE&&this.appConfigManager.readRecoProfile())))}},{key:"_onCommActivity",value:function(e){if(this._checkInstantiateIdleControlManager(),this._checkInstantiatePushManager(),this.idleControlManager){if(e instanceof k.default&&!e.isSdkActivity())return;this.idleControlManager.onSdkActivity()}}},{key:"_onSdkActivity",value:function(){this._checkInstantiateIdleControlManager(),this._checkInstantiatePushManager(),this.idleControlManager&&this.idleControlManager.onSdkActivity()}},{key:"_onCommResponse",value:function(e){this._fireSubscribers(e,this),this._checkInstantiateIdleControlManager(),this._checkInstantiatePushManager(),this._checkReferrerManager(),this._checkInboxManager()}},{key:"_onServerCommand",value:function(e){"10019"!==e&&"10020"!==e||l.isValidActiveSessionId()&&this.inboxManager&&this.inboxManager.fetchOnServerCommand()}},{key:"_checkInstantiateIdleControlManager",value:function(){l.isValidActiveSessionId()&&null===this.idleControlManager&&(this.idleControlManager=new V.default(this),this.idleControlManager.start(),this._onCheckFetchLocation())}},{key:"_checkInstantiatePushManager",value:function(){l.isValidActiveSessionId()?(null===this.pushManager&&(this.pushManager=new Y.default(this)),l.ALLOW_WEB_PUSH?this.pushManager.start():this.pushManager.stop()):d.log(this,"_checkInstantiatePushManager: No session yet")}},{key:"_checkReferrerManager",value:function(){this.referrerManager&&this.referrerManager.checkSendTagsAllowed(l)}},{key:"_checkInboxManager",value:function(){return l.isInCompileOrRunTimeDisabledMode()?void d.log(this,"SDK is disabled"):void(l.isValidActiveSessionId()&&this.inboxManager&&this.inboxManager.fetchInitial())}},{key:"_shouldWaitForSilentUser",value:function(){var e=l.getExternalSilentUser();return this.waitForSilentUser&&(void 0===e||0===e.length)}},{key:"_getSilentUserForRegistration",value:function(){var e=l.getExternalSilentUser();return void 0===e||0===e.length?this.uuid:e}},{key:"_register",value:function(e,t,n){if(l.isSilentlyRegistered())l.isValidActiveSessionId()||this._getSessionCreator(!0).execute();else{if(this._shouldWaitForSilentUser())return;new T.default(this,!0,this._getSilentUserForRegistration(),t,n).execute()}}},{key:"_onConsumptionEventSentOut",value:function(e){this.storedConsumptionEvent===e?(d.log(this,"_onConsumptionEventSentOut: cleared stored event"),this.storedConsumptionEvent=null):d.log(this,"_onConsumptionEventSentOut, no clearance")}},{key:"_getSessionCreator",value:function(e){return e&&this.sessionSilentCreatorManager?this.sessionSilentCreatorManager:!e&&this.sessionCreatorManager?this.sessionCreatorManager:e?(this.sessionSilentCreatorManager=new de.default(this,!0),this.sessionSilentCreatorManager):(this.sessionCreatorManager=new de.default(this,!1),this.sessionCreatorManager)}},{key:"_addCallbackToSessionCreatorIfAvailable",value:function(e,t){if(t){if(this.sessionSilentCreatorManager)return this.sessionSilentCreatorManager.addCallback(e),!0}else if(this.sessionCreatorManager)return this.sessionCreatorManager.addCallback(e),!0;return!1}},{key:"_getUser",value:function(){if(l.isUserDataActive())return l.getConsumerUsername()}},{key:"_getSession",value:function(){return l.getSession()}},{key:"_getPartnerId",value:function(){return l.PARTNER_ID}},{key:"_getServer",value:function(){return l.buildWsUrlHead()}},{key:"_getSdkVersion",value:function(){return l.SDK_VER}},{key:"_getActiveConsumerId",value:function(){return l.getActualConsumerId()}},{key:"_getDeviceId",value:function(){return l.getDeviceId()}},{key:"_getWebPushAppServerPubKey",value:function(){return l.APPLICATION_SERVER_PUB_KEY}},{key:"_getWebPushStatus",value:function(){if(!l.ALLOW_WEB_PUSH)return"not enabled by config";try{return"denied"===Notification.permission?"denied":null===this.pushManager||this.pushManager.hasError?"error":this.pushManager.notSupported?"not supported":this.pushManager.isSubscribed?"subscribed":"not subscribed"}catch(e){return"not supported"}}},{key:"_getWebPushSubscription",value:function(){return l.ALLOW_WEB_PUSH&&this.pushManager?this.pushManager.subscriptionString:""}},{key:"_getCurrentUserProfile",value:function(){return l.isUserDataActive()?l.getUserProfile():l.getSilentUserProfile()}},{key:"_getCurrentUserIsChildProfile",value:function(){return l.isUserDataActive()?l.getUserIsChildProfile():l.getSilentUserIsChildProfile()}},{key:"_onSendStopEvent",value:function(){e._callOnStopEvent(this.jwPlayerManagers),e._callOnStopEvent(this.html5VideoManagers),e._callOnStopEvent(this.ooyalaPlayerManagers),e._callOnStopEvent(this.genericPlayerManagers)}},{key:"_onUnload",value:function(t){e._callOnWindowUnload(this.jwPlayerManagers),e._callOnWindowUnload(this.html5VideoManagers),e._callOnWindowUnload(this.ooyalaPlayerManagers),e._callOnWindowUnload(this.genericPlayerManagers)}},{key:"_onCheckFetchLocation",value:function(){l.ALLOW_GEO_LOCATION&&this._fetchLocation()}},{key:"_fetchLocation",value:function(){var e=this;if(navigator.geolocation){var t={enableHighAccuracy:!1,timeout:1e7,maximumAge:864e5};navigator.geolocation.getCurrentPosition(function(t){e._acquireLocationPosition(t)},function(t){e._onLocationError(t)},t)}else console.log("_fetchLocation: Geolocation is not supported by this browser.")}},{key:"_acquireLocationPosition",value:function(e){console.log("_acquireLocationPosition: Latitude: "+e.coords.latitude+"; Longitude: "+e.coords.longitude),l.LOCATION_LATITUDE=e.coords.latitude,l.LOCATION_LONGITUDE=e.coords.longitude,l.LOCATION_AVAILABLE=!0;var t=l.roundLocation(e.coords.latitude),n=l.roundLocation(e.coords.longitude),r=m.default(""+t+";"+n);l.checkLocationHashChanged(r)?l.CMSDK_ENABLE_READING_CAMPAIGN_LIST?new S.default(this).execute():console.log("_acquireLocationPosition: campaigns list reading is skipped"):console.log("_acquireLocationPosition: location did not change")}},{key:"_onLocationError",value:function(e){switch(e.code){case e.PERMISSION_DENIED:console.log("_onLocationError: User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:console.log("_onLocationError: Location information is unavailable.");break;case e.TIMEOUT:console.log("_onLocationError: The request to get user location timed out.");break;default:console.log("_onLocationError: An unknown error occurred.")}l.LOCATION_AVAILABLE=!1}},{key:"_getJwPlayerPrintLog",value:function(){return l.DEBUG_JW_PLAYER}},{key:"_updateJwPlayerPrintLog",value:function(e){var t=void 0;l.DEBUG_JW_PLAYER=e;for(t in this.jwPlayerManagers)this.jwPlayerManagers.hasOwnProperty(t)&&this.jwPlayerManagers[t].updatePrintLog(l)}},{key:"_getHtml5PrintLog",value:function(){return l.DEBUG_HTML5_MEDIA}},{key:"_updateHtml5PrintLog",value:function(e){var t=void 0;l.DEBUG_HTML5_MEDIA=e;for(t in this.html5VideoManagers)this.html5VideoManagers.hasOwnProperty(t)&&this.html5VideoManagers[t].updatePrintLog(l);for(t in this.genericPlayerManagers)this.genericPlayerManagers.hasOwnProperty(t)&&this.genericPlayerManagers[t].updatePrintLog(l)}},{key:"_onDbManagerFailOpen",value:function(e){d.log(this,"_onDbManagerFailOpen: "+e),this.dbManager=null}},{key:"_onDbManagerFailOperation",value:function(e){d.log(this,"_onDbManagerFailOperation: "+e),this.dbManager=null}}],[{key:"_callOnWindowUnload",value:function(e){var t=void 0;for(t in e)e.hasOwnProperty(t)&&(e[t].cmsdkPlayerManager?e[t].cmsdkPlayerManager.onWindowUnload():e[t].onWindowUnload())}},{key:"_callOnStopEvent",value:function(e){var t=void 0;for(t in e)e.hasOwnProperty(t)&&(e[t].cmsdkPlayerManager?e[t].cmsdkPlayerManager.onStopEvent():e[t].onStopEvent())}},{key:"_findKeyByPlayerInstance",value:function(e,t){if(t){var n=void 0;for(n in e)if(e.hasOwnProperty(n)&&e[n].cmsdkPlayerInstance===t)return n}}},{key:"_debug_resetWorkingInstance",value:function(){Ue=null}},{key:"_urlB64ToUint8Array",value:function(e){return Pe.urlB64ToUint8Array(e)}},{key:"_getQueryParameter",value:function(e){var t=window.top.location.search.substring(1);if(e+="=",t.length>0){var n=t.indexOf(e);if(n!==-1){n+=e.length;var r=t.indexOf("&",n);return r===-1&&(r=t.length),decodeURI(t.substring(n,r))}}return null}}]),e}();t.default=Fe,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SERVER="pa.abpnews.catchmedia.com",t.CMSDK_DISABLED_MODE=!1,t.CMSDK_PARTNER_APP_CONFIG_INTERVAL_MINUTES=1440},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUpdateRecoProfile=t.setForceUpdateRecoProfile=t.getRecoProfileLastReadTimestamp=t.setRecoProfileTtlSeconds=t.getRecoProfileTtlSeconds=t.setRecommendationProfile=t.getRecommendationProfile=t.getUserIsChildProfile=t.getSilentUserIsChildProfile=t.getUserProfile=t.getSilentUserProfile=t.checkLastTimeReadTimestamp=t.updateLastTimeReadTimestamp=t.shouldThrottleRegistration=t.getThrottledRegistrationTimestamp=t.setThrottledRegistrationDelay=t.shouldRequestThrottling=t.setShouldRequestThrottling=t.checkLastPartnerAppConfigFetchingTimestamp=t.getPartnerAppConfigRefreshIntervalMinutes=t.getLastPartnerAppConfigFetchingTimestamp=t.updateLastPartnerAppConfigFetchingTimestamp=t.isInCompileOrRunTimeDisabledMode=t.setRuntimeDisabledMode=t.isInRuntimeTimeDisabledMode=t.isInCompileTimeDisabledMode=t.getUserExtraDataToUpdate=t.storeUserExtraDataToUpdate=t.filterExtraIsNumberOrString=t.isNumber=t.isString=t.printLocalAndSessionStorage=t.removeActivityTs=t.checkIfTabIsActive=t.updateActivityTs=t.getPingTabNextTimeout=t.removeActiveConsumptionPerIntegrationEventData=t.removeAllActiveConsumptionPerIntegrationEventData=t.updateActiveConsumptionPerIntegrationEventData=t.getActiveConsumptionPerIntegrationEventData=t.removeActiveConsumptionEventData=t.updateActiveConsumptionEventData=t.getActiveConsumptionEventData=t.onSessionExpired=t.saveInboxCachedData=t.getInboxCachedData=t.getFullReferrer=t.getReferrer=t.saveReferrer=t.extractHostname=t.updateLastReferrerTs=t.checkWebPushTokenHashChanged=t.checkLocationHashChanged=t.roundLocation=t.roundDecimals=t.shouldSendAppStartNow=t.hasIdleTimeSinceLastActivityTs=t.updateLastSdkActivityTs=t.removeLastSdkActivityTs=t.getLastSdkActivityTs=t.matchesStoredUsername=t.getFixedDateFromTimestamp=t.getFixedDateNow=t.internalUnsetUser=t.internalSetUser=t.saveConsumerRegistration=t.setUserProfile=t.setSilentUserProfile=t.getConsumerUsername=t.getActualConsumerId=t.getSilentPasskey=void 0,
t.getActualPasskey=t.getDeviceId=t.getSilentConsumerId=t.setExternalSilentUser=t.getExternalSilentUser=t.isUserRegistered=t.isSilentlyRegistered=t.removeActiveSessionId=t.isValidActiveSessionId=t.isValidUserSessionId=t.isValidSessionId=t.getSilentSession=t.getSession=t.isUserDataActive=t.CMSDK_ACTIVITY_TIMESTAMP=t.CMSDK_ACTIVE_CONSUMPTION_EVENT_PER_INTEGRATION=t.CMSDK_ACTIVE_CONSUMPTION_EVENT=t.CMSDK_MAX_USERNAME_LENGTH=t.CMSDK_MIN_USERNAME_LENGTH=t.CMSDK_DISABLE_DEBUG_LOGS=t.CMSDK_SILENTUSER_INBOX_CACHED_DATA=t.CMSDK_INBOX_CACHED_DATA=t.CMSDK_LAST_REFERRER_TIMESTAMP=t.UPDATE_TAB_ACTIVITY_TS_TIME_INTERVAL_MS=t.getNextSetUserRetryTimeIntervalMs=t.getMaxSetUserRetryDelayMs=t.PING_CHECK_IF_ACTIVE_TAB_ON_TIMESTAMP=t.PING_CHECK_IF_ACTIVE_TAB_TIMEOUT_MS_MAX=t.PING_ACTIVE_TABS_TIMEOUT_MS_MAX=t.PING_ACTIVE_TABS_TIMEOUT_MS_MIN=t.CMSDK_SESSION_TAB_ID=t.CMSDK_LAST_REFERRER_FULL=t.CMSDK_LAST_REFERRER=t.CMSDK_LAST_WEBPUSH_TOKEN_HASH=t.CMSDK_LAST_LOCATION_HASH=t.CMSDK_LAST_TIME_READ_ACTIVITY=t.CMSDK_LAST_SDK_ACTIVITY=t.CMSDK_USER_DATA_ACTIVE=t.CMSDK_DEVICE_ID=t.CMSDK_EXTERNAL_SILENT_USER=t.CMSDK_SILENT_USER_PROFILE=t.CMSDK_CONSUMER_PROFILE=t.CMSDK_RECO_PROFILE_TTL_SECONDS=t.CMSDK_LAST_TIME_READ_RECO_PROFILE=t.CMSDK_RECO_PROFILE=t.CMSDK_CONSUMER_USERNAME=t.CMSDK_SILENT_CONSUMER_ID=t.CMSDK_CONSUMER_ID=t.CMSDK_SILENT_PASSKEY=t.CMSDK_PASSKEY=t.CMSDK_SILENT_SESSION_ID=t.CMSDK_SESSION_ID=t.CMSDK_TIME_DELTA=t.CMSDK_IF_SHOULD_REQUEST_THROTTLED_REGISTRATION_TS=t.CMSDK_THROTTLED_REGISTRATION_TS=t.CMSDK_LAST_REFRESH_APP_THEME_TS=t.CMSDK_REFRESH_TIME_READ_SECONDS=t.CMSDK_RUNTIME_DISABLED_MODE=t.CMSDK_UUID_COOKIES=t.CMSDK_TIMESTAMP_FORMAT=t.APPLICATION_SERVER_PUB_KEY=t.CMSDK_INCLUDE_RECOMMENDATION_PROFILE=t.CMSDK_EVENTS_FLUSH_DELAY_SECONDS=t.CMSDK_EVENTS_FLUSH_BATCH_SIZE=t.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS=t.CMSDK_STORE_EVENTS_ONLY_WHEN_NO_SESSION=t.CMSDK_PLAY_START_DELAY_SECONDS=t.CMSDK_RECORD_FOR_READ_INTERVAL_DELAY_SECONDS=t.CMSDK_ENABLE_READING_CAMPAIGN_LIST=t.CMSDK_REFERRER_TAGGING_ENABLE=t.CMSDK_INBOX_ENABLE=t.CMSDK_INBOX_PAGE_SIZE=t.CMSDK_SERVICE_WORKER_FOLDER=t.LAST_REFERRER_TOL=t.RETRY_RE_REGISTER_MS=t.IDLE_TIMEOUT_MS=t.UNINTERRUPTED_PLAY_INTERVAL_MS=t.DEBUG_NO_SCRUB_EVENTS_IN_HTML5_MEDIA=t.DEBUG_HTML5_APP_EVENTS=t.DEBUG_IDLE_CONTROL_MANAGER=t.DEBUG_LOCAL_SESSION_STORAGES=t.DEBUG_SET_USER=t.DEBUG_SESSION_CREATOR=t.DEBUG_OOYALA_PLAYER=t.DEBUG_HTML5_MEDIA=t.DEBUG_JW_PLAYER=t.DEBUG_CONSUMPTION_EVENTS=t.LOCATION_AVAILABLE=t.LOCATION_LONGITUDE=t.LOCATION_LATITUDE=t.ALLOW_WEB_PUSH=t.ALLOW_GEO_LOCATION=t.APP_VER=t.SDK_VER=t.APP_CODE=t.WS_VER=t.ID_NAMESPACE=t.PARTNER_ID=t.buildWsUrl=t.buildWsUrlHead=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(335),a=r(o),s=n(337),u=r(s),c=n(333),l=r(c),f=n(338),d=r(f),h=t.buildWsUrlHead=function(){var e="https://"+l.SERVER;return e.endsWith("/")?e:e.endsWith(".com")?e+"/":e+".catchmedia.com/"},p=(t.buildWsUrl=function(e){return h()+"web_services/apps/v48/jsonrpc/"+e},t.PARTNER_ID=0,t.ID_NAMESPACE="",t.WS_VER="4.4",t.APP_CODE="",t.SDK_VER="0.47.3"),v=(t.APP_VER=p,t.ALLOW_GEO_LOCATION=!0,t.ALLOW_WEB_PUSH=!0,t.LOCATION_LATITUDE=0,t.LOCATION_LONGITUDE=0,t.LOCATION_AVAILABLE=!1,1),g=(t.DEBUG_CONSUMPTION_EVENTS=!1,t.DEBUG_JW_PLAYER=!1,t.DEBUG_HTML5_MEDIA=!1,t.DEBUG_OOYALA_PLAYER=!1,t.DEBUG_SESSION_CREATOR=!0,t.DEBUG_SET_USER=!0,t.DEBUG_LOCAL_SESSION_STORAGES=!1,t.DEBUG_IDLE_CONTROL_MANAGER=!0,t.DEBUG_HTML5_APP_EVENTS=!0,t.DEBUG_NO_SCRUB_EVENTS_IN_HTML5_MEDIA=!0,t.UNINTERRUPTED_PLAY_INTERVAL_MS=295e3,t.IDLE_TIMEOUT_MS=3e5,t.RETRY_RE_REGISTER_MS=3e3,t.LAST_REFERRER_TOL=864e5,t.CMSDK_SERVICE_WORKER_FOLDER="/",t.CMSDK_INBOX_PAGE_SIZE=10,t.CMSDK_INBOX_ENABLE=!0,t.CMSDK_REFERRER_TAGGING_ENABLE=!0,t.CMSDK_ENABLE_READING_CAMPAIGN_LIST=!1,t.CMSDK_RECORD_FOR_READ_INTERVAL_DELAY_SECONDS=60,t.CMSDK_PLAY_START_DELAY_SECONDS=0,t.CMSDK_STORE_EVENTS_ONLY_WHEN_NO_SESSION=!1,t.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS=1,t.CMSDK_EVENTS_FLUSH_BATCH_SIZE=5,t.CMSDK_EVENTS_FLUSH_DELAY_SECONDS=120,t.CMSDK_INCLUDE_RECOMMENDATION_PROFILE=!1,t.APPLICATION_SERVER_PUB_KEY="BKnUOol0qGyWXmdIv336W_uMLr5yqMLxLyeJRXS5ld11MbIfKBgNsPNNRcKOGB8mbxYrfSr7xTCfsO5SVQWItnw",t.CMSDK_TIMESTAMP_FORMAT="UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"),y=(t.CMSDK_UUID_COOKIES="cmsdk.uuid",t.CMSDK_RUNTIME_DISABLED_MODE="cmsdk.runtime.disabled.mode"),m=t.CMSDK_REFRESH_TIME_READ_SECONDS=600,_=t.CMSDK_LAST_REFRESH_APP_THEME_TS="cmsdk.last.refresh.apptheme.ts",b=t.CMSDK_THROTTLED_REGISTRATION_TS="cmsdk.throttle.registration.ts",E=t.CMSDK_IF_SHOULD_REQUEST_THROTTLED_REGISTRATION_TS="cmsdk.should.request.throttle.registration.ts",S=t.CMSDK_TIME_DELTA="cmsdk.time.delta",w=t.CMSDK_SESSION_ID="cmsdk.session_id",T=t.CMSDK_SILENT_SESSION_ID="cmsdk.silent_session_id",O=t.CMSDK_PASSKEY="cmsdk.passkey",k=t.CMSDK_SILENT_PASSKEY="cmsdk.silent_passkey",x=t.CMSDK_CONSUMER_ID="cmsdk.consumer_id",P=t.CMSDK_SILENT_CONSUMER_ID="cmsdk.silent_consumer_id",C=t.CMSDK_CONSUMER_USERNAME="cmsdk.consumer_username",M=t.CMSDK_RECO_PROFILE="cmsdk.reco_profile",I=t.CMSDK_LAST_TIME_READ_RECO_PROFILE="cmsdk.last.time.read.reco_profile",A=t.CMSDK_RECO_PROFILE_TTL_SECONDS="cmsdk.reco_profile.ttl",D=t.CMSDK_CONSUMER_PROFILE="cmsdk.consumer_profile",N=t.CMSDK_SILENT_USER_PROFILE="cmsdk.silent_user_profile",R=t.CMSDK_EXTERNAL_SILENT_USER="cmsdk.external.silent.user",j=t.CMSDK_DEVICE_ID="cmsdk.device_id",L=t.CMSDK_USER_DATA_ACTIVE="cmsdk.user_data_is_active",U=t.CMSDK_LAST_SDK_ACTIVITY="cmsdk.last.sdk.activity.ts",F=t.CMSDK_LAST_TIME_READ_ACTIVITY="cmsdk.last.time.read.activity.ts",B=t.CMSDK_LAST_LOCATION_HASH="cmsdk.last.location.hash",K=t.CMSDK_LAST_WEBPUSH_TOKEN_HASH="cmsdk.last.webpush.token.hash",V=t.CMSDK_LAST_REFERRER="cmsdk.last.referrer.domain",H=t.CMSDK_LAST_REFERRER_FULL="cmsdk.last.referrer.full",G=(t.CMSDK_SESSION_TAB_ID="cmsdk.session.tab.id",t.PING_ACTIVE_TABS_TIMEOUT_MS_MIN=35e3),W=t.PING_ACTIVE_TABS_TIMEOUT_MS_MAX=125e3,q=(t.PING_CHECK_IF_ACTIVE_TAB_TIMEOUT_MS_MAX=5e3,t.PING_CHECK_IF_ACTIVE_TAB_ON_TIMESTAMP=65e3),J=t.getMaxSetUserRetryDelayMs=function(){return 5*Math.pow(2,6)*1e3},Y=(t.getNextSetUserRetryTimeIntervalMs=function(e){return Math.min(5*Math.pow(2,e)*1e3,J())},t.UPDATE_TAB_ACTIVITY_TS_TIME_INTERVAL_MS=3e4,t.CMSDK_LAST_REFERRER_TIMESTAMP="cmsdk.last.referrer.ts"),z=t.CMSDK_INBOX_CACHED_DATA="cmsdk.inbox.cached.data",X=t.CMSDK_SILENTUSER_INBOX_CACHED_DATA="cmsdk.suser.inbox.cached.data",$=(t.CMSDK_DISABLE_DEBUG_LOGS=!0,t.CMSDK_MIN_USERNAME_LENGTH=4,t.CMSDK_MAX_USERNAME_LENGTH=255,t.CMSDK_ACTIVE_CONSUMPTION_EVENT="cmsdk.cnsmptn_evt_v1_"),Q=t.CMSDK_ACTIVE_CONSUMPTION_EVENT_PER_INTEGRATION="cmsdk.cnsmptn_evt_p_i_v2_",Z=t.CMSDK_ACTIVITY_TIMESTAMP="cmsdk.activity_tmstmp_",ee="cmsdk.extradata.update.user_",te="cmsdk.extradata.update.silent",ne=t.isUserDataActive=function(){return"true"===a.getCookie(L)},re=t.getSession=function(){var e=void 0;return e=ne()?a.getCookie(w):a.getCookie(T)},ie=(t.getSilentSession=function(){return a.getCookie(T)},t.isValidSessionId=function(){var e=re();return!(void 0===e||0===e.length)}),oe=t.isValidUserSessionId=function(){var e=a.getCookie(w);return!(void 0===e||0===e.length)},ae=(t.isValidActiveSessionId=function(){var e=void 0;return e=ne()?oe():ie()},t.removeActiveSessionId=function(e){var t=void 0;ne()&&(t=a.getCookie(w),e===t&&a.setCookie(w,"")),t=a.getCookie(T),e===t&&a.setCookie(T,"")}),se=(t.isSilentlyRegistered=function(){var e=a.getCookie(k);return!(void 0===e||0===e.length)},t.isUserRegistered=function(){var e=a.getCookie(O);return!(void 0===e||0===e.length)},t.getExternalSilentUser=function(){return a.getCookie(R)},t.setExternalSilentUser=function(e){a.setCookie(R,e)},t.getSilentConsumerId=function(){return a.getCookie(P)}),ue=(t.getDeviceId=function(){return a.getCookie(j)},t.getActualPasskey=function(){var e=void 0;return e=ne()?a.getCookie(O):a.getCookie(k)},t.getSilentPasskey=function(){return a.getCookie(k)},t.getActualConsumerId=function(){var e=void 0;return e=ne()?a.getCookie(x):se()},t.getConsumerUsername=function(){return a.getCookie(C)},t.setSilentUserProfile=function(e,t){if(e){var n=(t?1:0).toString()+e;a.setCookie(N,n)}else a.removeCookie(N)}),ce=t.setUserProfile=function(e,t){if(e){var n=(t?1:0).toString()+e;a.setCookie(D,n)}else a.removeCookie(D)},le=(t.saveConsumerRegistration=function(e,t,n,r,i,o,s,u){i&&a.setCookie(j,i),e?(o&&a.setCookie(T,o),r&&a.setCookie(P,r),n&&a.setCookie(k,n),s&&ue(s,u)):(o&&a.setCookie(w,o),r&&a.setCookie(x,r),t&&a.setCookie(C,t),n&&a.setCookie(O,n),s?ce(s,u):ce(null,u),console.log("saveConsumerRegistration - internalSetUser"),a.setCookie(L,"true"))},t.internalSetUser=function(){console.log("internalSetUser"),a.setCookie(L,"true")},t.internalUnsetUser=function(){console.log("internalUnsetUser"),a.setCookie(L,"false")},t.getFixedDateNow=function(){var e=+new Date,t=a.getCookie(S);return t&&(e+=+t),u.dateFormat(new Date(e),g)},t.getFixedDateFromTimestamp=function(e){e=+e;var t=a.getCookie(S);return t&&(e+=+t),u.dateFormat(new Date(e),g)},t.matchesStoredUsername=function(e){return e===a.getCookie(C)&&oe()},t.getLastSdkActivityTs=function(){return a.getCookie(U)},t.removeLastSdkActivityTs=function(){a.removeCookie(U)},t.updateLastSdkActivityTs=function(){a.setCookie(U,+new Date)},t.hasIdleTimeSinceLastActivityTs=function(e){var t=a.getCookie(U);return!!t&&+new Date-+t>=e.IDLE_TIMEOUT_MS},t.shouldSendAppStartNow=function(e){var t=a.getCookie(U);return!t||+new Date-+t>=e.IDLE_TIMEOUT_MS},t.roundDecimals=function(e,t){return+(Math.round(e+"e+"+t)+"e-"+t)}),fe=(t.roundLocation=function(e){return le(e,v)},t.checkLocationHashChanged=function(e){var t=a.getCookie(B);return(!t||0===t.length||t!==e)&&(a.setCookie(B,e),!0)},t.checkWebPushTokenHashChanged=function(e){var t=a.getCookie(K);return(!t||0===t.length||t!==e)&&(a.setCookie(K,e),!0)},t.updateLastReferrerTs=function(){a.setCookie(Y,+new Date)}),de=t.extractHostname=function(e){if(!e||e.length<=0)return null;var t=void 0;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0],t=t.split("?")[0]},he=(t.saveReferrer=function(e,t,n){if((!t||t.length<=0)&&(t=n),!t||t.length<=0)return console.log("saveReferrer: nothing to save: "+t+","+n),!1;var r=de(t);if((!r||r.length<=0||r==document.domain)&&(r=de(n),!r||r.length<=0||r==document.domain))return!1;var i=a.getCookie(V),o=a.getCookie(H),s=a.getCookie(Y);return+new Date-+s>e.LAST_REFERRER_TOL&&(i=o=void 0),a.setCookie(V,r),a.setCookie(H,t),fe(),console.log("saveReferrer: "+r+"; full: "+t),void 0==i||i!=r||void 0==o||o!=t},t.getReferrer=function(e){var t=a.getCookie(Y);if(void 0!=t)return+new Date-+t<=e.LAST_REFERRER_TOL?a.getCookie(V):void 0},t.getFullReferrer=function(e){var t=a.getCookie(Y);if(void 0!=t)return+new Date-+t<=e.LAST_REFERRER_TOL?a.getCookie(H):void 0},t.getInboxCachedData=function(){var e=a.getCookie(ne()?z:X);try{return JSON.parse(e)}catch(e){return}},t.saveInboxCachedData=function(e){a.setCookie(ne()?z:X,JSON.stringify(e))},t.onSessionExpired=function(e){ae(e)},t.getActiveConsumptionEventData=function(e){var t=a.getCookie($+e);if(t&&0!==t.length)try{return JSON.parse(t)}catch(e){return void console.error("getActiveConsumptionEventData: invalid data",e)}},t.updateActiveConsumptionEventData=function(e,t){a.setCookie($+t,JSON.stringify(e))},t.removeActiveConsumptionEventData=function(e){a.removeCookie($+e)},t.getActiveConsumptionPerIntegrationEventData=function(e){var t=a.getCookie(Q+e);if(t&&0!==t.length)try{return JSON.parse(t)}catch(e){return void console.error("getActiveConsumptionPerIntegrationEventData: invalid data",e)}}),pe=(t.updateActiveConsumptionPerIntegrationEventData=function(e,t,n){var r=he(n);r?r[t]=e:(r={},r[t]=e),a.setCookie(Q+n,JSON.stringify(r))},t.removeAllActiveConsumptionPerIntegrationEventData=function(e){a.removeCookie(Q+e)},t.removeActiveConsumptionPerIntegrationEventData=function(e,t){var n=he(t);n||(delete n[e],a.setCookie(Q+t,JSON.stringify(n)))},t.getPingTabNextTimeout=function(){return Math.floor(Math.random()*(W-G)+G)},t.updateActivityTs=function(e){a.setCookie(Z+e,+new Date)},t.checkIfTabIsActive=function(e){var t=a.getCookie(Z+e);if(void 0!==t)return+new Date-+t<=q},t.removeActivityTs=function(e){a.removeCookie(Z+e)},t.printLocalAndSessionStorage=function(e){var t=void 0;if(d.log(e,"printLocalAndSessionStorage: local storage"),localStorage)for(t=0;t<localStorage.length;t++)d.log(e,"LS["+localStorage.key(t)+"]=["+localStorage.getItem(localStorage.key(t))+"]");else d.log(e,"printLocalAndSessionStorage: no local storage");if(d.log(e,"printLocalAndSessionStorage: session storage"),sessionStorage)for(t=0;t<sessionStorage.length;t++)d.log(e,"SS["+sessionStorage.key(t)+"]=["+sessionStorage.getItem(sessionStorage.key(t))+"]");else d.log(e,"printLocalAndSessionStorage: no session storage");e.dbManager&&e.dbManager.dumpDatabases()},t.isString=function(e){return null!==e&&void 0!==e&&("string"==typeof e||"object"===("undefined"==typeof e?"undefined":i(e))&&e.constructor===String)}),ve=t.isNumber=function(e){return null!==e&&void 0!==e&&("number"==typeof e||"object"===("undefined"==typeof e?"undefined":i(e))&&e.constructor===Number)},ge=t.filterExtraIsNumberOrString=function(e){if(e)for(var t in e)if(e.hasOwnProperty(t)){if(pe(e[t])||ve(e[t]))continue;delete e[t]}return e},ye=(t.storeUserExtraDataToUpdate=function(e,t){t?e?a.setCookie(ee+t,JSON.stringify(ge(e))):a.removeCookie(ee+t):e?a.setCookie(te,JSON.stringify(ge(e))):a.removeCookie(te)},t.getUserExtraDataToUpdate=function(e){var t=e?a.getCookie(ee+e):a.getCookie(te);if(t&&0!==t.length)try{return JSON.parse(t)}catch(e){return void console.error("getUserExtraDataToUpdate: invalid data",e)}},t.isInCompileTimeDisabledMode=function(){return l.CMSDK_DISABLED_MODE}),me=t.isInRuntimeTimeDisabledMode=function(){var e=a.getCookie(y);return!!e&&"true"===e},_e=(t.setRuntimeDisabledMode=function(e){console.log("setRuntimeDisabledMode: "+e),a.setCookie(y,e?"true":"false")},t.isInCompileOrRunTimeDisabledMode=function(){return ye()||me()},t.updateLastPartnerAppConfigFetchingTimestamp=function(){a.setCookie(_,+new Date)},t.getLastPartnerAppConfigFetchingTimestamp=function(){return a.getCookie(_)}),be=t.getPartnerAppConfigRefreshIntervalMinutes=function(){return l.CMSDK_PARTNER_APP_CONFIG_INTERVAL_MINUTES},Ee=(t.checkLastPartnerAppConfigFetchingTimestamp=function(){var e=_e();return void 0===e||+new Date-+e>=60*be()*1e3},t.setShouldRequestThrottling=function(e){a.setCookie(E,e?"true":"false")},t.shouldRequestThrottling=function(){var e=a.getCookie(E);return!e||"true"===e},t.setThrottledRegistrationDelay=function(e){if(e>0){var t=+new Date+60*e*1e3;a.setCookie(b,t)}else a.setCookie(b,"0")},t.getThrottledRegistrationTimestamp=function(){return a.getCookie(b)},t.shouldThrottleRegistration=function(){var e=a.getCookie(b);return void 0!==e&&("0"!==e&&+new Date<+e)},t.updateLastTimeReadTimestamp=function(){a.setCookie(F,+new Date)},t.checkLastTimeReadTimestamp=function(){var e=a.getCookie(F);return void 0===e||+new Date-+e>=1e3*m},t.getSilentUserProfile=function(){var e=a.getCookie(N);return e&&e.length>1?e.substr(1):e},t.getUserProfile=function(){var e=a.getCookie(D);return e&&e.length>1?e.substr(1):e},t.getSilentUserIsChildProfile=function(){var e=a.getCookie(N);return!!(e&&e.length>1)&&e.startsWith("1")},t.getUserIsChildProfile=function(){var e=a.getCookie(D);return!!(e&&e.length>1)&&e.startsWith("1")},t.getRecommendationProfile=function(){return a.getCookie(M)},t.setRecommendationProfile=function(e){a.setCookie(M,e),a.setCookie(I,+new Date)},t.getRecoProfileTtlSeconds=function(){var e=a.getCookie(A);return e>0?e:86400}),Se=(t.setRecoProfileTtlSeconds=function(e){a.setCookie(A,e)},t.getRecoProfileLastReadTimestamp=function(){var e=+a.getCookie(I);return e>0?e:0});t.setForceUpdateRecoProfile=function(){a.removeCookie(I)},t.shouldUpdateRecoProfile=function(){var e=Se();return e<=0||+new Date-e>1e3*Ee()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=(new a.default).getStorage();return e||(e=localStorage),e}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteRealCookie=t.setRealCookie=t.getRealCookie=t.setCookie=t.removeCookie=t.getCookie=t.getFullCookieName=t.setHeader=t.setLogHeader=void 0;var o=n(336),a=r(o),s="",u="",c=(t.setLogHeader=function(e){u=e},t.setHeader=function(e){s=e},t.getFullCookieName=function(e){return s+e}),l=(t.getCookie=function(e){var t=i().getItem(c(e));return t?t:void 0},t.removeCookie=function(e){e=c(e),console.log(u+":removeCookie: "+e),i().removeItem(e)},t.setCookie=function(e,t,n){e=c(e),i().setItem(e,t)},t.getRealCookie=function(e){e=c(e);var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},t.setRealCookie=function(e,t,n){e=c(e),n=n||{};var r=n.expires;if("number"==typeof r&&r){var i=new Date;i.setTime(i.getTime()+1e3*r),r=n.expires=i}r&&r.toUTCString&&(n.expires=r.toUTCString()),t=encodeURIComponent(t);var o=e+"="+t;for(var a in n){o+="; "+a;var s=n[a];s!==!0&&(o+="="+s)}document.cookie=o});t.deleteRealCookie=function(e){e=c(e),l(e,"",{expires:-1})}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=null,a=function(){function e(){return n(this,e),o||(o=this,this.storage=null,this.start()),o}return i(e,[{key:"start",value:function(){this._checkObjectAssign(),this._checkTrimString(),this._checkLocalStorage()}},{key:"getStorage",value:function(){return this.storage}},{key:"_checkObjectAssign",value:function(){"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n})}},{key:"_checkTrimString",value:function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}},{key:"_fakeLocalStorage",value:function(){var e,t={};e=window.Storage&&window.localStorage?window.Storage.prototype:{},window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var n=function(t,n){var r=null==t?null:e.getItem(t),i=location.href.substr(location.origin.length),o=document.createEvent("StorageEvent");o.initStorageEvent("storage",!1,!1,t,r,n,i,null),window.dispatchEvent(o)};return e.key=function(e){var n=Object.keys(t)[e];return"string"==typeof n?n:null},e.getItem=function(e){return"string"==typeof t[e]?t[e]:null},e.setItem=function(e,r){n(e,r),t[e]=String(r)},e.removeItem=function(e){n(e,null),delete t[e]},e.clear=function(){n(null,null),t={}},e}},{key:"_checkLocalStorage",value:function(){if("object"===r(window.localStorage))try{localStorage.setItem("localStorageTest",1),localStorage.removeItem("localStorageTest")}catch(e){this.storage=this._fakeLocalStorage()}else this.storage=this._fakeLocalStorage()}}]),e}();t.default=a,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,i=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(o,a,s){var u=n;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(o)||/\d/.test(o)||(a=o,o=void 0),o=o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");a=String(u.masks[a]||a||u.masks.default),"UTC:"==a.slice(0,4)&&(a=a.slice(4),s=!0);var c=s?"getUTC":"get",l=o[c+"Date"](),f=o[c+"Day"](),d=o[c+"Month"](),h=o[c+"FullYear"](),p=o[c+"Hours"](),v=o[c+"Minutes"](),g=o[c+"Seconds"](),y=o[c+"Milliseconds"](),m=s?0:o.getTimezoneOffset(),_={d:l,dd:i(l),ddd:u.i18n.dayNames[f],dddd:u.i18n.dayNames[f+7],m:d+1,mm:i(d+1),mmm:u.i18n.monthNames[d],mmmm:u.i18n.monthNames[d+12],yy:String(h).slice(2),yyyy:h,h:p%12||12,hh:i(p%12||12),H:p,HH:i(p),M:v,MM:i(v),s:g,ss:i(g),l:i(y,3),L:i(y>99?Math.round(y/10):y),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:s?"UTC":(String(o).match(t)||[""]).pop().replace(r,""),o:(m>0?"-":"+")+i(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return a.replace(e,function(e){return e in _?_[e]:e.slice(1,e.length-1)})}}();n.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},n.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.log=function(e,t){console.log("<["+(e.interTabCommManager?e.interTabCommManager.tabId:"noTabId")+"]> "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});/**
	 * Fast UUID generator, RFC4122 version 4 compliant.
	 * @author Jeff Ward (jcward.com).
	 * @license MIT license
	 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
	 **/
t.UUID=function(){var e,t={},n=[];for(e=0;e<256;e++)n[e]=(e<16?"0":"")+e.toString(16);return t.generate=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return n[255&e]+n[e>>8&255]+n[e>>16&255]+n[e>>24&255]+"-"+n[255&t]+n[t>>8&255]+"-"+n[t>>16&15|64]+n[t>>24&255]+"-"+n[63&r|128]+n[r>>8&255]+"-"+n[r>>16&255]+n[r>>24&255]+n[255&i]+n[i>>8&255]+n[i>>16&255]+n[i>>24&255]},t}(),t.UUID_short=function(){var e,t={},n=[];for(e=0;e<256;e++)n[e]=(e<16?"0":"")+e.toString(16);return t.generate=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0;return n[255&e]+n[e>>8&255]+n[e>>16&255]+n[e>>24&255]+"-"+n[255&t]+n[t>>8&255]+"-"+n[t>>16&15|64]+n[t>>24&255]},t}()},function(e,t,n){var r;Object.defineProperty(t,"__esModule",{value:!0});"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.md5=function(i){"use strict";function o(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function a(e,t){return e<<t|e>>>32-t}function s(e,t,n,r,i,s){return o(a(o(o(t,e),o(r,s)),i),n)}function u(e,t,n,r,i,o,a){return s(t&n|~t&r,e,t,i,o,a)}function c(e,t,n,r,i,o,a){return s(t&r|n&~r,e,t,i,o,a)}function l(e,t,n,r,i,o,a){return s(t^n^r,e,t,i,o,a)}function f(e,t,n,r,i,o,a){return s(n^(t|~r),e,t,i,o,a)}function d(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n,r,i,a,s,d=1732584193,h=-271733879,p=-1732584194,v=271733878;for(n=0;n<e.length;n+=16)r=d,i=h,a=p,s=v,d=u(d,h,p,v,e[n],7,-680876936),v=u(v,d,h,p,e[n+1],12,-389564586),p=u(p,v,d,h,e[n+2],17,606105819),h=u(h,p,v,d,e[n+3],22,-1044525330),d=u(d,h,p,v,e[n+4],7,-176418897),v=u(v,d,h,p,e[n+5],12,1200080426),p=u(p,v,d,h,e[n+6],17,-1473231341),h=u(h,p,v,d,e[n+7],22,-45705983),d=u(d,h,p,v,e[n+8],7,1770035416),v=u(v,d,h,p,e[n+9],12,-1958414417),p=u(p,v,d,h,e[n+10],17,-42063),h=u(h,p,v,d,e[n+11],22,-1990404162),d=u(d,h,p,v,e[n+12],7,1804603682),v=u(v,d,h,p,e[n+13],12,-40341101),p=u(p,v,d,h,e[n+14],17,-1502002290),h=u(h,p,v,d,e[n+15],22,1236535329),d=c(d,h,p,v,e[n+1],5,-165796510),v=c(v,d,h,p,e[n+6],9,-1069501632),p=c(p,v,d,h,e[n+11],14,643717713),h=c(h,p,v,d,e[n],20,-373897302),d=c(d,h,p,v,e[n+5],5,-701558691),v=c(v,d,h,p,e[n+10],9,38016083),p=c(p,v,d,h,e[n+15],14,-660478335),h=c(h,p,v,d,e[n+4],20,-405537848),d=c(d,h,p,v,e[n+9],5,568446438),v=c(v,d,h,p,e[n+14],9,-1019803690),p=c(p,v,d,h,e[n+3],14,-187363961),h=c(h,p,v,d,e[n+8],20,1163531501),d=c(d,h,p,v,e[n+13],5,-1444681467),v=c(v,d,h,p,e[n+2],9,-51403784),p=c(p,v,d,h,e[n+7],14,1735328473),h=c(h,p,v,d,e[n+12],20,-1926607734),d=l(d,h,p,v,e[n+5],4,-378558),v=l(v,d,h,p,e[n+8],11,-2022574463),p=l(p,v,d,h,e[n+11],16,1839030562),h=l(h,p,v,d,e[n+14],23,-35309556),d=l(d,h,p,v,e[n+1],4,-1530992060),v=l(v,d,h,p,e[n+4],11,1272893353),p=l(p,v,d,h,e[n+7],16,-155497632),h=l(h,p,v,d,e[n+10],23,-1094730640),d=l(d,h,p,v,e[n+13],4,681279174),v=l(v,d,h,p,e[n],11,-358537222),p=l(p,v,d,h,e[n+3],16,-722521979),h=l(h,p,v,d,e[n+6],23,76029189),d=l(d,h,p,v,e[n+9],4,-640364487),v=l(v,d,h,p,e[n+12],11,-421815835),p=l(p,v,d,h,e[n+15],16,530742520),h=l(h,p,v,d,e[n+2],23,-995338651),d=f(d,h,p,v,e[n],6,-198630844),v=f(v,d,h,p,e[n+7],10,1126891415),p=f(p,v,d,h,e[n+14],15,-1416354905),h=f(h,p,v,d,e[n+5],21,-57434055),d=f(d,h,p,v,e[n+12],6,1700485571),v=f(v,d,h,p,e[n+3],10,-1894986606),p=f(p,v,d,h,e[n+10],15,-1051523),h=f(h,p,v,d,e[n+1],21,-2054922799),d=f(d,h,p,v,e[n+8],6,1873313359),v=f(v,d,h,p,e[n+15],10,-30611744),p=f(p,v,d,h,e[n+6],15,-1560198380),h=f(h,p,v,d,e[n+13],21,1309151649),d=f(d,h,p,v,e[n+4],6,-145523070),v=f(v,d,h,p,e[n+11],10,-1120210379),p=f(p,v,d,h,e[n+2],15,718787259),h=f(h,p,v,d,e[n+9],21,-343485551),d=o(d,r),h=o(h,i),p=o(p,a),v=o(v,s);return[d,h,p,v]}function h(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function p(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function v(e){return h(d(p(e),8*e.length))}function g(e,t){var n,r,i=p(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=d(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=d(o.concat(p(t)),512+8*t.length),h(d(a.concat(r),640))}function y(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function m(e){return unescape(encodeURIComponent(e))}function _(e){return v(m(e))}function b(e){return y(_(e))}function E(e,t){return g(m(e),m(t))}function S(e,t){return y(E(e,t))}function w(e,t,n){return t?n?E(t,e):S(t,e):n?_(e):b(e)}r=function(){return w}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(void 0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(337),f=i(l),d=n(335),h=i(d),p=n(334),v=i(p),g=n(342),y=r(g),m="Time",_="Read",b=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,m,_))}return s(t,e),u(t,[{key:"execute",value:function(){var e=this;if(!v.checkLastTimeReadTimestamp())return void console.log("Time.Read is skipped per frequency check");var n={local_time:f.dateFormat(new Date,v.CMSDK_TIMESTAMP_FORMAT)};c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,n,function(e){if(200===e.code){var t=Date.parse(e.data),n=+new Date;h.setCookie(v.CMSDK_TIME_DELTA,t-n),v.updateLastTimeReadTimestamp()}},function(n){console.log(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",e)+"Error: "+JSON.stringify(error))})}}]),t}(y.default);t.default=b,e.exports=t.default},function(e,t,n){(function(r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),u=i(s),c=function(){function e(t,n,r){o(this,e),this.context=t,this.serviceName=n,this.methodName=r,this.sessionUsed=null}return a(e,[{key:"_buildBody",value:function(e){if(this.sessionUsed=this.needsSession?u.getSession():void 0,this.needsSilentSession&&(this.sessionUsed=u.getSilentSession()),!this.sessionUsed&&(this.needsSession||this.needsSilentSession))return console.log(this.header+"OUT: no session available for request with needsSession"),null;var t={lc_id:"en-us",partner_id:u.PARTNER_ID.toString(),timestamp:u.getFixedDateNow(),ws_ver:u.WS_VER,app_ver:u.APP_VER,sdk_ver:u.SDK_VER,app_code:u.APP_CODE,session_id:this.sessionUsed};return JSON.stringify({id:"jsonrpc",params:[t,e],method:this.methodName})}},{key:"execute",value:function(e,t,n,i){var o=this,a=this._buildBody(e),s=void 0;if(this.context._onCommActivity(i||this),!a)return void n(this.header+"request will not be sent!");console.log(this.header+"OUT:"+a);var c=u.buildWsUrl(this.serviceName);try{r.post(c,a,function(r){if(console.log(o.header+"IN:"+JSON.stringify(r)),r.result){if(503===r.result.code&&(o.needsSession||o.needsSilentSession)){if(console.log(o.header+"session expired!"),o.context._addCallbackToSessionCreatorIfAvailable(function(){o.resendRequestAfterSessionRecreation(e,t,n)},o.needsSilentSession))return void console.log(o.header+"_addCallbackToSessionCreator");var a=o.needsSilentSession?u.getSilentSession():u.getSession();return a&&a!==o.sessionUsed?(console.log(o.header+"session has changed while running this request!"),void o.resendRequestAfterSessionRecreation(e,t,n)):(u.onSessionExpired(o.sessionUsed),void o.recreateSessionAndSendRequest(e,t,n))}if(t(r.result),r.result.hasOwnProperty("server_commands"))for(s=0;s<r.result.server_commands.length;++s){var c=r.result.server_commands[s];c.hasOwnProperty("code")&&o.context._onServerCommand(c.code)}}else n(r.error);o.context._onCommResponse(i||o)},"json").fail(function(e,t,r){e.textStatus=t,e.errorThrown=r,console.log("fail",e),n(r)})}catch(e){console.log("catch",e),n(e)}}},{key:"recreateSessionAndSendRequest",value:function(e,t,n){var r=this;this.context._getSessionCreator(this.needsSilentSession).executeNotifySuccess(this.header,function(){r.resendRequestAfterSessionRecreation(e,t,n)})}},{key:"resendRequestAfterSessionRecreation",value:function(e,t,n){var i=this,o=this._buildBody(e);console.log(this.header+"OUT after session recreation:"+o),r.post(u.buildWsUrl(this.serviceName),o,function(e){console.log(i.header+"IN:"+JSON.stringify(e)),e.result?t(e.result):n(e.error),i.context._onCommResponse(i)},"json")}},{key:"header",get:function(){return this.serviceName+" "+this.methodName+"->"}},{key:"needsSession",get:function(){return!1}},{key:"needsSilentSession",get:function(){return!1}}]),e}();t.default=c,e.exports=t.default}).call(t,n(343))},function(e,t,n){var r,i;/*!
	 * jQuery JavaScript Library v3.5.0
	 * https://jquery.com/
	 *
	 * Includes Sizzle.js
	 * https://sizzlejs.com/
	 *
	 * Copyright JS Foundation and other contributors
	 * Released under the MIT license
	 * https://jquery.org/license
	 *
	 * Date: 2020-04-10T15:07Z
	 */
!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){"use strict";function a(e,t,n){n=n||Oe;var r,i,o=n.createElement("script");if(o.text=e,t)for(r in ke)i=t[r]||t.getAttribute&&t.getAttribute(r),i&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function s(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ye[me.call(e)]||"object":typeof e}function u(e){var t=!!e&&"length"in e&&e.length,n=s(e);return!we(e)&&!Te(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function c(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function l(e,t,n){return we(t)?Pe.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?Pe.grep(e,function(e){return e===t!==n}):"string"!=typeof t?Pe.grep(e,function(e){return ge.call(t,e)>-1!==n}):Pe.filter(t,e,n)}function f(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function d(e){var t={};return Pe.each(e.match(Fe)||[],function(e,n){t[n]=!0}),t}function h(e){return e}function p(e){throw e}function v(e,t,n,r){var i;try{e&&we(i=e.promise)?i.call(e).done(t).fail(n):e&&we(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function g(){Oe.removeEventListener("DOMContentLoaded",g),n.removeEventListener("load",g),Pe.ready()}function y(e,t){return t.toUpperCase()}function m(e){return e.replace(He,"ms-").replace(Ge,y)}function _(){this.expando=Pe.expando+_.uid++}function b(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ye.test(e)?JSON.parse(e):e)}function E(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ze,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n=b(n)}catch(e){}Je.set(e,t,n)}else n=void 0;return n}function S(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return Pe.css(e,t,"")},u=s(),c=n&&n[3]||(Pe.cssNumber[t]?"":"px"),l=e.nodeType&&(Pe.cssNumber[t]||"px"!==c&&+u)&&$e.exec(Pe.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)Pe.style(e,t,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;l*=2,Pe.style(e,t,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}function w(e){var t,n=e.ownerDocument,r=e.nodeName,i=rt[r];return i?i:(t=n.body.appendChild(n.createElement(r)),i=Pe.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),rt[r]=i,i)}function T(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=qe.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&nt(r)&&(i[o]=w(r))):"none"!==n&&(i[o]="none",qe.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function O(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&c(e,t)?Pe.merge([e],n):n}function k(e,t){for(var n=0,r=e.length;n<r;n++)qe.set(e[n],"globalEval",!t||qe.get(t[n],"globalEval"))}function x(e,t,n,r,i){for(var o,a,u,c,l,f,d=t.createDocumentFragment(),h=[],p=0,v=e.length;p<v;p++)if(o=e[p],o||0===o)if("object"===s(o))Pe.merge(h,o.nodeType?[o]:o);else if(ut.test(o)){for(a=a||d.appendChild(t.createElement("div")),u=(ot.exec(o)||["",""])[1].toLowerCase(),c=st[u]||st._default,a.innerHTML=c[1]+Pe.htmlPrefilter(o)+c[2],f=c[0];f--;)a=a.lastChild;Pe.merge(h,a.childNodes),a=d.firstChild,a.textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",p=0;o=h[p++];)if(r&&Pe.inArray(o,r)>-1)i&&i.push(o);else if(l=et(o),a=O(d.appendChild(o),"script"),l&&k(a),n)for(f=0;o=a[f++];)at.test(o.type||"")&&n.push(o);return d}function P(){return!0}function C(){return!1}function M(e,t){return e===I()==("focus"===t)}function I(){try{return Oe.activeElement}catch(e){}}function A(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)A(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=C;else if(!i)return e;return 1===o&&(a=i,i=function(e){return Pe().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=Pe.guid++)),e.each(function(){Pe.event.add(this,t,i,r,n)})}function D(e,t,n){return n?(qe.set(e,t,!1),void Pe.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=qe.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(Pe.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=he.call(arguments),qe.set(this,t,o),r=n(this,t),this[t](),i=qe.get(this,t),o!==i||r?qe.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&(qe.set(this,t,{value:Pe.event.trigger(Pe.extend(o[0],Pe.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void(void 0===qe.get(e,t)&&Pe.event.add(e,t,P))}function N(e,t){return c(e,"table")&&c(11!==t.nodeType?t:t.firstChild,"tr")?Pe(e).children("tbody")[0]||e:e}function R(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function j(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function L(e,t){var n,r,i,o,a,s,u;if(1===t.nodeType){if(qe.hasData(e)&&(o=qe.get(e),u=o.events)){qe.remove(t,"handle events");for(i in u)for(n=0,r=u[i].length;n<r;n++)Pe.event.add(t,i,u[i][n])}Je.hasData(e)&&(a=Je.access(e),s=Pe.extend({},a),Je.set(t,s))}}function U(e,t){var n=t.nodeName.toLowerCase();"input"===n&&it.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function F(e,t,n,r){t=pe(t);var i,o,s,u,c,l,f=0,d=e.length,h=d-1,p=t[0],v=we(p);if(v||d>1&&"string"==typeof p&&!Se.checkClone&&ht.test(p))return e.each(function(i){var o=e.eq(i);v&&(t[0]=p.call(this,i,o.html())),F(o,t,n,r)});if(d&&(i=x(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=Pe.map(O(i,"script"),R),u=s.length;f<d;f++)c=i,f!==h&&(c=Pe.clone(c,!0,!0),u&&Pe.merge(s,O(c,"script"))),n.call(e[f],c,f);if(u)for(l=s[s.length-1].ownerDocument,Pe.map(s,j),f=0;f<u;f++)c=s[f],at.test(c.type||"")&&!qe.access(c,"globalEval")&&Pe.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?Pe._evalUrl&&!c.noModule&&Pe._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):a(c.textContent.replace(pt,""),c,l))}return e}function B(e,t,n){for(var r,i=t?Pe.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||Pe.cleanData(O(r)),r.parentNode&&(n&&et(r)&&k(O(r,"script")),r.parentNode.removeChild(r));return e}function K(e,t,n){var r,i,o,a,s=e.style;return n=n||gt(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||et(e)||(a=Pe.style(e,t)),!Se.pixelBoxStyles()&&vt.test(a)&&mt.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function V(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function H(e){for(var t=e[0].toUpperCase()+e.slice(1),n=_t.length;n--;)if(e=_t[n]+t,e in bt)return e}function G(e){var t=Pe.cssProps[e]||Et[e];return t?t:e in bt?e:Et[e]=H(e)||e}function W(e,t,n){var r=$e.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function q(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=Pe.css(e,n+Qe[a],!0,i)),r?("content"===n&&(u-=Pe.css(e,"padding"+Qe[a],!0,i)),"margin"!==n&&(u-=Pe.css(e,"border"+Qe[a]+"Width",!0,i))):(u+=Pe.css(e,"padding"+Qe[a],!0,i),"padding"!==n?u+=Pe.css(e,"border"+Qe[a]+"Width",!0,i):s+=Pe.css(e,"border"+Qe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function J(e,t,n){var r=gt(e),i=!Se.boxSizingReliable()||n,o=i&&"border-box"===Pe.css(e,"boxSizing",!1,r),a=o,s=K(e,t,r),u="offset"+t[0].toUpperCase()+t.slice(1);if(vt.test(s)){if(!n)return s;s="auto"}return(!Se.boxSizingReliable()&&o||!Se.reliableTrDimensions()&&c(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===Pe.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===Pe.css(e,"boxSizing",!1,r),a=u in e,a&&(s=e[u])),s=parseFloat(s)||0,s+q(e,t,n||(o?"border":"content"),a,r,s)+"px"}function Y(e,t,n,r,i){return new Y.prototype.init(e,t,n,r,i)}function z(){xt&&(Oe.hidden===!1&&n.requestAnimationFrame?n.requestAnimationFrame(z):n.setTimeout(z,Pe.fx.interval),Pe.fx.tick())}function X(){return n.setTimeout(function(){kt=void 0}),kt=Date.now()}function $(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Qe[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Q(e,t,n){for(var r,i=(te.tweeners[t]||[]).concat(te.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function Z(e,t,n){var r,i,o,a,s,u,c,l,f="width"in t||"height"in t,d=this,h={},p=e.style,v=e.nodeType&&nt(e),g=qe.get(e,"fxshow");n.queue||(a=Pe._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,Pe.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],Pt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;v=!0}h[r]=g&&g[r]||Pe.style(e,r)}if(u=!Pe.isEmptyObject(t),u||!Pe.isEmptyObject(h)){f&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=g&&g.display,null==c&&(c=qe.get(e,"display")),l=Pe.css(e,"display"),"none"===l&&(c?l=c:(T([e],!0),c=e.style.display||c,l=Pe.css(e,"display"),T([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===Pe.css(e,"float")&&(u||(d.done(function(){p.display=c}),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1;for(r in h)u||(g?"hidden"in g&&(v=g.hidden):g=qe.access(e,"fxshow",{display:c}),o&&(g.hidden=!v),v&&T([e],!0),d.done(function(){v||T([e]),qe.remove(e,"fxshow");for(r in h)Pe.style(e,r,h[r])})),u=Q(v?g[r]:0,r,d),r in g||(g[r]=u.start,v&&(u.end=u.start,u.start=0))}}function ee(e,t){var n,r,i,o,a;for(n in e)if(r=m(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=Pe.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function te(e,t,n){var r,i,o=0,a=te.prefilters.length,s=Pe.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=kt||X(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,a=0,u=c.tweens.length;a<u;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),o<1&&u?n:(u||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:Pe.extend({},t),opts:Pe.extend(!0,{specialEasing:{},easing:Pe.easing._default},n),originalProperties:t,originalOptions:n,startTime:kt||X(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Pe.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(ee(l,c.opts.specialEasing);o<a;o++)if(r=te.prefilters[o].call(c,e,l,c.opts))return we(r.stop)&&(Pe._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return Pe.map(l,Q,c),we(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),Pe.fx.timer(Pe.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}function ne(e){var t=e.match(Fe)||[];return t.join(" ")}function re(e){return e.getAttribute&&e.getAttribute("class")||""}function ie(e){return Array.isArray(e)?e:"string"==typeof e?e.match(Fe)||[]:[]}function oe(e,t,n,r){var i;if(Array.isArray(t))Pe.each(t,function(t,i){n||Bt.test(e)?r(e,i):oe(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==s(t))r(e,t);else for(i in t)oe(e+"["+i+"]",t[i],n,r)}function ae(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Fe)||[];if(we(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function se(e,t,n,r){function i(s){var u;return o[s]=!0,Pe.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||o[c]?a?!(u=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),u}var o={},a=e===Qt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function ue(e,t){var n,r,i=Pe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Pe.extend(!0,e,r),e}function ce(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function le(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}var fe=[],de=Object.getPrototypeOf,he=fe.slice,pe=fe.flat?function(e){return fe.flat.call(e)}:function(e){return fe.concat.apply([],e)},ve=fe.push,ge=fe.indexOf,ye={},me=ye.toString,_e=ye.hasOwnProperty,be=_e.toString,Ee=be.call(Object),Se={},we=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},Te=function(e){return null!=e&&e===e.window},Oe=n.document,ke={type:!0,src:!0,nonce:!0,noModule:!0},xe="3.5.0",Pe=function(e,t){return new Pe.fn.init(e,t)};Pe.fn=Pe.prototype={jquery:xe,constructor:Pe,length:0,toArray:function(){return he.call(this)},get:function(e){return null==e?he.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Pe.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Pe.each(this,e)},map:function(e){return this.pushStack(Pe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(he.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(Pe.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(Pe.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ve,sort:fe.sort,splice:fe.splice},Pe.extend=Pe.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||we(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(c&&r&&(Pe.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||Pe.isPlainObject(n)?n:{},i=!1,a[t]=Pe.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},Pe.extend({expando:"jQuery"+(xe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==me.call(e))&&(!(t=de(e))||(n=_e.call(t,"constructor")&&t.constructor,"function"==typeof n&&be.call(n)===Ee))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){a(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(u(e))for(n=e.length;r<n&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(u(Object(e))?Pe.merge(n,"string"==typeof e?[e]:e):ve.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ge.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,a=[];if(u(e))for(r=e.length;o<r;o++)i=t(e[o],o,n),null!=i&&a.push(i);else for(o in e)i=t(e[o],o,n),null!=i&&a.push(i);return pe(a)},guid:1,support:Se}),"function"==typeof Symbol&&(Pe.fn[Symbol.iterator]=fe[Symbol.iterator]),Pe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ye["[object "+t+"]"]=t.toLowerCase()});var Ce=/*!
	 * Sizzle CSS Selector Engine v2.3.5
	 * https://sizzlejs.com/
	 *
	 * Copyright JS Foundation and other contributors
	 * Released under the MIT license
	 * https://js.foundation/
	 *
	 * Date: 2020-03-14
	 */
function(e){function t(e,t,n,r){var i,o,a,s,u,c,l,d=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&(A(t),t=t||D,R)){if(11!==p&&(u=_e.exec(e)))if(i=u[1]){if(9===p){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(d&&(a=d.getElementById(i))&&F(t,a)&&a.id===i)return n.push(a),n}else{if(u[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&S.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(i)),n}if(S.qsa&&!J[e+" "]&&(!j||!j.test(e))&&(1!==p||"object"!==t.nodeName.toLowerCase())){if(l=e,d=t,1===p&&(fe.test(e)||le.test(e))){for(d=be.test(e)&&f(t.parentNode)||t,d===t&&S.scope||((s=t.getAttribute("id"))?s=s.replace(we,Te):t.setAttribute("id",s=B)),c=k(e),o=c.length;o--;)c[o]=(s?"#"+s:":scope")+" "+h(c[o]);l=c.join(",")}try{return Z.apply(n,d.querySelectorAll(l)),n}catch(t){J(e,!0)}finally{s===B&&t.removeAttribute("id")}}}return P(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[B]=!0,e}function i(e){var t=D.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ke(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function f(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=H++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var c,l,f,d=[V,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(f=t[B]||(t[B]={}),l=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[o])&&c[0]===V&&c[1]===s)return d[2]=c[2];if(l[o]=d,d[2]=e(t,n,u))return!0}return!1}}function v(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function y(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function m(e,t,n,i,o,a){return i&&!i[B]&&(i=m(i)),o&&!o[B]&&(o=m(o,a)),r(function(r,a,s,u){var c,l,f,d=[],h=[],p=a.length,v=r||g(t||"*",s.nodeType?[s]:s,[]),m=!e||!r&&t?v:y(v,d,e,s,u),_=n?o||(r?e:p||i)?[]:a:m;if(n&&n(m,_,s,u),i)for(c=y(_,h),i(c,[],s,u),l=c.length;l--;)(f=c[l])&&(_[h[l]]=!(m[h[l]]=f));if(r){if(o||e){if(o){for(c=[],l=_.length;l--;)(f=_[l])&&c.push(m[l]=f);o(null,_=[],c,u)}for(l=_.length;l--;)(f=_[l])&&(c=o?te(r,f):d[l])>-1&&(r[c]=!(a[c]=f))}}else _=y(_===a?_.splice(p,_.length):_),o?o(null,a,_,u):Z.apply(a,_)})}function _(e){for(var t,n,r,i=e.length,o=w.relative[e[0].type],a=o||w.relative[" "],s=o?1:0,u=p(function(e){return e===t},a,!0),c=p(function(e){return te(t,e)>-1},a,!0),l=[function(e,n,r){var i=!o&&(r||n!==C)||((t=n).nodeType?u(e,n,r):c(e,n,r));return t=null,i}];s<i;s++)if(n=w.relative[e[s].type])l=[p(v(l),n)];else{if(n=w.filter[e[s].type].apply(null,e[s].matches),n[B]){for(r=++s;r<i&&!w.relative[e[r].type];r++);return m(s>1&&v(l),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ue,"$1"),n,s<r&&_(e.slice(s,r)),r<i&&_(e=e.slice(r)),r<i&&h(e))}l.push(n)}return v(l)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,u,c){var l,f,d,h=0,p="0",v=r&&[],g=[],m=C,_=r||o&&w.find.TAG("*",c),b=V+=null==m?1:Math.random()||.1,E=_.length;for(c&&(C=a==D||a||c);p!==E&&null!=(l=_[p]);p++){if(o&&l){for(f=0,a||l.ownerDocument==D||(A(l),s=!R);d=e[f++];)if(d(l,a||D,s)){u.push(l);break}c&&(V=b)}i&&((l=!d&&l)&&h--,r&&v.push(l))}if(h+=p,i&&p!==h){for(f=0;d=n[f++];)d(v,g,a,s);if(r){if(h>0)for(;p--;)v[p]||g[p]||(g[p]=$.call(u));g=y(g)}Z.apply(u,g),c&&!r&&g.length>0&&h+n.length>1&&t.uniqueSort(u)}return c&&(V=b,C=m),v};return i?r(a):a}var E,S,w,T,O,k,x,P,C,M,I,A,D,N,R,j,L,U,F,B="sizzle"+1*new Date,K=e.document,V=0,H=0,G=n(),W=n(),q=n(),J=n(),Y=function(e,t){return e===t&&(I=!0),0},z={}.hasOwnProperty,X=[],$=X.pop,Q=X.push,Z=X.push,ee=X.slice,te=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",oe="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+re+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(re+"+","g"),ue=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),ce=new RegExp("^"+re+"*,"+re+"*"),le=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),fe=new RegExp(re+"|>"),de=new RegExp(ae),he=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},ve=/HTML$/i,ge=/^(?:input|select|textarea|button)$/i,ye=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,_e=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,Ee=new RegExp("\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\([^\\r\\n\\f])","g"),Se=function(e,t){var n="0x"+e.slice(1)-65536;return t?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},we=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Te=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Oe=function(){A()},ke=p(function(e){return e.disabled===!0&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Z.apply(X=ee.call(K.childNodes),K.childNodes),X[K.childNodes.length].nodeType}catch(e){Z={apply:X.length?function(e,t){Q.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}S=t.support={},O=t.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!ve.test(t||n&&n.nodeName||"HTML")},A=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:K;return r!=D&&9===r.nodeType&&r.documentElement?(D=r,N=D.documentElement,R=!O(D),K!=D&&(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Oe,!1):n.attachEvent&&n.attachEvent("onunload",Oe)),S.scope=i(function(e){return N.appendChild(e).appendChild(D.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),S.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),S.getElementsByTagName=i(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),S.getElementsByClassName=me.test(D.getElementsByClassName),S.getById=i(function(e){return N.appendChild(e).id=B,!D.getElementsByName||!D.getElementsByName(B).length}),S.getById?(w.filter.ID=function(e){var t=e.replace(Ee,Se);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&R){var n=t.getElementById(e);return n?[n]:[]}}):(w.filter.ID=function(e){var t=e.replace(Ee,Se);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&R){var n,r,i,o=t.getElementById(e);if(o){if(n=o.getAttributeNode("id"),n&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if(n=o.getAttributeNode("id"),n&&n.value===e)return[o]}return[]}}),w.find.TAG=S.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):S.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},w.find.CLASS=S.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&R)return t.getElementsByClassName(e)},L=[],j=[],(S.qsa=me.test(D.querySelectorAll))&&(i(function(e){var t;N.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+re+"*(?:value|"+ne+")"),e.querySelectorAll("[id~="+B+"-]").length||j.push("~="),t=D.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||j.push("\\["+re+"*name"+re+"*="+re+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||j.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||j.push(".#.+[+~]"),e.querySelectorAll("\\\f"),j.push("[\\r\\n\\f]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+re+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&j.push(":enabled",":disabled"),N.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(S.matchesSelector=me.test(U=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&i(function(e){S.disconnectedMatch=U.call(e,"*"),U.call(e,"[s!='']:x"),L.push("!=",ae)}),j=j.length&&new RegExp(j.join("|")),L=L.length&&new RegExp(L.join("|")),t=me.test(N.compareDocumentPosition),F=t||me.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!S.sortDetached&&t.compareDocumentPosition(e)===n?e==D||e.ownerDocument==K&&F(K,e)?-1:t==D||t.ownerDocument==K&&F(K,t)?1:M?te(M,e)-te(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!i||!o)return e==D?-1:t==D?1:i?-1:o?1:M?te(M,e)-te(M,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?a(s[r],u[r]):s[r]==K?-1:u[r]==K?1:0},D):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if(A(e),S.matchesSelector&&R&&!J[n+" "]&&(!L||!L.test(n))&&(!j||!j.test(n)))try{var r=U.call(e,n);if(r||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){J(n,!0)}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!=D&&A(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!=D&&A(e);var n=w.attrHandle[t.toLowerCase()],r=n&&z.call(w.attrHandle,t.toLowerCase())?n(e,t,!R):void 0;return void 0!==r?r:S.attributes||!R?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(we,Te)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(I=!S.detectDuplicates,M=!S.sortStable&&e.slice(0),e.sort(Y),I){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return M=null,e},T=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=T(t);return n},w=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ee,Se),e[3]=(e[3]||e[4]||e[5]||"").replace(Ee,Se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ee,Se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=G[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&G(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,f,d,h,p,v=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),m=!u&&!s,_=!1;if(g){if(o){for(;v;){for(d=t;d=d[v];)if(s?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;p=v="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&m){for(d=g,f=d[B]||(d[B]={}),l=f[d.uniqueID]||(f[d.uniqueID]={}),c=l[e]||[],h=c[0]===V&&c[1],_=h&&c[2],d=h&&g.childNodes[h];d=++h&&d&&d[v]||(_=h=0)||p.pop();)if(1===d.nodeType&&++_&&d===t){l[e]=[V,h,_];break}}else if(m&&(d=t,f=d[B]||(d[B]={}),l=f[d.uniqueID]||(f[d.uniqueID]={}),c=l[e]||[],h=c[0]===V&&c[1],_=h),_===!1)for(;(d=++h&&d&&d[v]||(_=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++_||(m&&(f=d[B]||(d[B]={}),l=f[d.uniqueID]||(f[d.uniqueID]={}),l[e]=[V,_]),d!==t)););return _-=i,_===r||_%r===0&&_/r>=0}}},PSEUDO:function(e,n){var i,o=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(n):o.length>1?(i=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=te(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=x(e.replace(ue,"$1"));return i[B]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(Ee,Se),function(t){return(t.textContent||T(t)).indexOf(e)>-1}}),lang:r(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ee,Se).toLowerCase(),function(t){var n;do if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return ye.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},w.pseudos.nth=w.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[E]=s(E);for(E in{submit:!0,reset:!0})w.pseudos[E]=u(E);return d.prototype=w.filters=w.pseudos,w.setFilters=new d,k=t.tokenize=function(e,n){var r,i,o,a,s,u,c,l=W[e+" "];if(l)return n?0:l.slice(0);for(s=e,u=[],c=w.preFilter;s;){r&&!(i=ce.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=le.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),s=s.slice(r.length));for(a in w.filter)!(i=pe[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):W(e,u).slice(0)},x=t.compile=function(e,t){var n,r=[],i=[],o=q[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=_(t[n]),o[B]?r.push(o):i.push(o);o=q(e,b(i,r)),o.selector=e}return o},P=t.select=function(e,t,n,r){var i,o,a,s,u,c="function"==typeof e&&e,l=!r&&k(e=c.selector||e);if(n=n||[],1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&R&&w.relative[o[1].type]){if(t=(w.find.ID(a.matches[0].replace(Ee,Se),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=pe.needsContext.test(e)?0:o.length;i--&&(a=o[i],!w.relative[s=a.type]);)if((u=w.find[s])&&(r=u(a.matches[0].replace(Ee,Se),be.test(o[0].type)&&f(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&h(o),!e)return Z.apply(n,r),n;break}}return(c||x(e,l))(r,t,!R,n,!t||be.test(e)&&f(t.parentNode)||t),n},S.sortStable=B.split("").sort(Y).join("")===B,S.detectDuplicates=!!I,A(),S.sortDetached=i(function(e){return 1&e.compareDocumentPosition(D.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),S.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(n);Pe.find=Ce,Pe.expr=Ce.selectors,Pe.expr[":"]=Pe.expr.pseudos,Pe.uniqueSort=Pe.unique=Ce.uniqueSort,Pe.text=Ce.getText,Pe.isXMLDoc=Ce.isXML,Pe.contains=Ce.contains,Pe.escapeSelector=Ce.escape;var Me=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Pe(e).is(n))break;r.push(e)}return r},Ie=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ae=Pe.expr.match.needsContext,De=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Pe.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Pe.find.matchesSelector(r,e)?[r]:[]:Pe.find.matches(e,Pe.grep(t,function(e){return 1===e.nodeType}))},Pe.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(Pe(e).filter(function(){for(t=0;t<r;t++)if(Pe.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)Pe.find(e,i[t],n);return r>1?Pe.uniqueSort(n):n},filter:function(e){return this.pushStack(l(this,e||[],!1))},not:function(e){return this.pushStack(l(this,e||[],!0))},is:function(e){return!!l(this,"string"==typeof e&&Ae.test(e)?Pe(e):e||[],!1).length}});var Ne,Re=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,je=Pe.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||Ne,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Re.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof Pe?t[0]:t,Pe.merge(this,Pe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:Oe,!0)),De.test(r[1])&&Pe.isPlainObject(t))for(r in t)we(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=Oe.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):we(e)?void 0!==n.ready?n.ready(e):e(Pe):Pe.makeArray(e,this)};je.prototype=Pe.fn,Ne=Pe(Oe);var Le=/^(?:parents|prev(?:Until|All))/,Ue={children:!0,contents:!0,next:!0,prev:!0};Pe.fn.extend({has:function(e){var t=Pe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Pe.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&Pe(e);if(!Ae.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Pe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Pe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ge.call(Pe(e),this[0]):ge.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Pe.uniqueSort(Pe.merge(this.get(),Pe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Pe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Me(e,"parentNode")},parentsUntil:function(e,t,n){return Me(e,"parentNode",n)},next:function(e){return f(e,"nextSibling")},prev:function(e){return f(e,"previousSibling")},nextAll:function(e){return Me(e,"nextSibling")},prevAll:function(e){return Me(e,"previousSibling")},nextUntil:function(e,t,n){return Me(e,"nextSibling",n)},prevUntil:function(e,t,n){return Me(e,"previousSibling",n)},siblings:function(e){return Ie((e.parentNode||{}).firstChild,e)},children:function(e){return Ie(e.firstChild)},contents:function(e){return null!=e.contentDocument&&de(e.contentDocument)?e.contentDocument:(c(e,"template")&&(e=e.content||e),Pe.merge([],e.childNodes))}},function(e,t){Pe.fn[e]=function(n,r){var i=Pe.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Pe.filter(r,i)),this.length>1&&(Ue[e]||Pe.uniqueSort(i),Le.test(e)&&i.reverse()),this.pushStack(i)}});var Fe=/[^\x20\t\r\n\f]+/g;Pe.Callbacks=function(e){e="string"==typeof e?d(e):Pe.extend({},e);var t,n,r,i,o=[],a=[],u=-1,c=function(){for(i=i||e.once,r=t=!0;a.length;u=-1)for(n=a.shift();++u<o.length;)o[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(u=o.length-1,a.push(n)),function t(n){Pe.each(n,function(n,r){we(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==s(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return Pe.each(arguments,function(e,t){for(var n;(n=Pe.inArray(t,o,n))>-1;)o.splice(n,1),n<=u&&u--}),this},has:function(e){return e?Pe.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},Pe.extend({Deferred:function(e){var t=[["notify","progress",Pe.Callbacks("memory"),Pe.Callbacks("memory"),2],["resolve","done",Pe.Callbacks("once memory"),Pe.Callbacks("once memory"),0,"resolved"],["reject","fail",Pe.Callbacks("once memory"),Pe.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return Pe.Deferred(function(n){Pe.each(t,function(t,r){var i=we(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&we(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){function o(e,t,r,i){return function(){var s=this,u=arguments,c=function(){var n,c;if(!(e<a)){if(n=r.apply(s,u),n===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,we(c)?i?c.call(n,o(a,t,h,i),o(a,t,p,i)):(a++,c.call(n,o(a,t,h,i),o(a,t,p,i),o(a,t,h,t.notifyWith))):(r!==h&&(s=void 0,u=[n]),(i||t.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(n){Pe.Deferred.exceptionHook&&Pe.Deferred.exceptionHook(n,l.stackTrace),e+1>=a&&(r!==p&&(s=void 0,u=[n]),t.rejectWith(s,u))}};e?l():(Pe.Deferred.getStackHook&&(l.stackTrace=Pe.Deferred.getStackHook()),n.setTimeout(l))}}var a=0;return Pe.Deferred(function(n){t[0][3].add(o(0,n,we(i)?i:h,n.notifyWith)),t[1][3].add(o(0,n,we(e)?e:h)),t[2][3].add(o(0,n,we(r)?r:p))}).promise()},promise:function(e){return null!=e?Pe.extend(e,i):i}},o={};return Pe.each(t,function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=he.call(arguments),o=Pe.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?he.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(v(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||we(i[n]&&i[n].then)))return o.then();for(;n--;)v(i[n],a(n),o.reject);return o.promise()}});var Be=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Pe.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Be.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},Pe.readyException=function(e){n.setTimeout(function(){throw e})};var Ke=Pe.Deferred();Pe.fn.ready=function(e){return Ke.then(e).catch(function(e){Pe.readyException(e)}),this},Pe.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--Pe.readyWait:Pe.isReady)||(Pe.isReady=!0,e!==!0&&--Pe.readyWait>0||Ke.resolveWith(Oe,[Pe]))}}),Pe.ready.then=Ke.then,"complete"===Oe.readyState||"loading"!==Oe.readyState&&!Oe.documentElement.doScroll?n.setTimeout(Pe.ready):(Oe.addEventListener("DOMContentLoaded",g),n.addEventListener("load",g));var Ve=function(e,t,n,r,i,o,a){var u=0,c=e.length,l=null==n;if("object"===s(n)){i=!0;for(u in n)Ve(e,t,u,n[u],!0,o,a)}else if(void 0!==r&&(i=!0,we(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(Pe(e),n)})),t))for(;u<c;u++)t(e[u],n,a?r:r.call(e[u],u,t(e[u],n)));return i?e:l?t.call(e):c?t(e[0],n):o},He=/^-ms-/,Ge=/-([a-z])/g,We=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};_.uid=1,_.prototype={cache:function(e){var t=e[this.expando];return t||(t=Object.create(null),We(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[m(t)]=n;else for(r in t)i[m(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][m(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(m):(t=m(t),t=t in r?[t]:t.match(Fe)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||Pe.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Pe.isEmptyObject(t)}};var qe=new _,Je=new _,Ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ze=/[A-Z]/g;Pe.extend({hasData:function(e){return Je.hasData(e)||qe.hasData(e)},data:function(e,t,n){return Je.access(e,t,n)},removeData:function(e,t){Je.remove(e,t)},_data:function(e,t,n){return qe.access(e,t,n)},_removeData:function(e,t){qe.remove(e,t)}}),Pe.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Je.get(o),1===o.nodeType&&!qe.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=m(r.slice(5)),E(o,r,i[r])));qe.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Je.set(this,e)}):Ve(this,function(t){var n;if(o&&void 0===t){if(n=Je.get(o,e),void 0!==n)return n;if(n=E(o,e),void 0!==n)return n}else this.each(function(){Je.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Je.remove(this,e)})}}),Pe.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=qe.get(e,t),n&&(!r||Array.isArray(n)?r=qe.access(e,t,Pe.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Pe.queue(e,t),r=n.length,i=n.shift(),o=Pe._queueHooks(e,t),a=function(){Pe.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return qe.get(e,n)||qe.access(e,n,{empty:Pe.Callbacks("once memory").add(function(){qe.remove(e,[t+"queue",n])})})}}),Pe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Pe.queue(this[0],e):void 0===t?this:this.each(function(){var n=Pe.queue(this,e,t);Pe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Pe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Pe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Pe.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=qe.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$e=new RegExp("^(?:([+-])=|)("+Xe+")([a-z%]*)$","i"),Qe=["Top","Right","Bottom","Left"],Ze=Oe.documentElement,et=function(e){return Pe.contains(e.ownerDocument,e)},tt={composed:!0};Ze.getRootNode&&(et=function(e){return Pe.contains(e.ownerDocument,e)||e.getRootNode(tt)===e.ownerDocument});var nt=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&et(e)&&"none"===Pe.css(e,"display")},rt={};Pe.fn.extend({show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nt(this)?Pe(this).show():Pe(this).hide()})}});var it=/^(?:checkbox|radio)$/i,ot=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,at=/^$|^module$|\/(?:java|ecma)script/i;
!function(){var e=Oe.createDocumentFragment(),t=e.appendChild(Oe.createElement("div")),n=Oe.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Se.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Se.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",Se.option=!!t.lastChild}();var st={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};st.tbody=st.tfoot=st.colgroup=st.caption=st.thead,st.th=st.td,Se.option||(st.optgroup=st.option=[1,"<select multiple='multiple'>","</select>"]);var ut=/<|&#?\w+;/,ct=/^key/,lt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ft=/^([^.]*)(?:\.(.+)|)/;Pe.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,c,l,f,d,h,p,v,g=qe.get(e);if(We(e))for(n.handler&&(o=n,n=o.handler,i=o.selector),i&&Pe.find.matchesSelector(Ze,i),n.guid||(n.guid=Pe.guid++),(u=g.events)||(u=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return"undefined"!=typeof Pe&&Pe.event.triggered!==t.type?Pe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Fe)||[""],c=t.length;c--;)s=ft.exec(t[c])||[],h=v=s[1],p=(s[2]||"").split(".").sort(),h&&(f=Pe.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=Pe.event.special[h]||{},l=Pe.extend({type:h,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Pe.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=u[h])||(d=u[h]=[],d.delegateCount=0,f.setup&&f.setup.call(e,r,p,a)!==!1||e.addEventListener&&e.addEventListener(h,a)),f.add&&(f.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,l):d.push(l),Pe.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,c,l,f,d,h,p,v,g=qe.hasData(e)&&qe.get(e);if(g&&(u=g.events)){for(t=(t||"").match(Fe)||[""],c=t.length;c--;)if(s=ft.exec(t[c])||[],h=v=s[1],p=(s[2]||"").split(".").sort(),h){for(f=Pe.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,d=u[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)l=d[o],!i&&v!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(d.splice(o,1),l.selector&&d.delegateCount--,f.remove&&f.remove.call(e,l));a&&!d.length&&(f.teardown&&f.teardown.call(e,p,g.handle)!==!1||Pe.removeEvent(e,h,g.handle),delete u[h])}else for(h in u)Pe.event.remove(e,h+t[c],n,r,!0);Pe.isEmptyObject(u)&&qe.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=Pe.event.fix(e),c=(qe.get(this,"events")||Object.create(null))[u.type]||[],l=Pe.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,u)!==!1){for(a=Pe.event.handlers.call(this,u,c),t=0;(i=a[t++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&o.namespace!==!1&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,r=((Pe.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(u.result=r)===!1&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||c.disabled!==!0)){for(o=[],a={},n=0;n<u;n++)r=t[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?Pe(i,this).index(c)>-1:Pe.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(Pe.Event.prototype,e,{enumerable:!0,configurable:!0,get:we(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Pe.expando]?e:new Pe.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return it.test(t.type)&&t.click&&c(t,"input")&&D(t,"click",P),!1},trigger:function(e){var t=this||e;return it.test(t.type)&&t.click&&c(t,"input")&&D(t,"click"),!0},_default:function(e){var t=e.target;return it.test(t.type)&&t.click&&c(t,"input")&&qe.get(t,"click")||c(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Pe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Pe.Event=function(e,t){return this instanceof Pe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?P:C,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Pe.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),void(this[Pe.expando]=!0)):new Pe.Event(e,t)},Pe.Event.prototype={constructor:Pe.Event,isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=P,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=P,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=P,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Pe.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ct.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&lt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Pe.event.addProp),Pe.each({focus:"focusin",blur:"focusout"},function(e,t){Pe.event.special[e]={setup:function(){return D(this,e,M),!1},trigger:function(){return D(this,e),!0},delegateType:t}}),Pe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Pe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||Pe.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Pe.fn.extend({on:function(e,t,n,r){return A(this,e,t,n,r)},one:function(e,t,n,r){return A(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Pe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=C),this.each(function(){Pe.event.remove(this,e,n,t)})}});var dt=/<script|<style|<link/i,ht=/checked\s*(?:[^=]|=\s*.checked.)/i,pt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Pe.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=et(e);if(!(Se.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Pe.isXMLDoc(e)))for(a=O(s),o=O(e),r=0,i=o.length;r<i;r++)U(o[r],a[r]);if(t)if(n)for(o=o||O(e),a=a||O(s),r=0,i=o.length;r<i;r++)L(o[r],a[r]);else L(e,s);return a=O(s,"script"),a.length>0&&k(a,!u&&O(e,"script")),s},cleanData:function(e){for(var t,n,r,i=Pe.event.special,o=0;void 0!==(n=e[o]);o++)if(We(n)){if(t=n[qe.expando]){if(t.events)for(r in t.events)i[r]?Pe.event.remove(n,r):Pe.removeEvent(n,r,t.handle);n[qe.expando]=void 0}n[Je.expando]&&(n[Je.expando]=void 0)}}}),Pe.fn.extend({detach:function(e){return B(this,e,!0)},remove:function(e){return B(this,e)},text:function(e){return Ve(this,function(e){return void 0===e?Pe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return F(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=N(this,e);t.appendChild(e)}})},prepend:function(){return F(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=N(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return F(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return F(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Pe.cleanData(O(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Pe.clone(this,e,t)})},html:function(e){return Ve(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!dt.test(e)&&!st[(ot.exec(e)||["",""])[1].toLowerCase()]){e=Pe.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(Pe.cleanData(O(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return F(this,arguments,function(t){var n=this.parentNode;Pe.inArray(this,e)<0&&(Pe.cleanData(O(this)),n&&n.replaceChild(t,this))},e)}}),Pe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Pe.fn[e]=function(e){for(var n,r=[],i=Pe(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),Pe(i[a])[t](n),ve.apply(r,n.get());return this.pushStack(r)}});var vt=new RegExp("^("+Xe+")(?!px)[a-z%]+$","i"),gt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},yt=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=o[i];return r},mt=new RegExp(Qe.join("|"),"i");!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ze.appendChild(c).appendChild(l);var e=n.getComputedStyle(l);r="1%"!==e.top,u=12===t(e.marginLeft),l.style.right="60%",a=36===t(e.right),i=36===t(e.width),l.style.position="absolute",o=12===t(l.offsetWidth/3),Ze.removeChild(c),l=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,a,s,u,c=Oe.createElement("div"),l=Oe.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",Se.clearCloneStyle="content-box"===l.style.backgroundClip,Pe.extend(Se,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,r,i;return null==s&&(e=Oe.createElement("table"),t=Oe.createElement("tr"),r=Oe.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",r.style.height="9px",Ze.appendChild(e).appendChild(t).appendChild(r),i=n.getComputedStyle(t),s=parseInt(i.height)>3,Ze.removeChild(e)),s}}))}();var _t=["Webkit","Moz","ms"],bt=Oe.createElement("div").style,Et={},St=/^(none|table(?!-c[ea]).+)/,wt=/^--/,Tt={position:"absolute",visibility:"hidden",display:"block"},Ot={letterSpacing:"0",fontWeight:"400"};Pe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=K(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=m(t),u=wt.test(t),c=e.style;return u||(t=G(s)),a=Pe.cssHooks[t]||Pe.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t]:(o=typeof n,"string"===o&&(i=$e.exec(n))&&i[1]&&(n=S(e,t,i),o="number"),null!=n&&n===n&&("number"!==o||u||(n+=i&&i[3]||(Pe.cssNumber[s]?"":"px")),Se.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,a,s=m(t),u=wt.test(t);return u||(t=G(s)),a=Pe.cssHooks[t]||Pe.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=K(e,t,r)),"normal"===i&&t in Ot&&(i=Ot[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),Pe.each(["height","width"],function(e,t){Pe.cssHooks[t]={get:function(e,n,r){if(n)return!St.test(Pe.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?J(e,t,r):yt(e,Tt,function(){return J(e,t,r)})},set:function(e,n,r){var i,o=gt(e),a=!Se.scrollboxSize()&&"absolute"===o.position,s=a||r,u=s&&"border-box"===Pe.css(e,"boxSizing",!1,o),c=r?q(e,t,r,u,o):0;return u&&a&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-q(e,t,"border",!1,o)-.5)),c&&(i=$e.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=Pe.css(e,t)),W(e,n,c)}}}),Pe.cssHooks.marginLeft=V(Se.reliableMarginLeft,function(e,t){if(t)return(parseFloat(K(e,"marginLeft"))||e.getBoundingClientRect().left-yt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Pe.each({margin:"",padding:"",border:"Width"},function(e,t){Pe.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Qe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(Pe.cssHooks[e+t].set=W)}),Pe.fn.extend({css:function(e,t){return Ve(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=gt(e),i=t.length;a<i;a++)o[t[a]]=Pe.css(e,t[a],!1,r);return o}return void 0!==n?Pe.style(e,t,n):Pe.css(e,t)},e,t,arguments.length>1)}}),Pe.Tween=Y,Y.prototype={constructor:Y,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||Pe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Pe.cssNumber[n]?"":"px")},cur:function(){var e=Y.propHooks[this.prop];return e&&e.get?e.get(this):Y.propHooks._default.get(this)},run:function(e){var t,n=Y.propHooks[this.prop];return this.options.duration?this.pos=t=Pe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Y.propHooks._default.set(this),this}},Y.prototype.init.prototype=Y.prototype,Y.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Pe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){Pe.fx.step[e.prop]?Pe.fx.step[e.prop](e):1!==e.elem.nodeType||!Pe.cssHooks[e.prop]&&null==e.elem.style[G(e.prop)]?e.elem[e.prop]=e.now:Pe.style(e.elem,e.prop,e.now+e.unit)}}},Y.propHooks.scrollTop=Y.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Pe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Pe.fx=Y.prototype.init,Pe.fx.step={};var kt,xt,Pt=/^(?:toggle|show|hide)$/,Ct=/queueHooks$/;Pe.Animation=Pe.extend(te,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return S(n.elem,e,$e.exec(t),n),n}]},tweener:function(e,t){we(e)?(t=e,e=["*"]):e=e.match(Fe);for(var n,r=0,i=e.length;r<i;r++)n=e[r],te.tweeners[n]=te.tweeners[n]||[],te.tweeners[n].unshift(t)},prefilters:[Z],prefilter:function(e,t){t?te.prefilters.unshift(e):te.prefilters.push(e)}}),Pe.speed=function(e,t,n){var r=e&&"object"==typeof e?Pe.extend({},e):{complete:n||!n&&t||we(e)&&e,duration:e,easing:n&&t||t&&!we(t)&&t};return Pe.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in Pe.fx.speeds?r.duration=Pe.fx.speeds[r.duration]:r.duration=Pe.fx.speeds._default),null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){we(r.old)&&r.old.call(this),r.queue&&Pe.dequeue(this,r.queue)},r},Pe.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Pe.isEmptyObject(e),o=Pe.speed(t,n,r),a=function(){var t=te(this,Pe.extend({},e),o);(i||qe.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Pe.timers,a=qe.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Ct.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||Pe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=qe.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Pe.timers,a=r?r.length:0;for(n.finish=!0,Pe.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Pe.each(["toggle","show","hide"],function(e,t){var n=Pe.fn[t];Pe.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate($(t,!0),e,r,i)}}),Pe.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Pe.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Pe.timers=[],Pe.fx.tick=function(){var e,t=0,n=Pe.timers;for(kt=Date.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Pe.fx.stop(),kt=void 0},Pe.fx.timer=function(e){Pe.timers.push(e),Pe.fx.start()},Pe.fx.interval=13,Pe.fx.start=function(){xt||(xt=!0,z())},Pe.fx.stop=function(){xt=null},Pe.fx.speeds={slow:600,fast:200,_default:400},Pe.fn.delay=function(e,t){return e=Pe.fx?Pe.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})},function(){var e=Oe.createElement("input"),t=Oe.createElement("select"),n=t.appendChild(Oe.createElement("option"));e.type="checkbox",Se.checkOn=""!==e.value,Se.optSelected=n.selected,e=Oe.createElement("input"),e.value="t",e.type="radio",Se.radioValue="t"===e.value}();var Mt,It=Pe.expr.attrHandle;Pe.fn.extend({attr:function(e,t){return Ve(this,Pe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Pe.removeAttr(this,e)})}}),Pe.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?Pe.prop(e,t,n):(1===o&&Pe.isXMLDoc(e)||(i=Pe.attrHooks[t.toLowerCase()]||(Pe.expr.match.bool.test(t)?Mt:void 0)),void 0!==n?null===n?void Pe.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Pe.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!Se.radioValue&&"radio"===t&&c(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Fe);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),Mt={set:function(e,t,n){return t===!1?Pe.removeAttr(e,n):e.setAttribute(n,n),n}},Pe.each(Pe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=It[t]||Pe.find.attr;It[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=It[a],It[a]=i,i=null!=n(e,t,r)?a:null,It[a]=o),i}});var At=/^(?:input|select|textarea|button)$/i,Dt=/^(?:a|area)$/i;Pe.fn.extend({prop:function(e,t){return Ve(this,Pe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Pe.propFix[e]||e]})}}),Pe.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&Pe.isXMLDoc(e)||(t=Pe.propFix[t]||t,i=Pe.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=Pe.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||Dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Se.optSelected||(Pe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Pe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Pe.propFix[this.toLowerCase()]=this}),Pe.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(we(e))return this.each(function(t){Pe(this).addClass(e.call(this,t,re(this)))});if(t=ie(e),t.length)for(;n=this[u++];)if(i=re(n),r=1===n.nodeType&&" "+ne(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=ne(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(we(e))return this.each(function(t){Pe(this).removeClass(e.call(this,t,re(this)))});if(!arguments.length)return this.attr("class","");if(t=ie(e),t.length)for(;n=this[u++];)if(i=re(n),r=1===n.nodeType&&" "+ne(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=ne(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):we(e)?this.each(function(n){Pe(this).toggleClass(e.call(this,n,re(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=Pe(this),a=ie(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=re(this),t&&qe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":qe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ne(re(n))+" ").indexOf(t)>-1)return!0;return!1}});var Nt=/\r/g;Pe.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=we(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Pe(this).val()):e,null==i?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=Pe.map(i,function(e){return null==e?"":e+""})),t=Pe.valHooks[this.type]||Pe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=Pe.valHooks[i.type]||Pe.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Nt,""):null==n?"":n)}}}),Pe.extend({valHooks:{option:{get:function(e){var t=Pe.find.attr(e,"value");return null!=t?t:ne(Pe.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(n=i[r],(n.selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!c(n.parentNode,"optgroup"))){if(t=Pe(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=Pe.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=Pe.inArray(Pe.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Pe.each(["radio","checkbox"],function(){Pe.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Pe.inArray(Pe(e).val(),t)>-1}},Se.checkOn||(Pe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Se.focusin="onfocusin"in n;var Rt=/^(?:focusinfocus|focusoutblur)$/,jt=function(e){e.stopPropagation()};Pe.extend(Pe.event,{trigger:function(e,t,r,i){var o,a,s,u,c,l,f,d,h=[r||Oe],p=_e.call(e,"type")?e.type:e,v=_e.call(e,"namespace")?e.namespace.split("."):[];if(a=d=s=r=r||Oe,3!==r.nodeType&&8!==r.nodeType&&!Rt.test(p+Pe.event.triggered)&&(p.indexOf(".")>-1&&(v=p.split("."),p=v.shift(),v.sort()),c=p.indexOf(":")<0&&"on"+p,e=e[Pe.expando]?e:new Pe.Event(p,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:Pe.makeArray(t,[e]),f=Pe.event.special[p]||{},i||!f.trigger||f.trigger.apply(r,t)!==!1)){if(!i&&!f.noBubble&&!Te(r)){for(u=f.delegateType||p,Rt.test(u+p)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||Oe)&&h.push(s.defaultView||s.parentWindow||n)}for(o=0;(a=h[o++])&&!e.isPropagationStopped();)d=a,e.type=o>1?u:f.bindType||p,l=(qe.get(a,"events")||Object.create(null))[e.type]&&qe.get(a,"handle"),l&&l.apply(a,t),l=c&&a[c],l&&l.apply&&We(a)&&(e.result=l.apply(a,t),e.result===!1&&e.preventDefault());return e.type=p,i||e.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),t)!==!1||!We(r)||c&&we(r[p])&&!Te(r)&&(s=r[c],s&&(r[c]=null),Pe.event.triggered=p,e.isPropagationStopped()&&d.addEventListener(p,jt),r[p](),e.isPropagationStopped()&&d.removeEventListener(p,jt),Pe.event.triggered=void 0,s&&(r[c]=s)),e.result}},simulate:function(e,t,n){var r=Pe.extend(new Pe.Event,n,{type:e,isSimulated:!0});Pe.event.trigger(r,null,t)}}),Pe.fn.extend({trigger:function(e,t){return this.each(function(){Pe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Pe.event.trigger(e,t,n,!0)}}),Se.focusin||Pe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Pe.event.simulate(t,e.target,Pe.event.fix(e))};Pe.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=qe.access(r,t);i||r.addEventListener(e,n,!0),qe.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=qe.access(r,t)-1;i?qe.access(r,t,i):(r.removeEventListener(e,n,!0),qe.remove(r,t))}}});var Lt=n.location,Ut={guid:Date.now()},Ft=/\?/;Pe.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||Pe.error("Invalid XML: "+e),t};var Bt=/\[\]$/,Kt=/\r?\n/g,Vt=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;Pe.param=function(e,t){var n,r=[],i=function(e,t){var n=we(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!Pe.isPlainObject(e))Pe.each(e,function(){i(this.name,this.value)});else for(n in e)oe(n,e[n],t,i);return r.join("&")},Pe.fn.extend({serialize:function(){return Pe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Pe.prop(this,"elements");return e?Pe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Pe(this).is(":disabled")&&Ht.test(this.nodeName)&&!Vt.test(e)&&(this.checked||!it.test(e))}).map(function(e,t){var n=Pe(this).val();return null==n?null:Array.isArray(n)?Pe.map(n,function(e){return{name:t.name,value:e.replace(Kt,"\r\n")}}):{name:t.name,value:n.replace(Kt,"\r\n")}}).get()}});var Gt=/%20/g,Wt=/#.*$/,qt=/([?&])_=[^&]*/,Jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Yt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zt=/^(?:GET|HEAD)$/,Xt=/^\/\//,$t={},Qt={},Zt="*/".concat("*"),en=Oe.createElement("a");en.href=Lt.href,Pe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt.href,type:"GET",isLocal:Yt.test(Lt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Pe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ue(ue(e,Pe.ajaxSettings),t):ue(Pe.ajaxSettings,e)},ajaxPrefilter:ae($t),ajaxTransport:ae(Qt),ajax:function(e,t){function r(e,t,r,s){var c,d,h,b,E,S=t;l||(l=!0,u&&n.clearTimeout(u),i=void 0,a=s||"",w.readyState=e>0?4:0,c=e>=200&&e<300||304===e,r&&(b=ce(p,w,r)),!c&&Pe.inArray("script",p.dataTypes)>-1&&(p.converters["text script"]=function(){}),b=le(p,b,w,c),c?(p.ifModified&&(E=w.getResponseHeader("Last-Modified"),E&&(Pe.lastModified[o]=E),E=w.getResponseHeader("etag"),E&&(Pe.etag[o]=E)),204===e||"HEAD"===p.type?S="nocontent":304===e?S="notmodified":(S=b.state,d=b.data,h=b.error,c=!h)):(h=S,!e&&S||(S="error",e<0&&(e=0))),w.status=e,w.statusText=(t||S)+"",c?y.resolveWith(v,[d,S,w]):y.rejectWith(v,[w,S,h]),w.statusCode(_),_=void 0,f&&g.trigger(c?"ajaxSuccess":"ajaxError",[w,p,c?d:h]),m.fireWith(v,[w,S]),f&&(g.trigger("ajaxComplete",[w,p]),--Pe.active||Pe.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,a,s,u,c,l,f,d,h,p=Pe.ajaxSetup({},t),v=p.context||p,g=p.context&&(v.nodeType||v.jquery)?Pe(v):Pe.event,y=Pe.Deferred(),m=Pe.Callbacks("once memory"),_=p.statusCode||{},b={},E={},S="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=Jt.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)w.always(e[w.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||S;return i&&i.abort(t),r(0,t),this}};if(y.promise(w),p.url=((e||p.url||Lt.href)+"").replace(Xt,Lt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Fe)||[""],null==p.crossDomain){c=Oe.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=en.protocol+"//"+en.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Pe.param(p.data,p.traditional)),se($t,p,t,w),l)return w;f=Pe.event&&p.global,f&&0===Pe.active++&&Pe.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!zt.test(p.type),o=p.url.replace(Wt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Gt,"+")):(h=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Ft.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(o=o.replace(qt,"$1"),h=(Ft.test(o)?"&":"?")+"_="+Ut.guid++ +h),p.url=o+h),p.ifModified&&(Pe.lastModified[o]&&w.setRequestHeader("If-Modified-Since",Pe.lastModified[o]),Pe.etag[o]&&w.setRequestHeader("If-None-Match",Pe.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Zt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)w.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(v,w,p)===!1||l))return w.abort();if(S="abort",m.add(p.complete),w.done(p.success),w.fail(p.error),i=se(Qt,p,t,w)){if(w.readyState=1,f&&g.trigger("ajaxSend",[w,p]),l)return w;p.async&&p.timeout>0&&(u=n.setTimeout(function(){w.abort("timeout")},p.timeout));try{l=!1,i.send(b,r)}catch(e){if(l)throw e;r(-1,e)}}else r(-1,"No Transport");return w},getJSON:function(e,t,n){return Pe.get(e,t,n,"json")},getScript:function(e,t){return Pe.get(e,void 0,t,"script")}}),Pe.each(["get","post"],function(e,t){
Pe[t]=function(e,n,r,i){return we(n)&&(i=i||r,r=n,n=void 0),Pe.ajax(Pe.extend({url:e,type:t,dataType:i,data:n,success:r},Pe.isPlainObject(e)&&e))}}),Pe.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),Pe._evalUrl=function(e,t,n){return Pe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){Pe.globalEval(e,t,n)}})},Pe.fn.extend({wrapAll:function(e){var t;return this[0]&&(we(e)&&(e=e.call(this[0])),t=Pe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return we(e)?this.each(function(t){Pe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Pe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=we(e);return this.each(function(n){Pe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Pe(this).replaceWith(this.childNodes)}),this}}),Pe.expr.pseudos.hidden=function(e){return!Pe.expr.pseudos.visible(e)},Pe.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Pe.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var tn={0:200,1223:204},nn=Pe.ajaxSettings.xhr();Se.cors=!!nn&&"withCredentials"in nn,Se.ajax=nn=!!nn,Pe.ajaxTransport(function(e){var t,r;if(Se.cors||nn&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(tn[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),Pe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Pe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Pe.globalEval(e),e}}}),Pe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Pe.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,n;return{send:function(r,i){t=Pe("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),Oe.head.appendChild(t[0])},abort:function(){n&&n()}}}});var rn=[],on=/(=)\?(?=&|$)|\?\?/;Pe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=rn.pop()||Pe.expando+"_"+Ut.guid++;return this[e]=!0,e}}),Pe.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=e.jsonp!==!1&&(on.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&on.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=we(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(on,"$1"+i):e.jsonp!==!1&&(e.url+=(Ft.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||Pe.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?Pe(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,rn.push(i)),a&&we(o)&&o(a[0]),a=o=void 0}),"script"}),Se.createHTMLDocument=function(){var e=Oe.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),Pe.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,o;return t||(Se.createHTMLDocument?(t=Oe.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=Oe.location.href,t.head.appendChild(r)):t=Oe),i=De.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=x([e],t,o),o&&o.length&&Pe(o).remove(),Pe.merge([],i.childNodes))},Pe.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=ne(e.slice(s)),e=e.slice(0,s)),we(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&Pe.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?Pe("<div>").append(Pe.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},Pe.expr.pseudos.animated=function(e){return Pe.grep(Pe.timers,function(t){return e===t.elem}).length},Pe.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,c,l=Pe.css(e,"position"),f=Pe(e),d={};"static"===l&&(e.style.position="relative"),s=f.offset(),o=Pe.css(e,"top"),u=Pe.css(e,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),we(t)&&(t=t.call(e,n,Pe.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),f.css(d))}},Pe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Pe.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===Pe.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===Pe.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&(i=Pe(e).offset(),i.top+=Pe.css(e,"borderTopWidth",!0),i.left+=Pe.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-Pe.css(r,"marginTop",!0),left:t.left-i.left-Pe.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Pe.css(e,"position");)e=e.offsetParent;return e||Ze})}}),Pe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;Pe.fn[e]=function(r){return Ve(this,function(e,r,i){var o;return Te(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),Pe.each(["top","left"],function(e,t){Pe.cssHooks[t]=V(Se.pixelPosition,function(e,n){if(n)return n=K(e,t),vt.test(n)?Pe(e).position()[t]+"px":n})}),Pe.each({Height:"height",Width:"width"},function(e,t){Pe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Pe.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return Ve(this,function(t,n,i){var o;return Te(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?Pe.css(t,n,s):Pe.style(t,n,i,s)},t,a?i:void 0,a)}})}),Pe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Pe.fn[t]=function(e){return this.on(t,e)}}),Pe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Pe.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){Pe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var an=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Pe.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),we(e))return r=he.call(arguments,2),i=function(){return e.apply(t||this,r.concat(he.call(arguments)))},i.guid=e.guid=e.guid||Pe.guid++,i},Pe.holdReady=function(e){e?Pe.readyWait++:Pe.ready(!0)},Pe.isArray=Array.isArray,Pe.parseJSON=JSON.parse,Pe.nodeName=c,Pe.isFunction=we,Pe.isWindow=Te,Pe.camelCase=m,Pe.type=s,Pe.now=Date.now,Pe.isNumeric=function(e){var t=Pe.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},Pe.trim=function(e){return null==e?"":(e+"").replace(an,"")},r=[],i=function(){return Pe}.apply(t,r),!(void 0!==i&&(e.exports=i));var sn=n.jQuery,un=n.$;return Pe.noConflict=function(e){return n.$===Pe&&(n.$=un),e&&n.jQuery===Pe&&(n.jQuery=sn),Pe},"undefined"==typeof o&&(n.jQuery=n.$=Pe),Pe})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f=n(345),d=r(f),h="CampaignList",p="Read",v=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,h,p))}return a(t,e),s(t,[{key:"execute",value:function(){var e=this,n={version:2};u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,d.default.addGeoLocation(n),function(e){200==e.code},function(n){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",e)+"Error: "+JSON.stringify(n))})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(334),s=r(a),u=function(){function e(){i(this,e),this.timestamp=s.getFixedDateNow()}return o(e,[{key:"isSdkActivity",value:function(){return!0}}],[{key:"checkPropertyOneOf",value:function(e,t,n){if(!t.hasOwnProperty(e)){var r,i=[];for(r in t)t.hasOwnProperty(r)&&i.push(r);throw new Error(n+" is invalid! Should be one of: "+i+", actually equals="+e)}}},{key:"fixExtra",value:function(t,n){var r,i;for(r in t)if(t.hasOwnProperty(r))for(i in n)n.hasOwnProperty(i)&&r===i&&(t[n[i]]=t[r],delete t[r]);e.addUserSpecificExtra(t),e.addReferrers(t),s.filterExtraIsNumberOrString(t)}},{key:"addUserSpecificExtra",value:function(t){if(s.isUserDataActive()){var n=s.getUserProfile();e.addUserSpecificProfile(t,n,s.getUserIsChildProfile())}else{var r=s.getSilentUserProfile();e.addUserSpecificProfile(t,r,s.getSilentUserIsChildProfile())}}},{key:"addUserSpecificProfile",value:function(e,t,n){t&&(e||(e={}),e._household_profile=t,e._is_child_profile=n?n.toString():"false")}},{key:"addReferrers",value:function(e){var t=s.getReferrer(s),n=s.getFullReferrer(s);return t&&t.length>0&&(e||(e={}),e.referrer=t),n&&n.length>0&&(e||(e={}),e.referrer_detail=n),e}},{key:"addGeoLocation",value:function(e){return s.ALLOW_GEO_LOCATION&&s.LOCATION_AVAILABLE&&(e.latitude=s.LOCATION_LATITUDE,e.longitude=s.LOCATION_LONGITUDE),e}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},f=n(334),d=o(f),h=n(342),p=i(h),v="ConsumerDevice",g="RegisterSDK",y="LoginSDK",m=function(e){function t(e,n,r,i,o,u,c){a(this,t);var l=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v,n?g:y));return l.isSilent=n,l.username=r,l.extra=d.filterExtraIsNumberOrString(i),l.deviceExtra=d.filterExtraIsNumberOrString(o),l.profile=u,l.isChildProfile=c,l}return u(t,e),c(t,[{key:"execute",value:function(e,n){var i=this;if(this.isSilent){var o="silent";this.extra?this.extra.signup_type=o:this.extra={signup_type:o}}var a={};if(this.isSilent){var s=new r.UAParser,u=null==s.getOS().version||0===s.getOS().version.length?"UNKNOWN":s.getOS().version,c={browser_version:s.getBrowser().version,os_name:s.getOS().name,device_vendor:s.getDevice().vendor,device_model:s.getDevice().model,device_type:s.getDevice().type};if(this.deviceExtra){var f=this.deviceExtra;for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])}var p=null,v=s.getOS().name;console.log(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",this)+"parsedOsName: "+v);var g=!0,y=!1,m=void 0;try{for(var _,b=t.osNamesObjects[Symbol.iterator]();!(g=(_=b.next()).done);g=!0){var E=_.value;if(E.key)if(E.key.constructor===Array){var S=!0,w=!1,T=void 0;try{for(var O,k=E.key[Symbol.iterator]();!(S=(O=k.next()).done);S=!0){var x=O.value;if(v===x){p=E.value?E.value:x;break}}}catch(e){w=!0,T=e}finally{try{!S&&k.return&&k.return()}finally{if(w)throw T}}if(p)break}else if(v===E.key){p=E.value?E.value:E.key;break}}}catch(e){y=!0,m=e}finally{try{!g&&b.return&&b.return()}finally{if(y)throw m}}p||(p="Other"),a={hardware_id:this.username,hardware_id_type:"code",device_model_name:s.getBrowser().name,device_os:p,device_os_description:u,app_ver:d.APP_VER,sdk_ver:d.SDK_VER,app_code:d.APP_CODE,consumer_extra_data:this.extra?this.extra:void 0,device_extra_data:c}}else this.profile&&(this.extra||(this.extra={}),this.extra._household_profile=this.profile,this.extra._is_child_profile=this.isChildProfile?this.isChildProfile.toString():"false"),a={username:this.username,consumer_extra_data:this.extra?this.extra:void 0,consumer_id_src:d.getSilentConsumerId(),merge:e?e.toString():"false",app_ver:d.APP_VER,sdk_ver:d.SDK_VER,app_code:d.APP_CODE,device_id:d.getDeviceId()};l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,a,function(e){if(200===e.code){var r=e.data.passkey,o=e.data.consumer_id,a=e.data.device_id,s=e.data.session_id;d.saveConsumerRegistration(i.isSilent,i.username,r,o,a,s,i.profile,i.isChildProfile),i.context._onSessionChanged(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",i)),n&&n(e)}else console.log(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",i)+"Error on code: "+e.code),n&&n()},function(e){console.log(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",i)+"Error: "+JSON.stringify(e)),n&&n()})}}],[{key:"osNamesObjects",get:function(){return[{key:"Android"},{key:"Blackberry"},{key:"iOS"},{key:"Linux"},{key:"Unix"},{key:"WebOS"},{key:["MacOS","Mac OS"],value:"MacOS"},{key:"Windows"},{key:["Windows Phone","Windows Mobile","WinMobile","WinPhone"],value:"WinMobile"}]}}]),t}(p.default);t.default=m,e.exports=t.default}).call(t,n(347))},function(e,t,n){var r;/*!
	 * UAParser.js v0.7.21
	 * Lightweight JavaScript-based User-Agent string parser
	 * https://github.com/faisalman/ua-parser-js
	 *
	 * Copyright Â© 2012-2019 Faisal Salman <f@faisalman.com>
	 * Licensed under MIT License
	 */
!function(i,o){"use strict";var a="0.7.21",s="",u="?",c="function",l="undefined",f="object",d="string",h="major",p="model",v="name",g="type",y="vendor",m="version",_="architecture",b="console",E="mobile",S="tablet",w="smarttv",T="wearable",O="embedded",k={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===d?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},x={rgx:function(e,t){for(var n,r,i,a,s,u,l=0;l<t.length&&!s;){var d=t[l],h=t[l+1];for(n=r=0;n<d.length&&!s;)if(s=d[n++].exec(e))for(i=0;i<h.length;i++)u=s[++r],a=h[i],typeof a===f&&a.length>0?2==a.length?typeof a[1]==c?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3==a.length?typeof a[1]!==c||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):o:this[a[0]]=u?a[1].call(this,u,a[2]):o:4==a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):o):this[a]=u?u:o;l+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===f&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(k.has(t[n][r],e))return n===u?o:n}else if(k.has(t[n],e))return n===u?o:n;return e}},P={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},C={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[v,m],[/(opios)[\/\s]+([\w\.]+)/i],[[v,"Opera Mini"],m],[/\s(opr)\/([\w\.]+)/i],[[v,"Opera"],m],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[v,m],[/(konqueror)\/([\w\.]+)/i],[[v,"Konqueror"],m],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[v,"IE"],m],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[v,"Edge"],m],[/(yabrowser)\/([\w\.]+)/i],[[v,"Yandex"],m],[/(Avast)\/([\w\.]+)/i],[[v,"Avast Secure Browser"],m],[/(AVG)\/([\w\.]+)/i],[[v,"AVG Secure Browser"],m],[/(puffin)\/([\w\.]+)/i],[[v,"Puffin"],m],[/(focus)\/([\w\.]+)/i],[[v,"Firefox Focus"],m],[/(opt)\/([\w\.]+)/i],[[v,"Opera Touch"],m],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[v,"UCBrowser"],m],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],m],[/(windowswechat qbcore)\/([\w\.]+)/i],[[v,"WeChat(Win) Desktop"],m],[/(micromessenger)\/([\w\.]+)/i],[[v,"WeChat"],m],[/(brave)\/([\w\.]+)/i],[[v,"Brave"],m],[/(qqbrowserlite)\/([\w\.]+)/i],[v,m],[/(QQ)\/([\d\.]+)/i],[v,m],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[v,m],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[v,m],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[v,m],[/(MetaSr)[\/\s]?([\w\.]+)/i],[v],[/(LBBROWSER)/i],[v],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[m,[v,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[m,[v,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[v,m],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[m,[v,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[v,/(.+)/,"$1 WebView"],m],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[v,/(.+(?:g|us))(.+)/,"$1 $2"],m],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[m,[v,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[v,"Sailfish Browser"],m],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[v,m],[/(dolfin)\/([\w\.]+)/i],[[v,"Dolphin"],m],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[v,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[v,"Chrome"],m],[/(coast)\/([\w\.]+)/i],[[v,"Opera Coast"],m],[/fxios\/([\w\.-]+)/i],[m,[v,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[m,[v,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[m,v],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[v,"GSA"],m],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[v,[m,x.str,P.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[v,m],[/(navigator|netscape)\/([\w\.-]+)/i],[[v,"Netscape"],m],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[v,m]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,k.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[_,/ower/,"",k.lowerize]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[_,k.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[p,y,[g,S]],[/applecoremedia\/[\w\.]+ \((ipad)/],[p,[y,"Apple"],[g,S]],[/(apple\s{0,1}tv)/i],[[p,"Apple TV"],[y,"Apple"],[g,w]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[y,p,[g,S]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[p,[y,"Amazon"],[g,S]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[p,x.str,P.device.amazon.model],[y,"Amazon"],[g,E]],[/android.+aft([bms])\sbuild/i],[p,[y,"Amazon"],[g,w]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[p,y,[g,E]],[/\((ip[honed|\s\w*]+);/i],[p,[y,"Apple"],[g,E]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[y,p,[g,E]],[/\(bb10;\s(\w+)/i],[p,[y,"BlackBerry"],[g,E]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[p,[y,"Asus"],[g,S]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[y,"Sony"],[p,"Xperia Tablet"],[g,S]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[y,"Sony"],[g,E]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[y,p,[g,b]],[/android.+;\s(shield)\sbuild/i],[p,[y,"Nvidia"],[g,b]],[/(playstation\s[34portablevi]+)/i],[p,[y,"Sony"],[g,b]],[/(sprint\s(\w+))/i],[[y,x.str,P.device.sprint.vendor],[p,x.str,P.device.sprint.model],[g,E]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[y,[p,/_/g," "],[g,E]],[/(nexus\s9)/i],[p,[y,"HTC"],[g,S]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[p,[y,"Huawei"],[g,E]],[/android.+(bah2?-a?[lw]\d{2})/i],[p,[y,"Huawei"],[g,S]],[/(microsoft);\s(lumia[\s\w]+)/i],[y,p,[g,E]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[p,[y,"Microsoft"],[g,b]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[y,"Microsoft"],[g,E]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[p,[y,"Motorola"],[g,E]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[p,[y,"Motorola"],[g,S]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[y,k.trim],[p,k.trim],[g,w]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[y,"Samsung"],[g,w]],[/\(dtv[\);].+(aquos)/i],[p,[y,"Sharp"],[g,w]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[y,"Samsung"],p,[g,S]],[/smart-tv.+(samsung)/i],[y,[g,w],p],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[y,"Samsung"],p,[g,E]],[/sie-(\w*)/i],[p,[y,"Siemens"],[g,E]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[y,"Nokia"],p,[g,E]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[p,[y,"Acer"],[g,S]],[/android.+([vl]k\-?\d{3})\s+build/i],[p,[y,"LG"],[g,S]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[y,"LG"],p,[g,S]],[/(lg) netcast\.tv/i],[y,p,[g,w]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[p,[y,"LG"],[g,E]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[y,p,[g,S]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[p,[y,"Lenovo"],[g,S]],[/(lenovo)[_\s-]?([\w-]+)/i],[y,p,[g,E]],[/linux;.+((jolla));/i],[y,p,[g,E]],[/((pebble))app\/[\d\.]+\s/i],[y,p,[g,T]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[y,p,[g,E]],[/crkey/i],[[p,"Chromecast"],[y,"Google"],[g,w]],[/android.+;\s(glass)\s\d/i],[p,[y,"Google"],[g,T]],[/android.+;\s(pixel c)[\s)]/i],[p,[y,"Google"],[g,S]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[p,[y,"Google"],[g,E]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[p,/_/g," "],[y,"Xiaomi"],[g,E]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[p,/_/g," "],[y,"Xiaomi"],[g,S]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[p,[y,"Meizu"],[g,E]],[/(mz)-([\w-]{2,})/i],[[y,"Meizu"],p,[g,E]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[p,[y,"OnePlus"],[g,E]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[p,[y,"RCA"],[g,S]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[p,[y,"Dell"],[g,S]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[p,[y,"Verizon"],[g,S]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[y,"Barnes & Noble"],p,[g,S]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[p,[y,"NuVision"],[g,S]],[/android.+;\s(k88)\sbuild/i],[p,[y,"ZTE"],[g,S]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[p,[y,"Swiss"],[g,E]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[p,[y,"Swiss"],[g,S]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[p,[y,"Zeki"],[g,S]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[y,"Dragon Touch"],p,[g,S]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[p,[y,"Insignia"],[g,S]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[p,[y,"NextBook"],[g,S]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[y,"Voice"],p,[g,E]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[y,"LvTel"],p,[g,E]],[/android.+;\s(PH-1)\s/i],[p,[y,"Essential"],[g,E]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[p,[y,"Envizen"],[g,S]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[y,p,[g,S]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[p,[y,"MachSpeed"],[g,S]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[y,p,[g,S]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[p,[y,"Rotor"],[g,S]],[/android.+(KS(.+))\s+build/i],[p,[y,"Amazon"],[g,S]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[y,p,[g,S]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[g,k.lowerize],y,p],[/[\s\/\(](smart-?tv)[;\)]/i],[[g,w]],[/(android[\w\.\s\-]{0,9});.+build/i],[p,[y,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[m,[v,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[v,m],[/rv\:([\w\.]{1,9}).+(gecko)/i],[m,v]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[v,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[v,[m,x.str,P.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[v,"Windows"],[m,x.str,P.os.windows.version]],[/\((bb)(10);/i],[[v,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[v,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[v,"Symbian"],m],[/\((series40);/i],[v],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[v,"Firefox OS"],m],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[v,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[v,"Chromium OS"],m],[/(sunos)\s?([\w\.\d]*)/i],[[v,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[v,m],[/(haiku)\s(\w+)/i],[v,m],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[m,/_/g,"."],[v,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[v,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[v,m]]},M=function(e,t){if("object"==typeof e&&(t=e,e=o),!(this instanceof M))return new M(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:s),r=t?k.extend(C,t):C;return this.getBrowser=function(){var e={name:o,version:o};return x.rgx.call(e,n,r.browser),e.major=k.major(e.version),e},this.getCPU=function(){var e={architecture:o};return x.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return x.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:o,version:o};return x.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:o,version:o};return x.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};M.VERSION=a,M.BROWSER={NAME:v,MAJOR:h,VERSION:m},M.CPU={ARCHITECTURE:_},M.DEVICE={MODEL:p,VENDOR:y,TYPE:g,CONSOLE:b,MOBILE:E,SMARTTV:w,TABLET:S,WEARABLE:T,EMBEDDED:O},M.ENGINE={NAME:v,VERSION:m},M.OS={NAME:v,VERSION:m},typeof t!==l?(typeof e!==l&&e.exports&&(t=e.exports=M),t.UAParser=M):(r=function(){return M}.call(t,n,t,e),!(r!==o&&(e.exports=r)));var I=i&&(i.jQuery||i.Zepto);if(I&&!I.ua){var A=new M;I.ua=A.getResult(),I.ua.get=function(){return A.getUA()},I.ua.set=function(e){A.setUA(e);var t=A.getResult();for(var n in t)I.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=i([""],[""]),l=n(345),f=r(l),d=n(349),h=r(d),p=n(350),v=r(p),g=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.extra=Object.assign({},n),r.sdkActivity=!0,void 0===e||0===e.length?(r.eventType=t.eventTypes.app_action,f.default.fixExtra(r.extra,t.eventExtra)):t.eventTypes.hasOwnProperty(e)?r.eventType=e:(r.eventType=t.eventTypes.app_action,null!=r.extra&&void 0!==r.extra||(r.extra={}),f.default.fixExtra(r.extra,t.eventExtra),r.extra.action=e),r}return s(t,e),u(t,null,[{key:"eventTypes",get:function(){return Object.freeze({app_action:"app_action",background:"background",resume:"resume",uninstall:"uninstall",purchase:"purchase",install:"install",file_scan:"file_scan",restore:"restore",upload:"upload",download:"download",service_upgrade:"service_upgrade",error:"error",service_limit:"service_limit",media_consumption:"media_consumption",earn_points:"earn_points",redeem_points:"redeem_points",consumer_create:"consumer_create",device_create:"device_create",subscription_create:"subscription_create",playlist_create:"playlist_create",coupon_redeem:"coupon_redeem",coupon_create:"coupon_create",search:"search"})}},{key:"eventExtra",get:function(){return Object.freeze({action:"_action",sdk_ver:"_sdk_ver",duration:"_duration",referrer:"_referrer",referrer_detail:"_referrer_detail"})}}]),u(t,[{key:"isSdkActivity",value:function(){return this.sdkActivity}},{key:"_updateSdkActivity",value:function(e){this.sdkActivity=e}},{key:"store",value:function(e,t){e.dbManager&&e.dbManager.storeAppEvent(this,t)}},{key:"report",value:function(e,n){var r=t.buildEventDescriptor(this),i={event_data_arr:[r]};new h.default(e).report(f.default.addGeoLocation(i),n)}}],[{key:"buildEventDescriptor",value:function(e){if(e.extra&&"string"==typeof e.extra)try{e.extra=JSON.parse(e.extra)}catch(t){console.log("appEvent extra does not contain JSON: "+e.extra(c))}return{event_time:e.timestamp,event_type:e.eventType,extra_event_data:e.extra?e.extra:void 0}}},{key:"reportBatch",value:function(e,n,r,i){if(!n||n.length<=0)return void r();var o=n.map(t.buildEventDescriptor),a={event_data_arr:o},s=!0;n.every(function(e){return!e.sdkActivity||(s=!1,!1)}),new h.default(e).report(f.default.addGeoLocation(a),s?new v.default(v.default.CMSDKInternalFakeEventTypes.fake,null):null,r,i)}}]),t}(f.default);t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f="AppEvent",d="Create",h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,d))}return a(t,e),s(t,[{key:"report",value:function(e,n,r,i){var o=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,e,function(e){200===e.code?r&&r():i&&i()},function(e){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",o)+"Error: "+JSON.stringify(e)),i&&i()},n)}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(345),c=r(u),l=n(348),f=r(l),d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.appEvent=new f.default,r.appEvent.eventType=e,r.appEvent.extra=n,r.appEvent.extra=c.default.addReferrers(r.appEvent.extra),r.appEvent._updateSdkActivity(!1),r}return a(t,e),s(t,null,[{key:"CMSDKInternalEventTypes",get:function(){return Object.freeze({start:"start",stop:"stop",upgrade:"upgrade"})}},{key:"CMSDKInternalFakeEventTypes",get:function(){return Object.freeze({fake:"fake"})}}]),s(t,[{key:"store",value:function(e,t){e.dbManager&&e.dbManager.storeAppEvent(this.appEvent,t)}},{key:"report",value:function(e){this.appEvent.report(e,this)}},{key:"isSdkActivity",value:function(){return!1}}]),t}(c.default);t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=o([""],[""]),f=n(345),d=i(f),h=n(352),p=i(h),v=n(334),g=r(v),y=function(e){function t(e,n,r,i){a(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return d.default.checkPropertyOneOf(n,t.contentTypes,"Content type"),o.mediaId=e,o.contentType=n,o.extra=Object.assign({},i),r&&0!==r.length?t.eventTypes.hasOwnProperty(r)?o.eventType=r:(o.eventType=t.eventTypes.app_action,d.default.fixExtra(o.extra,t.eventExtra),o.extra.action=r):(o.eventType=t.eventTypes.app_action,d.default.fixExtra(o.extra,t.eventExtra)),o}return u(t,e),c(t,null,[{key:"internalNotificationMediaEventReportWithAppAction",value:function(e,n,r,i){i||(i={}),i.action=r;var o=new t(n,t.contentTypes.track,t.eventTypes.app_action,i);o.contentType="notification",e.eventManager.reportMediaEvent(o)}},{key:"internalNotificationMediaEventReportWithTimestamp",value:function(e,n,r,i,o){var a=new t(n,t.contentTypes.track,t.eventTypes.app_action,o);a.contentType="notification",a.eventType=r,a.timestamp=g.getFixedDateFromTimestamp(i),e.eventManager.reportMediaEvent(a)}},{key:"internalNotificationMediaEventReport",value:function(e,n,r,i){var o=new t(n,t.contentTypes.track,t.eventTypes.app_action,i);o.contentType="notification",o.eventType=r,e.eventManager.reportMediaEvent(o)}},{key:"internalMediaEventReport",value:function(e,n,r,i,o){var a,s=new t(n,r,i);if(void 0!==s.extra)for(a in o)o.hasOwnProperty(a)&&(s.extra[a]=o[a]);e.eventManager.reportMediaEvent(s)}},{key:"CMSDKInternalEventTypes",get:function(){return Object.freeze({notification_rcpt:"notification_rcpt",notification_click:"notification_click",msg_open:"msg_open",msg_delete:"msg_delete"})}},{key:"eventTypes",get:function(){return Object.freeze({download:"download",open:"open",close:"close",app_action:"app_action",setting:"setting",search:"search",bookmark:"bookmark",highlight:"highlight",credit_create:"credit_create ",credit_redeem:"credit_redeem",purchase:"purchase",coupon_create:"coupon_create",coupon_redeem:"coupon_redeem",coupon_cancel:"coupon_cancel",uncache:"uncache",fingerprint_id:"fingerprint_id"})}},{key:"eventExtra",get:function(){return Object.freeze({action:"_action",play_start:"_play_start",start_time:"_start_time",stop_time:"_stop_time",stop_reason:"_stop_reason",referrer:"_referrer",referrer_detail:"_referrer_detail"})}},{key:"contentTypes",get:function(){return Object.freeze({track:"track",video:"video",film:"film",ebook:"ebook",artist:"artist",album:"album",person:"person",organization:"organization",campaign:"campaign",series:"series",episode:"episode",offer:"offer",playlist:"playlist"})}}]),c(t,[{key:"store",value:function(e,t){e.dbManager&&e.dbManager.storeMediaEvent(this,t)}},{key:"report",value:function(e){var n=t.buildEventDescriptor(this),r={event_data_arr:[n],media_id_ns:g.ID_NAMESPACE&&g.ID_NAMESPACE.length>0?g.ID_NAMESPACE:void 0};new p.default(e).report(r)}}],[{key:"buildEventDescriptor",value:function(e){if(e.extra&&"string"==typeof e.extra)try{e.extra=JSON.parse(e.extra)}catch(t){console.log("mediaEvent extra does not contain JSON: "+e.extra(l))}return d.default.addGeoLocation({media_id:e.mediaId.toString(),media_kind:e.contentType,event_time:e.timestamp,event_type:e.eventType,extra_event_data:e.extra?e.extra:void 0})}},{key:"reportBatch",value:function(e,n,r,i){if(n&&!(n.length<=0)){var o=n.map(t.buildEventDescriptor),a={event_data_arr:o,media_id_ns:g.ID_NAMESPACE&&g.ID_NAMESPACE.length>0?g.ID_NAMESPACE:void 0};new p.default(e).report(a,r,i)}}}]),t}(d.default);t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f="MediaEvent",d="Create",h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,d))}return a(t,e),s(t,[{key:"report",value:function(e,n,r){var i=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,e,function(e){200===e.code?n&&n():r&&r()},function(e){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",i)+"Error: "+JSON.stringify(e)),r&&r()})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(354),c=r(u),l=n(355),f=r(l),d="ConsumerTag",h="Create",p=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return a(t,e),s(t,[{key:"report",value:function(e,t,n){var r=this,i={tag:this.key,value:this.value&&this.value.length>0?this.value:void 0};new f.default(e,this,d,h).report(i,function(){r.id||e.dbManager.storeConsumerTag(r)},function(){return e.dbManager.removeConsumerTag(r)},t,n)}}]),t}(c.default);t.default=p,e.exports=t.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,r){n(this,e),this.id=void 0,this.key=t,this.value=r};t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f=function(e){function t(e,n,r,a){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a));return s.baseTag=n,s}return a(t,e),s(t,[{key:"report",value:function(e,n,r,i,o){var a=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,e,function(e){if(e&&e.code)if(200===e.code){if(r&&r(a.baseTag),i)return void i()}else 226===e.code||227===e.code?(console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",a)+"Error code "+e.code),r&&r(a.baseTag)):n&&n(a.baseTag);o&&o()},function(e){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",a)+"Error: "+JSON.stringify(e)),n&&n(a.baseTag),o&&o()})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);
t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(354),c=r(u),l=n(355),f=r(l),d="ConsumerTag",h="Delete",p=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"report",value:function(e,t,n){var r=this,i={tag:this.key};new f.default(e,this,d,h).report(i,function(){r.id||e.dbManager.storeConsumerTag(r)},function(){return e.dbManager.removeConsumerTag(r)},t,n)}}]),t}(c.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=o([""],[""]),f=n(345),d=i(f),h=n(358),p=i(h),v=n(359),g=i(v),y=n(334),m=r(y),_=n(350),b=i(_),E=n(338),S=r(E),w=n(351),T=i(w),O=function(e){function t(e,n,r,i,o,u,c,l,f){a(this,t);var h=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return d.default.checkPropertyOneOf(r,t.contentTypes,"Content type"),d.default.checkPropertyOneOf(i,t.consumptionTypes,"Consumption type"),h.context=e,h.mediaId=n,h.contentType=r,h.consumptionType=i,h.extra=Object.assign({},o),h.deliveryId=u,h.integrationId=f,h.duration=0,h.startPosition=0,h.stopPosition=0,h.completePlay=!1,h._started=!1,h.sdkActivity=!0,h.printLog=m.DEBUG_JW_PLAYER||m.DEBUG_HTML5_MEDIA||m.DEBUG_CONSUMPTION_EVENTS,h.errorCount=0,h.position=0,h.recordForReadInterval=void 0!==c?+c:0,h.lifeTimeDays=void 0!==l?l:0,h.reportPosition=!1,h.tsLastReportPosition=0,d.default.fixExtra(h.extra,t.eventExtra),h}return u(t,e),c(t,null,[{key:"contentTypes",get:function(){return Object.freeze({track:"track",video:"video",film:"film",ebook:"ebook",artist:"artist",album:"album",person:"person",organization:"organization",campaign:"campaign",series:"series",episode:"episode",offer:"offer"})}},{key:"consumptionTypes",get:function(){return Object.freeze({none:"none",stream:"stream",download:"download",cached:"cached",saved:"saved"})}},{key:"eventExtra",get:function(){return Object.freeze({action:"_action",auto_send:"_auto_send",referrer:"_referrer",referrer_detail:"_referrer_detail"})}}]),c(t,[{key:"_updateContentTypeFromMapping",value:function(e){e&&(this.contentType=e(this.mediaId))}},{key:"_updateExtraDataFromMapping",value:function(e){e&&(this.extra=Object.assign(this.extra,e(this.mediaId,"consumption")),d.default.fixExtra(this.extra,t.eventExtra))}},{key:"isStarted",value:function(){return this._started}},{key:"isSdkActivity",value:function(){return console.log("CE: isSdkActivity:"+this.sdkActivity),this.sdkActivity}},{key:"_updateSdkActivity",value:function(e){console.log("CE: _updateSdkActivity:"+this.sdkActivity+"->"+e),this.sdkActivity=e}},{key:"start",value:function(e){this.context.eventManager.reportStoredActiveConsumptionEvent(),this.startPosition=e,this._started=!0,this.duration=0,this.timestamp=m.getFixedDateNow(),this.timestampActualStart=+new Date,this.position=e,this.reportPosition=!0,this._log("start startPosition="+e),this._storeInLocalStorage()}},{key:"update",value:function(e,t){if(e){var n=Math.floor(this.duration);this.duration+=+e;var r=Math.floor(this.duration);if(t&&(this.position=t,this.position>=0&&this.recordForReadInterval>0&&r>n)){var i=this.tsLastReportPosition<=0||this.tsLastReportPosition>0&&Math.abs((new Date).getTime()-this.tsLastReportPosition)>=1e3*m.CMSDK_RECORD_FOR_READ_INTERVAL_DELAY_SECONDS,o=n/this.recordForReadInterval,a=r/this.recordForReadInterval;i&&a>o&&this._doReportPosition(!1)}}this._log("update value="+e+",duration="+this.duration),this._storeInLocalStorage()}},{key:"stop",value:function(e,t,n){if(this._started){this.update(e),this._log("stop stopPosition="+t+",duration="+this.duration),this.stopPosition=void 0!=t?+t:0,this.completePlay=void 0!=n&&n,this._started=!1,this.position=n===!0?0:t,this._shouldReportPosition()&&(this.reportPosition=!1,this._doReportPosition(!0));var r=+new Date;this.timestampActualStart+1e3*this.duration>r&&(this._log("stop, duration inconsistency timestampActualStart="+this.timestampActualStart+",duration="+this.duration+",timestampNow="+r),this.duration=Math.max(r-this.timestampActualStart,0)/1e3,this._log("stop, duration inconsistency fixed duration="+this.duration)),this._report()}}},{key:"onError",value:function(){this.errorCount++,this._storeInLocalStorage()}},{key:"_shouldReportPosition",value:function(){return this.recordForReadInterval>0&&this.position>=0&&this.reportPosition}},{key:"_doReportPosition",value:function(e){return m.isInCompileOrRunTimeDisabledMode()?void S.log(this.context,"SDK is disabled"):(t.sendPosition(this.context,this),this.tsLastReportPosition=(new Date).getTime(),void(e&&(this.position=-1,this._storeInLocalStorage())))}},{key:"_addExtra",value:function(e,n){this.extra=t._addExtraStatic(e,n,this.extra)}},{key:"_report",value:function(){return m.isInCompileOrRunTimeDisabledMode()?void S.log(this.context,"SDK is disabled"):(this.isStarted()&&this._shouldReportPosition()&&(this.reportPosition=!1,this._doReportPosition(!0)),void(t.doStoreOrReportEvent(this.context,this,function(){})===!0&&(this.integrationId?m.removeActiveConsumptionPerIntegrationEventData(this.integrationId,this.context.interTabCommManager.tabId):m.removeActiveConsumptionEventData(this.context.interTabCommManager.tabId))))}},{key:"updatePrintLog",value:function(e){this.printLog=e}},{key:"_log",value:function(e){this.printLog&&console.log(e)}},{key:"store",value:function(e,n){t.storeEvent(e,this,n)}},{key:"_storeInLocalStorage",value:function(){var e={mediaId:this.mediaId,contentType:this.contentType,consumptionType:this.consumptionType,timestamp:this.timestamp,extra:this.extra,deliveryId:this.deliveryId,duration:this.duration,startPosition:this.startPosition,stopPosition:this.stopPosition,completePlay:this.completePlay,position:this._shouldReportPosition()?this.position:-1,recordForReadInterval:this.recordForReadInterval,lifeTimeDays:this.lifeTimeDays,errorCount:this.errorCount};this.integrationId?m.updateActiveConsumptionPerIntegrationEventData(e,this.integrationId,this.context.interTabCommManager.tabId):m.updateActiveConsumptionEventData(e,this.context.interTabCommManager.tabId)}}],[{key:"_addExtraStatic",value:function(e,t,n){return n?n[e]=t:(n={},n[e]=t),n}},{key:"doStoreOrReportEvent",value:function(e,n,r){var i={event_data_arr:[t.buildEventDescriptor(n)]};return e&&e._onConsumptionEventSentOut(n),n.mediaId&&0!==n.mediaId.length&&"0"!==n.mediaId&&0!==n.mediaId?m.isValidActiveSessionId()?(!m.CMSDK_STORE_EVENTS_ONLY_WHEN_NO_SESSION&&e.dbManager?t.storeEvent(e,n,function(){r&&r(),e.eventReportingManager.checkConsumptionEvents(m.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS)}):new p.default(e).report(d.default.addGeoLocation(i),n,r),!0):e.dbManager?(console.log("reportConsumptionEvent: No session yet, saving event to IDB"),t.storeEvent(e,n,function(){r&&r(),e.eventReportingManager.checkConsumptionEvents(m.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS)}),!0):(console.log("reportConsumptionEvent: No session yet"),!1):void console.log("ConsumptionEvent: Invalid mediaId="+n.mediaId+", no event will be reported")}},{key:"buildEventDescriptor",value:function(e){if(e.extra&&"string"==typeof e.extra)try{e.extra=JSON.parse(e.extra)}catch(t){console.log("consumptionEvent extra does not contain JSON: "+e.extra(l))}var n={};return e.contentType===t.contentTypes.ebook?n.page_num=-1:n={complete_play:e.completePlay.toString(),duration:Math.round(e.duration),playing_source_type:e.consumptionType,start_position:Math.round(e.startPosition),stop_position:Math.round(e.stopPosition)},n.media_id=e.mediaId.toString(),n.media_kind=e.contentType,n.media_id_ns=m.ID_NAMESPACE&&m.ID_NAMESPACE.length>0?m.ID_NAMESPACE:void 0,n.extra_data=e.extra?e.extra:void 0,n.timestamp=e.timestamp,n}},{key:"storeEvent",value:function(e,t,n){e.dbManager&&(t.recordForReadInterval||(t.position=-1),Math.round(t.duration)>0?e.dbManager.storeConsumptionEvent(t,n):(console.log("consumptionEvent replaced with MediaEvent=player_error: duration="+t.duration),e.dbManager.storeMediaEvent(new T.default(t.mediaId,t.contentType,"player_error",{error_cnt:t.errorCount}),n)))}},{key:"sendPosition",value:function(e,t){var n={};n.media_id=t.mediaId.toString(),n.media_kind=t.contentType,n.media_id_ns=m.ID_NAMESPACE&&m.ID_NAMESPACE.length>0?m.ID_NAMESPACE:void 0,n.metric="seconds",n.location=Math.round(t.position),n.lifetime_days=t.lifeTimeDays>0?t.lifeTimeDays:void 0,new g.default(e).report(n)}},{key:"reportBatch",value:function(e,n,r,i){if(n&&!(n.length<=0)){n.every(function(n){return n.hasOwnProperty("position")&&n.position>=0&&t.sendPosition(e,n),!0});var o=n.map(t.buildEventDescriptor),a={event_data_arr:o},s=!0;n.every(function(e){return!e.sdkActivity||(s=!1,!1)}),new p.default(e).report(d.default.addGeoLocation(a),s?new b.default(b.default.CMSDKInternalFakeEventTypes.fake,null):null,r,i)}}}]),t}(d.default);t.default=O,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f="PlayEvent",d="Create",h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,d))}return a(t,e),s(t,[{key:"report",value:function(e,n,r,i){var o=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,e,function(e){200===e.code?r&&r():i&&i()},function(e){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",o)+"Error: "+JSON.stringify(e)),i&&i()},n)}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f=n(350),d=r(f),h="ConsumptionState",p="Update",v=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,h,p))}return a(t,e),s(t,[{key:"report",value:function(e){var n=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,e,function(e){200===e.code},function(e){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",n)+"Error: "+JSON.stringify(e))},new d.default(d.default.CMSDKInternalFakeEventTypes.fake))}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(361),u=i(s),c=n(334),l=r(c),f=function(){function e(t,n,r,i,a){o(this,e),this.context=t,this.playerId=n,this.configOptional=a,this.internalConsumptionEvents={},this.printLog=l.DEBUG_JW_PLAYER,this.mappingContentType=r,this.mappingExtra=i,this.hasBeenPaused=!1}return a(e,[{key:"updateMappingFunctions",value:function(e,t){this.mappingContentType=e,this.mappingExtra=t}},{key:"_prepareEvents",value:function(e){this._log("_prepareEvents: "+e.length),this.internalConsumptionEvents={};for(var t=0;t<e.length;++t){var n=e[t];n.hasOwnProperty("mediaid")?(this.internalConsumptionEvents[n.mediaid]=new u.default(this,n.mediaid,this.mappingContentType?this.mappingContentType(n.mediaid):"",this.mappingExtra?this.mappingExtra(n.mediaid):void 0,!1,this.configOptional),this.internalConsumptionEvents[n.mediaid].updatePrintLog(this.printLog)):console.warn("No property named 'mediaid' in JwPlayer playlist item(s), CMSDK-JS will not be able to send out consumption events! Player.id="+this.playerId)}}},{key:"finishStartedEvents",value:function(e,t,n){for(var r in this.internalConsumptionEvents)this.internalConsumptionEvents.hasOwnProperty(r)&&this.internalConsumptionEvents[r].isStarted()&&(t&&this.internalConsumptionEvents[r].setSdkActivity(!1),this.internalConsumptionEvents[r].report(e,n));this.hasBeenPaused=!1}},{key:"_getCurrentInternalConsumptionEvent",value:function(e){var t=e.getPlaylist()[e.getPlaylistIndex()];return this.internalConsumptionEvents[t.mediaid]}},{key:"onReady",value:function(e,t){this._log("onReady"),this._prepareEvents(e.getPlaylist())}},{key:"onPlaylistLoaded",value:function(e,t){this._log("onPlaylistLoaded"),this.finishStartedEvents(),t&&t.playlist&&this._prepareEvents(t.playlist)}},{key:"onPlay",value:function(e,t){var n=this._getCurrentInternalConsumptionEvent(e);this._log("onPlay"),n&&(n.isStarted()?(this.hasBeenPaused&&(this.hasBeenPaused=!1,n.onUnpause()),n.startConsuming(e.getPosition())):n.start(e.getPosition()))}},{key:"onTime",value:function(e,t){var n=this._getCurrentInternalConsumptionEvent(e);n&&n.isStarted()&&(n.update(e.getPosition()),e.getDuration()>0&&n.setPlayerDuration(e.getDuration()))}},{key:"onComplete",value:function(e,t){var n=this._getCurrentInternalConsumptionEvent(e);this._log("onComplete"),n&&n.isStarted()&&(n.onEnd(e.getDuration()),n.stop(0,e.getDuration(),!0),this.hasBeenPaused=!1)}},{key:"onPause",value:function(e,t){var n=this._getCurrentInternalConsumptionEvent(e);this._log("onPause"),n&&n.isStarted()&&(this.hasBeenPaused=!0,n.onPause(e.getPosition()),n.setStopPosition(e.getPosition()))}},{key:"onSeeked",value:function(e,t){var n=this._getCurrentInternalConsumptionEvent(e);this._log("onSeeked position="+t.position+", offset="+t.offset+", duration="+e.getDuration()),n&&(n.isStarted()?(n.onScrub(t.position,t.offset),n.update(t.position),n.setPrevPositionOnTime(t.offset)):n.isAllowedToStartOnSeekJump(t.offset)&&n.start(t.offset))}},{key:"onPlaylistItemIsGoingToChange",value:function(e,t){this._log("onPlaylistItemIsGoingToChange"),this.finishStartedEvents(!0)}},{key:"onStopEvent",value:function(){this.finishStartedEvents(!1,!0,!0)}},{key:"onWindowUnload",value:function(){this.finishStartedEvents(!1,!0,!1)}},{key:"updatePrintLog",value:function(e){this.printLog=e?e.DEBUG_JW_PLAYER:l.DEBUG_JW_PLAYER;for(var t in this.internalConsumptionEvents)this.internalConsumptionEvents.hasOwnProperty(t)&&this.internalConsumptionEvents[t].updatePrintLog(this.printLog)}},{key:"_log",value:function(t){this.printLog&&console.log(e.getTag()+t)}}],[{key:"getTag",value:function(){return"JwPlayerManager: "}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(345),l=i(c),f=n(357),d=i(f),h=n(350),p=i(h),v=n(348),g=i(v),y=n(351),m=i(y),_=n(334),b=r(_),E=n(339),S=r(E),w=function(e){function t(e,n,r,i,s,u,c){o(this,t);var f=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.default.checkPropertyOneOf(r,d.default.contentTypes,"Content type"),f.manager=e,f.integrationId=c,f.prevPositionOnTime=0,f.cachedDuration=0,f.hasSentPlayStart=!1,f.startConsumingTime=-1,f.uninterruptedPlayback=0,f.printLog=b.DEBUG_JW_PLAYER||b.DEBUG_HTML5_MEDIA||b.DEBUG_OOYALA_PLAYER,f.useAppEvents=s,f.consumptionEvent=new d.default(f.manager.context,n,r,d.default.consumptionTypes.stream,Object.assign({_event_stream_id:S.UUID.generate()},i),void 0,u?u.recordForReadInterval:void 0,u?u.lifeTimeDays:void 0,c),f}return s(t,e),u(t,[{key:"isStarted",value:function(){return this.consumptionEvent.isStarted()}},{key:"_validateStartPosition",value:function(e){return isNaN(e)&&(this._log("ICE::_validateStartPosition invalid start position="+e),e=0),e=Math.max(e,0)}},{key:"start",value:function(e){e=this._validateStartPosition(e),this.startConsuming(e),this.setSdkActivity(!0),this.consumptionEvent.start(e),this.setPrevPositionOnTime(e),this.hasSentPlayStart=!1,this._resetUninterruptedPlayback()}},{key:"startConsuming",value:function(e){e=this._validateStartPosition(e),this.startConsumingTime<0&&(this.startConsumingTime=e),this._log("ICE::startConsuming: "+e)}},{key:"update",value:function(e){this._log("ICE::update: "+this.prevPositionOnTime+"->"+e);var t=Math.max(e-this.prevPositionOnTime,0);this._checkToSendPlayStartEvent(t),this._checkToSendPeriodicConsumePartEvent(t,e),this.consumptionEvent.update(t,e),this.setPrevPositionOnTime(e),this.startConsumingTime<0&&e>=0&&this.startConsuming(e),this.consumptionEvent._updateExtraDataFromMapping(this.manager.mappingExtra)}},{key:"stop",value:function(e,t,n){if(t<=0&&this.prevPositionOnTime>0&&(t=this.prevPositionOnTime),e>this.prevPositionOnTime&&(e-=this.prevPositionOnTime),this._checkToSendPlayStartEvent(e),this._checkToSendPeriodicConsumePartEvent(e),this.useAppEvents){this.consumptionEvent.update(e,n?0:t),this.consumptionEvent._shouldReportPosition()&&this.consumptionEvent._doReportPosition(!0);var r=Object.assign({},this.consumptionEvent.extra);r.start_position=Math.round(this.consumptionEvent.startPosition),r.stop_position=Math.round(t),r.complete_play=n,r.playing_source_type=d.default.consumptionTypes.stream,r.playback_duration=Math.round(this.consumptionEvent.duration),this._sendAppEvent("consume",r),this.consumptionEvent._started=!1}else this.consumptionEvent._updateContentTypeFromMapping(this.manager.mappingContentType),this.consumptionEvent._updateExtraDataFromMapping(this.manager.mappingExtra),this.consumptionEvent.stop(e,t,n);this._resetUninterruptedPlayback()}},{key:"onError",value:function(){this.consumptionEvent.onError()}},{key:"setPlayerDuration",value:function(e){e!==this.cachedDuration&&(this.cachedDuration=e,this._log("ICE::setPlayerDuration: "+e))}},{key:"setStopPosition",value:function(e){this.consumptionEvent.stopPosition=e}},{key:"isAllowedToStartOnSeekJump",value:function(e){return this.cachedDuration>0&&e<this.cachedDuration}},{key:"setPrevPositionOnTime",value:function(e){this.prevPositionOnTime=Math.max(e,0)}},{key:"setSdkActivity",value:function(e){this.consumptionEvent&&this.consumptionEvent._updateSdkActivity(e)}},{key:"report",value:function(e,t){if(!this.isStarted())return void this._log("ICE::report: wasn't started, mediaId="+this.consumptionEvent.mediaId);var n=!1;e&&this.cachedDuration>0&&Math.round(this.cachedDuration)===Math.round(this.prevPositionOnTime)&&(this._log("ICE::report: isInterrupt is suppressed, setting completePlay"),n=!0,e=!1,this.onEnd(this.prevPositionOnTime)),e&&this.onInterrupt(),t&&this.stop(0,0,n)}},{key:"_checkToSendPlayStartEvent",value:function(e){this.hasSentPlayStart||this.consumptionEvent.duration+e>=b.CMSDK_PLAY_START_DELAY_SECONDS&&this._reportMediaEvent("play_start")}},{key:"_reportMediaEvent",value:function(e){var t=Object.assign({},this.consumptionEvent.extra),n=this.consumptionEvent.contentType;this.hasSentPlayStart=!0,this.manager.mappingContentType&&(n=this.manager.mappingContentType(this.consumptionEvent.mediaId)),this.manager.mappingExtra&&Object.assign(t,this.manager.mappingExtra(this.consumptionEvent.mediaId,e)),this.useAppEvents?this._sendAppEvent(e,t):this.manager.context.reportMediaEvent(this.consumptionEvent.mediaId,n,e,t)}},{key:"_checkToSendPeriodicConsumePartEvent",value:function(e,t){if(!(b.UNINTERRUPTED_PLAY_INTERVAL_MS<=0)){var n=Math.floor(1e3*this.uninterruptedPlayback/b.UNINTERRUPTED_PLAY_INTERVAL_MS);this.uninterruptedPlayback+=e;var r=Math.floor(1e3*this.uninterruptedPlayback/b.UNINTERRUPTED_PLAY_INTERVAL_MS);r>n&&(this._log("ICE::_checkToSendPeriodicConsumePartEvent "+n+"->"+r+"; configMilliseconds="+b.UNINTERRUPTED_PLAY_INTERVAL_MS),this._reportInternalConsumingPartMediaEvent(t))}}},{key:"_resetUninterruptedPlayback",value:function(){this.uninterruptedPlayback=0,this.manager&&this.manager.context&&this.manager.context._onSdkActivity()}},{key:"_reportInternalConsumingPartMediaEvent",value:function(e,t){if(this.startConsumingTime<0)return this._log("ICE::_reportInternalConsumingPartMediaEvent invalid start point on reason="+t),!1;var n,r,i=Object.assign({},this.consumptionEvent.extra),o=this.consumptionEvent.contentType;return this.manager.mappingContentType&&(o=this.manager.mappingContentType(this.consumptionEvent.mediaId)),this.manager.mappingExtra&&Object.assign(i,this.manager.mappingExtra(this.consumptionEvent.mediaId,t)),n=Math.round(this.startConsumingTime),r=Math.round(e),(r<n||r<0)&&(this._log("ICE::_reportInternalConsumingPartMediaEvent invalid input consume_part: startTime < stopTime on "+this.startConsumingTime+","+e),n=Math.max(0,n),r=Math.max(n,r)),i.start_time=n,i.stop_time=r,void 0!==t&&(i.stop_reason=t,this._resetUninterruptedPlayback()),this.startConsumingTime=-1,t&&n===r?(this._log("ICE:: no need to report stopReason on start===stop"),!1):(this.useAppEvents?this._sendAppEvent("consume_part",i):m.default.internalMediaEventReport(this.manager.context,this.consumptionEvent.mediaId,o,"consume_part",i),!0)}},{key:"onScrub",value:function(e,t){this._log("ICE::onScrub: position="+e+"; offset="+t),this._reportInternalConsumingPartMediaEvent(e,"scrub"),this.startConsuming(t)}},{key:"onUnpause",value:function(){this._reportMediaEvent("resume_play")}},{key:"onPause",value:function(e){return this.cachedDuration>0&&Math.round(this.cachedDuration)===Math.round(e)?(this._log("ICE::onPause: ignored, called on position==duration"),!1):this._reportInternalConsumingPartMediaEvent(e,"pause")}},{key:"onEnd",value:function(e){this._reportInternalConsumingPartMediaEvent(e,"end")}},{key:"onInterrupt",value:function(e){void 0===e&&(e=this.prevPositionOnTime),this._reportInternalConsumingPartMediaEvent(e,"interrupt")}},{key:"onProgress",value:function(e){this._reportInternalConsumingPartMediaEvent(e)}},{key:"updatePrintLog",value:function(e){this.printLog=e,this.consumptionEvent.updatePrintLog(e)}},{key:"_log",value:function(e){this.printLog&&console.log(e)}},{key:"_sendAppEvent",value:function(e,t){t.action=e,this.manager.context.eventManager.reportAppEvent(new p.default(g.default.eventTypes.app_action,t))}}]),t}(l.default);t.default=w,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(361),u=i(s),c=n(334),l=r(c),f=function(){function e(t,n,r,i,a,s){o(this,e),this.context=t,this.player=n,this.playerId=n.getElementId(),this.configOptional=s,this.printLog=l.DEBUG_OOYALA_PLAYER,this.mappingContentType=r,this.mappingExtra=i,this.useAppEvents=a,this.hasBeenPaused=!1,this.event=null}return a(e,[{key:"updateMappingFunctions",value:function(e,t){this.mappingContentType=e,this.mappingExtra=t}},{key:"setup",value:function(){var t=this;this.player.mb.subscribe("*","cmsdk"+e.getTag()+this.playerId,function(e,n){"contentTreeFetched"==e?t._onContentTreeFetched(n):"videoWillPlay"==e?t._onVideoWillPlay(n):"playheadTimeChanged"==e?t._onVideoTime(n):"seek"==e?t._onSeek(n):"seeked"==e?t._onSeeked(n):"paused"==e?t._onPause():"endScreenShown"==e?t._onComplete():"downloading"!=e&&(n?t._log(e+";"+JSON.stringify(n,null,"\t")):t._log(e))})}},{key:"_createEvent",value:function(e){this._log("_createEvent: "+JSON.stringify(e));var t=e.asset_pcode,n=this.mappingExtra?this.mappingExtra(t):void 0;n||(n=[]),this.useAppEvents&&(n.asset_id=t,n.type=this.mappingContentType?this.mappingContentType(t):"",n.title=e.title,n.duration=e.duration?Math.round(e.duration/1e3):void 0),this.hasBeenPaused=!1,this.event=new u.default(this,t,this.mappingContentType?this.mappingContentType(t):"",n,this.useAppEvents,this.configOptional)}},{key:"_onContentTreeFetched",value:function(e){this._log("_onContentTreeFetched"),this.event&&this.event.isStarted()&&this.event.report(!0),this._createEvent(e)}},{key:"_onVideoWillPlay",value:function(e){this._log("_onVideoWillPlay"),this.event&&(this.event&&this.hasBeenPaused&&this.event.onUnpause(),this.event.isStarted()||this.event.start(this.player.getPlayheadTime()>0?this.player.getPlayheadTime():0))}},{key:"_onVideoTime",value:function(e){this._log("_onVideoTime: "+e),this.event&&this.event.isStarted()&&(this.event.update(e>0?e:0),this.player.getDuration()>0&&this.event.setPlayerDuration(this.player.getDuration()))}},{key:"_onSeek",value:function(e){this._log("_onSeek: "+e+", playerTime="+this.player.getPlayheadTime())}},{key:"_onSeeked",value:function(e){var t=this.player.getPlayheadTime();this._log("_onSeeked: "+e+", playerTime="+t),this.event&&this.event.isStarted()&&(this.event.onScrub(t,e),this.event.setPrevPositionOnTime(e))}},{key:"_onPause",value:function(){if(this._log("_onPause"),this.event&&this.event.isStarted()){var e=this.player.getPlayheadTime()>0?this.player.getPlayheadTime():0;this.hasBeenPaused=!0,this.event.onPause(e),this.event.setStopPosition(e)}}},{key:"_onComplete",value:function(){this._log("_onComplete"),this.event&&this.event.isStarted()&&(this.event.onEnd(this.player.getDuration()),this.event.stop(0,this.player.getDuration(),!0))}},{key:"finishStartedEvents",value:function(e,t,n){this.event&&this.event.isStarted()&&(t&&this.event.setSdkActivity(!1),this.event.report(e,n)),this.hasBeenPaused=!1}},{key:"onStopEvent",value:function(){this.finishStartedEvents(!1,!0,!0)}},{key:"onWindowUnload",value:function(){this.finishStartedEvents(!1,!0,!1)}},{key:"_log",value:function(t){this.printLog&&console.log(e.getTag()+t)}}],[{key:"getTag",value:function(){return"OoyalaPlayerManager: "}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),u=i(s),c=n(335),l=i(c),f=n(350),d=r(f),h=function(){function e(t){var n=this;o(this,e),this.context=t,this.timer=null,this.timestampStart=+new Date,this.idleTimeoutMs=u.IDLE_TIMEOUT_MS,this.printLog=u.DEBUG_IDLE_CONTROL_MANAGER,window.addEventListener("storage",function(e){n.onStorageEvent(e)},!1)}return a(e,[{key:"onStorageEvent",value:function(e){e.key===l.getFullCookieName(u.CMSDK_LAST_SDK_ACTIVITY)&&(e.newValue&&e.newValue.length>0?this.onSdkActivityInOtherTab():e.oldValue&&e.oldValue.length>0&&(this._killTimeoutListener(),
this.context._onSendStopEvent()))}},{key:"start",value:function(){this._log("start"),u.shouldSendAppStartNow(u)&&(this._sendStartEvent(),this.onSdkActivity())}},{key:"onSdkActivity",value:function(){this._log("onSdkActivity"),u.getLastSdkActivityTs()?u.updateLastSdkActivityTs():(u.updateLastSdkActivityTs(),this._sendStartEvent()),this._reset()}},{key:"onSdkActivityInOtherTab",value:function(){this._log("onSdkActivityInOtherTab"),this._resetOnRandomTimeout()}},{key:"_reset",value:function(){this._killTimeoutListener(),this._setTimeoutListener(!1)}},{key:"_resetOnRandomTimeout",value:function(){this._killTimeoutListener(),this._setTimeoutListener(!0)}},{key:"_killTimeoutListener",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"_setTimeoutListener",value:function(e){var t=this;if(this.timer)return void this._log("_setTimeoutListener: blocked");if(e){var n=u.IDLE_TIMEOUT_MS+1,r=3*u.IDLE_TIMEOUT_MS/2;this.idleTimeoutMs=Math.floor(Math.random()*(r-n)+n)}else this.idleTimeoutMs=u.IDLE_TIMEOUT_MS;this._log("_setTimeoutListener: setting timeout for "+this.idleTimeoutMs+" ms, useRandom="+e),this.timer=setTimeout(function(){t._onTimeout()},this.idleTimeoutMs)}},{key:"_onTimeout",value:function(){this._log("_onTimeout after "+this.idleTimeoutMs+" ms"),this._sendStopEvent()}},{key:"_sendStartEvent",value:function(){u.updateLastSdkActivityTs(),this.timestampStart=+new Date,u.isValidActiveSessionId()&&this.context.eventManager.reportAppEvent(new d.default(d.default.CMSDKInternalEventTypes.start))}},{key:"_sendStopEvent",value:function(){if(u.isValidActiveSessionId()&&u.getLastSdkActivityTs())if(u.hasIdleTimeSinceLastActivityTs(u)){this.context._onSendStopEvent();var e=Math.round(Math.abs(+new Date-this.timestampStart)/1e3),t={};t.duration=e,t.sdk_ver=u.SDK_VER,this.context.eventManager.reportAppEvent(new d.default(d.default.CMSDKInternalEventTypes.stop,t)),u.removeLastSdkActivityTs()}else this._resetOnRandomTimeout()}},{key:"_log",value:function(t){this.printLog&&console.log(e.getTag()+": "+t)}}],[{key:"getTag",value:function(){return"IdleControlManager"}}]),e}();t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(361),u=i(s),c=n(334),l=r(c),f=function(){function e(t,n,r,i,a,s){o(this,e),this.context=t,this.playerId=n,this.configOptional=s,this.internalConsumptionEvents={},this.mappingContentType=i,this.mappingExtra=a,this.mediaIdAttributeName=r,this.positionAtSeeking=0,this.MINIMUM_JUMP_DELAY_SECONDS=1,this.printLog=l.DEBUG_HTML5_MEDIA,this.callbacks={},this.hasBeenPaused=!1,this._log("MINIMUM_JUMP_DELAY_SECONDS: "+this.MINIMUM_JUMP_DELAY_SECONDS)}return a(e,[{key:"addCreatedCallback",value:function(e,t){return this.callbacks[e]=t,t}},{key:"getCreatedCallback",value:function(e){return this.callbacks[e]}},{key:"finishStartedEvents",value:function(e,t,n){for(var r in this.internalConsumptionEvents)this.internalConsumptionEvents.hasOwnProperty(r)&&this.internalConsumptionEvents[r].isStarted()&&(t&&this.internalConsumptionEvents[r].setSdkActivity(!1),this.internalConsumptionEvents[r].report(e,n));this.hasBeenPaused=!1}},{key:"onLoadStart",value:function(e,t){this.finishStartedEvents(!0,!1);var n=this._getCurrentMediaId(t);this._log("onLoadStart: "+n),l.DEBUG_HTML5_APP_EVENTS&&this.context.reportAppEvent("loadstart",{mediaId:n})}},{key:"_checkInitConsumptionEvent",value:function(e){if(void 0!==e&&e.length>0){if(this.internalConsumptionEvents[e])return;this.internalConsumptionEvents[e]=new u.default(this,e,this.mappingContentType?this.mappingContentType(e):"",this.mappingExtra?this.mappingExtra(e):void 0,!1,this.configOptional),this.internalConsumptionEvents[e].updatePrintLog(this.printLog),this._log("_checkInitConsumptionEvent: "+e)}else console.warn("No attribute value found for mediaIdAttributeName="+this.mediaIdAttributeName)}},{key:"_getTargetCurrentTime",value:function(e){return e.target&&void 0!==e.target.currentTime?e.target.currentTime:e.target&&e.target.firstElementChild&&void 0!==e.target.firstElementChild.currentTime?e.target.firstElementChild.currentTime:e.player&&e.player.mediaElement?e.player.mediaElement.currentTime:void 0}},{key:"_getTargetDuration",value:function(e){return e.target&&void 0!==e.target.duration?e.target.duration:e.target&&e.target.firstElementChild&&void 0!==e.target.firstElementChild.duration?e.target.firstElementChild.duration:void 0}},{key:"_getCurrentMediaId",value:function(e){var t=this;if(e.target.firstElementChild&&e.target.firstElementChild.dataset)return e.target.firstElementChild.dataset[this.mediaIdAttributeName];if(e.target.dataset)return e.target.dataset[this.mediaIdAttributeName];if(e.player&&e.player.media&&e.player.media.source&&e.player.media.src){var n=e.player.media.src,r=void 0;if(e.player.media.source.every(function(e){return e.src!==n||(r=e[t.mediaIdAttributeName],!1)}),r)return r}return""}},{key:"_getCurrentInternalConsumptionEvent",value:function(e){var t=this._getCurrentMediaId(e);return void 0!==t&&t.length>0?this.internalConsumptionEvents[t]:(this._log("_getCurrentInternalConsumptionEvent: invalid case?"),null)}},{key:"onProgress",value:function(e,t){}},{key:"onLoadedMetadata",value:function(e,t){this._log("onLoadedMetadata: "+t),l.DEBUG_HTML5_APP_EVENTS&&this.context.reportAppEvent("loadedmetadata",{mediaId:this._getCurrentMediaId(t)})}},{key:"onPlaying",value:function(e,t){var n=this._getCurrentMediaId(t);this._log("onPlaying: "+n),this._checkInitConsumptionEvent(n);var r=this._getTargetCurrentTime(t),i=this._getCurrentInternalConsumptionEvent(t);if(void 0===r)return void this._log("onPlaying: undefined currentTime!");if(i)if(i.isStarted())this.positionAtSeeking<=0&&i.startConsuming(r);else{var o=this._getTargetDuration(t);void 0!==o&&o>0&&Math.round(o)===Math.round(r)&&(r=0,this._log("onPlaying: fixed currentPosition to 0 from being a final point")),i.start(r)}}},{key:"onSeeking",value:function(e,t){var n=this._getTargetCurrentTime(t),r=this._getCurrentInternalConsumptionEvent(t);return void 0===n?void this._log("onSeeking: undefined currentTime!"):void(r&&r.isStarted()&&this._log("onSeeking: "+n))}},{key:"onSeeked",value:function(e,t){var n=this._getTargetCurrentTime(t),r=this._getCurrentInternalConsumptionEvent(t);return void 0===n?void this._log("onSeeked: undefined currentTime!"):void(r&&(this._log("onSeeked: "+n+"; positionAtSeeking="+this.positionAtSeeking),this.positionAtSeeking=0))}},{key:"onEnded",value:function(e,t){this._log("onEnded: "+t);var n=this._getCurrentInternalConsumptionEvent(t);if(n&&n.isStarted()){var r=this._getTargetDuration(t);if(void 0===r)return void this._log("onEnded: undefined duration!");n.onEnd(r),n.stop(0,r,!0),this.hasBeenPaused=!1}}},{key:"onAbort",value:function(e,t){l.DEBUG_HTML5_APP_EVENTS&&this.context.reportAppEvent("abort",{mediaId:this._getCurrentMediaId(t)}),this._log("onAbort: "+t);var n=this._getCurrentInternalConsumptionEvent(t);if(n&&n.isStarted()){var r=this._getTargetCurrentTime(t);if(void 0===r)return void this._log("onAbort: undefined currentTime!");n.onInterrupt(r),n.stop(0,r,!1),this.hasBeenPaused=!1}}},{key:"onDurationChange",value:function(e,t){this._log("onDurationChange: "+t);var n=this._getCurrentInternalConsumptionEvent(t);if(n){var r=this._getTargetDuration(t);if(void 0===r)return void this._log("onDurationChange: undefined duration!");r>0&&n.setPlayerDuration(r)}}},{key:"onTimeUpdate",value:function(e,t){var n=this._getTargetCurrentTime(t),r=this._getCurrentInternalConsumptionEvent(t);if(r&&r.isStarted()){if(void 0===n)return void this._log("onTimeUpdate: undefined currentTime!");this._log("onTimeUpdate: "+n),!l.DEBUG_NO_SCRUB_EVENTS_IN_HTML5_MEDIA&&Math.abs(n-r.prevPositionOnTime)>this.MINIMUM_JUMP_DELAY_SECONDS?(this.positionAtSeeking=n,this._log("onTimeUpdate: seek detected!"),r.onScrub(r.prevPositionOnTime,n),r.setPrevPositionOnTime(n)):r.update(n);var i=this._getTargetDuration(t);i>0&&r.setPlayerDuration(i)}}},{key:"onPlay",value:function(e,t){var n=this._getCurrentMediaId(t);this._log("onPlay: "+n);var r=this._getCurrentInternalConsumptionEvent(t);r&&this.hasBeenPaused&&(this.hasBeenPaused=!1,r.onUnpause())}},{key:"onPause",value:function(e,t){var n=this._getCurrentMediaId(t);this._log("onPause: "+n);var r=this._getTargetCurrentTime(t),i=this._getCurrentInternalConsumptionEvent(t);if(i&&i.isStarted()&&Math.abs(r-this.positionAtSeeking)>this.MINIMUM_JUMP_DELAY_SECONDS){if(this._log("onPause: pause event!"),void 0===r)return void this._log("onPause: undefined currentTime!");i.onPause(r)&&(this.hasBeenPaused=!0),i.setStopPosition(r)}}},{key:"onError",value:function(e,t){l.DEBUG_HTML5_APP_EVENTS&&this.context.reportAppEvent("error",{mediaId:this._getCurrentMediaId(t)});var n=this._getCurrentInternalConsumptionEvent(t);n&&n.isStarted()&&n.onError()}},{key:"onStopEvent",value:function(){this.finishStartedEvents(!1,!0,!0)}},{key:"onWindowUnload",value:function(){this.finishStartedEvents(!1,!0,!1)}},{key:"updatePrintLog",value:function(e){this.printLog=e?e.DEBUG_HTML5_MEDIA:l.DEBUG_HTML5_MEDIA;for(var t in this.internalConsumptionEvents)this.internalConsumptionEvents.hasOwnProperty(t)&&this.internalConsumptionEvents[t].updatePrintLog(this.printLog)}},{key:"_log",value:function(t){this.printLog&&console.log(e.getTag()+"[id="+this.playerId+"]: "+t)}}],[{key:"getTag",value:function(){return"Html5MediaPlayerManager"}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(340),l=i(c),f=n(366),d=i(f),h=n(334),p=i(h),v=n(367),g=r(v),y=n(351),m=r(y),_=n(338),b=i(_),E=n(368),S=i(E),w="nextClickEventIndex",T="event_",O="notification_clicked",k="notification_received",x="subscription_changed",P=function(){function e(t){a(this,e),this.context=t,this.isStarted=!1,this.isStopped=!1,this.hasError=!1,this.notSupported=!1,this.isSubscribed=!1,this.swRegistration=null,this.subscriptionString="",this.pushDeepLinks={},this.defaultPageName=""}return u(e,[{key:"registerPushDefaultPage",value:function(e){this.defaultPageName=e}},{key:"registerPushDeepLink",value:function(e,t){e&&e.length>0&&(this.pushDeepLinks[e]=t)}},{key:"stop",value:function(){var e=this;this.isStarted&&(this.isStopped||(this.isStopped=!0,this.isStarted=!1,"serviceWorker"in navigator&&"PushManager"in window&&(b.log(this.context,"Service Worker and Push is supported but need to unregister"),navigator.serviceWorker.getRegistrations().then(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.unregister()}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}).catch(function(t){console.log("Service Worker Error on unregister",t),e.context._fireSubscribers()}))))}},{key:"start",value:function(){var e=this;this.isStarted||(this.isStarted=!0,this.isStopped=!1,this.scanStoredClickEvents(),"serviceWorker"in navigator&&"PushManager"in window?(b.log(this.context,"Service Worker and Push is supported, registering "+p.CMSDK_SERVICE_WORKER_FOLDER+"cmsdkServiceWorker.js"),navigator.serviceWorker.register(p.CMSDK_SERVICE_WORKER_FOLDER+"cmsdkServiceWorker.js").then(function(t){b.log(e.context,"Service Worker is registered: "+t),navigator.serviceWorker.addEventListener("message",function(t){return t.source!==navigator.serviceWorker.controller?void b.log(e.context,"Different worker!"):(t.data.command===x&&(b.log(e.context,x),e.updateSubscriptionOnServer(t.data.key)),t.data.command===O&&e._onNotificationClicked(t.data.action,t.data.actionId?t.data.actionId:t.data.action_id,t.data.key),void(t.data.command===k&&e._onNotificationReceived(t.data.key)))})}).catch(function(t){console.error("Service Worker Error",t),e.hasError=!0,e.context._fireSubscribers()}),navigator.serviceWorker.ready.then(function(t){e.swRegistration=t,e.getInitialSubscription()})):(console.warn("Push messaging is not supported"),this.notSupported=!0,this.context._fireSubscribers()))}},{key:"refreshSubscription",value:function(){var e=this;this.swRegistration.pushManager.getSubscription().then(function(t){e.updateSubscriptionOnServer(t)})}},{key:"getInitialSubscription",value:function(){var e=this;this.swRegistration.pushManager.getSubscription().then(function(t){e.isSubscribed=!(null===t),e.updateSubscriptionOnServer(JSON.stringify(t)),e.isSubscribed?b.log(e.context,"User IS subscribed."):b.log(e.context,"User is NOT subscribed."),e.subscribeUser()})}},{key:"updateSubscriptionOnServer",value:function(e){if(e&&"null"!==e){b.log(this.context,e);var t=l.default(e);p.checkWebPushTokenHashChanged(t)?new g.default(this.context,e).execute():b.log(this.context,"updateSubscriptionOnServer: webPush token has not changed"),this.subscriptionString=e}else b.log(this.context,"updateSubscriptionOnServer: null!");b.log(this.context,"updateSubscriptionOnServer",navigator.serviceWorker.controller),this.context._fireSubscribers()}},{key:"subscribeUser",value:function(){var e=this,t=d.urlB64ToUint8Array(p.APPLICATION_SERVER_PUB_KEY);this.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t}).then(function(t){b.log(e.context,"User is subscribed."),e.updateSubscriptionOnServer(JSON.stringify(t)),e.isSubscribed=!0,e.context._fireSubscribers()}).then(function(t){b.log(e.context,"PushManager: subscribeUser: set_pub_key"),e.swRegistration.active.postMessage({command:"set_pub_key",key:d.urlB64ToUint8Array(p.APPLICATION_SERVER_PUB_KEY),defPageName:e.defaultPageName})}).catch(function(t){console.log("Failed to subscribe the user: ",t),e.hasError=!0,e.context._fireSubscribers()})}},{key:"_onNotificationReceived",value:function(e){b.log(this.context,"_onNotificationReceived: "+e)}},{key:"_onNotificationClicked",value:function(e,t,n){b.log(this.context,"_onNotificationClicked: "+n);var r=null;try{r=JSON.parse(n)}catch(e){return void b.log(this.context,"push does not contain JSON: "+n)}if(null!=r){var i=r.notification_id,o=i?String(i).valueOf().trim():void 0;if(e&&e.length>0){if(this._processAction(e,t,r))return void b.log(this.context,"_processAction callback -> true");o&&o.length>0&&m.default.internalNotificationMediaEventReport(this.context,o,m.default.CMSDKInternalEventTypes.notification_click,{action:"push_button",button:e})}else if(r.action&&r.action.length>0){if(t||(t=r.action_id),this._processAction(r.action,t,r))return void b.log(this.context,"_processAction callback --> true");o&&o.length>0&&m.default.internalNotificationMediaEventReport(this.context,o,m.default.CMSDKInternalEventTypes.notification_click)}else o&&o.length>0&&m.default.internalNotificationMediaEventReport(this.context,o,m.default.CMSDKInternalEventTypes.notification_click);this.scanStoredClickEvents(o)}}},{key:"_processAction",value:function(e,t,n){var r=this.pushDeepLinks[e];if(b.log(this.context,"_processAction action="+e+";actionId="+t+", callback available: "+!!r+")"),r){var i=void 0;return n.custom_data&&"object"===s(n.custom_data)&&(i=n.custom_data),b.log(this.context,"_processAction action="+e+";actionId="+t+",customData="+JSON.stringify(i)),r(e,t,i)}return!1}},{key:"scanStoredClickEvents",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,u,c,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.idbKeyval.get(w);case 2:if(n=e.sent,n=+n,b.log(this.context,"scanStoredClickEvents skipNotificationId="+t+" nextClickEventIndex="+n),!(n<=0)){e.next=7;break}return e.abrupt("return");case 7:r=0;case 8:if(!(r<n)){e.next=48;break}return b.log(this.context,"scanStoredClickEvents "+r+"/"+n),i=T+r,e.next=13,S.idbKeyval.get(i);case 13:if(o=e.sent,o&&!(o.length<=0)){e.next=17;break}return b.log(this.context,"scanStoredClickEvents does not contain entry: "+i),e.abrupt("continue",45);case 17:a=void 0,e.prev=18,a=JSON.parse(o),e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(18),b.log(this.context,"scanStoredClickEvents does not contain JSON: "+a),e.abrupt("continue",45);case 26:if(a.command!==O){e.next=42;break}s=null,u=a.timestamp,e.prev=29,s=JSON.parse(a.key),e.next=37;break;case 33:return e.prev=33,e.t1=e.catch(29),b.log(this.context,"scanStoredClickEvents event does not contain JSON: "+a.key),e.abrupt("return");case 37:c=s.notification_id,l=c?String(c).valueOf().trim():void 0,l&&l.length>0?l!==t?m.default.internalNotificationMediaEventReportWithTimestamp(this.context,l,m.default.CMSDKInternalEventTypes.notification_click,u):b.log(this.context,"scanStoredClickEvents passed notificationId: "+t):b.log(this.context,"scanStoredClickEvents invalid notificationId: "+l),e.next=43;break;case 42:b.log(this.context,"scanStoredClickEvents skipping invalid command: "+a.command);case 43:return e.next=45,S.idbKeyval.delete(i);case 45:++r,e.next=8;break;case 48:return e.next=50,S.idbKeyval.get(w);case 50:if(f=e.sent,f!==n){e.next=54;break}return e.next=54,S.idbKeyval.delete(w);case 54:case"end":return e.stop()}},e,this,[[18,22],[29,33]])}));return e}()}]),e}();t.default=P,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.urlB64ToUint8Array=function(){return function(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f="ThirdPartyAuth",d="Update",h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,d));return r.token=n,r}return a(t,e),s(t,[{key:"execute",value:function(){var e=this,n={third_party_type:"webpush",third_party_auth_data:{token:this.token}};u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,n,function(e){200==e.code},function(n){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",e)+"Error: "+JSON.stringify(n))})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=t.idbKeyval=function(){function e(){return r||(r=new Promise(function(e,t){var n=indexedDB.open("CMSDKKeyVal_v1",1);n.onerror=function(){t(n.error)},n.onupgradeneeded=function(){n.result.createObjectStore("keyval")},n.onsuccess=function(){e(n.result)}})),r}var t=function(){var t=n(regeneratorRuntime.mark(function t(n,r){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return i=t.sent,t.abrupt("return",new Promise(function(e,t){var o=i.transaction("keyval",n);o.oncomplete=function(){return e()},o.onerror=function(){return t(o.error)},r(o.objectStore("keyval"))}));case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),r=void 0;return{get:function(e){var r=this;return n(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=void 0,n.next=3,t("readonly",function(t){i=t.get(e)});case 3:return n.abrupt("return",i.result);case 4:case"end":return n.stop()}},n,r)}))()},set:function(e,n){return t("readwrite",function(t){t.put(n,e)})},delete:function(e){return t("readwrite",function(t){t.delete(e)})}}}();self.indexedDB||(t.idbKeyval=r={get:function(e){return Promise.resolve(localStorage.getItem(e))},set:function(e,t){return Promise.resolve(localStorage.setItem(e,t))},delete:function(e){return Promise.resolve(localStorage.removeItem(e))}})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.context=t,this.needToSendTags=!1}return r(e,[{key:"markNeedToSendTags",value:function(e){this.needToSendTags=!0,this.checkSendTagsAllowed(e)}},{key:"checkSendTagsAllowed",value:function(e){if(this.needToSendTags&&e.isValidSessionId()){this.needToSendTags=!1;var t=e.getReferrer(e),n=e.getFullReferrer(e);t&&t.length>0?this.context.createConsumerTag("referrer",t):console.log("ReferrerManager: empty referrer!"),n&&n.length>0?this.context.createConsumerTag("referrer_detail",n):console.log("ReferrerManager: empty full referrer!")}}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),u=i(s),c=n(371),l=r(c),f=n(372),d=r(f),h=n(373),p=r(h),v=n(374),g=r(v),y=n(351),m=r(y),_="new_flag",b="is_new",E="is_last_page",S="result_items",w="delivery_time",T=function(){function e(t){o(this,e),this.context=t,this.sentInitialRequest=!u.CMSDK_INBOX_ENABLE,this.cachedData=u.getInboxCachedData(),this.callbackWhenInboxRefreshed=null}return a(e,null,[{key:"registeredDirections",get:function(){return Object.freeze({refresh:"refresh",older:"older"})}}]),a(e,[{key:"registerInboxRefreshed",value:function(e){this.callbackWhenInboxRefreshed=e}},{key:"hasInboxNewMessages",value:function(){return!(!this.cachedData||!this.cachedData.hasOwnProperty(_))&&"true"===this.cachedData[_]}},{key:"onSessionChanged",value:function(){u.CMSDK_INBOX_ENABLE&&this.fetchOnServerCommand()}},{key:"fetchInitial",value:function(){this.sentInitialRequest||(console.log("fetchInitial"),this.sentInitialRequest=!0,this.fetchInbox())}},{key:"fetchOnServerCommand",value:function(){var e=this;this.sentInitialRequest||(this.sentInitialRequest=!0),console.log("fetchOnServerCommand"),this.fetchInboxFromRemote(void 0,void 0,function(){e.callbackWhenInboxRefreshed&&e.callbackWhenInboxRefreshed(e.cachedData)})}},{key:"fetchInbox",value:function(t,n,r){if(console.log("fetchInbox:"+n),(!n||n===e.registeredDirections.refresh)&&this.cachedData)return void(r&&r(this.cachedData));var i=void 0;if(n===e.registeredDirections.older&&this.cachedData&&this.cachedData.hasOwnProperty(S)&&this.cachedData[S].length>0){var o=this.cachedData[S][this.cachedData[S].length-1];o.hasOwnProperty(w)&&(i=o[w])}this.fetchInboxFromRemote(i,n,r)}},{key:"fetchInboxFromRemote",value:function(t,n,r){var i=this;console.log("fetchInboxFromRemote:"+n),new l.default(this.context).execute(t,n,e.registeredDirections,function(t){if(!t)return void(r&&r(i.cachedData));if(n&&n!==e.registeredDirections.refresh){if(n===e.registeredDirections.older){if(i.cachedData){var o=void 0;if(t.hasOwnProperty(S)&&t[S].length>0)for(o=0;o<t[S].length;++o){var a=t[S][o];i.cachedData.hasOwnProperty(S)||(i.cachedData[S]=[]),i.cachedData[S].push(a)}t.hasOwnProperty(E)&&(i.cachedData[E]=t[E]),i._storeCachedData()}else i.cachedData=t,i._storeCachedData();r&&r(i.cachedData)}}else i.cachedData=t,i._storeCachedData(),r&&r(i.cachedData)})}},{key:"markInboxOpened",value:function(e,t){this.context.reportAppEvent("inbox_open",null),new d.default(this.context).execute(),e&&e.hasOwnProperty(_)&&(e[_]=!1),this.cachedData&&this.cachedData.hasOwnProperty(_)&&this.cachedData[_]&&(this.cachedData[_]=!1,this._storeCachedData()),t&&t(this.cachedData)}},{key:"_storeCachedData",value:function(){this.cachedData&&u.saveInboxCachedData(this.cachedData)}},{key:"markInboxMessagesOpened",value:function(e,t){var n=this;if(e){var r=void 0,i=void 0,o=[],a=void 0;if(r=this._buildIdsArray(e,function(e){return e.hasOwnProperty(b)&&"true"===e[b]}),r.length<=0)return void console.log("markInboxMessagesOpened: nothing to process");for(i=0;i<r.length;++i)o.push({status:b,value:0}),m.default.internalNotificationMediaEventReportWithAppAction(this.context,r[i],m.default.CMSDKInternalEventTypes.msg_open);new p.default(this.context).execute(r,o,function(e){if(e)if(n.cachedData&&n.cachedData.hasOwnProperty(S)){var o=!1;for(i=0;i<n.cachedData[S].length;++i)a=n.cachedData[S][i],a.hasOwnProperty("id")&&a.hasOwnProperty(b)&&r.indexOf(a.id)>=0&&(a[b]="false",o=!0);o&&n._storeCachedData(),t(n.cachedData)}else t(null);else t(null)})}}},{key:"markInboxMessagesDeleted",value:function(e,t){var n=this;if(e){var r=this._buildIdsArray(e),i=void 0;if(r.length<=0)return void console.log("markInboxMessagesDeleted: nothing to process");for(i=0;i<r.length;++i)m.default.internalNotificationMediaEventReportWithAppAction(this.context,r[i],m.default.CMSDKInternalEventTypes.msg_delete);new g.default(this.context).execute(r,function(e){if(e)if(n.cachedData&&n.cachedData.hasOwnProperty(S)){var o=!1,a=void 0;if(n.cachedData[S].length>0)for(i=n.cachedData[S].length-1;i>=0;i--)a=n.cachedData[S][i],a.hasOwnProperty("id")&&r.indexOf(a.id)>=0&&(n.cachedData[S].splice(i,1),o=!0);o&&n._storeCachedData(),t(n.cachedData)}else t(null);else t(null)})}}},{key:"_buildIdsArray",value:function(e,t){var n=[],r=void 0,i=void 0;if(e.hasOwnProperty(S)){for(r=0;r<e[S].length;++r)if(i=e[S][r],i.hasOwnProperty("id")){if(t&&!t(i))continue;n.push(i.id)}}else if(e.hasOwnProperty("id"))n.push(e.id);else if(e.constructor===Array)for(r=0;r<e.length;++r)i=e[r],i.hasOwnProperty("id")&&n.push(i.id);return n}}]),e}();t.default=T,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(342),f=i(l),d=n(334),h=r(d),p=n(337),v=r(p),g="Inbox",y="Read",m=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g,y))}return s(t,e),u(t,[{key:"execute",value:function(e,n,r,i){var o=this,a={check_expiration:1,types:["in-app"],statuses:[{status:"active",value:1}],limit:h.CMSDK_INBOX_PAGE_SIZE};if(e&&e.length>0){var s=Date.parse(e);s+=n===r.older?-1e3:1e3,a.last_received_time=v.dateFormat(s,h.CMSDK_TIMESTAMP_FORMAT),a.order=n===r.older?"desc":"asc"}else a.order="desc";c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,a,function(e){i(200===e.code?e.data:null)},function(e){console.log(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",o)+"Error: "+JSON.stringify(e)),i(null)})}},{key:"needsSession",get:function(){return!0}}]),t}(f.default);t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);
var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f="Inbox",d="Open",h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,d))}return a(t,e),s(t,[{key:"execute",value:function(){var e=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,{},function(e){200==e.code},function(n){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",e)+"Error: "+JSON.stringify(n))})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f="Inbox",d="Update",h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,d))}return a(t,e),s(t,[{key:"execute",value:function(e,n,r){var i=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,{notification_ids:e,statuses:n},function(e){r(200==e.code?e.data:null)},function(e){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",i)+"Error: "+JSON.stringify(e)),r(null)})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f="Inbox",d="Delete",h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,d))}return a(t,e),s(t,[{key:"execute",value:function(e,n){var r=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,{notification_ids:e},function(e){n(200==e.code?e.data:null)},function(e){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",r)+"Error: "+JSON.stringify(e)),n(null)})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(342),f=i(l),d=n(334),h=r(d),p="MediaTag",v="ReadTags",g=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p,v))}return s(t,e),u(t,[{key:"execute",value:function(e){var n=this;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,{partner_id:h.PARTNER_ID.toString()},function(t){if(200==t.code){var n,r=[];if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("result_items")&&t.data.result_items.length>0)for(n=0;n<t.data.result_items.length;++n){var i=t.data.result_items[n];i.hasOwnProperty("name")&&r.push(i.name)}e&&e(r)}else e&&e(null)},function(r){console.log(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",n)+"Error: "+JSON.stringify(r)),e&&e(null)})}},{key:"needsSession",get:function(){return!1}}]),t}(f.default);t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(354),l=i(c),f=n(355),d=i(f),h=n(351),p=i(h),v=n(345),g=i(v),y=n(334),m=r(y),_="MediaTag",b="Create",E=function(e){function t(e,n,r,i){o(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,i));return s.mediaId=e.toString(),s.contentType=n,g.default.checkPropertyOneOf(n,p.default.contentTypes,"Content type"),s}return s(t,e),u(t,[{key:"report",value:function(e,t,n){var r=this,i={tag:this.key,value:this.value,media_id:this.mediaId,media_kind:this.contentType,media_id_ns:m.ID_NAMESPACE&&m.ID_NAMESPACE.length>0?m.ID_NAMESPACE:void 0};new d.default(e,this,_,b).report(i,function(){r.id||e.dbManager.storeMediaTag(r)},function(){return e.dbManager.removeMediaTag(r)},t,n)}}]),t}(l.default);t.default=E,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(354),l=i(c),f=n(355),d=i(f),h=n(351),p=i(h),v=n(345),g=i(v),y=n(334),m=r(y),_="MediaTag",b="Delete",E=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,""));return i.mediaId=e.toString(),i.contentType=n,g.default.checkPropertyOneOf(n,p.default.contentTypes,"Content type"),i}return s(t,e),u(t,[{key:"report",value:function(e,t,n){var r=this,i={tag:this.key,media_id:this.mediaId,media_kind:this.contentType,media_id_ns:m.ID_NAMESPACE&&m.ID_NAMESPACE.length>0?m.ID_NAMESPACE:void 0};new d.default(e,this,_,b).report(i,function(){r.id||e.dbManager.storeMediaTag(r)},function(){return e.dbManager.removeMediaTag(r)},t,n)}}]),t}(l.default);t.default=E,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(354),l=i(c),f=n(379),d=i(f),h=n(334),p=r(h),v=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,""))}return s(t,e),u(t,[{key:"execute",value:function(e,t){var n={tag:this.key,media_id_ns:p.ID_NAMESPACE&&p.ID_NAMESPACE.length>0?p.ID_NAMESPACE:void 0};new d.default(e).report(n,t)}}]),t}(l.default);t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f="MediaTag",d="Read",h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,d))}return a(t,e),s(t,[{key:"report",value:function(e,n){var r=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,e,function(e){if(200===e.code){var t=[],r=void 0;if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("result_items")&&e.data.result_items.length>0)for(r=0;r<e.data.result_items.length;++r){var i=e.data.result_items[r],o={mediaId:i.media_id,contentType:i.media_kind,value:i.value,namespaceMediaId:i.third_party_id};t.push(o)}n&&n(t)}else n&&n(null)},function(e){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",r)+"Error: "+JSON.stringify(e)),n&&n(null)})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(354),l=i(c),f=n(381),d=i(f),h=n(351),p=i(h),v=n(345),g=i(v),y=n(334),m=r(y),_=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,void 0,void 0));if(n)r.mediaId=e.toString(),r.contentType=n,r.singleMedia=!0,g.default.checkPropertyOneOf(n,p.default.contentTypes,"Content type");else if(r.singleMedia=!1,r.media=[],e&&e.length>0)for(var i=0;i<e.length;++i){var s=e[i];s.hasOwnProperty("mediaId")&&s.hasOwnProperty("contentType")&&(g.default.checkPropertyOneOf(s.contentType,p.default.contentTypes,"Content type"),r.media.push({media_id:s.mediaId.toString(),media_kind:s.contentType}))}return r}return s(t,e),u(t,[{key:"execute",value:function(e,t){var n;n=this.singleMedia?{media_list:[{media_id:this.mediaId,media_kind:this.contentType}],media_id_ns:m.ID_NAMESPACE&&m.ID_NAMESPACE.length>0?m.ID_NAMESPACE:void 0}:{media_list:this.media,media_id_ns:m.ID_NAMESPACE&&m.ID_NAMESPACE.length>0?m.ID_NAMESPACE:void 0},new d.default(e).execute(n,t)}}]),t}(l.default);t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f="MediaTag",d="ReadAll",h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,d))}return a(t,e),s(t,[{key:"execute",value:function(e,n){var r=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,e,function(e){if(200===e.code){var t,r,i=[];if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("result_items")&&e.data.result_items.length>0)for(t=0;t<e.data.result_items.length;++t){var o=e.data.result_items[t],a={mediaId:o.media_id,contentType:o.media_kind,namespaceMediaId:o.third_party_id,tags:{}};for(var s in o.user)if(o.user.hasOwnProperty(s)&&(a.tags[s]={value:o.user[s]},a.tags[s].totals=[],o.totals[s]&&o.totals[s].length>0))for(r=0;r<o.totals[s].length;++r){var u=o.totals[s][r];a.tags[s].totals.push({value:u.value,count:u.count})}i.push(a)}n&&n(i)}else n&&n(null)},function(e){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",r)+"Error: "+JSON.stringify(e)),n&&n(null)})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),u=i(s),c=n(383),l=r(c),f=function(){function e(t,n){o(this,e),this.context=t,this.printLog=u.DEBUG_SESSION_CREATOR,this.comm=null,this.callbacks=[],this.useSilent=n}return a(e,[{key:"_log",value:function(t){this.printLog&&console.log(e.getTag()+t)}},{key:"addCallback",value:function(e){this.callbacks.push(e)}},{key:"execute",value:function(){var e=this;return this.comm?void this._log("session.create request already sent!"):(this.comm=new l.default(this.context,this.context.uuid,this.useSilent),void this.comm.executeNotifySuccess("",function(){e._onFinished()}))}},{key:"executeNotifySuccess",value:function(e,t){var n=this;return this.comm?(this._log("session.create request already sent! this request callback is queued"),void this.callbacks.push(t)):(this.comm=new l.default(this.context,this.context.uuid,this.useSilent),void this.comm.executeNotifySuccess(e,function(){n._onFinished(),t&&t()}))}},{key:"_onFinished",value:function(){var e=void 0;for(e=0;e<this.callbacks.length;++e)this.callbacks[e]&&this.callbacks[e]();this.callbacks=[],this.comm=null}}],[{key:"getTag",value:function(){return"SessionCreatorManager: "}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(334),f=i(l),d=n(342),h=r(d),p=n(384),v=r(p),g="Session",y="Create",m=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g,y));return i.hardwareId=n,i.useSilent=r,i}return s(t,e),u(t,[{key:"_getDescriptor",value:function(){return{app_ver:f.APP_VER,sdk_ver:f.SDK_VER,app_code:f.APP_CODE,partner_id:f.PARTNER_ID.toString(),hardware_id:this.hardwareId,device_id:f.getDeviceId(),passkey:this.useSilent?f.getSilentPasskey():f.getActualPasskey(),consumer_id:this.useSilent?f.getSilentConsumerId():f.getActualConsumerId()}}},{key:"execute",value:function(){var e=this;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,this._getDescriptor(),function(n){if(200===n.code){var r=n.data.consumer_id,i=n.data.session_id;f.saveConsumerRegistration(e.useSilent,void 0,void 0,r,void 0,i),e.context._onSessionChanged(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",e))}},function(n){console.log(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",e)+"Error: "+JSON.stringify(n))})}},{key:"executeNotifySuccess",value:function(e,n){var r=this;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,this._getDescriptor(),function(t){if(200===t.code){var i=t.data.consumer_id,o=t.data.session_id;f.saveConsumerRegistration(r.useSilent,void 0,void 0,i,void 0,o),r.context._onSessionChanged(e),n()}else 500!==t.code&&new v.default(r.context,r.hardwareId).execute(n)},function(e){console.log(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",r)+"Error: "+JSON.stringify(e)),500!==e.code&&new v.default(r.context,r.hardwareId).execute(n)})}}]),t}(h.default);t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(346),u=i(s),c=n(334),l=r(c),f=function(){function e(t,n){o(this,e),this.context=t,this.hardwareId=n,this.retryIntervalMs=l.RETRY_RE_REGISTER_MS}return a(e,[{key:"execute",value:function(e){var t=this;new u.default(this.context,!0,this.context._getSilentUserForRegistration()).execute(null,function(n){if(n){var r=l.getConsumerUsername();r&&r.length>0?t.executeReLogin(r,e):e()}else setTimeout(function(){t.execute(e)},t.retryIntervalMs)})}},{key:"executeReLogin",value:function(e,t){var n=this;new u.default(this.context,!1,e).execute(null,function(e){e?t():setTimeout(function(){n.executeReLogin(t)},n.retryIntervalMs)})}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),u=i(s),c=n(338),l=i(c),f=n(346),d=r(f),h=n(386),p=r(h),v=function(){function e(t){o(this,e),this.context=t,this.printLog=u.DEBUG_SET_USER,this.comm=null,this.autoSetUser=null,this.isSettingUser=null,this.numOfAttemptsToSetUser=0,this.nextSetUserTimer=null}return a(e,[{key:"_log",value:function(t){this.printLog&&l.log(this.context,e.getTag()+t)}},{key:"hasAutoSetUser",value:function(){return this.autoSetUser}},{key:"processAutoSetUser",value:function(){if(this.hasAutoSetUser()){var e=this.autoSetUser;this.autoSetUser=null,l.log(this.context,"Delayed call of setUser.."),this.setUser(e.userName,e.signupType,e.extraData,e.mergeData,e.profile,e.isChildProfile)}}},{key:"setUser",value:function(e,t,n,r,i,o){var a=this;if(u.matchesStoredUsername(e))return l.log(this.context,"setUser: matchesStoredUsername: "+e),u.internalSetUser(),i&&(l.log(this.context,"setUser: matchesStoredUsername: profile="+i+" isCP="+o),u.setUserProfile(i,o)),void this.context._fireSubscribers(null,this);if(!e||0===e.length||0===e.trim().length)throw new TypeError("setUser is called with empty userName!");if(e=e.trim(),e.length<u.CMSDK_MIN_USERNAME_LENGTH)throw new TypeError("setUser is called with userName of length shorter than "+u.CMSDK_MIN_USERNAME_LENGTH);if(e.length>u.CMSDK_MAX_USERNAME_LENGTH)throw new TypeError("setUser is called with userName of length longer than "+u.CMSDK_MAX_USERNAME_LENGTH);return u.isSilentlyRegistered()?(this.isSettingUser&&this.nextSetUserTimer&&(clearTimeout(this.nextSetUserTimer),this.nextSetUserTimer=null),t&&0!==t.length||(t="LoginSDK consumer"),n?n.signup_type=t:n={signup_type:t},l.log(this.context,"userSetManager::setUser: "+e+" extraData="+JSON.stringify(n)),this.isSettingUser=e,void new d.default(this.context,!1,e,n,null,i,o).execute(r,function(s){if(s)a.checkUpdateUserExtraData(e),a.isSettingUser=null,a.numOfAttemptsToSetUser=0,u.CMSDK_INCLUDE_RECOMMENDATION_PROFILE&&(u.setForceUpdateRecoProfile(),a.context.appConfigManager.readRecoProfile());else{var c=u.getNextSetUserRetryTimeIntervalMs(++a.numOfAttemptsToSetUser);l.log(a.context,"setUser next attempt in "+c+" ms..."),a.nextSetUserTimer=setTimeout(function(){a.setUser(e,t,n,r,i,o)},c)}})):(this.autoSetUser={userName:e,signupType:t,extraData:n,mergeData:r,profile:i,isChildProfile:o},void l.log(this,"setUser call is delayed while CMSDK is not silently registered"))}},{key:"updateUserExtraData",value:function(e){if(l.log(this.context,"userSetManager::updateUserExtraData: extraData="+JSON.stringify(e)),this.isSettingUser||this.autoSetUser){var t=this.isSettingUser?this.isSettingUser:this.autoSetUser.userName;u.storeUserExtraDataToUpdate(e,t),l.log(this.context,"updateUserExtraData storeUserExtraDataToUpdate extra="+JSON.stringify(e))}else u.isUserRegistered()&&u.isValidSessionId()?new p.default(this.context,e,!1).execute():u.isValidSessionId()?new p.default(this.context,e,!0).execute():(u.storeUserExtraDataToUpdate(e),l.log(this.context,"updateUserExtraData storeSilentUserExtraDataToUpdate extra="+JSON.stringify(e)))}},{key:"checkUpdateUserExtraData",value:function(e){var t=u.getUserExtraDataToUpdate(e);t&&(l.log(this.context,"_checkUpdateUserExtraData userName="+e+" extra="+JSON.stringify(t)),u.storeUserExtraDataToUpdate(void 0,e),new p.default(this.context,t,!e).execute(function(n){n||u.storeUserExtraDataToUpdate(t,e)}))}}],[{key:"getTag",value:function(){return"UserSetManager: "}}]),e}();t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(342),f=i(l),d=n(334),h=r(d),p="Consumer",v="Update",g=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p,v));return i.extraData=h.filterExtraIsNumberOrString(n),i.useSilent=r,i}return s(t,e),u(t,[{key:"execute",value:function(e){var n=this,r={consumer_id:"1",extra_data:this.extraData?this.extraData:void 0};c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,r,function(t){200===t.code?e&&e(!0):e&&e(!1)},function(r){console.log(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",n)+"Error: "+JSON.stringify(r)),e&&e(!1)})}},{key:"needsSession",get:function(){return!0}},{key:"needsSilentSession",get:function(){return this.useSilent}}]),t}(f.default);t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),l=r(c),f=n(345),d=r(f),h=n(351),p=r(h),v="ConsumptionState",g="Read",y=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v,g));
return r&&d.default.checkPropertyOneOf(r,p.default.contentTypes,"Content type"),a.descriptor={media_id:n?n:void 0,media_kind:r?r:void 0},a}return a(t,e),s(t,[{key:"execute",value:function(e){var n=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,this.descriptor,function(t){if(200===t.code){var n=[],r=void 0;if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("result_items")&&t.data.result_items.length>0)for(r=0;r<t.data.result_items.length;++r){var i=t.data.result_items[r],o={mediaId:i.media_id,contentType:i.media_kind,location:+i.location};n.push(o)}e&&e(n)}else e&&e(null)},function(r){console.log(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",n)+"Error: "+JSON.stringify(r)),e&&e(null)})}},{key:"needsSession",get:function(){return!0}}]),t}(l.default);t.default=y,e.exports=t.default},function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(334),c=o(u),l=n(338),f=o(l),d=n(356),h=i(d),p=n(377),v=i(p),g=function(){function e(t){a(this,e),this.context=t,this.db=new r.Dexie("CmsdkEvents_v5"),this.init()}return s(e,[{key:"init",value:function(){var e=this;this.db.version(1).stores({app_events:"++id, eventType, timestamp, extra, sdkActivity, tabIdOwner",media_events:"++id, mediaId, contentType, eventType, timestamp, extra, tabIdOwner",consumption_events:"++id, mediaId, contentType, consumptionType, timestamp, deliveryId, duration, startPosition, stopPosition, position, completePlay, extra, lifeTimeDays, errorCount, sdkActivity, tabIdOwner",consumer_tags:"++id, key, value, isDelete, tabIdOwner",media_tags:"++id, mediaId, contentType, key, value, isDelete, tabIdOwner",tabs_pool:"++id, tabId"}),this.db.open().catch(function(t){e.context._onDbManagerFailOpen(t)})}},{key:"ownershipTabFilter",value:function(e){return{tabIdOwner:e}}},{key:"currentTabFilter",value:function(){return{tabIdOwner:this.context.interTabCommManager.tabId}}},{key:"storeTabId",value:function(e){var t=this;if(this.context.interTabCommManager.tabId){var n={tabId:this.context.interTabCommManager.tabId};this.db.tabs_pool.where(n).count().then(function(r){r<=0?t.db.tabs_pool.put(n).then(function(){e&&e()}).catch(function(t){console.log("storeTabId: put:"+t),e&&e()}):e&&e()}).catch(function(t){console.log("storeTabId: count:"+t),e&&e()})}else console.log("storeTabId: tabId is empty!")}},{key:"storeAppEvent",value:function(e,t){var n=this;this.db.app_events.put({eventType:e.eventType,timestamp:e.timestamp,extra:JSON.stringify(e.extra),sdkActivity:e.sdkActivity,tabIdOwner:this.context.interTabCommManager.tabId}).then(function(){t&&t(),n.storeTabId()}).catch(function(e){n.context._onDbManagerFailOperation(e)})}},{key:"removeAppEvent",value:function(e){return this.db.app_events.where({id:e.id}).delete()}},{key:"storeMediaEvent",value:function(e,t){var n=this;console.log("storeMediaEvent "+e.mediaId+"/"+e.contentType+"/"+e.eventType),this.db.media_events.put({mediaId:e.mediaId,contentType:e.contentType,eventType:e.eventType,timestamp:e.timestamp,extra:JSON.stringify(e.extra),tabIdOwner:this.context.interTabCommManager.tabId}).then(function(){t&&t(),n.storeTabId()}).catch(function(e){n.context._onDbManagerFailOperation(e)})}},{key:"removeMediaEvent",value:function(e){return this.db.media_events.where({id:e.id}).delete()}},{key:"storeConsumptionEvent",value:function(e,t){var n=this;console.log("storeConsumptionEvent "+e.mediaId+"/"+e.contentType+"/"+e.duration),this.db.consumption_events.put({mediaId:e.mediaId,contentType:e.contentType,consumptionType:e.consumptionType,timestamp:e.timestamp,deliveryId:e.delivery_id,duration:e.duration,startPosition:e.startPosition,stopPosition:e.stopPosition,position:e.position,completePlay:e.completePlay,extra:JSON.stringify(e.extra),lifeTimeDays:e.lifeTimeDays,errorCount:e.errorCount,sdkActivity:e.sdkActivity,tabIdOwner:this.context.interTabCommManager.tabId}).then(function(){t&&t(),n.storeTabId()}).catch(function(e){n.context._onDbManagerFailOperation(e)})}},{key:"removeConsumptionEvent",value:function(e){return this.db.consumption_events.where({id:e.id}).delete()}},{key:"storeConsumerTag",value:function(e,t){var n=this;this.db.consumer_tags.put({key:e.key,value:e.value,isDelete:e instanceof h.default,tabIdOwner:this.context.interTabCommManager.tabId}).then(function(){t&&t(),n.storeTabId()}).catch(function(e){n.context._onDbManagerFailOperation(e)})}},{key:"removeConsumerTag",value:function(e){return e.id?this.db.consumer_tags.where({id:e.id}).delete():null}},{key:"storeMediaTag",value:function(e,t){var n=this;this.db.media_tags.put({key:e.key,value:e.value,mediaId:e.mediaId,contentType:e.contentType,isDelete:e instanceof v.default,tabIdOwner:this.context.interTabCommManager.tabId}).then(function(){t&&t(),n.storeTabId()}).catch(function(e){n.context._onDbManagerFailOperation(e)})}},{key:"removeMediaTag",value:function(e){return e.id?this.db.media_tags.where({id:e.id}).delete():null}},{key:"fetchDataFromTableIfExceedsLimit",value:function(e,t,n){var r=this;this.db[e].where(this.currentTabFilter()).count().then(function(i){n(i>=t?r.db[e].where(r.currentTabFilter()).limit(c.CMSDK_EVENTS_FLUSH_BATCH_SIZE):null)}).catch(function(e){n(null),r.context._onDbManagerFailOperation(e)})}},{key:"fetchOtherActiveTabsIdsArray",value:function(e){var t=this;this.db.tabs_pool.where("tabId").notEqual(this.context.interTabCommManager.tabId).toArray(e).catch(function(n){e(null),t.context._onDbManagerFailOperation(n)})}},{key:"makeOwnershipTransaction",value:function(t,n){var r=this;this.db.transaction("rw",e.getOwnershipTransactionTableNames(),function(){var n=e.getOwnershipTransactionEventsTableNames();n.forEach(function(e){r.db[e].where(r.ownershipTabFilter(t)).modify(r.currentTabFilter())}),r.db.tabs_pool.where({tabId:t}).delete()}).then(function(){n(!0)}).catch(function(e){console.log("makeOwnershipTransaction: "+e),n(!1)})}},{key:"dump",value:function(e){var t=this;if(e.length>0){var n=new r.Dexie(e[0]);n.open().then(function(){f.log(t.context,"database('"+n.name+"')"),n.tables.forEach(function(e){e.toArray(function(n){f.log(t.context,"table.name="+e.name+" contents="+JSON.stringify(n))})})}).finally(function(){n.close(),t.dump(e.slice(1))})}}},{key:"dumpDatabases",value:function(){var e=this;f.log(this.context,"Dumping Databases"),f.log(this.context,"================="),r.Dexie.getDatabaseNames(function(t){0===t.length?f.log(this.context,"There are no databases at current origin. Try loading another sample and then go back to this page."):e.dump(t)})}}],[{key:"getAppEventsTableName",value:function(){return"app_events"}},{key:"getMediaEventsTableName",value:function(){return"media_events"}},{key:"getConsumptionEventsTableName",value:function(){return"consumption_events"}},{key:"getConsumerTagsTableName",value:function(){return"consumer_tags"}},{key:"getMediaTagsTableName",value:function(){return"media_tags"}},{key:"getOwnershipTransactionEventsTableNames",value:function(){return[e.getAppEventsTableName(),e.getMediaEventsTableName(),e.getConsumptionEventsTableName(),e.getConsumerTagsTableName(),e.getMediaTagsTableName()]}},{key:"getOwnershipTransactionTableNames",value:function(){var t=e.getOwnershipTransactionEventsTableNames();return t.push("tabs_pool"),t}}]),e}();t.default=g,e.exports=t.default}).call(t,n(389))},function(e,t,n){(function(t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){return"object"!=typeof t?e:(Ae(t).forEach(function(n){e[n]=t[n]}),e)}function r(e,t){return je.call(e,t)}function i(e,t){"function"==typeof t&&(t=t(Re(e))),Ae(t).forEach(function(n){o(e,n,t[n])})}function o(t,n,i,o){Le(t,n,e(i&&r(i,"get")&&"function"==typeof i.get?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function a(e){return{from:function(t){return e.prototype=Object.create(t.prototype),o(e.prototype,"constructor",e),{extend:i.bind(null,e.prototype)}}}}function s(e,t){var n,r=Ue(e,t);return r||(n=Re(e))&&s(n,t)}function u(e,t,n){return Fe.call(e,t,n)}function c(e,t){return t(e)}function l(e){if(!e)throw new Error("Assertion Failed")}function f(e){Ne.setImmediate?n(e):setTimeout(e,0)}function d(e,t){return e.reduce(function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e},{})}function h(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function p(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function v(e,t){if(r(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],i=0,o=t.length;i<o;++i){var a=v(e,t[i]);n.push(a)}return n}var s=t.indexOf(".");if(s!==-1){var u=e[t.substr(0,s)];return void 0===u?void 0:v(u,t.substr(s+1))}}function g(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){l("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)g(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?delete e[a]:e[a]=n;else{var u=e[a];u||(u=e[a]={}),g(u,s,n)}}else void 0===n?delete e[t]:e[t]=n}}function y(e,t){"string"==typeof t?g(e,t,void 0):"length"in t&&[].map.call(t,function(t){g(e,t,void 0)})}function m(e){var t={};for(var n in e)r(e,n)&&(t[n]=e[n]);return t}function _(e){return Be.apply([],e)}function b(e){if(!e||"object"!=typeof e)return e;var t;if(De(e)){t=[];for(var n=0,i=e.length;n<i;++n)t.push(b(e[n]))}else if(Ke.indexOf(e.constructor)>=0)t=e;else{t=e.constructor?Object.create(e.constructor.prototype):{};for(var o in e)r(e,o)&&(t[o]=b(e[o]))}return t}function E(e,t,n,i){return n=n||{},i=i||"",Ae(e).forEach(function(o){if(r(t,o)){var a=e[o],s=t[o];"object"==typeof a&&"object"==typeof s&&a&&s&&""+a.constructor==""+s.constructor?E(a,s,n,i+o+"."):a!==s&&(n[i+o]=t[o])}else n[i+o]=void 0}),Ae(t).forEach(function(o){r(e,o)||(n[i+o]=t[o])}),n}function S(e){var t,n,r,i;if(1===arguments.length){if(De(e))return e.slice();if(this===Ge&&"string"==typeof e)return[e];if(i=He(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(null==e)return[e];if(t=e.length,"number"==typeof t){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}function w(e,t){We=e,qe=t}function T(){if(Je)try{throw T.arguments,new Error}catch(e){return e}return new Error}function O(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(qe).map(function(e){return"\n"+e}).join("")):""}function k(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+O(T(),1)),t.apply(this,arguments)}}function x(e,t){this._e=T(),this.name=e,this.message=t}function P(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function C(e,t,n,r){this._e=T(),this.failures=t,this.failedKeys=r,this.successCount=n}function M(e,t){this._e=T(),this.name="BulkError",this.failures=t,this.message=P(e,t)}function I(e,t){if(!e||e instanceof x||e instanceof TypeError||e instanceof SyntaxError||!e.name||!tt[e.name])return e;var n=new tt[e.name](t||e.message,e);return"stack"in e&&o(n,"stack",{get:function(){return this.inner.stack}}),n}function A(){}function D(e){return e}function N(e,t){return null==e||e===D?t:function(n){return t(e(n))}}function R(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function j(e,t){return e===A?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?R(r,this.onsuccess):r),i&&(this.onerror=this.onerror?R(i,this.onerror):i),void 0!==o?o:n}}function L(e,t){return e===A?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?R(n,this.onsuccess):n),r&&(this.onerror=this.onerror?R(r,this.onerror):r)}}function U(t,n){return t===A?n:function(r){var i=t.apply(this,arguments);e(r,i);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?R(o,this.onsuccess):o),a&&(this.onerror=this.onerror?R(a,this.onerror):a),void 0===i?void 0===s?void 0:s:e(i,s)}}function F(e,t){return e===A?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function B(e,t){return e===A?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}function K(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=A,this._lib=!1;var t=this._PSD=Ot;if(We&&(this._stackHolder=T(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==rt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&G(this,this._value))}this._state=null,this._value=null,++t.ref,H(this,e)}function V(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function H(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&$();t&&"function"==typeof t.then?H(e,function(e,n){t instanceof K?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,W(e)),n&&Q()}},G.bind(null,e))}catch(t){G(e,t)}}function G(e,t){if(Et.push(t),null===e._state){var n=e._lib&&$();t=wt(t),e._state=!1,e._value=t,We&&null!==t&&"object"==typeof t&&!t._promise&&p(function(){var n=s(t,"stack");t._promise=e,o(t,"stack",{get:function(){return vt?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),te(e),W(e),n&&Q()}}function W(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)q(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===xt&&(++xt,yt(function(){0===--xt&&Z()},[]))}function q(e,t){if(null===e._state)return void e._listeners.push(t);var n=e._state?t.onFulfilled:t.onRejected;return null===n?(e._state?t.resolve:t.reject)(e._value):(++t.psd.ref,++xt,void yt(J,[n,e,t]))}function J(e,t,n){try{St=t;var r,i=t._value;t._state?r=e(i):(Et.length&&(Et=[]),r=e(i),Et.indexOf(i)===-1&&ne(t)),n.resolve(r)}catch(e){n.reject(e)}finally{St=null,0===--xt&&Z(),--n.psd.ref||n.psd.finalize()}}function Y(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=O(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return We&&(r=O(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Y(e._prev,t,n)),t}function z(e,t){var n=t?t._numPrev+1:0;n<it&&(e._prev=t,e._numPrev=n)}function X(){$()&&Q()}function $(){var e=mt;return mt=!1,_t=!1,e}function Q(){var e,t,n;do for(;kt.length>0;)for(e=kt,kt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(kt.length>0);mt=!0,_t=!0}function Z(){var e=bt;bt=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Pt.slice(0),n=t.length;n;)t[--n]()}function ee(e){function t(){e(),Pt.splice(Pt.indexOf(t),1)}Pt.push(t),++xt,yt(function(){0===--xt&&Z()},[])}function te(e){bt.some(function(t){return t._value===e._value})||bt.push(e)}function ne(e){for(var t=bt.length;t;)if(bt[--t]._value===e._value)return void bt.splice(t,1)}function re(e){return new K(rt,!1,e)}function ie(e,t){var n=Ot;return function(){var r=$(),i=Ot;try{return fe(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{fe(i,!1),r&&Q()}}}function oe(t,n,r,i){var o=Ot,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++jt;var s=Tt.env;a.env=pt?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,resolve:K.resolve,reject:K.reject,nthen:ge(s.nthen,a),gthen:ge(s.gthen,a)}:{},n&&e(a,n),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=he(a,t,r,i);return 0===a.ref&&a.finalize(),u}function ae(){return It.id||(It.id=++At),++It.awaits,It.echoes+=at,It.id}function se(e){!It.awaits||e&&e!==It.id||(0===--It.awaits&&(It.id=0),It.echoes=It.awaits*at)}function ue(e){return It.echoes&&e&&e.constructor===dt?(ae(),e.then(function(e){return se(),e},function(e){return se(),Ut(e)})):e}function ce(e){++Rt,It.echoes&&0!==--It.echoes||(It.echoes=It.id=0),Dt.push(Ot),fe(e,!0)}function le(){var e=Dt[Dt.length-1];Dt.pop(),fe(e,!1)}function fe(e,t){var n=Ot;if((t?!It.echoes||Nt++&&e===Ot:!Nt||--Nt&&e===Ot)||pe(t?ce.bind(null,e):le),e!==Ot&&(Ot=e,n===Tt&&(Tt.env=de()),pt)){var r=Tt.env.Promise,i=e.env;ct.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Ne,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject)}}function de(){var e=Ne.Promise;return pt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Ne,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:ct.then,gthen:e.prototype.then}:{}}function he(e,t,n,r,i){var o=Ot;try{return fe(e,!0),t(n,r,i)}finally{fe(o,!1)}}function pe(e){ft.call(ut,e)}function ve(e,t,n){return"function"!=typeof e?e:function(){var r=Ot;n&&ae(),fe(t,!0);try{return e.apply(this,arguments)}finally{fe(r,!1)}}}function ge(e,t){return function(n,r){return e.call(this,ve(n,t,!1),ve(r,t,!1))}}function ye(t,n){var r;try{r=n.onuncatched(t)}catch(e){}if(r!==!1)try{var i,o={promise:n,reason:t};if(Ne.document&&document.createEvent?(i=document.createEvent("Event"),i.initEvent(Lt,!0,!0),e(i,o)):Ne.CustomEvent&&(i=new CustomEvent(Lt,{detail:o}),e(i,o)),i&&Ne.dispatchEvent&&(dispatchEvent(i),!Ne.PromiseRejectionEvent&&Ne.onunhandledrejection))try{Ne.onunhandledrejection(i)}catch(e){}i.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(e){}}function me(e){function t(e,t,o){if("object"==typeof e)return n(e);t||(t=F),o||(o=A);var a={subscribers:[],fire:o,subscribe:function(e){a.subscribers.indexOf(e)===-1&&(a.subscribers.push(e),a.fire=t(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter(function(t){return t!==e}),a.fire=a.subscribers.reduce(t,o)}};return r[e]=i[e]=a,a}function n(e){Ae(e).forEach(function(n){var r=e[n];if(De(r))t(n,e[n][0],e[n][1]);else{if("asap"!==r)throw new et.InvalidArgument("Invalid event config");var i=t(n,D,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];i.subscribers.forEach(function(e){f(function(){e.apply(null,t)})})})}})}var r={},i=function(t,n){if(n){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return r[t].subscribe.apply(null,o),e}if("string"==typeof t)return r[t]};i.addEventType=t;for(var o=1,a=arguments.length;o<a;++o)t(arguments[o]);return i}function _e(t,n){function a(){tt.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+tt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+tt.name+"'. Closing db now to resume the delete request."),tt.close()}),tt.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+tt.name+"') was blocked"):console.warn("Upgrade '"+tt.name+"' blocked by other connection holding version "+e.oldVersion/10)})}function s(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function f(e,t,n){var r=tt._createTransaction(Ze,He,Ke);r.create(t),r._completion.catch(n);var i=r._reject.bind(r);oe(function(){Ot.trans=r,0===e?(Ae(Ke).forEach(function(e){O(t,e,Ke[e].primKey,Ke[e].indexes)}),K.follow(function(){return tt.on.populate.fire(r)}).catch(i)):y(e,r,t).catch(i)})}function y(e,t,n){function r(){return i.length?K.resolve(i.shift()(t.idbtrans)).then(r):K.resolve()}var i=[],o=Ve.filter(function(t){return t._cfg.version===e})[0];if(!o)throw new et.Upgrade("Dexie specification of currently installed DB version is missing");Ke=tt._dbSchema=o._cfg.dbschema;var a=!1,s=Ve.filter(function(t){return t._cfg.version>e});return s.forEach(function(e){i.push(function(){var r=Ke,i=e._cfg.dbschema;pe(r,n),pe(i,n),Ke=tt._dbSchema=i;var o=w(r,i);if(o.add.forEach(function(e){O(n,e[0],e[1].primKey,e[1].indexes)}),o.change.forEach(function(e){if(e.recreate)throw new et.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){I(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),I(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return a=!0,K.follow(function(){e._cfg.contentUpgrade(t)})}),i.push(function(t){if(!a||!Jt){var n=e._cfg.dbschema;P(n,t)}})}),r().then(function(){x(Ke,n)})}function w(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName;for(var c in s)u[c]||a.del.push(c);for(c in u){var l=s[c],f=u[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,o])}return n}function O(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){I(i,e)}),i}function x(e,t){Ae(e).forEach(function(n){t.db.objectStoreNames.contains(n)||O(t,n,e[n].primKey,e[n].indexes)})}function P(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}function I(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function R(e,t,n){if($e||Ot.letThrough){var r=tt._createTransaction(e,t,Ke);try{r.create()}catch(e){return Ut(e)}return r._promise(e,function(e,t){return oe(function(){return Ot.trans=r,n(e,t,r)})}).then(function(e){return r._completion.then(function(){return e})})}if(!ze){if(!Ue)return Ut(new et.DatabaseClosed);tt.open().catch(A)}return nt.then(function(){return R(e,t,n)})}function F(e,t,n){var r=arguments.length;if(r<2)throw new et.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=_(i);return[e,o,n]}function V(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=qe[e]?qe[e].hook:me(null,{creating:[j,A],reading:[N,D],updating:[U,A],deleting:[L,A]})}function H(e,t,n){return(n?Oe:we)(function(n){e.push(n),t&&t()})}function G(e,t,n,r,i){return new K(function(o,a){var s=n.length,u=s-1;if(0===s)return o();if(r){var c,l=Oe(a),f=Se(null);p(function(){for(var r=0;r<s;++r){c={onsuccess:null,onerror:null};var a=n[r];i.call(c,a[0],a[1],t);var d=e.delete(a[0]);d._hookCtx=c,d.onerror=l,r===u?d.onsuccess=Se(o):d.onsuccess=f}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var d=0;d<s;++d){var h=e.delete(n[d]);h.onerror=we(a),d===u&&(h.onsuccess=ie(function(){return o()}))}})}function W(e,t,n,r){var i=this;this.db=tt,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=me(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new K(function(e,t){i._resolve=e,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),Ut(e)})}function q(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function J(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function Y(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function z(e,t){return e._cfg.version-t._cfg.version}function X(e,t,n){t.forEach(function(t){var r=n[t];e.forEach(function(e){t in e||(e===W.prototype||e instanceof W?o(e,t,{get:function(){return this.table(t)}}):e[t]=new V(t,r))})})}function $(e){e.forEach(function(e){for(var t in e)e[t]instanceof V&&delete e[t]})}function Q(e,t,n,r,i,o){var a=o?function(e,t,r){return n(o(e),t,r)}:n,s=ie(a,i);e.onerror||(e.onerror=we(i)),t?e.onsuccess=h(function(){var n=e.result;if(n){var o=function(){n.continue()};t(n,function(e){o=e},r,i)&&s(n.value,n,function(e){o=e}),o()}else r()},i):e.onsuccess=h(function(){var t=e.result;if(t){var n=function(){t.continue()};s(t.value,t,function(e){n=e}),n()}else r()},i)}function Z(e){var t=[];return e.split(",").forEach(function(e){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new Pe(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),De(r),/\./.test(e)))}),t}function ee(e,t){return Fe.cmp(e,t)}function te(e,t){return ee(e,t)<0?e:t}function ne(e,t){return ee(e,t)>0?e:t}function re(e,t){return Fe.cmp(e,t)}function ue(e,t){return Fe.cmp(t,e)}function ce(e,t){return e<t?-1:e===t?0:1}function le(e,t){return e>t?-1:e===t?0:1}function fe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function de(){if(tt.verno=Je.version/10,tt._dbSchema=Ke={},He=u(Je.objectStoreNames,0),0!==He.length){var e=Je.transaction(Me(He),"readonly");He.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,i=r&&"string"==typeof r&&r.indexOf(".")!==-1,o=new Pe(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),a=[],s=0;s<n.indexNames.length;++s){var u=n.index(n.indexNames[s]);r=u.keyPath,i=r&&"string"==typeof r&&r.indexOf(".")!==-1;var c=new Pe(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,i);a.push(c)}Ke[t]=new Ce(t,o,a,{})}),X([qe],Ae(Ke),Ke)}}function pe(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],o=t.objectStore(i);be="getAll"in o;for(var a=0;a<o.indexNames.length;++a){var s=o.indexNames[a],c=o.index(s).keyPath,l="string"==typeof c?c:"["+u(c).join("+")+"]";if(e[i]){var f=e[i].idxByName[l];f&&(f.name=s)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ne.WorkerGlobalScope&&Ne instanceof Ne.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(be=!1)}function ve(e){tt.on("blocked").fire(e),Wt.filter(function(e){return e.name===tt.name&&e!==tt&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}var ge,ye,be,Re=_e.dependencies,je=e({addons:_e.addons,autoOpen:!0,indexedDB:Re.indexedDB,IDBKeyRange:Re.IDBKeyRange},n),Le=je.addons,Ue=je.autoOpen,Fe=je.indexedDB,Be=je.IDBKeyRange,Ke=this._dbSchema={},Ve=[],He=[],qe={},Je=null,Ye=null,ze=!1,Xe=null,$e=!1,Qe="readonly",Ze="readwrite",tt=this,nt=new K(function(e){ge=e}),rt=new K(function(e,t){ye=t}),it=!0,ot=!!Ie(Fe);this.version=function(e){if(Je||ze)throw new et.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=Ve.filter(function(t){return t._cfg.version===e})[0];return t?t:(t=new s(e),Ve.push(t),Ve.sort(z),it=!1,t)},e(s.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?e(this._cfg.storesSource,t):t;var n={};Ve.forEach(function(t){e(n,t._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(n,r),Ke=tt._dbSchema=r,$([qe,tt,W.prototype]),X([qe,tt,W.prototype,this._cfg.tables],Ae(r),r),He=Ae(r),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){Ae(e).forEach(function(n){if(null!==e[n]){var r={},i=Z(e[n]),o=i.shift();if(o.multi)throw new et.Schema("Primary key cannot be multi-valued");o.keyPath&&g(r,o.keyPath,o.auto?0:o.keyPath),i.forEach(function(e){if(e.auto)throw new et.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new et.Schema("Index must have a name and cannot be an empty string");g(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[n]=new Ce(n,o,i,r)}})}}),this._allTables=qe,this._createTransaction=function(e,t,n,r){return new W(e,t,n,r)},this._whenReady=function(e){return $e||Ot.letThrough?e():new K(function(e,t){if(!ze){if(!Ue)return void t(new et.DatabaseClosed);tt.open().catch(A)}nt.then(e,t)}).then(e)},this.verno=0,this.open=function(){if(ze||Je)return nt.then(function(){return Ye?Ut(Ye):tt});We&&(rt._stackHolder=T()),ze=!0,Ye=null,$e=!1;var e=ge,n=null;return K.race([rt,new K(function(e,r){if(!Fe)throw new et.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=it?Fe.open(t):Fe.open(t,Math.round(10*tt.verno));if(!i)throw new et.MissingAPI("IndexedDB API not available");i.onerror=we(r),i.onblocked=ie(ve),i.onupgradeneeded=ie(function(e){if(n=i.transaction,it&&!tt._allowEmptyDB){i.onerror=ke,n.abort(),i.result.close();var o=Fe.deleteDatabase(t);o.onsuccess=o.onerror=ie(function(){r(new et.NoSuchDatabase("Database "+t+" doesnt exist"))})}else{n.onerror=we(r);var a=e.oldVersion>Math.pow(2,62)?0:e.oldVersion;f(a/10,n,r,i)}},r),i.onsuccess=ie(function(){if(n=null,Je=i.result,Wt.push(tt),it)de();else if(Je.objectStoreNames.length>0)try{pe(Ke,Je.transaction(Me(Je.objectStoreNames),Qe))}catch(e){}Je.onversionchange=ie(function(e){tt._vcFired=!0,tt.on("versionchange").fire(e)}),ot||"__dbnames"===t||Mt.dbnames.put({name:t}).catch(A),e()},r)})]).then(function(){return Xe=[],K.resolve(_e.vip(tt.on.ready.fire)).then(function e(){if(Xe.length>0){var t=Xe.reduce(B,A);return Xe=[],K.resolve(_e.vip(t)).then(e)}})}).finally(function(){Xe=null}).then(function(){return ze=!1,tt}).catch(function(e){try{n&&n.abort()}catch(e){}return ze=!1,tt.close(),Ye=e,Ut(Ye)}).finally(function(){$e=!0,e()})},this.close=function(){var e=Wt.indexOf(tt);if(e>=0&&Wt.splice(e,1),Je){try{Je.close()}catch(e){}Je=null}Ue=!1,Ye=new et.DatabaseClosed,ze&&ye(Ye),nt=new K(function(e){ge=e}),rt=new K(function(e,t){ye=t})},this.delete=function(){var e=arguments.length>0;return new K(function(n,r){function i(){tt.close();var e=Fe.deleteDatabase(t);e.onsuccess=ie(function(){ot||Mt.dbnames.delete(t).catch(A),n()}),e.onerror=we(r),e.onblocked=ve}if(e)throw new et.InvalidArgument("Arguments not allowed in db.delete()");ze?nt.then(i):i()})},this.backendDB=function(){return Je},this.isOpen=function(){return null!==Je},this.hasBeenClosed=function(){return Ye&&Ye instanceof et.DatabaseClosed},this.hasFailed=function(){return null!==Ye},this.dynamicallyOpened=function(){return it},this.name=t,i(this,{tables:{get:function(){return Ae(qe).map(function(e){return qe[e]})}}}),this.on=me(this,"populate","blocked","versionchange",{ready:[B,A]}),this.on.ready.subscribe=c(this.on.ready.subscribe,function(e){return function(t,n){_e.vip(function(){$e?(Ye||K.resolve().then(t),n&&e(t)):Xe?(Xe.push(t),n&&e(t)):(e(t),n||e(function e(){tt.on.ready.unsubscribe(t),tt.on.ready.unsubscribe(e)}))})}}),this.transaction=function(){var e=F.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){function r(){return K.resolve().then(function(){var t=Ot.transless||Ot,r=tt._createTransaction(e,a,Ke,i),o={trans:r,transless:t};i?r.idbtrans=i.idbtrans:r.create(),n.constructor===ht&&ae();var s,u=K.follow(function(){
if(s=n.call(r,r))if(s.constructor===dt){var e=se.bind(null,null);s.then(e,e)}else"function"==typeof s.next&&"function"==typeof s.throw&&(s=xe(s))},o);return(s&&"function"==typeof s.then?K.resolve(s).then(function(e){return r.active?e:Ut(new et.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return s})).then(function(e){return i&&r._resolve(),r._completion.then(function(){return e})}).catch(function(e){return r._reject(e),Ut(e)})})}var i=Ot.trans;i&&i.db===tt&&e.indexOf("!")===-1||(i=null);var o=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{var a=t.map(function(e){var t=e instanceof V?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||e==Qe)e=Qe;else{if("rw"!=e&&e!=Ze)throw new et.InvalidArgument("Invalid transaction mode: "+e);e=Ze}if(i){if(i.mode===Qe&&e===Ze){if(!o)throw new et.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(function(e){if(i&&i.storeNames.indexOf(e)===-1){if(!o)throw new et.SubTransaction("Table "+e+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,function(t,n){n(e)}):Ut(e)}return i?i._promise(e,r,"lock"):Ot.trans?he(Ot.transless,function(){return tt._whenReady(r)}):tt._whenReady(r)},this.table=function(e){if(!r(qe,e))throw new et.InvalidTable("Table "+e+" does not exist");return qe[e]},i(V.prototype,{_trans:function(e,t,n){var r=this._tx||Ot.trans;return r&&r.db===tt?r===Ot.trans?r._promise(e,t,n):oe(function(){return r._promise(e,t,n)},{trans:r,transless:Ot.transless||Ot}):R(e,[this.name],t)},_idbstore:function(e,t,n){function r(e,n,r){if(r.storeNames.indexOf(i)===-1)throw new et.NotFound("Table"+i+" not part of transaction");return t(e,n,r.idbtrans.objectStore(i),r)}var i=this.name;return this._trans(e,r,n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore(Qe,function(t,r,i){var o=i.get(e);o.onerror=we(r),o.onsuccess=ie(function(){t(n.hook.reading.fire(o.result))},r)}).then(t)},where:function(e){if("string"==typeof e)return new q(this,e);if(De(e))return new q(this,"["+e.join("+")+"]");var t=Ae(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})&&e.keyPath.every(function(e){return t.indexOf(e)>=0})})[0];if(n&&Kt!==Bt)return this.where(n.name).equals(n.keyPath.map(function(t){return e[t]}));n||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+t.join("+")+"]"));var r=this.schema.idxByName,i=t.reduce(function(t,n){return[t[0]||r[n],t[0]||!r[n]?fe(t[1],function(t){return""+v(t,n)==""+e[n]}):t[1]]},[null,null]),o=i[0];return o?this.where(o.name).equals(e[o.keyPath]).filter(i[1]):n?this.filter(i[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new J(new q(this,De(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new J(new q(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&Ee(n,t),this.schema.instanceTemplate=n;var i=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var i in t)if(r(t,i))try{n[i]=t[i]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),e},defineClass:function(e){return this.mapToClass(_e.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===A?this._idbstore(Ze,function(t,n,r,i){t(G(r,i,e,!1,A))}):this.where(":id").anyOf(e).delete().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(Ze,function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new et.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new et.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var a,s,u=function(e){0===c.length?r(e):i(new M(n.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,f=n;if(n.hook.creating.fire===A&&n.hook.updating.fire===A){s=H(c);for(var h=0,p=e.length;h<p;++h)a=t?o.put(e[h],t[h]):o.put(e[h]),a.onerror=s;a.onerror=H(c,u),a.onsuccess=Te(u)}else{var g=t||o.keyPath&&e.map(function(e){return v(e,o.keyPath)}),y=g&&d(g,function(t,n){return null!=t&&[t,e[n]]}),m=g?f.where(":id").anyOf(g.filter(function(e){return null!=e})).modify(function(){this.value=y[this.primKey],y[this.primKey]=null}).catch(C,function(e){c=e.failures}).then(function(){for(var n=[],r=t&&[],i=g.length-1;i>=0;--i){var o=g[i];(null==o||y[o])&&(n.push(e[i]),t&&r.push(o),null!=o&&(y[o]=null))}return n.reverse(),t&&r.reverse(),f.bulkAdd(n,r)}).then(function(e){var t=g[g.length-1];return null!=t?t:e}):f.bulkAdd(e);m.then(u).catch(M,function(e){c=c.concat(e.failures),u()}).catch(i)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(Ze,function(i,o,a,s){function u(e){0===d.length?i(e):o(new M(n.name+".bulkAdd(): "+d.length+" of "+h+" operations failed",d))}if(!a.keyPath&&!n.schema.primKey.auto&&!t)throw new et.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new et.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();var c,l,f,d=[],h=e.length;if(r!==A){var y,m=a.keyPath;l=H(d,null,!0),f=Se(null),p(function(){for(var n=0,i=e.length;n<i;++n){y={onerror:null,onsuccess:null};var o=t&&t[n],u=e[n],d=t?o:m?v(u,m):void 0,h=r.call(y,d,u,s);null==d&&null!=h&&(m?(u=b(u),g(u,m,h)):o=h),c=null!=o?a.add(u,o):a.add(u),c._hookCtx=y,n<i-1&&(c.onerror=l,y.onsuccess&&(c.onsuccess=f))}},function(e){throw y.onerror&&y.onerror(e),e}),c.onerror=H(d,u,!0),c.onsuccess=Se(u)}else{l=H(d);for(var _=0,E=e.length;_<E;++_)c=t?a.add(e[_],t[_]):a.add(e[_]),c.onerror=l;c.onerror=H(d,u),c.onsuccess=Te(u)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(Ze,function(r,i,o,a){var s={onsuccess:null,onerror:null};if(n!==A){var u=null!=t?t:o.keyPath?v(e,o.keyPath):void 0,c=n.call(s,u,e,a);null==u&&null!=c&&(o.keyPath?g(e,o.keyPath,c):t=c)}try{var l=null!=t?o.add(e,t):o.add(e);l._hookCtx=s,l.onerror=Oe(i),l.onsuccess=Se(function(t){var n=o.keyPath;n&&g(e,n,t),r(t)})}catch(e){throw s.onerror&&s.onerror(e),e}})},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==A||i!==A){var o=this.schema.primKey.keyPath,a=void 0!==t?t:o&&v(e,o);return null==a?this.add(e):(e=b(e),this._trans(Ze,function(){return n.where(":id").equals(a).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):a})},"locked"))}return this._idbstore(Ze,function(n,r,i){var o=void 0!==t?i.put(e,t):i.put(e);o.onerror=we(r),o.onsuccess=ie(function(t){var r=i.keyPath;r&&g(e,r,t.target.result),n(o.result)})})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(Ze,function(t,n,r){var i=r.delete(e);i.onerror=we(n),i.onsuccess=ie(function(){t(i.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Ze,function(e,t,n){var r=n.clear();r.onerror=we(t),r.onsuccess=ie(function(){e(r.result)})})},update:function(e,t){if("object"!=typeof t||De(t))throw new et.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||De(e))return this.where(":id").equals(e).modify(t);Ae(t).forEach(function(n){g(e,n,t[n])});var n=v(e,this.schema.primKey.keyPath);return void 0===n?Ut(new et.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}}),i(W.prototype,{_lock:function(){return l(!Ot.global),++this._reculock,1!==this._reculock||Ot.global||(Ot.lockOwnerFor=this),this},_unlock:function(){if(l(!Ot.global),0===--this._reculock)for(Ot.global||(Ot.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{he(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Ot.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(l(!this.idbtrans),!e&&!Je)switch(Ye&&Ye.name){case"DatabaseClosedError":throw new et.DatabaseClosed(Ye);case"MissingAPIError":throw new et.MissingAPI(Ye.message,Ye);default:throw new et.OpenFailed(Ye)}if(!this.active)throw new et.TransactionInactive;return l(null===this._completion._state),e=this.idbtrans=e||Je.transaction(Me(this.storeNames),this.mode),e.onerror=ie(function(n){ke(n),t._reject(e.error)}),e.onabort=ie(function(n){ke(n),t.active&&t._reject(new et.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=ie(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this;if(e===Ze&&this.mode!==Ze)return Ut(new et.ReadOnly("Transaction is readonly"));if(!this.active)return Ut(new et.TransactionInactive);if(this._locked())return new K(function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Ot])});if(n)return oe(function(){var e=new K(function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var i=new K(function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)});return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=K.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return e});else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-(1/0)).onsuccess=e)}()}var r=t._waitingFor;return new K(function(n,i){e.then(function(e){return t._waitingQueue.push(ie(n.bind(null,e)))},function(e){return t._waitingQueue.push(ie(i.bind(null,e)))}).finally(function(){t._waitingFor===r&&(t._waitingFor=null)})})},abort:function(){this.active&&this._reject(new et.Abort),this.active=!1},tables:{get:k("Transaction.tables",function(){return qe})},table:function(e){var t=tt.table(e);return new V(e,t.schema,this)}}),i(q.prototype,function(){function e(e,t,n){var r=e instanceof q?new J(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new J(e,function(){return Be.only("")}).limit(0)}function n(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function i(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],c)<0&&(s=u)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function o(t,o,a,s){function u(e){c=n(e),l=r(e),f="next"===e?ce:le;var t=a.map(function(e){return{lower:l(e),upper:c(e)}}).sort(function(e,t){return f(e.lower,t.lower)});d=t.map(function(e){return e.upper}),h=t.map(function(e){return e.lower}),p=e,v="next"===e?"":s}var c,l,f,d,h,p,v,g=a.length;if(!a.every(function(e){return"string"==typeof e}))return e(t,Gt);u("next");var y=new J(t,function(){return Be.bound(d[0],h[g-1]+s)});y._ondirectionchange=function(e){u(e)};var m=0;return y._addAlgorithm(function(e,t,n){var r=e.key;if("string"!=typeof r)return!1;var a=l(r);if(o(a,h,m))return!0;for(var s=null,u=m;u<g;++u){var c=i(r,a,d[u],h[u],f,p);null===c&&null===s?m=u+1:(null===s||f(s,c)>0)&&(s=c)}return t(null!==s?function(){e.continue(s+v)}:n),!1}),y}return{between:function(n,r,i,o){i=i!==!1,o=o===!0;try{return ee(n,r)>0||0===ee(n,r)&&(i||o)&&(!i||!o)?t(this):new J(this,function(){return Be.bound(n,r,!i,!o)})}catch(t){return e(this,Ht)}},equals:function(e){return new J(this,function(){return Be.only(e)})},above:function(e){return new J(this,function(){return Be.lowerBound(e,!0)})},aboveOrEqual:function(e){return new J(this,function(){return Be.lowerBound(e)})},below:function(e){return new J(this,function(){return Be.upperBound(e,!0)})},belowOrEqual:function(e){return new J(this,function(){return Be.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,Gt):this.between(t,t+Bt,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):o(this,function(e,t){return 0===e.indexOf(t[0])},[e],Bt)},equalsIgnoreCase:function(e){return o(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=S.apply(Ge,arguments);return 0===e.length?t(this):o(this,function(e,t){return t.indexOf(e)!==-1},e,"")},startsWithAnyOfIgnoreCase:function(){var e=S.apply(Ge,arguments);return 0===e.length?t(this):o(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Bt)},anyOf:function(){var n=S.apply(Ge,arguments),r=re;try{n.sort(r)}catch(t){return e(this,Ht)}if(0===n.length)return t(this);var i=new J(this,function(){return Be.bound(n[0],n[n.length-1])});i._ondirectionchange=function(e){r="next"===e?re:ue,n.sort(r)};var o=0;return i._addAlgorithm(function(e,t,i){for(var a=e.key;r(a,n[o])>0;)if(++o,o===n.length)return t(i),!1;return 0===r(a,n[o])||(t(function(){e.continue(n[o])}),!1)}),i},notEqual:function(e){return this.inAnyRange([[Vt,e],[e,Kt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=S.apply(Ge,arguments);if(0===t.length)return new J(this);try{t.sort(re)}catch(t){return e(this,Ht)}var n=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Vt,t]]},null);return n.push([t[t.length-1],Kt]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){function i(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(ee(t[0],i[1])<0&&ee(t[1],i[0])>0){i[0]=te(i[0],t[0]),i[1]=ne(i[1],t[1]);break}}return n===r&&e.push(t),e}function o(e,t){return l(e[0],t[0])}function a(e){return!d(e)&&!h(e)}if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&re(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",et.InvalidArgument);var s,u=!r||r.includeLowers!==!1,c=r&&r.includeUppers===!0,l=re;try{s=n.reduce(i,[]),s.sort(o)}catch(t){return e(this,Ht)}var f=0,d=c?function(e){return re(e,s[f][1])>0}:function(e){return re(e,s[f][1])>=0},h=u?function(e){return ue(e,s[f][0])>0}:function(e){return ue(e,s[f][0])>=0},p=d,v=new J(this,function(){return Be.bound(s[0][0],s[s.length-1][1],!u,!c)});return v._ondirectionchange=function(e){"next"===e?(p=d,l=re):(p=h,l=ue),s.sort(o)},v._addAlgorithm(function(e,t,n){for(var r=e.key;p(r);)if(++f,f===s.length)return t(n),!1;return!!a(r)||0!==ee(r,s[f][1])&&0!==ee(r,s[f][0])&&(t(function(){l===re?e.continue(s[f][0]):e.continue(s[f][1])}),!1)}),v},startsWithAnyOf:function(){var n=S.apply(Ge,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+Bt]})):e(this,"startsWithAnyOf() only works with strings")}}}),i(J.prototype,function(){function t(e,t){e.filter=fe(e.filter,t)}function n(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return fe(r(),t())}:t,e.justLimit=n&&!r}function i(e,t){e.isMatch=fe(e.isMatch,t)}function o(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new et.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function a(e,t){var n=o(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function s(e,t,n,i,o){var s=e.replayFilter?fe(e.filter,e.replayFilter()):e.filter;e.or?function(){function u(){2===++f&&n()}function c(e,n,o){if(!s||s(n,o,u,i)){var a=n.primaryKey,c=""+a;"[object ArrayBuffer]"===c&&(c=""+new Uint8Array(a)),r(l,c)||(l[c]=!0,t(e,n,o))}}var l={},f=0;e.or._iterate(c,u,i,o),Q(a(e,o),e.algorithm,c,u,i,!e.keysOnly&&e.valueMapper)}():Q(a(e,o),fe(e.algorithm,s),t,n,i,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Ut.bind(null,n.error)):n.table._idbstore(Qe,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,Ut.bind(null,t.error)):t.table._idbstore(Ze,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=fe(t.algorithm,e)},_iterate:function(e,t,n,r){return s(this._ctx,e,t,n,r)},clone:function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&e(r,t),n._ctx=r,n},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read(function(n,r,i){s(t,e,n,r,i)})},count:function(e){var t=this._ctx;if(Y(t,!0))return this._read(function(e,n,r){var i=o(t,r),a=t.range?i.count(t.range):i.count();a.onerror=we(n),a.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,i){s(t,function(){return++n,!1},function(){e(n)},r,i)},e)},sortBy:function(e,t){function n(e,t){return t?n(e[i[t]],t-1):e[o]}function r(e,t){var r=n(e,a),i=n(t,a);return r<i?-s:r>i?s:0}var i=e.split(".").reverse(),o=i[0],a=i.length-1,s="next"===this._ctx.dir?1:-1;return this.toArray(function(e){return e.sort(r)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,r){if(be&&"next"===t.dir&&Y(t,!0)&&t.limit>0){var i=t.table.hook.reading.fire,a=o(t,r),u=t.limit<1/0?a.getAll(t.range,t.limit):a.getAll(t.range);u.onerror=we(n),u.onsuccess=Te(i===D?e:function(t){try{e(t.map(i))}catch(e){n(e)}})}else{var c=[];s(t,function(e){c.push(e)},function(){e(c)},n,r)}},e)},offset:function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,Y(t)?n(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):n(t,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),n(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(e,n){return t(this._ctx,function(t,r,i){return!e(t.value)||(r(i),n)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(e){return t(this._ctx,function(t){return e(t.value)}),i(this._ctx,e),this},and:function(e){return this.filter(e)},or:function(e){return new q(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(be&&"next"===t.dir&&Y(t,!0)&&t.limit>0)return this._read(function(e,n,r){var i=o(t,r),a=t.limit<1/0?i.getAllKeys(t.range,t.limit):i.getAllKeys(t.range);a.onerror=we(n),a.onsuccess=Te(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var i={};return t(this._ctx,function(e){var t=e.primaryKey.toString(),n=r(i,t);return i[t]=!0,!n}),this},modify:function(t){var n=this,i=this._ctx,o=i.table.hook,a=o.updating.fire,s=o.deleting.fire;return this._write(function(i,o,u,c){function l(e,t){function n(e){return k.push(e),x.push(i.primKey),d(),!0}P=t.primaryKey;var i={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};if(h.call(i,e,i)!==!1){var o=!r(i,"value");++w,p(function(){var e=o?t.delete():t.update(i.value);e._hookCtx=i,e.onerror=Oe(n),e.onsuccess=Se(function(){++T,d()})},n)}else i.onsuccess&&i.onsuccess(i.value)}function f(e){return e&&(k.push(e),x.push(P)),o(new C("Error modifying one or more objects",k,T,x))}function d(){O&&T+k.length===w&&(k.length>0?f():i(T))}var h;if("function"==typeof t)h=a===A&&s===A?t:function(e){var n=b(e);if(t.call(this,e,this)===!1)return!1;if(r(this,"value")){var i=E(n,this.value),o=a.call(this,i,this.primKey,n,c);o&&(e=this.value,Ae(o).forEach(function(t){g(e,t,o[t])}))}else s.call(this,this.primKey,e,c)};else if(a===A){var y=Ae(t),_=y.length;h=function(e){for(var n=!1,r=0;r<_;++r){var i=y[r],o=t[i];v(e,i)!==o&&(g(e,i,o),n=!0)}return n}}else{var S=t;t=m(S),h=function(n){var r=!1,i=a.call(this,t,this.primKey,b(n),c);return i&&e(t,i),Ae(t).forEach(function(e){var i=t[e];v(n,e)!==i&&(g(n,e,i),r=!0)}),i&&(t=m(S)),r}}var w=0,T=0,O=!1,k=[],x=[],P=null;n.clone().raw()._iterate(l,function(){O=!0,d()},f,u)})},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==A;if(!i&&Y(t)&&(t.isPrimKey&&!Yt||!n))return this._write(function(e,t,r){var i=we(t),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var a=o.result;p(function(){var t=n?r.delete(n):r.clear();t.onerror=i,t.onsuccess=function(){return e(a)}},function(e){return t(e)})}});var o=i?2e3:1e4;return this._write(function(n,a,s,u){var c=0,l=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),f=[],d=function(){return l.each(i?function(e,t){f.push([t.primaryKey,t.value])}:function(e,t){f.push(t.primaryKey)}).then(function(){return i?f.sort(function(e,t){return re(e[0],t[0])}):f.sort(re),G(s,u,f,i,r)}).then(function(){var e=f.length;return c+=e,f=[],e<o?c:d()})};n(d())})}}}),e(this,{Collection:J,Table:V,Transaction:W,Version:s,WhereClause:q}),a(),Le.forEach(function(e){e(tt)})}function be(e){if("function"==typeof e)return new e;if(De(e))return[be(e[0])];if(e&&"object"==typeof e){var t={};return Ee(t,e),t}return e}function Ee(e,t){return Ae(t).forEach(function(n){var r=be(t[n]);e[n]=r}),e}function Se(e){return ie(function(t){var n=t.target,r=n._hookCtx,i=r.value||n.result,o=r&&r.onsuccess;o&&o(i),e&&e(i)},e)}function we(e){return ie(function(t){return ke(t),e(t.target.error),!1})}function Te(e){return ie(function(t){e(t.target.result)})}function Oe(e){return ie(function(t){var n=t.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),ke(t),e(r),!1})}function ke(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function xe(e){function t(e){return function(t){var n=e(t),r=n.value;return n.done?r:r&&"function"==typeof r.then?r.then(i,o):De(r)?K.all(r).then(i,o):i(r)}}var n=function(t){return e.next(t)},r=function(t){return e.throw(t)},i=t(n),o=t(r);return t(n)()}function Pe(e,t,n,r,i,o,a){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=a;var s="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+s}function Ce(e,t,n,r){this.name=e,this.primKey=t||new Pe,this.indexes=n||[new Pe],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=d(n,function(e){return[e.name,e]})}function Me(e){return 1===e.length?e[0]:e}function Ie(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}var Ae=Object.keys,De=Array.isArray,Ne="undefined"!=typeof self?self:"undefined"!=typeof window?window:t,Re=Object.getPrototypeOf,je={}.hasOwnProperty,Le=Object.defineProperty,Ue=Object.getOwnPropertyDescriptor,Fe=[].slice,Be=[].concat,Ke="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(_([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return Ne[e]}).map(function(e){return Ne[e]}),Ve="undefined"!=typeof Symbol&&Symbol.iterator,He=Ve?function(e){var t;return null!=e&&(t=e[Ve])&&t.apply(e)}:function(){return null},Ge={},We="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),qe=function(){return!0},Je=!new Error("").stack,Ye=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ze=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xe=Ye.concat(ze),$e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};a(x).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+O(this._e,2))}},toString:function(){return this.name+": "+this.message}}),a(C).from(x),a(M).from(x);var Qe=Xe.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ze=x,et=Xe.reduce(function(e,t){function n(e,n){this._e=T(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=$e[t]||r,this.inner=null)}var r=t+"Error";return a(n).from(Ze),e[t]=n,e},{});et.Syntax=SyntaxError,et.Type=TypeError,et.Range=RangeError;var tt=ze.reduce(function(e,t){return e[t+"Error"]=et[t],e},{}),nt=Xe.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=et[t]),e},{});nt.ModifyError=C,nt.DexieError=x,nt.BulkError=M;var rt={},it=100,ot=20,at=7,st=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=Ne.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),ut=st[0],ct=st[1],lt=st[2],ft=ct&&ct.then,dt=ut&&ut.constructor,ht=st[3],pt=!!lt,vt=!1,gt=lt?function(){lt.then(X)}:Ne.setImmediate?n.bind(null,X):Ne.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){X(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(X,0)},yt=function(e,t){kt.push([e,t]),_t&&(gt(),_t=!1)},mt=!0,_t=!0,bt=[],Et=[],St=null,wt=D,Tt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ye,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{ye(e[0],e[1])}catch(e){}})}},Ot=Tt,kt=[],xt=0,Pt=[],Ct={get:function(){function e(e,r){var i=this,o=!t.global&&(t!==Ot||n!==Rt);o&&se();var a=new K(function(n,a){q(i,new V(ve(e,t,o),ve(r,t,o),n,a,t))});return We&&z(a,this),a}var t=Ot,n=Rt;return e.prototype=rt,e},set:function(e){o(this,"then",e&&e.prototype===rt?Ct:{get:function(){return e},set:Ct.set})}};i(K.prototype,{then:Ct,_then:function(e,t){q(this,new V(null,null,e,t,Ot))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):re(e)}):this.then(null,function(e){return e&&e.name===t?n(e):re(e)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),re(t)})},stack:{get:function(){if(this._stack)return this._stack;try{vt=!0;var e=Y(this,[],ot),t=e.join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{vt=!1}}},timeout:function(e,t){var n=this;return e<1/0?new K(function(r,i){var o=setTimeout(function(){return i(new et.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&o(K.prototype,Symbol.toStringTag,"Promise"),Tt.env=de(),i(K,{all:function(){var e=S.apply(null,arguments).map(ue);return new K(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,o){return K.resolve(i).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){if(e instanceof K)return e;if(e&&"function"==typeof e.then)return new K(function(t,n){e.then(t,n)});var t=new K(rt,!0,e);return z(t,St),t},reject:re,race:function(){var e=S.apply(null,arguments).map(ue);return new K(function(t,n){e.map(function(e){return K.resolve(e).then(t,n)})})},PSD:{get:function(){return Ot},set:function(e){return Ot=e}},newPSD:oe,usePSD:he,scheduler:{get:function(){return yt},set:function(e){yt=e}},rejectionMapper:{get:function(){return wt},set:function(e){wt=e}},follow:function(e,t){return new K(function(n,r){return oe(function(t,n){var r=Ot;r.unhandleds=[],r.onunhandled=n,r.finalize=R(function(){var e=this;ee(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}});var Mt,It={awaits:0,echoes:0,id:0},At=0,Dt=[],Nt=0,Rt=0,jt=0,Lt="unhandledrejection",Ut=K.reject,Ft="2.0.4",Bt=String.fromCharCode(65535),Kt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return Bt}}(),Vt=-(1/0),Ht="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Gt="String expected.",Wt=[],qt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Jt=qt,Yt=qt,zt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};return w(We,zt),i(_e,nt),i(_e,{delete:function(e){var t=new _e(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new _e(e).open().then(function(e){return e.close(),!0}).catch(_e.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){var t=Ie(_e.dependencies.indexedDB);return t?new K(function(e,n){var r=t();r.onsuccess=function(t){e(u(t.target.result,0))},r.onerror=we(n)}).then(e):Mt.dbnames.toCollection().primaryKeys(e)},defineClass:function(){function t(t){t&&e(this,t)}return t},applyStructure:Ee,ignoreTransaction:function(e){return Ot.trans?he(Ot.transless,e):e()},vip:function(e){return oe(function(){return Ot.letThrough=!0,e()})},async:function(e){return function(){try{var t=xe(e.apply(this,arguments));return t&&"function"==typeof t.then?t:K.resolve(t)}catch(e){return Ut(e)}}},spawn:function(e,t,n){try{var r=xe(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:K.resolve(r)}catch(e){return Ut(e)}},currentTransaction:{get:function(){return Ot.trans||null}},waitFor:function(e,t){var n=K.resolve("function"==typeof e?_e.ignoreTransaction(e):e).timeout(t||6e4);return Ot.trans?Ot.trans.waitFor(n):n},Promise:K,debug:{get:function(){return We},set:function(e){w(e,"dexie"===e?function(){return!0}:zt)}},derive:a,extend:e,props:i,override:c,Events:me,getByKeyPath:v,setByKeyPath:g,delByKeyPath:y,shallowClone:m,deepClone:b,getObjectDiff:E,asap:f,maxKey:Kt,minKey:Vt,addons:[],connections:Wt,MultiModifyError:et.Modify,errnames:Qe,IndexSpec:Pe,TableSchema:Ce,dependencies:function(){try{return{indexedDB:Ne.indexedDB||Ne.mozIndexedDB||Ne.webkitIndexedDB||Ne.msIndexedDB,IDBKeyRange:Ne.IDBKeyRange||Ne.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Ft,version:Ft.split(".").map(function(e){
return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),default:_e,Dexie:_e}),K.rejectionMapper=I,Mt=new _e("__dbnames"),Mt.version(1).stores({dbnames:"name"}),function(){var e="Dexie.DatabaseNames";try{void 0!==typeof localStorage&&void 0!==Ne.document&&(JSON.parse(localStorage.getItem(e)||"[]").forEach(function(e){return Mt.dbnames.put({name:e}).catch(A)}),localStorage.removeItem(e))}catch(e){}}(),_e})}).call(t,function(){return this}(),n(390).setImmediate)},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(391),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return v[p]=r,h(p),p++}function i(e){delete v[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(g)setTimeout(a,0,e);else{var t=v[e];if(t){g=!0;try{o(t)}finally{i(e),g=!1}}}}function s(){h=function(e){t.nextTick(function(){a(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),h=function(n){e.postMessage(t+n,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},h=function(t){e.port2.postMessage(t)}}function f(){var e=y.documentElement;h=function(t){var n=y.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function d(){h=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var h,p=1,v={},g=!1,y=e.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,"[object process]"==={}.toString.call(e.process)?s():u()?c():e.MessageChannel?l():y&&"onreadystatechange"in y.createElement("script")?f():d(),m.setImmediate=r,m.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(392))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?p=h.concat(p):g=-1,p.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=p.length;t;){for(h=p,p=[];++g<t;)h&&h[g].run();g=-1,t=p.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],v=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),u=i(s),c=n(338),l=i(c),f=n(357),d=r(f),h=function(){function e(t){o(this,e),this.context=t}return a(e,[{key:"reportAllStoredEvents",value:function(){return u.isInCompileOrRunTimeDisabledMode()?void l.log(this.context,"SDK is disabled"):(this.context.dbManager&&this.context.eventReportingManager.reportAllStoredEvents(),this.reportStoredActiveConsumptionEvent(),void this.reportStoredActiveConsumptionEventOfIntegrationsByTabId(this.context.interTabCommManager.tabId))}},{key:"_doReportStoredEvent",value:function(e){e&&e.mediaId&&e.contentType&&(l.log(this.context,"_doReportStoredEvent - add auto_send "),e.extra=d.default._addExtraStatic("auto_send","true",e.extra),e.position>=0&&(d.default.sendPosition(this.context,e),e.position=-1),d.default.doStoreOrReportEvent(this.context,e))}},{key:"reportStoredActiveConsumptionEventOfIntegrationsByTabId",value:function(e){if(u.isInCompileOrRunTimeDisabledMode())return void l.log(this.context,"SDK is disabled");var t=u.getActiveConsumptionPerIntegrationEventData(e);if(t){u.removeAllActiveConsumptionPerIntegrationEventData(e);for(var n in t)t.hasOwnProperty(n)&&this._doReportStoredEvent(t[n])}}},{key:"reportStoredActiveConsumptionEventByTabId",value:function(e){if(u.isInCompileOrRunTimeDisabledMode())return void l.log(this.context,"SDK is disabled");var t=u.getActiveConsumptionEventData(e);t&&t.mediaId&&t.contentType?(u.removeActiveConsumptionEventData(e),this._doReportStoredEvent(t)):l.log(this.context,"reportStoredActiveConsumptionEvent - empty cache")}},{key:"reportStoredActiveConsumptionEvent",value:function(){return u.isInCompileOrRunTimeDisabledMode()?void l.log(this.context,"SDK is disabled"):(u.DEBUG_LOCAL_SESSION_STORAGES&&u.printLocalAndSessionStorage(this.context),void this.reportStoredActiveConsumptionEventByTabId(this.context.interTabCommManager.tabId))}},{key:"reportAppEvent",value:function(e){var t=this;return u.isInCompileOrRunTimeDisabledMode()?void l.log(this.context,"SDK is disabled"):u.isValidActiveSessionId()?void(!u.CMSDK_STORE_EVENTS_ONLY_WHEN_NO_SESSION&&this.context.dbManager?e.store(this.context,function(){t.context.eventReportingManager.checkAppEvents(u.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS)}):e.report(this.context)):(l.log(this.context,"reportAppEvent: No session yet"),void(this.context.dbManager&&e.store(this.context,function(){t.context.eventReportingManager.checkAppEvents(u.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS)})))}},{key:"reportMediaEvent",value:function(e){var t=this;return u.isInCompileOrRunTimeDisabledMode()?void l.log(this.context,"SDK is disabled"):u.isValidActiveSessionId()?void(!u.CMSDK_STORE_EVENTS_ONLY_WHEN_NO_SESSION&&this.context.dbManager?e.store(this.context,function(){t.context.eventReportingManager.checkMediaEvents(u.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS)}):e.report(this.context)):(l.log(this.context,"reportMediaEvent: No session yet"),void(this.context.dbManager&&e.store(this.context,function(){t.context.eventReportingManager.checkMediaEvents(u.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS)})))}}]),e}();t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(348),u=i(s),c=n(351),l=i(c),f=n(357),d=i(f),h=n(388),p=i(h),v=n(334),g=r(v),y=n(356),m=i(y),_=n(353),b=i(_),E=n(377),S=i(E),w=n(376),T=i(w),O=function(){function e(t){o(this,e),this.context=t,this.eventReportingManager=t.eventReportingManager,this.appEventsProcessing=!1,this.mediaEventsProcessing=!1,this.consumptionEventsProcessing=!1,this.consumerTagsProcessing=!1,this.mediaTagsProcessing=!1,this.timerConsumerTags=null,this.timerMediaTags=null,this.timerAppEvents=null,this.timerMediaEvents=null,this.timerConsumptionMediaEvents=null,this.consumerTagsToProcess=[],this.mediaTagsToProcess=[],this.resetConsumerTagsTimer(),this.resetMediaTagsTimer(),this.resetAppEventsTimer(),this.resetMediaEventsTimer(),this.resetConsumptionEventsTimer()}return a(e,[{key:"resetConsumerTagsTimer",value:function(){var e=this;this.timerConsumerTags&&(clearInterval(this.timerConsumerTags),this.timerConsumerTags=null),this.timerConsumerTags||(this.timerConsumerTags=setInterval(function(){e.checkConsumerTags(1)},1e3*g.CMSDK_EVENTS_FLUSH_DELAY_SECONDS))}},{key:"resetMediaTagsTimer",value:function(){var e=this;this.timerMediaTags&&(clearInterval(this.timerMediaTags),this.timerMediaTags=null),this.timerMediaTags||(this.timerMediaTags=setInterval(function(){e.checkMediaTags(1)},1e3*g.CMSDK_EVENTS_FLUSH_DELAY_SECONDS))}},{key:"resetAppEventsTimer",value:function(){var e=this;this.timerAppEvents&&(clearInterval(this.timerAppEvents),this.timerAppEvents=null),this.timerAppEvents||(this.timerAppEvents=setInterval(function(){e.checkAppEvents(1)},1e3*g.CMSDK_EVENTS_FLUSH_DELAY_SECONDS))}},{key:"resetMediaEventsTimer",value:function(){var e=this;this.timerMediaEvents&&(clearInterval(this.timerMediaEvents),this.timerMediaEvents=null),this.timerMediaEvents||(this.timerMediaEvents=setInterval(function(){e.checkMediaEvents(1)},1e3*g.CMSDK_EVENTS_FLUSH_DELAY_SECONDS))}},{key:"resetConsumptionEventsTimer",value:function(){var e=this;this.timerConsumptionMediaEvents&&(clearInterval(this.timerConsumptionMediaEvents),this.timerConsumptionMediaEvents=null),this.timerConsumptionMediaEvents||(this.timerConsumptionMediaEvents=setInterval(function(){e.checkConsumptionEvents(1)},1e3*g.CMSDK_EVENTS_FLUSH_DELAY_SECONDS))}},{key:"checkAppEvents",value:function(e){var t=this;if(this.context.dbManager){if(this.appEventsProcessing)return void console.log("EventReportingManager:checkAppEvents: blocked!");this._signalAppEventsProcessing(),this.context.dbManager.fetchDataFromTableIfExceedsLimit(p.default.getAppEventsTableName(),e,function(n){n?n.toArray().then(function(n){u.default.reportBatch(t.context,n,function(){if(n&&n.length>0){var r=[];n.every(function(e){return r.push(t.context.dbManager.removeAppEvent(e)),!0}),Promise.all(r).then(function(){t._resetAppEventsProcessing(),t.resetAppEventsTimer(),t.checkAppEvents(e)})}else t._resetAppEventsProcessing(),t.resetAppEventsTimer(),t.checkAppEvents(e)},function(){t._resetAppEventsProcessing()})}).catch(function(e){t.context._onDbManagerFailOperation(e),t._resetAppEventsProcessing()}):t._resetAppEventsProcessing()})}}},{key:"checkMediaEvents",value:function(e){var t=this;if(this.context.dbManager){if(this.mediaEventsProcessing)return void console.log("EventReportingManager:checkMediaEvents: blocked!");this._signalMediaEventsProcessing(),this.context.dbManager.fetchDataFromTableIfExceedsLimit(p.default.getMediaEventsTableName(),e,function(n){n?n.toArray().then(function(n){l.default.reportBatch(t.context,n,function(){if(n&&n.length>0){var r=[];n.every(function(e){return r.push(t.context.dbManager.removeMediaEvent(e)),!0}),Promise.all(r).then(function(){t._resetMediaEventsProcessing(),t.resetMediaEventsTimer(),t.checkMediaEvents(e)})}else t._resetMediaEventsProcessing(),t.resetMediaEventsTimer(),t.checkMediaEvents(e)},function(){t._resetMediaEventsProcessing()})}).catch(function(e){t.context._onDbManagerFailOperation(e),t._resetMediaEventsProcessing()}):t._resetMediaEventsProcessing()})}}},{key:"checkConsumptionEvents",value:function(e){var t=this;if(this.context.dbManager){if(this.consumptionEventsProcessing)return void console.log("EventReportingManager:checkConsumptionEvents: blocked!");this._signalConsumptionEventsProcessing(),this.context.dbManager.fetchDataFromTableIfExceedsLimit(p.default.getConsumptionEventsTableName(),e,function(n){n?n.toArray().then(function(n){d.default.reportBatch(t.context,n,function(){if(n&&n.length>0){var r=[];n.every(function(e){return r.push(t.context.dbManager.removeConsumptionEvent(e)),!0}),Promise.all(r).then(function(){t._resetConsumptionEventsProcessing(),t.resetConsumptionEventsTimer(),t.checkConsumptionEvents(e)})}else t._resetConsumptionEventsProcessing(),t.resetConsumptionEventsTimer(),t.checkConsumptionEvents(e)},function(){t._resetConsumptionEventsProcessing()})}).catch(function(e){t.context._onDbManagerFailOperation(e),t._resetConsumptionEventsProcessing()}):t._resetConsumptionEventsProcessing()})}}},{key:"removeTag",value:function(e,t){return t.filter(function(t){return t!==e})}},{key:"checkConsumerTags",value:function(e){var t=this;if(this.context.dbManager){if(this.consumerTagsProcessing)return void console.log("EventReportingManager:checkConsumerTags: blocked!");if(this.consumerTagsToProcess.length>0)return void console.log("EventReportingManager:checkConsumerTags: blocked by non-empty queue!");this._signalConsumerTagsProcessing(),this.context.dbManager.fetchDataFromTableIfExceedsLimit(p.default.getConsumerTagsTableName(),e,function(e){e?e.toArray().then(function(e){e&&e.length>0&&e.every(function(e){t.consumerTagsToProcess.push(e);var n=function(){t.consumerTagsToProcess=t.removeTag(e,t.consumerTagsToProcess)},r=void 0;return r=e.isDelete?new m.default(e.key):new b.default(e.key,e.value),r.id=e.id,r.report(t.context,n,n),!0}),t._resetConsumerTagsProcessing()}).catch(function(e){t.context._onDbManagerFailOperation(e),t._resetConsumerTagsProcessing()}):t._resetConsumerTagsProcessing()})}}},{key:"checkMediaTags",value:function(e){var t=this;if(this.context.dbManager){if(this.mediaTagsProcessing)return void console.log("EventReportingManager:checkMediaTags: blocked!");if(this.mediaTagsToProcess.length>0)return void console.log("EventReportingManager:checkMediaTags: blocked by non-empty queue!");this._signalMediaTagsProcessing(),this.context.dbManager.fetchDataFromTableIfExceedsLimit(p.default.getMediaTagsTableName(),e,function(e){e?e.toArray().then(function(e){e&&e.length>0&&e.every(function(e){t.mediaTagsToProcess.push(e);var n=function(){t.mediaTagsToProcess=t.removeTag(e,t.mediaTagsToProcess)},r=void 0;return r=e.isDelete?new S.default(e.mediaId,e.contentType,e.key):new T.default(e.mediaId,e.contentType,e.key,e.value),r.id=e.id,r.report(t.context,n,n),!0}),t._resetMediaTagsProcessing()}).catch(function(e){t.context._onDbManagerFailOperation(e),t._resetMediaTagsProcessing()}):t._resetMediaTagsProcessing()})}}},{key:"checkStoredEvents",value:function(){this.checkAppEvents(g.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS),this.checkMediaEvents(g.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS),this.checkConsumptionEvents(g.CMSDK_EVENTS_MAX_NUMBER_OF_CACHED_EVENTS),this.checkConsumerTags(1),this.checkMediaTags(1)}},{key:"reportAllStoredEvents",value:function(){this.checkAppEvents(1),this.checkMediaEvents(1),this.checkConsumptionEvents(1),this.checkConsumerTags(1),this.checkMediaTags(1)}},{key:"_signalConsumerTagsProcessing",value:function(){this.consumerTagsProcessing=!0}},{key:"_resetConsumerTagsProcessing",value:function(){this.consumerTagsProcessing=!1}},{key:"_signalMediaTagsProcessing",value:function(){this.mediaTagsProcessing=!0}},{key:"_resetMediaTagsProcessing",value:function(){this.mediaTagsProcessing=!1}},{key:"_signalAppEventsProcessing",value:function(){this.appEventsProcessing=!0}},{key:"_resetAppEventsProcessing",value:function(){this.appEventsProcessing=!1}},{key:"_signalMediaEventsProcessing",value:function(){this.mediaEventsProcessing=!0}},{key:"_resetMediaEventsProcessing",value:function(){this.mediaEventsProcessing=!1}},{key:"_signalConsumptionEventsProcessing",value:function(){this.consumptionEventsProcessing=!0}},{key:"_resetConsumptionEventsProcessing",value:function(){this.consumptionEventsProcessing=!1}}]),e}();t.default=O,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),u=i(s),c=n(339),l=i(c),f=n(396),d=r(f),h=function(){function e(t){o(this,e),this.context=t,this.tabId=window.sessionStorage.getItem(u.CMSDK_SESSION_TAB_ID),this.timerPingTabs=null,this.timerUpdateActivityTs=null,this.tabId||(this.tabId=l.UUID.generate(),window.sessionStorage.setItem(u.CMSDK_SESSION_TAB_ID,this.tabId)),console.log("TabId = "+this.tabId),u.updateActivityTs(this.tabId),this.pingTabManager=null,this.checkTabsActivityManager=new d.default(t,this.tabId)}return a(e,[{key:"setup",value:function(){var e=this;this.context.dbManager&&this.context.dbManager.storeTabId(function(){e.pingTabManager&&e.pingTabManager.setupCallbacks(),e._setupUpdateActivityTsTimer(),e._setupPingTabsTimer()})}},{key:"_cancelUpdateActivityTsTimer",value:function(){this.timerUpdateActivityTs&&(clearTimeout(this.timerUpdateActivityTs),this.timerUpdateActivityTs=null)}},{key:"_setupUpdateActivityTsTimer",value:function(){var e=this;this._cancelUpdateActivityTsTimer(),this.timerUpdateActivityTs=setTimeout(function(){u.updateActivityTs(e.tabId),e._setupUpdateActivityTsTimer()},u.UPDATE_TAB_ACTIVITY_TS_TIME_INTERVAL_MS)}},{key:"_cancelPingTabsTimer",value:function(){this.timerPingTabs&&(clearTimeout(this.timerPingTabs),this.timerPingTabs=null)}},{key:"_setupPingTabsTimer",value:function(){var e=this;this._cancelPingTabsTimer(),this.timerPingTabs=setTimeout(function(){e.pingTabManager&&e.pingTabManager.pingTabs(),e.checkTabsActivityManager&&e.checkTabsActivityManager.pingTabs(),e._setupPingTabsTimer()},u.getPingTabNextTimeout())}}]),e}();t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),u=i(s),c=n(397),l=r(c),f=function(){function e(t,n){o(this,e),this.context=t,this.tabId=n,this.isPingingTabs=!1,this.printLog=!0,this.arrayTabsIdsCache=null,this.ownershipTransferredTabsIds=[],this.ownershipTabManager=new l.default(t,n)}return a(e,[{key:"getTag",value:function(){return"CheckTabsActivityManager["+this.tabId+"]: "}},{key:"pingTabs",value:function(){var e=this;if(this.context.dbManager){if(this.isPingingTabs)return void this._log("Is busy");this.isPingingTabs=!0,this.context.dbManager.fetchOtherActiveTabsIdsArray(function(t){if(t&&t.length>0){var n=void 0;for(e.arrayTabsIdsCache=[],n=0;n<t.length;++n)t[n].tabId&&e.arrayTabsIdsCache.push(t[n].tabId);e.ownershipTransferredTabsIds=[],e._log("arrayTabsIdsCache = "+JSON.stringify(e.arrayTabsIdsCache)),e._pingByIds()}else e.isPingingTabs=!1})}}},{key:"_pingByIds",value:function(){if(this.arrayTabsIdsCache&&this.arrayTabsIdsCache.length>0){var e=this.arrayTabsIdsCache[0];this.arrayTabsIdsCache.splice(0,1),this._pingTabById(e)}else this.isPingingTabs=!1,this.ownershipTransferredTabsIds&&this.ownershipTransferredTabsIds.length>0&&(this._log("ownershipTransferredTabsIds = "+JSON.stringify(this.ownershipTransferredTabsIds)),this.context.eventReportingManager.checkStoredEvents(),this.ownershipTransferredTabsIds=[])}},{key:"_pingTabById",value:function(e){var t=this;this._log("_pingTabById: "+e);var n=u.checkIfTabIsActive(e);void 0===n||n?this._pingByIds():(this._log("this tab seems to be inactive: "+e),this.ownershipTabManager.transferOwnership(e,function(n){n&&t.ownershipTransferredTabsIds.push(e),t._pingByIds()}))}},{key:"_log",value:function(e){this.printLog&&!u.CMSDK_DISABLE_DEBUG_LOGS&&console.log(this.getTag()+e)}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(334),s=r(a),u=function(){function e(t,n){i(this,e),this.context=t,this.tabId=n,this.printLog=!0}return o(e,[{key:"getTag",value:function(){return"OwnershipTabManager["+this.tabId+"]: "}},{key:"transferOwnership",value:function(e,t){var n=this;this._log("transferOwnership: "+e),this.context.dbManager.makeOwnershipTransaction(e,function(r){r&&(n.context.eventManager.reportStoredActiveConsumptionEventByTabId(e),n.context.eventManager.reportStoredActiveConsumptionEventOfIntegrationsByTabId(e),s.removeActivityTs(e)),t(r)})}},{key:"_log",value:function(e){this.printLog&&!s.CMSDK_DISABLE_DEBUG_LOGS&&console.log(this.getTag()+e)}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(334),u=i(s),c=n(338),l=i(c),f=n(399),d=r(f),h=function(){function e(t){o(this,e),this.context=t,this.hasStarted=!1,this.timer=null,this.timerThrottledRegistration=null,this.requestingThrottling=!1,this.registerWaitForSilentUser=!1,this.registerExtraData=null,this.registerDeviceExtraData=null,this.isReadingRecoProfile=!1}return a(e,[{key:"isRequestingThrottling",value:function(){return this.requestingThrottling}},{key:"start",value:function(e,t,n){if(this.registerWaitForSilentUser=e,this.registerExtraData=t,this.registerDeviceExtraData=n,!this.hasStarted)if(this.hasStarted=!0,u.checkLastPartnerAppConfigFetchingTimestamp())this._onTimeout();else{if(u.shouldThrottleRegistration()){var r=u.getThrottledRegistrationTimestamp(),i=+new Date;if(r>i&&this._setTimerForThrottledRegistration())return}this._setTimer()}}},{key:"_onTimeout",value:function(){var e=this;this.requestingThrottling=u.shouldRequestThrottling()&&!u.isValidActiveSessionId(),this.requestingThrottling||u.setShouldRequestThrottling(!1),l.log(this.context,"AppConfigManager: fetching.."),new d.default(this.context,this.requestingThrottling).execute(function(t){if(t){if(u.updateLastPartnerAppConfigFetchingTimestamp(),t.hasOwnProperty("batch_size")){var n=+t.batch_size;n>0&&(u.CMSDK_EVENTS_FLUSH_BATCH_SIZE=n,l.log(e.context,"AppConfigManager: CMSDK_EVENTS_FLUSH_BATCH_SIZE value is overridden: "+n))}if(t.hasOwnProperty("batch_time_sec")){var r=+t.batch_time_sec;r>0&&(u.CMSDK_EVENTS_FLUSH_DELAY_SECONDS=r,l.log(e.context,"AppConfigManager: CMSDK_EVENTS_FLUSH_DELAY_SECONDS value is overridden: "+r))}if(t.hasOwnProperty("ttl_reco_profile_sec")){var i=+t.ttl_reco_profile_sec;i>0&&u.setRecoProfileTtlSeconds(i)}if(t.hasOwnProperty("disabled_mode")){var o=u.isInRuntimeTimeDisabledMode();u.setRuntimeDisabledMode(t.disabled_mode),o&&!u.isInRuntimeTimeDisabledMode()&&e.context._onDisabledModeTurnedOff()}if(e.requestingThrottling){if(e.requestingThrottling=!1,t.hasOwnProperty("throttle_registration_min")){var a=+t.throttle_registration_min;if(a>0&&(u.setThrottledRegistrationDelay(a),e._setTimerForThrottledRegistration()))return}u.setThrottledRegistrationDelay(0)}u.setShouldRequestThrottling(u.isInRuntimeTimeDisabledMode()&&!u.isValidActiveSessionId()),e.context._onBlockingAppConfigFetched(e.registerWaitForSilentUser,e.registerExtraData,e.registerDeviceExtraData)}e._setTimer()})}},{key:"_setTimer",value:function(){var e=this,t=60*u.getPartnerAppConfigRefreshIntervalMinutes()*1e3,n=u.getLastPartnerAppConfigFetchingTimestamp(),r=+new Date;n>0&&n<r&&(t-=r-n),this.timer=setTimeout(function(){e._onTimeout()},t),l.log(this.context,"Scheduled next AppTheme refresh in "+t/1e3+" seconds")}},{key:"_setTimerForThrottledRegistration",value:function(){var e=this;if(this.timerThrottledRegistration&&clearTimeout(this.timerThrottledRegistration),u.shouldThrottleRegistration()){var t=u.getThrottledRegistrationTimestamp(),n=t-+new Date;if(n>0)return this.timerThrottledRegistration=setTimeout(function(){e.context._onTimeoutThrottledRegistration(e.registerWaitForSilentUser,e.registerExtraData,e.registerDeviceExtraData)},n),l.log(this.context,"Scheduled throttled registration in "+n/1e3+" seconds"),!0}return!1}},{key:"readRecoProfile",value:function(){var e=this;if(this.isReadingRecoProfile)return void l.log(this.context,"isReadingRecoProfile");if(!u.shouldUpdateRecoProfile())return void l.log(this.context,"readRecoProfile: TTL check, seconds= "+u.getRecoProfileTtlSeconds());l.log(this.context,"readRecoProfile: TTL allowed, seconds= "+u.getRecoProfileTtlSeconds());var t="reco_profile";this.isReadingRecoProfile=!0,this.context.readAllConsumerTagsWithFilter(t,function(n){n&&n.length>0&&n[0]&&n[0].hasOwnProperty("key")&&n[0].key&&n[0].key===t?u.setRecommendationProfile(n[0].value):u.setRecommendationProfile(""),e.isReadingRecoProfile=!1})}}]),e}();t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(342),f=i(l),d=n(334),h=r(d),p="PartnerAppConfig",v="Read",g=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p,v));return r.requestThrottling=n,r}return s(t,e),u(t,[{key:"execute",value:function(e){var n=this;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,{partner_id:h.PARTNER_ID.toString(),config_type:"app_theme",request_throttling:this.requestThrottling.toString()},function(t){200===t.code&&t.hasOwnProperty("data")&&t.data.hasOwnProperty("config_obj")?e&&e(t.data.config_obj,n.requestThrottling):e&&e(null)},function(r){console.log(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",n)+"Error: "+JSON.stringify(r)),e&&e(null)})}},{key:"needsSession",get:function(){return!1}}]),t}(f.default);t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(354),c=r(u),l=n(401),f=r(l),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,void 0,void 0));return Array.isArray(e)?n.filter=e:e&&(n.filter=[e]),n}return a(t,e),s(t,[{key:"execute",value:function(e,t){var n={};this.filter&&(n={tags:this.filter}),new f.default(e).execute(n,t)}}]),t}(c.default);t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{
constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(342),f=r(l),d="ConsumerTag",h="ReadAll",p=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d,h))}return a(t,e),u(t,[{key:"execute",value:function(e,n){var r=this;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",this).call(this,e,function(e){if(200===e.code){var t=[];if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("result_items")&&e.data.result_items.length>0){var r=e.data.result_items[0];if(r.hasOwnProperty("tags")&&"object"===s(r.tags))for(var i in r.tags)r.tags.hasOwnProperty(i)&&t.push({key:i,value:r.tags[i]})}n&&n(t)}else n&&n(null)},function(e){console.log(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"header",r)+"Error: "+JSON.stringify(e)),n&&n(null)})}},{key:"needsSession",get:function(){return!0}}]),t}(f.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(403),l=r(c),f=function(e){function t(e,n,r,a,s,u){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,a,s,u))}return a(t,e),s(t,[{key:"getTag",value:function(){return"LogixPlayerManager"}},{key:"subscribe",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"subscribe",this).call(this,e,"addEventListener",["onloadstart","onProgress","onloadedmetadata","onPlaying","onSeeking","onSeeked","onended","ondurationchange","onTimeUpdate","onPlay","onPause","onabort","onError"])}},{key:"unsubscribe",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unsubscribe",this).call(this,e,"removeEventListener")}},{key:"_getTargetCurrentTime",value:function(e,n,r,i){if(e){var o=e;if(o.detail&&o.detail.event&&o.detail.event.target&&o.detail.event.target.firstElementChild)return o.detail.event.target.firstElementChild.currentTime}return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTargetCurrentTime",this).call(this,e,n,r,i)}},{key:"_getTargetDuration",value:function(e,n,r,i){if(e){var o=e;if(o.detail&&o.detail.event&&o.detail.event.target&&o.detail.event.target.firstElementChild)return o.detail.event.target.firstElementChild.duration}return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTargetDuration",this).call(this,e,n,r,i)}}]),t}(l.default);t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(361),u=i(s),c=n(334),l=r(c),f=function(){function e(t,n,r,i,a,s){o(this,e),this.context=t,this.playerId=n,this.mediaId=r,this.contentType=i,this.configOptional=s,this.mappingExtra=a,this.internalConsumptionEvents={},this.positionAtSeeking=0,this.MINIMUM_JUMP_DELAY_SECONDS=1,this.printLog=!0,this.callbacks={},this.hasBeenPaused=!1,this.eventsList=[]}return a(e,[{key:"getTag",value:function(){return"GenericPlayerManager"}},{key:"addCreatedCallback",value:function(e,t){return this.callbacks[e]=t,t}},{key:"getCreatedCallback",value:function(e){return this.callbacks[e]}},{key:"subscribe",value:function(e,t,n){var r=this;t||(t="addEventListener"),this.eventsList=n;var i=["onLoadStart","onProgress","onLoadedMetadata","onPlaying","onSeeking","onSeeked","onEnded","onDurationChange","onTimeUpdate","onPlay","onPause","onAbort","onError"];if(n.length>=i.length)for(var o in n)n.hasOwnProperty(o)&&!function(){var a=n[o],s=i[o];a.length>0?(r._log("subscribing to event="+a+"; method="+s),e[t](a,r.addCreatedCallback(a,function(e,t,n,i){r[s](e,t,n,i)}))):r._log("no event for callback="+s)}();else this._log("invalid events list!")}},{key:"unsubscribe",value:function(e,t){t||(t="removeEventListener");for(var n in this.eventsList)if(this.eventsList.hasOwnProperty(n)){var r=this.getCreatedCallback(n);r&&e[t](n,r)}}},{key:"changeMedia",value:function(e,t){this.mediaId&&this.finishStartedEvent(e,!0,!0,!0),this.mediaId=e,this.contentType=t}},{key:"finishStartedEvent",value:function(e,t,n,r){this.internalConsumptionEvents.hasOwnProperty(e)&&this.internalConsumptionEvents[e].isStarted()&&(n&&this.internalConsumptionEvents[e].setSdkActivity(!1),this.internalConsumptionEvents[e].report(t,r))}},{key:"finishStartedEvents",value:function(e,t,n){for(var r in this.internalConsumptionEvents)this.finishStartedEvent(r,e,t,n);this.hasBeenPaused=!1}},{key:"onStopEvent",value:function(){this.finishStartedEvents(!1,!0,!0)}},{key:"onWindowUnload",value:function(){this.finishStartedEvents(!1,!0,!1)}},{key:"updatePrintLog",value:function(e){this.printLog=e?e.DEBUG_HTML5_MEDIA:l.DEBUG_HTML5_MEDIA;for(var t in this.internalConsumptionEvents)this.internalConsumptionEvents.hasOwnProperty(t)&&this.internalConsumptionEvents[t].updatePrintLog(this.printLog)}},{key:"_log",value:function(e){this.printLog&&console.log(this.getTag()+"[id="+this.playerId+"]: "+e)}},{key:"_checkInitConsumptionEvent",value:function(e){if(void 0!==e&&e.length>0){if(this.internalConsumptionEvents[e])return;this.internalConsumptionEvents[e]=new u.default(this,e,this.contentType,this.mappingExtra?this.mappingExtra(e):void 0,!1,this.configOptional,this.playerId),this.internalConsumptionEvents[e].updatePrintLog(this.printLog),this._log("_checkInitConsumptionEvent: "+e)}}},{key:"_getCurrentInternalConsumptionEvent",value:function(){var e=this.mediaId;return void 0!==e&&e.length>0?this.internalConsumptionEvents[e]:(this._log("_getCurrentInternalConsumptionEvent: invalid case?"),null)}},{key:"_getTargetCurrentTime",value:function(e,t,n,r){if(e){var i=e;if(i.target&&void 0!==i.target.currentTime)return i.target.currentTime;if(i.target&&i.target.firstElementChild&&void 0!==i.target.firstElementChild.currentTime)return i.target.firstElementChild.currentTime;if(i.player&&i.player.mediaElement)return i.player.mediaElement.currentTime}}},{key:"_getTargetDuration",value:function(e,t,n,r){if(e){var i=e;if(i.target&&void 0!==i.target.duration)return i.target.duration;if(i.target&&i.target.firstElementChild&&void 0!==i.target.firstElementChild.duration)return i.target.firstElementChild.duration}}},{key:"onLoadStart",value:function(e,t,n,r){this._log("onLoadStart "+e+"; "+t+"; "+n+"; "+r),this.finishStartedEvents(!0,!1);var i=this.mediaId;i&&(this._log("onLoadStart: "+i),l.DEBUG_HTML5_APP_EVENTS&&this.context.reportAppEvent("loadstart",{mediaId:i}))}},{key:"onProgress",value:function(e,t,n,r){this._log("onProgress "+e+"; "+t+"; "+n+"; "+r)}},{key:"onLoadedMetadata",value:function(e,t,n,r){this._log("onLoadedMetadata "+e+"; "+t+"; "+n+"; "+r),l.DEBUG_HTML5_APP_EVENTS&&this.context.reportAppEvent("loadedmetadata",{mediaId:this.mediaId})}},{key:"onPlaying",value:function(e,t,n,r){this._log("onPlaying "+e+"; "+t+"; "+n+"; "+r);var i=this.mediaId;this._log("onPlaying: "+i),this._checkInitConsumptionEvent(i);var o=this._getTargetCurrentTime(e,t,n,r),a=this._getCurrentInternalConsumptionEvent();if(void 0===o)return void this._log("onPlaying: undefined currentTime!");if(a)if(a.isStarted())this.positionAtSeeking<=0&&a.startConsuming(o);else{var s=this._getTargetDuration(e,t,n,r);void 0!==s&&s>0&&Math.round(s)===Math.round(o)&&(o=0,this._log("onPlaying: fixed currentPosition to 0 from being a final point")),a.start(o)}}},{key:"onSeeking",value:function(e,t,n,r){this._log("onSeeking "+e+"; "+t+"; "+n+"; "+r);var i=this._getTargetCurrentTime(e,t,n,r),o=this._getCurrentInternalConsumptionEvent();return void 0===i?void this._log("onSeeking: undefined currentTime!"):void(o&&o.isStarted()&&this._log("onSeeking: "+i))}},{key:"onSeeked",value:function(e,t,n,r){this._log("onSeeked "+e+"; "+t+"; "+n+"; "+r)}},{key:"onEnded",value:function(e,t,n,r){this._log("onEnded "+e+"; "+t+"; "+n+"; "+r);var i=this._getCurrentInternalConsumptionEvent();if(i&&i.isStarted()){var o=this._getTargetDuration(e,t,n,r);if(void 0===o)return void this._log("onEnded: undefined duration!");i.onEnd(o),i.stop(0,o,!0),this.hasBeenPaused=!1}}},{key:"onDurationChange",value:function(e,t,n,r){this._log("onDurationChange "+e+"; "+t+"; "+n+"; "+r);var i=this._getCurrentInternalConsumptionEvent();if(i){var o=this._getTargetDuration(e,t,n,r);if(void 0===o)return void this._log("onDurationChange: undefined duration!");o>0&&i.setPlayerDuration(o)}}},{key:"onTimeUpdate",value:function(e,t,n,r){this._log("onTimeUpdate "+JSON.stringify(e)+"; "+t+"; "+n+"; "+r);var i=this._getTargetCurrentTime(e,t,n,r),o=this._getCurrentInternalConsumptionEvent();if(o&&o.isStarted()){if(void 0===i)return void this._log("onTimeUpdate: undefined currentTime!");this._log("onTimeUpdate: "+i),!l.DEBUG_NO_SCRUB_EVENTS_IN_HTML5_MEDIA&&Math.abs(i-o.prevPositionOnTime)>this.MINIMUM_JUMP_DELAY_SECONDS?(this.positionAtSeeking=i,this._log("onTimeUpdate: seek detected!"),o.onScrub(o.prevPositionOnTime,i),o.setPrevPositionOnTime(i)):o.update(i);var a=this._getTargetDuration(e,t,n,r);a>0&&o.setPlayerDuration(a)}}},{key:"onPlay",value:function(e,t,n,r){this._log("onPlay "+JSON.stringify(e)+"; "+t+"; "+n+"; "+r);var i=this.mediaId;this._log("onPlay: "+i);var o=this._getCurrentInternalConsumptionEvent();o&&this.hasBeenPaused&&(this.hasBeenPaused=!1,o.onUnpause())}},{key:"onPause",value:function(e,t,n,r){this._log("onPause "+e+"; "+t+"; "+n+"; "+r);var i=this.mediaId;this._log("onPause: "+i);var o=this._getTargetCurrentTime(e,t,n,r),a=this._getCurrentInternalConsumptionEvent();if(a&&a.isStarted()&&Math.abs(o-this.positionAtSeeking)>this.MINIMUM_JUMP_DELAY_SECONDS){if(this._log("onPause: pause event!"),void 0===o)return void this._log("onPause: undefined currentTime!");a.onPause(o)&&(this.hasBeenPaused=!0),a.setStopPosition(o)}}},{key:"onAbort",value:function(e,t,n,r){this._log("onAbort "+e+"; "+t+"; "+n+"; "+r);var i=this._getCurrentInternalConsumptionEvent();if(i&&i.isStarted()){l.DEBUG_HTML5_APP_EVENTS&&this.context.reportAppEvent("abort",{mediaId:this.mediaId});var o=this._getTargetCurrentTime(e,t,n,r);if(void 0===o)return void this._log("onAbort: undefined currentTime!");i.onInterrupt(o),i.stop(0,o,!1),this.hasBeenPaused=!1}}},{key:"onError",value:function(e,t,n,r){this._log("onError "+e+"; "+t+"; "+n+"; "+r);var i=this._getCurrentInternalConsumptionEvent();i&&i.isStarted()&&(l.DEBUG_HTML5_APP_EVENTS&&this.context.reportAppEvent("error",{mediaId:this.mediaId}),i.onError())}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(403),l=r(c),f=function(e){function t(e,n,r,a,s,u){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,a,s,u))}return a(t,e),s(t,[{key:"getTag",value:function(){return"Html5GenericPlayerManager"}},{key:"subscribe",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"subscribe",this).call(this,e,"addEventListener",["loadstart","progress","loadedmetadata","playing","seeking","seeked","ended","durationchange","timeupdate","play","pause","abort","error"])}},{key:"unsubscribe",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unsubscribe",this).call(this,e,"removeEventListener")}}]),t}(l.default);t.default=f,e.exports=t.default}])});
//# sourceMappingURL=CMSDK.min.js.map