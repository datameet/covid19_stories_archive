(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{196:function(t,e,n){"use strict";var r=n(313),o=n(277),c=n(319),l=(n(305),n(349)),d=n(306),f=n(307),h=n(201),m=n.n(h),v={date:m()({formats:{full:"EEEE, do MMMM, y",long:"do MMMM, y",medium:"d MMM, y",short:"dd.MM.y"},defaultWidth:"full"}),time:m()({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:m()({formats:{full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},y=(n(202),n(203));var M={localize:{ordinalNumber:function(t,e){return Number(t)+"."},month:n.n(y)()({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["जनवरी","फ़रवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितंबर","अक्टूबर","नवंबर","दिसंबर"]},defaultWidth:"wide"})},formatLong:v,options:{weekStartsOn:1,firstWeekContainsDate:4}};n.d(e,"j",(function(){return w})),n.d(e,"k",(function(){return D})),n.d(e,"h",(function(){return x})),n.d(e,"g",(function(){return _})),n.d(e,"e",(function(){return $})),n.d(e,"i",(function(){return C})),n.d(e,"a",(function(){return o.a})),n.d(e,"c",(function(){return l.a})),n.d(e,"b",(function(){return d.a})),n.d(e,"d",(function(){return f.a})),n.d(e,"f",(function(){return c.a}));var k={en:{},hi:{locale:M}},w=function(t,e){return Object(r.a)(new Date(t),"dd MMMM yyyy",k[e])},D=function(t){return Object(r.a)(new Date(t),"YYMMdd",{awareOfUnicodeTokens:!0})},x=function(t){return Object(r.a)(new Date(t),"MMMM yyyy")},_=function(t){return Object(r.a)(Object(o.a)(new Date(t),2),"MMMM yyyy")},$=function(t){return Object(r.a)(new Date(t),"dd MMM, yyyy")},C=function(t){return t=Object(o.a)(new Date(t),2),Object(r.a)(t,"/yyyy/MM")}},347:function(t,e,n){"use strict";n.r(e);n(16),n(39),n(52);var r=n(8),o=n(98),c=n(196),l={mixins:[r.e,r.c],props:["onHide"],data:function(){return{loading:0,tickedList:[]}},computed:{message:function(){return this.$store.state.disturber.data.message},firebaseData:function(){return this.$store.state.disturber.data}},methods:{isTicked:function(t){return this.tickedList.includes(t.id)},toggleSelection:function(t){var e=this.tickedList.indexOf(t.id);e>=0?this.tickedList.splice(e,1):this.tickedList.push(t.id)},handleNotificationClick:function(t){var e,n;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$messaging){t.next=2;break}return t.abrupt("return");case 2:if("Notification"in window!=!1){t.next=8;break}return this.$showLog("It seems that your browser does not support Notifications. Please use an updated browser to use this feature."),this.$ga.event("BottomNotifier","fail","No support"),this.setExpiryDate(),this.$store.dispatch("disturber/resetNotifier"),t.abrupt("return");case 8:if(!0!==this.firebaseData.askLogin||this.user.id){t.next=12;break}return this.$store.dispatch("settings/showLogin"),t.abrupt("return");case 12:return e=this.$messaging,t.prev=13,this.loading=1,t.next=17,regeneratorRuntime.awrap(e.askPermission());case 17:return t.next=19,regeneratorRuntime.awrap(e.getToken());case 19:(n=t.sent)&&this.saveToken(n),this.loading=0,t.next=29;break;case 24:t.prev=24,t.t0=t.catch(13),console.log(t.t0),this.$ga.event("BottomNotifier","fail","Rejected Permission"),this.loading=0;case 29:case"end":return t.stop()}}),null,this,[[13,24]])},saveToken:function(t){var e,n,data;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=this.firebaseData,n={token:t,title:e.topicTitle,topic:e.topic},this.firebaseData.entity&&(n.entity=this.firebaseData.entity),r.next=6,regeneratorRuntime.awrap(this.$axios.$post("/api/notifications/add",n));case 6:(data=r.sent)&&(this.$showLog(data.message),o.a.setSubscriptionStatus(e.action,!0),this.$store.dispatch("disturber/resetNotifier"),this.$ga.event("BottomNotifier","success",e.topic)),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),this.$ga.event("BottomNotifier","fail",firebaseData.topic),console.log(r.t0);case 14:case"end":return r.stop()}}),null,this,[[0,10]])},setExpiryDate:function(){var t=this.firebaseData;t.askAgainAt?o.a.setExpiry(t.action,t.askAgainAt):o.a.setExpiry(t.action,Object(c.a)(new Date,2))},handleDismiss:function(t){this.firebaseData.action&&(this.setExpiryDate(),this.$ga.event("BottomNotifier","fail","Closed Panel"),this.$store.dispatch("disturber/resetNotifier"))}}},d=n(3),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-notifier"},[n("div",{staticClass:"title-wrapper is-montserrat"},[n("h6",{staticClass:"title is-6"},[t._v(t._s(t.firebaseData.title))])]),t._v(" "),n("div",{staticClass:"text-wrap"},[n("button",{staticClass:"delete",on:{click:function(e){return e.preventDefault(),t.handleDismiss(e)}}}),t._v(" "),n("p",{staticClass:"is-roboto-en msg",domProps:{innerHTML:t._s(t.message)}}),t._v(" "),n("button",{staticClass:"subscribe button is-primary is-montserrat is-uppercase is-small",class:{"is-loading":1===t.loading},on:{click:function(e){return e.preventDefault(),t.handleNotificationClick(e)}}},[t._v("\n      Notify Me\n    ")]),t._v(" "),t.firebaseData.entities&&t.firebaseData.entities.length>0?n("div",{staticClass:"over-top-list is-montserrat"},[n("div",{staticClass:"tick-items"},[n("ul",t._l(t.firebaseData.entities,(function(e,r){return n("li",{key:r,on:{click:function(n){return n.preventDefault(),t.toggleSelection(e)}}},[n("span",{staticClass:"tick-space"},[n("i",{staticClass:"icon",class:[t.isTicked(e)?"icon-tick":"round"]})]),t._v(" "),n("span",{staticClass:"name"},[t._v(t._s(e.name))])])})),0),t._v(" "),t._m(0)])]):t._e()])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"submit-wrapper"},[e("button",{staticClass:"button is-primary is-montserrat is-fullwidth"},[this._v("\n            Subscribe\n          ")])])}],!1,null,null,null);e.default=component.exports}}]);