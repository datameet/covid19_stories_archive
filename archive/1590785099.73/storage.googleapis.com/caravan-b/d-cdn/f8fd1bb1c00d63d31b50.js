(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{198:function(t,e,n){"use strict";var r={mixins:[n(8).f],props:["item"],data:function(){return{dimensions:{h:null,w:null}}},computed:{src:function(){if(null===this.dimensions.h)return null;var t=this.dimensions.w,e=null;switch(!0){case t<300:e=300;break;case t<400:e=400;break;case t<600:e=600;break;case t<800:e=800;break;case t<1e3:e=1e3;break;case t<1200:e=1300;break;default:e=1500}return this.smartResize(this.item,e)},calculateStyle:function(){return{objectFit:this.item.data.w>=this.item.data.h?"cover":"contain"}}},mounted:function(){this.calculateHeight()},methods:{calculateHeight:function(){var t=this.$el,e={h:t.offsetHeight,w:t.offsetWidth};this.dimensions=e}}},o=n(3),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img-wrap"},[n("div",{staticClass:"thumb",attrs:{alt:""}},[n("img",{staticClass:"lazyload blur-up",style:t.calculateStyle,attrs:{"data-src":t.src,"data-srcset":"\n        "+t.smartResize(t.item,320)+" 320w,\n        "+t.smartResize(t.item,480)+" 480w,\n        "+t.smartResize(t.item,640)+" 640w\n      ","data-sizes":"auto"}})])])}),[],!1,null,null,null);e.a=component.exports},207:function(t,e,n){"use strict";var r=n(196),o=n(8),c=n(198),l={components:{Authors:n(197).a,ResponsivePhoto:c.a},props:["article"],mixins:[o.f,o.c],computed:{date:function(){return Object(r.j)(this.article.writtenAt,this.lang)}},methods:{handleTopicNavigation:function(t){t.preventDefault();var link=t.target.getAttribute("href");"/format/photo-essay"===link?this.$router.push({path:"/photo-essay"}):this.$router.push({path:link})}}},m=n(3),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"simple-article-card"},[n("div",{staticClass:"theme is-montserrat"},[t.article.theme?n("nuxt-link",{attrs:{to:"/"+t.article.theme.slug}},[t._v("\n      "+t._s(t.article.theme.name)+"\n    ")]):t._e()],1),t._v(" "),n("div",{staticClass:"wrapper is-flex"},[n("div",{staticClass:"media"},[n("nuxt-link",{staticClass:"link-abs",attrs:{to:t.article.slug}},[t._v(t._s(t.article.title))]),t._v(" "),n("responsive-photo",{attrs:{item:t.article.coverPhoto}})],1),t._v(" "),n("div",{staticClass:"details"},[n("div",{staticClass:"pre-heading is-montserrat"},[t.article.topic?n("a",{staticClass:"topic",attrs:{href:"/format/"+t.article.topic.slug},on:{click:t.handleTopicNavigation}},[t._v(t._s(t.article.topic.name)+"\n        ")]):t._e()]),t._v(" "),n("nuxt-link",{attrs:{to:t.article.slug}},[n("h4",{staticClass:"title is-5"},[t._v(t._s(t.article.title))])]),t._v(" "),n("div",{staticClass:"article-footer is-montserrat"},[t.article.authors.length>0?n("authors",{attrs:{article:t.article}}):t._e(),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t.date))])],1)],1)])])}),[],!1,null,null,null);e.a=component.exports},253:function(t,e,n){},299:function(t,e,n){"use strict";var r=n(253);n.n(r).a},312:function(t,e,n){"use strict";n.r(e);n(50),n(16);var r=n(267),o=n(266),c=n(207),l=n(8),m={components:{SimpleArticleCard:c.a},mixins:[l.c],props:["articleId"],data:function(){return{data:[]}},computed:{articles:function(){return this.data},moreText:function(){return"en"===this.lang?"MORE FROM THE CARAVAN":"कारवां में और पढ़ें"}},mounted:function(){this.getArticles()},methods:{getArticles:function(){var data;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(this.$axios.$get("/api/articles/related",{params:{articleId:this.articleId,limit:6}}));case 3:(data=t.sent)&&data.rows&&(this.data=data.rows),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,this,[[0,7]])}}},d=n(3),h=Object(d.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"related-articles"},[t.data.length>0?n("h3",{staticClass:"title is-3"},[t._v(t._s(t.moreText))]):t._e(),t._v(" "),n("div",{staticClass:"wrap"},t._l(t.articles,(function(t,e){return n("simple-article-card",{key:e,attrs:{article:t}})})),1)])}),[],!1,null,null,null).exports,v=(n(25),n(196)),f={props:["article"],mixins:[l.c,l.e],data:function(){return{comments:{rows:[],meta:null},comment:{content:""},mode:"reduced",tr:{hi:{rc:"पाठक प्रतिक्रिया",sa:"अन्य प्रतिक्रिया देखें"},en:{rc:"Reader's Comments",sa:"Show All"}}}},computed:{placeholder:function(){return"en"===this.lang?"Type your comment":"यहाँ कमेंट करें "},langSubmit:function(){return"en"===this.lang?"Submit":"सब्मिट"},allComments:function(){return"reduced"===this.mode?this.comments.rows.slice(0,3):this.comments.rows},shouldCollapse:function(){return"expanded"===this.mode&&this.comments.rows.length>=this.comments.meta.total}},mounted:function(){this.getComments()},methods:{trField:function(t){return this.tr[this.lang][t]},resetComment:function(){this.comment={content:""}},handleCommentSubmit:function(t){var e,data;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.user.id||(this.$store.dispatch("settings/showLogin"),this.$showLog("You need to login before posting a comment")),t.prev=1,e={articleId:this.article.id,content:this.comment.content},t.next=5,regeneratorRuntime.awrap(this.$axios.$post("/api/comments",e));case 5:(data=t.sent)&&(this.comments.rows.splice(0,0,data),this.resetComment(),this.$showLog("Comment submitted")),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),this.$showAxiosError(t.t0),console.log(t.t0);case 13:case"end":return t.stop()}}),null,this,[[1,9]])},processContent:function(content){return content.replace(/[\n\r]+/gi,"<br>")},formatDate:function(t){return Object(v.e)(t)},getComments:function(){var t,e,meta,data;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t={articleId:this.article.id},0===this.comments.rows.length?t.limit=3:(e=this.comments.rows.slice(-1)[0],console.log({lastComment:e}),t.before=e.id),!((meta=this.comments.meta)&&meta.total<this.comments.rows.length)){n.next=6;break}return n.abrupt("return",!1);case 6:return n.next=8,regeneratorRuntime.awrap(this.$axios.$get("/api/comments",{params:t}));case 8:(data=n.sent)&&data.rows&&(this.comments.rows=this.comments.rows.concat(data.rows),this.comments.meta=data.meta),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}}),null,this,[[0,12]])},expand:function(){this.mode="expanded"},collapseComments:function(){this.mode="reduced"},loadMore:function(){this.mode="expanded",this.getComments()}}},C=Object(d.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-comments",class:{"is-relative":0===t.article.style||1===t.article.style},attrs:{id:"list-all-comments"}},[n("div",{staticClass:"create-comment-wrapper is-montserrat"},[n("div",{staticClass:"w is-flex"},[n("h5",{staticClass:"title is-montserrat is-6"},["en"===t.lang?n("span",[t._v("COMMENT")]):t._e(),t._v(" "),"hi"===t.lang?n("span",[t._v("कमेंट")]):t._e()]),t._v(" "),t.user.id?n("p",{staticClass:"note is-roboto-en is-size-7 is-pulled-right"},[t._v("\n        You are logged in as "),n("span",{staticClass:"name"},[t._v(t._s(t.user.name))])]):t._e()]),t._v(" "),n("form",{staticClass:"comment-form",attrs:{action:"/comments",method:"post"},on:{submit:function(e){return e.preventDefault(),t.handleCommentSubmit(e)}}},[n("div",{staticClass:"field"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.content,expression:"comment.content"}],staticClass:"textarea is-roboto",attrs:{rows:"2",placeholder:t.placeholder},domProps:{value:t.comment.content},on:{input:function(e){e.target.composing||t.$set(t.comment,"content",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"field float-right"},[n("input",{staticClass:"button is-primary is-montserrat is-large",attrs:{type:"submit"},domProps:{value:t.langSubmit}})])])]),t._v(" "),t.allComments.length>0?n("div",{staticClass:"pre-title"},[n("h4",{staticClass:"title is-montserrat is-6"},[t._v(t._s(t.trField("rc")))])]):t._e(),t._v(" "),n("div",{staticClass:"comment-list is-roboto"},t._l(t.allComments,(function(e,r){return n("div",{key:r,staticClass:"comment"},[n("div",{staticClass:"comment-header"},[n("div",{staticClass:"user"},[t._v(t._s(e.user.name))]),t._v(" "),n("div",{staticClass:"date"},[t._v(t._s(t.formatDate(e.writtenAt)))])]),t._v(" "),n("div",{staticClass:"comment-content"},[n("p",{domProps:{innerHTML:t._s(t.processContent(e.content))}})])])})),0),t._v(" "),t.comments.meta?n("div",{staticClass:"options is-roboto"},[t.comments.meta&&t.comments.meta.total>t.comments.rows.length&!t.shouldCollapse?n("div",[n("a",{staticClass:"load-more",on:{click:function(e){return e.preventDefault(),t.loadMore(e)}}},[t._v("View more comments")])]):t._e(),t._v(" "),n("div",[t.shouldCollapse?n("a",{staticClass:"load-more collapse",on:{click:function(e){return e.preventDefault(),t.collapseComments(e)}}},[t._v("Show Less")]):!t.shouldCollapse&&t.comments.rows.length>=t.comments.meta.total&&t.comments.meta.total>0?n("a",{staticClass:"load-more collapse",on:{click:function(e){return e.preventDefault(),t.expand(e)}}},[t._v(t._s(t.trField("sa")))]):t._e()])]):t._e()])}),[],!1,null,null,null).exports,_={props:["article"],components:{Authors:n(197).a},mixins:[l.f],data:function(){return{rows:[]}},mounted:function(){this.getArticleList()},methods:{getArticleList:function(){var data;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(this.$axios.$get("/api/articles/related?type=top&context=theme",{params:{articleId:this.article.id,limit:5}}));case 3:data=t.sent,this.rows=data.rows,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,this,[[0,7]])}}},w=Object(d.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidebar-articles-list"},[t._m(0),t._v(" "),n("div",{staticClass:"articles-list"},t._l(t.rows,(function(article,e){return n("div",{key:e,staticClass:"article-card"},[n("div",{staticClass:"media"},[n("nuxt-link",{attrs:{to:""+article.slug}},[n("img",{attrs:{src:t.cropAndResize(article.coverPhoto,100,100),alt:""}})])],1),t._v(" "),n("div",{staticClass:"text-content"},[article.topic?n("nuxt-link",{staticClass:"topic is-montserrat",attrs:{to:"/format/"+article.topic.slug}},[t._v("\n          "+t._s(article.topic.name)+"\n        ")]):t._e(),t._v(" "),n("nuxt-link",{staticClass:"link",attrs:{to:""+article.slug}},[n("h6",{staticClass:"title is-6"},[t._v(t._s(article.title))])]),t._v(" "),n("authors",{attrs:{article:article}})],1)])})),0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-wrapper"},[e("h6",{staticClass:"title is-6 is-montserrat"},[this._v("More from this Section")])])}],!1,null,null,null).exports,y=n(216),x={props:["article"],data:function(){return{comments:{rows:[]}}},mounted:function(){this.getRecentComments()},methods:{leadToComments:function(t){var e=document.querySelector("#list-all-comments").getBoundingClientRect().top;window.scrollTo(0,e+window.scrollY)},processContent:function(content){return content.substring(0,100).replace(/[\n\r]+/gi,"<br>")+"..."},formatDate:function(t){return Object(v.e)(t)},getRecentComments:function(){var t,data;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={articleId:this.article.id,limit:5},e.next=4,regeneratorRuntime.awrap(this.$axios.$get("/api/comments",{params:t}));case 4:(data=e.sent)&&data.rows&&(this.comments.rows=this.comments.rows.concat(data.rows),this.comments.meta=data.meta),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),null,this,[[0,8]])}}},k=Object(d.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidebard-comments-list"},[t.comments.rows.length>0?n("div",{staticClass:"wrap"},[t._m(0),t._v(" "),n("div",{staticClass:"comments is-roboto"},t._l(t.comments.rows,(function(e,r){return n("div",{key:r,staticClass:"comment"},[n("div",{staticClass:"comment-header"},[n("div",{staticClass:"user"},[t._v(t._s(e.user.name))]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t.formatDate(e.writtenAt)))])]),t._v(" "),n("div",{staticClass:"comment-content"},[n("p",{domProps:{innerHTML:t._s(t.processContent(e.content))}})])])})),0),t._v(" "),n("div",{staticClass:"actions is-montserrat"},[n("a",{staticClass:"see-all-comments",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.leadToComments(e)}}},[t._v("See all Comments")]),t._v(" "),n("a",{staticClass:"write-one",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.leadToComments(e)}}},[t._v("Write a Comment")])])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-wrapper is-montserrat"},[e("h6",{staticClass:"title is-6"},[this._v("Recent Comments")])])}],!1,null,null,null).exports,$={props:["theme"]},A=Object(d.a)($,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"caravan-subscribe-slot",class:this.theme},[e("nuxt-link",{attrs:{to:"/subscribe"}},["grey"===this.theme?e("img",{staticClass:"lazyload",attrs:{"data-src":"/img/grey-square-promotor.png"}}):e("img",{staticClass:"lazyload",attrs:{"data-src":"/img/white-square-promotor.png"}})])],1)}),[],!1,null,null,null).exports,R=(n(33),{components:{CurrentIssuePromo:n(217).a,SidebarCommentsList:k,PopularArticlesList:w,BasicAdSlot:y.a,PromoSquareAd:A},props:["article"],mixins:[l.c],data:function(){return{itemCount:0,heightIncrement:5*window.innerHeight}},computed:{dynamicCount:function(){return this.itemCount}},methods:{calculateStyle:function(t){return{position:"absolute",top:"".concat(this.heightIncrement*t,"px"),height:"auto",left:0,width:"100%"}},onChangeVisibility:function(t,e){!0===t&&(e.target.closest(".side-panel-wrapper").offsetHeight>this.heightIncrement*this.itemCount+1&&this.itemCount<5&&this.itemCount++)}}}),S=Object(d.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"single-article-sidebar"},[n("div",{staticClass:"items"},t._l(t.dynamicCount,(function(e){return n("div",{key:e,staticClass:"promotion-content-wrapper",style:t.calculateStyle(e-1)},[n("div",{staticClass:"wrap"},1===e?[1!==t.user.hasSubscribed?n("promo-square-ad",{attrs:{theme:"grey"}}):1==t.user.hasSubscribed&&4===t.article.style?n("current-issue-promo"):n("basic-ad-slot")]:2===e?[n("popular-articles-list",{attrs:{article:t.article}})]:3===e?[t.itemCount>4?n("sidebar-comments-list",{attrs:{article:t.article}}):t._e()]:[n("basic-ad-slot")],1)])})),0),t._v(" "),n("div",{staticClass:"bottom-observer",style:t.calculateStyle(t.dynamicCount)},[n("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.onChangeVisibility,expression:"onChangeVisibility"}],staticClass:"listener-division"})])])}),[],!1,null,null,null).exports,O=n(247),j={components:{SubscribeBottomSheet:function(){return n.e(40).then(n.bind(null,346))},ArticleSidePanel:S,ListComments:C,RelatedArticles:h,ArticleHeader:o.a,SingleArticle:r.a},mixins:[l.c,l.g],asyncData:function(t){var e,n,r,data;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=t.app,n=t.route,r=t.error,o.prev=1,o.next=4,regeneratorRuntime.awrap(e.$axios.$get("/api/articles/slug",{params:{slug:n.path}}));case 4:return data=o.sent,o.abrupt("return",{data:{article:data}});case 8:o.prev=8,o.t0=o.catch(1),r({message:n.path});case 11:case"end":return o.stop()}}),null,null,[[1,8]])},data:function(){return{noArticleContent:0,loaded:0}},computed:{type:function(){return O.a[this.data.article.style]}},head:function(){var article=this.data.article,title=article.seoTitle&&article.seoTitle.trim().length>5?article.seoTitle:article.title,t=this.settings,e=article.coverPhoto,n=this.getOgImage(e,article.design),r=this.getTwitterImage(e,article.design),o=article.meta,meta=[{hid:"o:t",name:"og:title",content:title},{hid:"o:u",name:"og:url",content:"".concat(this.baseUrl).concat(article.slug)},{hid:"o:i",name:"og:image",content:n},{hid:"o:t",name:"og:type",content:"article"},{hid:"o:d",name:"og:description",content:"".concat(article.description)},{hid:"desc",name:"description",content:"".concat(article.description)},{hid:"o:s",name:"og:site_name",content:t.siteName},{hid:"tc",name:"twitter:card",content:"summary_large_image"},{hid:"t:u",name:"twitter:url",content:"".concat(this.baseUrl).concat(article.slug)},{hid:"t:d",name:"twitter:description",content:"".concat(article.description)},{hid:"t:t",name:"twitter:title",content:title},{hid:"t:i",name:"twitter:image",content:r}];if(article.tags&&article.tags.length>0){var c=[];article.tags.forEach((function(t){meta.push({name:"article:tag",content:t.name}),c.push(t.name)}));meta.push({name:"news_keywords",hid:"nk",content:article.keywords.join(",")}),meta.push({name:"keywords",hid:"kw",content:article.keywords.join(",")})}article.topic&&meta.push({name:"topic",content:article.topic.name}),article.theme&&meta.push({name:"category",content:article.theme.name}),article.authors.length>1?meta.push({hid:"au",name:"author",content:"co-authored by ".concat(article.authors.map((function(t){return t.name})).join(","))}):1===article.authors.length&&meta.push({hid:"au",name:"author",content:article.authors[0].name});var l="reduced-header single-article";"hi"===this.lang&&(l+=" hi");var m=[{rel:"canonical",hid:"can",href:this.baseUrl+article.slug}];return!0===o.amp&&m.push({hid:"amp",rel:"amphtml",href:"".concat(this.baseUrl,"/amp").concat(article.slug)}),{title:title,meta:meta,script:[],link:m,bodyAttrs:{class:l},__dangerouslyDisableSanitizers:["script"]}},watch:{"user.id":function(t){t&&this.checkIfPremium()}},methods:{contentCheck:function(t){var e=t.childCount;this.noArticleContent=e<=1?1:0,this.loaded=1},checkIfPremium:function(){var article,t,data;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(article=this.data.article,t=this.$route,!0!==article.paywall){e.next=13;break}return e.prev=3,e.next=6,regeneratorRuntime.awrap(this.$axios.$get("/api/articles/slug",{params:{slug:t.path}}));case 6:data=e.sent,this.data={article:data},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),null,this,[[3,10]])},reachedBottom:function(t){}}},T=(n(299),Object(d.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"single-article"},[t.data.article?n("article",{staticClass:"single-post",attrs:{itemscope:"",itemtype:"http://schema.org/NewsArticle",role:"main"}},[n("meta",{attrs:{itemprop:"mainEntityOfPage",content:""+t.baseUrl+t.data.article.slug}}),t._v(" "),n("meta",{attrs:{itemprop:"url",content:""+t.baseUrl+t.data.article.slug}}),t._v(" "),n("meta",{attrs:{itemprop:"datePublished",content:t.data.article.writtenAt}}),t._v(" "),n("meta",{attrs:{itemprop:"dateModified",content:t.data.article.updatedAt}}),t._v(" "),n("article-header",{attrs:{article:t.data.article}}),t._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column\n          content-container",class:{"align-center":0===t.data.article.style||1===t.data.article.style}},[n("single-article",{attrs:{article:t.data.article},on:{contentCheck:t.contentCheck}})],1),t._v(" "),1==t.loaded&&0===t.noArticleContent&&0!==t.data.article.style&&1!==t.data.article.style?n("div",{staticClass:"column side-panel-wrapper"},[t.isMobile?t._e():n("article-side-panel",{attrs:{article:t.data.article}})],1):t._e()])]),t._v(" "),n("div",{attrs:{itemprop:"publisher copyrightHolder provider sourceOrganization",itemscope:"",itemtype:"https://schema.org/Organization"}},[n("span",{attrs:{itemprop:"logo",itemscope:"",itemtype:"https://schema.org/ImageObject"}},[n("meta",{attrs:{itemprop:"url",content:t.baseUrl+"/caravan-logo.png"}})]),t._v(" "),n("meta",{attrs:{itemprop:"name",content:"The Caravan"}})])],1):t._e(),t._v(" "),t.data.article?n("div",{staticClass:"container"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column comments-container",class:{"align-center":0===t.data.article.style||1===t.data.article.style}},[n("list-comments",{attrs:{article:t.data.article}})],1)]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-12"},[n("related-articles",{attrs:{articleId:t.data.article.id}})],1)])]):t._e(),t._v(" "),6===t.data.article.style?n("subscribe-bottom-sheet",{attrs:{article:t.data.article}}):t._e()],1)}),[],!1,null,null,null));e.default=T.exports}}]);