(function(window,$){var Social=function(elem,options){this.elem=elem;this.$elem=$(elem);this.options=options;this.apiArr={'fb':'https://graph.facebook.com/?id=','tw':'https://urls.api.twitter.com/1/urls/count.json?url=','gp':'',},this.shareArr={'fb':'https://www.facebook.com/sharer/sharer.php?u=','tw':'https://twitter.com/share?url=','gp':'https://plus.google.com/share?url=','wapp':'whatsapp://send?text=',};this.shareAlt={'fb':'Facebook share','tw':'Twitter share','gp':'Share on Google+','wapp':'Share on Whatsapp',};this.totalElement='.sstotal span';this.signalArr={};this.templateCounter=1;this.googleClientUrl='https://apis.google.com/js/client:plusone.js';this.googleApiKey='AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ';this.gapi=null;this.socialResponse={};this.prevVisibleDivId=false;this.visibleDivId=false;this.scrollticker=null;this.pageArr={};this.isVisibleArea=false;this.elementAttr=false;this.elementSelector=false;};Social.prototype={defaults:{storage:true,templateId:'issocial',templateClass:'isocial',templateParentClass:false,contentClass:false,contentEndClass:false,displayTotal:false,infiniteScroll:false,fetchSocialSignal:true,expiryMinutes:5,animateContainerClass:'btn_wappBottom',animateContainerId:'mnwhtsappc',animateType:'toggle',animateTotal:false,showBottomIcon:true,headerClass:'headerwrap',headerSliderClass:'engageContainer',HeaderAnimation:true,site:'',animateCss:{total:{},icon:{'position':null,'bottom':null,'left':null,'z-index':null,'text-indent':null,}},animate:{fixed:{},slide:{displayPos:'70px',hidePos:'-70px'},toggle:{displayPos:'70px',hidePos:'-70px'},sticky:{},},scrollstopPos:0,next_elem:'',},init:function(){this.config=$.extend({},this.defaults,this.options);this.createAnimateDiv();this.buildDependency();this.getVisibleDivId();this.onReady();this.scroll();this.createTemplateHeader(this.config.headerSliderClass);var _this=this;setTimeout(function(){_this.dlt_LocalStorage();},5000);return this;},onReady:function(){var _this=this;if(this.visibleDivId!==this.prevVisibleDivId){_this.getVisibleDivId();}
_this.fetchCounts(_this.visibleDivId);_this.fillAnimateButtonDependency();},scroll:function(){var _this=this;window.clearTimeout(_this.scrollticker);_this.scrollticker=null;$(window).on('scroll',function(){_this.isAnimatationVisible();_this.toShow(_this.config.templateId+'1');if(_this.scrollticker){window.clearTimeout(_this.scrollticker);_this.scrollticker=null;}
_this.scrollticker=window.setTimeout(function(){_this.buildDependency();_this.getVisibleDivId();_this.config.scrollstopPos=$(window).scrollTop();if(_this.visibleDivId!==_this.prevVisibleDivId){_this.fetchCounts(_this.visibleDivId);_this.fillAnimateButtonDependency();}
if(_this.isVisibleArea===true){_this.animate('show');}else{_this.animate('hide');}},50);});},animate:function(action){if($('body').innerWidth()>768){return false;}
var _this=this;switch(_this.config.animateType){case'fixed':break;case'slide':if(action==='show'){_this.animateSlide(_this.config.animate[_this.config.animateType].displayPos,action);}else{_this.animateSlide(_this.config.animate[_this.config.animateType].hidePos,action);}
break;case'toggle':if(action==='show'){_this.animateToggle(_this.config.animate[_this.config.animateType].displayPos,action);}else{_this.animateToggle(_this.config.animate[_this.config.animateType].hidePos,action);}
break;default:break;}},animateSlide:function(pos,action){$('.btn_wappBottom').animate({bottom:pos});},animateToggle:function(pos,action){var _this=this;var elem=$('.btn_wappBottom').css({bottom:pos});if(action==='show'){elem.show();}else{elem.show();}
return false;},visibleY:function(elId){var el=document.getElementById(elId);var top=el.getBoundingClientRect().top;var rect;el=el.parentNode;var boxht=$('.'+this.config.headerClass).outerHeight();var elemht=$('.'+this.config.templateClass).outerHeight();do{rect=el.getBoundingClientRect();top=top-boxht+elemht-20;if(top<=0){return true;}else{return false;}}while(el!=document.body);return top<=document.documentElement.clientHeight;},toShow:function(elId){var toShow=this.visibleY(elId);var curtpPos=$(window).scrollTop();var lastpPos=this.config.scrollstopPos;if(toShow){if(curtpPos<lastpPos){$('.'+this.config.headerSliderClass).removeClass('on');}
else{$('.'+this.config.headerSliderClass).addClass('on');}}else{$('.'+this.config.headerSliderClass).removeClass('on');}},attachEvent:function(element,event,callbackFunction){if(element.addEventListener){element.addEventListener(event,callbackFunction,false);}else if(element.attachEvent){element.attachEvent('on'+event,callbackFunction);}},update:function(){},getVisibleHeader:function(){var _this=this;if(_this.config.HeaderAnimation==false){return false;}
var scrollTop=parseInt($(window).scrollTop());var containerTop=parseInt(($('.'+_this.config.templateClass+':eq(0)').offset().top)-50);var boxht=$('.'+this.config.headerClass).outerHeight();if(containerTop<scrollTop){_this.animateHeaderSlider(true);}else{_this.animateHeaderSlider(false);}},isAnimatationVisible:function(){if(this.animateType==='fixed'){return false;}
var _this=this;var scrollTop=parseInt($(window).scrollTop());var windowHeight=window.innerHeight;$.each(_this.pageArr,function(scrollPosition,socialId){scrollPosition=scrollPosition.split('_');var containerTop=(scrollPosition[0])?parseInt(scrollPosition[0]):0;var containerHeight=(scrollPosition[1])?parseInt(scrollPosition[1]):0;var scrollBottom=(scrollTop+windowHeight)
if(scrollTop>containerTop&&scrollBottom<=containerHeight){_this.visibleDivId=socialId;_this.isVisibleArea=true;return false;}else{_this.isVisibleArea=false;return true;}});},fillAnimateButtonDependency:function(){if(this.animateType==='fixed'){return false;}
if(!this.visibleDivId){this.getVisibleDivId();}
if(this.visibleDivId!==this.prevVisibleDivId){var htmlStr=$('#wappscroll_'+this.visibleDivId).html();var href=$("a",$('#wappscroll_'+this.visibleDivId)).attr('href');$('#mnwhtsappc').attr('onclick','javascript:location.href="'+href+'"');this.prevVisibleDivId=this.visibleDivId;}},getmaxZ:function(){var maxZ=0;$("body > *").each(function(el,i){if($(this).css("position")!="static"&&$(this).css("z-index")>=maxZ){maxZ=parseInt($(this).css("z-index"));}});maxZ=maxZ*10;return maxZ;},createTemplateHeader:function(cel){if($('.'+this.config.templateClass).length<=0){return false;}
if(this.config.HeaderAnimation==false){return false;}
var eggTitle=$('h1').text();var nextlink='';var maxZidx=this.getmaxZ()+1;var html='<div id="'+cel+'" class="'+cel+'">';var fbUrl=$('.isocial').eq(0).find('.btn_fb a').attr('href');var fbOnClick=$('.isocial').eq(0).find('.btn_fb a').attr('onclick');var twUrl=$('.isocial').eq(0).find('.btn_tw a').attr('href');var twOnClick=$('.isocial').eq(0).find('.btn_tw a').attr('onclick');var wappUrl=$('.isocial').eq(0).find('.btn_wapp a').attr('href');var eventCat='Social Top - ';html=html+'<aside class="enggRight"><div class="enggButtonWrap"><span class="enggShrTxt">Share on: </span>';html=html+'<a href='+fbUrl+' onclick="'+fbOnClick+'" class="sprit-engg btn-enggFB eventtracker" title="Facebook share" data-event-sub-cat="'+eventCat+'Facebook"></a>';html=html+'<a href='+twUrl+' onclick="'+twOnClick+'" class="sprit-engg btn-enggTw eventtracker" title="Twitter share" data-event-sub-cat="'+eventCat+'Twitter"></a>';html=html+'<a href="'+wappUrl+'" class="sprit-engg btn-enggWts eventtracker" title="share on watsapp" data-event-sub-cat="'+eventCat+'Whatsapp"></a>';html=html+'</div>';html=html+'<div class="enggTitle">'+eggTitle+'</div>';try{if($(this.config.next_elem).length>0){var nxtel=$(this.config.next_elem);var nxtlnk=nxtel.attr('href');html=html+'<div class="enggNxtLink eventtracker" data-event-sub-cat="Top Next Article"><a href="'+nxtlnk+'" rel="next">Next Article &#187;</a></div>';}}catch(e){console.log('not found '+e)}
html=html+'<div class="clear"></div></aside>';html=html+'<div class="clear"></div></div>';$('body').append(html);var boxht=$('.'+this.config.headerClass).outerHeight();var leftPos=$('.'+this.config.headerClass).offset().left;var boxWd=$('.'+this.config.headerClass).outerWidth();var toppos=-Math.abs(parseInt($('.'+this.config.headerClass).outerHeight()));var stickyinner_ht=$('.engageContainer .enggRight').outerHeight();var pading=(boxht-stickyinner_ht)/2;if(this.config.site==='healthsite'){pading=18;}
if(pading<0){pading=2;}
$('.'+cel).css({'z-index':maxZidx,'left':leftPos+'px','width':boxWd+'px','display':'block','padding':pading+'px 0px',});return true;},animateHeaderSlider:function(ev){var hdtmr=null;var site=this.config.site;if(ev){var newtop='0px';if((site=='healthsite')&&($('.headerRight').length>0)){newtop=$('.headerRight').position().top+'px';}}},isOnScreen:function(elem){var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop);var offsetTop=$(elem).offset().top;var windowHeight=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();var isVisible=offsetTop>scrollTop&&($(elem).height()+offsetTop)<(scrollTop+windowHeight);return isVisible;},getVisibleDivId:function(){var _this=this;var isVisible=false;if(_this.$elem.selector){var selector=_this.$elem.selector;if(selector.indexOf('#')>-1){_this.elementSelector='id';_this.$elem.id=selector.replace('#','');}else{_this.elementSelector='class';}
_this.elementAttr=selector;}else{_this.elementSelector='class';_this.elementAttr='.'+_this.config.templateClass;}
if(_this.elementSelector==='class'){$(_this.elementAttr).each(function(){isVisible=_this.isOnScreen($(this));if(isVisible===true){isVisible=$(this).attr('id');_this.visibleDivId=isVisible;_this.getVisibleContainerDimenssions(isVisible);return false;}});}else{isVisible=_this.isOnScreen($(_this.elementAttr));if(isVisible===true){isVisible=_this.elementAttr;_this.visibleDivId=isVisible;_this.getVisibleContainerDimenssions(isVisible);return false;}}
return false;},getVisibleContainerDimenssions:function(id){if(!id){return false;}
var _this=this;if(!_this.config.contentClass&&!_this.config.contentEndClass){return false;}
if($('.'+_this.config.contentEndClass).length<=0){return false;}
id=id.replace('#','');var scrollTop=parseInt($(window).scrollTop());var socialContainerTop=parseInt($('#'+id).offset().top);socialContainerTop=(socialContainerTop>0)?socialContainerTop:0;var socialContainerHeight=parseInt($('#'+id).outerHeight());socialContainerHeight=(socialContainerHeight>0)?socialContainerHeight:0;var bodyTopMargin=parseInt($('body').css('margin-top'));var containerHeight=0;if(this.config.contentClass){var containerHeight=$('.'+_this.config.contentClass+'[data-ssid="'+id+'"]').outerHeight();var containerTop=Math.round($('.'+_this.config.contentClass+'[data-ssid="'+id+'"]').offset().top);var containerDifference=containerTop-socialContainerTop;containerHeight=containerHeight+containerDifference;}else if(this.config.contentEndClass){if(_this.config.infiniteScroll){var containerHeight=parseInt($('.'+_this.config.contentEndClass+'[data-ssid="'+id+'"]').offset().top)+socialContainerHeight;}else{var containerHeight=parseInt($('.'+_this.config.contentEndClass).offset().top)+socialContainerHeight;}}
containerTop=parseInt(socialContainerTop)+parseInt(socialContainerHeight)+10;var key=containerTop+'_'+containerHeight;if(!_this.pageArr[key]){_this.pageArr[key]=id;}},createAnimateDiv:function(){if(this.animateType=='fixed'){return false;}
$('.'+this.config.animateContainerClass).remove();var html='<div class="'+this.config.animateContainerClass+'" style="position:fixed;bottom: 60px; left: 157px;display:block;cursor:pointer;" id="'+this.config.animateContainerId+'">';html+='</div>';html+='<input type="hidden" name="ssInitOpts" id="ssInitOpts" value=\''+JSON.stringify(this.config)+'\'/>';$('body').append(html);var buttonPosition=$('body').innerWidth()/2-24;$('#mnwhtsappc').css({'left':buttonPosition+'px','bottom':'-70px',});},getId:function(elem){return(elem.get(0).id)?elem.get(0).id:false;},getClass:function(elem){return(elem.get(0).clasName)?elem.get(0).id:false;},buildDependency:function(){var _this=this;if(!_this.config.contentClass){if(!_this.config.contentEndClass){_this.config.contentEndClass='iwpl-social-hide';}}
if(_this.$elem.selector){var selector=_this.$elem.selector;if(selector.indexOf('#')>-1){_this.elementSelector='id';_this.$elem.id=selector.replace('#','');}else{_this.elementSelector='class';}
_this.elementAttr=selector;}else{_this.elementSelector='class';_this.elementAttr='.'+_this.config.templateClass;}
if(_this.elementSelector==='class'){$(_this.elementAttr).each(function(){var cid=_this.getId($(this));if(!cid){var cid=_this.config.templateId+_this.templateCounter;$(this).attr('id',cid);}
$(this).attr('data-size',_this.getDevice());if(!_this.templateExists(cid)){_this.buildContainerDependency(cid);var html=_this.createTemplate(cid);$('#'+cid).html(html);}else{_this.buildTemplateDepedency(cid);}
_this.templateCounter++;});}else{var cid=_this.$elem.id;$(_this.elementAttr).attr('data-size',_this.getDevice());if(!_this.templateExists(cid)){_this.buildContainerDependency(cid);var html=_this.createTemplate(cid);$('#'+cid).html(html);}else{_this.buildTemplateDepedency(cid);}}
this.localDatabase();},buildContainerDependency:function(id){if(this.config.contentClass){var elem=$('#'+id).closest('.'+this.config.templateParentClass).siblings('.'+this.config.contentClass);if(elem.length==0){elem=$('#'+id).parents().find('.'+this.config.contentClass);}}else{var elem=$('#'+id).closest('.'+this.config.templateParentClass).siblings('.'+this.config.contentEndClass);if(elem.length==0){elem=$('#'+id).parents().find('.'+this.config.contentEndClass);}}
elem.attr('data-ssid',id);},reset:function(id,url){var storage=new Storage();var storageKey=storage.key(url);storage.delete(storageKey);id=id.replace('#','');var elem=$('#'+id);var configOpts=$('#ssInitOpts').val();configOpts=JSON.parse(configOpts);var social=new Social(elem,configOpts).init();},fetchCounts:function(id){if(!this.config.fetchSocialSignal){console.log('returning false from : fetchCounts');return false;}
var _this=this;if(!id){return false}
id=id.replace('#','');var id=_this.signalArr[id].id;var url=_this.signalArr[id].url;var title=_this.signalArr[id].title;if(_this.config.storage){var storageKey=_this.storage.key(url);if(!_this.socialResponse[storageKey]){_this.socialResponse[storageKey]={};}
var res=this.convertDbRes(_this.storage.get(storageKey));var total=res['total'];var fb=res['fb'];var tw=res['tw'];var gp=res['gp'];var expiry=res['expiry'];if(!_this.isExpired(expiry)){_this.animateTotal(id,total);}else{$.each(_this.apiArr,function(service,apiUrl){if(!_this.socialResponse[storageKey][service]){_this.socialResponse[storageKey][service]=0;}
if(service==='gp'){_this.google(url,service,id,storageKey);}else{_this.ajax(apiUrl+url,service,id,storageKey);}});}}else{$.each(_this.apiArr,function(service,apiUrl){if(service==='gp'){_this.google(url,service,id,storageKey);}else{_this.ajax(apiUrl+url,service,id,storageKey);}});}},matchKey:function(key,value){var mydomain="("+window.location.hostname+")";var pattern=new RegExp("/"+mydomain+"/","gi");var ismatch;var result=false;if((ismatch=pattern.exec(key))!==null){result=true;}
return result;},dateDiff:function(localDate){var fromTime=new Date(localDate);var toTime=new Date();var diffTime=toTime.getTime()-fromTime.getTime();var diff=Math.floor(diffTime/(1000*60*60*24));return diff},dlt_LocalStorage:function(){for(var i=0,len=localStorage.length;i<len;i++){var key=localStorage.key(i);var value=localStorage[key];var expirytime='';var mykey=this.matchKey(key,value)
if(mykey){var newvalue=jQuery.parseJSON('['+value+']');expirytime=newvalue[0]["expiry"];var expDate=new Date(expirytime);if(this.dateDiff(expDate)>0){localStorage.removeItem(key);}}}},isExpired:function(expiry){return(Date.parse(new Date())>expiry)?true:false;},getExpiry:function(minutes){minutes=(!minutes&&minutes<0)?5:minutes;minutes=parseInt(minutes);var date=new Date();date.setMinutes(date.getMinutes()+minutes);return Date.parse(date);},ajax:function(url,service,id,storageKey){var _this=this;if(service=='tw'){var count=0;return false;}
$.ajax({url:url,dataType:'jsonp',async:true,cache:false,crossDomain:true,method:'GET',timeout:5000,error:function(xhr,status,error){var totalCount=_this.buildTotal(id,service,0,storageKey);_this.animateTotal(id,totalCount);},success:function(response,status,xhr){switch(service){case'fb':if(response&&typeof response.share=='undefined'){var count=0;}else{var count=(response&&typeof response.share.share_count!=='undefined')?response.share.share_count:0;}
count=(count>0)?parseInt(count):0;break;case'tw':var count=0;break;var count=(response&&response.count!=='undefined')?response.count:0;count=(count>0)?parseInt(count):0;break;}
var totalCount=_this.buildTotal(id,service,count,storageKey);_this.animateTotal(id,totalCount);},});},cachedScript:function(url,options){options=$.extend(options||{},{dataType:"script",cache:true,url:url,async:true});return $.ajax(options);},google:function(url,service,id,storageKey){var _this=this;if(_this.gapi!==null){var clientTimer=setInterval(function(){if(_this.gapi.client){clearInterval(clientTimer);_this.processGoogleRequest(id,service,url,storageKey);}},1000);}else{_this.cachedScript(this.googleClientUrl,{parameters:{parsetags:"explicit"}}).success(function(){var clientTimer=setInterval(function(){if(gapi.client){clearInterval(clientTimer);_this.gapi=gapi;_this.processGoogleRequest(id,service,url,storageKey);}},1000);});}},processGoogleRequest:function(id,service,url,storageKey){var _this=this;_this.gapi.client.setApiKey(this.googleApiKey);var params={"method":"pos.plusones.get","id":"p","params":{"nolog":true,"id":url,"source":"widget","userId":"@viewer","groupId":"@self"},"jsonrpc":"2.0","key":"p","apiVersion":"v1"};_this.gapi.client.request({'path':'/rpc','method':'POST','body':JSON.stringify(params),'callback':function(resp){var count=0;if(resp.result&&resp.result.metadata.globalCounts&&resp.result.metadata.globalCounts.count){count=resp.result.metadata.globalCounts.count;}
count=(count>0)?parseInt(count):0;var totalCount=_this.buildTotal(id,service,count,storageKey);_this.animateTotal(id,totalCount);}});},animateTotal:function(id,total){var _this=this;if(!_this.config.animateTotal){var total=_this.formatTotal(total);$('#'+id+' '+this.totalElement).text(total);return false;}
var startNumber=$('#'+id+' '+this.totalElement).text();var suffix=(total>1000)?"k":'';var total=_this.formatTotal(total);stop=(total.indexOf('k')>-1)?total.replace(/k/g,""):total;var isFloat=false;if(stop.indexOf('.')>-1){isFloat=true;stop=parseFloat(stop);}else{isFloat=false;stop=parseInt(stop);}
var elem=$('#'+id+' '+this.totalElement);return elem.each(function(){var $this=$(this);var startNumber=$this.text().replace(/k/g,"").toString();if(isFloat===true){isFloat=true;startNumber=parseFloat(startNumber);}else{if(startNumber.indexOf('.')>-1){isFloat=true;startNumber=parseFloat(startNumber);}else{isFloat=false;startNumber=parseInt(startNumber);}}
var duration=500;var ease='linear';$({value:startNumber}).animate({value:stop},{duration:duration==undefined?10000:duration,easing:ease==undefined?"linear":ease,step:function(){var number=this.value;if(isFloat===true){number=number.toFixed(1);number=number.replace(/^(\d+)[.,](\d{1,2})\d*$/g,"$1.$2");number=number+suffix;$this.text(number);}else{$this.text(number.toFixed(0)+suffix);}},complete:function(){var currentValue=$this.text();if(currentValue.indexOf('.')>-1){currentValue=parseFloat(currentValue);}else{currentValue=parseInt(currentValue);}
if(currentValue!==stop){var number=stop;if(isFloat===true){number=number.toFixed(1);number=number.replace(/^(\d+)[.,](\d{1,2})\d*$/g,"$1.$2");number=number+suffix;$this.text(number);}else{$this.text(number+suffix);}}}});});},convertTotal:function(total){if(!total){return total;}
if(total.indexOf("k")>-1){total=total.toString();total=total.replace(/k/g,"");total=parseInt(total);total=total*1000;}
return parseInt(total);},formatTotal:function(total){if(!total){return"0";}
total=total.toString();total=(total.indexOf("k")>-1)?total.replace(/k/g,""):total;total=parseInt(total);if(total>=1000){total=(total>1000)?(total/1000).toFixed(1)+"k":total;}
return total.toString();},convertDbRes:function(res){var temp={};res=JSON.parse(res);var fb=(typeof res.fb!=='undefined')?parseInt(res.fb):0;temp['fb']=parseInt(fb);var tw=(typeof res.tw!=='undefined')?parseInt(res.tw):0;temp['tw']=parseInt(tw);var gp=(typeof res.gp!=='undefined')?parseInt(res.gp):0;temp['gp']=parseInt(gp);var total=(typeof res.total!=='undefined')?parseInt(res.total):0;temp['total']=parseInt(total);var expiry=(typeof res.expiry!=='undefined')?parseInt(res.expiry):0;temp['expiry']=parseInt(expiry);return temp;},buildTotal:function(id,service,count,storageKey){if(this.config.storage){var res=this.storage.get(storageKey);if(res!==false){res=this.convertDbRes(res);var fb=res['fb'];if(service==='fb'){fb=(fb>count)?fb:count;}
this.socialResponse[storageKey]['fb']=fb;var tw=res['tw'];if(service==='tw'){tw=(tw>count)?tw:count;}
this.socialResponse[storageKey]['tw']=tw;var gp=res['gp'];if(service==='gp'){gp=(gp>count)?gp:count;}
this.socialResponse[storageKey]['gp']=gp;var total=fb+gp+tw;}else{this.socialResponse[storageKey][service]=count;}
this.socialResponse[storageKey]['total']=total;this.socialResponse[storageKey]['expiry']=this.getExpiry(this.config.expiryMinutes);this.storage.set(storageKey,JSON.stringify(this.socialResponse[storageKey]));}else{var total=0;total=$('#'+id+' '+this.totalElement).text();total=(total.indexOf("k")>-1)?total.replace(/k/g,""):total;total=(total&&total>=0)?parseInt(total):0;total=total+count;$('#'+id+' '+this.totalElement).text(total)}
return total;},getDevice:function(){var deviceType=(this.config.dataSize)?this.config.dataSize:'large';if($('body').innerWidth()<768){deviceType='small';}
return deviceType;},buildTemplateDepedency:function(divid){var _this=this;var id='#'+divid;var url=$(id).attr('data-url');url=url.replace(/[\?=&].*/igm,'');var sizeClass=$(id).attr('data-size');var title=$(id).attr('data-title');title=encodeURIComponent(title);var tmpId=id.replace('#','');var signalArr={};signalArr.id=tmpId;signalArr.url=url;signalArr.title=title;signalArr.sizeClass=sizeClass;_this.signalArr[tmpId]=signalArr;return signalArr;},createTemplate:function(divid){var _this=this;var id='#'+divid;var signalArr=_this.buildTemplateDepedency(divid);var id=signalArr.id;var url=signalArr.url;var title=signalArr.title;var sizeClass=signalArr.sizeClass;var template='';template+='<div class="ssbxwrp">';if(this.config.displayTotal===true){template+='<div class="sstotal"><span>0</span> Shares</div>';}
var configStr=JSON.stringify(_this.config);template+='<ul class="ssbtnwrp">';$.each(this.shareArr,function(service,shareUrl){template+=(service=='wapp')?'<li class="btn_'+service+'" id="wappscroll_'+divid+'">':'<li class="btn_'+service+'">';template+=_this.getSocialLink(service,shareUrl,divid);template+='</a>';template+='</li>';});template+='</ul>';template+='<div style="clear:both"></div></div>';return template;},getSocialLink:function(service,shareUrl,divid){var _this=this;var signalArr=_this.buildTemplateDepedency(divid);var id=signalArr.id;var url=signalArr.url;var title=signalArr.title;var sizeClass=signalArr.sizeClass;var template='';switch(service){case'fb':template+='<a href="'+shareUrl+url+'" class="'+sizeClass+' eventtracker" onClick="new Social().PopupCenter(this.href,';template+="'"+title+"'"+',560,360,\''+id+'\',\''+url+'\');return false;" data-event-sub-cat="Social - Facebook">'+_this.shareAlt[service];break;case'tw':template+='<a href="'+shareUrl+url+'&text='+title+'" class="'+sizeClass+' eventtracker" onClick="new Social().PopupCenter(this.href,';template+="'"+title+"'"+',650,460,\''+id+'\',\''+url+'\');return false;"  data-event-sub-cat="Social - Twitter">'+_this.shareAlt[service];break;case'gp':template+='';break;case'wapp':template+='<a href="'+shareUrl+title+'  '+url+' Download India.com official app: https://play.google.com/store/apps/details?id=com.india.zee" class="'+sizeClass+' eventtracker" data-event-sub-cat="Social - Whatsapp">'+_this.shareAlt[service];break;}
return template;},templateExists:function(id){if($('#'+id+' li').length==Object.keys(this.shareArr).length){return true;}
return false;},localDatabase:function(){if(this.config.storage){this.storage=new Storage();}},PopupCenter:function(url,title,w,h,id,currentUrl){var configOpts=$('#ssInitOpts').val();configOpts=JSON.parse(configOpts);var dualScreenLeft=window.screenLeft!=undefined?window.screenLeft:screen.left;var dualScreenTop=window.screenTop!=undefined?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var left=((width/2)-(w/2))+dualScreenLeft;var top=((height/2)-(h/2))+dualScreenTop;var childWindow=window.open(url,title,'scrollbars=yes, width='+w+', height='+h+', top='+top+', left='+left+' ');if(window.focus){childWindow.focus();}
var timer=setInterval(function(){if(childWindow.closed){clearInterval(timer);var elem=$('#'+id);var social=new Social(elem,configOpts).reset(id,currentUrl);}},1000);},printLog:function(message){message=(message)?message:'You have not passed message to print.';console.log(message);}};Social.defaults=Social.prototype.defaults;$.fn.Social=function(options){return this.each(function(){new Social(this,options).init();});};window.Social=Social;})(window,jQuery);var Storage=function(){};Storage.prototype.get=function(key){var res=localStorage.getItem(key);return(res===null)?false:res;}
Storage.prototype.set=function(key,value){if(!key){this.printLog("Please provide key");return false;}
localStorage.setItem(key,value);return true;}
Storage.prototype.delete=function(key){if(!key){this.printLog("Please provide key");return false;}
localStorage.removeItem(key);return true;}
Storage.prototype.update=function(key,value){if(!key){this.printLog("Please provide key");return false;}
return true;}
Storage.prototype.key=function(key){if(!key||key===''&&this.url!==''){key=this.url;}
if(!key){this.printLog("Please provide key");return false;}
return key;var urlArr=key.split('/');urlArr=this.clean(urlArr);key=urlArr.pop().trim();return key;}
Storage.prototype.clean=function(haystack){var cnt=haystack.length;var newArray=Array();for(i=0;i<cnt;i++){if(haystack[i]===''){continue;}
newArray.push(haystack[i]);}
return newArray;}
Storage.prototype.printLog=function(msg){console.log(msg);return true;}
jQuery(document).ready(function(){if(jQuery('.isocial').length>0){try{var social=new Social('.isocial',{headerClass:'iwplheader-wrap .container',HeaderAnimation:true,next_elem:'.next-article a',}).init();}catch(e){console.log('social share cannot be initialized');}}});

