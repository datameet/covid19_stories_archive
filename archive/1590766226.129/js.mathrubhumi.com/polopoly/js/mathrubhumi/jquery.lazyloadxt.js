(function(b,k,l,r){function m(a,c){return a[c]===r?f[c]:a[c]}function z(){var a=k.pageYOffset;return a===r?t.scrollTop:a}function w(a,c){var b=f["on"+a];b&&(A(b)?b.call(c[0]):(b.addClass&&c.addClass(b.addClass),b.removeClass&&c.removeClass(b.removeClass)));c.trigger("lazy"+a,[c]);g()}function B(a){w(a.type,b(this).off("load error",B))}function C(a){if(u.length){a=a||f.forceLoad;y=Infinity;var c=z(),h=k.innerHeight||t.clientHeight,l=k.innerWidth||t.clientWidth,n,p;n=0;for(p=u.length;n<p;n++){var x=u[n],e=x[0],d=x.lazyLoadXT,m=!1,q=a,g;if(!H(t,e))m=!0;else if(a||!d.visibleOnly||e.offsetWidth||e.offsetHeight){if(!q){var q=e.getBoundingClientRect(),r=d.edgeX,v=d.edgeY;g=q.top+c-v-h;q=g<=c&&q.bottom>-v&&q.left<=l+r&&q.right>-r}if(q){w("show",x);d=d.srcAttr;if(d=A(d)?d(x):e.getAttribute(d))x.on("load error",B),e.src=d;m=!0}else g<y&&(y=g)}m&&(u.splice(n--,1),p--)}p||w("complete",b(t))}}function D(){1<h?(h=1,C(),setTimeout(D,f.throttle)):h=0}function g(a){!u.length||a&&"scroll"===a.type&&a.currentTarget===k&&y>=z()||(h||setTimeout(D,0),h=2)}function E(){v.lazyLoadXT()}function I(){C(!0)}var t=l.documentElement||l.body,f={autoInit:!0,selector:"img[data-src]",blankImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",throttle:99,forceLoad:false,loadEvent:"pageshow",updateEvent:"load orientationchange resize scroll touchmove focus",forceEvent:"",oninit:{removeClass:"lazy"},onshow:{addClass:"lazy-hidden"},onload:{removeClass:"lazy-hidden",addClass:"lazy-loaded"},onerror:{removeClass:"lazy-hidden"},checkDuplicates:!0},F={srcAttr:"data-src",edgeX:0,edgeY:0,visibleOnly:!0},v=b(k),A=b.isFunction,G=b.extend,J=b.data||function(a,c){return b(a).data(c)},H=b.contains||function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},u=[],y=0,h=0;b.lazyLoadXT=G(f,F,b.lazyLoadXT);b.fn.lazyLoadXT=function(a){a=a||{};var c=m(a,"blankImage"),h=m(a,"checkDuplicates"),l=m(a,"scrollContainer"),n={},p;b(l).on("scroll",g);for(p in F)n[p]=m(a,p);return this.each(function(g,e){if(e===k)b(f.selector).lazyLoadXT(a);else if(!h||!J(e,"lazied")){var d=b(e).data("lazied",1);c&&"IMG"===e.tagName&&!e.src&&(e.src=c);d.lazyLoadXT=G({},n);w("init",d);u.push(d)}})};b(l).ready(function(){w("start",v);v.on(f.loadEvent,E).on(f.updateEvent,g).on(f.forceEvent,I);b(l).on(f.updateEvent,g);f.autoInit&&E()})})(window.jQuery||window.Zepto||window.$,window,document);