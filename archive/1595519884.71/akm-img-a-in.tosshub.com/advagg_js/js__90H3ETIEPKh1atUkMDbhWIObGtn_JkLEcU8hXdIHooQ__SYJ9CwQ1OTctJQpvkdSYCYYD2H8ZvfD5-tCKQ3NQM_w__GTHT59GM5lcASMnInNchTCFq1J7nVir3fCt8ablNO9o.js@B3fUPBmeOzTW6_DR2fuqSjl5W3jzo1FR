(function($){Drupal.behaviors.itg_akamai_block_refresh={attach:function(context){$.each(Drupal.settings.itg_akamai_block_refresh.settings,function(key,settings){var element=settings.element;if(typeof element==="undefined")return;setBlockRefresh("#"+element,".content",settings["auto"],settings["manual"],settings["init"],settings["timer"],settings["arguments"],settings["block"]["block"],settings["block"]["delta"],false);if(settings["panels"]){element=element.replace("block-","pane-");if(element.search("-views-")!=
-1){element=element.replace("-block","");element=element.replace("-views-","-views.pane-")}setBlockRefresh("."+element,".pane-content",settings["auto"],settings["manual"],settings["init"],settings["timer"],settings["arguments"],settings["block"]["block"],settings["block"]["delta"],true)}});function setBlockRefresh(element,element_content,auto,manual,init,timer,arguments,block,delta,panels){if(!$(element).length||$(element).hasClass("block-refresh-processed"))return;$(element).addClass("block-refresh-processed");
args="";query="";if(arguments){$.each(Drupal.settings.itg_akamai_block_refresh.args,function(index,arg){args+="/"+arg});query=Drupal.settings.itg_akamai_block_refresh.query}var path=Drupal.settings.basePath+Drupal.settings.pathPrefix+"itg_akamai_block_refresh/"+block+"/"+delta+args+query;if(auto&&context==document)setInterval(function(){BlockRefreshContent(path,element,element_content,panels,false)},timer*1E3);if(manual)addBlockRefreshButton(path,element,element_content,panels,true);if(init&&context==
document)BlockRefreshContent(path,element,element_content,panels,false)}function addBlockRefreshButton(path,element,element_content,panels,manual){var refresh_link='<div class="block-refresh-button">'+Drupal.t("Refresh")+"</div>";if($(element+" h2").length)$(element+" h2").before(refresh_link);else $(element+" "+element_content).before(refresh_link);$(element+" .block-refresh-button").click(function(){$(this).addClass("block-refresh-button-throbbing");BlockRefreshContent(path,element,element_content,
panels,manual)})}function BlockRefreshContent(path,element,element_content,panels,manual){$.get(path,function(data){var contents=$(data).html();var oldh2=$(element+" h2.pane-title");$(element).html(contents);if(panels){if(oldh2.length)$(element+" h2:first-child").replaceWith(oldh2);else $(element+" h2:first-child").remove();$(element+" .content").removeClass("content").addClass("pane-content")}if(manual)addBlockRefreshButton(path,element,element_content,panels,manual);Drupal.attachBehaviors()})}}}})(jQuery);;/**/
Drupal.behaviors.itg_widgets={attach:function(context,settings){var base_url=settings.itg_widget.settings.base_url;var setttl=settings.itg_widget.settings.setttl;var actual_ttl=settings.itg_widget.settings.actual_ttl;jQuery("body.node-type-story div.story-associate-content .stryimg").click(function(){jQuery(".story-associate-content div.image-alt").hide()});jQuery("body.node-type-story div.story-associate-content").on("click","#videogallery-iframe #close-big-story",function(){jQuery(".story-associate-content div.image-alt").show()});
jQuery("div.big-news-content-videogallery a.has-ajax-big-story").click(function(){jQuery(".big-story-col-1 .loading-popup").show();var nid=jQuery(this).attr("data-nid");jQuery.get("big-story-video-gallery/"+nid,function(data){jQuery("#videogallery-iframe").html(data);videoGallery();jQuery("#videogallery-iframe").on("click","#close-big-story",function(){jQuery("#videogallery-iframe").html(" ");jQuery("#videogallery-iframe").hide()})})});jQuery("body").on("click",".slick-track img",function(e){jQuery(".iframe-video-dailymotion").each(function(){var url=
jQuery(this).attr("src");jQuery(this).removeAttr("src");var Updatedurl=updateQueryStringParameter(url,"autoplay","0");jQuery(this).attr("src",Updatedurl)})});function updateQueryStringParameter(uri,key,value){var re=new RegExp("([?&])"+key+"=.*?(&|$)","i");var separator=uri.indexOf("?")!==-1?"&":"?";if(uri.match(re))return uri.replace(re,"$1"+key+"="+value+"$2");else return uri+separator+key+"="+value}function videoGallery(){jQuery("#videogallery-iframe").show();jQuery(".big-story-col-1 .loading-popup").hide();
jQuery(".videogallery-slider").slick({slidesToShow:1,slidesToScroll:1,prevArrow:'<i class="fa fa-chevron-left slick-prev" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-chevron-right slick-next" aria-hidden="true"></i>',fade:false,asNavFor:".video-slider-images ul"});jQuery(".video-slider-images ul").slick({slidesToShow:7,slidesToScroll:1,asNavFor:".videogallery-slider",dots:false,centerMode:false,arrows:true,variableWidth:true,focusOnSelect:true,responsive:[{breakpoint:1024,settings:{slidesToShow:7,
slidesToScroll:1,arrows:false}},{breakpoint:600,settings:{slidesToShow:4,arrows:false,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:3,arrows:false,slidesToScroll:1}}]})}var videoIframe=jQuery(".story-associate-content #videogallery-iframe");var strImg=jQuery(".story-associate-content .stryimg");strImg.click(function(){var strImgHeight=strImg.height();videoIframe.show(1E3,function(){var widgets_type=jQuery(".associate-content-block").attr("data-widget");var widgets_type_array=widgets_type.split("-");
var widgets_type=widgets_type_array[0];var widgets_id=widgets_type_array[1];var imgurl=base_url+"/sites/all/themes/itg/images/reload.gif";videoIframe.append('<img class="loading-popup" src="'+imgurl+'" alt="loading image" />');jQuery.ajax({url:Drupal.settings.basePath+"associate-photo-video-content/"+widgets_type+"/"+widgets_id,method:"post",beforeSend:function(){},success:function(data){videoIframe.html(data);videoGallery();videoIframe.css("height",strImgHeight)}})});strImg.hide(1E3)});videoIframe.on("click",
"#close-big-story",function(){videoIframe.hide(1E3,function(){videoIframe.empty()});strImg.show(1E3)});var videoIframe=jQuery(".story-associate-content #videogallery-iframe");var strImg=jQuery(".story-associate-content .stryimg");strImg.click(function(){videoIframe.show(1E3,function(){var widgets_type=jQuery(".associate-content-block").attr("data-widget");var widgets_type_array=widgets_type.split("-");var widgets_type=widgets_type_array[0];var widgets_id=widgets_type_array[1];var imgurl=base_url+
"/sites/all/themes/itg/images/reload.gif";videoIframe.append('<img class="loading-popup" src="'+imgurl+'" alt="loading image" />');jQuery.ajax({url:Drupal.settings.basePath+"associate-photo-video-content/"+widgets_type+"/"+widgets_id,method:"post",beforeSend:function(){},success:function(data){videoIframe.html(data);videoGallery();videoIframe.css("height","auto")}})});strImg.hide(1E3)});videoIframe.on("click","#close-big-story",function(){videoIframe.hide(1E3,function(){videoIframe.empty();videoIframe.css("height",
"340px")});strImg.show(1E3)});if(jQuery(".story-embed-video").length){var embed_flag=false;jQuery(window).scroll(function(){if(!embed_flag){embed_flag=true;jQuery(".story-embed-video").each(function(index){var iframeSrc=jQuery("#story-embed-iframe-"+index).val();if(iframeSrc!==undefined){var iframeData='<iframe allowfullscreen="" class="multy-video-iframe" frameborder="0" height="500" scrolling="no" src="'+iframeSrc+'" width="648"></iframe>';jQuery(this).html(iframeData)}})}})}jQuery("#edit-state1").change(function(){var getval=
jQuery(this).val();if(getval==0)getval="";jQuery("#edit-state").val(getval)});jQuery("#edit-cat1_id").change(function(){var getval=jQuery(this).val();if(getval==0)getval="";jQuery("#edit-cat_id").val(getval)});jQuery(".key-radio").live("click",function(){var getname=jQuery(this).attr("name");var getstatus=jQuery(this).val();jQuery.ajax({url:Drupal.settings.basePath+"update-keycandidate-status",type:"post",beforeSend:function(){jQuery("#widget-ajex-loader").show()},data:{"fname":getname,"status":getstatus},
success:function(data){jQuery("#widget-ajex-loader").hide()},error:function(xhr,desc,err){}})});jQuery(".remove_from_nodequeue_draggable_view").click(function(){var nid=jQuery(this).attr("data-nid");var qid=jQuery(this).attr("data-queueid");var view_name=jQuery(this).attr("data-view");var view_page=jQuery(this).attr("data-page");var c_tid=get_url_parameter("field_story_category_tid");var type=get_url_parameter("type");if(typeof c_tid!="undefined"&&c_tid!==null&&typeof type!="undefined"&&type!==null){if(confirm("Are you sure you want to move this content ?")){jQuery("#widget-ajex-loader").css("display",
"block");jQuery.get("remove_from_widgets_section/"+nid+"/"+qid+"/"+view_name+"/"+view_page+"/"+c_tid+"/"+type,function(data,status){if(data=="deleted");})}}else if(confirm("Are you sure you want to move this content ?")){jQuery("#widget-ajex-loader").css("display","block");jQuery.get("remove_from_widgets/"+nid+"/"+qid+"/"+view_name+"/"+view_page,function(data,status){if(data=="deleted")window.location.reload();window.location.reload()})}});jQuery(".add-so-sorry-extra-data").click(function(){var extra_type=
jQuery(this).val();var nid=jQuery(this).attr("data-nid");window.location.replace("add-so-sorry-extra-data/"+nid+"/"+extra_type);jQuery("#widget-ajex-loader").css("display","block")});jQuery(".remove-so-sorry-extra-data").click(function(){jQuery("#widget-ajex-loader").css("display","block")});jQuery(".widgets-view .view-link").parent().attr("target","_blank");jQuery(".view-section-wise-content-ordering-list span.move-link").on("click",function(){if(confirm("Are you sure you want to remove this content ?"))return true;
else return false});jQuery(".view-display-id-poll_widget_list span.move-link").on("click",function(){if(confirm("Are you sure you want to remove this content ?"))return true;else return false})}};
var get_url_parameter=function get_url_parameter(sParam){var sPageURL=decodeURIComponent(window.location.search.substring(1)),sURLVariables=sPageURL.split("&"),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split("=");if(sParameterName[0]===sParam)return sParameterName[1]===undefined?true:sParameterName[1]}};
jQuery(document).ready(function(){jQuery(".cat-wraper").html(jQuery(".form-item-cat1-id").html());jQuery(".state-wraper").html(jQuery(".form-item-state1").html());jQuery(".form-item-cat1-id").remove();jQuery(".form-item-state1").remove();jQuery("#edit-cat1-id").attr("name","cat_id");jQuery("#edit-state1").attr("name","state");jQuery(".custom-weight-draggable input[type=number]").change(function(){jQuery(this).next().children().find("option").remove().end().append('<option value="'+jQuery(this).val()+
'">'+jQuery(this).val()+"</option>").val(jQuery(this).val())});jQuery("select#fake-soruce-type").on("change",function(){var soruce_type=jQuery(this).val();jQuery("#edit-field-story-source-type-value").val(soruce_type)});jQuery("#views-exposed-form-most-read-widget-most-read-widget-contents #edit-category-tid > option[value=All]").html("- Any -");jQuery("#views-exposed-form-most-read-widget-most-read-widget-list #edit-category-tid > option[value=All]").html("- Any -");jQuery("#views-exposed-form-special-how-i-made-it-special-how-made-it-widget-contents #edit-category-tid > option[value=All]").html("- Any -");
jQuery("#views-exposed-form-special-how-i-made-it-special-how-made-widget-list #edit-category-tid > option[value=All]").html("- Any -");jQuery("#create-view-custom-widget").on("click",function(e){e.preventDefault();jQuery("#cboxOverlay").html("..");jQuery.colorbox({href:"itg-custom-widget-content?widget_name_delete",width:"900",height:"600",iframe:true,overlayClose:false,onClosed:function(){jQuery("#widget-ajex-loader").show();location.reload(true)}})});jQuery(".number-field").on("change",function(){jQuery("#edit-submit").removeAttr("disabled")})});
jQuery(".delete-link-anchor").click(function(){if(confirm("Are you sure want to delete this content."))jQuery("#widget-ajex-loader").show();else return false});
jQuery("#edit-widget-name").on("keyup",function(){var widget_name=jQuery(this).val();if(widget_name.length>0)jQuery.ajax({url:"custom_widget_name_list/"+jQuery(this).val(),success:function(data){if(data!=null){jQuery(".error-message-widget").remove();jQuery(".form-item-widget-name").append("<div class='messages error error-message-widget'><ul><li>Widget <b>"+widget_name+"</b> already exists in database. Please change it or new content will add in <b>"+widget_name+"</b> widget..</li></ul></div>")}else jQuery(".error-message-widget").remove()}})});
jQuery(document).ajaxSuccess(function(){var forms=["views-exposed-form-story-widget-page-1","views-exposed-form-story-widget-top-takes-video","views-exposed-form-story-widget-trending-videos","views-exposed-form-story-widget-watch-right-now","views-exposed-form-highlights-widget-highlights-widget-conent","views-exposed-form-photo-carousel-widget-photo-carousel-list","views-exposed-form-photo-carousel-widget-video-carousel-list","views-exposed-form-home-page-feature-widget-page-1","views-exposed-form-section-wise-draggable-content-order-dont-miss-content",
"views-exposed-form-section-wise-draggable-content-order-we-may-suggest-widget","views-exposed-form-most-read-widget-most-read-widget-contents","views-exposed-form-section-wise-draggable-content-order-do-not-miss-tv","views-exposed-form-section-wise-draggable-content-order-today-specials"];for(i=0;i<forms.length;i++){jQuery("#"+forms[i]+" #edit-field-story-category-tid-select-1 > option[value=0]").html("- Any -");jQuery("#"+forms[i]+" #edit-shs-term-node-tid-depth-select-1 > option[value=0]").html("- Any -");
jQuery("#"+forms[i]+" #edit-category-tid-select-1 > option[value=0]").html("- Any -")}});jQuery(window).load(function(){try{if(jQuery("#flexslider").length&&typeof flexslider=="function")jQuery(".flexslider-video").flexslider({animation:"slide"})}catch(err){console.log(err.message)}});
jQuery(document).ready(function(){jQuery(".load-more-btn-author a").click(function(){jQuery(".load-more-btn-author a").addClass("disabled-cls-load");var nid=jQuery(this).attr("data-nidvalue");var totalrecords=jQuery(this).attr("data-totalrecords");var start_val=parseInt(jQuery(this).attr("data-startvalue"))+20;jQuery(this).attr("data-startvalue",start_val);var post_data="nid="+nid+"&start="+start_val;if(start_val+20>=totalrecords)jQuery(".load-more-btn-author").html("");jQuery.ajax({"url":Drupal.settings.baseUrl.baseUrl+
"/ajax/authors-load-more","data":post_data,"type":"GET",beforeSend:function(){},"success":function(result){var obj=jQuery.parseJSON(result);var str="";if(obj.length>0){jQuery.each(obj,function(index,value){str+='<li class="story-'+value.entity_id+'"><div class="tile">';if(typeof value.sm_field_custom_story_small_large_url!="undefined"&&value.sm_field_custom_story_small_large_url!==null)str+='<figure> <a href="/'+value.path_alias+'"><img src="'+value.sm_field_custom_story_small_large_url[0]+'" alt="'+
value.label+'" title="'+value.label+'" width="170" height="96"></a> </figure>';str+='<div class="author-detail-wrap"><h2 title="'+value.label+'"> <a href="/'+value.path_alias+'">'+value.label+"</a></h2>";if(typeof value.sm_common_kicker_text!="undefined"&&value.sm_common_kicker_text!==null)str+="<p>"+value.sm_common_kicker_text[0]+"</p>";str+="</div></div></li>"});jQuery("ul.author-story-wrapper").append(str)}}});jQuery(".load-more-btn-author a").removeClass("disabled-cls-load")})});;/**/
/* Source and licensing information for the line(s) below can be found at https://www.indiatoday.in/sites/all/modules/custom/itg_story/js/itg_story_readlater_refresh.js. */
jQuery(document).ready(function(){var story_nid=Drupal.settings.itg_story.settings.story_nid,readLoginCheck=getCookie('itg_forced_login');try{if(readLoginCheck!=''&&readLoginCheck!='null'&&readLoginCheck!==undefined&&readLoginCheck!==null)jQuery.ajax({url:Drupal.settings.itg_widget.settings.base_url+'/itg-read-later-refresh/'+story_nid,type:'post',data:'',beforeSend:function(){},success:function(userdata){var obj=jQuery.parseJSON(userdata);if(userdata.length!=0){if(obj.type=='buzz')jQuery('.buzz-akamai-refresh-read-later').html(obj.html_render);if(obj.default_type=='normal')jQuery('.not-buzz-case').html(obj.default_render)}},error:function(xhr,desc,err){}})}catch(e){};try{var u_name=Drupal.settings.itg_story.settings.u_name,u_mail=Drupal.settings.itg_story.settings.u_mail;jQuery('#edit-fname').val(u_name);jQuery('#edit-askname').val(u_name);jQuery('#edit-femail').val(u_mail);jQuery('#edit-askemail').val(u_mail)}catch(e){}});;
/* Source and licensing information for the above line(s) can be found at https://www.indiatoday.in/sites/all/modules/custom/itg_story/js/itg_story_readlater_refresh.js. */
