function isElementInViewport(e){var t=e.getBoundingClientRect();return t.top<=(window.innerHeight||document.documentElement.clientHeight)/2&&t.left>=0&&t.bottom>=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}var isInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},isdown=!1,curindex=1,isstopScroll=!0,idsArr=[];function scrollDetect(){var e=0;window.onscroll=function(){let t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&e<=t?(e=t,isdown=!0):(e=t,isdown=!1)}}$(document).ready(function(){window.addEventListener("scroll",loadContent),scrollDetect()});var loadContent=function(){var e=document.querySelectorAll(".trend-video");[].forEach.call(e,function(e){if(isElementInViewport(e)&&(isdown&&document.getElementById("index").value!=curindex&&isstopScroll)){var t=$(e).attr("fetch"),i=document.getElementById("articleId"+t).value;console.info("Next Article called !!!"+t),idsArr.includes(i)||(idsArr.push(i),nextArticle(i),isstopScroll=!1)}}),1!=curindex&&checkRefreshContents()},curno=0;function checkRefreshContents(){if(isdown){var e=document.querySelectorAll("h1");[].forEach.call(e,function(e){if(isInViewport(e)){var t=$(e).attr("id");curno!=t&&refreshContents(t)}})}if(!isdown){e=document.querySelectorAll(".trend-video");[].forEach.call(e,function(e){if(isElementInViewport(e)){var t=$(e).attr("fetch");curno!=t&&(console.info("Reverse called "+t),refreshContents(t))}})}}function nextArticle(e){var t=document.getElementById("subcat").value,i=document.getElementById("pcat").value,d=document.getElementById("pubdate").value;console.info("Next Article Called !!!"),$.get("/Resources/midday/jsp/articleDetail/ajaxAricleDetail.jsp?id="+e+"&subcat="+t+"&pcat="+i+"&pubdate="+d,function(e,t){null!=e?($("#loadDiv").hide(),binddata(e)):($("#loadDiv").hide(),console.error("Error : "+t))})}function binddata(e){xmlDoc=$.parseXML(e.trim()),$xml=$(xmlDoc);var t='<div class="oneplus3"><div class="next-story"><div></div><span class="storytxt">NEXT STORY</span></div></div><div class="container">';t=(t=t.concat(socialIcons(curindex))).concat('<div class="box648" id="leftid'+curindex+'"><div class="article-top"><main style="display:block;" role="main">'),$($xml).each(function(){var e=$(this).find("doc");$(e).each(function(e){var i=$(this).find("id").text(),d=$(this).find("headline").text(),n=$(this).find("modifiedDate").text(),a=$(this).find("author").text(),o=$(this).find("location_str").text(),c=$(this).find("pub_date").text(),r=$(this).find("summary").text(),l=$(this).find("detail_image_path").text(),s=$(this).find("image_caption").text(),u=$(this).find("description").text(),m=$(this).find("subStoryDescription").text(),p=$(this).find("subStoryHeadline").text(),v=$(this).find("address").text(),g=$(this).find("aSubCategory").text(),h=$(this).find("parentCatName").text(),y=$(this).find("tags").text(),f=$(this).find("relatedVideo>title").text(),x=$(this).find("relatedVideo>jw_player").text(),I=$(this).find("aTags").text(),b=$(this).find("wCount").text(),E=$(this).find("flag").text(),w=$(this).find("aAge").text(),_=$(this).find("deviceCategory").text(),B=$(this).find("typeOfStrory").text(),C=$(this).find("articleType").text(),S=$(this).find("cre").text(),M=$(this).find("publishedbyname").text(),T=$(this).find("urlTitle").text(),D=$(this).find("dim_genre").text();if(console.info("url ======= "+T),t=t.concat('<h1 id="'+(curindex+1)+'">'+d+"</h1>"),t=(t=(t=""!=n?t.concat('<span class="timestamp">Updated: '+n+" | "+a+" | "+o+"</span>"):t.concat('<span class="timestamp">Published: '+c+" | "+a+" | "+o+"</span>")).concat('<div><input type="hidden" id="aTags'+(curindex+1)+'" value="'+I+'"/><input type="hidden" id="wCount'+(curindex+1)+'" value="'+b+'"/><input type="hidden" id="flag'+(curindex+1)+'" value="'+E+'"/><input type="hidden" id="aAge'+(curindex+1)+'" value="'+w+'"/><input type="hidden" id="deviceCategory'+(curindex+1)+'" value="'+_+'"/><input type="hidden" id="typeOfStrory'+(curindex+1)+'" value="'+B+'"/><input type="hidden" id="articleType'+(curindex+1)+'" value="'+C+'"/><input type="hidden" id="cre'+(curindex+1)+'" value="'+S+'"/><input type="hidden" id="publishedbyname'+(curindex+1)+'" value="'+M+'"/><input type="hidden" id="subcategory'+(curindex+1)+'" value="'+g+'"/><input type="hidden" id="parentCategory'+(curindex+1)+'" value="'+h+'"/><input type="hidden" id="articleId'+(curindex+1)+'" value="'+i+'"/><input type="hidden" id="url'+(curindex+1)+'" value="'+T+'"/><input type="hidden" id="pdate'+(curindex+1)+'" value="'+c+'"/><input type="hidden" id="mdate'+(curindex+1)+'" value="'+n+'"/><input type="hidden" id="author'+(curindex+1)+'" value="'+a+'"/><input type="hidden" id="dim_genre'+(curindex+1)+'" value="'+D+'"/></div>')).concat('<div class="articlebody"><h2 class="short-descrp">'+r+'</h2><div class="atrFirstImg"><img src="//images.mid-day.com/'+l+'" alt="'+s+'" /><div class="figcapton">'+s+'</div></div><div class = "article-des" id="article-des">'+u+"</div></div>"),""!=m&&(t=t.concat('<div class="hightbx">'+p+m+"</div>")),t=t.concat("<p>"+v+'</p><div class="adsBox"  id="target6" style="text-align: center; clear: both; margin-bottom: 40px;"></div><div id="related"></div><div class="subscriptionBox-detail" ><p><strong>Sign up for all the latest news, top galleries and trending videos from Mid-day.com</strong></p><a class="subscription-btn" href = "javascript:void(0);" id="subscription-id1">Subscribe</a></div></main><aside><div class="mgid-pusher"><div id="outer'+curindex+'"></div></div>'),""!=y){t=t.concat('<div class="tags"><p class="blue">Tags</p>');var A=$(this).find("tags>tag");$(A).each(function(e){var i=$(this).find("tag>name").text(),d=$(this).find("tag>url").text();t=t.concat('<a target="_blank" href="/search/'+d+'-all"><span></span>'+i+"</a>")}),t=t.concat("</div>")}t=t.concat('<div class="trend-video" id="trend-'+(curindex+1)+'" fetch="'+(curindex+1)+'"><p>'+f+"</p>"+x+"</div></aside></div></div>"),document.getElementById("subcat").value=g,document.getElementById("pcat").value=h,document.getElementById("pubdate").value=c,document.getElementById("artId").value=i})}),t=t.concat(rightSideData()),$("#dataappend").append(t),document.getElementById("alsoRead"+curindex).innerHTML=document.getElementById("alsoRead").innerHTML,document.getElementById("recommended"+curindex).innerHTML=document.getElementById("recommended").innerHTML,lsrefreshMGID(curindex),adsCode(curindex),document.getElementById("latest"+curindex).innerHTML=document.getElementById("latest").innerHTML,refreshMGID(curindex),$(document).ready(function(){$("img.lazy").lazyload({effect:"fadeIn",failure_limit:10})}),document.getElementById("index").value=curindex;var i="socialid"+curindex,d="leftid"+curindex,n="rightid"+curindex;newScroll(),$("#"+i+", #"+d+", #"+n).theiaStickySidebar({additionalMarginTop:98}),curindex+=1,isstopScroll=!0,$("#loadDiv").show()}function socialIcons(e){return'<div class="box40" id="socialid'+e+'"><div class="leftSlide"><div class="socialLeft"><div class="social-ic"><a id="facebookIds'+(e+1)+'" rel="noopener" target="_blank" class="fb-ic">Facebook</a><a id="twitterIds'+(e+1)+'" rel="noopener" target="_blank" class="tw-ic">Twitter</a><a id="pinIds'+(e+1)+'" rel="noopener" target="_blank" class="pint-ic">Pinterest</a><a class="feedback-ic" id="hey'+(e+1)+'">Feedback</a></div></div></div></div>'}function refresSocialIcons(e){$("#facebookIds"+e).attr("href","https://www.facebook.com/sharer.php?u="+window.location),$("#twitterIds"+e).attr("href","https://twitter.com/share?url="+window.location+"&text="+headlinejs),$("#pinIds"+e).attr("href","https://www.pinterest.com/pin/create/button/?url="+window.location)}function rightSideData(){return'<div class="box300" id="rightid'+curindex+'"><div class="ad-box commonrhs"><aside><div id="midday_ros_top_300x250'+curindex+'"></div></aside></div><div id="alsoRead'+curindex+'"></div><div class="mgid-pusher-rhs" style="margin-bottom:15px"><aside><div id="lsmgid'+curindex+'"></div></aside></div><div id="recommended'+curindex+'"></div><div class="commonrhs ad-box"><div id="midday_ros_medium_300x250'+curindex+'"></div><aside><div id="target1"></div></aside></div><div id="latest'+curindex+'"></div></div>'}function adsCode(e){var t=document.getElementById("subcategory"+e).value,i=document.getElementById("parentCategory"+e).value.toLowerCase()+"_"+t.toLowerCase();console.info("catname : "+i),googletag.cmd.push(function(){googletag.defineSlot("/1025214/Midday_desktop/"+i+"/detail_top_300x250",[[300,250],[300,600]],"midday_ros_top_300x250"+e).addService(googletag.pubads()),googletag.defineSlot("/1025214/Midday_desktop/"+i+"/detail_medium_300x250",[[300,600],[300,250]],"midday_ros_medium_300x250"+e).addService(googletag.pubads()),googletag.pubads().collapseEmptyDivs(),googletag.pubads().disableInitialLoad(),googletag.enableServices(),googletag.display("midday_ros_top_300x250"+e),googletag.display("midday_ros_medium_300x250"+e)}),console.info("Ads curindex "+e)}function refreshContents(e){console.info("REfresh called !!!!!");var t=document.getElementById("url"+e).value,i=document.getElementById("articleId"+e).value,d=document.getElementById(e).innerHTML,n=document.getElementById("parentCategory"+e).value;window.history.pushState(null,"articles","/articles/"+t+"/"+i+"?ref=component_article_infinitescroll_"+e),document.title=d+" - "+n,gacodeFresh(e),refresSocialIcons(e),curno=e}function gacodeFresh(e){var t=document.getElementById("pdate"+e).value,i=document.getElementById("mdate"+e).value,d=document.getElementById("aTags"+e).value,n=document.getElementById("wCount"+e).value,a=document.getElementById("flag"+e).value,o=document.getElementById("author"+e).value,c=document.getElementById("parentCategory"+e).value,r=document.getElementById("aAge"+e).value,l=document.getElementById("subcategory"+e).value,s=document.getElementById("dim_genre"+e).value,u=document.getElementById("articleType"+e).value,m=document.getElementById("publishedbyname"+e).value,p=document.getElementById("typeOfStrory"+e).value,v=document.getElementById("cre"+e).value,g=document.getElementById("articleId"+e).value;""==s&&(s="NA"),""==u&&(u="NA"),""==m&&(m="NA"),""==p&&(p="NA"),""==v&&(v="NA"),dataLayer.push({event:"pageview",publish_date:t,update_date:i,article_tags:d,word_count:n,flag:a,article_author:o,article_category:c,article_age:r,article_subcategory:l,genre:s,pagetype:"detail",online_offline:u,Editor:m,Type_Of_Story:p,CRE:v,storyID:g,hittype:"page"})}function refreshMGID(e){document.getElementById("outer"+e).innerHTML='<div id="M324057ScriptRootC323320"><div id="M324057PreloadC323320"> Loading... </div></div>',function(){var e=new Date,t=document,i="createElement",d="appendChild",n="display",a="none",o="getElementById",c=t.location.protocol,r=0==c.indexOf("http")?c:"https:",l=t[i]("iframe");l.style[n]=a,t[o]("M324057ScriptRootC323320")[d](l);try{(u=l.contentWindow.document).open(),u.writeln("<html><body></body></html>"),u.close();var s=u.body}catch(e){var u=t;s=t[o]("M324057ScriptRootC323320")}var m=u[i]("div");m.id="MG_ID",m.style[n]=a,m.innerHTML=323320,s[d](m);var p=u[i]("script");p.async="async",p.defer="defer",p.charset="utf-8",p.src=r+"//jsc.mgid.com/m/i/mid-day.com.323320.js?t="+e.getYear()+e.getMonth()+e.getUTCDate()+e.getUTCHours(),s[d](p)}()}function lsrefreshMGID(e){document.getElementById("lsmgid"+e).innerHTML='<div id="M324057ScriptRootC317352"><div id="M324057PreloadC317352"> Loading... </div></div>',function(){var e=new Date,t=document,i="createElement",d="appendChild",n="display",a="none",o="getElementById",c=t.location.protocol,r=0==c.indexOf("http")?c:"https:",l=t[i]("iframe");l.style[n]=a,t[o]("M324057ScriptRootC317352")[d](l);try{(u=l.contentWindow.document).open(),u.writeln("<html><body></body></html>"),u.close();var s=u.body}catch(e){var u=t;s=t[o]("M324057ScriptRootC317352")}var m=u[i]("div");m.id="MG_ID",m.style[n]=a,m.innerHTML=317352,s[d](m);var p=u[i]("script");p.async="async",p.defer="defer",p.charset="utf-8",p.src=r+"//jsc.mgid.com/m/i/mid-day.com.317352.js?t="+e.getYear()+e.getMonth()+e.getUTCDate()+e.getUTCHours(),s[d](p)}()}